"use strict";var Zmt=Object.create;var Ik=Object.defineProperty;var bSe=Object.getOwnPropertyDescriptor;var eht=Object.getOwnPropertyNames;var tht=Object.getPrototypeOf,rht=Object.prototype.hasOwnProperty;var vSe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),xSe=t=>{throw TypeError(t)};var s=(t,e)=>Ik(t,"name",{value:e,configurable:!0});var _h=(t,e)=>()=>(t&&(e=t(t=0)),e);var Q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ra=(t,e)=>{for(var r in e)Ik(t,r,{get:e[r],enumerable:!0})},ISe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of eht(e))!rht.call(t,i)&&i!==r&&Ik(t,i,{get:()=>e[i],enumerable:!(n=bSe(e,i))||n.enumerable});return t};var Ne=(t,e,r)=>(r=t!=null?Zmt(tht(t)):{},ISe(e||!t||!t.__esModule?Ik(r,"default",{value:t,enumerable:!0}):r,t)),nht=t=>ISe(Ik({},"__esModule",{value:!0}),t),gd=(t,e,r,n)=>{for(var i=n>1?void 0:n?bSe(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&Ik(e,r,i),i},na=(t,e)=>(r,n)=>e(r,n,t);var $se=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&xSe("Object expected");var n,i;r&&(n=e[vSe("asyncDispose")]),n===void 0&&(n=e[vSe("dispose")],r&&(i=n)),typeof n!="function"&&xSe("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},zse=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,c,l,u){return u=Error(l),u.name="SuppressedError",u.error=a,u.suppressed=c,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var c=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(c).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};var importMetaUrlShim,d=_h(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var wSe=Q(Yse=>{d();var TSe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Yse.encode=function(t){if(0<=t&&t<TSe.length)return TSe[t];throw new TypeError("Must be between 0 and 63: "+t)};Yse.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,c=43,l=47,u=26,f=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+f:t==c?62:t==l?63:-1}});var Xse=Q(Jse=>{d();var _Se=wSe(),Kse=5,SSe=1<<Kse,RSe=SSe-1,kSe=SSe;function iht(t){return t<0?(-t<<1)+1:(t<<1)+0}s(iht,"toVLQSigned");function oht(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(oht,"fromVLQSigned");Jse.encode=s(function(e){var r="",n,i=iht(e);do n=i&RSe,i>>>=Kse,i>0&&(n|=kSe),r+=_Se.encode(n);while(i>0);return r},"base64VLQ_encode");Jse.decode=s(function(e,r,n){var i=e.length,o=0,a=0,c,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=_Se.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));c=!!(l&kSe),l&=RSe,o=o+(l<<a),a+=Kse}while(c);n.value=oht(o),n.rest=r},"base64VLQ_decode")});var _k=Q(Bu=>{d();function sht(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(sht,"getArg");Bu.getArg=sht;var PSe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,aht=/^data:.+\,.+$/;function ZN(t){var e=t.match(PSe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(ZN,"urlParse");Bu.urlParse=ZN;function Tk(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(Tk,"urlGenerate");Bu.urlGenerate=Tk;function Zse(t){var e=t,r=ZN(t);if(r){if(!r.path)return t;e=r.path}for(var n=Bu.isAbsolute(e),i=e.split(/\/+/),o,a=0,c=i.length-1;c>=0;c--)o=i[c],o==="."?i.splice(c,1):o===".."?a++:a>0&&(o===""?(i.splice(c+1,a),a=0):(i.splice(c,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,Tk(r)):e}s(Zse,"normalize");Bu.normalize=Zse;function BSe(t,e){t===""&&(t="."),e===""&&(e=".");var r=ZN(e),n=ZN(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),Tk(r);if(r||e.match(aht))return e;if(n&&!n.host&&!n.path)return n.host=e,Tk(n);var i=e.charAt(0)==="/"?e:Zse(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,Tk(n)):i}s(BSe,"join");Bu.join=BSe;Bu.isAbsolute=function(t){return t.charAt(0)==="/"||PSe.test(t)};function cht(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(cht,"relative");Bu.relative=cht;var DSe=function(){var t=Object.create(null);return!("__proto__"in t)}();function NSe(t){return t}s(NSe,"identity");function lht(t){return LSe(t)?"$"+t:t}s(lht,"toSetString");Bu.toSetString=DSe?NSe:lht;function uht(t){return LSe(t)?t.slice(1):t}s(uht,"fromSetString");Bu.fromSetString=DSe?NSe:uht;function LSe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(LSe,"isProtoString");function dht(t,e,r){var n=wk(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:wk(t.name,e.name)}s(dht,"compareByOriginalPositions");Bu.compareByOriginalPositions=dht;function fht(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=wk(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:wk(t.name,e.name)}s(fht,"compareByGeneratedPositionsDeflated");Bu.compareByGeneratedPositionsDeflated=fht;function wk(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(wk,"strcmp");function pht(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=wk(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:wk(t.name,e.name)}s(pht,"compareByGeneratedPositionsInflated");Bu.compareByGeneratedPositionsInflated=pht;function mht(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(mht,"parseSourceMapInput");Bu.parseSourceMapInput=mht;function hht(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=ZN(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=BSe(Tk(n),e)}return Zse(e)}s(hht,"computeSourceURL");Bu.computeSourceURL=hht});var rae=Q(MSe=>{d();var eae=_k(),tae=Object.prototype.hasOwnProperty,Jw=typeof Map<"u";function p1(){this._array=[],this._set=Jw?new Map:Object.create(null)}s(p1,"ArraySet");p1.fromArray=s(function(e,r){for(var n=new p1,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");p1.prototype.size=s(function(){return Jw?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");p1.prototype.add=s(function(e,r){var n=Jw?e:eae.toSetString(e),i=Jw?this.has(e):tae.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(Jw?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");p1.prototype.has=s(function(e){if(Jw)return this._set.has(e);var r=eae.toSetString(e);return tae.call(this._set,r)},"ArraySet_has");p1.prototype.indexOf=s(function(e){if(Jw){var r=this._set.get(e);if(r>=0)return r}else{var n=eae.toSetString(e);if(tae.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");p1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");p1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");MSe.ArraySet=p1});var QSe=Q(OSe=>{d();var FSe=_k();function ght(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||FSe.compareByGeneratedPositionsInflated(t,e)<=0}s(ght,"generatedPositionAfter");function fq(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(fq,"MappingList");fq.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");fq.prototype.add=s(function(e){ght(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");fq.prototype.toArray=s(function(){return this._sorted||(this._array.sort(FSe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");OSe.MappingList=fq});var nae=Q(USe=>{d();var e6=Xse(),vc=_k(),pq=rae().ArraySet,Aht=QSe().MappingList;function Lp(t){t||(t={}),this._file=vc.getArg(t,"file",null),this._sourceRoot=vc.getArg(t,"sourceRoot",null),this._skipValidation=vc.getArg(t,"skipValidation",!1),this._sources=new pq,this._names=new pq,this._mappings=new Aht,this._sourcesContents=null}s(Lp,"SourceMapGenerator");Lp.prototype._version=3;Lp.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new Lp({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=vc.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=vc.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");Lp.prototype.addMapping=s(function(e){var r=vc.getArg(e,"generated"),n=vc.getArg(e,"original",null),i=vc.getArg(e,"source",null),o=vc.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");Lp.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=vc.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[vc.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[vc.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Lp.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=vc.relative(o,i));var a=new pq,c=new pq;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var u=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});u.source!=null&&(l.source=u.source,n!=null&&(l.source=vc.join(n,l.source)),o!=null&&(l.source=vc.relative(o,l.source)),l.originalLine=u.line,l.originalColumn=u.column,u.name!=null&&(l.name=u.name))}var f=l.source;f!=null&&!a.has(f)&&a.add(f);var p=l.name;p!=null&&!c.has(p)&&c.add(p)},this),this._sources=a,this._names=c,e.sources.forEach(function(l){var u=e.sourceContentFor(l);u!=null&&(n!=null&&(l=vc.join(n,l)),o!=null&&(l=vc.relative(o,l)),this.setSourceContent(l,u))},this)},"SourceMapGenerator_applySourceMap");Lp.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");Lp.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,c="",l,u,f,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],l="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)l+=";",r++;else if(h>0){if(!vc.compareByGeneratedPositionsInflated(u,m[h-1]))continue;l+=","}l+=e6.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),l+=e6.encode(p-a),a=p,l+=e6.encode(u.originalLine-1-i),i=u.originalLine-1,l+=e6.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(f=this._names.indexOf(u.name),l+=e6.encode(f-o),o=f)),c+=l}return c},"SourceMapGenerator_serializeMappings");Lp.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=vc.relative(r,n));var i=vc.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");Lp.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");Lp.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");USe.SourceMapGenerator=Lp});var qSe=Q(Xw=>{d();Xw.GREATEST_LOWER_BOUND=1;Xw.LEAST_UPPER_BOUND=2;function iae(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,c=i(r,n[a],!0);return c===0?a:c>0?e-a>1?iae(a,e,r,n,i,o):o==Xw.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?iae(t,a,r,n,i,o):o==Xw.LEAST_UPPER_BOUND?a:t<0?-1:t}s(iae,"recursiveSearch");Xw.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=iae(-1,r.length,e,r,n,i||Xw.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var WSe=Q(HSe=>{d();function oae(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(oae,"swap");function yht(t,e){return Math.round(t+Math.random()*(e-t))}s(yht,"randomIntInRange");function sae(t,e,r,n){if(r<n){var i=yht(r,n),o=r-1;oae(t,i,n);for(var a=t[n],c=r;c<n;c++)e(t[c],a)<=0&&(o+=1,oae(t,o,c));oae(t,o+1,c);var l=o+1;sae(t,e,r,l-1),sae(t,e,l+1,n)}}s(sae,"doQuickSort");HSe.quickSort=function(t,e){sae(t,e,0,t.length-1)}});var jSe=Q(mq=>{d();var kr=_k(),aae=qSe(),Sk=rae().ArraySet,Cht=Xse(),t6=WSe().quickSort;function ks(t,e){var r=t;return typeof t=="string"&&(r=kr.parseSourceMapInput(t)),r.sections!=null?new Sh(r,e):new Yl(r,e)}s(ks,"SourceMapConsumer");ks.fromSourceMap=function(t,e){return Yl.fromSourceMap(t,e)};ks.prototype._version=3;ks.prototype.__generatedMappings=null;Object.defineProperty(ks.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});ks.prototype.__originalMappings=null;Object.defineProperty(ks.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});ks.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");ks.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");ks.GENERATED_ORDER=1;ks.ORIGINAL_ORDER=2;ks.GREATEST_LOWER_BOUND=1;ks.LEAST_UPPER_BOUND=2;ks.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||ks.GENERATED_ORDER,a;switch(o){case ks.GENERATED_ORDER:a=this._generatedMappings;break;case ks.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;a.map(function(l){var u=l.source===null?null:this._sources.at(l.source);return u=kr.computeSourceURL(c,u,this._sourceMapURL),{source:u,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");ks.prototype.allGeneratedPositionsFor=s(function(e){var r=kr.getArg(e,"line"),n={source:kr.getArg(e,"source"),originalLine:r,originalColumn:kr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",kr.compareByOriginalPositions,aae.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var c=a.originalLine;a&&a.originalLine===c;)i.push({line:kr.getArg(a,"generatedLine",null),column:kr.getArg(a,"generatedColumn",null),lastColumn:kr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var l=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==l;)i.push({line:kr.getArg(a,"generatedLine",null),column:kr.getArg(a,"generatedColumn",null),lastColumn:kr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");mq.SourceMapConsumer=ks;function Yl(t,e){var r=t;typeof t=="string"&&(r=kr.parseSourceMapInput(t));var n=kr.getArg(r,"version"),i=kr.getArg(r,"sources"),o=kr.getArg(r,"names",[]),a=kr.getArg(r,"sourceRoot",null),c=kr.getArg(r,"sourcesContent",null),l=kr.getArg(r,"mappings"),u=kr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=kr.normalize(a)),i=i.map(String).map(kr.normalize).map(function(f){return a&&kr.isAbsolute(a)&&kr.isAbsolute(f)?kr.relative(a,f):f}),this._names=Sk.fromArray(o.map(String),!0),this._sources=Sk.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(f){return kr.computeSourceURL(a,f,e)}),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this._sourceMapURL=e,this.file=u}s(Yl,"BasicSourceMapConsumer");Yl.prototype=Object.create(ks.prototype);Yl.prototype.consumer=ks;Yl.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=kr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Yl.fromSourceMap=s(function(e,r){var n=Object.create(Yl.prototype),i=n._names=Sk.fromArray(e._names.toArray(),!0),o=n._sources=Sk.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return kr.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),c=n.__generatedMappings=[],l=n.__originalMappings=[],u=0,f=a.length;u<f;u++){var p=a[u],m=new GSe;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),l.push(m)),c.push(m)}return t6(n.__originalMappings,kr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");Yl.prototype._version=3;Object.defineProperty(Yl.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function GSe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(GSe,"Mapping");Yl.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,c=0,l=0,u=e.length,f=0,p={},m={},h=[],g=[],y,E,x,b,_;f<u;)if(e.charAt(f)===";")n++,f++,i=0;else if(e.charAt(f)===",")f++;else{for(y=new GSe,y.generatedLine=n,b=f;b<u&&!this._charIsMappingSeparator(e,b);b++);if(E=e.slice(f,b),x=p[E],x)f+=E.length;else{for(x=[];f<b;)Cht.decode(e,f,m),_=m.value,f=m.rest,x.push(_);if(x.length===2)throw new Error("Found a source, but no line and column");if(x.length===3)throw new Error("Found a source and line, but no column");p[E]=x}y.generatedColumn=i+x[0],i=y.generatedColumn,x.length>1&&(y.source=c+x[1],c+=x[1],y.originalLine=o+x[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+x[3],a=y.originalColumn,x.length>4&&(y.name=l+x[4],l+=x[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}t6(g,kr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,t6(h,kr.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");Yl.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return aae.search(e,r,o,a)},"SourceMapConsumer_findMapping");Yl.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");Yl.prototype.originalPositionFor=s(function(e){var r={generatedLine:kr.getArg(e,"line"),generatedColumn:kr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",kr.compareByGeneratedPositionsDeflated,kr.getArg(e,"bias",ks.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=kr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=kr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=kr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:kr.getArg(i,"originalLine",null),column:kr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");Yl.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");Yl.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=kr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=kr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");Yl.prototype.generatedPositionFor=s(function(e){var r=kr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:kr.getArg(e,"line"),originalColumn:kr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",kr.compareByOriginalPositions,kr.getArg(e,"bias",ks.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:kr.getArg(o,"generatedLine",null),column:kr.getArg(o,"generatedColumn",null),lastColumn:kr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");mq.BasicSourceMapConsumer=Yl;function Sh(t,e){var r=t;typeof t=="string"&&(r=kr.parseSourceMapInput(t));var n=kr.getArg(r,"version"),i=kr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new Sk,this._names=new Sk;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var c=kr.getArg(a,"offset"),l=kr.getArg(c,"line"),u=kr.getArg(c,"column");if(l<o.line||l===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=c,{generatedOffset:{generatedLine:l+1,generatedColumn:u+1},consumer:new ks(kr.getArg(a,"map"),e)}})}s(Sh,"IndexedSourceMapConsumer");Sh.prototype=Object.create(ks.prototype);Sh.prototype.constructor=ks;Sh.prototype._version=3;Object.defineProperty(Sh.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});Sh.prototype.originalPositionFor=s(function(e){var r={generatedLine:kr.getArg(e,"line"),generatedColumn:kr.getArg(e,"column")},n=aae.search(r,this._sections,function(o,a){var c=o.generatedLine-a.generatedOffset.generatedLine;return c||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");Sh.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");Sh.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");Sh.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(kr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");Sh.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],l=i.consumer._sources.at(c.source);l=kr.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=i.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var f={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}t6(this.__generatedMappings,kr.compareByGeneratedPositionsDeflated),t6(this.__originalMappings,kr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");mq.IndexedSourceMapConsumer=Sh});var $Se=Q(VSe=>{d();var Eht=nae().SourceMapGenerator,hq=_k(),vht=/(\r?\n)/,xht=10,Rk="$$$isSourceNode$$$";function f0(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[Rk]=!0,n!=null&&this.add(n)}s(f0,"SourceNode");f0.fromStringWithSourceMap=s(function(e,r,n){var i=new f0,o=e.split(vht),a=0,c=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),l=1,u=0,f=null;return r.eachMapping(function(m){if(f!==null)if(l<m.generatedLine)p(f,c()),l++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(f,g),f=m;return}for(;l<m.generatedLine;)i.add(c()),l++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}f=m},this),a<o.length&&(f&&p(f,c()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=hq.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?hq.join(n,m.source):m.source;i.add(new f0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");f0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Rk]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");f0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Rk]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");f0.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[Rk]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");f0.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");f0.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[Rk]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");f0.prototype.setSourceContent=s(function(e,r){this.sourceContents[hq.toSetString(e)]=r},"SourceNode_setSourceContent");f0.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Rk]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(hq.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");f0.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");f0.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new Eht(e),i=!1,o=null,a=null,c=null,l=null;return this.walk(function(u,f){r.code+=u,f.source!==null&&f.line!==null&&f.column!==null?((o!==f.source||a!==f.line||c!==f.column||l!==f.name)&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),o=f.source,a=f.line,c=f.column,l=f.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===xht?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(u,f){n.setSourceContent(u,f)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");VSe.SourceNode=f0});var zSe=Q(gq=>{d();gq.SourceMapGenerator=nae().SourceMapGenerator;gq.SourceMapConsumer=jSe().SourceMapConsumer;gq.SourceNode=$Se().SourceNode});var KSe=Q((iyr,YSe)=>{d();var bht=Object.prototype.toString,cae=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Iht(t){return bht.call(t).slice(8,-1)==="ArrayBuffer"}s(Iht,"isArrayBuffer");function Tht(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return cae?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(Tht,"fromArrayBuffer");function wht(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return cae?Buffer.from(t,e):new Buffer(t,e)}s(wht,"fromString");function _ht(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return Iht(t)?Tht(t,e,r):typeof t=="string"?wht(t,e):cae?Buffer.from(t):new Buffer(t)}s(_ht,"bufferFrom");YSe.exports=_ht});var i2e=Q((e_,fae)=>{d();var Sht=zSe().SourceMapConsumer,lae=require("path"),QA;try{QA=require("fs"),(!QA.existsSync||!QA.readFileSync)&&(QA=null)}catch{}var Rht=KSe();function JSe(t,e){return t.require(e)}s(JSe,"dynamicRequire");var XSe=!1,ZSe=!1,uae=!1,r6="auto",Zw={},n6={},kht=/^data:application\/json[^,]+base64,/,Qx=[],Ux=[];function pae(){return r6==="browser"?!0:r6==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(pae,"isInBrowser");function Pht(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(Pht,"hasGlobalProcessEventEmitter");function Bht(){return typeof process=="object"&&process!==null?process.version:""}s(Bht,"globalProcessVersion");function Dht(){if(typeof process=="object"&&process!==null)return process.stderr}s(Dht,"globalProcessStderr");function Nht(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(Nht,"globalProcessExit");function Aq(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(Aq,"handlerExec");var mae=Aq(Qx);Qx.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in Zw)return Zw[t];var e="";try{if(QA)QA.existsSync(t)&&(e=QA.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return Zw[t]=e});function dae(t,e){if(!t)return e;var r=lae.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+lae.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+lae.resolve(r.slice(i.length),e)}s(dae,"supportRelativeURL");function Lht(t){var e;if(pae())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=mae(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(Lht,"retrieveSourceMapURL");var hae=Aq(Ux);Ux.push(function(t){var e=Lht(t);if(!e)return null;var r;if(kht.test(e)){var n=e.slice(e.indexOf(",")+1);r=Rht(n,"base64").toString(),e=t}else e=dae(t,e),r=mae(e);return r?{url:e,map:r}:null});function gae(t){var e=n6[t.source];if(!e){var r=hae(t.source);r?(e=n6[t.source]={url:r.url,map:new Sht(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var c=dae(e.url,i);Zw[c]=a}})):e=n6[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=dae(e.url,n.source),n}return t}s(gae,"mapSourcePosition");function t2e(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=gae({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+t2e(e[2])+")":t}s(t2e,"mapEvalOrigin");function Mht(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,c=this.isConstructor(),l=!(this.isToplevel()||c);if(l){var u=this.getTypeName();u==="[object Object]"&&(u="null");var f=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,f&&o.indexOf("."+f)!=o.length-f.length-1&&(i+=" [as "+f+"]")):i+=u+"."+(f||"<anonymous>")}else c?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(Mht,"CallSiteToString");function e2e(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=Mht,e}s(e2e,"cloneCallSite");function r2e(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(Bht())?0:62;n===1&&i>a&&!pae()&&!t.isEval()&&(i-=a);var c=gae({source:r,line:n,column:i});e.curPosition=c,t=e2e(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return c.source},t.getLineNumber=function(){return c.line},t.getColumnNumber=function(){return c.column+1},t.getScriptNameOrSourceURL=function(){return c.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=t2e(u),t=e2e(t),t.getEvalOrigin=function(){return u}),t}s(r2e,"wrapCallSite");function Fht(t,e){uae&&(Zw={},n6={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],c=e.length-1;c>=0;c--)a.push(`
    at `+r2e(e[c],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(Fht,"prepareStackTrace");function n2e(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=Zw[r];if(!o&&QA&&QA.existsSync(r))try{o=QA.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(n2e,"getErrorSource");function Oht(t){var e=n2e(t),r=Dht();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),Nht(1)}s(Oht,"printErrorAndExit");function Qht(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return Oht(arguments[1])}return t.apply(this,arguments)}}s(Qht,"shimEmitUncaughtException");var Uht=Qx.slice(0),qht=Ux.slice(0);e_.wrapCallSite=r2e;e_.getErrorSource=n2e;e_.mapSourcePosition=gae;e_.retrieveSourceMap=hae;e_.install=function(t){if(t=t||{},t.environment&&(r6=t.environment,["node","browser","auto"].indexOf(r6)===-1))throw new Error("environment "+r6+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Qx.length=0),Qx.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Ux.length=0),Ux.unshift(t.retrieveSourceMap)),t.hookRequire&&!pae()){var e=JSe(fae,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return Zw[a]=o,n6[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(uae||(uae="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),XSe||(XSe=!0,Error.prepareStackTrace=Fht),!ZSe){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=JSe(fae,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&Pht()&&(ZSe=!0,Qht())}};e_.resetRetrieveHandlers=function(){Qx.length=0,Ux.length=0,Qx=Uht.slice(0),Ux=qht.slice(0),hae=Aq(Ux),mae=Aq(Qx)}});var Vi=Q((Cq,a2e)=>{d();(function(t,e){typeof Cq=="object"?a2e.exports=Cq=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(Cq,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function x(){}return s(x,"F"),function(b){var _;return x.prototype=b,_=new x,x.prototype=null,_}}(),a={},c=a.lib={},l=c.Base=function(){return{extend:s(function(x){var b=o(this);return x&&b.mixIn(x),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},"extend"),create:s(function(){var x=this.extend();return x.init.apply(x,arguments),x},"create"),init:s(function(){},"init"),mixIn:s(function(x){for(var b in x)x.hasOwnProperty(b)&&(this[b]=x[b]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=c.WordArray=l.extend({init:s(function(x,b){x=this.words=x||[],b!=r?this.sigBytes=b:this.sigBytes=x.length*4},"init"),toString:s(function(x){return(x||p).stringify(this)},"toString"),concat:s(function(x){var b=this.words,_=x.words,k=this.sigBytes,P=x.sigBytes;if(this.clamp(),k%4)for(var N=0;N<P;N++){var M=_[N>>>2]>>>24-N%4*8&255;b[k+N>>>2]|=M<<24-(k+N)%4*8}else for(var J=0;J<P;J+=4)b[k+J>>>2]=_[J>>>2];return this.sigBytes+=P,this},"concat"),clamp:s(function(){var x=this.words,b=this.sigBytes;x[b>>>2]&=4294967295<<32-b%4*8,x.length=e.ceil(b/4)},"clamp"),clone:s(function(){var x=l.clone.call(this);return x.words=this.words.slice(0),x},"clone"),random:s(function(x){for(var b=[],_=0;_<x;_+=4)b.push(i());return new u.init(b,x)},"random")}),f=a.enc={},p=f.Hex={stringify:s(function(x){for(var b=x.words,_=x.sigBytes,k=[],P=0;P<_;P++){var N=b[P>>>2]>>>24-P%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(x){for(var b=x.length,_=[],k=0;k<b;k+=2)_[k>>>3]|=parseInt(x.substr(k,2),16)<<24-k%8*4;return new u.init(_,b/2)},"parse")},m=f.Latin1={stringify:s(function(x){for(var b=x.words,_=x.sigBytes,k=[],P=0;P<_;P++){var N=b[P>>>2]>>>24-P%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(x){for(var b=x.length,_=[],k=0;k<b;k++)_[k>>>2]|=(x.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,b)},"parse")},h=f.Utf8={stringify:s(function(x){try{return decodeURIComponent(escape(m.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(x){return m.parse(unescape(encodeURIComponent(x)))},"parse")},g=c.BufferedBlockAlgorithm=l.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(x){typeof x=="string"&&(x=h.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},"_append"),_process:s(function(x){var b,_=this._data,k=_.words,P=_.sigBytes,N=this.blockSize,M=N*4,J=P/M;x?J=e.ceil(J):J=e.max((J|0)-this._minBufferSize,0);var se=J*N,K=e.min(se*4,P);if(se){for(var G=0;G<se;G+=N)this._doProcessBlock(k,G);b=k.splice(0,se),_.sigBytes-=K}return new u.init(b,K)},"_process"),clone:s(function(){var x=l.clone.call(this);return x._data=this._data.clone(),x},"clone"),_minBufferSize:0}),y=c.Hasher=g.extend({cfg:l.extend(),init:s(function(x){this.cfg=this.cfg.extend(x),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(x){return this._append(x),this._process(),this},"update"),finalize:s(function(x){x&&this._append(x);var b=this._doFinalize();return b},"finalize"),blockSize:512/32,_createHelper:s(function(x){return function(b,_){return new x.init(_).finalize(b)}},"_createHelper"),_createHmacHelper:s(function(x){return function(b,_){return new E.HMAC.init(x,_).finalize(b)}},"_createHmacHelper")}),E=a.algo={};return a}(Math);return t})});var c6=Q((Eq,c2e)=>{d();(function(t,e){typeof Eq=="object"?c2e.exports=Eq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Eq,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},c=a.Word=i.extend({init:s(function(u,f){this.high=u,this.low=f},"init")}),l=a.WordArray=i.extend({init:s(function(u,f){u=this.words=u||[],f!=e?this.sigBytes=f:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,f=u.length,p=[],m=0;m<f;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),f=u.words=this.words.slice(0),p=f.length,m=0;m<p;m++)f[m]=f[m].clone();return u},"clone")})}(),t})});var u2e=Q((vq,l2e)=>{d();(function(t,e){typeof vq=="object"?l2e.exports=vq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(vq,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var c=a.byteLength,l=[],u=0;u<c;u++)l[u>>>2]|=a[u]<<24-u%4*8;i.call(this,l,c)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var f2e=Q((xq,d2e)=>{d();(function(t,e){typeof xq=="object"?d2e.exports=xq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(xq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=l[p>>>2]>>>16-p%4*8&65535;f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return n.create(u,l*2)},"parse")};i.Utf16LE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=a(l[p>>>2]>>>16-p%4*8&65535);f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return n.create(u,l*2)},"parse")};function a(c){return c<<8&4278255360|c>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var Hx=Q((bq,p2e)=>{d();(function(t,e){typeof bq=="object"?p2e.exports=bq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(bq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=l[m>>>2]>>>24-m%4*8&255,g=l[m+1>>>2]>>>24-(m+1)%4*8&255,y=l[m+2>>>2]>>>24-(m+2)%4*8&255,E=h<<16|g<<8|y,x=0;x<4&&m+x*.75<u;x++)p.push(f.charAt(E>>>6*(3-x)&63));var b=f.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},"stringify"),parse:s(function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<u.length;p++)f[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=c.indexOf(m);h!==-1&&(l=h)}return a(c,l,f)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,y=h|g;f[p>>>2]|=y<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64})});var h2e=Q((Iq,m2e)=>{d();(function(t,e){typeof Iq=="object"?m2e.exports=Iq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Iq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,p=l?this._safe_map:this._map;c.clamp();for(var m=[],h=0;h<f;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,E=u[h+2>>>2]>>>24-(h+2)%4*8&255,x=g<<16|y<<8|E,b=0;b<4&&h+b*.75<f;b++)m.push(p.charAt(x>>>6*(3-b)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<f.length;m++)p[f.charCodeAt(m)]=m}var h=f.charAt(64);if(h){var g=c.indexOf(h);g!==-1&&(u=g)}return a(c,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,y=h|g;f[p>>>2]|=y<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var Wx=Q((Tq,g2e)=>{d();(function(t,e){typeof Tq=="object"?g2e.exports=Tq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Tq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[];(function(){for(var h=0;h<64;h++)c[h]=e.abs(e.sin(h+1))*4294967296|0})();var l=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var E=g+y,x=h[E];h[E]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var b=this._hash.words,_=h[g+0],k=h[g+1],P=h[g+2],N=h[g+3],M=h[g+4],J=h[g+5],se=h[g+6],K=h[g+7],G=h[g+8],q=h[g+9],le=h[g+10],ie=h[g+11],V=h[g+12],H=h[g+13],z=h[g+14],X=h[g+15],ue=b[0],ne=b[1],me=b[2],he=b[3];ue=u(ue,ne,me,he,_,7,c[0]),he=u(he,ue,ne,me,k,12,c[1]),me=u(me,he,ue,ne,P,17,c[2]),ne=u(ne,me,he,ue,N,22,c[3]),ue=u(ue,ne,me,he,M,7,c[4]),he=u(he,ue,ne,me,J,12,c[5]),me=u(me,he,ue,ne,se,17,c[6]),ne=u(ne,me,he,ue,K,22,c[7]),ue=u(ue,ne,me,he,G,7,c[8]),he=u(he,ue,ne,me,q,12,c[9]),me=u(me,he,ue,ne,le,17,c[10]),ne=u(ne,me,he,ue,ie,22,c[11]),ue=u(ue,ne,me,he,V,7,c[12]),he=u(he,ue,ne,me,H,12,c[13]),me=u(me,he,ue,ne,z,17,c[14]),ne=u(ne,me,he,ue,X,22,c[15]),ue=f(ue,ne,me,he,k,5,c[16]),he=f(he,ue,ne,me,se,9,c[17]),me=f(me,he,ue,ne,ie,14,c[18]),ne=f(ne,me,he,ue,_,20,c[19]),ue=f(ue,ne,me,he,J,5,c[20]),he=f(he,ue,ne,me,le,9,c[21]),me=f(me,he,ue,ne,X,14,c[22]),ne=f(ne,me,he,ue,M,20,c[23]),ue=f(ue,ne,me,he,q,5,c[24]),he=f(he,ue,ne,me,z,9,c[25]),me=f(me,he,ue,ne,N,14,c[26]),ne=f(ne,me,he,ue,G,20,c[27]),ue=f(ue,ne,me,he,H,5,c[28]),he=f(he,ue,ne,me,P,9,c[29]),me=f(me,he,ue,ne,K,14,c[30]),ne=f(ne,me,he,ue,V,20,c[31]),ue=p(ue,ne,me,he,J,4,c[32]),he=p(he,ue,ne,me,G,11,c[33]),me=p(me,he,ue,ne,ie,16,c[34]),ne=p(ne,me,he,ue,z,23,c[35]),ue=p(ue,ne,me,he,k,4,c[36]),he=p(he,ue,ne,me,M,11,c[37]),me=p(me,he,ue,ne,K,16,c[38]),ne=p(ne,me,he,ue,le,23,c[39]),ue=p(ue,ne,me,he,H,4,c[40]),he=p(he,ue,ne,me,_,11,c[41]),me=p(me,he,ue,ne,N,16,c[42]),ne=p(ne,me,he,ue,se,23,c[43]),ue=p(ue,ne,me,he,q,4,c[44]),he=p(he,ue,ne,me,V,11,c[45]),me=p(me,he,ue,ne,X,16,c[46]),ne=p(ne,me,he,ue,P,23,c[47]),ue=m(ue,ne,me,he,_,6,c[48]),he=m(he,ue,ne,me,K,10,c[49]),me=m(me,he,ue,ne,z,15,c[50]),ne=m(ne,me,he,ue,J,21,c[51]),ue=m(ue,ne,me,he,V,6,c[52]),he=m(he,ue,ne,me,N,10,c[53]),me=m(me,he,ue,ne,le,15,c[54]),ne=m(ne,me,he,ue,k,21,c[55]),ue=m(ue,ne,me,he,G,6,c[56]),he=m(he,ue,ne,me,X,10,c[57]),me=m(me,he,ue,ne,se,15,c[58]),ne=m(ne,me,he,ue,H,21,c[59]),ue=m(ue,ne,me,he,M,6,c[60]),he=m(he,ue,ne,me,ie,10,c[61]),me=m(me,he,ue,ne,P,15,c[62]),ne=m(ne,me,he,ue,q,21,c[63]),b[0]=b[0]+ue|0,b[1]=b[1]+ne|0,b[2]=b[2]+me|0,b[3]=b[3]+he|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,E=h.sigBytes*8;g[E>>>5]|=128<<24-E%32;var x=e.floor(y/4294967296),b=y;g[(E+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(E+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,P=0;P<4;P++){var N=k[P];k[P]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,E,x,b,_){var k=h+(g&y|~g&E)+x+_;return(k<<b|k>>>32-b)+g}s(u,"FF");function f(h,g,y,E,x,b,_){var k=h+(g&E|y&~E)+x+_;return(k<<b|k>>>32-b)+g}s(f,"GG");function p(h,g,y,E,x,b,_){var k=h+(g^y^E)+x+_;return(k<<b|k>>>32-b)+g}s(p,"HH");function m(h,g,y,E,x,b,_){var k=h+(y^(g|~E))+x+_;return(k<<b|k>>>32-b)+g}s(m,"II"),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),t.MD5})});var Aae=Q((wq,A2e)=>{d();(function(t,e){typeof wq=="object"?A2e.exports=wq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(wq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],c=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(l,u){for(var f=this._hash.words,p=f[0],m=f[1],h=f[2],g=f[3],y=f[4],E=0;E<80;E++){if(E<16)a[E]=l[u+E]|0;else{var x=a[E-3]^a[E-8]^a[E-14]^a[E-16];a[E]=x<<1|x>>>31}var b=(p<<5|p>>>27)+y+a[E];E<20?b+=(m&h|~m&g)+1518500249:E<40?b+=(m^h^g)+1859775393:E<60?b+=(m&h|m&g|h&g)-1894007588:b+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=b}f[0]=f[0]+p|0,f[1]=f[1]+m|0,f[2]=f[2]+h|0,f[3]=f[3]+g|0,f[4]=f[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var l=this._data,u=l.words,f=this._nDataBytes*8,p=l.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),u[(p+64>>>9<<4)+15]=f,l.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var l=i.clone.call(this);return l._hash=this._hash.clone(),l},"clone")});e.SHA1=i._createHelper(c),e.HmacSHA1=i._createHmacHelper(c)}(),t.SHA1})});var Sq=Q((_q,y2e)=>{d();(function(t,e){typeof _q=="object"?y2e.exports=_q=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(_q,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[],l=[];(function(){function p(y){for(var E=e.sqrt(y),x=2;x<=E;x++)if(!(y%x))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(c[g]=m(e.pow(h,1/2))),l[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],f=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(c.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],E=h[2],x=h[3],b=h[4],_=h[5],k=h[6],P=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var M=u[N-15],J=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,se=u[N-2],K=(se<<15|se>>>17)^(se<<13|se>>>19)^se>>>10;u[N]=J+u[N-7]+K+u[N-16]}var G=b&_^~b&k,q=g&y^g&E^y&E,le=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),ie=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),V=P+ie+G+l[N]+u[N],H=le+q;P=k,k=_,_=b,b=x+V|0,x=E,E=y,y=g,g=V+H|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+E|0,h[3]=h[3]+x|0,h[4]=h[4]+b|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+P|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),t.SHA256})});var E2e=Q((Rq,C2e)=>{d();(function(t,e,r){typeof Rq=="object"?C2e.exports=Rq=e(Vi(),Sq()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(Rq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var yae=Q((kq,v2e)=>{d();(function(t,e,r){typeof kq=="object"?v2e.exports=kq=e(Vi(),c6()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(kq,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,c=e.algo;function l(){return o.create.apply(o,arguments)}s(l,"X64Word_create");var u=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],f=[];(function(){for(var m=0;m<80;m++)f[m]=l()})();var p=c.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],E=g[1],x=g[2],b=g[3],_=g[4],k=g[5],P=g[6],N=g[7],M=y.high,J=y.low,se=E.high,K=E.low,G=x.high,q=x.low,le=b.high,ie=b.low,V=_.high,H=_.low,z=k.high,X=k.low,ue=P.high,ne=P.low,me=N.high,he=N.low,Qe=M,ke=J,tt=se,Fe=K,ht=G,St=q,vt=le,It=ie,de=V,Ue=H,ye=z,nt=X,te=ue,oe=ne,We=me,De=he,xe=0;xe<80;xe++){var Ye,st,yt=f[xe];if(xe<16)st=yt.high=m[h+xe*2]|0,Ye=yt.low=m[h+xe*2+1]|0;else{var qt=f[xe-15],dr=qt.high,Ft=qt.low,zr=(dr>>>1|Ft<<31)^(dr>>>8|Ft<<24)^dr>>>7,Zr=(Ft>>>1|dr<<31)^(Ft>>>8|dr<<24)^(Ft>>>7|dr<<25),Cn=f[xe-2],Ae=Cn.high,Ge=Cn.low,ft=(Ae>>>19|Ge<<13)^(Ae<<3|Ge>>>29)^Ae>>>6,Et=(Ge>>>19|Ae<<13)^(Ge<<3|Ae>>>29)^(Ge>>>6|Ae<<26),Zt=f[xe-7],Vt=Zt.high,Er=Zt.low,Ir=f[xe-16],zt=Ir.high,ir=Ir.low;Ye=Zr+Er,st=zr+Vt+(Ye>>>0<Zr>>>0?1:0),Ye=Ye+Et,st=st+ft+(Ye>>>0<Et>>>0?1:0),Ye=Ye+ir,st=st+zt+(Ye>>>0<ir>>>0?1:0),yt.high=st,yt.low=Ye}var Xt=de&ye^~de&te,Sr=Ue&nt^~Ue&oe,Qr=Qe&tt^Qe&ht^tt&ht,en=ke&Fe^ke&St^Fe&St,$n=(Qe>>>28|ke<<4)^(Qe<<30|ke>>>2)^(Qe<<25|ke>>>7),si=(ke>>>28|Qe<<4)^(ke<<30|Qe>>>2)^(ke<<25|Qe>>>7),Hn=(de>>>14|Ue<<18)^(de>>>18|Ue<<14)^(de<<23|Ue>>>9),ti=(Ue>>>14|de<<18)^(Ue>>>18|de<<14)^(Ue<<23|de>>>9),cn=u[xe],ri=cn.high,_e=cn.low,W=De+ti,ge=We+Hn+(W>>>0<De>>>0?1:0),W=W+Sr,ge=ge+Xt+(W>>>0<Sr>>>0?1:0),W=W+_e,ge=ge+ri+(W>>>0<_e>>>0?1:0),W=W+Ye,ge=ge+st+(W>>>0<Ye>>>0?1:0),ve=si+en,re=$n+Qr+(ve>>>0<si>>>0?1:0);We=te,De=oe,te=ye,oe=nt,ye=de,nt=Ue,Ue=It+W|0,de=vt+ge+(Ue>>>0<It>>>0?1:0)|0,vt=ht,It=St,ht=tt,St=Fe,tt=Qe,Fe=ke,ke=W+ve|0,Qe=ge+re+(ke>>>0<W>>>0?1:0)|0}J=y.low=J+ke,y.high=M+Qe+(J>>>0<ke>>>0?1:0),K=E.low=K+Fe,E.high=se+tt+(K>>>0<Fe>>>0?1:0),q=x.low=q+St,x.high=G+ht+(q>>>0<St>>>0?1:0),ie=b.low=ie+It,b.high=le+vt+(ie>>>0<It>>>0?1:0),H=_.low=H+Ue,_.high=V+de+(H>>>0<Ue>>>0?1:0),X=k.low=X+nt,k.high=z+ye+(X>>>0<nt>>>0?1:0),ne=P.low=ne+oe,P.high=ue+te+(ne>>>0<oe>>>0?1:0),he=N.low=he+De,N.high=me+We+(he>>>0<De>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var E=this._hash.toX32();return E},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var b2e=Q((Pq,x2e)=>{d();(function(t,e,r){typeof Pq=="object"?x2e.exports=Pq=e(Vi(),c6(),yae()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(Pq,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,c=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var l=a._doFinalize.call(this);return l.sigBytes-=16,l},"_doFinalize")});e.SHA384=a._createHelper(c),e.HmacSHA384=a._createHmacHelper(c)}(),t.SHA384})});var T2e=Q((Bq,I2e)=>{d();(function(t,e,r){typeof Bq=="object"?I2e.exports=Bq=e(Vi(),c6()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(Bq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,c=a.Word,l=r.algo,u=[],f=[],p=[];(function(){for(var g=1,y=0,E=0;E<24;E++){u[g+5*y]=(E+1)*(E+2)/2%64;var x=y%5,b=(2*g+3*y)%5;g=x,y=b}for(var g=0;g<5;g++)for(var y=0;y<5;y++)f[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var P=0,N=0,M=0;M<7;M++){if(_&1){var J=(1<<M)-1;J<32?N^=1<<J:P^=1<<J-32}_&128?_=_<<1^113:_<<=1}p[k]=c.create(P,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=c.create()})();var h=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var E=this._state,x=this.blockSize/2,b=0;b<x;b++){var _=g[y+2*b],k=g[y+2*b+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var P=E[b];P.high^=k,P.low^=_}for(var N=0;N<24;N++){for(var M=0;M<5;M++){for(var J=0,se=0,K=0;K<5;K++){var P=E[M+5*K];J^=P.high,se^=P.low}var G=m[M];G.high=J,G.low=se}for(var M=0;M<5;M++)for(var q=m[(M+4)%5],le=m[(M+1)%5],ie=le.high,V=le.low,J=q.high^(ie<<1|V>>>31),se=q.low^(V<<1|ie>>>31),K=0;K<5;K++){var P=E[M+5*K];P.high^=J,P.low^=se}for(var H=1;H<25;H++){var J,se,P=E[H],z=P.high,X=P.low,ue=u[H];ue<32?(J=z<<ue|X>>>32-ue,se=X<<ue|z>>>32-ue):(J=X<<ue-32|z>>>64-ue,se=z<<ue-32|X>>>64-ue);var ne=m[f[H]];ne.high=J,ne.low=se}var me=m[0],he=E[0];me.high=he.high,me.low=he.low;for(var M=0;M<5;M++)for(var K=0;K<5;K++){var H=M+5*K,P=E[H],Qe=m[H],ke=m[(M+1)%5+5*K],tt=m[(M+2)%5+5*K];P.high=Qe.high^~ke.high&tt.high,P.low=Qe.low^~ke.low&tt.low}var P=E[0],Fe=p[N];P.high^=Fe.high,P.low^=Fe.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,E=this._nDataBytes*8,x=g.sigBytes*8,b=this.blockSize*32;y[x>>>5]|=1<<24-x%32,y[(e.ceil((x+1)/b)*b>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,P=k/8,N=[],M=0;M<P;M++){var J=_[M],se=J.high,K=J.low;se=(se<<8|se>>>24)&16711935|(se<<24|se>>>8)&4278255360,K=(K<<8|K>>>24)&16711935|(K<<24|K>>>8)&4278255360,N.push(K),N.push(se)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),E=0;E<25;E++)y[E]=y[E].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var _2e=Q((Dq,w2e)=>{d();(function(t,e){typeof Dq=="object"?w2e.exports=Dq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Dq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,P){for(var N=0;N<16;N++){var M=P+N,J=k[M];k[M]=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360}var se=this._hash.words,K=p.words,G=m.words,q=c.words,le=l.words,ie=u.words,V=f.words,H,z,X,ue,ne,me,he,Qe,ke,tt;me=H=se[0],he=z=se[1],Qe=X=se[2],ke=ue=se[3],tt=ne=se[4];for(var Fe,N=0;N<80;N+=1)Fe=H+k[P+q[N]]|0,N<16?Fe+=g(z,X,ue)+K[0]:N<32?Fe+=y(z,X,ue)+K[1]:N<48?Fe+=E(z,X,ue)+K[2]:N<64?Fe+=x(z,X,ue)+K[3]:Fe+=b(z,X,ue)+K[4],Fe=Fe|0,Fe=_(Fe,ie[N]),Fe=Fe+ne|0,H=ne,ne=ue,ue=_(X,10),X=z,z=Fe,Fe=me+k[P+le[N]]|0,N<16?Fe+=b(he,Qe,ke)+G[0]:N<32?Fe+=x(he,Qe,ke)+G[1]:N<48?Fe+=E(he,Qe,ke)+G[2]:N<64?Fe+=y(he,Qe,ke)+G[3]:Fe+=g(he,Qe,ke)+G[4],Fe=Fe|0,Fe=_(Fe,V[N]),Fe=Fe+tt|0,me=tt,tt=ke,ke=_(Qe,10),Qe=he,he=Fe;Fe=se[1]+X+ke|0,se[1]=se[2]+ue+tt|0,se[2]=se[3]+ne+me|0,se[3]=se[4]+H+he|0,se[4]=se[0]+z+Qe|0,se[0]=Fe},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,P=k.words,N=this._nDataBytes*8,M=k.sigBytes*8;P[M>>>5]|=128<<24-M%32,P[(M+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(P.length+1)*4,this._process();for(var J=this._hash,se=J.words,K=0;K<5;K++){var G=se[K];se[K]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return J},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,P,N){return k^P^N}s(g,"f1");function y(k,P,N){return k&P|~k&N}s(y,"f2");function E(k,P,N){return(k|~P)^N}s(E,"f3");function x(k,P,N){return k&N|P&~N}s(x,"f4");function b(k,P,N){return k^(P|~N)}s(b,"f5");function _(k,P){return k<<P|k>>>32-P}s(_,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var Lq=Q((Nq,S2e)=>{d();(function(t,e){typeof Nq=="object"?S2e.exports=Nq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Nq,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,c=a.HMAC=n.extend({init:s(function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=o.parse(u));var f=l.blockSize,p=f*4;u.sigBytes>p&&(u=l.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,E=0;E<f;E++)g[E]^=1549556828,y[E]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var l=this._hasher;l.reset(),l.update(this._iKey)},"reset"),update:s(function(l){return this._hasher.update(l),this},"update"),finalize:s(function(l){var u=this._hasher,f=u.finalize(l);u.reset();var p=u.finalize(this._oKey.clone().concat(f));return p},"finalize")})})()})});var k2e=Q((Mq,R2e)=>{d();(function(t,e,r){typeof Mq=="object"?R2e.exports=Mq=e(Vi(),Sq(),Lq()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(Mq,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,c=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,f){for(var p=this.cfg,m=c.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,E=g.words,x=p.keySize,b=p.iterations;y.length<x;){var _=m.update(f).finalize(g);m.reset();for(var k=_.words,P=k.length,N=_,M=1;M<b;M++){N=m.finalize(N),m.reset();for(var J=N.words,se=0;se<P;se++)k[se]^=J[se]}h.concat(_),E[0]++}return h.sigBytes=x*4,h},"compute")});e.PBKDF2=function(u,f,p){return l.create(p).compute(u,f)}}(),t.PBKDF2})});var m1=Q((Fq,P2e)=>{d();(function(t,e,r){typeof Fq=="object"?P2e.exports=Fq=e(Vi(),Aae(),Lq()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(Fq,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,c=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(l){this.cfg=this.cfg.extend(l)},"init"),compute:s(function(l,u){for(var f,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,E=p.iterations;g.length<y;){f&&m.update(f),f=m.update(l).finalize(u),m.reset();for(var x=1;x<E;x++)f=m.finalize(f),m.reset();h.concat(f)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(l,u,f){return c.create(f).compute(l,u)}}(),t.EvpKDF})});var $c=Q((Oq,B2e)=>{d();(function(t,e,r){typeof Oq=="object"?B2e.exports=Oq=e(Vi(),m1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(Oq,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,c=r.enc,l=c.Utf8,u=c.Base64,f=r.algo,p=f.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(G,q){return this.create(this._ENC_XFORM_MODE,G,q)},"createEncryptor"),createDecryptor:s(function(G,q){return this.create(this._DEC_XFORM_MODE,G,q)},"createDecryptor"),init:s(function(G,q,le){this.cfg=this.cfg.extend(le),this._xformMode=G,this._key=q,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(G){return this._append(G),this._process()},"process"),finalize:s(function(G){G&&this._append(G);var q=this._doFinalize();return q},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function G(q){return typeof q=="string"?K:M}return s(G,"selectCipherStrategy"),function(q){return{encrypt:s(function(le,ie,V){return G(ie).encrypt(q,le,ie,V)},"encrypt"),decrypt:s(function(le,ie,V){return G(ie).decrypt(q,le,ie,V)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var G=this._process(!0);return G},"_doFinalize"),blockSize:1}),g=r.mode={},y=n.BlockCipherMode=i.extend({createEncryptor:s(function(G,q){return this.Encryptor.create(G,q)},"createEncryptor"),createDecryptor:s(function(G,q){return this.Decryptor.create(G,q)},"createDecryptor"),init:s(function(G,q){this._cipher=G,this._iv=q},"init")}),E=g.CBC=function(){var G=y.extend();G.Encryptor=G.extend({processBlock:s(function(le,ie){var V=this._cipher,H=V.blockSize;q.call(this,le,ie,H),V.encryptBlock(le,ie),this._prevBlock=le.slice(ie,ie+H)},"processBlock")}),G.Decryptor=G.extend({processBlock:s(function(le,ie){var V=this._cipher,H=V.blockSize,z=le.slice(ie,ie+H);V.decryptBlock(le,ie),q.call(this,le,ie,H),this._prevBlock=z},"processBlock")});function q(le,ie,V){var H,z=this._iv;z?(H=z,this._iv=e):H=this._prevBlock;for(var X=0;X<V;X++)le[ie+X]^=H[X]}return s(q,"xorBlock"),G}(),x=r.pad={},b=x.Pkcs7={pad:s(function(G,q){for(var le=q*4,ie=le-G.sigBytes%le,V=ie<<24|ie<<16|ie<<8|ie,H=[],z=0;z<ie;z+=4)H.push(V);var X=o.create(H,ie);G.concat(X)},"pad"),unpad:s(function(G){var q=G.words[G.sigBytes-1>>>2]&255;G.sigBytes-=q},"unpad")},_=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:E,padding:b}),reset:s(function(){var G;m.reset.call(this);var q=this.cfg,le=q.iv,ie=q.mode;this._xformMode==this._ENC_XFORM_MODE?G=ie.createEncryptor:(G=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==G?this._mode.init(this,le&&le.words):(this._mode=G.call(ie,this,le&&le.words),this._mode.__creator=G)},"reset"),_doProcessBlock:s(function(G,q){this._mode.processBlock(G,q)},"_doProcessBlock"),_doFinalize:s(function(){var G,q=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(q.pad(this._data,this.blockSize),G=this._process(!0)):(G=this._process(!0),q.unpad(G)),G},"_doFinalize"),blockSize:128/32}),k=n.CipherParams=i.extend({init:s(function(G){this.mixIn(G)},"init"),toString:s(function(G){return(G||this.formatter).stringify(this)},"toString")}),P=r.format={},N=P.OpenSSL={stringify:s(function(G){var q,le=G.ciphertext,ie=G.salt;return ie?q=o.create([1398893684,1701076831]).concat(ie).concat(le):q=le,q.toString(u)},"stringify"),parse:s(function(G){var q,le=u.parse(G),ie=le.words;return ie[0]==1398893684&&ie[1]==1701076831&&(q=o.create(ie.slice(2,4)),ie.splice(0,4),le.sigBytes-=16),k.create({ciphertext:le,salt:q})},"parse")},M=n.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(G,q,le,ie){ie=this.cfg.extend(ie);var V=G.createEncryptor(le,ie),H=V.finalize(q),z=V.cfg;return k.create({ciphertext:H,key:le,iv:z.iv,algorithm:G,mode:z.mode,padding:z.padding,blockSize:G.blockSize,formatter:ie.format})},"encrypt"),decrypt:s(function(G,q,le,ie){ie=this.cfg.extend(ie),q=this._parse(q,ie.format);var V=G.createDecryptor(le,ie).finalize(q.ciphertext);return V},"decrypt"),_parse:s(function(G,q){return typeof G=="string"?q.parse(G,this):G},"_parse")}),J=r.kdf={},se=J.OpenSSL={execute:s(function(G,q,le,ie,V){if(ie||(ie=o.random(64/8)),V)var H=p.create({keySize:q+le,hasher:V}).compute(G,ie);else var H=p.create({keySize:q+le}).compute(G,ie);var z=o.create(H.words.slice(q),le*4);return H.sigBytes=q*4,k.create({key:H,iv:z,salt:ie})},"execute")},K=n.PasswordBasedCipher=M.extend({cfg:M.cfg.extend({kdf:se}),encrypt:s(function(G,q,le,ie){ie=this.cfg.extend(ie);var V=ie.kdf.execute(le,G.keySize,G.ivSize,ie.salt,ie.hasher);ie.iv=V.iv;var H=M.encrypt.call(this,G,q,V.key,ie);return H.mixIn(V),H},"encrypt"),decrypt:s(function(G,q,le,ie){ie=this.cfg.extend(ie),q=this._parse(q,ie.format);var V=ie.kdf.execute(le,G.keySize,G.ivSize,q.salt,ie.hasher);ie.iv=V.iv;var H=M.decrypt.call(this,G,q,V.key,ie);return H},"decrypt")})}()})});var N2e=Q((Qq,D2e)=>{d();(function(t,e,r){typeof Qq=="object"?D2e.exports=Qq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Qq,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=c},"processBlock")});function r(n,i,o,a){var c,l=this._iv;l?(c=l.slice(0),this._iv=void 0):c=this._prevBlock,a.encryptBlock(c,0);for(var u=0;u<o;u++)n[i+u]^=c[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var M2e=Q((Uq,L2e)=>{d();(function(t,e,r){typeof Uq=="object"?L2e.exports=Uq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Uq,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._counter;c&&(l=this._counter=c.slice(0),this._iv=void 0);var u=l.slice(0);o.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var f=0;f<a;f++)n[i+f]^=u[f]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var O2e=Q((qq,F2e)=>{d();(function(t,e,r){typeof qq=="object"?F2e.exports=qq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(qq,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,c=o>>8&255,l=o&255;a===255?(a=0,c===255?(c=0,l===255?l=0:++l):++c):++a,o=0,o+=a<<16,o+=c<<8,o+=l}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var c=this._cipher,l=c.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0),n(f);var p=f.slice(0);c.encryptBlock(p,0);for(var m=0;m<l;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var U2e=Q((Hq,Q2e)=>{d();(function(t,e,r){typeof Hq=="object"?Q2e.exports=Hq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Hq,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._keystream;c&&(l=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(l,0);for(var u=0;u<a;u++)n[i+u]^=l[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var H2e=Q((Wq,q2e)=>{d();(function(t,e,r){typeof Wq=="object"?q2e.exports=Wq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Wq,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var G2e=Q((Gq,W2e)=>{d();(function(t,e,r){typeof Gq=="object"?W2e.exports=Gq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Gq,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var V2e=Q((jq,j2e)=>{d();(function(t,e,r){typeof jq=="object"?j2e.exports=jq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(jq,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var z2e=Q((Vq,$2e)=>{d();(function(t,e,r){typeof Vq=="object"?$2e.exports=Vq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Vq,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var K2e=Q(($q,Y2e)=>{d();(function(t,e,r){typeof $q=="object"?Y2e.exports=$q=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})($q,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var X2e=Q((zq,J2e)=>{d();(function(t,e,r){typeof zq=="object"?J2e.exports=zq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(zq,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var eRe=Q((Yq,Z2e)=>{d();(function(t,e,r){typeof Yq=="object"?Z2e.exports=Yq=e(Vi(),$c()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Yq,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,c=r.format,l=c.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var f=a.parse(u);return i.create({ciphertext:f})},"parse")}}(),t.format.Hex})});var rRe=Q((Kq,tRe)=>{d();(function(t,e,r){typeof Kq=="object"?tRe.exports=Kq=e(Vi(),Hx(),Wx(),m1(),$c()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Kq,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],c=[],l=[],u=[],f=[],p=[],m=[],h=[],g=[];(function(){for(var x=[],b=0;b<256;b++)b<128?x[b]=b<<1:x[b]=b<<1^283;for(var _=0,k=0,b=0;b<256;b++){var P=k^k<<1^k<<2^k<<3^k<<4;P=P>>>8^P&255^99,o[_]=P,a[P]=_;var N=x[_],M=x[N],J=x[M],se=x[P]*257^P*16843008;c[_]=se<<24|se>>>8,l[_]=se<<16|se>>>16,u[_]=se<<8|se>>>24,f[_]=se;var se=J*16843009^M*65537^N*257^_*16843008;p[P]=se<<24|se>>>8,m[P]=se<<16|se>>>16,h[P]=se<<8|se>>>24,g[P]=se,_?(_=N^x[x[x[J^N]]],k^=x[x[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],E=i.AES=n.extend({_doReset:s(function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,_=b.words,k=b.sigBytes/4,P=this._nRounds=k+6,N=(P+1)*4,M=this._keySchedule=[],J=0;J<N;J++)J<k?M[J]=_[J]:(x=M[J-1],J%k?k>6&&J%k==4&&(x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255]):(x=x<<8|x>>>24,x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255],x^=y[J/k|0]<<24),M[J]=M[J-k]^x);for(var se=this._invKeySchedule=[],K=0;K<N;K++){var J=N-K;if(K%4)var x=M[J];else var x=M[J-4];K<4||J<=4?se[K]=x:se[K]=p[o[x>>>24]]^m[o[x>>>16&255]]^h[o[x>>>8&255]]^g[o[x&255]]}}},"_doReset"),encryptBlock:s(function(x,b){this._doCryptBlock(x,b,this._keySchedule,c,l,u,f,o)},"encryptBlock"),decryptBlock:s(function(x,b){var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_,this._doCryptBlock(x,b,this._invKeySchedule,p,m,h,g,a);var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_},"decryptBlock"),_doCryptBlock:s(function(x,b,_,k,P,N,M,J){for(var se=this._nRounds,K=x[b]^_[0],G=x[b+1]^_[1],q=x[b+2]^_[2],le=x[b+3]^_[3],ie=4,V=1;V<se;V++){var H=k[K>>>24]^P[G>>>16&255]^N[q>>>8&255]^M[le&255]^_[ie++],z=k[G>>>24]^P[q>>>16&255]^N[le>>>8&255]^M[K&255]^_[ie++],X=k[q>>>24]^P[le>>>16&255]^N[K>>>8&255]^M[G&255]^_[ie++],ue=k[le>>>24]^P[K>>>16&255]^N[G>>>8&255]^M[q&255]^_[ie++];K=H,G=z,q=X,le=ue}var H=(J[K>>>24]<<24|J[G>>>16&255]<<16|J[q>>>8&255]<<8|J[le&255])^_[ie++],z=(J[G>>>24]<<24|J[q>>>16&255]<<16|J[le>>>8&255]<<8|J[K&255])^_[ie++],X=(J[q>>>24]<<24|J[le>>>16&255]<<16|J[K>>>8&255]<<8|J[G&255])^_[ie++],ue=(J[le>>>24]<<24|J[K>>>16&255]<<16|J[G>>>8&255]<<8|J[q&255])^_[ie++];x[b]=H,x[b+1]=z,x[b+2]=X,x[b+3]=ue},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(E)}(),t.AES})});var iRe=Q((Jq,nRe)=>{d();(function(t,e,r){typeof Jq=="object"?nRe.exports=Jq=e(Vi(),Hx(),Wx(),m1(),$c()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Jq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,E=y.words,x=[],b=0;b<56;b++){var _=a[b]-1;x[b]=E[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],P=0;P<16;P++){for(var N=k[P]=[],M=l[P],b=0;b<24;b++)N[b/6|0]|=x[(c[b]-1+M)%28]<<31-b%6,N[4+(b/6|0)]|=x[28+(c[b+24]-1+M)%28]<<31-b%6;N[0]=N[0]<<1|N[0]>>>31;for(var b=1;b<7;b++)N[b]=N[b]>>>(b-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var J=this._invSubKeys=[],b=0;b<16;b++)J[b]=k[15-b]},"_doReset"),encryptBlock:s(function(y,E){this._doCryptBlock(y,E,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,E){this._doCryptBlock(y,E,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,E,x){this._lBlock=y[E],this._rBlock=y[E+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var b=0;b<16;b++){for(var _=x[b],k=this._lBlock,P=this._rBlock,N=0,M=0;M<8;M++)N|=u[M][((P^_[M])&f[M])>>>0];this._lBlock=P,this._rBlock=k^N}var J=this._lBlock;this._lBlock=this._rBlock,this._rBlock=J,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[E]=this._lBlock,y[E+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,E){var x=(this._lBlock>>>y^this._rBlock)&E;this._rBlock^=x,this._lBlock^=x<<y}s(m,"exchangeLR");function h(y,E){var x=(this._rBlock>>>y^this._lBlock)&E;this._lBlock^=x,this._rBlock^=x<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,E=y.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=E.slice(0,2),b=E.length<4?E.slice(0,2):E.slice(2,4),_=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=p.createEncryptor(n.create(x)),this._des2=p.createEncryptor(n.create(b)),this._des3=p.createEncryptor(n.create(_))},"_doReset"),encryptBlock:s(function(y,E){this._des1.encryptBlock(y,E),this._des2.decryptBlock(y,E),this._des3.encryptBlock(y,E)},"encryptBlock"),decryptBlock:s(function(y,E){this._des3.decryptBlock(y,E),this._des2.encryptBlock(y,E),this._des1.decryptBlock(y,E)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var sRe=Q((Xq,oRe)=>{d();(function(t,e,r){typeof Xq=="object"?oRe.exports=Xq=e(Vi(),Hx(),Wx(),m1(),$c()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Xq,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var l=this._key,u=l.words,f=l.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%f,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var E=p[m];p[m]=p[h],p[h]=E}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(l,u){l[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var l=this._S,u=this._i,f=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,f=(f+l[u])%256;var h=l[u];l[u]=l[f],l[f]=h,p|=l[(l[u]+l[f])%256]<<24-m*8}return this._i=u,this._j=f,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var c=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(c)}(),t.RC4})});var cRe=Q((Zq,aRe)=>{d();(function(t,e,r){typeof Zq=="object"?aRe.exports=Zq=e(Vi(),Hx(),Wx(),m1(),$c()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Zq,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.Rabbit=n.extend({_doReset:s(function(){for(var f=this._key.words,p=this.cfg.iv,m=0;m<4;m++)f[m]=(f[m]<<8|f[m]>>>24)&16711935|(f[m]<<24|f[m]>>>8)&4278255360;var h=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,E=y[0],x=y[1],b=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,k=b>>>16|_&4294901760,P=_<<16|b&65535;g[0]^=b,g[1]^=k,g[2]^=_,g[3]^=P,g[4]^=b,g[5]^=k,g[6]^=_,g[7]^=P;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,y=h>>>16,E=((g*g>>>17)+g*y>>>15)+y*y,x=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=E^x}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(l)}(),t.Rabbit})});var uRe=Q((eH,lRe)=>{d();(function(t,e,r){typeof eH=="object"?lRe.exports=eH=e(Vi(),Hx(),Wx(),m1(),$c()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(eH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.RabbitLegacy=n.extend({_doReset:s(function(){var f=this._key.words,p=this.cfg.iv,m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],h=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,E=y[0],x=y[1],b=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,k=b>>>16|_&4294901760,P=_<<16|b&65535;h[0]^=b,h[1]^=k,h[2]^=_,h[3]^=P,h[4]^=b,h[5]^=k,h[6]^=_,h[7]^=P;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,y=h>>>16,E=((g*g>>>17)+g*y>>>15)+y*y,x=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=E^x}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(l)}(),t.RabbitLegacy})});var fRe=Q((tH,dRe)=>{d();(function(t,e,r){typeof tH=="object"?dRe.exports=tH=e(Vi(),Hx(),Wx(),m1(),$c()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(tH,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function u(g,y){let E=y>>24&255,x=y>>16&255,b=y>>8&255,_=y&255,k=g.sbox[0][E]+g.sbox[1][x];return k=k^g.sbox[2][b],k=k+g.sbox[3][_],k}s(u,"F");function f(g,y,E){let x=y,b=E,_;for(let k=0;k<o;++k)x=x^g.pbox[k],b=u(g,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^g.pbox[o],x=x^g.pbox[o+1],{left:x,right:b}}s(f,"BlowFish_Encrypt");function p(g,y,E){let x=y,b=E,_;for(let k=o+1;k>1;--k)x=x^g.pbox[k],b=u(g,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^g.pbox[1],x=x^g.pbox[0],{left:x,right:b}}s(p,"BlowFish_Decrypt");function m(g,y,E){for(let P=0;P<4;P++){g.sbox[P]=[];for(let N=0;N<256;N++)g.sbox[P][N]=c[P][N]}let x=0;for(let P=0;P<o+2;P++)g.pbox[P]=a[P]^y[x],x++,x>=E&&(x=0);let b=0,_=0,k=0;for(let P=0;P<o+2;P+=2)k=f(g,b,_),b=k.left,_=k.right,g.pbox[P]=b,g.pbox[P+1]=_;for(let P=0;P<4;P++)for(let N=0;N<256;N+=2)k=f(g,b,_),b=k.left,_=k.right,g.sbox[P][N]=b,g.sbox[P][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,E=g.sigBytes/4;m(l,y,E)}},"_doReset"),encryptBlock:s(function(g,y){var E=f(l,g[y],g[y+1]);g[y]=E.left,g[y+1]=E.right},"encryptBlock"),decryptBlock:s(function(g,y){var E=p(l,g[y],g[y+1]);g[y]=E.left,g[y+1]=E.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var Gx=Q((rH,pRe)=>{d();(function(t,e,r){typeof rH=="object"?pRe.exports=rH=e(Vi(),c6(),u2e(),f2e(),Hx(),h2e(),Wx(),Aae(),Sq(),E2e(),yae(),b2e(),T2e(),_2e(),Lq(),k2e(),m1(),$c(),N2e(),M2e(),O2e(),U2e(),H2e(),G2e(),V2e(),z2e(),K2e(),X2e(),eRe(),rRe(),iRe(),sRe(),cRe(),uRe(),fRe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(rH,function(t){return t})});var o4=Q(Qu=>{"use strict";d();Object.defineProperty(Qu,"__esModule",{value:!0});Qu.stringArray=Qu.array=Qu.func=Qu.error=Qu.number=Qu.string=Qu.boolean=void 0;function rxt(t){return t===!0||t===!1}s(rxt,"boolean");Qu.boolean=rxt;function $ke(t){return typeof t=="string"||t instanceof String}s($ke,"string");Qu.string=$ke;function nxt(t){return typeof t=="number"||t instanceof Number}s(nxt,"number");Qu.number=nxt;function ixt(t){return t instanceof Error}s(ixt,"error");Qu.error=ixt;function oxt(t){return typeof t=="function"}s(oxt,"func");Qu.func=oxt;function zke(t){return Array.isArray(t)}s(zke,"array");Qu.array=zke;function sxt(t){return zke(t)&&t.every(e=>$ke(e))}s(sxt,"stringArray");Qu.stringArray=sxt});var Gce=Q(Yr=>{"use strict";d();Object.defineProperty(Yr,"__esModule",{value:!0});Yr.Message=Yr.NotificationType9=Yr.NotificationType8=Yr.NotificationType7=Yr.NotificationType6=Yr.NotificationType5=Yr.NotificationType4=Yr.NotificationType3=Yr.NotificationType2=Yr.NotificationType1=Yr.NotificationType0=Yr.NotificationType=Yr.RequestType9=Yr.RequestType8=Yr.RequestType7=Yr.RequestType6=Yr.RequestType5=Yr.RequestType4=Yr.RequestType3=Yr.RequestType2=Yr.RequestType1=Yr.RequestType=Yr.RequestType0=Yr.AbstractMessageSignature=Yr.ParameterStructures=Yr.ResponseError=Yr.ErrorCodes=void 0;var m_=o4(),Ece;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Ece||(Yr.ErrorCodes=Ece={}));var vce=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=m_.number(e)?e:Ece.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Yr.ResponseError=vce;var ff=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Yr.ParameterStructures=ff;ff.auto=new ff("auto");ff.byPosition=new ff("byPosition");ff.byName=new ff("byName");var Fs=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return ff.auto}};Yr.AbstractMessageSignature=Fs;var xce=class extends Fs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};Yr.RequestType0=xce;var bce=class extends Fs{static{s(this,"RequestType")}constructor(e,r=ff.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Yr.RequestType=bce;var Ice=class extends Fs{static{s(this,"RequestType1")}constructor(e,r=ff.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Yr.RequestType1=Ice;var Tce=class extends Fs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};Yr.RequestType2=Tce;var wce=class extends Fs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};Yr.RequestType3=wce;var _ce=class extends Fs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};Yr.RequestType4=_ce;var Sce=class extends Fs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};Yr.RequestType5=Sce;var Rce=class extends Fs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};Yr.RequestType6=Rce;var kce=class extends Fs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};Yr.RequestType7=kce;var Pce=class extends Fs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};Yr.RequestType8=Pce;var Bce=class extends Fs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};Yr.RequestType9=Bce;var Dce=class extends Fs{static{s(this,"NotificationType")}constructor(e,r=ff.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Yr.NotificationType=Dce;var Nce=class extends Fs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};Yr.NotificationType0=Nce;var Lce=class extends Fs{static{s(this,"NotificationType1")}constructor(e,r=ff.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Yr.NotificationType1=Lce;var Mce=class extends Fs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};Yr.NotificationType2=Mce;var Fce=class extends Fs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};Yr.NotificationType3=Fce;var Oce=class extends Fs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};Yr.NotificationType4=Oce;var Qce=class extends Fs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};Yr.NotificationType5=Qce;var Uce=class extends Fs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};Yr.NotificationType6=Uce;var qce=class extends Fs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};Yr.NotificationType7=qce;var Hce=class extends Fs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};Yr.NotificationType8=Hce;var Wce=class extends Fs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};Yr.NotificationType9=Wce;var Yke;(function(t){function e(i){let o=i;return o&&m_.string(o.method)&&(m_.string(o.id)||m_.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&m_.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(m_.string(o.id)||m_.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(Yke||(Yr.Message=Yke={}))});var Vce=Q(tb=>{"use strict";d();var Kke;Object.defineProperty(tb,"__esModule",{value:!0});tb.LRUCache=tb.LinkedMap=tb.Touch=void 0;var Uu;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Uu||(tb.Touch=Uu={}));var UH=class{static{s(this,"LinkedMap")}constructor(){this[Kke]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=Uu.None){let n=this._map.get(e);if(n)return r!==Uu.None&&this.touch(n,r),n.value}set(e,r,n=Uu.None){let i=this._map.get(e);if(i)i.value=r,n!==Uu.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case Uu.None:this.addItemLast(i);break;case Uu.First:this.addItemFirst(i);break;case Uu.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(Kke=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Uu.First&&r!==Uu.Last)){if(r===Uu.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===Uu.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};tb.LinkedMap=UH;var jce=class extends UH{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=Uu.AsNew){return super.get(e,r)}peek(e){return super.get(e,Uu.None)}set(e,r){return super.set(e,r,Uu.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};tb.LRUCache=jce});var Xke=Q(qH=>{"use strict";d();Object.defineProperty(qH,"__esModule",{value:!0});qH.Disposable=void 0;var Jke;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(Jke||(qH.Disposable=Jke={}))});var rb=Q(Yce=>{"use strict";d();Object.defineProperty(Yce,"__esModule",{value:!0});var $ce;function zce(){if($ce===void 0)throw new Error("No runtime abstraction layer installed");return $ce}s(zce,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");$ce=r}s(e,"install"),t.install=e})(zce||(zce={}));Yce.default=zce});var a4=Q(s4=>{"use strict";d();Object.defineProperty(s4,"__esModule",{value:!0});s4.Emitter=s4.Event=void 0;var axt=rb(),Zke;(function(t){let e={dispose(){}};t.None=function(){return e}})(Zke||(s4.Event=Zke={}));var Kce=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(c){(0,axt.default)().console.error(c)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},HH=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new Kce),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};s4.Emitter=HH;HH._noop=function(){}});var jH=Q(c4=>{"use strict";d();Object.defineProperty(c4,"__esModule",{value:!0});c4.CancellationTokenSource=c4.CancellationToken=void 0;var cxt=rb(),lxt=o4(),Jce=a4(),WH;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Jce.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Jce.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||lxt.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(WH||(c4.CancellationToken=WH={}));var uxt=Object.freeze(function(t,e){let r=(0,cxt.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),GH=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?uxt:(this._emitter||(this._emitter=new Jce.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Xce=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new GH),this._token}cancel(){this._token?this._token.cancel():this._token=WH.Cancelled}dispose(){this._token?this._token instanceof GH&&this._token.dispose():this._token=WH.None}};c4.CancellationTokenSource=Xce});var e4e=Q(l4=>{"use strict";d();Object.defineProperty(l4,"__esModule",{value:!0});l4.SharedArrayReceiverStrategy=l4.SharedArraySenderStrategy=void 0;var dxt=jH(),S6;(function(t){t.Continue=0,t.Cancelled=1})(S6||(S6={}));var Zce=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=S6.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,S6.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};l4.SharedArraySenderStrategy=Zce;var ele=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===S6.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},tle=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new ele(e)}cancel(){}dispose(){}},rle=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new dxt.CancellationTokenSource:new tle(r)}};l4.SharedArrayReceiverStrategy=rle});var ile=Q(VH=>{"use strict";d();Object.defineProperty(VH,"__esModule",{value:!0});VH.Semaphore=void 0;var fxt=rb(),nle=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,fxt.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};VH.Semaphore=nle});var r4e=Q(nb=>{"use strict";d();Object.defineProperty(nb,"__esModule",{value:!0});nb.ReadableStreamMessageReader=nb.AbstractMessageReader=nb.MessageReader=void 0;var sle=rb(),u4=o4(),ole=a4(),pxt=ile(),t4e;(function(t){function e(r){let n=r;return n&&u4.func(n.listen)&&u4.func(n.dispose)&&u4.func(n.onError)&&u4.func(n.onClose)&&u4.func(n.onPartialMessage)}s(e,"is"),t.is=e})(t4e||(nb.MessageReader=t4e={}));var $H=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new ole.Emitter,this.closeEmitter=new ole.Emitter,this.partialMessageEmitter=new ole.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${u4.string(e.message)?e.message:"unknown"}`)}};nb.AbstractMessageReader=$H;var ale;(function(t){function e(r){let n,i,o,a=new Map,c,l=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)l.set(u.name,u)}return c===void 0&&(c=(0,sle.default)().applicationJson.decoder,l.set(c.name,c)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}s(e,"fromOptions"),t.fromOptions=e})(ale||(ale={}));var cle=class extends $H{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=ale.fromOptions(r),this.buffer=(0,sle.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new pxt.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,sle.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};nb.ReadableStreamMessageReader=cle});var a4e=Q(ib=>{"use strict";d();Object.defineProperty(ib,"__esModule",{value:!0});ib.WriteableStreamMessageWriter=ib.AbstractMessageWriter=ib.MessageWriter=void 0;var n4e=rb(),R6=o4(),mxt=ile(),i4e=a4(),hxt="Content-Length: ",o4e=`\r
`,s4e;(function(t){function e(r){let n=r;return n&&R6.func(n.dispose)&&R6.func(n.onClose)&&R6.func(n.onError)&&R6.func(n.write)}s(e,"is"),t.is=e})(s4e||(ib.MessageWriter=s4e={}));var zH=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new i4e.Emitter,this.closeEmitter=new i4e.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${R6.string(e.message)?e.message:"unknown"}`)}};ib.AbstractMessageWriter=zH;var lle;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,n4e.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,n4e.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(lle||(lle={}));var ule=class extends zH{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=lle.fromOptions(r),this.errorCount=0,this.writeSemaphore=new mxt.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(hxt,n.byteLength.toString(),o4e),i.push(o4e),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};ib.WriteableStreamMessageWriter=ule});var c4e=Q(YH=>{"use strict";d();Object.defineProperty(YH,"__esModule",{value:!0});YH.AbstractMessageBuffer=void 0;var gxt=13,Axt=10,yxt=`\r
`,dle=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case gxt:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case Axt:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),c=new Map,l=this.toString(a,"ascii").split(yxt);if(l.length<2)return c;for(let u=0;u<l.length-2;u++){let f=l[u],p=f.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${f}`);let m=f.substr(0,p),h=f.substr(p+1).trim();c.set(e?m.toLowerCase():m,h)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};YH.AbstractMessageBuffer=dle});var p4e=Q(ci=>{"use strict";d();Object.defineProperty(ci,"__esModule",{value:!0});ci.createMessageConnection=ci.ConnectionOptions=ci.MessageStrategy=ci.CancellationStrategy=ci.CancellationSenderStrategy=ci.CancellationReceiverStrategy=ci.RequestCancellationReceiverStrategy=ci.IdCancellationReceiverStrategy=ci.ConnectionStrategy=ci.ConnectionError=ci.ConnectionErrors=ci.LogTraceNotification=ci.SetTraceNotification=ci.TraceFormat=ci.TraceValues=ci.Trace=ci.NullLogger=ci.ProgressType=ci.ProgressToken=void 0;var l4e=rb(),Ia=o4(),Bn=Gce(),u4e=Vce(),k6=a4(),fle=jH(),D6;(function(t){t.type=new Bn.NotificationType("$/cancelRequest")})(D6||(D6={}));var ple;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(ple||(ci.ProgressToken=ple={}));var P6;(function(t){t.type=new Bn.NotificationType("$/progress")})(P6||(P6={}));var mle=class{static{s(this,"ProgressType")}constructor(){}};ci.ProgressType=mle;var hle;(function(t){function e(r){return Ia.func(r)}s(e,"is"),t.is=e})(hle||(hle={}));ci.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var No;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(No||(ci.Trace=No={}));var d4e;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(d4e||(ci.TraceValues=d4e={}));(function(t){function e(n){if(!Ia.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(No||(ci.Trace=No={}));var v0;(function(t){t.Text="text",t.JSON="json"})(v0||(ci.TraceFormat=v0={}));(function(t){function e(r){return Ia.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(v0||(ci.TraceFormat=v0={}));var gle;(function(t){t.type=new Bn.NotificationType("$/setTrace")})(gle||(ci.SetTraceNotification=gle={}));var KH;(function(t){t.type=new Bn.NotificationType("$/logTrace")})(KH||(ci.LogTraceNotification=KH={}));var B6;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(B6||(ci.ConnectionErrors=B6={}));var d4=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};ci.ConnectionError=d4;var Ale;(function(t){function e(r){let n=r;return n&&Ia.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(Ale||(ci.ConnectionStrategy=Ale={}));var JH;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Ia.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ia.func(n.dispose))}s(e,"is"),t.is=e})(JH||(ci.IdCancellationReceiverStrategy=JH={}));var yle;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Ia.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ia.func(n.dispose))}s(e,"is"),t.is=e})(yle||(ci.RequestCancellationReceiverStrategy=yle={}));var XH;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new fle.CancellationTokenSource}});function e(r){return JH.is(r)||yle.is(r)}s(e,"is"),t.is=e})(XH||(ci.CancellationReceiverStrategy=XH={}));var ZH;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(D6.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Ia.func(n.sendCancellation)&&Ia.func(n.cleanup)}s(e,"is"),t.is=e})(ZH||(ci.CancellationSenderStrategy=ZH={}));var eW;(function(t){t.Message=Object.freeze({receiver:XH.Message,sender:ZH.Message});function e(r){let n=r;return n&&XH.is(n.receiver)&&ZH.is(n.sender)}s(e,"is"),t.is=e})(eW||(ci.CancellationStrategy=eW={}));var tW;(function(t){function e(r){let n=r;return n&&Ia.func(n.handleMessage)}s(e,"is"),t.is=e})(tW||(ci.MessageStrategy=tW={}));var f4e;(function(t){function e(r){let n=r;return n&&(eW.is(n.cancellationStrategy)||Ale.is(n.connectionStrategy)||tW.is(n.messageStrategy))}s(e,"is"),t.is=e})(f4e||(ci.ConnectionOptions=f4e={}));var Gh;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Gh||(Gh={}));function Cxt(t,e,r,n){let i=r!==void 0?r:ci.NullLogger,o=0,a=0,c=0,l="2.0",u,f=new Map,p,m=new Map,h=new Map,g,y=new u4e.LinkedMap,E=new Map,x=new Set,b=new Map,_=No.Off,k=v0.Text,P,N=Gh.New,M=new k6.Emitter,J=new k6.Emitter,se=new k6.Emitter,K=new k6.Emitter,G=new k6.Emitter,q=n&&n.cancellationStrategy?n.cancellationStrategy:eW.Message;function le(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(le,"createRequestQueueKey");function ie(Ae){return Ae===null?"res-unknown-"+(++c).toString():"res-"+Ae.toString()}s(ie,"createResponseQueueKey");function V(){return"not-"+(++a).toString()}s(V,"createNotificationQueueKey");function H(Ae,Ge){Bn.Message.isRequest(Ge)?Ae.set(le(Ge.id),Ge):Bn.Message.isResponse(Ge)?Ae.set(ie(Ge.id),Ge):Ae.set(V(),Ge)}s(H,"addMessageToQueue");function z(Ae){}s(z,"cancelUndispatched");function X(){return N===Gh.Listening}s(X,"isListening");function ue(){return N===Gh.Closed}s(ue,"isClosed");function ne(){return N===Gh.Disposed}s(ne,"isDisposed");function me(){(N===Gh.New||N===Gh.Listening)&&(N=Gh.Closed,J.fire(void 0))}s(me,"closeHandler");function he(Ae){M.fire([Ae,void 0,void 0])}s(he,"readErrorHandler");function Qe(Ae){M.fire(Ae)}s(Qe,"writeErrorHandler"),t.onClose(me),t.onError(he),e.onClose(me),e.onError(Qe);function ke(){g||y.size===0||(g=(0,l4e.default)().timer.setImmediate(()=>{g=void 0,Fe()}))}s(ke,"triggerMessageQueue");function tt(Ae){Bn.Message.isRequest(Ae)?St(Ae):Bn.Message.isNotification(Ae)?It(Ae):Bn.Message.isResponse(Ae)?vt(Ae):de(Ae)}s(tt,"handleMessage");function Fe(){if(y.size===0)return;let Ae=y.shift();try{let Ge=n?.messageStrategy;tW.is(Ge)?Ge.handleMessage(Ae,tt):tt(Ae)}finally{ke()}}s(Fe,"processMessageQueue");let ht=s(Ae=>{try{if(Bn.Message.isNotification(Ae)&&Ae.method===D6.type.method){let Ge=Ae.params.id,ft=le(Ge),Et=y.get(ft);if(Bn.Message.isRequest(Et)){let Vt=n?.connectionStrategy,Er=Vt&&Vt.cancelUndispatched?Vt.cancelUndispatched(Et,z):void 0;if(Er&&(Er.error!==void 0||Er.result!==void 0)){y.delete(ft),b.delete(Ge),Er.id=Et.id,te(Er,Ae.method,Date.now()),e.write(Er).catch(()=>i.error("Sending response for canceled message failed."));return}}let Zt=b.get(Ge);if(Zt!==void 0){Zt.cancel(),We(Ae);return}else x.add(Ge)}H(y,Ae)}finally{ke()}},"callback");function St(Ae){if(ne())return;function Ge(zt,ir,Xt){let Sr={jsonrpc:l,id:Ae.id};zt instanceof Bn.ResponseError?Sr.error=zt.toJson():Sr.result=zt===void 0?null:zt,te(Sr,ir,Xt),e.write(Sr).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ft(zt,ir,Xt){let Sr={jsonrpc:l,id:Ae.id,error:zt.toJson()};te(Sr,ir,Xt),e.write(Sr).catch(()=>i.error("Sending response failed."))}s(ft,"replyError");function Et(zt,ir,Xt){zt===void 0&&(zt=null);let Sr={jsonrpc:l,id:Ae.id,result:zt};te(Sr,ir,Xt),e.write(Sr).catch(()=>i.error("Sending response failed."))}s(Et,"replySuccess"),oe(Ae);let Zt=f.get(Ae.method),Vt,Er;Zt&&(Vt=Zt.type,Er=Zt.handler);let Ir=Date.now();if(Er||u){let zt=Ae.id??String(Date.now()),ir=JH.is(q.receiver)?q.receiver.createCancellationTokenSource(zt):q.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&x.has(Ae.id)&&ir.cancel(),Ae.id!==null&&b.set(zt,ir);try{let Xt;if(Er)if(Ae.params===void 0){if(Vt!==void 0&&Vt.numberOfParams!==0){ft(new Bn.ResponseError(Bn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Vt.numberOfParams} params but received none.`),Ae.method,Ir);return}Xt=Er(ir.token)}else if(Array.isArray(Ae.params)){if(Vt!==void 0&&Vt.parameterStructures===Bn.ParameterStructures.byName){ft(new Bn.ResponseError(Bn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,Ir);return}Xt=Er(...Ae.params,ir.token)}else{if(Vt!==void 0&&Vt.parameterStructures===Bn.ParameterStructures.byPosition){ft(new Bn.ResponseError(Bn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,Ir);return}Xt=Er(Ae.params,ir.token)}else u&&(Xt=u(Ae.method,Ae.params,ir.token));let Sr=Xt;Xt?Sr.then?Sr.then(Qr=>{b.delete(zt),Ge(Qr,Ae.method,Ir)},Qr=>{b.delete(zt),Qr instanceof Bn.ResponseError?ft(Qr,Ae.method,Ir):Qr&&Ia.string(Qr.message)?ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Qr.message}`),Ae.method,Ir):ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,Ir)}):(b.delete(zt),Ge(Xt,Ae.method,Ir)):(b.delete(zt),Et(Xt,Ae.method,Ir))}catch(Xt){b.delete(zt),Xt instanceof Bn.ResponseError?Ge(Xt,Ae.method,Ir):Xt&&Ia.string(Xt.message)?ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Xt.message}`),Ae.method,Ir):ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,Ir)}}else ft(new Bn.ResponseError(Bn.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,Ir)}s(St,"handleRequest");function vt(Ae){if(!ne())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=Ae.id,ft=E.get(Ge);if(De(Ae,ft),ft!==void 0){E.delete(Ge);try{if(Ae.error){let Et=Ae.error;ft.reject(new Bn.ResponseError(Et.code,Et.message,Et.data))}else if(Ae.result!==void 0)ft.resolve(Ae.result);else throw new Error("Should never happen.")}catch(Et){Et.message?i.error(`Response handler '${ft.method}' failed with message: ${Et.message}`):i.error(`Response handler '${ft.method}' failed unexpectedly.`)}}}}s(vt,"handleResponse");function It(Ae){if(ne())return;let Ge,ft;if(Ae.method===D6.type.method){let Et=Ae.params.id;x.delete(Et),We(Ae);return}else{let Et=m.get(Ae.method);Et&&(ft=Et.handler,Ge=Et.type)}if(ft||p)try{if(We(Ae),ft)if(Ae.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==Bn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received none.`),ft();else if(Array.isArray(Ae.params)){let Et=Ae.params;Ae.method===P6.type.method&&Et.length===2&&ple.is(Et[0])?ft({token:Et[0],value:Et[1]}):(Ge!==void 0&&(Ge.parameterStructures===Bn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received ${Et.length} arguments`)),ft(...Et))}else Ge!==void 0&&Ge.parameterStructures===Bn.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ft(Ae.params);else p&&p(Ae.method,Ae.params)}catch(Et){Et.message?i.error(`Notification handler '${Ae.method}' failed with message: ${Et.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else se.fire(Ae)}s(It,"handleNotification");function de(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let Ge=Ae;if(Ia.string(Ge.id)||Ia.number(Ge.id)){let ft=Ge.id,Et=E.get(ft);Et&&Et.reject(new Error("The received response has neither a result nor an error property."))}}s(de,"handleInvalidMessage");function Ue(Ae){if(Ae!=null)switch(_){case No.Verbose:return JSON.stringify(Ae,null,4);case No.Compact:return JSON.stringify(Ae);default:return}}s(Ue,"stringifyTrace");function ye(Ae){if(!(_===No.Off||!P))if(k===v0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&Ae.params&&(Ge=`Params: ${Ue(Ae.params)}

`),P.log(`Sending request '${Ae.method} - (${Ae.id})'.`,Ge)}else xe("send-request",Ae)}s(ye,"traceSendingRequest");function nt(Ae){if(!(_===No.Off||!P))if(k===v0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&(Ae.params?Ge=`Params: ${Ue(Ae.params)}

`:Ge=`No parameters provided.

`),P.log(`Sending notification '${Ae.method}'.`,Ge)}else xe("send-notification",Ae)}s(nt,"traceSendingNotification");function te(Ae,Ge,ft){if(!(_===No.Off||!P))if(k===v0.Text){let Et;(_===No.Verbose||_===No.Compact)&&(Ae.error&&Ae.error.data?Et=`Error data: ${Ue(Ae.error.data)}

`:Ae.result?Et=`Result: ${Ue(Ae.result)}

`:Ae.error===void 0&&(Et=`No result returned.

`)),P.log(`Sending response '${Ge} - (${Ae.id})'. Processing request took ${Date.now()-ft}ms`,Et)}else xe("send-response",Ae)}s(te,"traceSendingResponse");function oe(Ae){if(!(_===No.Off||!P))if(k===v0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&Ae.params&&(Ge=`Params: ${Ue(Ae.params)}

`),P.log(`Received request '${Ae.method} - (${Ae.id})'.`,Ge)}else xe("receive-request",Ae)}s(oe,"traceReceivedRequest");function We(Ae){if(!(_===No.Off||!P||Ae.method===KH.type.method))if(k===v0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&(Ae.params?Ge=`Params: ${Ue(Ae.params)}

`:Ge=`No parameters provided.

`),P.log(`Received notification '${Ae.method}'.`,Ge)}else xe("receive-notification",Ae)}s(We,"traceReceivedNotification");function De(Ae,Ge){if(!(_===No.Off||!P))if(k===v0.Text){let ft;if((_===No.Verbose||_===No.Compact)&&(Ae.error&&Ae.error.data?ft=`Error data: ${Ue(Ae.error.data)}

`:Ae.result?ft=`Result: ${Ue(Ae.result)}

`:Ae.error===void 0&&(ft=`No result returned.

`)),Ge){let Et=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";P.log(`Received response '${Ge.method} - (${Ae.id})' in ${Date.now()-Ge.timerStart}ms.${Et}`,ft)}else P.log(`Received response ${Ae.id} without active response promise.`,ft)}else xe("receive-response",Ae)}s(De,"traceReceivedResponse");function xe(Ae,Ge){if(!P||_===No.Off)return;let ft={isLSPMessage:!0,type:Ae,message:Ge,timestamp:Date.now()};P.log(ft)}s(xe,"logLSPMessage");function Ye(){if(ue())throw new d4(B6.Closed,"Connection is closed.");if(ne())throw new d4(B6.Disposed,"Connection is disposed.")}s(Ye,"throwIfClosedOrDisposed");function st(){if(X())throw new d4(B6.AlreadyListening,"Connection is already listening")}s(st,"throwIfListening");function yt(){if(!X())throw new Error("Call listen() first.")}s(yt,"throwIfNotListening");function qt(Ae){return Ae===void 0?null:Ae}s(qt,"undefinedToNull");function dr(Ae){if(Ae!==null)return Ae}s(dr,"nullToUndefined");function Ft(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Ft,"isNamedParam");function zr(Ae,Ge){switch(Ae){case Bn.ParameterStructures.auto:return Ft(Ge)?dr(Ge):[qt(Ge)];case Bn.ParameterStructures.byName:if(!Ft(Ge))throw new Error("Received parameters by name but param is not an object literal.");return dr(Ge);case Bn.ParameterStructures.byPosition:return[qt(Ge)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(zr,"computeSingleParam");function Zr(Ae,Ge){let ft,Et=Ae.numberOfParams;switch(Et){case 0:ft=void 0;break;case 1:ft=zr(Ae.parameterStructures,Ge[0]);break;default:ft=[];for(let Zt=0;Zt<Ge.length&&Zt<Et;Zt++)ft.push(qt(Ge[Zt]));if(Ge.length<Et)for(let Zt=Ge.length;Zt<Et;Zt++)ft.push(null);break}return ft}s(Zr,"computeMessageParams");let Cn={sendNotification:s((Ae,...Ge)=>{Ye();let ft,Et;if(Ia.string(Ae)){ft=Ae;let Vt=Ge[0],Er=0,Ir=Bn.ParameterStructures.auto;Bn.ParameterStructures.is(Vt)&&(Er=1,Ir=Vt);let zt=Ge.length,ir=zt-Er;switch(ir){case 0:Et=void 0;break;case 1:Et=zr(Ir,Ge[Er]);break;default:if(Ir===Bn.ParameterStructures.byName)throw new Error(`Received ${ir} parameters for 'by Name' notification parameter structure.`);Et=Ge.slice(Er,zt).map(Xt=>qt(Xt));break}}else{let Vt=Ge;ft=Ae.method,Et=Zr(Ae,Vt)}let Zt={jsonrpc:l,method:ft,params:Et};return nt(Zt),e.write(Zt).catch(Vt=>{throw i.error("Sending notification failed."),Vt})},"sendNotification"),onNotification:s((Ae,Ge)=>{Ye();let ft;return Ia.func(Ae)?p=Ae:Ge&&(Ia.string(Ae)?(ft=Ae,m.set(Ae,{type:void 0,handler:Ge})):(ft=Ae.method,m.set(Ae.method,{type:Ae,handler:Ge}))),{dispose:s(()=>{ft!==void 0?m.delete(ft):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,Ge,ft)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ft),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((Ae,Ge,ft)=>Cn.sendNotification(P6.type,{token:Ge,value:ft}),"sendProgress"),onUnhandledProgress:K.event,sendRequest:s((Ae,...Ge)=>{Ye(),yt();let ft,Et,Zt;if(Ia.string(Ae)){ft=Ae;let zt=Ge[0],ir=Ge[Ge.length-1],Xt=0,Sr=Bn.ParameterStructures.auto;Bn.ParameterStructures.is(zt)&&(Xt=1,Sr=zt);let Qr=Ge.length;fle.CancellationToken.is(ir)&&(Qr=Qr-1,Zt=ir);let en=Qr-Xt;switch(en){case 0:Et=void 0;break;case 1:Et=zr(Sr,Ge[Xt]);break;default:if(Sr===Bn.ParameterStructures.byName)throw new Error(`Received ${en} parameters for 'by Name' request parameter structure.`);Et=Ge.slice(Xt,Qr).map($n=>qt($n));break}}else{let zt=Ge;ft=Ae.method,Et=Zr(Ae,zt);let ir=Ae.numberOfParams;Zt=fle.CancellationToken.is(zt[ir])?zt[ir]:void 0}let Vt=o++,Er;Zt&&(Er=Zt.onCancellationRequested(()=>{let zt=q.sender.sendCancellation(Cn,Vt);return zt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Vt}`),Promise.resolve()):zt.catch(()=>{i.log(`Sending cancellation messages for id ${Vt} failed`)})}));let Ir={jsonrpc:l,id:Vt,method:ft,params:Et};return ye(Ir),typeof q.sender.enableCancellation=="function"&&q.sender.enableCancellation(Ir),new Promise(async(zt,ir)=>{let Xt=s(en=>{zt(en),q.sender.cleanup(Vt),Er?.dispose()},"resolveWithCleanup"),Sr=s(en=>{ir(en),q.sender.cleanup(Vt),Er?.dispose()},"rejectWithCleanup"),Qr={method:ft,timerStart:Date.now(),resolve:Xt,reject:Sr};try{await e.write(Ir),E.set(Vt,Qr)}catch(en){throw i.error("Sending request failed."),Qr.reject(new Bn.ResponseError(Bn.ErrorCodes.MessageWriteError,en.message?en.message:"Unknown reason")),en}})},"sendRequest"),onRequest:s((Ae,Ge)=>{Ye();let ft=null;return hle.is(Ae)?(ft=void 0,u=Ae):Ia.string(Ae)?(ft=null,Ge!==void 0&&(ft=Ae,f.set(Ae,{handler:Ge,type:void 0}))):Ge!==void 0&&(ft=Ae.method,f.set(Ae.method,{type:Ae,handler:Ge})),{dispose:s(()=>{ft!==null&&(ft!==void 0?f.delete(ft):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>E.size>0,"hasPendingResponse"),trace:s(async(Ae,Ge,ft)=>{let Et=!1,Zt=v0.Text;ft!==void 0&&(Ia.boolean(ft)?Et=ft:(Et=ft.sendNotification||!1,Zt=ft.traceFormat||v0.Text)),_=Ae,k=Zt,_===No.Off?P=void 0:P=Ge,Et&&!ue()&&!ne()&&await Cn.sendNotification(gle.type,{value:No.toString(Ae)})},"trace"),onError:M.event,onClose:J.event,onUnhandledNotification:se.event,onDispose:G.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(ne())return;N=Gh.Disposed,G.fire(void 0);let Ae=new Bn.ResponseError(Bn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of E.values())Ge.reject(Ae);E=new Map,b=new Map,x=new Set,y=new u4e.LinkedMap,Ia.func(e.dispose)&&e.dispose(),Ia.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{Ye(),st(),N=Gh.Listening,t.listen(ht)},"listen"),inspect:s(()=>{(0,l4e.default)().console.log("inspect")},"inspect")};return Cn.onNotification(KH.type,Ae=>{if(_===No.Off||!P)return;let Ge=_===No.Verbose||_===No.Compact;P.log(Ae.message,Ge?Ae.verbose:void 0)}),Cn.onNotification(P6.type,Ae=>{let Ge=h.get(Ae.token);Ge?Ge(Ae.value):K.fire(Ae)}),Cn}s(Cxt,"createMessageConnection");ci.createMessageConnection=Cxt});var rW=Q(dt=>{"use strict";d();Object.defineProperty(dt,"__esModule",{value:!0});dt.ProgressType=dt.ProgressToken=dt.createMessageConnection=dt.NullLogger=dt.ConnectionOptions=dt.ConnectionStrategy=dt.AbstractMessageBuffer=dt.WriteableStreamMessageWriter=dt.AbstractMessageWriter=dt.MessageWriter=dt.ReadableStreamMessageReader=dt.AbstractMessageReader=dt.MessageReader=dt.SharedArrayReceiverStrategy=dt.SharedArraySenderStrategy=dt.CancellationToken=dt.CancellationTokenSource=dt.Emitter=dt.Event=dt.Disposable=dt.LRUCache=dt.Touch=dt.LinkedMap=dt.ParameterStructures=dt.NotificationType9=dt.NotificationType8=dt.NotificationType7=dt.NotificationType6=dt.NotificationType5=dt.NotificationType4=dt.NotificationType3=dt.NotificationType2=dt.NotificationType1=dt.NotificationType0=dt.NotificationType=dt.ErrorCodes=dt.ResponseError=dt.RequestType9=dt.RequestType8=dt.RequestType7=dt.RequestType6=dt.RequestType5=dt.RequestType4=dt.RequestType3=dt.RequestType2=dt.RequestType1=dt.RequestType0=dt.RequestType=dt.Message=dt.RAL=void 0;dt.MessageStrategy=dt.CancellationStrategy=dt.CancellationSenderStrategy=dt.CancellationReceiverStrategy=dt.ConnectionError=dt.ConnectionErrors=dt.LogTraceNotification=dt.SetTraceNotification=dt.TraceFormat=dt.TraceValues=dt.Trace=void 0;var Cs=Gce();Object.defineProperty(dt,"Message",{enumerable:!0,get:s(function(){return Cs.Message},"get")});Object.defineProperty(dt,"RequestType",{enumerable:!0,get:s(function(){return Cs.RequestType},"get")});Object.defineProperty(dt,"RequestType0",{enumerable:!0,get:s(function(){return Cs.RequestType0},"get")});Object.defineProperty(dt,"RequestType1",{enumerable:!0,get:s(function(){return Cs.RequestType1},"get")});Object.defineProperty(dt,"RequestType2",{enumerable:!0,get:s(function(){return Cs.RequestType2},"get")});Object.defineProperty(dt,"RequestType3",{enumerable:!0,get:s(function(){return Cs.RequestType3},"get")});Object.defineProperty(dt,"RequestType4",{enumerable:!0,get:s(function(){return Cs.RequestType4},"get")});Object.defineProperty(dt,"RequestType5",{enumerable:!0,get:s(function(){return Cs.RequestType5},"get")});Object.defineProperty(dt,"RequestType6",{enumerable:!0,get:s(function(){return Cs.RequestType6},"get")});Object.defineProperty(dt,"RequestType7",{enumerable:!0,get:s(function(){return Cs.RequestType7},"get")});Object.defineProperty(dt,"RequestType8",{enumerable:!0,get:s(function(){return Cs.RequestType8},"get")});Object.defineProperty(dt,"RequestType9",{enumerable:!0,get:s(function(){return Cs.RequestType9},"get")});Object.defineProperty(dt,"ResponseError",{enumerable:!0,get:s(function(){return Cs.ResponseError},"get")});Object.defineProperty(dt,"ErrorCodes",{enumerable:!0,get:s(function(){return Cs.ErrorCodes},"get")});Object.defineProperty(dt,"NotificationType",{enumerable:!0,get:s(function(){return Cs.NotificationType},"get")});Object.defineProperty(dt,"NotificationType0",{enumerable:!0,get:s(function(){return Cs.NotificationType0},"get")});Object.defineProperty(dt,"NotificationType1",{enumerable:!0,get:s(function(){return Cs.NotificationType1},"get")});Object.defineProperty(dt,"NotificationType2",{enumerable:!0,get:s(function(){return Cs.NotificationType2},"get")});Object.defineProperty(dt,"NotificationType3",{enumerable:!0,get:s(function(){return Cs.NotificationType3},"get")});Object.defineProperty(dt,"NotificationType4",{enumerable:!0,get:s(function(){return Cs.NotificationType4},"get")});Object.defineProperty(dt,"NotificationType5",{enumerable:!0,get:s(function(){return Cs.NotificationType5},"get")});Object.defineProperty(dt,"NotificationType6",{enumerable:!0,get:s(function(){return Cs.NotificationType6},"get")});Object.defineProperty(dt,"NotificationType7",{enumerable:!0,get:s(function(){return Cs.NotificationType7},"get")});Object.defineProperty(dt,"NotificationType8",{enumerable:!0,get:s(function(){return Cs.NotificationType8},"get")});Object.defineProperty(dt,"NotificationType9",{enumerable:!0,get:s(function(){return Cs.NotificationType9},"get")});Object.defineProperty(dt,"ParameterStructures",{enumerable:!0,get:s(function(){return Cs.ParameterStructures},"get")});var Cle=Vce();Object.defineProperty(dt,"LinkedMap",{enumerable:!0,get:s(function(){return Cle.LinkedMap},"get")});Object.defineProperty(dt,"LRUCache",{enumerable:!0,get:s(function(){return Cle.LRUCache},"get")});Object.defineProperty(dt,"Touch",{enumerable:!0,get:s(function(){return Cle.Touch},"get")});var Ext=Xke();Object.defineProperty(dt,"Disposable",{enumerable:!0,get:s(function(){return Ext.Disposable},"get")});var m4e=a4();Object.defineProperty(dt,"Event",{enumerable:!0,get:s(function(){return m4e.Event},"get")});Object.defineProperty(dt,"Emitter",{enumerable:!0,get:s(function(){return m4e.Emitter},"get")});var h4e=jH();Object.defineProperty(dt,"CancellationTokenSource",{enumerable:!0,get:s(function(){return h4e.CancellationTokenSource},"get")});Object.defineProperty(dt,"CancellationToken",{enumerable:!0,get:s(function(){return h4e.CancellationToken},"get")});var g4e=e4e();Object.defineProperty(dt,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return g4e.SharedArraySenderStrategy},"get")});Object.defineProperty(dt,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return g4e.SharedArrayReceiverStrategy},"get")});var Ele=r4e();Object.defineProperty(dt,"MessageReader",{enumerable:!0,get:s(function(){return Ele.MessageReader},"get")});Object.defineProperty(dt,"AbstractMessageReader",{enumerable:!0,get:s(function(){return Ele.AbstractMessageReader},"get")});Object.defineProperty(dt,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return Ele.ReadableStreamMessageReader},"get")});var vle=a4e();Object.defineProperty(dt,"MessageWriter",{enumerable:!0,get:s(function(){return vle.MessageWriter},"get")});Object.defineProperty(dt,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return vle.AbstractMessageWriter},"get")});Object.defineProperty(dt,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return vle.WriteableStreamMessageWriter},"get")});var vxt=c4e();Object.defineProperty(dt,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return vxt.AbstractMessageBuffer},"get")});var tu=p4e();Object.defineProperty(dt,"ConnectionStrategy",{enumerable:!0,get:s(function(){return tu.ConnectionStrategy},"get")});Object.defineProperty(dt,"ConnectionOptions",{enumerable:!0,get:s(function(){return tu.ConnectionOptions},"get")});Object.defineProperty(dt,"NullLogger",{enumerable:!0,get:s(function(){return tu.NullLogger},"get")});Object.defineProperty(dt,"createMessageConnection",{enumerable:!0,get:s(function(){return tu.createMessageConnection},"get")});Object.defineProperty(dt,"ProgressToken",{enumerable:!0,get:s(function(){return tu.ProgressToken},"get")});Object.defineProperty(dt,"ProgressType",{enumerable:!0,get:s(function(){return tu.ProgressType},"get")});Object.defineProperty(dt,"Trace",{enumerable:!0,get:s(function(){return tu.Trace},"get")});Object.defineProperty(dt,"TraceValues",{enumerable:!0,get:s(function(){return tu.TraceValues},"get")});Object.defineProperty(dt,"TraceFormat",{enumerable:!0,get:s(function(){return tu.TraceFormat},"get")});Object.defineProperty(dt,"SetTraceNotification",{enumerable:!0,get:s(function(){return tu.SetTraceNotification},"get")});Object.defineProperty(dt,"LogTraceNotification",{enumerable:!0,get:s(function(){return tu.LogTraceNotification},"get")});Object.defineProperty(dt,"ConnectionErrors",{enumerable:!0,get:s(function(){return tu.ConnectionErrors},"get")});Object.defineProperty(dt,"ConnectionError",{enumerable:!0,get:s(function(){return tu.ConnectionError},"get")});Object.defineProperty(dt,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return tu.CancellationReceiverStrategy},"get")});Object.defineProperty(dt,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return tu.CancellationSenderStrategy},"get")});Object.defineProperty(dt,"CancellationStrategy",{enumerable:!0,get:s(function(){return tu.CancellationStrategy},"get")});Object.defineProperty(dt,"MessageStrategy",{enumerable:!0,get:s(function(){return tu.MessageStrategy},"get")});var xxt=rb();dt.RAL=xxt.default});var C4e=Q(Tle=>{"use strict";d();Object.defineProperty(Tle,"__esModule",{value:!0});var A4e=require("util"),R1=rW(),nW=class t extends R1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new A4e.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};nW.emptyBuffer=Buffer.allocUnsafe(0);var xle=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),R1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),R1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),R1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),R1.Disposable.create(()=>this.stream.off("data",e))}},ble=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),R1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),R1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),R1.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},y4e=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new nW(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new A4e.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new xle(t),"asReadableStream"),asWritableStream:s(t=>new ble(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function Ile(){return y4e}s(Ile,"RIL");(function(t){function e(){R1.RAL.install(y4e)}s(e,"install"),t.install=e})(Ile||(Ile={}));Tle.default=Ile});var A_=Q(io=>{"use strict";d();var bxt=io&&io.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ixt=io&&io.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bxt(e,t,r)};Object.defineProperty(io,"__esModule",{value:!0});io.createMessageConnection=io.createServerSocketTransport=io.createClientSocketTransport=io.createServerPipeTransport=io.createClientPipeTransport=io.generateRandomPipeName=io.StreamMessageWriter=io.StreamMessageReader=io.SocketMessageWriter=io.SocketMessageReader=io.PortMessageWriter=io.PortMessageReader=io.IPCMessageWriter=io.IPCMessageReader=void 0;var f4=C4e();f4.default.install();var E4e=require("path"),Txt=require("os"),wxt=require("crypto"),sW=require("net"),x0=rW();Ixt(rW(),io);var wle=class extends x0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),x0.Disposable.create(()=>this.process.off("message",e))}};io.IPCMessageReader=wle;var _le=class extends x0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};io.IPCMessageWriter=_le;var Sle=class extends x0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new x0.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};io.PortMessageReader=Sle;var Rle=class extends x0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};io.PortMessageWriter=Rle;var h_=class extends x0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,f4.default)().stream.asReadableStream(e),r)}};io.SocketMessageReader=h_;var g_=class extends x0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,f4.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};io.SocketMessageWriter=g_;var iW=class extends x0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,f4.default)().stream.asReadableStream(e),r)}};io.StreamMessageReader=iW;var oW=class extends x0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,f4.default)().stream.asWritableStream(e),r)}};io.StreamMessageWriter=oW;var v4e=process.env.XDG_RUNTIME_DIR,_xt=new Map([["linux",107],["darwin",103]]);function Sxt(){let t=(0,wxt.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;v4e?e=E4e.join(v4e,`vscode-ipc-${t}.sock`):e=E4e.join(Txt.tmpdir(),`vscode-${t}.sock`);let r=_xt.get(process.platform);return r!==void 0&&e.length>r&&(0,f4.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(Sxt,"generateRandomPipeName");io.generateRandomPipeName=Sxt;function Rxt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,sW.createServer)(c=>{a.close(),r([new h_(c,e),new g_(c,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Rxt,"createClientPipeTransport");io.createClientPipeTransport=Rxt;function kxt(t,e="utf-8"){let r=(0,sW.createConnection)(t);return[new h_(r,e),new g_(r,e)]}s(kxt,"createServerPipeTransport");io.createServerPipeTransport=kxt;function Pxt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,sW.createServer)(c=>{a.close(),r([new h_(c,e),new g_(c,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Pxt,"createClientSocketTransport");io.createClientSocketTransport=Pxt;function Bxt(t,e="utf-8"){let r=(0,sW.createConnection)(t,"127.0.0.1");return[new h_(r,e),new g_(r,e)]}s(Bxt,"createServerSocketTransport");io.createServerSocketTransport=Bxt;function Dxt(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(Dxt,"isReadableStream");function Nxt(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(Nxt,"isWritableStream");function Lxt(t,e,r,n){r||(r=x0.NullLogger);let i=Dxt(t)?new iW(t):t,o=Nxt(e)?new oW(e):e;return x0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,x0.createMessageConnection)(i,o,r,n)}s(Lxt,"createMessageConnection");io.createMessageConnection=Lxt});var kle=Q((fDr,x4e)=>{"use strict";d();x4e.exports=A_()});var cW=Q((b4e,aW)=>{d();(function(t){if(typeof aW=="object"&&typeof aW.exports=="object"){var e=t(require,b4e);e!==void 0&&(aW.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(W){function ge(ve){return typeof ve=="string"}s(ge,"is"),W.is=ge})(r||(e.DocumentUri=r={}));var n;(function(W){function ge(ve){return typeof ve=="string"}s(ge,"is"),W.is=ge})(n||(e.URI=n={}));var i;(function(W){W.MIN_VALUE=-2147483648,W.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&W.MIN_VALUE<=ve&&ve<=W.MAX_VALUE}s(ge,"is"),W.is=ge})(i||(e.integer=i={}));var o;(function(W){W.MIN_VALUE=0,W.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&W.MIN_VALUE<=ve&&ve<=W.MAX_VALUE}s(ge,"is"),W.is=ge})(o||(e.uinteger=o={}));var a;(function(W){function ge(re,O){return re===Number.MAX_VALUE&&(re=o.MAX_VALUE),O===Number.MAX_VALUE&&(O=o.MAX_VALUE),{line:re,character:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&_e.uinteger(O.line)&&_e.uinteger(O.character)}s(ve,"is"),W.is=ve})(a||(e.Position=a={}));var c;(function(W){function ge(re,O,Re,ze){if(_e.uinteger(re)&&_e.uinteger(O)&&_e.uinteger(Re)&&_e.uinteger(ze))return{start:a.create(re,O),end:a.create(Re,ze)};if(a.is(re)&&a.is(O))return{start:re,end:O};throw new Error("Range#create called with invalid arguments[".concat(re,", ").concat(O,", ").concat(Re,", ").concat(ze,"]"))}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&a.is(O.start)&&a.is(O.end)}s(ve,"is"),W.is=ve})(c||(e.Range=c={}));var l;(function(W){function ge(re,O){return{uri:re,range:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&c.is(O.range)&&(_e.string(O.uri)||_e.undefined(O.uri))}s(ve,"is"),W.is=ve})(l||(e.Location=l={}));var u;(function(W){function ge(re,O,Re,ze){return{targetUri:re,targetRange:O,targetSelectionRange:Re,originSelectionRange:ze}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&c.is(O.targetRange)&&_e.string(O.targetUri)&&c.is(O.targetSelectionRange)&&(c.is(O.originSelectionRange)||_e.undefined(O.originSelectionRange))}s(ve,"is"),W.is=ve})(u||(e.LocationLink=u={}));var f;(function(W){function ge(re,O,Re,ze){return{red:re,green:O,blue:Re,alpha:ze}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&_e.numberRange(O.red,0,1)&&_e.numberRange(O.green,0,1)&&_e.numberRange(O.blue,0,1)&&_e.numberRange(O.alpha,0,1)}s(ve,"is"),W.is=ve})(f||(e.Color=f={}));var p;(function(W){function ge(re,O){return{range:re,color:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&c.is(O.range)&&f.is(O.color)}s(ve,"is"),W.is=ve})(p||(e.ColorInformation=p={}));var m;(function(W){function ge(re,O,Re){return{label:re,textEdit:O,additionalTextEdits:Re}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&_e.string(O.label)&&(_e.undefined(O.textEdit)||P.is(O))&&(_e.undefined(O.additionalTextEdits)||_e.typedArray(O.additionalTextEdits,P.is))}s(ve,"is"),W.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(W){W.Comment="comment",W.Imports="imports",W.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(W){function ge(re,O,Re,ze,Gt,Pr){var gr={startLine:re,endLine:O};return _e.defined(Re)&&(gr.startCharacter=Re),_e.defined(ze)&&(gr.endCharacter=ze),_e.defined(Gt)&&(gr.kind=Gt),_e.defined(Pr)&&(gr.collapsedText=Pr),gr}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&_e.uinteger(O.startLine)&&_e.uinteger(O.startLine)&&(_e.undefined(O.startCharacter)||_e.uinteger(O.startCharacter))&&(_e.undefined(O.endCharacter)||_e.uinteger(O.endCharacter))&&(_e.undefined(O.kind)||_e.string(O.kind))}s(ve,"is"),W.is=ve})(g||(e.FoldingRange=g={}));var y;(function(W){function ge(re,O){return{location:re,message:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&l.is(O.location)&&_e.string(O.message)}s(ve,"is"),W.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var E;(function(W){W.Error=1,W.Warning=2,W.Information=3,W.Hint=4})(E||(e.DiagnosticSeverity=E={}));var x;(function(W){W.Unnecessary=1,W.Deprecated=2})(x||(e.DiagnosticTag=x={}));var b;(function(W){function ge(ve){var re=ve;return _e.objectLiteral(re)&&_e.string(re.href)}s(ge,"is"),W.is=ge})(b||(e.CodeDescription=b={}));var _;(function(W){function ge(re,O,Re,ze,Gt,Pr){var gr={range:re,message:O};return _e.defined(Re)&&(gr.severity=Re),_e.defined(ze)&&(gr.code=ze),_e.defined(Gt)&&(gr.source=Gt),_e.defined(Pr)&&(gr.relatedInformation=Pr),gr}s(ge,"create"),W.create=ge;function ve(re){var O,Re=re;return _e.defined(Re)&&c.is(Re.range)&&_e.string(Re.message)&&(_e.number(Re.severity)||_e.undefined(Re.severity))&&(_e.integer(Re.code)||_e.string(Re.code)||_e.undefined(Re.code))&&(_e.undefined(Re.codeDescription)||_e.string((O=Re.codeDescription)===null||O===void 0?void 0:O.href))&&(_e.string(Re.source)||_e.undefined(Re.source))&&(_e.undefined(Re.relatedInformation)||_e.typedArray(Re.relatedInformation,y.is))}s(ve,"is"),W.is=ve})(_||(e.Diagnostic=_={}));var k;(function(W){function ge(re,O){for(var Re=[],ze=2;ze<arguments.length;ze++)Re[ze-2]=arguments[ze];var Gt={title:re,command:O};return _e.defined(Re)&&Re.length>0&&(Gt.arguments=Re),Gt}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&_e.string(O.title)&&_e.string(O.command)}s(ve,"is"),W.is=ve})(k||(e.Command=k={}));var P;(function(W){function ge(Re,ze){return{range:Re,newText:ze}}s(ge,"replace"),W.replace=ge;function ve(Re,ze){return{range:{start:Re,end:Re},newText:ze}}s(ve,"insert"),W.insert=ve;function re(Re){return{range:Re,newText:""}}s(re,"del"),W.del=re;function O(Re){var ze=Re;return _e.objectLiteral(ze)&&_e.string(ze.newText)&&c.is(ze.range)}s(O,"is"),W.is=O})(P||(e.TextEdit=P={}));var N;(function(W){function ge(re,O,Re){var ze={label:re};return O!==void 0&&(ze.needsConfirmation=O),Re!==void 0&&(ze.description=Re),ze}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&_e.string(O.label)&&(_e.boolean(O.needsConfirmation)||O.needsConfirmation===void 0)&&(_e.string(O.description)||O.description===void 0)}s(ve,"is"),W.is=ve})(N||(e.ChangeAnnotation=N={}));var M;(function(W){function ge(ve){var re=ve;return _e.string(re)}s(ge,"is"),W.is=ge})(M||(e.ChangeAnnotationIdentifier=M={}));var J;(function(W){function ge(Re,ze,Gt){return{range:Re,newText:ze,annotationId:Gt}}s(ge,"replace"),W.replace=ge;function ve(Re,ze,Gt){return{range:{start:Re,end:Re},newText:ze,annotationId:Gt}}s(ve,"insert"),W.insert=ve;function re(Re,ze){return{range:Re,newText:"",annotationId:ze}}s(re,"del"),W.del=re;function O(Re){var ze=Re;return P.is(ze)&&(N.is(ze.annotationId)||M.is(ze.annotationId))}s(O,"is"),W.is=O})(J||(e.AnnotatedTextEdit=J={}));var se;(function(W){function ge(re,O){return{textDocument:re,edits:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&ue.is(O.textDocument)&&Array.isArray(O.edits)}s(ve,"is"),W.is=ve})(se||(e.TextDocumentEdit=se={}));var K;(function(W){function ge(re,O,Re){var ze={kind:"create",uri:re};return O!==void 0&&(O.overwrite!==void 0||O.ignoreIfExists!==void 0)&&(ze.options=O),Re!==void 0&&(ze.annotationId=Re),ze}s(ge,"create"),W.create=ge;function ve(re){var O=re;return O&&O.kind==="create"&&_e.string(O.uri)&&(O.options===void 0||(O.options.overwrite===void 0||_e.boolean(O.options.overwrite))&&(O.options.ignoreIfExists===void 0||_e.boolean(O.options.ignoreIfExists)))&&(O.annotationId===void 0||M.is(O.annotationId))}s(ve,"is"),W.is=ve})(K||(e.CreateFile=K={}));var G;(function(W){function ge(re,O,Re,ze){var Gt={kind:"rename",oldUri:re,newUri:O};return Re!==void 0&&(Re.overwrite!==void 0||Re.ignoreIfExists!==void 0)&&(Gt.options=Re),ze!==void 0&&(Gt.annotationId=ze),Gt}s(ge,"create"),W.create=ge;function ve(re){var O=re;return O&&O.kind==="rename"&&_e.string(O.oldUri)&&_e.string(O.newUri)&&(O.options===void 0||(O.options.overwrite===void 0||_e.boolean(O.options.overwrite))&&(O.options.ignoreIfExists===void 0||_e.boolean(O.options.ignoreIfExists)))&&(O.annotationId===void 0||M.is(O.annotationId))}s(ve,"is"),W.is=ve})(G||(e.RenameFile=G={}));var q;(function(W){function ge(re,O,Re){var ze={kind:"delete",uri:re};return O!==void 0&&(O.recursive!==void 0||O.ignoreIfNotExists!==void 0)&&(ze.options=O),Re!==void 0&&(ze.annotationId=Re),ze}s(ge,"create"),W.create=ge;function ve(re){var O=re;return O&&O.kind==="delete"&&_e.string(O.uri)&&(O.options===void 0||(O.options.recursive===void 0||_e.boolean(O.options.recursive))&&(O.options.ignoreIfNotExists===void 0||_e.boolean(O.options.ignoreIfNotExists)))&&(O.annotationId===void 0||M.is(O.annotationId))}s(ve,"is"),W.is=ve})(q||(e.DeleteFile=q={}));var le;(function(W){function ge(ve){var re=ve;return re&&(re.changes!==void 0||re.documentChanges!==void 0)&&(re.documentChanges===void 0||re.documentChanges.every(function(O){return _e.string(O.kind)?K.is(O)||G.is(O)||q.is(O):se.is(O)}))}s(ge,"is"),W.is=ge})(le||(e.WorkspaceEdit=le={}));var ie=function(){function W(ge,ve){this.edits=ge,this.changeAnnotations=ve}return s(W,"TextEditChangeImpl"),W.prototype.insert=function(ge,ve,re){var O,Re;if(re===void 0?O=P.insert(ge,ve):M.is(re)?(Re=re,O=J.insert(ge,ve,re)):(this.assertChangeAnnotations(this.changeAnnotations),Re=this.changeAnnotations.manage(re),O=J.insert(ge,ve,Re)),this.edits.push(O),Re!==void 0)return Re},W.prototype.replace=function(ge,ve,re){var O,Re;if(re===void 0?O=P.replace(ge,ve):M.is(re)?(Re=re,O=J.replace(ge,ve,re)):(this.assertChangeAnnotations(this.changeAnnotations),Re=this.changeAnnotations.manage(re),O=J.replace(ge,ve,Re)),this.edits.push(O),Re!==void 0)return Re},W.prototype.delete=function(ge,ve){var re,O;if(ve===void 0?re=P.del(ge):M.is(ve)?(O=ve,re=J.del(ge,ve)):(this.assertChangeAnnotations(this.changeAnnotations),O=this.changeAnnotations.manage(ve),re=J.del(ge,O)),this.edits.push(re),O!==void 0)return O},W.prototype.add=function(ge){this.edits.push(ge)},W.prototype.all=function(){return this.edits},W.prototype.clear=function(){this.edits.splice(0,this.edits.length)},W.prototype.assertChangeAnnotations=function(ge){if(ge===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},W}(),V=function(){function W(ge){this._annotations=ge===void 0?Object.create(null):ge,this._counter=0,this._size=0}return s(W,"ChangeAnnotations"),W.prototype.all=function(){return this._annotations},Object.defineProperty(W.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),W.prototype.manage=function(ge,ve){var re;if(M.is(ge)?re=ge:(re=this.nextId(),ve=ge),this._annotations[re]!==void 0)throw new Error("Id ".concat(re," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(re));return this._annotations[re]=ve,this._size++,re},W.prototype.nextId=function(){return this._counter++,this._counter.toString()},W}(),H=function(){function W(ge){var ve=this;this._textEditChanges=Object.create(null),ge!==void 0?(this._workspaceEdit=ge,ge.documentChanges?(this._changeAnnotations=new V(ge.changeAnnotations),ge.changeAnnotations=this._changeAnnotations.all(),ge.documentChanges.forEach(function(re){if(se.is(re)){var O=new ie(re.edits,ve._changeAnnotations);ve._textEditChanges[re.textDocument.uri]=O}})):ge.changes&&Object.keys(ge.changes).forEach(function(re){var O=new ie(ge.changes[re]);ve._textEditChanges[re]=O})):this._workspaceEdit={}}return s(W,"WorkspaceChange"),Object.defineProperty(W.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),W.prototype.getTextEditChange=function(ge){if(ue.is(ge)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:ge.uri,version:ge.version},re=this._textEditChanges[ve.uri];if(!re){var O=[],Re={textDocument:ve,edits:O};this._workspaceEdit.documentChanges.push(Re),re=new ie(O,this._changeAnnotations),this._textEditChanges[ve.uri]=re}return re}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var re=this._textEditChanges[ge];if(!re){var O=[];this._workspaceEdit.changes[ge]=O,re=new ie(O),this._textEditChanges[ge]=re}return re}},W.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new V,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},W.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},W.prototype.createFile=function(ge,ve,re){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var O;N.is(ve)||M.is(ve)?O=ve:re=ve;var Re,ze;if(O===void 0?Re=K.create(ge,re):(ze=M.is(O)?O:this._changeAnnotations.manage(O),Re=K.create(ge,re,ze)),this._workspaceEdit.documentChanges.push(Re),ze!==void 0)return ze},W.prototype.renameFile=function(ge,ve,re,O){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Re;N.is(re)||M.is(re)?Re=re:O=re;var ze,Gt;if(Re===void 0?ze=G.create(ge,ve,O):(Gt=M.is(Re)?Re:this._changeAnnotations.manage(Re),ze=G.create(ge,ve,O,Gt)),this._workspaceEdit.documentChanges.push(ze),Gt!==void 0)return Gt},W.prototype.deleteFile=function(ge,ve,re){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var O;N.is(ve)||M.is(ve)?O=ve:re=ve;var Re,ze;if(O===void 0?Re=q.create(ge,re):(ze=M.is(O)?O:this._changeAnnotations.manage(O),Re=q.create(ge,re,ze)),this._workspaceEdit.documentChanges.push(Re),ze!==void 0)return ze},W}();e.WorkspaceChange=H;var z;(function(W){function ge(re){return{uri:re}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&_e.string(O.uri)}s(ve,"is"),W.is=ve})(z||(e.TextDocumentIdentifier=z={}));var X;(function(W){function ge(re,O){return{uri:re,version:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&_e.string(O.uri)&&_e.integer(O.version)}s(ve,"is"),W.is=ve})(X||(e.VersionedTextDocumentIdentifier=X={}));var ue;(function(W){function ge(re,O){return{uri:re,version:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&_e.string(O.uri)&&(O.version===null||_e.integer(O.version))}s(ve,"is"),W.is=ve})(ue||(e.OptionalVersionedTextDocumentIdentifier=ue={}));var ne;(function(W){function ge(re,O,Re,ze){return{uri:re,languageId:O,version:Re,text:ze}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&_e.string(O.uri)&&_e.string(O.languageId)&&_e.integer(O.version)&&_e.string(O.text)}s(ve,"is"),W.is=ve})(ne||(e.TextDocumentItem=ne={}));var me;(function(W){W.PlainText="plaintext",W.Markdown="markdown";function ge(ve){var re=ve;return re===W.PlainText||re===W.Markdown}s(ge,"is"),W.is=ge})(me||(e.MarkupKind=me={}));var he;(function(W){function ge(ve){var re=ve;return _e.objectLiteral(ve)&&me.is(re.kind)&&_e.string(re.value)}s(ge,"is"),W.is=ge})(he||(e.MarkupContent=he={}));var Qe;(function(W){W.Text=1,W.Method=2,W.Function=3,W.Constructor=4,W.Field=5,W.Variable=6,W.Class=7,W.Interface=8,W.Module=9,W.Property=10,W.Unit=11,W.Value=12,W.Enum=13,W.Keyword=14,W.Snippet=15,W.Color=16,W.File=17,W.Reference=18,W.Folder=19,W.EnumMember=20,W.Constant=21,W.Struct=22,W.Event=23,W.Operator=24,W.TypeParameter=25})(Qe||(e.CompletionItemKind=Qe={}));var ke;(function(W){W.PlainText=1,W.Snippet=2})(ke||(e.InsertTextFormat=ke={}));var tt;(function(W){W.Deprecated=1})(tt||(e.CompletionItemTag=tt={}));var Fe;(function(W){function ge(re,O,Re){return{newText:re,insert:O,replace:Re}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return O&&_e.string(O.newText)&&c.is(O.insert)&&c.is(O.replace)}s(ve,"is"),W.is=ve})(Fe||(e.InsertReplaceEdit=Fe={}));var ht;(function(W){W.asIs=1,W.adjustIndentation=2})(ht||(e.InsertTextMode=ht={}));var St;(function(W){function ge(ve){var re=ve;return re&&(_e.string(re.detail)||re.detail===void 0)&&(_e.string(re.description)||re.description===void 0)}s(ge,"is"),W.is=ge})(St||(e.CompletionItemLabelDetails=St={}));var vt;(function(W){function ge(ve){return{label:ve}}s(ge,"create"),W.create=ge})(vt||(e.CompletionItem=vt={}));var It;(function(W){function ge(ve,re){return{items:ve||[],isIncomplete:!!re}}s(ge,"create"),W.create=ge})(It||(e.CompletionList=It={}));var de;(function(W){function ge(re){return re.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(ge,"fromPlainText"),W.fromPlainText=ge;function ve(re){var O=re;return _e.string(O)||_e.objectLiteral(O)&&_e.string(O.language)&&_e.string(O.value)}s(ve,"is"),W.is=ve})(de||(e.MarkedString=de={}));var Ue;(function(W){function ge(ve){var re=ve;return!!re&&_e.objectLiteral(re)&&(he.is(re.contents)||de.is(re.contents)||_e.typedArray(re.contents,de.is))&&(ve.range===void 0||c.is(ve.range))}s(ge,"is"),W.is=ge})(Ue||(e.Hover=Ue={}));var ye;(function(W){function ge(ve,re){return re?{label:ve,documentation:re}:{label:ve}}s(ge,"create"),W.create=ge})(ye||(e.ParameterInformation=ye={}));var nt;(function(W){function ge(ve,re){for(var O=[],Re=2;Re<arguments.length;Re++)O[Re-2]=arguments[Re];var ze={label:ve};return _e.defined(re)&&(ze.documentation=re),_e.defined(O)?ze.parameters=O:ze.parameters=[],ze}s(ge,"create"),W.create=ge})(nt||(e.SignatureInformation=nt={}));var te;(function(W){W.Text=1,W.Read=2,W.Write=3})(te||(e.DocumentHighlightKind=te={}));var oe;(function(W){function ge(ve,re){var O={range:ve};return _e.number(re)&&(O.kind=re),O}s(ge,"create"),W.create=ge})(oe||(e.DocumentHighlight=oe={}));var We;(function(W){W.File=1,W.Module=2,W.Namespace=3,W.Package=4,W.Class=5,W.Method=6,W.Property=7,W.Field=8,W.Constructor=9,W.Enum=10,W.Interface=11,W.Function=12,W.Variable=13,W.Constant=14,W.String=15,W.Number=16,W.Boolean=17,W.Array=18,W.Object=19,W.Key=20,W.Null=21,W.EnumMember=22,W.Struct=23,W.Event=24,W.Operator=25,W.TypeParameter=26})(We||(e.SymbolKind=We={}));var De;(function(W){W.Deprecated=1})(De||(e.SymbolTag=De={}));var xe;(function(W){function ge(ve,re,O,Re,ze){var Gt={name:ve,kind:re,location:{uri:Re,range:O}};return ze&&(Gt.containerName=ze),Gt}s(ge,"create"),W.create=ge})(xe||(e.SymbolInformation=xe={}));var Ye;(function(W){function ge(ve,re,O,Re){return Re!==void 0?{name:ve,kind:re,location:{uri:O,range:Re}}:{name:ve,kind:re,location:{uri:O}}}s(ge,"create"),W.create=ge})(Ye||(e.WorkspaceSymbol=Ye={}));var st;(function(W){function ge(re,O,Re,ze,Gt,Pr){var gr={name:re,detail:O,kind:Re,range:ze,selectionRange:Gt};return Pr!==void 0&&(gr.children=Pr),gr}s(ge,"create"),W.create=ge;function ve(re){var O=re;return O&&_e.string(O.name)&&_e.number(O.kind)&&c.is(O.range)&&c.is(O.selectionRange)&&(O.detail===void 0||_e.string(O.detail))&&(O.deprecated===void 0||_e.boolean(O.deprecated))&&(O.children===void 0||Array.isArray(O.children))&&(O.tags===void 0||Array.isArray(O.tags))}s(ve,"is"),W.is=ve})(st||(e.DocumentSymbol=st={}));var yt;(function(W){W.Empty="",W.QuickFix="quickfix",W.Refactor="refactor",W.RefactorExtract="refactor.extract",W.RefactorInline="refactor.inline",W.RefactorRewrite="refactor.rewrite",W.Source="source",W.SourceOrganizeImports="source.organizeImports",W.SourceFixAll="source.fixAll"})(yt||(e.CodeActionKind=yt={}));var qt;(function(W){W.Invoked=1,W.Automatic=2})(qt||(e.CodeActionTriggerKind=qt={}));var dr;(function(W){function ge(re,O,Re){var ze={diagnostics:re};return O!=null&&(ze.only=O),Re!=null&&(ze.triggerKind=Re),ze}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&_e.typedArray(O.diagnostics,_.is)&&(O.only===void 0||_e.typedArray(O.only,_e.string))&&(O.triggerKind===void 0||O.triggerKind===qt.Invoked||O.triggerKind===qt.Automatic)}s(ve,"is"),W.is=ve})(dr||(e.CodeActionContext=dr={}));var Ft;(function(W){function ge(re,O,Re){var ze={title:re},Gt=!0;return typeof O=="string"?(Gt=!1,ze.kind=O):k.is(O)?ze.command=O:ze.edit=O,Gt&&Re!==void 0&&(ze.kind=Re),ze}s(ge,"create"),W.create=ge;function ve(re){var O=re;return O&&_e.string(O.title)&&(O.diagnostics===void 0||_e.typedArray(O.diagnostics,_.is))&&(O.kind===void 0||_e.string(O.kind))&&(O.edit!==void 0||O.command!==void 0)&&(O.command===void 0||k.is(O.command))&&(O.isPreferred===void 0||_e.boolean(O.isPreferred))&&(O.edit===void 0||le.is(O.edit))}s(ve,"is"),W.is=ve})(Ft||(e.CodeAction=Ft={}));var zr;(function(W){function ge(re,O){var Re={range:re};return _e.defined(O)&&(Re.data=O),Re}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&c.is(O.range)&&(_e.undefined(O.command)||k.is(O.command))}s(ve,"is"),W.is=ve})(zr||(e.CodeLens=zr={}));var Zr;(function(W){function ge(re,O){return{tabSize:re,insertSpaces:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&_e.uinteger(O.tabSize)&&_e.boolean(O.insertSpaces)}s(ve,"is"),W.is=ve})(Zr||(e.FormattingOptions=Zr={}));var Cn;(function(W){function ge(re,O,Re){return{range:re,target:O,data:Re}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&c.is(O.range)&&(_e.undefined(O.target)||_e.string(O.target))}s(ve,"is"),W.is=ve})(Cn||(e.DocumentLink=Cn={}));var Ae;(function(W){function ge(re,O){return{range:re,parent:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&c.is(O.range)&&(O.parent===void 0||W.is(O.parent))}s(ve,"is"),W.is=ve})(Ae||(e.SelectionRange=Ae={}));var Ge;(function(W){W.namespace="namespace",W.type="type",W.class="class",W.enum="enum",W.interface="interface",W.struct="struct",W.typeParameter="typeParameter",W.parameter="parameter",W.variable="variable",W.property="property",W.enumMember="enumMember",W.event="event",W.function="function",W.method="method",W.macro="macro",W.keyword="keyword",W.modifier="modifier",W.comment="comment",W.string="string",W.number="number",W.regexp="regexp",W.operator="operator",W.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ft;(function(W){W.declaration="declaration",W.definition="definition",W.readonly="readonly",W.static="static",W.deprecated="deprecated",W.abstract="abstract",W.async="async",W.modification="modification",W.documentation="documentation",W.defaultLibrary="defaultLibrary"})(ft||(e.SemanticTokenModifiers=ft={}));var Et;(function(W){function ge(ve){var re=ve;return _e.objectLiteral(re)&&(re.resultId===void 0||typeof re.resultId=="string")&&Array.isArray(re.data)&&(re.data.length===0||typeof re.data[0]=="number")}s(ge,"is"),W.is=ge})(Et||(e.SemanticTokens=Et={}));var Zt;(function(W){function ge(re,O){return{range:re,text:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return O!=null&&c.is(O.range)&&_e.string(O.text)}s(ve,"is"),W.is=ve})(Zt||(e.InlineValueText=Zt={}));var Vt;(function(W){function ge(re,O,Re){return{range:re,variableName:O,caseSensitiveLookup:Re}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return O!=null&&c.is(O.range)&&_e.boolean(O.caseSensitiveLookup)&&(_e.string(O.variableName)||O.variableName===void 0)}s(ve,"is"),W.is=ve})(Vt||(e.InlineValueVariableLookup=Vt={}));var Er;(function(W){function ge(re,O){return{range:re,expression:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return O!=null&&c.is(O.range)&&(_e.string(O.expression)||O.expression===void 0)}s(ve,"is"),W.is=ve})(Er||(e.InlineValueEvaluatableExpression=Er={}));var Ir;(function(W){function ge(re,O){return{frameId:re,stoppedLocation:O}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.defined(O)&&c.is(re.stoppedLocation)}s(ve,"is"),W.is=ve})(Ir||(e.InlineValueContext=Ir={}));var zt;(function(W){W.Type=1,W.Parameter=2;function ge(ve){return ve===1||ve===2}s(ge,"is"),W.is=ge})(zt||(e.InlayHintKind=zt={}));var ir;(function(W){function ge(re){return{value:re}}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&(O.tooltip===void 0||_e.string(O.tooltip)||he.is(O.tooltip))&&(O.location===void 0||l.is(O.location))&&(O.command===void 0||k.is(O.command))}s(ve,"is"),W.is=ve})(ir||(e.InlayHintLabelPart=ir={}));var Xt;(function(W){function ge(re,O,Re){var ze={position:re,label:O};return Re!==void 0&&(ze.kind=Re),ze}s(ge,"create"),W.create=ge;function ve(re){var O=re;return _e.objectLiteral(O)&&a.is(O.position)&&(_e.string(O.label)||_e.typedArray(O.label,ir.is))&&(O.kind===void 0||zt.is(O.kind))&&O.textEdits===void 0||_e.typedArray(O.textEdits,P.is)&&(O.tooltip===void 0||_e.string(O.tooltip)||he.is(O.tooltip))&&(O.paddingLeft===void 0||_e.boolean(O.paddingLeft))&&(O.paddingRight===void 0||_e.boolean(O.paddingRight))}s(ve,"is"),W.is=ve})(Xt||(e.InlayHint=Xt={}));var Sr;(function(W){function ge(ve){return{kind:"snippet",value:ve}}s(ge,"createSnippet"),W.createSnippet=ge})(Sr||(e.StringValue=Sr={}));var Qr;(function(W){function ge(ve,re,O,Re){return{insertText:ve,filterText:re,range:O,command:Re}}s(ge,"create"),W.create=ge})(Qr||(e.InlineCompletionItem=Qr={}));var en;(function(W){function ge(ve){return{items:ve}}s(ge,"create"),W.create=ge})(en||(e.InlineCompletionList=en={}));var $n;(function(W){W.Invoked=0,W.Automatic=1})($n||(e.InlineCompletionTriggerKind=$n={}));var si;(function(W){function ge(ve,re){return{range:ve,text:re}}s(ge,"create"),W.create=ge})(si||(e.SelectedCompletionInfo=si={}));var Hn;(function(W){function ge(ve,re){return{triggerKind:ve,selectedCompletionInfo:re}}s(ge,"create"),W.create=ge})(Hn||(e.InlineCompletionContext=Hn={}));var ti;(function(W){function ge(ve){var re=ve;return _e.objectLiteral(re)&&n.is(re.uri)&&_e.string(re.name)}s(ge,"is"),W.is=ge})(ti||(e.WorkspaceFolder=ti={})),e.EOL=[`
`,`\r
`,"\r"];var cn;(function(W){function ge(Re,ze,Gt,Pr){return new ri(Re,ze,Gt,Pr)}s(ge,"create"),W.create=ge;function ve(Re){var ze=Re;return!!(_e.defined(ze)&&_e.string(ze.uri)&&(_e.undefined(ze.languageId)||_e.string(ze.languageId))&&_e.uinteger(ze.lineCount)&&_e.func(ze.getText)&&_e.func(ze.positionAt)&&_e.func(ze.offsetAt))}s(ve,"is"),W.is=ve;function re(Re,ze){for(var Gt=Re.getText(),Pr=O(ze,function(Wn,Aa){var ch=Wn.range.start.line-Aa.range.start.line;return ch===0?Wn.range.start.character-Aa.range.start.character:ch}),gr=Gt.length,An=Pr.length-1;An>=0;An--){var En=Pr[An],Tr=Re.offsetAt(En.range.start),$t=Re.offsetAt(En.range.end);if($t<=gr)Gt=Gt.substring(0,Tr)+En.newText+Gt.substring($t,Gt.length);else throw new Error("Overlapping edit");gr=Tr}return Gt}s(re,"applyEdits"),W.applyEdits=re;function O(Re,ze){if(Re.length<=1)return Re;var Gt=Re.length/2|0,Pr=Re.slice(0,Gt),gr=Re.slice(Gt);O(Pr,ze),O(gr,ze);for(var An=0,En=0,Tr=0;An<Pr.length&&En<gr.length;){var $t=ze(Pr[An],gr[En]);$t<=0?Re[Tr++]=Pr[An++]:Re[Tr++]=gr[En++]}for(;An<Pr.length;)Re[Tr++]=Pr[An++];for(;En<gr.length;)Re[Tr++]=gr[En++];return Re}s(O,"mergeSort")})(cn||(e.TextDocument=cn={}));var ri=function(){function W(ge,ve,re,O){this._uri=ge,this._languageId=ve,this._version=re,this._content=O,this._lineOffsets=void 0}return s(W,"FullTextDocument"),Object.defineProperty(W.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),W.prototype.getText=function(ge){if(ge){var ve=this.offsetAt(ge.start),re=this.offsetAt(ge.end);return this._content.substring(ve,re)}return this._content},W.prototype.update=function(ge,ve){this._content=ge.text,this._version=ve,this._lineOffsets=void 0},W.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ge=[],ve=this._content,re=!0,O=0;O<ve.length;O++){re&&(ge.push(O),re=!1);var Re=ve.charAt(O);re=Re==="\r"||Re===`
`,Re==="\r"&&O+1<ve.length&&ve.charAt(O+1)===`
`&&O++}re&&ve.length>0&&ge.push(ve.length),this._lineOffsets=ge}return this._lineOffsets},W.prototype.positionAt=function(ge){ge=Math.max(Math.min(ge,this._content.length),0);var ve=this.getLineOffsets(),re=0,O=ve.length;if(O===0)return a.create(0,ge);for(;re<O;){var Re=Math.floor((re+O)/2);ve[Re]>ge?O=Re:re=Re+1}var ze=re-1;return a.create(ze,ge-ve[ze])},W.prototype.offsetAt=function(ge){var ve=this.getLineOffsets();if(ge.line>=ve.length)return this._content.length;if(ge.line<0)return 0;var re=ve[ge.line],O=ge.line+1<ve.length?ve[ge.line+1]:this._content.length;return Math.max(Math.min(re+ge.character,O),re)},Object.defineProperty(W.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),W}(),_e;(function(W){var ge=Object.prototype.toString;function ve($t){return typeof $t<"u"}s(ve,"defined"),W.defined=ve;function re($t){return typeof $t>"u"}s(re,"undefined"),W.undefined=re;function O($t){return $t===!0||$t===!1}s(O,"boolean"),W.boolean=O;function Re($t){return ge.call($t)==="[object String]"}s(Re,"string"),W.string=Re;function ze($t){return ge.call($t)==="[object Number]"}s(ze,"number"),W.number=ze;function Gt($t,Wn,Aa){return ge.call($t)==="[object Number]"&&Wn<=$t&&$t<=Aa}s(Gt,"numberRange"),W.numberRange=Gt;function Pr($t){return ge.call($t)==="[object Number]"&&-2147483648<=$t&&$t<=2147483647}s(Pr,"integer"),W.integer=Pr;function gr($t){return ge.call($t)==="[object Number]"&&0<=$t&&$t<=2147483647}s(gr,"uinteger"),W.uinteger=gr;function An($t){return ge.call($t)==="[object Function]"}s(An,"func"),W.func=An;function En($t){return $t!==null&&typeof $t=="object"}s(En,"objectLiteral"),W.objectLiteral=En;function Tr($t,Wn){return Array.isArray($t)&&$t.every(Wn)}s(Tr,"typedArray"),W.typedArray=Tr})(_e||(_e={}))})});var ca=Q(pf=>{"use strict";d();Object.defineProperty(pf,"__esModule",{value:!0});pf.ProtocolNotificationType=pf.ProtocolNotificationType0=pf.ProtocolRequestType=pf.ProtocolRequestType0=pf.RegistrationType=pf.MessageDirection=void 0;var p4=A_(),I4e;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(I4e||(pf.MessageDirection=I4e={}));var Ple=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};pf.RegistrationType=Ple;var Ble=class extends p4.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};pf.ProtocolRequestType0=Ble;var Dle=class extends p4.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,p4.ParameterStructures.byName)}};pf.ProtocolRequestType=Dle;var Nle=class extends p4.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};pf.ProtocolNotificationType0=Nle;var Lle=class extends p4.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,p4.ParameterStructures.byName)}};pf.ProtocolNotificationType=Lle});var lW=Q(Ic=>{"use strict";d();Object.defineProperty(Ic,"__esModule",{value:!0});Ic.objectLiteral=Ic.typedArray=Ic.stringArray=Ic.array=Ic.func=Ic.error=Ic.number=Ic.string=Ic.boolean=void 0;function Mxt(t){return t===!0||t===!1}s(Mxt,"boolean");Ic.boolean=Mxt;function T4e(t){return typeof t=="string"||t instanceof String}s(T4e,"string");Ic.string=T4e;function Fxt(t){return typeof t=="number"||t instanceof Number}s(Fxt,"number");Ic.number=Fxt;function Oxt(t){return t instanceof Error}s(Oxt,"error");Ic.error=Oxt;function Qxt(t){return typeof t=="function"}s(Qxt,"func");Ic.func=Qxt;function w4e(t){return Array.isArray(t)}s(w4e,"array");Ic.array=w4e;function Uxt(t){return w4e(t)&&t.every(e=>T4e(e))}s(Uxt,"stringArray");Ic.stringArray=Uxt;function qxt(t,e){return Array.isArray(t)&&t.every(e)}s(qxt,"typedArray");Ic.typedArray=qxt;function Hxt(t){return t!==null&&typeof t=="object"}s(Hxt,"objectLiteral");Ic.objectLiteral=Hxt});var R4e=Q(uW=>{"use strict";d();Object.defineProperty(uW,"__esModule",{value:!0});uW.ImplementationRequest=void 0;var _4e=ca(),S4e;(function(t){t.method="textDocument/implementation",t.messageDirection=_4e.MessageDirection.clientToServer,t.type=new _4e.ProtocolRequestType(t.method)})(S4e||(uW.ImplementationRequest=S4e={}))});var B4e=Q(dW=>{"use strict";d();Object.defineProperty(dW,"__esModule",{value:!0});dW.TypeDefinitionRequest=void 0;var k4e=ca(),P4e;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=k4e.MessageDirection.clientToServer,t.type=new k4e.ProtocolRequestType(t.method)})(P4e||(dW.TypeDefinitionRequest=P4e={}))});var L4e=Q(m4=>{"use strict";d();Object.defineProperty(m4,"__esModule",{value:!0});m4.DidChangeWorkspaceFoldersNotification=m4.WorkspaceFoldersRequest=void 0;var fW=ca(),D4e;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=fW.MessageDirection.serverToClient,t.type=new fW.ProtocolRequestType0(t.method)})(D4e||(m4.WorkspaceFoldersRequest=D4e={}));var N4e;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=fW.MessageDirection.clientToServer,t.type=new fW.ProtocolNotificationType(t.method)})(N4e||(m4.DidChangeWorkspaceFoldersNotification=N4e={}))});var O4e=Q(pW=>{"use strict";d();Object.defineProperty(pW,"__esModule",{value:!0});pW.ConfigurationRequest=void 0;var M4e=ca(),F4e;(function(t){t.method="workspace/configuration",t.messageDirection=M4e.MessageDirection.serverToClient,t.type=new M4e.ProtocolRequestType(t.method)})(F4e||(pW.ConfigurationRequest=F4e={}))});var q4e=Q(h4=>{"use strict";d();Object.defineProperty(h4,"__esModule",{value:!0});h4.ColorPresentationRequest=h4.DocumentColorRequest=void 0;var mW=ca(),Q4e;(function(t){t.method="textDocument/documentColor",t.messageDirection=mW.MessageDirection.clientToServer,t.type=new mW.ProtocolRequestType(t.method)})(Q4e||(h4.DocumentColorRequest=Q4e={}));var U4e;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=mW.MessageDirection.clientToServer,t.type=new mW.ProtocolRequestType(t.method)})(U4e||(h4.ColorPresentationRequest=U4e={}))});var G4e=Q(g4=>{"use strict";d();Object.defineProperty(g4,"__esModule",{value:!0});g4.FoldingRangeRefreshRequest=g4.FoldingRangeRequest=void 0;var hW=ca(),H4e;(function(t){t.method="textDocument/foldingRange",t.messageDirection=hW.MessageDirection.clientToServer,t.type=new hW.ProtocolRequestType(t.method)})(H4e||(g4.FoldingRangeRequest=H4e={}));var W4e;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=hW.MessageDirection.serverToClient,t.type=new hW.ProtocolRequestType0(t.method)})(W4e||(g4.FoldingRangeRefreshRequest=W4e={}))});var $4e=Q(gW=>{"use strict";d();Object.defineProperty(gW,"__esModule",{value:!0});gW.DeclarationRequest=void 0;var j4e=ca(),V4e;(function(t){t.method="textDocument/declaration",t.messageDirection=j4e.MessageDirection.clientToServer,t.type=new j4e.ProtocolRequestType(t.method)})(V4e||(gW.DeclarationRequest=V4e={}))});var K4e=Q(AW=>{"use strict";d();Object.defineProperty(AW,"__esModule",{value:!0});AW.SelectionRangeRequest=void 0;var z4e=ca(),Y4e;(function(t){t.method="textDocument/selectionRange",t.messageDirection=z4e.MessageDirection.clientToServer,t.type=new z4e.ProtocolRequestType(t.method)})(Y4e||(AW.SelectionRangeRequest=Y4e={}))});var ePe=Q(ob=>{"use strict";d();Object.defineProperty(ob,"__esModule",{value:!0});ob.WorkDoneProgressCancelNotification=ob.WorkDoneProgressCreateRequest=ob.WorkDoneProgress=void 0;var Wxt=A_(),yW=ca(),J4e;(function(t){t.type=new Wxt.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(J4e||(ob.WorkDoneProgress=J4e={}));var X4e;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=yW.MessageDirection.serverToClient,t.type=new yW.ProtocolRequestType(t.method)})(X4e||(ob.WorkDoneProgressCreateRequest=X4e={}));var Z4e;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=yW.MessageDirection.clientToServer,t.type=new yW.ProtocolNotificationType(t.method)})(Z4e||(ob.WorkDoneProgressCancelNotification=Z4e={}))});var iPe=Q(sb=>{"use strict";d();Object.defineProperty(sb,"__esModule",{value:!0});sb.CallHierarchyOutgoingCallsRequest=sb.CallHierarchyIncomingCallsRequest=sb.CallHierarchyPrepareRequest=void 0;var A4=ca(),tPe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=A4.MessageDirection.clientToServer,t.type=new A4.ProtocolRequestType(t.method)})(tPe||(sb.CallHierarchyPrepareRequest=tPe={}));var rPe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=A4.MessageDirection.clientToServer,t.type=new A4.ProtocolRequestType(t.method)})(rPe||(sb.CallHierarchyIncomingCallsRequest=rPe={}));var nPe;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=A4.MessageDirection.clientToServer,t.type=new A4.ProtocolRequestType(t.method)})(nPe||(sb.CallHierarchyOutgoingCallsRequest=nPe={}))});var uPe=Q(mf=>{"use strict";d();Object.defineProperty(mf,"__esModule",{value:!0});mf.SemanticTokensRefreshRequest=mf.SemanticTokensRangeRequest=mf.SemanticTokensDeltaRequest=mf.SemanticTokensRequest=mf.SemanticTokensRegistrationType=mf.TokenFormat=void 0;var k1=ca(),oPe;(function(t){t.Relative="relative"})(oPe||(mf.TokenFormat=oPe={}));var N6;(function(t){t.method="textDocument/semanticTokens",t.type=new k1.RegistrationType(t.method)})(N6||(mf.SemanticTokensRegistrationType=N6={}));var sPe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=k1.MessageDirection.clientToServer,t.type=new k1.ProtocolRequestType(t.method),t.registrationMethod=N6.method})(sPe||(mf.SemanticTokensRequest=sPe={}));var aPe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=k1.MessageDirection.clientToServer,t.type=new k1.ProtocolRequestType(t.method),t.registrationMethod=N6.method})(aPe||(mf.SemanticTokensDeltaRequest=aPe={}));var cPe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=k1.MessageDirection.clientToServer,t.type=new k1.ProtocolRequestType(t.method),t.registrationMethod=N6.method})(cPe||(mf.SemanticTokensRangeRequest=cPe={}));var lPe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=k1.MessageDirection.serverToClient,t.type=new k1.ProtocolRequestType0(t.method)})(lPe||(mf.SemanticTokensRefreshRequest=lPe={}))});var pPe=Q(CW=>{"use strict";d();Object.defineProperty(CW,"__esModule",{value:!0});CW.ShowDocumentRequest=void 0;var dPe=ca(),fPe;(function(t){t.method="window/showDocument",t.messageDirection=dPe.MessageDirection.serverToClient,t.type=new dPe.ProtocolRequestType(t.method)})(fPe||(CW.ShowDocumentRequest=fPe={}))});var gPe=Q(EW=>{"use strict";d();Object.defineProperty(EW,"__esModule",{value:!0});EW.LinkedEditingRangeRequest=void 0;var mPe=ca(),hPe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=mPe.MessageDirection.clientToServer,t.type=new mPe.ProtocolRequestType(t.method)})(hPe||(EW.LinkedEditingRangeRequest=hPe={}))});var IPe=Q(qu=>{"use strict";d();Object.defineProperty(qu,"__esModule",{value:!0});qu.WillDeleteFilesRequest=qu.DidDeleteFilesNotification=qu.DidRenameFilesNotification=qu.WillRenameFilesRequest=qu.DidCreateFilesNotification=qu.WillCreateFilesRequest=qu.FileOperationPatternKind=void 0;var $p=ca(),APe;(function(t){t.file="file",t.folder="folder"})(APe||(qu.FileOperationPatternKind=APe={}));var yPe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=$p.MessageDirection.clientToServer,t.type=new $p.ProtocolRequestType(t.method)})(yPe||(qu.WillCreateFilesRequest=yPe={}));var CPe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=$p.MessageDirection.clientToServer,t.type=new $p.ProtocolNotificationType(t.method)})(CPe||(qu.DidCreateFilesNotification=CPe={}));var EPe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=$p.MessageDirection.clientToServer,t.type=new $p.ProtocolRequestType(t.method)})(EPe||(qu.WillRenameFilesRequest=EPe={}));var vPe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=$p.MessageDirection.clientToServer,t.type=new $p.ProtocolNotificationType(t.method)})(vPe||(qu.DidRenameFilesNotification=vPe={}));var xPe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=$p.MessageDirection.clientToServer,t.type=new $p.ProtocolNotificationType(t.method)})(xPe||(qu.DidDeleteFilesNotification=xPe={}));var bPe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=$p.MessageDirection.clientToServer,t.type=new $p.ProtocolRequestType(t.method)})(bPe||(qu.WillDeleteFilesRequest=bPe={}))});var RPe=Q(ab=>{"use strict";d();Object.defineProperty(ab,"__esModule",{value:!0});ab.MonikerRequest=ab.MonikerKind=ab.UniquenessLevel=void 0;var TPe=ca(),wPe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(wPe||(ab.UniquenessLevel=wPe={}));var _Pe;(function(t){t.$import="import",t.$export="export",t.local="local"})(_Pe||(ab.MonikerKind=_Pe={}));var SPe;(function(t){t.method="textDocument/moniker",t.messageDirection=TPe.MessageDirection.clientToServer,t.type=new TPe.ProtocolRequestType(t.method)})(SPe||(ab.MonikerRequest=SPe={}))});var DPe=Q(cb=>{"use strict";d();Object.defineProperty(cb,"__esModule",{value:!0});cb.TypeHierarchySubtypesRequest=cb.TypeHierarchySupertypesRequest=cb.TypeHierarchyPrepareRequest=void 0;var y4=ca(),kPe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=y4.MessageDirection.clientToServer,t.type=new y4.ProtocolRequestType(t.method)})(kPe||(cb.TypeHierarchyPrepareRequest=kPe={}));var PPe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=y4.MessageDirection.clientToServer,t.type=new y4.ProtocolRequestType(t.method)})(PPe||(cb.TypeHierarchySupertypesRequest=PPe={}));var BPe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=y4.MessageDirection.clientToServer,t.type=new y4.ProtocolRequestType(t.method)})(BPe||(cb.TypeHierarchySubtypesRequest=BPe={}))});var MPe=Q(C4=>{"use strict";d();Object.defineProperty(C4,"__esModule",{value:!0});C4.InlineValueRefreshRequest=C4.InlineValueRequest=void 0;var vW=ca(),NPe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=vW.MessageDirection.clientToServer,t.type=new vW.ProtocolRequestType(t.method)})(NPe||(C4.InlineValueRequest=NPe={}));var LPe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=vW.MessageDirection.serverToClient,t.type=new vW.ProtocolRequestType0(t.method)})(LPe||(C4.InlineValueRefreshRequest=LPe={}))});var UPe=Q(lb=>{"use strict";d();Object.defineProperty(lb,"__esModule",{value:!0});lb.InlayHintRefreshRequest=lb.InlayHintResolveRequest=lb.InlayHintRequest=void 0;var E4=ca(),FPe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=E4.MessageDirection.clientToServer,t.type=new E4.ProtocolRequestType(t.method)})(FPe||(lb.InlayHintRequest=FPe={}));var OPe;(function(t){t.method="inlayHint/resolve",t.messageDirection=E4.MessageDirection.clientToServer,t.type=new E4.ProtocolRequestType(t.method)})(OPe||(lb.InlayHintResolveRequest=OPe={}));var QPe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=E4.MessageDirection.serverToClient,t.type=new E4.ProtocolRequestType0(t.method)})(QPe||(lb.InlayHintRefreshRequest=QPe={}))});var $Pe=Q(zp=>{"use strict";d();Object.defineProperty(zp,"__esModule",{value:!0});zp.DiagnosticRefreshRequest=zp.WorkspaceDiagnosticRequest=zp.DocumentDiagnosticRequest=zp.DocumentDiagnosticReportKind=zp.DiagnosticServerCancellationData=void 0;var VPe=A_(),Gxt=lW(),v4=ca(),qPe;(function(t){function e(r){let n=r;return n&&Gxt.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(qPe||(zp.DiagnosticServerCancellationData=qPe={}));var HPe;(function(t){t.Full="full",t.Unchanged="unchanged"})(HPe||(zp.DocumentDiagnosticReportKind=HPe={}));var WPe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=v4.MessageDirection.clientToServer,t.type=new v4.ProtocolRequestType(t.method),t.partialResult=new VPe.ProgressType})(WPe||(zp.DocumentDiagnosticRequest=WPe={}));var GPe;(function(t){t.method="workspace/diagnostic",t.messageDirection=v4.MessageDirection.clientToServer,t.type=new v4.ProtocolRequestType(t.method),t.partialResult=new VPe.ProgressType})(GPe||(zp.WorkspaceDiagnosticRequest=GPe={}));var jPe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=v4.MessageDirection.serverToClient,t.type=new v4.ProtocolRequestType0(t.method)})(jPe||(zp.DiagnosticRefreshRequest=jPe={}))});var e3e=Q(Na=>{"use strict";d();Object.defineProperty(Na,"__esModule",{value:!0});Na.DidCloseNotebookDocumentNotification=Na.DidSaveNotebookDocumentNotification=Na.DidChangeNotebookDocumentNotification=Na.NotebookCellArrayChange=Na.DidOpenNotebookDocumentNotification=Na.NotebookDocumentSyncRegistrationType=Na.NotebookDocument=Na.NotebookCell=Na.ExecutionSummary=Na.NotebookCellKind=void 0;var L6=cW(),jh=lW(),KA=ca(),Mle;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Mle||(Na.NotebookCellKind=Mle={}));var Fle;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return jh.objectLiteral(o)&&L6.uinteger.is(o.executionOrder)&&(o.success===void 0||jh.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(Fle||(Na.ExecutionSummary=Fle={}));var xW;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return jh.objectLiteral(a)&&Mle.is(a.kind)&&L6.DocumentUri.is(a.document)&&(a.metadata===void 0||jh.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let c=new Set;return o.document!==a.document&&c.add("document"),o.kind!==a.kind&&c.add("kind"),o.executionSummary!==a.executionSummary&&c.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&c.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Fle.equals(o.executionSummary,a.executionSummary)&&c.add("executionSummary"),c}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let c=Array.isArray(o),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(jh.objectLiteral(o)&&jh.objectLiteral(a)){let u=Object.keys(o),f=Object.keys(a);if(u.length!==f.length||(u.sort(),f.sort(),!i(u,f)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(xW||(Na.NotebookCell=xW={}));var zPe;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return jh.objectLiteral(i)&&jh.string(i.uri)&&L6.integer.is(i.version)&&jh.typedArray(i.cells,xW.is)}s(r,"is"),t.is=r})(zPe||(Na.NotebookDocument=zPe={}));var x4;(function(t){t.method="notebookDocument/sync",t.messageDirection=KA.MessageDirection.clientToServer,t.type=new KA.RegistrationType(t.method)})(x4||(Na.NotebookDocumentSyncRegistrationType=x4={}));var YPe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=KA.MessageDirection.clientToServer,t.type=new KA.ProtocolNotificationType(t.method),t.registrationMethod=x4.method})(YPe||(Na.DidOpenNotebookDocumentNotification=YPe={}));var KPe;(function(t){function e(n){let i=n;return jh.objectLiteral(i)&&L6.uinteger.is(i.start)&&L6.uinteger.is(i.deleteCount)&&(i.cells===void 0||jh.typedArray(i.cells,xW.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(KPe||(Na.NotebookCellArrayChange=KPe={}));var JPe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=KA.MessageDirection.clientToServer,t.type=new KA.ProtocolNotificationType(t.method),t.registrationMethod=x4.method})(JPe||(Na.DidChangeNotebookDocumentNotification=JPe={}));var XPe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=KA.MessageDirection.clientToServer,t.type=new KA.ProtocolNotificationType(t.method),t.registrationMethod=x4.method})(XPe||(Na.DidSaveNotebookDocumentNotification=XPe={}));var ZPe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=KA.MessageDirection.clientToServer,t.type=new KA.ProtocolNotificationType(t.method),t.registrationMethod=x4.method})(ZPe||(Na.DidCloseNotebookDocumentNotification=ZPe={}))});var n3e=Q(bW=>{"use strict";d();Object.defineProperty(bW,"__esModule",{value:!0});bW.InlineCompletionRequest=void 0;var t3e=ca(),r3e;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=t3e.MessageDirection.clientToServer,t.type=new t3e.ProtocolRequestType(t.method)})(r3e||(bW.InlineCompletionRequest=r3e={}))});var gBe=Q(Ee=>{"use strict";d();Object.defineProperty(Ee,"__esModule",{value:!0});Ee.WorkspaceSymbolRequest=Ee.CodeActionResolveRequest=Ee.CodeActionRequest=Ee.DocumentSymbolRequest=Ee.DocumentHighlightRequest=Ee.ReferencesRequest=Ee.DefinitionRequest=Ee.SignatureHelpRequest=Ee.SignatureHelpTriggerKind=Ee.HoverRequest=Ee.CompletionResolveRequest=Ee.CompletionRequest=Ee.CompletionTriggerKind=Ee.PublishDiagnosticsNotification=Ee.WatchKind=Ee.RelativePattern=Ee.FileChangeType=Ee.DidChangeWatchedFilesNotification=Ee.WillSaveTextDocumentWaitUntilRequest=Ee.WillSaveTextDocumentNotification=Ee.TextDocumentSaveReason=Ee.DidSaveTextDocumentNotification=Ee.DidCloseTextDocumentNotification=Ee.DidChangeTextDocumentNotification=Ee.TextDocumentContentChangeEvent=Ee.DidOpenTextDocumentNotification=Ee.TextDocumentSyncKind=Ee.TelemetryEventNotification=Ee.LogMessageNotification=Ee.ShowMessageRequest=Ee.ShowMessageNotification=Ee.MessageType=Ee.DidChangeConfigurationNotification=Ee.ExitNotification=Ee.ShutdownRequest=Ee.InitializedNotification=Ee.InitializeErrorCodes=Ee.InitializeRequest=Ee.WorkDoneProgressOptions=Ee.TextDocumentRegistrationOptions=Ee.StaticRegistrationOptions=Ee.PositionEncodingKind=Ee.FailureHandlingKind=Ee.ResourceOperationKind=Ee.UnregistrationRequest=Ee.RegistrationRequest=Ee.DocumentSelector=Ee.NotebookCellTextDocumentFilter=Ee.NotebookDocumentFilter=Ee.TextDocumentFilter=void 0;Ee.MonikerRequest=Ee.MonikerKind=Ee.UniquenessLevel=Ee.WillDeleteFilesRequest=Ee.DidDeleteFilesNotification=Ee.WillRenameFilesRequest=Ee.DidRenameFilesNotification=Ee.WillCreateFilesRequest=Ee.DidCreateFilesNotification=Ee.FileOperationPatternKind=Ee.LinkedEditingRangeRequest=Ee.ShowDocumentRequest=Ee.SemanticTokensRegistrationType=Ee.SemanticTokensRefreshRequest=Ee.SemanticTokensRangeRequest=Ee.SemanticTokensDeltaRequest=Ee.SemanticTokensRequest=Ee.TokenFormat=Ee.CallHierarchyPrepareRequest=Ee.CallHierarchyOutgoingCallsRequest=Ee.CallHierarchyIncomingCallsRequest=Ee.WorkDoneProgressCancelNotification=Ee.WorkDoneProgressCreateRequest=Ee.WorkDoneProgress=Ee.SelectionRangeRequest=Ee.DeclarationRequest=Ee.FoldingRangeRefreshRequest=Ee.FoldingRangeRequest=Ee.ColorPresentationRequest=Ee.DocumentColorRequest=Ee.ConfigurationRequest=Ee.DidChangeWorkspaceFoldersNotification=Ee.WorkspaceFoldersRequest=Ee.TypeDefinitionRequest=Ee.ImplementationRequest=Ee.ApplyWorkspaceEditRequest=Ee.ExecuteCommandRequest=Ee.PrepareRenameRequest=Ee.RenameRequest=Ee.PrepareSupportDefaultBehavior=Ee.DocumentOnTypeFormattingRequest=Ee.DocumentRangesFormattingRequest=Ee.DocumentRangeFormattingRequest=Ee.DocumentFormattingRequest=Ee.DocumentLinkResolveRequest=Ee.DocumentLinkRequest=Ee.CodeLensRefreshRequest=Ee.CodeLensResolveRequest=Ee.CodeLensRequest=Ee.WorkspaceSymbolResolveRequest=void 0;Ee.InlineCompletionRequest=Ee.DidCloseNotebookDocumentNotification=Ee.DidSaveNotebookDocumentNotification=Ee.DidChangeNotebookDocumentNotification=Ee.NotebookCellArrayChange=Ee.DidOpenNotebookDocumentNotification=Ee.NotebookDocumentSyncRegistrationType=Ee.NotebookDocument=Ee.NotebookCell=Ee.ExecutionSummary=Ee.NotebookCellKind=Ee.DiagnosticRefreshRequest=Ee.WorkspaceDiagnosticRequest=Ee.DocumentDiagnosticRequest=Ee.DocumentDiagnosticReportKind=Ee.DiagnosticServerCancellationData=Ee.InlayHintRefreshRequest=Ee.InlayHintResolveRequest=Ee.InlayHintRequest=Ee.InlineValueRefreshRequest=Ee.InlineValueRequest=Ee.TypeHierarchySupertypesRequest=Ee.TypeHierarchySubtypesRequest=Ee.TypeHierarchyPrepareRequest=void 0;var Qt=ca(),i3e=cW(),El=lW(),jxt=R4e();Object.defineProperty(Ee,"ImplementationRequest",{enumerable:!0,get:s(function(){return jxt.ImplementationRequest},"get")});var Vxt=B4e();Object.defineProperty(Ee,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return Vxt.TypeDefinitionRequest},"get")});var fBe=L4e();Object.defineProperty(Ee,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return fBe.WorkspaceFoldersRequest},"get")});Object.defineProperty(Ee,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return fBe.DidChangeWorkspaceFoldersNotification},"get")});var $xt=O4e();Object.defineProperty(Ee,"ConfigurationRequest",{enumerable:!0,get:s(function(){return $xt.ConfigurationRequest},"get")});var pBe=q4e();Object.defineProperty(Ee,"DocumentColorRequest",{enumerable:!0,get:s(function(){return pBe.DocumentColorRequest},"get")});Object.defineProperty(Ee,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return pBe.ColorPresentationRequest},"get")});var mBe=G4e();Object.defineProperty(Ee,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return mBe.FoldingRangeRequest},"get")});Object.defineProperty(Ee,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return mBe.FoldingRangeRefreshRequest},"get")});var zxt=$4e();Object.defineProperty(Ee,"DeclarationRequest",{enumerable:!0,get:s(function(){return zxt.DeclarationRequest},"get")});var Yxt=K4e();Object.defineProperty(Ee,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return Yxt.SelectionRangeRequest},"get")});var Hle=ePe();Object.defineProperty(Ee,"WorkDoneProgress",{enumerable:!0,get:s(function(){return Hle.WorkDoneProgress},"get")});Object.defineProperty(Ee,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return Hle.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(Ee,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return Hle.WorkDoneProgressCancelNotification},"get")});var Wle=iPe();Object.defineProperty(Ee,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return Wle.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(Ee,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return Wle.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(Ee,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Wle.CallHierarchyPrepareRequest},"get")});var b4=uPe();Object.defineProperty(Ee,"TokenFormat",{enumerable:!0,get:s(function(){return b4.TokenFormat},"get")});Object.defineProperty(Ee,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return b4.SemanticTokensRequest},"get")});Object.defineProperty(Ee,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return b4.SemanticTokensDeltaRequest},"get")});Object.defineProperty(Ee,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return b4.SemanticTokensRangeRequest},"get")});Object.defineProperty(Ee,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return b4.SemanticTokensRefreshRequest},"get")});Object.defineProperty(Ee,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return b4.SemanticTokensRegistrationType},"get")});var Kxt=pPe();Object.defineProperty(Ee,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return Kxt.ShowDocumentRequest},"get")});var Jxt=gPe();Object.defineProperty(Ee,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return Jxt.LinkedEditingRangeRequest},"get")});var y_=IPe();Object.defineProperty(Ee,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return y_.FileOperationPatternKind},"get")});Object.defineProperty(Ee,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return y_.DidCreateFilesNotification},"get")});Object.defineProperty(Ee,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return y_.WillCreateFilesRequest},"get")});Object.defineProperty(Ee,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return y_.DidRenameFilesNotification},"get")});Object.defineProperty(Ee,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return y_.WillRenameFilesRequest},"get")});Object.defineProperty(Ee,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return y_.DidDeleteFilesNotification},"get")});Object.defineProperty(Ee,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return y_.WillDeleteFilesRequest},"get")});var Gle=RPe();Object.defineProperty(Ee,"UniquenessLevel",{enumerable:!0,get:s(function(){return Gle.UniquenessLevel},"get")});Object.defineProperty(Ee,"MonikerKind",{enumerable:!0,get:s(function(){return Gle.MonikerKind},"get")});Object.defineProperty(Ee,"MonikerRequest",{enumerable:!0,get:s(function(){return Gle.MonikerRequest},"get")});var jle=DPe();Object.defineProperty(Ee,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return jle.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(Ee,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return jle.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(Ee,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return jle.TypeHierarchySupertypesRequest},"get")});var hBe=MPe();Object.defineProperty(Ee,"InlineValueRequest",{enumerable:!0,get:s(function(){return hBe.InlineValueRequest},"get")});Object.defineProperty(Ee,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return hBe.InlineValueRefreshRequest},"get")});var Vle=UPe();Object.defineProperty(Ee,"InlayHintRequest",{enumerable:!0,get:s(function(){return Vle.InlayHintRequest},"get")});Object.defineProperty(Ee,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return Vle.InlayHintResolveRequest},"get")});Object.defineProperty(Ee,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return Vle.InlayHintRefreshRequest},"get")});var M6=$Pe();Object.defineProperty(Ee,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return M6.DiagnosticServerCancellationData},"get")});Object.defineProperty(Ee,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return M6.DocumentDiagnosticReportKind},"get")});Object.defineProperty(Ee,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return M6.DocumentDiagnosticRequest},"get")});Object.defineProperty(Ee,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return M6.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(Ee,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return M6.DiagnosticRefreshRequest},"get")});var JA=e3e();Object.defineProperty(Ee,"NotebookCellKind",{enumerable:!0,get:s(function(){return JA.NotebookCellKind},"get")});Object.defineProperty(Ee,"ExecutionSummary",{enumerable:!0,get:s(function(){return JA.ExecutionSummary},"get")});Object.defineProperty(Ee,"NotebookCell",{enumerable:!0,get:s(function(){return JA.NotebookCell},"get")});Object.defineProperty(Ee,"NotebookDocument",{enumerable:!0,get:s(function(){return JA.NotebookDocument},"get")});Object.defineProperty(Ee,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return JA.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(Ee,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return JA.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(Ee,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return JA.NotebookCellArrayChange},"get")});Object.defineProperty(Ee,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return JA.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(Ee,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return JA.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(Ee,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return JA.DidCloseNotebookDocumentNotification},"get")});var Xxt=n3e();Object.defineProperty(Ee,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return Xxt.InlineCompletionRequest},"get")});var Ole;(function(t){function e(r){let n=r;return El.string(n)||El.string(n.language)||El.string(n.scheme)||El.string(n.pattern)}s(e,"is"),t.is=e})(Ole||(Ee.TextDocumentFilter=Ole={}));var Qle;(function(t){function e(r){let n=r;return El.objectLiteral(n)&&(El.string(n.notebookType)||El.string(n.scheme)||El.string(n.pattern))}s(e,"is"),t.is=e})(Qle||(Ee.NotebookDocumentFilter=Qle={}));var Ule;(function(t){function e(r){let n=r;return El.objectLiteral(n)&&(El.string(n.notebook)||Qle.is(n.notebook))&&(n.language===void 0||El.string(n.language))}s(e,"is"),t.is=e})(Ule||(Ee.NotebookCellTextDocumentFilter=Ule={}));var qle;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!El.string(n)&&!Ole.is(n)&&!Ule.is(n))return!1;return!0}s(e,"is"),t.is=e})(qle||(Ee.DocumentSelector=qle={}));var o3e;(function(t){t.method="client/registerCapability",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType(t.method)})(o3e||(Ee.RegistrationRequest=o3e={}));var s3e;(function(t){t.method="client/unregisterCapability",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType(t.method)})(s3e||(Ee.UnregistrationRequest=s3e={}));var a3e;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(a3e||(Ee.ResourceOperationKind=a3e={}));var c3e;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(c3e||(Ee.FailureHandlingKind=c3e={}));var l3e;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(l3e||(Ee.PositionEncodingKind=l3e={}));var u3e;(function(t){function e(r){let n=r;return n&&El.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(u3e||(Ee.StaticRegistrationOptions=u3e={}));var d3e;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||qle.is(n.documentSelector))}s(e,"is"),t.is=e})(d3e||(Ee.TextDocumentRegistrationOptions=d3e={}));var f3e;(function(t){function e(n){let i=n;return El.objectLiteral(i)&&(i.workDoneProgress===void 0||El.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&El.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(f3e||(Ee.WorkDoneProgressOptions=f3e={}));var p3e;(function(t){t.method="initialize",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(p3e||(Ee.InitializeRequest=p3e={}));var m3e;(function(t){t.unknownProtocolVersion=1})(m3e||(Ee.InitializeErrorCodes=m3e={}));var h3e;(function(t){t.method="initialized",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(h3e||(Ee.InitializedNotification=h3e={}));var g3e;(function(t){t.method="shutdown",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType0(t.method)})(g3e||(Ee.ShutdownRequest=g3e={}));var A3e;(function(t){t.method="exit",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType0(t.method)})(A3e||(Ee.ExitNotification=A3e={}));var y3e;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(y3e||(Ee.DidChangeConfigurationNotification=y3e={}));var C3e;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(C3e||(Ee.MessageType=C3e={}));var E3e;(function(t){t.method="window/showMessage",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(E3e||(Ee.ShowMessageNotification=E3e={}));var v3e;(function(t){t.method="window/showMessageRequest",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType(t.method)})(v3e||(Ee.ShowMessageRequest=v3e={}));var x3e;(function(t){t.method="window/logMessage",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(x3e||(Ee.LogMessageNotification=x3e={}));var b3e;(function(t){t.method="telemetry/event",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(b3e||(Ee.TelemetryEventNotification=b3e={}));var I3e;(function(t){t.None=0,t.Full=1,t.Incremental=2})(I3e||(Ee.TextDocumentSyncKind=I3e={}));var T3e;(function(t){t.method="textDocument/didOpen",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(T3e||(Ee.DidOpenTextDocumentNotification=T3e={}));var w3e;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(w3e||(Ee.TextDocumentContentChangeEvent=w3e={}));var _3e;(function(t){t.method="textDocument/didChange",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(_3e||(Ee.DidChangeTextDocumentNotification=_3e={}));var S3e;(function(t){t.method="textDocument/didClose",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(S3e||(Ee.DidCloseTextDocumentNotification=S3e={}));var R3e;(function(t){t.method="textDocument/didSave",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(R3e||(Ee.DidSaveTextDocumentNotification=R3e={}));var k3e;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(k3e||(Ee.TextDocumentSaveReason=k3e={}));var P3e;(function(t){t.method="textDocument/willSave",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(P3e||(Ee.WillSaveTextDocumentNotification=P3e={}));var B3e;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(B3e||(Ee.WillSaveTextDocumentWaitUntilRequest=B3e={}));var D3e;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(D3e||(Ee.DidChangeWatchedFilesNotification=D3e={}));var N3e;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(N3e||(Ee.FileChangeType=N3e={}));var L3e;(function(t){function e(r){let n=r;return El.objectLiteral(n)&&(i3e.URI.is(n.baseUri)||i3e.WorkspaceFolder.is(n.baseUri))&&El.string(n.pattern)}s(e,"is"),t.is=e})(L3e||(Ee.RelativePattern=L3e={}));var M3e;(function(t){t.Create=1,t.Change=2,t.Delete=4})(M3e||(Ee.WatchKind=M3e={}));var F3e;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(F3e||(Ee.PublishDiagnosticsNotification=F3e={}));var O3e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(O3e||(Ee.CompletionTriggerKind=O3e={}));var Q3e;(function(t){t.method="textDocument/completion",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(Q3e||(Ee.CompletionRequest=Q3e={}));var U3e;(function(t){t.method="completionItem/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(U3e||(Ee.CompletionResolveRequest=U3e={}));var q3e;(function(t){t.method="textDocument/hover",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(q3e||(Ee.HoverRequest=q3e={}));var H3e;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(H3e||(Ee.SignatureHelpTriggerKind=H3e={}));var W3e;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(W3e||(Ee.SignatureHelpRequest=W3e={}));var G3e;(function(t){t.method="textDocument/definition",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(G3e||(Ee.DefinitionRequest=G3e={}));var j3e;(function(t){t.method="textDocument/references",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(j3e||(Ee.ReferencesRequest=j3e={}));var V3e;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(V3e||(Ee.DocumentHighlightRequest=V3e={}));var $3e;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})($3e||(Ee.DocumentSymbolRequest=$3e={}));var z3e;(function(t){t.method="textDocument/codeAction",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(z3e||(Ee.CodeActionRequest=z3e={}));var Y3e;(function(t){t.method="codeAction/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(Y3e||(Ee.CodeActionResolveRequest=Y3e={}));var K3e;(function(t){t.method="workspace/symbol",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(K3e||(Ee.WorkspaceSymbolRequest=K3e={}));var J3e;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(J3e||(Ee.WorkspaceSymbolResolveRequest=J3e={}));var X3e;(function(t){t.method="textDocument/codeLens",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(X3e||(Ee.CodeLensRequest=X3e={}));var Z3e;(function(t){t.method="codeLens/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(Z3e||(Ee.CodeLensResolveRequest=Z3e={}));var eBe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType0(t.method)})(eBe||(Ee.CodeLensRefreshRequest=eBe={}));var tBe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(tBe||(Ee.DocumentLinkRequest=tBe={}));var rBe;(function(t){t.method="documentLink/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(rBe||(Ee.DocumentLinkResolveRequest=rBe={}));var nBe;(function(t){t.method="textDocument/formatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(nBe||(Ee.DocumentFormattingRequest=nBe={}));var iBe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(iBe||(Ee.DocumentRangeFormattingRequest=iBe={}));var oBe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(oBe||(Ee.DocumentRangesFormattingRequest=oBe={}));var sBe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(sBe||(Ee.DocumentOnTypeFormattingRequest=sBe={}));var aBe;(function(t){t.Identifier=1})(aBe||(Ee.PrepareSupportDefaultBehavior=aBe={}));var cBe;(function(t){t.method="textDocument/rename",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(cBe||(Ee.RenameRequest=cBe={}));var lBe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(lBe||(Ee.PrepareRenameRequest=lBe={}));var uBe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(uBe||(Ee.ExecuteCommandRequest=uBe={}));var dBe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType("workspace/applyEdit")})(dBe||(Ee.ApplyWorkspaceEditRequest=dBe={}))});var yBe=Q(IW=>{"use strict";d();Object.defineProperty(IW,"__esModule",{value:!0});IW.createProtocolConnection=void 0;var ABe=A_();function Zxt(t,e,r,n){return ABe.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,ABe.createMessageConnection)(t,e,r,n)}s(Zxt,"createProtocolConnection");IW.createProtocolConnection=Zxt});var EBe=Q(hf=>{"use strict";d();var ebt=hf&&hf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TW=hf&&hf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ebt(e,t,r)};Object.defineProperty(hf,"__esModule",{value:!0});hf.LSPErrorCodes=hf.createProtocolConnection=void 0;TW(A_(),hf);TW(cW(),hf);TW(ca(),hf);TW(gBe(),hf);var tbt=yBe();Object.defineProperty(hf,"createProtocolConnection",{enumerable:!0,get:s(function(){return tbt.createProtocolConnection},"get")});var CBe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(CBe||(hf.LSPErrorCodes=CBe={}))});var mi=Q(XA=>{"use strict";d();var rbt=XA&&XA.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),vBe=XA&&XA.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rbt(e,t,r)};Object.defineProperty(XA,"__esModule",{value:!0});XA.createProtocolConnection=void 0;var nbt=kle();vBe(kle(),XA);vBe(EBe(),XA);function ibt(t,e,r,n){return(0,nbt.createMessageConnection)(t,e,r,n)}s(ibt,"createProtocolConnection");XA.createProtocolConnection=ibt});var fDe=Q((OW,dDe)=>{d();(function(t,e){typeof OW=="object"&&typeof dDe<"u"?e(OW):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(OW,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function r(w,R){return w[R]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",E="call",x="toString",b=e(Object),_=r(b,l),k=e(String),P=r(k,l),N=e(Math),M=e(Array),J=r(M,l),se=r(J,"slice");function K(w,R){try{return{v:w.apply(this,R)}}catch(B){return{e:B}}}s(K,"safe");function G(w){return function(R){return typeof R===w}}s(G,"_createIs");function q(w){var R="[object "+w+"]";return function(B){return!!(B&&le(B)===R)}}s(q,"_createObjIs");function le(w){return _[x].call(w)}s(le,"objToString");function ie(w){return typeof w===f||w===f}s(ie,"isUndefined");function V(w){return!z(w)}s(V,"isStrictUndefined");function H(w){return w===i||ie(w)}s(H,"isNullOrUndefined");function z(w){return!!w||w!==n}s(z,"isDefined");var X=G("string"),ue=G(a);function ne(w){return!w&&H(w)?!1:!!w&&typeof w===c}s(ne,"isObject");var me=r(M,"isArray"),he=q("Error"),Qe=r(b,"getOwnPropertyDescriptor");function ke(w,R){return!!w&&_.hasOwnProperty[E](w,R)}s(ke,"objHasOwnProperty");var tt=e(r(b,"hasOwn"),Fe);function Fe(w,R){return ke(w,R)||!!Qe(w,R)}s(Fe,"polyObjHasOwn");function ht(w,R,B){if(w&&ne(w)){for(var F in w)if(tt(w,F)&&R[E](B||w,F,w[F])===-1)break}}s(ht,"objForEachKey");var St={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function vt(w){var R={};if(R[St.c]=!0,R[St.e]=!0,w.l){R.get=function(){return w.l.v};var B=Qe(w.l,"v");B&&B.set&&(R.set=function(F){w.l.v=F})}return ht(w,function(F,ae){R[St[F]]=V(ae)?R[St[F]]:ae}),R}s(vt,"_createProp");var It=r(b,"defineProperty");function de(w,R,B){return It(w,R,vt(B))}s(de,"objDefine");function Ue(w,R,B,F,ae){var be={};return ht(w,function(we,Oe){ye(be,we,R?Oe:we),ye(be,Oe,B?Oe:we)}),F?F(be):be}s(Ue,"_createKeyValueMap");function ye(w,R,B,F){It(w,R,{value:B,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var nt=e(k),te="[object Error]";function oe(w,R){var B=o,F=_[x][E](w);F===te&&(w={stack:nt(w.stack),message:nt(w.message),name:nt(w.name)});try{B=JSON.stringify(w,i,R?typeof R=="number"?R:4:n),B=(B?B.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||nt(w)}catch(ae){B=" - "+oe(ae,R)}return F+": "+B}s(oe,"dumpObj");function We(w){throw new Error(w)}s(We,"throwError");function De(w){throw new TypeError(w)}s(De,"throwTypeError");var xe=r(b,"freeze");function Ye(w){return w}s(Ye,"_doNothing");function st(w){return w[u]||i}s(st,"_getProto");var yt=r(b,"assign"),qt=r(b,"keys"),dr=e(xe,Ye),Ft=e(r(b,"getPrototypeOf"),st);function zr(w){return Ue(w,1,0,dr)}s(zr,"createEnum");function Zr(w){var R={};return ht(w,function(B,F){ye(R,B,F[1]),ye(R,F[0],F[1])}),dr(R)}s(Zr,"createSimpleMap");function Cn(w){return Zr(w)}s(Cn,"createTypeMap");var Ae="__tsUtils$gblCfg",Ge;function ft(){var w;return typeof globalThis!==f&&(w=globalThis),!w&&typeof self!==f&&(w=self),!w&&typeof window!==f&&(w=window),!w&&typeof global!==f&&(w=global),w}s(ft,"_getGlobalValue");function Et(){if(!Ge){var w=K(ft).v||{};Ge=w[Ae]=w[Ae]||{}}return Ge}s(Et,"_getGlobalConfig");var Zt=Vt;function Vt(w,R,B){var F=R?R[w]:i;return function(ae){var be=(ae?ae[w]:i)||F;if(be||B){var we=arguments;return(be||B).apply(ae,be?se[E](we,1):we)}De('"'+nt(w)+'" not defined for '+oe(ae))}}s(Vt,"_unwrapFunctionWithPoly");var Er=r(N,"min"),Ir=r(N,"max"),zt=Zt("slice",P),ir=Zt("substring",P),Xt=Vt("substr",P,Sr);function Sr(w,R,B){return H(w)&&De("Invalid "+oe(w)),B<0?o:(R=R||0,R<0&&(R=Ir(R+w[g],0)),ie(B)?zt(w,R):zt(w,R,R+B))}s(Sr,"polyStrSubstr");function Qr(w,R){return ir(w,0,R)}s(Qr,"strLeft");var en="_urid",$n;function si(){if(!$n){var w=Et();$n=w.gblSym=w.gblSym||{k:{},s:{}}}return $n}s(si,"_globalSymbolRegistry");function Hn(w){var R={description:nt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Hn,"polyNewSymbol");function ti(w){var R=si();if(!tt(R.k,w)){var B=Hn(w),F=qt(R.s).length;B[en]=function(){return F+"_"+B[x]()},R.k[w]=B,R.s[B[en]()]=nt(w)}return R.k[w]}s(ti,"polySymbolFor");var cn;function ri(){cn=Et()}s(ri,"_initTestHooks");function _e(w){return It({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var W="window",ge;function ve(w,R){var B;return function(){return!cn&&ri(),(!B||cn.lzy)&&(B=_e(K(w,R).v)),B.v}}s(ve,"_getGlobalInstFn");function re(w){return!cn&&ri(),(!ge||w===!1||cn.lzy)&&(ge=_e(K(ft).v||i)),ge.v}s(re,"getGlobal");function O(w,R){var B;if(!ge||R===!1?B=re(R):B=ge.v,B&&B[w])return B[w];if(w===W)try{return window}catch{}return i}s(O,"getInst");var Re=ve(O,["document"]);function ze(){return!!Gt()}s(ze,"hasWindow");var Gt=ve(O,[W]);function Pr(){return!!gr()}s(Pr,"hasNavigator");var gr=ve(O,["navigator"]),An,En;function Tr(){return An=_e(K(O,[m]).v),An}s(Tr,"_initSymbol");function $t(w){var R=(cn.lzy?0:An)||Tr();return R.v?R.v[w]:n}s($t,"_getSymbolKey");function Wn(w,R){!cn&&ri();var B=(cn.lzy?0:An)||Tr();return B.v?B.v(w):R?i:Hn(w)}s(Wn,"newSymbol");function Aa(w){return!cn&&ri(),En=(cn.lzy?0:En)||_e(K($t,["for"]).v),(En.v||ti)(w)}s(Aa,"symbolFor");function ch(w,R,B){return w.apply(R,B)}s(ch,"fnApply");function ul(w,R,B){if(w)for(var F=w[g]>>>0,ae=0;ae<F&&!(ae in w&&R[E](B||w,w[ae],ae,w)===-1);ae++);}s(ul,"arrForEach");var lh=Zt("indexOf",J),Ep=Zt("map",J),Ba=Zt("reduce",J),aA=e(r(b,"create"),bv);function bv(w){if(!w)return{};var R=typeof w;R!==c&&R!==a&&De("Prototype must be an Object or function: "+oe(w));function B(){}return s(B,"tempFunc"),B[l]=w,new B}s(bv,"polyObjCreate");var k8;function uh(w,R){var B=b.setPrototypeOf||function(F,ae){var be;!k8&&(k8=_e((be={},be[u]=[],be instanceof Array))),k8.v?F[u]=ae:ht(ae,function(we,Oe){return F[we]=Oe})};return B(w,R)}s(uh,"objSetPrototypeOf");function foe(w,R,B){K(de,[R,y,{v:w,c:!0,e:!1}]),R=uh(R,B);function F(){this[p]=R,K(de,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[l]=B===i?aA(B):(F[l]=B[l],new F),R}s(foe,"_createCustomError");function cA(w,R){R&&(w[y]=R)}s(cA,"_setName");function poe(w,R,B){var F=B||Error,ae=F[l][y],be=Error.captureStackTrace;return foe(w,function(){var we=this,Oe=arguments;try{K(cA,[F,w]);var Ze=ch(F,we,se[E](Oe))||we;if(Ze!==we){var gt=Ft(we);gt!==Ft(Ze)&&uh(Ze,gt)}return be&&be(Ze,we[p]),R&&R(Ze,Oe),Ze}finally{K(cA,[F,ae])}},F)}s(poe,"createCustomError");function UC(){return(Date.now||P8)()}s(UC,"utcNow");function P8(){return new Date().getTime()}s(P8,"polyUtcNow");function c5(w){return s(function(B){return H(B)&&De("strTrim called ["+oe(B)+"]"),B&&B.replace&&(B=B.replace(w,o)),B},"_doTrim")}s(c5,"_createTrimFn");var moe=c5(/^\s+|(?=\s)\s+$/g),_u=Vt("trim",P,moe),lA=r(N,"floor"),ZT,qC,ew;function uA(w){if(!w||typeof w!==c)return!1;ew||(ew=ze()?Gt():!0);var R=!1;if(w!==ew){qC||(ZT=Function[l][x],qC=ZT[E](b));try{var B=Ft(w);R=!B,R||(ke(B,p)&&(B=B[p]),R=!!(B&&typeof B===a&&ZT[E](B)===qC))}catch{}}return R}s(uA,"isPlainObject");var l5;function tw(){return!cn&&ri(),(!l5||cn.lzy)&&(l5=_e(K(O,["performance"]).v)),l5.v}s(tw,"getPerformance");var B8=r(N,"round"),Iv=Vt("endsWith",P,Tv);function Tv(w,R,B){X(w)||De("'"+oe(w)+"' is not a string");var F=X(R)?R:nt(R),ae=!ie(B)&&B<w[g]?B:w[g];return ir(w,ae-F[g],ae)===F}s(Tv,"polyStrEndsWith");var Wr=Zt("indexOf",P),ud="ref",HC="unref",wv="hasRef",hoe="enabled";function dA(w,R,B){var F=!0,ae=w?R(i):i,be;function we(){return F=!1,ae&&ae[HC]&&ae[HC](),be}s(we,"_unref");function Oe(){ae&&B(ae),ae=i}s(Oe,"_cancel");function Ze(){return ae=R(ae),F||we(),be}s(Ze,"_refresh");function gt(sr){!sr&&ae&&Oe(),sr&&!ae&&Ze()}return s(gt,"_setEnabled"),be={cancel:Oe,refresh:Ze},be[wv]=function(){return ae&&ae[wv]?ae[wv]():F},be[ud]=function(){return F=!0,ae&&ae[ud]&&ae[ud](),be},be[HC]=we,be=It(be,hoe,{get:s(function(){return!!ae},"get"),set:gt}),{h:be,dn:s(function(){ae=i},"dn")}}s(dA,"_createTimerHandler");function goe(w,R,B){var F=me(R),ae=F?R.length:0,be=(ae>0?R[0]:F?n:R)||setTimeout,we=(ae>1?R[1]:n)||clearTimeout,Oe=B[0];B[0]=function(){Ze.dn(),ch(Oe,n,se[E](arguments))};var Ze=dA(w,function(gt){if(gt){if(gt.refresh)return gt.refresh(),gt;ch(we,n,[gt])}return ch(be,n,B)},function(gt){ch(we,n,[gt])});return Ze.h}s(goe,"_createTimeoutWith");function D8(w,R){return goe(!0,n,se[E](arguments))}s(D8,"scheduleTimeout");var rw=zr,Aoe=Cn,nw="toLowerCase",gc="length",fA="warnToConsole",iw="throwInternal",BQ="watch",yoe="apply",so="push",WC="splice",pA="logger",N8="cancel",ow="name",dd="unload",DQ="version",NQ="loggingLevelConsole",L8="messageId",GC="message",M8="diagLog",LQ="userAgent",F8="split",_v="replace",mA="type",MQ="evtName",u5="traceFlags",O8="getAttribute",d5;function Coe(w,R){d5||(d5=poe("AggregationError",function(F,ae){ae[gc]>1&&(F.errors=ae[1])}));var B=w||"One or more errors occurred.";throw ul(R,function(F,ae){B+=`
`.concat(ae," > ").concat(oe(F))}),new d5(B,R||[])}s(Coe,"throwAggregationError");var Eoe="function",FQ="object",voe="undefined",dh="prototype",f5=Object,Q8=f5[dh];(re()||{}).Symbol,(re()||{}).Reflect;var p5="hasOwnProperty",xoe=s(function(w){for(var R,B=1,F=arguments.length;B<F;B++){R=arguments[B];for(var ae in R)Q8[p5].call(R,ae)&&(w[ae]=R[ae])}return w},"__objAssignFnImpl"),m5=yt||xoe,h5=s(function(w,R){return h5=f5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,F){B.__proto__=F}||function(B,F){for(var ae in F)F[p5](ae)&&(B[ae]=F[ae])},h5(w,R)},"extendStaticsFn");function hA(w,R){typeof R!==Eoe&&R!==null&&De("Class extends value "+String(R)+" is not a constructor or null"),h5(w,R);function B(){this.constructor=w}s(B,"__"),w[dh]=R===null?aA(R):(B[dh]=R[dh],new B)}s(hA,"__extendsFn");var g5,jC="constructor",Jd="prototype",Xd="function",VC="_dynInstFuncs",Sv="_isDynProxy",gA="_dynClass",Rv="_dynCls$",U8="_dynInstChk",$C=U8,kv="_dfOpts",q8="_unknown_",A5="__proto__",Pv="_dyn"+A5,sw="__dynProto$Gbl",y5="_dynInstProto",Bv="useBaseInst",Dv="setInstFuncs",aw=Object,zC=aw.getPrototypeOf,Nv=aw.getOwnPropertyNames,H8=re(),C5=H8[sw]||(H8[sw]={o:(g5={},g5[Dv]=!0,g5[Bv]=!0,g5),n:1e3});function Lv(w){return w&&(w===aw[Jd]||w===Array[Jd])}s(Lv,"_isObjectOrArrayPrototype");function Mv(w){return Lv(w)||w===Function[Jd]}s(Mv,"_isObjectArrayOrFunctionPrototype");function fh(w){var R;if(w){if(zC)return zC(w);var B=w[A5]||w[Jd]||(w[jC]?w[jC][Jd]:null);R=w[Pv]||B,ke(w,Pv)||(delete w[y5],R=w[Pv]=w[y5]||w[Pv],w[y5]=B)}return R}s(fh,"_getObjProto");function vp(w,R){var B=[];if(Nv)B=Nv(w);else for(var F in w)typeof F=="string"&&ke(w,F)&&B.push(F);if(B&&B.length>0)for(var ae=0;ae<B.length;ae++)R(B[ae])}s(vp,"_forEachProp");function Fv(w,R,B){return R!==jC&&typeof w[R]===Xd&&(B||ke(w,R))&&R!==A5&&R!==Jd}s(Fv,"_isDynamicCandidate");function Ov(w){De("DynamicProto: "+w)}s(Ov,"_throwTypeError");function E5(w){var R=aA(null);return vp(w,function(B){!R[B]&&Fv(w,B,!1)&&(R[B]=w[B])}),R}s(E5,"_getInstanceFuncs");function W8(w,R){for(var B=w.length-1;B>=0;B--)if(w[B]===R)return!0;return!1}s(W8,"_hasVisited");function G8(w,R,B,F){function ae(Ze,gt,sr){var Rn=gt[sr];if(Rn[Sv]&&F){var zn=Ze[VC]||{};zn[$C]!==!1&&(Rn=(zn[gt[gA]]||{})[sr]||Rn)}return function(){return Rn.apply(Ze,arguments)}}s(ae,"_instFuncProxy");var be=aA(null);vp(B,function(Ze){be[Ze]=ae(R,B,Ze)});for(var we=fh(w),Oe=[];we&&!Mv(we)&&!W8(Oe,we);)vp(we,function(Ze){!be[Ze]&&Fv(we,Ze,!zC)&&(be[Ze]=ae(R,we,Ze))}),Oe.push(we),we=fh(we);return be}s(G8,"_getBaseFuncs");function boe(w,R,B,F){var ae=null;if(w&&ke(B,gA)){var be=w[VC]||aA(null);if(ae=(be[B[gA]]||aA(null))[R],ae||Ov("Missing ["+R+"] "+Xd),!ae[U8]&&be[$C]!==!1){for(var we=!ke(w,R),Oe=fh(w),Ze=[];we&&Oe&&!Mv(Oe)&&!W8(Ze,Oe);){var gt=Oe[R];if(gt){we=gt===F;break}Ze.push(Oe),Oe=fh(Oe)}try{we&&(w[R]=ae),ae[U8]=1}catch{be[$C]=!1}}}return ae}s(boe,"_getInstFunc");function Ioe(w,R,B){var F=R[w];return F===B&&(F=fh(R)[w]),typeof F!==Xd&&Ov("["+w+"] is not a "+Xd),F}s(Ioe,"_getProtoFunc");function Toe(w,R,B,F,ae){function be(Ze,gt){var sr=s(function(){var Rn=boe(this,gt,Ze,sr)||Ioe(gt,Ze,sr);return Rn.apply(this,arguments)},"dynProtoProxy");return sr[Sv]=1,sr}if(s(be,"_createDynamicPrototype"),!Lv(w)){var we=B[VC]=B[VC]||aA(null);if(!Lv(we)){var Oe=we[R]=we[R]||aA(null);we[$C]!==!1&&(we[$C]=!!ae),Lv(Oe)||vp(B,function(Ze){Fv(B,Ze,!1)&&B[Ze]!==F[Ze]&&(Oe[Ze]=B[Ze],delete B[Ze],(!ke(w,Ze)||w[Ze]&&!w[Ze][Sv])&&(w[Ze]=be(w,Ze)))})}}}s(Toe,"_populatePrototype");function woe(w,R){if(zC){for(var B=[],F=fh(R);F&&!Mv(F)&&!W8(B,F);){if(F===w)return!0;B.push(F),F=fh(F)}return!1}return!0}s(woe,"_checkPrototype");function j8(w,R){return ke(w,Jd)?w.name||R||q8:((w||{})[jC]||{}).name||R||q8}s(j8,"_getObjName");function cw(w,R,B,F){ke(w,Jd)||Ov("theClass is an invalid class definition.");var ae=w[Jd];woe(ae,R)||Ov("["+j8(w)+"] not in hierarchy of ["+j8(R)+"]");var be=null;ke(ae,gA)?be=ae[gA]:(be=Rv+j8(w,"_")+"$"+C5.n,C5.n++,ae[gA]=be);var we=cw[kv],Oe=!!we[Bv];Oe&&F&&F[Bv]!==void 0&&(Oe=!!F[Bv]);var Ze=E5(R),gt=G8(ae,R,Ze,Oe);B(R,gt);var sr=!!zC&&!!we[Dv];sr&&F&&(sr=!!F[Dv]),Toe(ae,be,R,Ze,sr!==!1)}s(cw,"dynamicProto"),cw[kv]=C5.o;var Gl=void 0,ya="",OQ="Not dynamic - ",QQ=/-([a-z])/g,lw=/([^\w\d_$])/g,V8=/^(\d+[\w\d_$])/;function $8(w){return!H(w)}s($8,"isNotNullOrUndefined");function v5(w){var R=w;return R&&X(R)&&(R=R[_v](QQ,function(B,F){return F.toUpperCase()}),R=R[_v](lw,"_"),R=R[_v](V8,function(B,F){return"_"+F})),R}s(v5,"normalizeJsName");function UQ(w,R){return w&&R?Wr(w,R)!==-1:!1}s(UQ,"strContains");function ph(w){return w&&w.toISOString()||""}s(ph,"toISOString");function AA(w){return he(w)?w[ow]:ya}s(AA,"getExceptionName");function uw(w){return function(){function R(){var B=this;w&&ht(w,function(F,ae){B[F]=ae})}return s(R,"class_1"),R}()}s(uw,"createClassFromInterface");var qQ="console",x5="JSON",_oe="crypto",yA="msCrypto",Qv="msie",ni="trident/",Uv=null,YC=null,mh=null;function b5(){return typeof console!==voe?console:O(qQ)}s(b5,"getConsole");function ao(){return!!(typeof JSON===FQ&&JSON||O(x5)!==null)}s(ao,"hasJSON");function qv(){return ao()?JSON||O(x5):null}s(qv,"getJSON");function $a(){return O(_oe)}s($a,"getCrypto");function Hv(){return O(yA)}s(Hv,"getMsCrypto");function dw(){var w=gr();if(w&&(w[LQ]!==YC||Uv===null)){YC=w[LQ];var R=(YC||ya)[nw]();Uv=UQ(R,Qv)||UQ(R,ni)}return Uv}s(dw,"isIE");function CA(w){return(mh===null||w===!1)&&(mh=Pr()&&!!gr().sendBeacon),mh}s(CA,"isBeaconsSupported");function fw(w,R){if(w)for(var B=0;B<w[gc];B++){var F=w[B];if(F[ow]&&F[ow]===R)return F}return{}}s(fw,"_getNamedValue");function I5(w){var R=Re();return R&&w?fw(R.querySelectorAll("meta"),w).content:null}s(I5,"findMetaTag");function xp(w){var R,B=tw();if(B){var F=B.getEntriesByType("navigation")||[];R=fw((F[gc]>0?F[0]:{}).serverTiming,w).description}return R}s(xp,"findNamedServerTiming");var Wv=4294967296,o0=4294967295,Gv=123456789,EA=987654321,dl=!1,jv=Gv,bp=EA;function HQ(w){w<0&&(w>>>=0),jv=Gv+w&o0,bp=EA-w&o0,dl=!0}s(HQ,"_mwcSeed");function KC(){try{var w=UC()&2147483647;HQ((Math.random()*Wv^w)+w)}catch{}}s(KC,"_autoSeedMwc");function T5(w){return w>0?lA(Vv()/o0*(w+1))>>>0:0}s(T5,"randomValue");function Vv(w){var R=0,B=$a()||Hv();return B&&B.getRandomValues&&(R=B.getRandomValues(new Uint32Array(1))[0]&o0),R===0&&dw()&&(dl||KC(),R=WQ()&o0),R===0&&(R=lA(Wv*Math.random()|0)),w||(R>>>=0),R}s(Vv,"random32");function WQ(w){bp=36969*(bp&65535)+(bp>>16)&o0,jv=18e3*(jv&65535)+(jv>>16)&o0;var R=(bp<<16)+(jv&65535)>>>0&o0|0;return w||(R>>>=0),R}s(WQ,"mwcRandom32");function JC(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=Vv()>>>0,F=0,ae=ya;ae[gc]<w;)F++,ae+=R.charAt(B&63),B>>>=6,F===5&&(B=(Vv()<<2&4294967295|B&3)>>>0,F=0);return ae}s(JC,"newId");var Ip="3.3.6",w5="."+JC(6),XC=0;function Tp(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(Tp,"_canAcceptData");function _5(w,R){var B=R[w.id];if(!B){B={};try{Tp(R)&&de(R,w.id,{e:!1,v:B})}catch{}}return B}s(_5,"_getCache");function hh(w,R){return R===void 0&&(R=!1),v5(w+XC+++(R?"."+Ip:ya)+w5)}s(hh,"createUniqueNamespace");function wp(w){var R={id:hh("_aiData-"+(w||ya)+"."+Ip),accept:s(function(B){return Tp(B)},"accept"),get:s(function(B,F,ae,be){var we=B[R.id];return we?we[v5(F)]:(be&&(we=_5(R,B),we[v5(F)]=ae),ae)},"get"),kill:s(function(B,F){if(B&&B[F])try{delete B[F]}catch{}},"kill")};return R}s(wp,"createElmNodeData");function vA(w){return w&&ne(w)&&(w.isVal||w.fb||tt(w,"v")||tt(w,"mrg")||tt(w,"ref")||w.set)}s(vA,"_isConfigDefaults");function S5(w,R,B){var F,ae=B.dfVal||z;if(R&&B.fb){var be=B.fb;me(be)||(be=[be]);for(var we=0;we<be[gc];we++){var Oe=be[we],Ze=R[Oe];if(ae(Ze)?F=Ze:w&&(Ze=w.cfg[Oe],ae(Ze)&&(F=Ze),w.set(w.cfg,nt(Oe),Ze)),ae(F))break}}return!ae(F)&&ae(B.v)&&(F=B.v),F}s(S5,"_getDefault");function xA(w,R,B){var F=B;if(B&&vA(B)&&(F=S5(w,R,B)),F){vA(F)&&(F=xA(w,R,F));var ae;me(F)?(ae=[],ae[gc]=F[gc]):uA(F)&&(ae={}),ae&&(ht(F,function(be,we){we&&vA(we)&&(we=xA(w,R,we)),ae[be]=we}),F=ae)}return F}s(xA,"_resolveDefaultValue");function bA(w,R,B,F){var ae,be,we,Oe=F,Ze,gt,sr,Rn;vA(Oe)?(ae=Oe.isVal,be=Oe.set,sr=Oe.rdOnly,Rn=Oe.blkVal,Ze=Oe.mrg,gt=Oe.ref,!gt&&ie(gt)&&(gt=!!Ze),we=S5(w,R,Oe)):we=F,Rn&&w.blkVal(R,B);var zn,fr=!0,wr=R[B];(wr||!H(wr))&&(zn=wr,fr=!1,ae&&zn!==we&&!ae(zn)&&(zn=we,fr=!0),be&&(zn=be(zn,we,R),fr=zn===we)),fr?we?zn=xA(w,R,we):zn=we:(uA(zn)||me(we))&&Ze&&we&&(uA(we)||me(we))&&ht(we,function(Gn,kn){bA(w,zn,Gn,kn)}),w.set(R,B,zn),gt&&w.ref(R,B),sr&&w.rdOnly(R,B)}s(bA,"_applyDefaultValue");var jl=Aa("[[ai_dynCfg_1]]"),z8=Aa("[[ai_blkDynCfg_1]]"),pw=Aa("[[ai_frcDynCfg_1]]");function Y8(w){if(w){var R;if(me(w)?(R=[],R[gc]=w[gc]):uA(w)&&(R={}),R)return ht(w,function(B,F){R[B]=Y8(F)}),R}return w}s(Y8,"_cfgDeepCopy");function K8(w){if(w){var R=w[jl]||w;if(R.cfg&&(R.cfg===w||R.cfg[jl]===R))return R}return null}s(K8,"getDynamicConfigHandler");function $v(w){if(w&&(uA(w)||me(w)))try{w[z8]=!0}catch{}return w}s($v,"blockDynamicConversion");function IA(w,R,B){var F=!1;return B&&!w[R.blkVal]&&(F=B[pw],!F&&!B[z8]&&(F=uA(B)||me(B))),F}s(IA,"_canMakeDynamic");function s0(w){De("InvalidAccess:"+w)}s(s0,"throwInvalidAccess");var GQ=["push","pop","shift","unshift","splice"],gh=s(function(w,R,B,F){w&&w[iw](3,108,"".concat(B," [").concat(R,"] failed - ")+oe(F))},"_throwDynamicError");function J8(w,R,B){me(R)&&ul(GQ,function(F){var ae=R[F];R[F]=function(){for(var be=[],we=0;we<arguments.length;we++)be[we]=arguments[we];var Oe=ae[yoe](this,be);return ZC(w,R,B,"Patching"),Oe}})}s(J8,"_patchArray");function Ah(w,R){var B=Qe(w,R);return B&&B.get}s(Ah,"_getOwnPropGetter");function jQ(w,R,B,F){var ae={n:B,h:[],trk:s(function(gt){gt&&gt.fn&&(lh(ae.h,gt)===-1&&ae.h[so](gt),w.trk(gt,ae))},"trk"),clr:s(function(gt){var sr=lh(ae.h,gt);sr!==-1&&ae.h[WC](sr,1)},"clr")},be=!0,we=!1;function Oe(){be&&(we=we||IA(Oe,w,F),F&&!F[jl]&&we&&(F=ZC(w,F,B,"Converting")),be=!1);var gt=w.act;return gt&&ae.trk(gt),F}s(Oe,"_getProperty"),Oe[w.prop]={chng:s(function(){w.add(ae)},"chng")};function Ze(gt){if(F!==gt){Oe[w.ro]&&!w.upd&&s0("["+B+"] is read-only:"+oe(R)),be&&(we=we||IA(Oe,w,F),be=!1);var sr=we&&Oe[w.rf];if(we)if(sr){ht(F,function(zn){F[zn]=gt?gt[zn]:Gl});try{ht(gt,function(zn,fr){zv(w,F,zn,fr)}),gt=F}catch(zn){gh((w.hdlr||{})[pA],B,"Assigning",zn),we=!1}}else F&&F[jl]&&ht(F,function(zn){var fr=Ah(F,zn);if(fr){var wr=fr[w.prop];wr&&wr.chng()}});if(gt!==F){var Rn=gt&&IA(Oe,w,gt);!sr&&Rn&&(gt=ZC(w,gt,B,"Converting")),F=gt,we=Rn}w.add(ae)}}s(Ze,"_setProperty"),de(R,ae.n,{g:Oe,s:Ze})}s(jQ,"_createDynamicProperty");function zv(w,R,B,F){if(R){var ae=Ah(R,B),be=ae&&!!ae[w.prop];be?R[B]=F:jQ(w,R,B,F)}return R}s(zv,"_setDynamicProperty");function X8(w,R,B,F){if(R){var ae=Ah(R,B),be=ae&&!!ae[w.prop],we=F&&F[0],Oe=F&&F[1],Ze=F&&F[2];if(!be){if(Ze)try{$v(R)}catch(gt){gh((w.hdlr||{})[pA],B,"Blocking",gt)}try{zv(w,R,B,R[B]),ae=Ah(R,B)}catch(gt){gh((w.hdlr||{})[pA],B,"State",gt)}}we&&(ae[w.rf]=we),Oe&&(ae[w.ro]=Oe),Ze&&(ae[w.blkVal]=!0)}return R}s(X8,"_setDynamicPropertyState");function ZC(w,R,B,F){try{ht(R,function(ae,be){zv(w,R,ae,be)}),R[jl]||(It(R,jl,{get:s(function(){return w.hdlr},"get")}),J8(w,R,B))}catch(ae){gh((w.hdlr||{})[pA],B,F,ae)}return R}s(ZC,"_makeDynamicObject");var e1="[[ai_",Zd="]]";function VQ(w){var R=Wn(e1+"get"+w.uid+Zd),B=Wn(e1+"ro"+w.uid+Zd),F=Wn(e1+"rf"+w.uid+Zd),ae=Wn(e1+"blkVal"+w.uid+Zd),be=Wn(e1+"dtl"+w.uid+Zd),we=null,Oe=null,Ze;function gt(fr,wr){var Gn=Ze.act;try{Ze.act=fr,fr&&fr[be]&&(ul(fr[be],function(Si){Si.clr(fr)}),fr[be]=[]),wr({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(Si){var kn=w[pA];throw kn&&kn[iw](1,107,oe(Si)),Si}finally{Ze.act=Gn||null}}s(gt,"_useHandler");function sr(){if(we){var fr=we;we=null,Oe&&Oe[N8](),Oe=null;var wr=[];if(ul(fr,function(Gn){if(Gn&&(Gn[be]&&(ul(Gn[be],function(kn){kn.clr(Gn)}),Gn[be]=null),Gn.fn))try{gt(Gn,Gn.fn)}catch(kn){wr[so](kn)}}),we)try{sr()}catch(Gn){wr[so](Gn)}wr[gc]>0&&Coe("Watcher error(s): ",wr)}}s(sr,"_notifyWatchers");function Rn(fr){if(fr&&fr.h[gc]>0){we||(we=[]),Oe||(Oe=D8(function(){Oe=null,sr()},0));for(var wr=0;wr<fr.h[gc];wr++){var Gn=fr.h[wr];Gn&&lh(we,Gn)===-1&&we[so](Gn)}}}s(Rn,"_addWatcher");function zn(fr,wr){if(fr){var Gn=fr[be]=fr[be]||[];lh(Gn,wr)===-1&&Gn[so](wr)}}return s(zn,"_trackHandler"),Ze={prop:R,ro:B,rf:F,blkVal:ae,hdlr:w,add:Rn,notify:sr,use:gt,trk:zn},Ze}s(VQ,"_createState");function Soe(w,R){var B={fn:R,rm:s(function(){B.fn=null,w=null,R=null},"rm")};return de(B,"toJSON",{v:s(function(){return"WatcherHandler"+(B.fn?"":"[X]")},"v")}),w.use(B,R),B}s(Soe,"_createAndUseHandler");function $Q(w,R,B){var F=K8(R);if(F)return F;var ae=hh("dyncfg",!0),be=R&&B!==!1?R:Y8(R),we;function Oe(){we.notify()}s(Oe,"_notifyWatchers");function Ze(kn,Si,xo){try{kn=zv(we,kn,Si,xo)}catch(ji){gh(w,Si,"Setting value",ji)}return kn[Si]}s(Ze,"_setValue");function gt(kn){return Soe(we,kn)}s(gt,"_watch");function sr(kn,Si){we.use(null,function(xo){var ji=we.upd;try{ie(Si)||(we.upd=Si),kn(xo)}finally{we.upd=ji}})}s(sr,"_block");function Rn(kn,Si){var xo;return X8(we,kn,Si,(xo={},xo[0]=!0,xo))[Si]}s(Rn,"_ref");function zn(kn,Si){var xo;return X8(we,kn,Si,(xo={},xo[1]=!0,xo))[Si]}s(zn,"_rdOnly");function fr(kn,Si){var xo;return X8(we,kn,Si,(xo={},xo[2]=!0,xo))[Si]}s(fr,"_blkPropValue");function wr(kn,Si){return Si&&ht(Si,function(xo,ji){bA(Gn,kn,xo,ji)}),kn}s(wr,"_applyDefaults");var Gn={uid:null,cfg:be,logger:w,notify:Oe,set:Ze,setDf:wr,watch:gt,ref:Rn,rdOnly:zn,blkVal:fr,_block:sr};return de(Gn,"uid",{c:!1,e:!1,w:!1,v:ae}),we=VQ(Gn),ZC(we,be,"config","Creating"),Gn}s($Q,"_createDynamicHandler");function zQ(w,R){w?(w[fA](R),w[iw](2,108,R)):s0(R)}s(zQ,"_logInvalidAccess");function mw(w,R,B,F){var ae=$Q(B,w||{},F);return R&&ae.setDf(ae.cfg,R),ae}s(mw,"createDynamicConfig");function YQ(w,R,B){var F=w[jl]||w;return F.cfg&&(F.cfg===w||F.cfg[jl]===F)?F[BQ](R):(zQ(B,OQ+oe(w)),mw(w,null,B)[BQ](R))}s(YQ,"onConfigChange");var R5=null;function KQ(){var w=O("Microsoft");return w&&(R5=w.ApplicationInsights),R5}s(KQ,"_getExtensionNamespace");function Roe(w){var R=R5;return!R&&w.disableDbgExt!==!0&&(R=R5||KQ()),R?R.ChromeDbgExt:null}s(Roe,"getDebugExt");var Yv,k5="warnToConsole",JQ="AI (Internal): ",XQ="AI: ",koe="AITR_",Poe={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},ZQ=(Yv={},Yv[0]=null,Yv[1]="errorToConsole",Yv[2]=k5,Yv[3]="debugToConsole",Yv);function eU(w){return w?'"'+w[_v](/\"/g,ya)+'"':ya}s(eU,"_sanitizeDiagnosticText");function P5(w,R){var B=b5();if(B){var F="log";B[w]&&(F=w),ue(B[F])&&B[F](R)}}s(P5,"_logToConsole");var B5=function(){function w(R,B,F,ae){F===void 0&&(F=!1);var be=this;be[L8]=R,be[GC]=(F?XQ:JQ)+R;var we=ya;ao()&&(we=qv().stringify(ae));var Oe=(B?" message:"+eU(B):ya)+(ae?" props:"+eU(we):ya);be[GC]+=Oe}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function Boe(w,R){return(w||{})[pA]||new D5(R)}s(Boe,"safeGetLogger");var D5=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var B=0,F={},ae,be,we,Oe,Ze;cw(w,this,function(gt){Ze=Rn(R||{}),gt.consoleLoggingLevel=function(){return ae},gt[iw]=function(wr,Gn,kn,Si,xo){xo===void 0&&(xo=!1);var ji=new B5(Gn,kn,xo,Si);if(Oe)throw oe(ji);var Ac=ZQ[wr]||k5;if(ie(ji[GC]))fr("throw"+(wr===1?"Critical":"Warning"),ji);else{if(xo){var wx=+ji[L8];!F[wx]&&ae>=wr&&(gt[Ac](ji[GC]),F[wx]=!0)}else ae>=wr&&gt[Ac](ji[GC]);sr(wr,ji)}},gt.debugToConsole=function(wr){P5("debug",wr),fr("warning",wr)},gt[fA]=function(wr){P5("warn",wr),fr("warning",wr)},gt.errorToConsole=function(wr){P5("error",wr),fr("error",wr)},gt.resetInternalMessageCount=function(){B=0,F={}},gt.logInternalMessage=sr,gt[dd]=function(wr){Ze&&Ze.rm(),Ze=null};function sr(wr,Gn){if(!zn()){var kn=!0,Si=koe+Gn[L8];if(F[Si]?kn=!1:F[Si]=!0,kn&&(wr<=be&&(gt.queue[so](Gn),B++,fr(wr===1?"error":"warn",Gn)),B===we)){var xo="Internal events throttle limit per PageView reached for this app.",ji=new B5(23,xo,!1);gt.queue[so](ji),wr===1?gt.errorToConsole(xo):gt[fA](xo)}}}s(sr,"_logInternalMessage");function Rn(wr){return YQ(mw(wr,Poe,gt).cfg,function(Gn){var kn=Gn.cfg;ae=kn[NQ],be=kn.loggingLevelTelemetry,we=kn.maxMessageLimit,Oe=kn.enableDebug})}s(Rn,"_setDefaultsFromConfig");function zn(){return B>=we}s(zn,"_areInternalMessagesThrottled");function fr(wr,Gn){var kn=Roe(R||{});kn&&kn[M8]&&kn[M8](wr,Gn)}s(fr,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function N5(w){return w||new D5}s(N5,"_getLogger");function fd(w,R,B,F,ae,be){be===void 0&&(be=!1),N5(w)[iw](R,B,F,ae,be)}s(fd,"_throwInternal");function L5(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=ya,B,F=0;F<4;F++)B=Vv(),R+=w[B&15]+w[B>>4&15]+w[B>>8&15]+w[B>>12&15]+w[B>>16&15]+w[B>>20&15]+w[B>>24&15]+w[B>>28&15];var ae=w[8+(Vv()&3)|0];return Xt(R,0,8)+Xt(R,9,4)+"4"+Xt(R,13,3)+ae+Xt(R,16,3)+Xt(R,19,12)}s(L5,"generateW3CId");var Kv=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,Z8="00",ef="ff",_i="00000000000000000000000000000000",yh="0000000000000000",za=1;function a0(w,R,B){return w&&w[gc]===R&&w!==B?!!w.match(/^[\da-f]*$/i):!1}s(a0,"_isValid");function M5(w,R,B){return a0(w,R)?w:B}s(M5,"_formatValue");function t1(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[gc]<2;)R="0"+R;return R}s(t1,"_formatFlags");function Jv(w,R,B,F){return{version:a0(F,2,ef)?F:Z8,traceId:Xv(w)?w:L5(),spanId:Zv(R)?R:Qr(L5(),16),traceFlags:B>=0&&B<=255?B:1}}s(Jv,"createTraceParent");function tf(w,R){if(!w||(me(w)&&(w=w[0]||""),!w||!X(w)||w[gc]>8192))return null;if(w.indexOf(",")!==-1){var B=w[F8](",");w=B[R>0&&B[gc]>R?R:0]}var F=Kv.exec(_u(w));return!F||F[1]===ef||F[2]===_i||F[3]===yh?null:{version:(F[1]||ya)[nw](),traceId:(F[2]||ya)[nw](),spanId:(F[3]||ya)[nw](),traceFlags:parseInt(F[4],16)}}s(tf,"parseTraceParent");function Xv(w){return a0(w,32,_i)}s(Xv,"isValidTraceId");function Zv(w){return a0(w,16,yh)}s(Zv,"isValidSpanId");function ex(w){return!(!w||!a0(w[DQ],2,ef)||!a0(w.traceId,32,_i)||!a0(w.spanId,16,yh)||!a0(t1(w[u5]),2))}s(ex,"isValidTraceParent");function F5(w){return ex(w)?(w[u5]&za)===za:!1}s(F5,"isSampledFlag");function r1(w){if(w){var R=t1(w[u5]);a0(R,2)||(R="01");var B=w[DQ]||Z8;return B!=="00"&&B!=="ff"&&(B=Z8),"".concat(B.toLowerCase(),"-").concat(M5(w.traceId,32,_i).toLowerCase(),"-").concat(M5(w.spanId,16,yh).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(r1,"formatTraceParent");function eN(w){var R="traceparent",B=tf(I5(R),w);return B||(B=tf(xp(R),w)),B}s(eN,"findW3cTraceParent");function tN(w){var R=w.getElementsByTagName("script"),B=[];return ul(R,function(F){var ae=F[O8]("src");if(ae){var be=F[O8]("crossorigin"),we=F.hasAttribute("async")===!0,Oe=F.hasAttribute("defer")===!0,Ze=F[O8]("referrerpolicy"),gt={url:ae};be&&(gt.crossOrigin=be),we&&(gt.async=we),Oe&&(gt.defer=Oe),Ze&&(gt.referrerPolicy=Ze),B[so](gt)}}),B}s(tN,"findAllScripts");var O5="on",hw="attachEvent",Q5="addEventListener",U5="detachEvent",tU="removeEventListener",rN="events";hh("aiEvtPageHide"),hh("aiEvtPageShow");var Doe=/\.[\.]+/g,Noe=/[\.]+$/,q5=1,tx=wp("events"),fl=/^([^.]*)(?:\.(.+)|)/;function gw(w){return w&&w[_v]?w[_v](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,ya):w}s(gw,"_normalizeNamespace");function Gc(w,R){if(R){var B=ya;me(R)?(B=ya,ul(R,function(ae){ae=gw(ae),ae&&(ae[0]!=="."&&(ae="."+ae),B+=ae)})):B=gw(R),B&&(B[0]!=="."&&(B="."+B),w=(w||ya)+B)}var F=fl.exec(w||ya)||[];return{type:F[1],ns:(F[2]||ya).replace(Doe,".").replace(Noe,ya)[F8](".").sort().join(".")}}s(Gc,"_getEvtNamespace");function TA(w,R,B){B===void 0&&(B=!0);var F=tx.get(w,rN,{},B),ae=F[R];return ae||(ae=F[R]=[]),ae}s(TA,"_getRegisteredEvents");function rU(w,R,B,F){w&&R&&R[mA]&&(w[tU]?w[tU](R[mA],B,F):w[U5]&&w[U5](O5+R[mA],B))}s(rU,"_doDetach");function Loe(w,R,B,F){var ae=!1;return w&&R&&R[mA]&&B&&(w[Q5]?(w[Q5](R[mA],B,F),ae=!0):w[hw]&&(w[hw](O5+R[mA],B),ae=!0)),ae}s(Loe,"_doAttach");function Aw(w,R,B,F){for(var ae=R[gc];ae--;){var be=R[ae];be&&(!B.ns||B.ns===be[MQ].ns)&&(!F||F(be))&&(rU(w,be[MQ],be.handler,be.capture),R[WC](ae,1))}}s(Aw,"_doUnregister");function nN(w,R,B){if(R[mA])Aw(w,TA(w,R[mA]),R,B);else{var F=tx.get(w,rN,{});ht(F,function(ae,be){Aw(w,be,R,B)}),qt(F)[gc]===0&&tx.kill(w,rN)}}s(nN,"_unregisterEvents");function Moe(w,R){var B;return R?(me(R)?B=[w].concat(R):B=[w,R],B=Gc("xx",B).ns[F8](".")):B=w,B}s(Moe,"mergeEvtNamespace");function iN(w,R,B,F,ae){ae===void 0&&(ae=!1);var be=!1;if(w)try{var we=Gc(R,F);if(be=Loe(w,we,B,ae),be&&tx.accept(w)){var Oe={guid:q5++,evtName:we,handler:B,capture:ae};TA(w,we.type)[so](Oe)}}catch{}return be}s(iN,"eventOn");function nU(w,R,B,F,ae){if(ae===void 0&&(ae=!1),w)try{var be=Gc(R,F),we=!1;nN(w,be,function(Oe){return be.ns&&!B||Oe.handler===B?(we=!0,!0):!1}),we||rU(w,be,B,ae)}catch{}}s(nU,"eventOff");var H5="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",iU="sampleRate",W5="ProcessLegacy",oU="http.method",oN="https://dc.services.visualstudio.com",yw="/v2/track",_p="not_specified",sN="iKey",sU=Aoe({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),wA="split",Sn="length",rx="toLowerCase",n1="ingestionendpoint",i1="toString",aN="removeItem",Cw="message",nx="count",G5="preTriggerDate",cN="getUTCDate",j5="stringify",ix="pathname",o1="match",lN="correlationHeaderExcludePatterns",rf="name",ox="extensionConfig",Sp="properties",Su="measurements",sx="sizeInBytes",Ew="typeName",ax="exceptions",vw="severityLevel",cx="problemGroup",pd="parsedStack",V5="hasFullStack",$5="assembly",c0="fileName",lx="line",_A="aiDataContract",xw="duration";function uN(w,R,B){var F=R[Sn],ae=dN(w,R);if(ae[Sn]!==F){for(var be=0,we=ae;B[we]!==void 0;)be++,we=ir(ae,0,147)+aU(be);ae=we}return ae}s(uN,"dataSanitizeKeyAndAddUniqueness");function dN(w,R){var B;return R&&(R=_u(nt(R)),R[Sn]>150&&(B=ir(R,0,150),fd(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),B||R}s(dN,"dataSanitizeKey");function jc(w,R,B){B===void 0&&(B=1024);var F;return R&&(B=B||1024,R=_u(nt(R)),R[Sn]>B&&(F=ir(R,0,B),fd(w,2,61,"string value is too long. It has been truncated to "+B+" characters.",{value:R},!0))),F||R}s(jc,"dataSanitizeString");function Rp(w,R){return pN(w,R,2048,66)}s(Rp,"dataSanitizeUrl");function z5(w,R){var B;return R&&R[Sn]>32768&&(B=ir(R,0,32768),fd(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),B||R}s(z5,"dataSanitizeMessage");function fN(w,R){var B;if(R){var F=""+R;F[Sn]>32768&&(B=ir(F,0,32768),fd(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return B||R}s(fN,"dataSanitizeException");function Ch(w,R){if(R){var B={};ht(R,function(F,ae){if(ne(ae)&&ao())try{ae=qv()[j5](ae)}catch(be){fd(w,2,49,"custom property is not valid",{exception:be},!0)}ae=jc(w,ae,8192),F=uN(w,F,B),B[F]=ae}),R=B}return R}s(Ch,"dataSanitizeProperties");function nf(w,R){if(R){var B={};ht(R,function(F,ae){F=uN(w,F,B),B[F]=ae}),R=B}return R}s(nf,"dataSanitizeMeasurements");function ux(w,R){return R&&pN(w,R,128,69)[i1]()}s(ux,"dataSanitizeId");function pN(w,R,B,F){var ae;return R&&(R=_u(nt(R)),R[Sn]>B&&(ae=ir(R,0,B),fd(w,2,F,"input is too long, it has been truncated to "+B+" characters.",{data:R},!0))),ae||R}s(pN,"dataSanitizeInput");function aU(w){var R="00"+w;return Xt(R,R[Sn]-3)}s(aU,"dsPadNumber");var mN=Re()||{},cU=0,Foe=[null,null,null,null,null];function dx(w){var R=cU,B=Foe,F=B[R];return mN.createElement?B[R]||(F=B[R]=mN.createElement("a")):F={host:uU(w,!0)},F.href=w,R++,R>=B[Sn]&&(R=0),cU=R,F}s(dx,"urlParseUrl");function Ooe(w){var R,B=dx(w);return B&&(R=B.href),R}s(Ooe,"urlGetAbsoluteUrl");function Qoe(w){var R,B=dx(w);return B&&(R=B[ix]),R}s(Qoe,"urlGetPathName");function lU(w,R){return w?w.toUpperCase()+" "+R:R}s(lU,"urlGetCompleteUrl");function uU(w,R){var B=Eh(w,R)||"";if(B){var F=B[o1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Sn]>3&&X(F[2])&&F[2][Sn]>0)return F[2]+(F[3]||"")}return B}s(uU,"urlParseHost");function Eh(w,R){var B=null;if(w){var F=w[o1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Sn]>2&&X(F[2])&&F[2][Sn]>0&&(B=F[2]||"",R&&F[Sn]>2)){var ae=(F[1]||"")[rx](),be=F[3]||"";(ae==="http"&&be===":80"||ae==="https"&&be===":443")&&(be=""),B+=be}}return B}s(Eh,"urlParseFullHost");var dU=[oN+yw,"https://breeze.aimon.applicationinsights.io"+yw,"https://dc-int.services.visualstudio.com"+yw],fx="cid-v1:";function fU(w){return lh(dU,w[rx]())!==-1}s(fU,"isInternalApplicationInsightsEndpoint");function hN(w){fx=w}s(hN,"correlationIdSetPrefix");function gN(){return fx}s(gN,"correlationIdGetPrefix");function SA(w,R,B){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[lN]){for(var F=0;F<w.correlationHeaderExcludePatterns[Sn];F++)if(w[lN][F].test(R))return!1}var ae=dx(R).host[rx]();if(ae&&(Wr(ae,":443")!==-1||Wr(ae,":80")!==-1)&&(ae=(Eh(R,!0)||"")[rx]()),(!w||!w.enableCorsCorrelation)&&ae&&ae!==B)return!1;var be=w&&w.correlationHeaderDomains;if(be){var we;if(ul(be,function(gt){var sr=new RegExp(gt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||sr.test(ae)}),!we)return!1}var Oe=w&&w.correlationHeaderExcludedDomains;if(!Oe||Oe[Sn]===0)return!0;for(var F=0;F<Oe[Sn];F++){var Ze=new RegExp(Oe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Ze.test(ae))return!1}return ae&&ae[Sn]>0}s(SA,"correlationIdCanIncludeCorrelationHeader");function pU(w){if(w){var R=mU(w,sU[1]);if(R&&R!==fx)return R}}s(pU,"correlationIdGetCorrelationContext");function mU(w,R){if(w)for(var B=w[wA](","),F=0;F<B[Sn];++F){var ae=B[F][wA]("=");if(ae[Sn]===2&&ae[0]===R)return ae[1]}}s(mU,"correlationIdGetCorrelationContextValue");function hU(w,R,B,F){var ae,be=F,we=F;if(R&&R[Sn]>0){var Oe=dx(R);if(ae=Oe.host,!be)if(Oe[ix]!=null){var Ze=Oe.pathname[Sn]===0?"/":Oe[ix];Ze.charAt(0)!=="/"&&(Ze="/"+Ze),we=Oe[ix],be=jc(w,B?B+" "+Ze:Ze)}else be=jc(w,R)}else ae=F,be=F;return{target:ae,name:be,data:we}}s(hU,"AjaxHelperParseDependencyPath");function Uoe(){var w=tw();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return UC()}s(Uoe,"dateTimeUtilsNow");function qoe(w,R){var B=null;return w!==0&&R!==0&&!H(w)&&!H(R)&&(B=R-w),B}s(qoe,"dateTimeUtilsDuration");function AN(w,R){var B=w||{};return{getName:s(function(){return B[rf]},"getName"),setName:s(function(F){R&&R.setName(F),B[rf]=F},"setName"),getTraceId:s(function(){return B.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),Xv(F)&&(B.traceID=F)},"setTraceId"),getSpanId:s(function(){return B.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),Zv(F)&&(B.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return B.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),B.traceFlags=F},"setTraceFlags")}}s(AN,"createDistributedTraceContextFromTrace");var px=rw({LocalStorage:0,SessionStorage:1}),Hoe=rw({AI:0,AI_AND_W3C:1,W3C:2}),bw=rw({Normal:1,Critical:2}),RA=void 0,l0=void 0,gU="";function mx(){return Y5()?hx(px.LocalStorage):null}s(mx,"_getLocalStorageObject");function hx(w){try{if(H(re()))return null;var R=new Date()[i1](),B=O(w===px.LocalStorage?"localStorage":"sessionStorage"),F=gU+R;B.setItem(F,R);var ae=B.getItem(F)!==R;if(B[aN](F),!ae)return B}catch{}return null}s(hx,"_getVerifiedStorageObject");function gx(){return vh()?hx(px.SessionStorage):null}s(gx,"_getSessionStorageObject");function Iw(){RA=!1,l0=!1}s(Iw,"utlDisableStorage");function Tw(w){gU=w||""}s(Tw,"utlSetStoragePrefix");function Woe(){RA=Y5(!0),l0=vh(!0)}s(Woe,"utlEnableStorage");function Y5(w){return(w||RA===void 0)&&(RA=!!hx(px.LocalStorage)),RA}s(Y5,"utlCanUseLocalStorage");function AU(w,R){var B=mx();if(B!==null)try{return B.getItem(R)}catch(F){RA=!1,fd(w,2,1,"Browser failed read of local storage. "+AA(F),{exception:oe(F)})}return null}s(AU,"utlGetLocalStorage");function yU(w,R,B){var F=mx();if(F!==null)try{return F.setItem(R,B),!0}catch(ae){RA=!1,fd(w,2,3,"Browser failed write to local storage. "+AA(ae),{exception:oe(ae)})}return!1}s(yU,"utlSetLocalStorage");function of(w,R){var B=mx();if(B!==null)try{return B[aN](R),!0}catch(F){RA=!1,fd(w,2,5,"Browser failed removal of local storage item. "+AA(F),{exception:oe(F)})}return!1}s(of,"utlRemoveStorage");function vh(w){return(w||l0===void 0)&&(l0=!!hx(px.SessionStorage)),l0}s(vh,"utlCanUseSessionStorage");function Ax(){var w=[];return vh()&&ht(O("sessionStorage"),function(R){w.push(R)}),w}s(Ax,"utlGetSessionStorageKeys");function CU(w,R){var B=gx();if(B!==null)try{return B.getItem(R)}catch(F){l0=!1,fd(w,2,2,"Browser failed read of session storage. "+AA(F),{exception:oe(F)})}return null}s(CU,"utlGetSessionStorage");function Goe(w,R,B){var F=gx();if(F!==null)try{return F.setItem(R,B),!0}catch(ae){l0=!1,fd(w,2,4,"Browser failed write to session storage. "+AA(ae),{exception:oe(ae)})}return!1}s(Goe,"utlSetSessionStorage");function EU(w,R){var B=gx();if(B!==null)try{return B[aN](R),!0}catch(F){l0=!1,fd(w,2,6,"Browser failed removal of session storage item. "+AA(F),{exception:oe(F)})}return!1}s(EU,"utlRemoveSessionStorage");var joe="appInsightsThrottle",Voe=function(){function w(R,B){var F=this,ae,be,we,Oe,Ze,gt,sr,Rn=!1,zn=!1;wr(),F._getDbgPlgTargets=function(){return[sr]},F.getConfig=function(){return we},F.canThrottle=function(_t){var Dr=PN(_t),ln=Gn(_t);return xo(ln,ae,Dr)},F.isTriggered=function(_t){return FU(_t)},F.isReady=function(){return Rn},F.flush=function(_t){try{var Dr=OU(_t);if(Dr&&Dr[Sn]>0){var ln=Dr.slice(0);return sr[_t]=[],ul(ln,function(Zo){fr(Zo.msgID,Zo[Cw],Zo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(sr){var _t=!0;return ht(sr,function(Dr){var ln=F.flush(parseInt(Dr));_t=_t&&ln}),_t}}catch{}return!1},F.onReadyState=function(_t,Dr){return Dr===void 0&&(Dr=!0),Rn=H(_t)?!0:_t,Rn&&Dr?F.flushAll():null},F.sendMessage=function(_t,Dr,ln){return fr(_t,Dr,ln,!0)};function fr(_t,Dr,ln,Zo){if(Rn){var yc=use(_t);if(!yc)return;var Ca=Gn(_t),Cc=PN(_t),a1=xo(Ca,ae,Cc),NA=!1,_x=0,QU=FU(_t);try{a1&&!QU?(_x=Er(Ca.limit.maxSendNumber,Cc[nx]+1),Cc[nx]=0,NA=!0,Ze[_t]=!0,Cc[G5]=new Date):(Ze[_t]=a1,Cc[nx]+=1);var UU=ji(_t);kN(be,UU,Cc);for(var lk=0;lk<_x;lk++)MU(_t,be,Dr,ln)}catch{}return{isThrottled:NA,throttleNum:_x}}else if(Zo){var dse=OU(_t);dse.push({msgID:_t,message:Dr,severity:ln})}return null}s(fr,"_flushMessage");function wr(){be=Boe(R),Ze={},Oe={},sr={},we={},kn(109),gt=$8(B)?B:"",R.addUnloadHook(YQ(R.config,function(_t){var Dr=_t.cfg;ae=Y5();var ln=Dr.throttleMgrCfg||{};ht(ln,function(Zo,yc){kn(parseInt(Zo),yc)})}))}s(wr,"_initConfig");function Gn(_t){return we[_t]||we[109]}s(Gn,"_getCfgByKey");function kn(_t,Dr){var ln,Zo;try{var yc=Dr||{},Ca={};Ca.disabled=!!yc.disabled;var Cc=yc.interval||{};zn=Cc?.daysOfMonth&&Cc?.daysOfMonth[Sn]>0,Ca.interval=Si(Cc);var a1={samplingRate:((ln=yc.limit)===null||ln===void 0?void 0:ln.samplingRate)||100,maxSendNumber:((Zo=yc.limit)===null||Zo===void 0?void 0:Zo.maxSendNumber)||1};Ca.limit=a1,we[_t]=Ca}catch{}}s(kn,"_setCfgByKey");function Si(_t){_t=_t||{};var Dr=_t?.monthInterval,ln=_t?.dayInterval;return H(Dr)&&H(ln)&&(_t.monthInterval=3,zn||(_t.daysOfMonth=[28],zn=!0)),_t={monthInterval:_t?.monthInterval,dayInterval:_t?.dayInterval,daysOfMonth:_t?.daysOfMonth},_t}s(Si,"_getIntervalConfig");function xo(_t,Dr,ln){if(_t&&!_t.disabled&&Dr&&$8(ln)){var Zo=Dw(),yc=ln.date,Ca=_t.interval,Cc=1;if(Ca?.monthInterval){var a1=(Zo.getUTCFullYear()-yc.getUTCFullYear())*12+Zo.getUTCMonth()-yc.getUTCMonth();Cc=ck(Ca.monthInterval,0,a1)}var NA=1;if(zn)NA=lh(Ca.daysOfMonth,Zo[cN]());else if(Ca?.dayInterval){var _x=lA((Zo.getTime()-yc.getTime())/864e5);NA=ck(Ca.dayInterval,0,_x)}return Cc>=0&&NA>=0}return!1}s(xo,"_canThrottle");function ji(_t,Dr){var ln=$8(Dr)?Dr:"";return _t?joe+ln+"-"+_t:null}s(ji,"_getLocalStorageName");function Ac(_t){try{if(_t){var Dr=new Date;return _t.getUTCFullYear()===Dr.getUTCFullYear()&&_t.getUTCMonth()===Dr.getUTCMonth()&&_t[cN]()===Dr[cN]()}}catch{}return!1}s(Ac,"_isTriggeredOnCurDate");function wx(_t,Dr,ln){try{var Zo={date:Dw(),count:0};if(_t){var yc=JSON.parse(_t),Ca={date:Dw(yc.date)||Zo.date,count:yc[nx]||Zo[nx],preTriggerDate:yc.preTriggerDate?Dw(yc[G5]):void 0};return Ca}else return kN(Dr,ln,Zo),Zo}catch{}return null}s(wx,"_getLocalStorageObj");function Dw(_t){try{if(_t){var Dr=new Date(_t);if(!isNaN(Dr.getDate()))return Dr}else return new Date}catch{}return null}s(Dw,"_getThrottleDate");function kN(_t,Dr,ln){try{return yU(_t,Dr,_u(JSON[j5](ln)))}catch{}return!1}s(kN,"_resetLocalStorage");function ck(_t,Dr,ln){return _t<=0?1:ln>=Dr&&(ln-Dr)%_t==0?lA((ln-Dr)/_t)+1:-1}s(ck,"_checkInterval");function MU(_t,Dr,ln,Zo){fd(Dr,Zo||1,_t,ln)}s(MU,"_sendMessage");function use(_t){try{var Dr=Gn(_t);return T5(1e6)<=Dr.limit.samplingRate}catch{}return!1}s(use,"_canSampledIn");function PN(_t){try{var Dr=Oe[_t];if(!Dr){var ln=ji(_t,gt);Dr=wx(AU(be,ln),be,ln),Oe[_t]=Dr}return Oe[_t]}catch{}return null}s(PN,"_getLocalStorageObjByKey");function FU(_t){var Dr=Ze[_t];if(H(Dr)){Dr=!1;var ln=PN(_t);ln&&(Dr=Ac(ln[G5])),Ze[_t]=Dr}return Ze[_t]}s(FU,"_isTrigger");function OU(_t){return sr=sr||{},H(sr[_t])&&(sr[_t]=[]),sr[_t]}s(OU,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),yN=";",kp="=";function K5(w){if(!w)return{};var R=w[wA](yN),B=Ba(R,function(ae,be){var we=be[wA](kp);if(we[Sn]===2){var Oe=we[0][rx](),Ze=we[1];ae[Oe]=Ze}return ae},{});if(qt(B)[Sn]>0){if(B.endpointsuffix){var F=B.location?B.location+".":"";B[n1]=B[n1]||"https://"+F+"dc."+B.endpointsuffix}B[n1]=B[n1]||oN,Iv(B[n1],"/")&&(B[n1]=B[n1].slice(0,-1))}return B}s(K5,"parseConnectionString");var J5={parse:K5},X5=function(){function w(R,B,F){var ae=this,be=this;be.ver=1,be.sampleRate=100,be.tags={},be[rf]=jc(R,F)||_p,be.data=B,be.time=ph(new Date),be[_A]={time:1,iKey:1,name:1,sampleRate:s(function(){return ae.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),$oe=function(){function w(R,B,F,ae){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var be=this;be.ver=2,be[rf]=jc(R,B)||_p,be[Sp]=Ch(R,F),be[Su]=nf(R,ae)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),zoe=58,vU=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Yoe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,yx=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,xU=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,Koe=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Joe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Xoe=/([^\(\s\n]+):([0-9]+)$/,bU="<no_method>",Cx="error",md="stack",ww="stackDetails",Z5="errorSrc",_w="message",Sw="description",CN=[{re:Yoe,len:5,m:1,fn:2,ln:3,col:4},{chk:ek,pre:Rr,re:yx,len:4,m:1,fn:2,ln:3},{re:xU,len:3,m:1,fn:2,hdl:vN},{re:Koe,len:2,fn:1,hdl:vN}];function Rr(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Rr,"_scrubAnonymous");function ek(w){return Wr(w,"[native")<0}s(ek,"_ignoreNative");function Rw(w,R){var B=w;return B&&!X(B)&&(JSON&&JSON[j5]?(B=JSON[j5](w),R&&(!B||B==="{}")&&(ue(w[i1])?B=w[i1]():B=""+w)):B=""+w+" - (Missing JSON.stringify)"),B||""}s(Rw,"_stringify");function kA(w,R){var B=w;return w&&(B&&!X(B)&&(B=w[_w]||w[Sw]||B),B&&!X(B)&&(B=Rw(B,!0)),w.filename&&(B=B+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&Wr(B||"",R)===-1&&(B=R+": "+B),B||""}s(kA,"_formatMessage");function IU(w){try{if(ne(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(IU,"_isExceptionDetailsInternal");function TU(w){try{if(ne(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(TU,"_isExceptionInternal");function tk(w){return w&&w.src&&X(w.src)&&w.obj&&me(w.obj)}s(tk,"_isStackDetails");function xh(w){var R=w||"";X(R)||(X(R[md])?R=R[md]:R=""+R);var B=R[wA](`
`);return{src:R,obj:B}}s(xh,"_convertStackObj");function wU(w){for(var R=[],B=w[wA](`
`),F=0;F<B[Sn];F++){var ae=B[F];B[F+1]&&(ae+="@"+B[F+1],F++),R.push(ae)}return{src:w,obj:R}}s(wU,"_getOperaStack");function rk(w){var R=null;if(w)try{if(w[md])R=xh(w[md]);else if(w[Cx]&&w[Cx][md])R=xh(w[Cx][md]);else if(w.exception&&w.exception[md])R=xh(w.exception[md]);else if(tk(w))R=w;else if(tk(w[ww]))R=w[ww];else if(Gt()&&Gt().opera&&w[_w])R=wU(w[Cw]);else if(w.reason&&w.reason[md])R=xh(w.reason[md]);else if(X(w))R=xh(w);else{var B=w[_w]||w[Sw]||"";X(w[Z5])&&(B&&(B+=`
`),B+=" from "+w[Z5]),B&&(R=xh(B))}}catch(F){R=xh(F)}return R||{src:"",obj:null}}s(rk,"_getStackFromErrorObj");function _U(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(_U,"_formatStackTrace");function nk(w){var R,B=w.obj;if(B&&B[Sn]>0){R=[];var F=0,ae=!1,be=0;ul(B,function(Gn){if(ae||Zoe(Gn)){var kn=nt(Gn);ae=!0;var Si=ese(kn,F);Si&&(be+=Si[sx],R.push(Si),F++)}});var we=32*1024;if(be>we)for(var Oe=0,Ze=R[Sn]-1,gt=0,sr=Oe,Rn=Ze;Oe<Ze;){var zn=R[Oe][sx],fr=R[Ze][sx];if(gt+=zn+fr,gt>we){var wr=Rn-sr+1;R.splice(sr,wr);break}sr=Oe,Rn=Ze,Oe++,Ze--}}return R}s(nk,"_parseStack");function Ex(w){var R="";if(w&&(R=w.typeName||w[rf]||"",!R))try{var B=/function (.{1,200})\(/,F=B.exec(w.constructor[i1]());R=F&&F[Sn]>1?F[1]:""}catch{}return R}s(Ex,"_getErrorType");function ik(w){if(w)try{if(!X(w)){var R=Ex(w),B=Rw(w,!1);return(!B||B==="{}")&&(w[Cx]&&(w=w[Cx],R=Ex(w)),B=Rw(w,!0)),Wr(B,R)!==0&&R!=="String"?R+":"+B:B}}catch{}return""+(w||"")}s(ik,"_formatErrorCode");var Pp=function(){function w(R,B,F,ae,be,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Oe=this;Oe.ver=2,TU(B)?(Oe[ax]=B[ax]||[],Oe[Sp]=B[Sp],Oe[Su]=B[Su],B[vw]&&(Oe[vw]=B[vw]),B.id&&(Oe.id=B.id,B[Sp].id=B.id),B[cx]&&(Oe[cx]=B[cx]),H(B.isManual)||(Oe.isManual=B.isManual)):(F||(F={}),we&&(F.id=we),Oe[ax]=[kU(R,B,F)],Oe[Sp]=Ch(R,F),Oe[Su]=nf(R,ae),be&&(Oe[vw]=be),we&&(Oe.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,B,F,ae,be,we,Oe,Ze){var gt=Ex(be||we||R);return{message:kA(R,gt),url:B,lineNumber:F,columnNumber:ae,error:ik(be||we||R),evt:ik(we||R),typeName:gt,stackDetails:rk(Oe||be||we),errorSrc:Ze}},w.CreateFromInterface=function(R,B,F,ae){var be=B[ax]&&Ep(B[ax],function(Oe){return EN(R,Oe)}),we=new w(R,m5(m5({},B),{exceptions:be}),F,ae);return we},w.prototype.toInterface=function(){var R=this,B=R.exceptions,F=R.properties,ae=R.measurements,be=R.severityLevel,we=R.problemGroup,Oe=R.id,Ze=R.isManual,gt=B instanceof Array&&Ep(B,function(sr){return sr.toInterface()})||void 0;return{ver:"4.0",exceptions:gt,severityLevel:be,properties:F,measurements:ae,problemGroup:we,id:Oe,isManual:Ze}},w.CreateSimpleException=function(R,B,F,ae,be,we){var Oe;return{exceptions:[(Oe={},Oe[V5]=!0,Oe.message=R,Oe.stack=be,Oe.typeName=B,Oe)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=ik,w}(),SU=dr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function RU(){var w=this,R=me(w[pd])&&Ep(w[pd],function(F){return BU(F)}),B={id:w.id,outerId:w.outerId,typeName:w[Ew],message:w[Cw],hasFullStack:w[V5],stack:w[md],parsedStack:R||void 0};return B}s(RU,"_toInterface");function kU(w,R,B){var F,ae,be,we,Oe,Ze,gt,sr;if(IU(R))we=R[Ew],Oe=R[Cw],gt=R[md],sr=R[pd]||[],Ze=R[V5];else{var Rn=R,zn=Rn&&Rn.evt;he(Rn)||(Rn=Rn[Cx]||zn||Rn),we=jc(w,Ex(Rn))||_p,Oe=z5(w,kA(R||Rn,we))||_p;var fr=R[ww]||rk(R);sr=nk(fr),me(sr)&&Ep(sr,function(wr){wr[$5]=jc(w,wr[$5]),wr[c0]=jc(w,wr[c0])}),gt=fN(w,_U(fr)),Ze=me(sr)&&sr[Sn]>0,B&&(B[Ew]=B[Ew]||we)}return F={},F[_A]=SU,F.id=ae,F.outerId=be,F.typeName=we,F.message=Oe,F[V5]=Ze,F.stack=gt,F.parsedStack=sr,F.toInterface=RU,F}s(kU,"_createExceptionDetails");function EN(w,R){var B=me(R[pd])&&Ep(R[pd],function(ae){return PU(ae)})||R[pd],F=kU(w,m5(m5({},R),{parsedStack:B}));return F}s(EN,"_createExDetailsFromInterface");function kw(w,R){var B=R[o1](Joe);if(B&&B[Sn]>=4)w[c0]=B[1],w[lx]=parseInt(B[2]);else{var F=R[o1](Xoe);F&&F[Sn]>=3?(w[c0]=F[1],w[lx]=parseInt(F[2])):w[c0]=R}}s(kw,"_parseFilename");function vN(w,R,B){var F=w[c0];R.fn&&B&&B[Sn]>R.fn&&(R.ln&&B[Sn]>R.ln?(F=_u(B[R.fn]||""),w[lx]=parseInt(_u(B[R.ln]||""))||0):F=_u(B[R.fn]||"")),F&&kw(w,F)}s(vN,"_handleFilename");function Zoe(w){var R=!1;if(w&&X(w)){var B=_u(w);B&&(R=vU.test(B))}return R}s(Zoe,"_isStackFrame");var xN=dr({level:1,method:1,assembly:0,fileName:0,line:0});function ese(w,R){var B,F;if(w&&X(w)&&_u(w)){F=(B={},B[_A]=xN,B.level=R,B.assembly=_u(w),B.method=bU,B.fileName="",B.line=0,B.sizeInBytes=0,B);for(var ae=0;ae<CN[Sn];){var be=CN[ae];if(be.chk&&!be.chk(w))break;be.pre&&(w=be.pre(w));var we=w[o1](be.re);if(we&&we[Sn]>=be.len){be.m&&(F.method=_u(we[be.m]||bU)),be.hdl?be.hdl(F,be,we):be.fn&&(be.ln?(F[c0]=_u(we[be.fn]||""),F[lx]=parseInt(_u(we[be.ln]||""))||0):kw(F,we[be.fn]||""));break}ae++}}return bN(F)}s(ese,"_extractStackFrame");function PU(w){var R,B=(R={},R[_A]=xN,R.level=w.level,R.method=w.method,R.assembly=w[$5],R.fileName=w[c0],R.line=w[lx],R.sizeInBytes=0,R);return bN(B)}s(PU,"_stackFrameFromInterface");function bN(w){var R=zoe;return w&&(R+=w.method[Sn],R+=w.assembly[Sn],R+=w.fileName[Sn],R+=w.level.toString()[Sn],R+=w.line.toString()[Sn],w[sx]=R),w}s(bN,"_populateFrameSizeInBytes");function BU(w){return{level:w.level,method:w.method,assembly:w[$5],fileName:w[c0],line:w[lx]}}s(BU,"_parsedFrameToInterface");var DU=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),tse=function(){function w(R,B,F,ae,be,we,Oe,Ze,gt){this.aiDataContract={ver:1,metrics:1,properties:0};var sr=this;sr.ver=2;var Rn=new DU;Rn[nx]=ae>0?ae:void 0,Rn.max=isNaN(we)||we===null?void 0:we,Rn.min=isNaN(be)||be===null?void 0:be,Rn[rf]=jc(R,B)||_p,Rn.value=F,Rn.stdDev=isNaN(Oe)||Oe===null?void 0:Oe,sr.metrics=[Rn],sr[Sp]=Ch(R,Ze),sr[Su]=nf(R,gt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),vx="";function rse(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[rx]()==="true"}s(rse,"stringToBoolOrDefault");function IN(w){(isNaN(w)||w<0)&&(w=0),w=B8(w);var R=vx+w%1e3,B=vx+lA(w/1e3)%60,F=vx+lA(w/(1e3*60))%60,ae=vx+lA(w/(1e3*60*60))%24,be=lA(w/(1e3*60*60*24));return R=R[Sn]===1?"00"+R:R[Sn]===2?"0"+R:R,B=B[Sn]<2?"0"+B:B,F=F[Sn]<2?"0"+F:F,ae=ae[Sn]<2?"0"+ae:ae,(be>0?be+".":vx)+ae+":"+F+":"+B+"."+R}s(IN,"msToTimeSpan");function nse(w,R){var B=null;return ul(w,function(F){if(F.identifier===R)return B=F,-1}),B}s(nse,"getExtensionByName");function PA(w,R,B,F,ae){return!ae&&X(w)&&(w==="Script error."||w==="Script error")}s(PA,"isCrossOriginError");var ise=function(){function w(R,B,F,ae,be,we,Oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Ze=this;Ze.ver=2,Ze.id=ux(R,Oe),Ze.url=Rp(R,F),Ze[rf]=jc(R,B)||_p,isNaN(ae)||(Ze[xw]=IN(ae)),Ze[Sp]=Ch(R,be),Ze[Su]=nf(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),xx=function(){function w(R,B,F,ae,be,we,Oe,Ze,gt,sr,Rn,zn){gt===void 0&&(gt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var fr=this;fr.ver=2,fr.id=B,fr[xw]=IN(be),fr.success=we,fr.resultCode=Oe+"",fr.type=jc(R,gt);var wr=hU(R,F,Ze,ae);fr.data=Rp(R,ae)||wr.data,fr.target=jc(R,wr.target),sr&&(fr.target="".concat(fr.target," | ").concat(sr)),fr[rf]=jc(R,wr[rf]),fr[Sp]=Ch(R,Rn),fr[Su]=nf(R,zn)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),TN=function(){function w(R,B,F,ae,be){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,B=B||_p,we[Cw]=z5(R,B),we[Sp]=Ch(R,ae),we[Su]=nf(R,be),F&&(we[vw]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),Pw=function(){function w(R,B,F,ae,be,we,Oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Ze=this;Ze.ver=2,Ze.url=Rp(R,F),Ze[rf]=jc(R,B)||_p,Ze[Sp]=Ch(R,be),Ze[Su]=nf(R,we),Oe&&(Ze.domProcessing=Oe.domProcessing,Ze[xw]=Oe[xw],Ze.networkConnect=Oe.networkConnect,Ze.perfTotal=Oe.perfTotal,Ze.receivedResponse=Oe.receivedResponse,Ze.sentRequest=Oe.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),ose=function(){function w(R,B){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=B}return s(w,"Data"),w}(),ok=rw({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),sse=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,B,F,ae){ae===void 0&&(ae=!1);var be;return F&&R[ox]&&R[ox][F]&&!H(R[ox][F][B])?be=R[ox][F][B]:be=R[B],H(be)?ae:be},w}();function Bp(w){var R="ai."+w+".";return function(B){return R+B}}s(Bp,"_aiNameFunc");var bx=Bp("application"),Ya=Bp("device"),sk=Bp("location"),Ix=Bp("operation"),ak=Bp("session"),BA=Bp("user"),s1=Bp("cloud"),Bw=Bp("internal"),DA=function(w){hA(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(uw({applicationVersion:bx("ver"),applicationBuild:bx("build"),applicationTypeId:bx("typeId"),applicationId:bx("applicationId"),applicationLayer:bx("layer"),deviceId:Ya("id"),deviceIp:Ya("ip"),deviceLanguage:Ya("language"),deviceLocale:Ya("locale"),deviceModel:Ya("model"),deviceFriendlyName:Ya("friendlyName"),deviceNetwork:Ya("network"),deviceNetworkName:Ya("networkName"),deviceOEMName:Ya("oemName"),deviceOS:Ya("os"),deviceOSVersion:Ya("osVersion"),deviceRoleInstance:Ya("roleInstance"),deviceRoleName:Ya("roleName"),deviceScreenResolution:Ya("screenResolution"),deviceType:Ya("type"),deviceMachineName:Ya("machineName"),deviceVMName:Ya("vmName"),deviceBrowser:Ya("browser"),deviceBrowserVersion:Ya("browserVersion"),locationIp:sk("ip"),locationCountry:sk("country"),locationProvince:sk("province"),locationCity:sk("city"),operationId:Ix("id"),operationName:Ix("name"),operationParentId:Ix("parentId"),operationRootId:Ix("rootId"),operationSyntheticSource:Ix("syntheticSource"),operationCorrelationVector:Ix("correlationVector"),sessionId:ak("id"),sessionIsFirst:ak("isFirst"),sessionIsNew:ak("isNew"),userAccountAcquisitionDate:BA("accountAcquisitionDate"),userAccountId:BA("accountId"),userAgent:BA("userAgent"),userId:BA("id"),userStoreRegion:BA("storeRegion"),userAuthUserId:BA("authUserId"),userAnonymousUserAcquisitionDate:BA("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:BA("authUserAcquisitionDate"),cloudName:s1("name"),cloudRole:s1("role"),cloudRoleVer:s1("roleVer"),cloudRoleInstance:s1("roleInstance"),cloudEnvironment:s1("environment"),cloudLocation:s1("location"),cloudDeploymentUnit:s1("deploymentUnit"),internalNodeName:Bw("nodeName"),internalSdkVersion:Bw("sdkVersion"),internalAgentVersion:Bw("agentVersion"),internalSnippet:Bw("snippet"),internalSdkSrc:Bw("sdkSrc")}));function wN(w,R,B,F,ae,be){B=jc(F,B)||_p,(H(w)||H(R)||H(B))&&We("Input doesn't contain all required fields");var we="";w[sN]&&(we=w[sN],delete w[sN]);var Oe={name:B,time:ph(new Date),iKey:we,ext:be||{},tags:[],data:{},baseType:R,baseData:w};return H(ae)||ht(ae,function(Ze,gt){Oe.data[Ze]=gt}),Oe}s(wN,"createTelemetryItem");var _N=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=wN,w}(),ase={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},cse=new DA;function NU(w){var R=null;if(ue(Event))R=new Event(w);else{var B=Re();B&&B.createEvent&&(R=B.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(NU,"createDomEvent");function SN(w,R){nU(w,null,null,R)}s(SN,"_disableEvents");function LU(w){var R=Re(),B=gr(),F=!1,ae=[],be=1;B&&!H(B.onLine)&&!B.onLine&&(be=2);var we=0,Oe=zn(),Ze=Moe(hh("OfflineListener"),w);try{if(sr(Gt())&&(F=!0),R){var gt=R.body||R;gt.ononline&&sr(gt)&&(F=!0)}}catch{F=!1}function sr(ji){var Ac=!1;return ji&&(Ac=iN(ji,"online",Gn,Ze),Ac&&iN(ji,"offline",kn,Ze)),Ac}s(sr,"_enableEvents");function Rn(){return Oe}s(Rn,"_isOnline");function zn(){return!(we===2||be===2)}s(zn,"calCurrentState");function fr(){var ji=zn();Oe!==ji&&(Oe=ji,ul(ae,function(Ac){var wx={isOnline:Oe,rState:be,uState:we};try{Ac(wx)}catch{}}))}s(fr,"listnerNoticeCheck");function wr(ji){we=ji,fr()}s(wr,"setOnlineState");function Gn(){be=1,fr()}s(Gn,"_setOnline");function kn(){be=2,fr()}s(kn,"_setOffline");function Si(){var ji=Gt();if(ji&&F){if(SN(ji,Ze),R){var Ac=R.body||R;ie(Ac.ononline)||SN(Ac,Ze)}F=!1}}s(Si,"_unload");function xo(ji){return ae.push(ji),{rm:s(function(){var Ac=ae.indexOf(ji);if(Ac>-1)return ae.splice(Ac,1)},"rm")}}return s(xo,"addListener"),{isOnline:Rn,isListening:s(function(){return F},"isListening"),unload:Si,addListener:xo,setOnlineState:wr}}s(LU,"createOfflineListener");var lse="AppInsightsPropertiesPlugin",RN="AppInsightsChannelPlugin",Tx="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=Tx,t.BreezeChannelIdentifier=RN,t.ConfigurationManager=sse,t.ConnectionStringParser=J5,t.ContextTagKeys=DA,t.CtxTagKeys=cse,t.DEFAULT_BREEZE_ENDPOINT=oN,t.DEFAULT_BREEZE_PATH=yw,t.Data=ose,t.DisabledPropertyName=H5,t.DistributedTracingModes=Hoe,t.Envelope=X5,t.Event=$oe,t.EventPersistence=bw,t.Exception=Pp,t.Extensions=ase,t.HttpMethod=oU,t.Metric=tse,t.PageView=ise,t.PageViewPerformance=Pw,t.ProcessLegacy=W5,t.PropertiesPluginIdentifier=lse,t.RemoteDependencyData=xx,t.RequestHeaders=sU,t.SampleRate=iU,t.SeverityLevel=ok,t.TelemetryItemCreator=_N,t.ThrottleMgr=Voe,t.Trace=TN,t.correlationIdCanIncludeCorrelationHeader=SA,t.correlationIdGetCorrelationContext=pU,t.correlationIdGetCorrelationContextValue=mU,t.correlationIdGetPrefix=gN,t.correlationIdSetPrefix=hN,t.createDistributedTraceContextFromTrace=AN,t.createDomEvent=NU,t.createOfflineListener=LU,t.createTelemetryItem=wN,t.createTraceParent=Jv,t.dataSanitizeException=fN,t.dataSanitizeId=ux,t.dataSanitizeInput=pN,t.dataSanitizeKey=dN,t.dataSanitizeKeyAndAddUniqueness=uN,t.dataSanitizeMeasurements=nf,t.dataSanitizeMessage=z5,t.dataSanitizeProperties=Ch,t.dataSanitizeString=jc,t.dataSanitizeUrl=Rp,t.dateTimeUtilsDuration=qoe,t.dateTimeUtilsNow=Uoe,t.dsPadNumber=aU,t.findAllScripts=tN,t.findW3cTraceParent=eN,t.formatTraceParent=r1,t.getExtensionByName=nse,t.isBeaconApiSupported=CA,t.isCrossOriginError=PA,t.isInternalApplicationInsightsEndpoint=fU,t.isSampledFlag=F5,t.isValidSpanId=Zv,t.isValidTraceId=Xv,t.isValidTraceParent=ex,t.msToTimeSpan=IN,t.parseConnectionString=K5,t.parseTraceParent=tf,t.strNotSpecified=_p,t.stringToBoolOrDefault=rse,t.urlGetAbsoluteUrl=Ooe,t.urlGetCompleteUrl=lU,t.urlGetPathName=Qoe,t.urlParseFullHost=Eh,t.urlParseHost=uU,t.urlParseUrl=dx,t.utlCanUseLocalStorage=Y5,t.utlCanUseSessionStorage=vh,t.utlDisableStorage=Iw,t.utlEnableStorage=Woe,t.utlGetLocalStorage=AU,t.utlGetSessionStorage=CU,t.utlGetSessionStorageKeys=Ax,t.utlRemoveSessionStorage=EU,t.utlRemoveStorage=of,t.utlSetLocalStorage=yU,t.utlSetSessionStorage=Goe,t.utlSetStoragePrefix=Tw})});var mDe=Q((QW,pDe)=>{d();(function(t,e){typeof QW=="object"&&typeof pDe<"u"?e(QW):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(QW,function(t){"use strict";function e(A,v){return A||v}s(e,"_pureAssign");function r(A,v){return A[v]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",E="call",x="toString",b=e(Object),_=r(b,l),k=e(String),P=r(k,l),N=e(Math),M=e(Array),J=r(M,l),se=r(J,"slice");function K(A,v){try{return{v:A.apply(this,v)}}catch(T){return{e:T}}}s(K,"safe");function G(A,v){var T=K(A);return T.e?v:T.v}s(G,"safeGet");var q;function le(A){return function(v){return typeof v===A}}s(le,"_createIs");function ie(A){var v="[object "+A+"]";return function(T){return!!(T&&V(T)===v)}}s(ie,"_createObjIs");function V(A){return _[x].call(A)}s(V,"objToString");function H(A){return typeof A===f||A===f}s(H,"isUndefined");function z(A){return!ne(A)}s(z,"isStrictUndefined");function X(A){return A===i||H(A)}s(X,"isNullOrUndefined");function ue(A){return A===i||!ne(A)}s(ue,"isStrictNullOrUndefined");function ne(A){return!!A||A!==n}s(ne,"isDefined");function me(A){return!q&&(q=["string","number","boolean",f,"symbol","bigint"]),A!==c&&q.indexOf(A)!==-1}s(me,"isPrimitiveType");var he=le("string"),Qe=le(a);function ke(A){return!A&&X(A)?!1:!!A&&typeof A===c}s(ke,"isObject");var tt=r(M,"isArray"),Fe=ie("Date"),ht=le("number"),St=le("boolean"),vt=ie("Error");function It(A){return!!(A&&A.then&&Qe(A.then))}s(It,"isPromiseLike");function de(A){return!(!A||G(function(){return!(A&&0+A)},!A))}s(de,"isTruthy");var Ue=r(b,"getOwnPropertyDescriptor");function ye(A,v){return!!A&&_.hasOwnProperty[E](A,v)}s(ye,"objHasOwnProperty");var nt=e(r(b,"hasOwn"),te);function te(A,v){return ye(A,v)||!!Ue(A,v)}s(te,"polyObjHasOwn");function oe(A,v,T){if(A&&ke(A)){for(var S in A)if(nt(A,S)&&v[E](T||A,S,A[S])===-1)break}}s(oe,"objForEachKey");var We={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function De(A){var v={};if(v[We.c]=!0,v[We.e]=!0,A.l){v.get=function(){return A.l.v};var T=Ue(A.l,"v");T&&T.set&&(v.set=function(S){A.l.v=S})}return oe(A,function(S,D){v[We[S]]=z(D)?v[We[S]]:D}),v}s(De,"_createProp");var xe=r(b,"defineProperty");function Ye(A,v,T){return xe(A,v,De(T))}s(Ye,"objDefine");function st(A,v,T,S,D){var L={};return oe(A,function(U,ee){yt(L,U,v?ee:U),yt(L,ee,T?ee:U)}),S?S(L):L}s(st,"_createKeyValueMap");function yt(A,v,T,S){xe(A,v,{value:T,enumerable:!0,writable:!1})}s(yt,"_assignMapValue");var qt=e(k),dr="[object Error]";function Ft(A,v){var T=o,S=_[x][E](A);S===dr&&(A={stack:qt(A.stack),message:qt(A.message),name:qt(A.name)});try{T=JSON.stringify(A,i,v?typeof v=="number"?v:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||qt(A)}catch(D){T=" - "+Ft(D,v)}return S+": "+T}s(Ft,"dumpObj");function zr(A){throw new Error(A)}s(zr,"throwError");function Zr(A){throw new TypeError(A)}s(Zr,"throwTypeError");var Cn=r(b,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function Ge(A){return A[u]||i}s(Ge,"_getProto");var ft=r(b,"assign"),Et=r(b,"keys");function Zt(A){return Cn&&oe(A,function(v,T){(tt(T)||ke(T))&&Zt(T)}),Vt(A)}s(Zt,"objDeepFreeze");var Vt=e(Cn,Ae),Er=e(r(b,"getPrototypeOf"),Ge);function Ir(A){return st(A,1,0,Vt)}s(Ir,"createEnum");function zt(A){return st(A,0,0,Vt)}s(zt,"createEnumKeyMap");function ir(A){var v={};return oe(A,function(T,S){yt(v,T,S[1]),yt(v,S[0],S[1])}),Vt(v)}s(ir,"createSimpleMap");function Xt(A){return ir(A)}s(Xt,"createTypeMap");var Sr=zt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Qr="__tsUtils$gblCfg",en;function $n(){var A;return typeof globalThis!==f&&(A=globalThis),!A&&typeof self!==f&&(A=self),!A&&typeof window!==f&&(A=window),!A&&typeof global!==f&&(A=global),A}s($n,"_getGlobalValue");function si(){if(!en){var A=K($n).v||{};en=A[Qr]=A[Qr]||{}}return en}s(si,"_getGlobalConfig");var Hn=ti;function ti(A,v,T){var S=v?v[A]:i;return function(D){var L=(D?D[A]:i)||S;if(L||T){var U=arguments;return(L||T).apply(D,L?se[E](U,1):U)}Zr('"'+qt(A)+'" not defined for '+Ft(D))}}s(ti,"_unwrapFunctionWithPoly");function cn(A){return function(v){return v[A]}}s(cn,"_unwrapProp");var ri=r(N,"min"),_e=r(N,"max"),W=Hn("slice",P),ge=Hn("substring",P),ve=ti("substr",P,re);function re(A,v,T){return X(A)&&Zr("Invalid "+Ft(A)),T<0?o:(v=v||0,v<0&&(v=_e(v+A[g],0)),H(T)?W(A,v):W(A,v,v+T))}s(re,"polyStrSubstr");function O(A,v){return ge(A,0,v)}s(O,"strLeft");var Re="_urid",ze;function Gt(){if(!ze){var A=si();ze=A.gblSym=A.gblSym||{k:{},s:{}}}return ze}s(Gt,"_globalSymbolRegistry");var Pr;function gr(A){var v={description:qt(A),toString:s(function(){return m+"("+A+")"},"toString")};return v[h]=!0,v}s(gr,"polyNewSymbol");function An(A){var v=Gt();if(!nt(v.k,A)){var T=gr(A),S=Et(v.s).length;T[Re]=function(){return S+"_"+T[x]()},v.k[A]=T,v.s[T[Re]()]=qt(A)}return v.k[A]}s(An,"polySymbolFor");function En(A){!Pr&&(Pr={});var v,T=Sr[A];return T&&(v=Pr[T]=Pr[T]||gr(m+"."+T)),v}s(En,"polyGetKnownSymbol");var Tr;function $t(){Tr=si()}s($t,"_initTestHooks");function Wn(A){var v={};return!Tr&&$t(),v.b=Tr.lzy,xe(v,"v",{configurable:!0,get:s(function(){var T=A();return Tr.lzy||xe(v,"v",{value:T}),v.b=Tr.lzy,T},"get")}),v}s(Wn,"getLazy");function Aa(A){return xe({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(Aa,"createCachedValue");var ch="window",ul;function lh(A,v){var T;return function(){return!Tr&&$t(),(!T||Tr.lzy)&&(T=Aa(K(A,v).v)),T.v}}s(lh,"_getGlobalInstFn");function Ep(A){return!Tr&&$t(),(!ul||A===!1||Tr.lzy)&&(ul=Aa(K($n).v||i)),ul.v}s(Ep,"getGlobal");function Ba(A,v){var T;if(!ul||v===!1?T=Ep(v):T=ul.v,T&&T[A])return T[A];if(A===ch)try{return window}catch{}return i}s(Ba,"getInst");function aA(){return!!bv()}s(aA,"hasDocument");var bv=lh(Ba,["document"]);function k8(){return!!uh()}s(k8,"hasWindow");var uh=lh(Ba,[ch]);function foe(){return!!cA()}s(foe,"hasNavigator");var cA=lh(Ba,["navigator"]),poe=lh(function(){return!!K(function(){return process&&(process.versions||{}).node}).v}),UC,P8;function c5(){return UC=Aa(K(Ba,[m]).v),UC}s(c5,"_initSymbol");function moe(A){var v=(Tr.lzy?0:UC)||c5();return v.v?v.v[A]:n}s(moe,"_getSymbolKey");function _u(){return!!lA()}s(_u,"hasSymbol");function lA(){return!Tr&&$t(),((Tr.lzy?0:UC)||c5()).v}s(lA,"getSymbol");function ZT(A,v){var T=Sr[A];!Tr&&$t();var S=(Tr.lzy?0:UC)||c5();return S.v?S.v[T||A]:v?n:En(A)}s(ZT,"getKnownSymbol");function qC(A,v){!Tr&&$t();var T=(Tr.lzy?0:UC)||c5();return T.v?T.v(A):v?i:gr(A)}s(qC,"newSymbol");function ew(A){return!Tr&&$t(),P8=(Tr.lzy?0:P8)||Aa(K(moe,["for"]).v),(P8.v||An)(A)}s(ew,"symbolFor");function uA(A){return!!A&&Qe(A.next)}s(uA,"isIterator");function l5(A){return!ue(A)&&Qe(A[ZT(3)])}s(l5,"isIterable");var tw;function B8(A,v,T){if(A&&(uA(A)||(!tw&&(tw=Aa(ZT(3))),A=A[tw.v]?A[tw.v]():i),uA(A))){var S=n,D=n;try{for(var L=0;!(D=A.next()).done&&v[E](T||A,D.value,L,A)!==-1;)L++}catch(U){S={e:U},A.throw&&(D=i,A.throw(S))}finally{try{D&&!D.done&&A.return&&A.return(D)}finally{if(S)throw S.e}}}}s(B8,"iterForOf");function Iv(A,v,T){return A.apply(v,T)}s(Iv,"fnApply");function Tv(A,v){return!H(v)&&A&&(tt(v)?Iv(A.push,A,v):uA(v)||l5(v)?B8(v,function(T){A.push(T)}):A.push(v)),A}s(Tv,"arrAppend");function Wr(A,v,T){if(A)for(var S=A[g]>>>0,D=0;D<S&&!(D in A&&v[E](T||A,A[D],D,A)===-1);D++);}s(Wr,"arrForEach");var ud=Hn("indexOf",J),HC=Hn("map",J);function wv(A,v,T){return((A?A.slice:i)||se).apply(A,se[E](arguments,1))}s(wv,"arrSlice");var hoe=Hn("reduce",J),dA=e(r(b,"create"),goe);function goe(A){if(!A)return{};var v=typeof A;v!==c&&v!==a&&Zr("Prototype must be an Object or function: "+Ft(A));function T(){}return s(T,"tempFunc"),T[l]=A,new T}s(goe,"polyObjCreate");var D8;function rw(A,v){var T=b.setPrototypeOf||function(S,D){var L;!D8&&(D8=Aa((L={},L[u]=[],L instanceof Array))),D8.v?S[u]=D:oe(D,function(U,ee){return S[U]=ee})};return T(A,v)}s(rw,"objSetPrototypeOf");function Aoe(A,v,T){K(Ye,[v,y,{v:A,c:!0,e:!1}]),v=rw(v,T);function S(){this[p]=v,K(Ye,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),v[l]=T===i?dA(T):(S[l]=T[l],new S),v}s(Aoe,"_createCustomError");function nw(A,v){v&&(A[y]=v)}s(nw,"_setName");function gc(A,v,T){var S=T||Error,D=S[l][y],L=Error.captureStackTrace;return Aoe(A,function(){var U=this,ee=arguments;try{K(nw,[S,A]);var ce=Iv(S,U,se[E](ee))||U;if(ce!==U){var Ce=Er(U);Ce!==Er(ce)&&rw(ce,Ce)}return L&&L(ce,U[p]),v&&v(ce,ee),ce}finally{K(nw,[S,D])}},S)}s(gc,"createCustomError");function fA(){return(Date.now||iw)()}s(fA,"utcNow");function iw(){return new Date().getTime()}s(iw,"polyUtcNow");function BQ(A){return s(function(T){return X(T)&&Zr("strTrim called ["+Ft(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(BQ,"_createTrimFn");var yoe=BQ(/^\s+|(?=\s)\s+$/g),so=ti("trim",P,yoe),WC=r(N,"floor"),pA,N8,ow;function dd(A){if(!A||typeof A!==c)return!1;ow||(ow=k8()?uh():!0);var v=!1;if(A!==ow){N8||(pA=Function[l][x],N8=pA[E](b));try{var T=Er(A);v=!T,v||(ye(T,p)&&(T=T[p]),v=!!(T&&typeof T===a&&pA[E](T)===N8))}catch{}}return v}s(dd,"isPlainObject");function DQ(A){return A.value&&u5(A),!0}s(DQ,"_defaultDeepCopyHandler");var NQ=[_v,u5,MQ,mA];function L8(A,v,T,S){var D;return Wr(A,function(L){if(L.k===v)return D=L,-1}),D||(D={k:v,v},A.push(D),S(D)),D.v}s(L8,"_getSetVisited");function GC(A,v,T,S){var D=T.handler,L=T.path?S?T.path.concat(S):T.path:[],U={handler:T.handler,src:T.src,path:L},ee=typeof v,ce=!1,Ce=v===i;Ce||(v&&ee===c?ce=dd(v):Ce=me(ee));var Te={type:ee,isPrim:Ce,isPlain:ce,value:v,result:v,path:L,origin:T.src,copy:s(function(Le,Ke){return GC(A,Le,Ke?U:T,Ke)},"copy"),copyTo:s(function(Le,Ke){return M8(A,Le,Ke,U)},"copyTo")};return Te.isPrim?D&&D[E](T,Te)?Te.result:v:L8(A,v,L,function(Le){Ye(Te,"result",{g:s(function(){return Le.v},"g"),s:s(function(je){Le.v=je},"s")});for(var Ke=0,Me=D;!(Me||(Ke<NQ.length?NQ[Ke++]:DQ))[E](T,Te);)Me=i})}s(GC,"_deepCopy");function M8(A,v,T,S){if(!X(T))for(var D in T)v[D]=GC(A,T[D],S,D);return v}s(M8,"_copyProps");function LQ(A,v,T){var S={handler:T,src:v,path:[]};return M8([],A,v,S)}s(LQ,"objCopyProps");function F8(A,v){var T={handler:v,src:A};return GC([],A,T)}s(F8,"objDeepCopy");function _v(A){var v=A.value;if(tt(v)){var T=A.result=[];return T.length=v.length,A.copyTo(T,v),!0}return!1}s(_v,"arrayDeepCopyHandler");function mA(A){var v=A.value;return Fe(v)?(A.result=new Date(v.getTime()),!0):!1}s(mA,"dateDeepCopyHandler");function MQ(A){return A.type===a}s(MQ,"functionDeepCopyHandler");function u5(A){var v=A.value;if(v&&A.isPlain){var T=A.result={};return A.copyTo(T,v),!0}return!1}s(u5,"plainObjDeepCopyHandler");function O8(A,v){return Wr(v,function(T){LQ(A,T)}),A}s(O8,"_doExtend");function d5(A,v,T,S,D,L,U){return O8(F8(A)||{},se[E](arguments))}s(d5,"deepExtend");var Coe=cn(g),Eoe=r(N,"round"),FQ=ti("endsWith",P,voe);function voe(A,v,T){he(A)||Zr("'"+Ft(A)+"' is not a string");var S=he(v)?v:qt(v),D=!H(T)&&T<A[g]?T:A[g];return ge(A,D-S[g],D)===S}s(voe,"polyStrEndsWith");var dh=Hn("indexOf",P),f5="ref",Q8="unref",p5="hasRef",xoe="enabled";function m5(A,v,T){var S=!0,D=A?v(i):i,L;function U(){return S=!1,D&&D[Q8]&&D[Q8](),L}s(U,"_unref");function ee(){D&&T(D),D=i}s(ee,"_cancel");function ce(){return D=v(D),S||U(),L}s(ce,"_refresh");function Ce(Te){!Te&&D&&ee(),Te&&!D&&ce()}return s(Ce,"_setEnabled"),L={cancel:ee,refresh:ce},L[p5]=function(){return D&&D[p5]?D[p5]():S},L[f5]=function(){return S=!0,D&&D[f5]&&D[f5](),L},L[Q8]=U,L=xe(L,xoe,{get:s(function(){return!!D},"get"),set:Ce}),{h:L,dn:s(function(){D=i},"dn")}}s(m5,"_createTimerHandler");function h5(A,v,T){var S=tt(v),D=S?v.length:0,L=(D>0?v[0]:S?n:v)||setTimeout,U=(D>1?v[1]:n)||clearTimeout,ee=T[0];T[0]=function(){ce.dn(),Iv(ee,n,se[E](arguments))};var ce=m5(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;Iv(U,n,[Ce])}return Iv(L,n,T)},function(Ce){Iv(U,n,[Ce])});return ce.h}s(h5,"_createTimeoutWith");function hA(A,v){return h5(!0,n,se[E](arguments))}s(hA,"scheduleTimeout");function g5(A,v){return h5(!1,n,se[E](arguments))}s(g5,"createTimeout");var jC,Jd="constructor",Xd="prototype",VC="function",Sv="_dynInstFuncs",gA="_isDynProxy",Rv="_dynClass",U8="_dynCls$",$C="_dynInstChk",kv=$C,q8="_dfOpts",A5="_unknown_",Pv="__proto__",sw="_dyn"+Pv,y5="__dynProto$Gbl",Bv="_dynInstProto",Dv="useBaseInst",aw="setInstFuncs",zC=Object,Nv=zC.getPrototypeOf,H8=zC.getOwnPropertyNames,C5=Ep(),Lv=C5[y5]||(C5[y5]={o:(jC={},jC[aw]=!0,jC[Dv]=!0,jC),n:1e3});function Mv(A){return A&&(A===zC[Xd]||A===Array[Xd])}s(Mv,"_isObjectOrArrayPrototype");function fh(A){return Mv(A)||A===Function[Xd]}s(fh,"_isObjectArrayOrFunctionPrototype");function vp(A){var v;if(A){if(Nv)return Nv(A);var T=A[Pv]||A[Xd]||(A[Jd]?A[Jd][Xd]:null);v=A[sw]||T,ye(A,sw)||(delete A[Bv],v=A[sw]=A[Bv]||A[sw],A[Bv]=T)}return v}s(vp,"_getObjProto");function Fv(A,v){var T=[];if(H8)T=H8(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var D=0;D<T.length;D++)v(T[D])}s(Fv,"_forEachProp");function Ov(A,v,T){return v!==Jd&&typeof A[v]===VC&&(T||ye(A,v))&&v!==Pv&&v!==Xd}s(Ov,"_isDynamicCandidate");function E5(A){Zr("DynamicProto: "+A)}s(E5,"_throwTypeError");function W8(A){var v=dA(null);return Fv(A,function(T){!v[T]&&Ov(A,T,!1)&&(v[T]=A[T])}),v}s(W8,"_getInstanceFuncs");function G8(A,v){for(var T=A.length-1;T>=0;T--)if(A[T]===v)return!0;return!1}s(G8,"_hasVisited");function boe(A,v,T,S){function D(ce,Ce,Te){var Le=Ce[Te];if(Le[gA]&&S){var Ke=ce[Sv]||{};Ke[kv]!==!1&&(Le=(Ke[Ce[Rv]]||{})[Te]||Le)}return function(){return Le.apply(ce,arguments)}}s(D,"_instFuncProxy");var L=dA(null);Fv(T,function(ce){L[ce]=D(v,T,ce)});for(var U=vp(A),ee=[];U&&!fh(U)&&!G8(ee,U);)Fv(U,function(ce){!L[ce]&&Ov(U,ce,!Nv)&&(L[ce]=D(v,U,ce))}),ee.push(U),U=vp(U);return L}s(boe,"_getBaseFuncs");function Ioe(A,v,T,S){var D=null;if(A&&ye(T,Rv)){var L=A[Sv]||dA(null);if(D=(L[T[Rv]]||dA(null))[v],D||E5("Missing ["+v+"] "+VC),!D[$C]&&L[kv]!==!1){for(var U=!ye(A,v),ee=vp(A),ce=[];U&&ee&&!fh(ee)&&!G8(ce,ee);){var Ce=ee[v];if(Ce){U=Ce===S;break}ce.push(ee),ee=vp(ee)}try{U&&(A[v]=D),D[$C]=1}catch{L[kv]=!1}}}return D}s(Ioe,"_getInstFunc");function Toe(A,v,T){var S=v[A];return S===T&&(S=vp(v)[A]),typeof S!==VC&&E5("["+A+"] is not a "+VC),S}s(Toe,"_getProtoFunc");function woe(A,v,T,S,D){function L(ce,Ce){var Te=s(function(){var Le=Ioe(this,Ce,ce,Te)||Toe(Ce,ce,Te);return Le.apply(this,arguments)},"dynProtoProxy");return Te[gA]=1,Te}if(s(L,"_createDynamicPrototype"),!Mv(A)){var U=T[Sv]=T[Sv]||dA(null);if(!Mv(U)){var ee=U[v]=U[v]||dA(null);U[kv]!==!1&&(U[kv]=!!D),Mv(ee)||Fv(T,function(ce){Ov(T,ce,!1)&&T[ce]!==S[ce]&&(ee[ce]=T[ce],delete T[ce],(!ye(A,ce)||A[ce]&&!A[ce][gA])&&(A[ce]=L(A,ce)))})}}}s(woe,"_populatePrototype");function j8(A,v){if(Nv){for(var T=[],S=vp(v);S&&!fh(S)&&!G8(T,S);){if(S===A)return!0;T.push(S),S=vp(S)}return!1}return!0}s(j8,"_checkPrototype");function cw(A,v){return ye(A,Xd)?A.name||v||A5:((A||{})[Jd]||{}).name||v||A5}s(cw,"_getObjName");function Gl(A,v,T,S){ye(A,Xd)||E5("theClass is an invalid class definition.");var D=A[Xd];j8(D,v)||E5("["+cw(A)+"] not in hierarchy of ["+cw(v)+"]");var L=null;ye(D,Rv)?L=D[Rv]:(L=U8+cw(A,"_")+"$"+Lv.n,Lv.n++,D[Rv]=L);var U=Gl[q8],ee=!!U[Dv];ee&&S&&S[Dv]!==void 0&&(ee=!!S[Dv]);var ce=W8(v),Ce=boe(D,v,ce,ee);T(v,Ce);var Te=!!Nv&&!!U[aw];Te&&S&&(Te=!!S[aw]),woe(D,L,v,ce,Te!==!1)}s(Gl,"dynamicProto"),Gl[q8]=Lv.o;var ya="function",OQ="object",QQ="undefined",lw="prototype",V8=Object,$8=V8[lw];(Ep()||{}).Symbol,(Ep()||{}).Reflect;var v5="hasOwnProperty",UQ=s(function(A){for(var v,T=1,S=arguments.length;T<S;T++){v=arguments[T];for(var D in v)$8[v5].call(v,D)&&(A[D]=v[D])}return A},"__objAssignFnImpl"),ph=ft||UQ,AA=s(function(A,v){return AA=V8.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var D in S)S[v5](D)&&(T[D]=S[D])},AA(A,v)},"extendStaticsFn");function uw(A,v){typeof v!==ya&&v!==null&&Zr("Class extends value "+String(v)+" is not a constructor or null"),AA(A,v);function T(){this.constructor=A}s(T,"__"),A[lw]=v===null?dA(v):(T[lw]=v[lw],new T)}s(uw,"__extendsFn");function qQ(A,v){for(var T=0,S=v.length,D=A.length;T<S;T++,D++)A[D]=v[T];return A}s(qQ,"__spreadArrayFn");var x5=Ir,_oe=Xt,yA=x5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Qv="toLowerCase",ni="length",Uv="warnToConsole",YC="throwInternal",mh="watch",b5="apply",ao="push",qv="splice",$a="logger",Hv="cancel",dw="initialize",CA="identifier",fw="removeNotificationListener",I5="addNotificationListener",xp="isInitialized",Wv="value",o0="getNotifyMgr",Gv="getPlugin",EA="name",dl="processNext",jv="getProcessTelContext",bp="enabled",HQ="stopPollingInternalLogs",KC="unload",T5="onComplete",Vv="version",WQ="loggingLevelConsole",JC="createNew",Ip="teardown",w5="messageId",XC="message",Tp="diagLog",_5="_doTeardown",hh="update",wp="getNext",vA="setNextPlugin",S5="userAgent",xA="split",bA="replace",jl="type",z8="evtName",pw="status",Y8="getAllResponseHeaders",K8="isChildEvt",$v="data",IA="getCtx",s0="setCtx",GQ="itemsReceived",gh="urlString",J8="headers",Ah="timeout",jQ="traceFlags",zv;function X8(A,v){zv||(zv=gc("AggregationError",function(S,D){D[ni]>1&&(S.errors=D[1])}));var T=A||"One or more errors occurred.";throw Wr(v,function(S,D){T+=`
`.concat(D," > ").concat(Ft(S))}),new zv(T,v||[])}s(X8,"throwAggregationError");var ZC="Promise",e1="rejected";function Zd(A,v){return VQ(A,function(T){return v?v({status:"fulfilled",rejected:!1,value:T}):T},function(T){return v?v({status:e1,rejected:!0,reason:T}):T})}s(Zd,"doAwaitResponse");function VQ(A,v,T,S){var D=A;try{if(It(A))(v||T)&&(D=A.then(v,T));else try{v&&(D=v(A))}catch(L){if(T)D=T(L);else throw L}}finally{S&&Soe(D,S)}return D}s(VQ,"doAwait");function Soe(A,v){var T=A;return v&&(It(A)?A.finally?T=A.finally(v):T=A.then(function(S){return v(),S},function(S){throw v(),S}):v()),T}s(Soe,"doFinally");var $Q=["pending","resolving","resolved",e1],zQ="dispatchEvent",mw;function YQ(A){var v;return A&&A.createEvent&&(v=A.createEvent("Event")),!!v&&v.initEvent}s(YQ,"_hasInitEventFn");function R5(A,v,T,S){var D=bv();!mw&&(mw=Aa(!!K(YQ,[D]).v));var L=mw.v?D.createEvent("Event"):S?new Event(v):{};if(T&&T(L),mw.v&&L.initEvent(v,!1,!0),L&&A[zQ])A[zQ](L);else{var U=A["on"+v];if(U)U(L);else{var ee=Ba("console");ee&&(ee.error||ee.log)(v,Ft(L))}}}s(R5,"emitEvent");var KQ="unhandledRejection",Roe=KQ.toLowerCase(),Yv=10,k5;function JQ(A){return Qe(A)?A.toString():Ft(A)}s(JQ,"dumpFnObj");function XQ(A,v,T){var S=wv(arguments,3),D=0,L=!1,U,ee=[],ce=!1,Ce=null,Te;function Le(Yt,Ar){try{ce=!0,Ce&&Ce.cancel(),Ce=null;var Yn=A(function(Di,Ni){ee.push(function(){try{var Bo=D===2?Yt:Ar,yn=H(Bo)?U:Qe(Bo)?Bo(U):Bo;It(yn)?yn.then(Di,Ni):Bo?Di(yn):D===3?Ni(yn):Di(yn)}catch(Ur){Ni(Ur)}}),L&&ut()},S);return Yn}finally{}}s(Le,"_then");function Ke(Yt){return Le(void 0,Yt)}s(Ke,"_catch");function Me(Yt){var Ar=Yt,Yn=Yt;return Qe(Yt)&&(Ar=s(function(Di){return Yt&&Yt(),Di},"thenFinally"),Yn=s(function(Di){throw Yt&&Yt(),Di},"catchFinally")),Le(Ar,Yn)}s(Me,"_finally");function je(){return $Q[D]}s(je,"_strState");function ut(){if(ee.length>0){var Yt=ee.slice();ee=[],ce=!0,Ce&&Ce.cancel(),Ce=null,v(Yt)}}s(ut,"_processQueue");function rt(Yt,Ar){return function(Yn){if(D===Ar){if(Yt===2&&It(Yn)){D=1,Yn.then(rt(2,1),rt(3,1));return}D=Yt,L=!0,U=Yn,ut(),!ce&&Yt===3&&!Ce&&(Ce=hA(Ct,Yv))}}}s(rt,"_createSettleIfFn");function Ct(){if(!ce)if(ce=!0,poe())process.emit(KQ,U,Te);else{var Yt=uh()||Ep();!k5&&(k5=Aa(K(Ba,[ZC+"RejectionEvent"]).v)),R5(Yt,Roe,function(Ar){return Ye(Ar,"promise",{g:s(function(){return Te},"g")}),Ar.reason=U,Ar},!!k5.v)}}s(Ct,"_notifyUnhandledRejection"),Te={then:Le,catch:Ke,finally:Me},xe(Te,"state",{get:je}),_u()&&(Te[ZT(11)]="IPromise");function Mt(){return"IPromise "+je()+(L?" - "+JQ(U):"")}return s(Mt,"_toString"),Te.toString=Mt,s(function(){Qe(T)||Zr(ZC+": executor is not a function - "+JQ(T));var Ar=rt(3,0);try{T.call(Te,rt(2,0),Ar)}catch(Yn){Ar(Yn)}},"_initialize")(),Te}s(XQ,"_createPromise");function koe(A){return function(v){var T=wv(arguments,1);return A(function(S,D){try{var L=[],U=1;B8(v,function(ee,ce){ee&&(U++,VQ(ee,function(Ce){L[ce]=Ce,--U===0&&S(L)},D))}),U--,U===0&&S(L)}catch(ee){D(ee)}},T)}}s(koe,"_createAllPromise");function Poe(A){return Aa(function(v){var T=wv(arguments,1);return A(function(S,D){var L=[],U=1;function ee(ce,Ce){U++,Zd(ce,function(Te){Te.rejected?L[Ce]={status:e1,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--U===0&&S(L)})}s(ee,"processItem");try{tt(v)?Wr(v,ee):l5(v)?B8(v,ee):Zr("Input is not an iterable"),U--,U===0&&S(L)}catch(ce){D(ce)}},T)})}s(Poe,"_createAllSettledPromise");function ZQ(A){Wr(A,function(v){try{v()}catch{}})}s(ZQ,"syncItemProcessor");function eU(A){var v=ht(A)?A:0;return function(T){hA(function(){ZQ(T)},v)}}s(eU,"timeoutItemProcessor");function P5(A,v){return XQ(P5,eU(v),A,v)}s(P5,"createAsyncPromise");var B5;function Boe(A,v){!B5&&(B5=Aa(K(Ba,[ZC]).v||null));var T=B5.v;if(!T)return P5(A);Qe(A)||Zr(ZC+": executor is not a function - "+Ft(A));var S=0;function D(){return $Q[S]}s(D,"_strState");var L=new T(function(U,ee){function ce(Te){S=2,U(Te)}s(ce,"_resolve");function Ce(Te){S=3,ee(Te)}s(Ce,"_reject"),A(ce,Ce)});return xe(L,"state",{get:D}),L}s(Boe,"createNativePromise");var D5;function N5(A){return XQ(N5,ZQ,A)}s(N5,"createSyncPromise");function fd(A,v){return!D5&&(D5=Poe(N5)),D5.v(A,v)}s(fd,"createSyncAllSettledPromise");var L5;function Kv(A,v){return!L5&&(L5=Aa(Boe)),L5.v.call(this,A,v)}s(Kv,"createPromise");var Z8=koe(Kv),ef=void 0,_i="",yh="channels",za="core",a0="createPerfMgr",M5="disabled",t1="extensionConfig",Jv="extensions",tf="processTelemetry",Xv="priority",Zv="eventsSent",ex="eventsDiscarded",F5="eventsSendRequest",r1="perfEvent",eN="offlineEventsStored",tN="offlineBatchSent",O5="offlineBatchDrop",hw="getPerfMgr",Q5="domain",U5="path",tU="Not dynamic - ",rN=/-([a-z])/g,Doe=/([^\w\d_$])/g,Noe=/^(\d+[\w\d_$])/;function q5(A){return!X(A)}s(q5,"isNotNullOrUndefined");function tx(A){var v=A;return v&&he(v)&&(v=v[bA](rN,function(T,S){return S.toUpperCase()}),v=v[bA](Doe,"_"),v=v[bA](Noe,function(T,S){return"_"+S})),v}s(tx,"normalizeJsName");function fl(A,v){return A&&v?dh(A,v)!==-1:!1}s(fl,"strContains");function gw(A){return A&&A.toISOString()||""}s(gw,"toISOString");function Gc(A){return vt(A)?A[EA]:_i}s(Gc,"getExceptionName");function TA(A,v,T,S,D){var L=T;return A&&(L=A[v],L!==T&&(!D||D(L))&&(!S||S(T))&&(L=T,A[v]=L)),L}s(TA,"setValue");function rU(A,v,T){var S;return A?(S=A[v],!S&&X(S)&&(S=H(T)?{}:T,A[v]=S)):S=H(T)?{}:T,S}s(rU,"getSetValue");function Loe(A,v){var T=null,S=null;return Qe(A)?T=A:S=A,function(){var D=arguments;if(T&&(S=T()),S)return S[v][b5](S,D)}}s(Loe,"_createProxyFunction");function Aw(A,v,T,S,D){A&&v&&T&&(D!==!1||H(A[v]))&&(A[v]=Loe(T,S))}s(Aw,"proxyFunctionAs");function nN(A,v,T,S){return A&&v&&ke(A)&&tt(T)&&Wr(T,function(D){he(D)&&Aw(A,D,v,D,S)}),A}s(nN,"proxyFunctions");function Moe(A){return function(){function v(){var T=this;A&&oe(A,function(S,D){T[S]=D})}return s(v,"class_1"),v}()}s(Moe,"createClassFromInterface");function iN(A){return A&&ft&&(A=V8(ft({},A))),A}s(iN,"optimizeObject");function nU(A,v,T,S,D,L){var U=arguments,ee=U[0]||{},ce=U[ni],Ce=!1,Te=1;for(ce>0&&St(ee)&&(Ce=ee,ee=U[Te]||{},Te++),ke(ee)||(ee={});Te<ce;Te++){var Le=U[Te],Ke=tt(Le),Me=ke(Le);for(var je in Le){var ut=Ke&&je in Le||Me&&nt(Le,je);if(ut){var rt=Le[je],Ct=void 0;if(Ce&&rt&&((Ct=tt(rt))||dd(rt))){var Mt=ee[je];Ct?tt(Mt)||(Mt=[]):dd(Mt)||(Mt={}),rt=nU(Ce,Mt,rt)}rt!==void 0&&(ee[je]=rt)}}}return ee}s(nU,"objExtend");function H5(A){try{return A.responseText}catch{}return null}s(H5,"getResponseText");function iU(A,v){return A?"XDomainRequest,Response:"+H5(A)||"":v}s(iU,"formatErrorMessageXdr");function W5(A,v){return A?"XMLHttpRequest,Status:"+A[pw]+",Response:"+H5(A)||A.response||"":v}s(W5,"formatErrorMessageXhr");function oU(A,v){return v&&(ht(v)?A=[v].concat(A):tt(v)&&(A=v.concat(A))),A}s(oU,"prependTransports");var oN="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",yw="withCredentials",_p="timeout";function sN(A,v,T,S,D,L){S===void 0&&(S=!1),D===void 0&&(D=!1);function U(ce,Ce,Te){try{ce[Ce]=Te}catch{}}s(U,"_wrapSetXhrProp");var ee=new XMLHttpRequest;return S&&U(ee,oN,S),T&&U(ee,yw,T),ee.open(A,v,!D),T&&U(ee,yw,T),!D&&L&&U(ee,_p,L),ee}s(sN,"openXhr");function sU(A){var v={};if(he(A)){var T=so(A)[xA](/[\r\n]+/);Wr(T,function(S){if(S){var D=S.indexOf(": ");if(D!==-1){var L=so(S.substring(0,D))[Qv](),U=so(S.substring(D+1));v[L]=U}else v[so(S)]=1}})}return v}s(sU,"convertAllHeadersToMap");function wA(A,v,T){if(!A[T]&&v&&v.getResponseHeader){var S=v.getResponseHeader(T);S&&(A[T]=so(S))}return A}s(wA,"_appendHeader");var Sn="kill-duration",rx="kill-duration-seconds",n1="time-delta-millis";function i1(A,v){var T={};return A[Y8]?T=sU(A[Y8]()):v&&(T=wA(T,A,n1),T=wA(T,A,Sn),T=wA(T,A,rx)),T}s(i1,"_getAllResponseHeaders");var aN="documentMode",Cw="location",nx="console",G5="JSON",cN="crypto",j5="msCrypto",ix="msie",o1="trident/",lN="XMLHttpRequest",rf=null,ox=null,Sp=!1,Su=null,sx=null;function Ew(A,v){var T=!1;if(A){try{if(T=v in A,!T){var S=A[lw];S&&(T=v in S)}}catch{}if(!T)try{var D=new A;T=!H(D[v])}catch{}}return T}s(Ew,"_hasProperty");function ax(A){if(A&&Sp){var v=Ba("__mockLocation");if(v)return v}return typeof location===OQ&&location?location:Ba(Cw)}s(ax,"getLocation");function vw(){return typeof console!==QQ?console:Ba(nx)}s(vw,"getConsole");function cx(){return!!(typeof JSON===OQ&&JSON||Ba(G5)!==null)}s(cx,"hasJSON");function pd(){return cx()?JSON||Ba(G5):null}s(pd,"getJSON");function V5(){return Ba(cN)}s(V5,"getCrypto");function $5(){return Ba(j5)}s($5,"getMsCrypto");function c0(){var A=cA();if(A&&(A[S5]!==ox||rf===null)){ox=A[S5];var v=(ox||_i)[Qv]();rf=fl(v,ix)||fl(v,o1)}return rf}s(c0,"isIE");function lx(A){if(A===void 0&&(A=null),!A){var v=cA()||{};A=v?(v.userAgent||_i)[Qv]():_i}var T=(A||_i)[Qv]();if(fl(T,ix)){var S=bv()||{};return _e(parseInt(T[xA](ix)[1]),S[aN]||0)}else if(fl(T,o1)){var D=parseInt(T[xA](o1)[1]);if(D)return D+4}return null}s(lx,"getIEVersion");function _A(A){return(sx===null||A===!1)&&(sx=foe()&&!!cA().sendBeacon),sx}s(_A,"isBeaconsSupported");function xw(A){var v=!1;try{v=!!Ba("fetch");var T=Ba("Request");v&&A&&T&&(v=Ew(T,"keepalive"))}catch{}return v}s(xw,"isFetchSupported");function uN(){return Su===null&&(Su=typeof XDomainRequest!==QQ,Su&&dN()&&(Su=Su&&!Ew(Ba(lN),"withCredentials"))),Su}s(uN,"useXDomainRequest");function dN(){var A=!1;try{var v=Ba(lN);A=!!v}catch{}return A}s(dN,"isXhrSupported");var jc=4294967296,Rp=4294967295,z5=123456789,fN=987654321,Ch=!1,nf=z5,ux=fN;function pN(A){A<0&&(A>>>=0),nf=z5+A&Rp,ux=fN-A&Rp,Ch=!0}s(pN,"_mwcSeed");function aU(){try{var A=fA()&2147483647;pN((Math.random()*jc^A)+A)}catch{}}s(aU,"_autoSeedMwc");function mN(A){var v=0,T=V5()||$5();return T&&T.getRandomValues&&(v=T.getRandomValues(new Uint32Array(1))[0]&Rp),v===0&&c0()&&(Ch||aU(),v=cU()&Rp),v===0&&(v=WC(jc*Math.random()|0)),A||(v>>>=0),v}s(mN,"random32");function cU(A){ux=36969*(ux&65535)+(ux>>16)&Rp,nf=18e3*(nf&65535)+(nf>>16)&Rp;var v=(ux<<16)+(nf&65535)>>>0&Rp|0;return A||(v>>>=0),v}s(cU,"mwcRandom32");function Foe(A){A===void 0&&(A=22);for(var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=mN()>>>0,S=0,D=_i;D[ni]<A;)S++,D+=v.charAt(T&63),T>>>=6,S===5&&(T=(mN()<<2&4294967295|T&3)>>>0,S=0);return D}s(Foe,"newId");var dx="3.3.6",Ooe="."+Foe(6),Qoe=0;function lU(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s(lU,"_canAcceptData");function uU(A,v){var T=v[A.id];if(!T){T={};try{lU(v)&&Ye(v,A.id,{e:!1,v:T})}catch{}}return T}s(uU,"_getCache");function Eh(A,v){return v===void 0&&(v=!1),tx(A+Qoe+++(v?"."+dx:_i)+Ooe)}s(Eh,"createUniqueNamespace");function dU(A){var v={id:Eh("_aiData-"+(A||_i)+"."+dx),accept:s(function(T){return lU(T)},"accept"),get:s(function(T,S,D,L){var U=T[v.id];return U?U[tx(S)]:(L&&(U=uU(v,T),U[tx(S)]=D),D)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return v}s(dU,"createElmNodeData");function fx(A){return A&&ke(A)&&(A.isVal||A.fb||nt(A,"v")||nt(A,"mrg")||nt(A,"ref")||A.set)}s(fx,"_isConfigDefaults");function fU(A,v,T){var S,D=T.dfVal||ne;if(v&&T.fb){var L=T.fb;tt(L)||(L=[L]);for(var U=0;U<L[ni];U++){var ee=L[U],ce=v[ee];if(D(ce)?S=ce:A&&(ce=A.cfg[ee],D(ce)&&(S=ce),A.set(A.cfg,qt(ee),ce)),D(S))break}}return!D(S)&&D(T.v)&&(S=T.v),S}s(fU,"_getDefault");function hN(A,v,T){var S=T;if(T&&fx(T)&&(S=fU(A,v,T)),S){fx(S)&&(S=hN(A,v,S));var D;tt(S)?(D=[],D[ni]=S[ni]):dd(S)&&(D={}),D&&(oe(S,function(L,U){U&&fx(U)&&(U=hN(A,v,U)),D[L]=U}),S=D)}return S}s(hN,"_resolveDefaultValue");function gN(A,v,T,S){var D,L,U,ee=S,ce,Ce,Te,Le;fx(ee)?(D=ee.isVal,L=ee.set,Te=ee.rdOnly,Le=ee.blkVal,ce=ee.mrg,Ce=ee.ref,!Ce&&H(Ce)&&(Ce=!!ce),U=fU(A,v,ee)):U=S,Le&&A.blkVal(v,T);var Ke,Me=!0,je=v[T];(je||!X(je))&&(Ke=je,Me=!1,D&&Ke!==U&&!D(Ke)&&(Ke=U,Me=!0),L&&(Ke=L(Ke,U,v),Me=Ke===U)),Me?U?Ke=hN(A,v,U):Ke=U:(dd(Ke)||tt(U))&&ce&&U&&(dd(U)||tt(U))&&oe(U,function(ut,rt){gN(A,Ke,ut,rt)}),A.set(v,T,Ke),Ce&&A.ref(v,T),Te&&A.rdOnly(v,T)}s(gN,"_applyDefaultValue");var SA=ew("[[ai_dynCfg_1]]"),pU=ew("[[ai_blkDynCfg_1]]"),mU=ew("[[ai_frcDynCfg_1]]");function hU(A){if(A){var v;if(tt(A)?(v=[],v[ni]=A[ni]):dd(A)&&(v={}),v)return oe(A,function(T,S){v[T]=hU(S)}),v}return A}s(hU,"_cfgDeepCopy");function Uoe(A){if(A){var v=A[SA]||A;if(v.cfg&&(v.cfg===A||v.cfg[SA]===v))return v}return null}s(Uoe,"getDynamicConfigHandler");function qoe(A){if(A&&(dd(A)||tt(A)))try{A[pU]=!0}catch{}return A}s(qoe,"blockDynamicConversion");function AN(A,v,T){var S=!1;return T&&!A[v.blkVal]&&(S=T[mU],!S&&!T[pU]&&(S=dd(T)||tt(T))),S}s(AN,"_canMakeDynamic");function px(A){Zr("InvalidAccess:"+A)}s(px,"throwInvalidAccess");var Hoe=["push","pop","shift","unshift","splice"],bw=s(function(A,v,T,S){A&&A[YC](3,108,"".concat(T," [").concat(v,"] failed - ")+Ft(S))},"_throwDynamicError");function RA(A,v,T){tt(v)&&Wr(Hoe,function(S){var D=v[S];v[S]=function(){for(var L=[],U=0;U<arguments.length;U++)L[U]=arguments[U];var ee=D[b5](this,L);return gx(A,v,T,"Patching"),ee}})}s(RA,"_patchArray");function l0(A,v){var T=Ue(A,v);return T&&T.get}s(l0,"_getOwnPropGetter");function gU(A,v,T,S){var D={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(ud(D.h,Ce)===-1&&D.h[ao](Ce),A.trk(Ce,D))},"trk"),clr:s(function(Ce){var Te=ud(D.h,Ce);Te!==-1&&D.h[qv](Te,1)},"clr")},L=!0,U=!1;function ee(){L&&(U=U||AN(ee,A,S),S&&!S[SA]&&U&&(S=gx(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&D.trk(Ce),S}s(ee,"_getProperty"),ee[A.prop]={chng:s(function(){A.add(D)},"chng")};function ce(Ce){if(S!==Ce){ee[A.ro]&&!A.upd&&px("["+T+"] is read-only:"+Ft(v)),L&&(U=U||AN(ee,A,S),L=!1);var Te=U&&ee[A.rf];if(U)if(Te){oe(S,function(Ke){S[Ke]=Ce?Ce[Ke]:ef});try{oe(Ce,function(Ke,Me){mx(A,S,Ke,Me)}),Ce=S}catch(Ke){bw((A.hdlr||{})[$a],T,"Assigning",Ke),U=!1}}else S&&S[SA]&&oe(S,function(Ke){var Me=l0(S,Ke);if(Me){var je=Me[A.prop];je&&je.chng()}});if(Ce!==S){var Le=Ce&&AN(ee,A,Ce);!Te&&Le&&(Ce=gx(A,Ce,T,"Converting")),S=Ce,U=Le}A.add(D)}}s(ce,"_setProperty"),Ye(v,D.n,{g:ee,s:ce})}s(gU,"_createDynamicProperty");function mx(A,v,T,S){if(v){var D=l0(v,T),L=D&&!!D[A.prop];L?v[T]=S:gU(A,v,T,S)}return v}s(mx,"_setDynamicProperty");function hx(A,v,T,S){if(v){var D=l0(v,T),L=D&&!!D[A.prop],U=S&&S[0],ee=S&&S[1],ce=S&&S[2];if(!L){if(ce)try{qoe(v)}catch(Ce){bw((A.hdlr||{})[$a],T,"Blocking",Ce)}try{mx(A,v,T,v[T]),D=l0(v,T)}catch(Ce){bw((A.hdlr||{})[$a],T,"State",Ce)}}U&&(D[A.rf]=U),ee&&(D[A.ro]=ee),ce&&(D[A.blkVal]=!0)}return v}s(hx,"_setDynamicPropertyState");function gx(A,v,T,S){try{oe(v,function(D,L){mx(A,v,D,L)}),v[SA]||(xe(v,SA,{get:s(function(){return A.hdlr},"get")}),RA(A,v,T))}catch(D){bw((A.hdlr||{})[$a],T,S,D)}return v}s(gx,"_makeDynamicObject");var Iw="[[ai_",Tw="]]";function Woe(A){var v=qC(Iw+"get"+A.uid+Tw),T=qC(Iw+"ro"+A.uid+Tw),S=qC(Iw+"rf"+A.uid+Tw),D=qC(Iw+"blkVal"+A.uid+Tw),L=qC(Iw+"dtl"+A.uid+Tw),U=null,ee=null,ce;function Ce(Me,je){var ut=ce.act;try{ce.act=Me,Me&&Me[L]&&(Wr(Me[L],function(Ct){Ct.clr(Me)}),Me[L]=[]),je({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(Ct){var rt=A[$a];throw rt&&rt[YC](1,107,Ft(Ct)),Ct}finally{ce.act=ut||null}}s(Ce,"_useHandler");function Te(){if(U){var Me=U;U=null,ee&&ee[Hv](),ee=null;var je=[];if(Wr(Me,function(ut){if(ut&&(ut[L]&&(Wr(ut[L],function(rt){rt.clr(ut)}),ut[L]=null),ut.fn))try{Ce(ut,ut.fn)}catch(rt){je[ao](rt)}}),U)try{Te()}catch(ut){je[ao](ut)}je[ni]>0&&X8("Watcher error(s): ",je)}}s(Te,"_notifyWatchers");function Le(Me){if(Me&&Me.h[ni]>0){U||(U=[]),ee||(ee=hA(function(){ee=null,Te()},0));for(var je=0;je<Me.h[ni];je++){var ut=Me.h[je];ut&&ud(U,ut)===-1&&U[ao](ut)}}}s(Le,"_addWatcher");function Ke(Me,je){if(Me){var ut=Me[L]=Me[L]||[];ud(ut,je)===-1&&ut[ao](je)}}return s(Ke,"_trackHandler"),ce={prop:v,ro:T,rf:S,blkVal:D,hdlr:A,add:Le,notify:Te,use:Ce,trk:Ke},ce}s(Woe,"_createState");function Y5(A,v){var T={fn:v,rm:s(function(){T.fn=null,A=null,v=null},"rm")};return Ye(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,v),T}s(Y5,"_createAndUseHandler");function AU(A,v,T){var S=Uoe(v);if(S)return S;var D=Eh("dyncfg",!0),L=v&&T!==!1?v:hU(v),U;function ee(){U.notify()}s(ee,"_notifyWatchers");function ce(rt,Ct,Mt){try{rt=mx(U,rt,Ct,Mt)}catch(Yt){bw(A,Ct,"Setting value",Yt)}return rt[Ct]}s(ce,"_setValue");function Ce(rt){return Y5(U,rt)}s(Ce,"_watch");function Te(rt,Ct){U.use(null,function(Mt){var Yt=U.upd;try{H(Ct)||(U.upd=Ct),rt(Mt)}finally{U.upd=Yt}})}s(Te,"_block");function Le(rt,Ct){var Mt;return hx(U,rt,Ct,(Mt={},Mt[0]=!0,Mt))[Ct]}s(Le,"_ref");function Ke(rt,Ct){var Mt;return hx(U,rt,Ct,(Mt={},Mt[1]=!0,Mt))[Ct]}s(Ke,"_rdOnly");function Me(rt,Ct){var Mt;return hx(U,rt,Ct,(Mt={},Mt[2]=!0,Mt))[Ct]}s(Me,"_blkPropValue");function je(rt,Ct){return Ct&&oe(Ct,function(Mt,Yt){gN(ut,rt,Mt,Yt)}),rt}s(je,"_applyDefaults");var ut={uid:null,cfg:L,logger:A,notify:ee,set:ce,setDf:je,watch:Ce,ref:Le,rdOnly:Ke,blkVal:Me,_block:Te};return Ye(ut,"uid",{c:!1,e:!1,w:!1,v:D}),U=Woe(ut),gx(U,L,"config","Creating"),ut}s(AU,"_createDynamicHandler");function yU(A,v){A?(A[Uv](v),A[YC](2,108,v)):px(v)}s(yU,"_logInvalidAccess");function of(A,v,T,S){var D=AU(T,A||{},S);return v&&D.setDf(D.cfg,v),D}s(of,"createDynamicConfig");function vh(A,v,T){var S=A[SA]||A;return S.cfg&&(S.cfg===A||S.cfg[SA]===S)?S[mh](v):(yU(T,tU+Ft(A)),of(A,null,T)[mh](v))}s(vh,"onConfigChange");function Ax(A,v){if(A&&A[KC])return A[KC](v)}s(Ax,"runTargetUnload");function CU(A,v,T){var S;return T||(S=Kv(function(D){T=D})),A&&Coe(A)>0?Zd(Ax(A[0],v),function(){CU(wv(A,1),v,T)}):T(),S}s(CU,"doUnloadAll");var Goe=500,EU="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function joe(A,v,T){return!A&&X(A)?v:St(A)?A:qt(A)[Qv]()==="true"}s(joe,"_stringToBoolOrDefault");function Voe(A){return{mrg:!0,v:A}}s(Voe,"cfgDfMerge");function yN(A,v,T){return{fb:T,isVal:A,v}}s(yN,"cfgDfValidate");function kp(A,v){return{fb:v,set:joe,v:!!A}}s(kp,"cfgDfBoolean");var K5=[Zv,ex,F5,r1],J5=null,X5;function $oe(A,v){return function(){var T=arguments,S=vU(v);if(S){var D=S.listener;D&&D[A]&&D[A][b5](D,T)}}}s($oe,"_listenerProxyFunc");function zoe(){var A=Ba("Microsoft");return A&&(J5=A.ApplicationInsights),J5}s(zoe,"_getExtensionNamespace");function vU(A){var v=J5;return!v&&A.disableDbgExt!==!0&&(v=J5||zoe()),v?v.ChromeDbgExt:null}s(vU,"getDebugExt");function Yoe(A){if(!X5){X5={};for(var v=0;v<K5[ni];v++)X5[K5[v]]=$oe(K5[v],A)}return X5}s(Yoe,"getDebugListener");var yx,xU="warnToConsole",Koe="AI (Internal): ",Joe="AI: ",Xoe="AITR_",bU={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Cx=(yx={},yx[0]=null,yx[1]="errorToConsole",yx[2]=xU,yx[3]="debugToConsole",yx);function md(A){return A?'"'+A[bA](/\"/g,_i)+'"':_i}s(md,"_sanitizeDiagnosticText");function ww(A,v){var T=vw();if(T){var S="log";T[A]&&(S=A),Qe(T[S])&&T[S](v)}}s(ww,"_logToConsole");var Z5=function(){function A(v,T,S,D){S===void 0&&(S=!1);var L=this;L[w5]=v,L[XC]=(S?Joe:Koe)+v;var U=_i;cx()&&(U=pd().stringify(D));var ee=(T?" message:"+md(T):_i)+(D?" props:"+md(U):_i);L[XC]+=ee}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function _w(A,v){return(A||{})[$a]||new Sw(v)}s(_w,"safeGetLogger");var Sw=function(){function A(v){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},D,L,U,ee,ce;Gl(A,this,function(Ce){ce=Le(v||{}),Ce.consoleLoggingLevel=function(){return D},Ce[YC]=function(je,ut,rt,Ct,Mt){Mt===void 0&&(Mt=!1);var Yt=new Z5(ut,rt,Mt,Ct);if(ee)throw Ft(Yt);var Ar=Cx[je]||xU;if(H(Yt[XC]))Me("throw"+(je===1?"Critical":"Warning"),Yt);else{if(Mt){var Yn=+Yt[w5];!S[Yn]&&D>=je&&(Ce[Ar](Yt[XC]),S[Yn]=!0)}else D>=je&&Ce[Ar](Yt[XC]);Te(je,Yt)}},Ce.debugToConsole=function(je){ww("debug",je),Me("warning",je)},Ce[Uv]=function(je){ww("warn",je),Me("warning",je)},Ce.errorToConsole=function(je){ww("error",je),Me("error",je)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[KC]=function(je){ce&&ce.rm(),ce=null};function Te(je,ut){if(!Ke()){var rt=!0,Ct=Xoe+ut[w5];if(S[Ct]?rt=!1:S[Ct]=!0,rt&&(je<=L&&(Ce.queue[ao](ut),T++,Me(je===1?"error":"warn",ut)),T===U)){var Mt="Internal events throttle limit per PageView reached for this app.",Yt=new Z5(23,Mt,!1);Ce.queue[ao](Yt),je===1?Ce.errorToConsole(Mt):Ce[Uv](Mt)}}}s(Te,"_logInternalMessage");function Le(je){return vh(of(je,bU,Ce).cfg,function(ut){var rt=ut.cfg;D=rt[WQ],L=rt.loggingLevelTelemetry,U=rt.maxMessageLimit,ee=rt.enableDebug})}s(Le,"_setDefaultsFromConfig");function Ke(){return T>=U}s(Ke,"_areInternalMessagesThrottled");function Me(je,ut){var rt=vU(v||{});rt&&rt[Tp]&&rt[Tp](je,ut)}s(Me,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function CN(A){return A||new Sw}s(CN,"_getLogger");function Rr(A,v,T,S,D,L){L===void 0&&(L=!1),CN(A)[YC](v,T,S,D,L)}s(Rr,"_throwInternal");function ek(A,v){CN(A)[Uv](v)}s(ek,"_warnToConsole");var Rw,kA,IU="toGMTString",TU="toUTCString",tk="cookie",xh="expires",wU="isCookieUseDisabled",rk="disableCookiesUsage",_U="_ckMgr",nk=null,Ex=null,ik=null,Pp,SU={},RU={},kU=(Rw={cookieCfg:Voe((kA={},kA[Q5]={fb:"cookieDomain",dfVal:q5},kA.path={fb:"cookiePath",dfVal:q5},kA.enabled=ef,kA.ignoreCookies=ef,kA.blockedCookies=ef,kA)),cookieDomain:ef,cookiePath:ef},Rw[rk]=ef,Rw);function EN(){!Pp&&(Pp=Wn(function(){return bv()}))}s(EN,"_getDoc");function kw(A){return A?A.isEnabled():!0}s(kw,"_isMgrEnabled");function vN(A,v){return v&&A&&tt(A.ignoreCookies)?ud(A.ignoreCookies,v)!==-1:!1}s(vN,"_isIgnoredCookie");function Zoe(A,v){return v&&A&&tt(A.blockedCookies)&&ud(A.blockedCookies,v)!==-1?!0:vN(A,v)}s(Zoe,"_isBlockedCookie");function xN(A,v){var T=v[bp];if(X(T)){var S=void 0;H(A[wU])||(S=!A[wU]),H(A[rk])||(S=!A[rk]),T=S}return T}s(xN,"_isCfgEnabled");function ese(A,v){var T,S,D,L,U,ee,ce,Ce;A=of(A||RU,null,v).cfg,L=vh(A,function(Le){Le.setDf(Le.cfg,kU),T=Le.ref(Le.cfg,"cookieCfg"),S=T[U5]||"/",D=T[Q5],U=xN(A,T)!==!1,ee=T.getCookie||tse,ce=T.setCookie||vx,Ce=T.delCookie||vx},v);var Te={isEnabled:s(function(){var Le=xN(A,T)!==!1&&U&&PU(v),Ke=RU[_U];return Le&&Ke&&Te!==Ke&&(Le=kw(Ke)),Le},"isEnabled"),setEnabled:s(function(Le){U=Le!==!1,T[bp]=Le},"setEnabled"),set:s(function(Le,Ke,Me,je,ut){var rt=!1;if(kw(Te)&&!Zoe(T,Le)){var Ct={},Mt=so(Ke||_i),Yt=dh(Mt,";");if(Yt!==-1&&(Mt=so(O(Ke,Yt)),Ct=bN(ge(Ke,Yt+1))),TA(Ct,Q5,je||D,de,H),!X(Me)){var Ar=c0();if(H(Ct[xh])){var Yn=fA(),Di=Yn+Me*1e3;if(Di>0){var Ni=new Date;Ni.setTime(Di),TA(Ct,xh,BU(Ni,Ar?IU:TU)||BU(Ni,Ar?IU:TU)||_i,de)}}Ar||TA(Ct,"max-age",_i+Me,null,H)}var Bo=ax();Bo&&Bo.protocol==="https:"&&(TA(Ct,"secure",null,null,H),Ex===null&&(Ex=!rse((cA()||{})[S5])),Ex&&TA(Ct,"SameSite","None",null,H)),TA(Ct,U5,ut||S,null,H),ce(Le,DU(Mt,Ct)),rt=!0}return rt},"set"),get:s(function(Le){var Ke=_i;return kw(Te)&&!vN(T,Le)&&(Ke=ee(Le)),Ke},"get"),del:s(function(Le,Ke){var Me=!1;return kw(Te)&&(Me=Te.purge(Le,Ke)),Me},"del"),purge:s(function(Le,Ke){var Me,je=!1;if(PU(v)){var ut=(Me={},Me[U5]=Ke||"/",Me[xh]="Thu, 01 Jan 1970 00:00:01 GMT",Me);c0()||(ut["max-age"]="0"),Ce(Le,DU(_i,ut)),je=!0}return je},"purge"),unload:s(function(Le){L&&L.rm(),L=null},"unload")};return Te[_U]=Te,Te}s(ese,"createCookieMgr");function PU(A){if(nk===null){nk=!1,!Pp&&EN();try{var v=Pp.v||{};nk=v[tk]!==void 0}catch(T){Rr(A,2,68,"Cannot access document.cookie - "+Gc(T),{exception:Ft(T)})}}return nk}s(PU,"areCookiesSupported");function bN(A){var v={};if(A&&A[ni]){var T=so(A)[xA](";");Wr(T,function(S){if(S=so(S||_i),S){var D=dh(S,"=");D===-1?v[S]=null:v[so(O(S,D))]=so(ge(S,D+1))}})}return v}s(bN,"_extractParts");function BU(A,v){return Qe(A[v])?A[v]():null}s(BU,"_formatDate");function DU(A,v){var T=A||_i;return oe(v,function(S,D){T+="; "+S+(X(D)?_i:"="+D)}),T}s(DU,"_formatCookieValue");function tse(A){var v=_i;if(!Pp&&EN(),Pp.v){var T=Pp.v[tk]||_i;ik!==T&&(SU=bN(T),ik=T),v=so(SU[A]||_i)}return v}s(tse,"_getCookieValue");function vx(A,v){!Pp&&EN(),Pp.v&&(Pp.v[tk]=A+"="+v)}s(vx,"_setCookieValue");function rse(A){return he(A)?!!(fl(A,"CPU iPhone OS 12")||fl(A,"iPad; CPU OS 12")||fl(A,"Macintosh; Intel Mac OS X 10_14")&&fl(A,"Version/")&&fl(A,"Safari")||fl(A,"Macintosh; Intel Mac OS X 10_14")&&FQ(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||fl(A,"Chrome/5")||fl(A,"Chrome/6")||fl(A,"UnrealEngine")&&!fl(A,"Chrome")||fl(A,"UCBrowser/12")||fl(A,"UCBrowser/11")):!1}s(rse,"uaDisallowsSameSiteNone");var IN={perfEvtsSendAll:!1};function nse(A){A.h=null;var v=A.cb;A.cb=[],Wr(v,function(T){K(T.fn,[T.arg])})}s(nse,"_runScheduledListeners");function PA(A,v,T,S){Wr(A,function(D){D&&D[v]&&(T?(T.cb[ao]({fn:S,arg:D}),T.h=T.h||hA(nse,0,T)):K(S,[D]))})}s(PA,"_runListeners");var ise=function(){function A(v){this.listeners=[];var T,S,D=[],L={h:null,cb:[]},U=of(v,IN);S=U[mh](function(ee){T=!!ee.cfg.perfEvtsSendAll}),Gl(A,this,function(ee){Ye(ee,"listeners",{g:s(function(){return D},"g")}),ee[I5]=function(ce){D[ao](ce)},ee[fw]=function(ce){for(var Ce=ud(D,ce);Ce>-1;)D[qv](Ce,1),Ce=ud(D,ce)},ee[Zv]=function(ce){PA(D,Zv,L,function(Ce){Ce[Zv](ce)})},ee[ex]=function(ce,Ce){PA(D,ex,L,function(Te){Te[ex](ce,Ce)})},ee[F5]=function(ce,Ce){PA(D,F5,Ce?L:null,function(Te){Te[F5](ce,Ce)})},ee[r1]=function(ce){ce&&(T||!ce[K8]())&&PA(D,r1,null,function(Ce){ce.isAsync?hA(function(){return Ce[r1](ce)},0):Ce[r1](ce)})},ee[eN]=function(ce){ce&&ce[ni]&&PA(D,eN,L,function(Ce){Ce[eN](ce)})},ee[tN]=function(ce){ce&&ce[$v]&&PA(D,tN,L,function(Ce){Ce[tN](ce)})},ee[O5]=function(ce,Ce){if(ce>0){var Te=Ce||0;PA(D,O5,L,function(Le){Le[O5](ce,Te)})}},ee[KC]=function(ce){var Ce=s(function(){S&&S.rm(),S=null,D=[],L.h&&L.h[Hv](),L.h=null,L.cb=[]},"_finishUnload"),Te;if(PA(D,"unload",null,function(Le){var Ke=Le[KC](ce);Ke&&(Te||(Te=[]),Te[ao](Ke))}),Te)return Kv(function(Le){return Zd(Z8(Te),function(){Ce(),Le()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),xx="ctx",TN="ParentContextKey",Pw="ChildrenContextKey",ose=null,ok=function(){function A(v,T,S){var D=this;if(D.start=fA(),D[EA]=v,D.isAsync=S,D[K8]=function(){return!1},Qe(T)){var L;Ye(D,"payload",{g:s(function(){return!L&&Qe(T)&&(L=T(),T=null),L},"g")})}D[IA]=function(U){return U?U===A[TN]||U===A[Pw]?D[U]:(D[xx]||{})[U]:null},D[s0]=function(U,ee){if(U)if(U===A[TN])D[U]||(D[K8]=function(){return!0}),D[U]=ee;else if(U===A[Pw])D[U]=ee;else{var ce=D[xx]=D[xx]||{};ce[U]=ee}},D.complete=function(){var U=0,ee=D[IA](A[Pw]);if(tt(ee))for(var ce=0;ce<ee[ni];ce++){var Ce=ee[ce];Ce&&(U+=Ce.time)}D.time=fA()-D.start,D.exTime=D.time-U,D.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),sse=function(){function A(v){this.ctx={},Gl(A,this,function(T){T.create=function(S,D,L){return new ok(S,D,L)},T.fire=function(S){S&&(S.complete(),v&&Qe(v[r1])&&v[r1](S))},T[s0]=function(S,D){if(S){var L=T[xx]=T[xx]||{};L[S]=D}},T[IA]=function(S){return(T[xx]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),Bp="CoreUtils.doPerf";function bx(A,v,T,S,D){if(A){var L=A;if(L[hw]&&(L=L[hw]()),L){var U=void 0,ee=L[IA](Bp);try{if(U=L.create(v(),S,D),U){if(ee&&U[s0]&&(U[s0](ok[TN],ee),ee[IA]&&ee[s0])){var ce=ee[IA](ok[Pw]);ce||(ce=[],ee[s0](ok[Pw],ce)),ce[ao](U)}return L[s0](Bp,U),T(U)}}catch(Ce){U&&U[s0]&&U[s0]("exception",Ce)}finally{U&&L.fire(U),L[s0](Bp,ee)}}}return T()}s(bx,"doPerf");function Ya(){return ose}s(Ya,"getGblPerfMgr");var sk="00000000000000000000000000000000",Ix="0000000000000000";function ak(A,v,T){return A&&A[ni]===v&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(ak,"_isValid");function BA(A){return ak(A,32,sk)}s(BA,"isValidTraceId");function s1(A){return ak(A,16,Ix)}s(s1,"isValidSpanId");var Bw=dU("plugin");function DA(A){return Bw.get(A,"state",{},!0)}s(DA,"_getPluginState");function wN(A,v){for(var T=[],S=null,D=A[wp](),L;D;){var U=D[Gv]();if(U){S&&S[vA]&&U[tf]&&S[vA](U),L=DA(U);var ee=!!L[xp];U[xp]&&(ee=U[xp]()),ee||T[ao](U),S=U,D=D[wp]()}}Wr(T,function(ce){var Ce=A[za]();ce[dw](A.getCfg(),Ce,v,A[wp]()),L=DA(ce),!ce[za]&&!L[za]&&(L[za]=Ce),L[xp]=!0,delete L[Ip]})}s(wN,"initializePlugins");function _N(A){return A.sort(function(v,T){var S=0;if(T){var D=T[tf];v[tf]?S=D?v[Xv]-T[Xv]:1:D&&(S=-1)}else S=v?1:-1;return S})}s(_N,"sortPlugins");function ase(A){var v={};return{getName:s(function(){return v[EA]},"getName"),setName:s(function(T){A&&A.setName(T),v[EA]=T},"setName"),getTraceId:s(function(){return v.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),BA(T)&&(v.traceId=T)},"setTraceId"),getSpanId:s(function(){return v.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),s1(T)&&(v.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return v[jQ]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),v[jQ]=T},"setTraceFlags")}}s(ase,"createDistributedTraceContext");var cse="TelemetryPluginChain",NU="_hasRun",SN="_getTelCtx",LU=0;function lse(A,v,T){for(;A;){if(A[Gv]()===T)return A;A=A[wp]()}return B([T],v.config||{},v)}s(lse,"_getNextProxyStart");function RN(A,v,T,S){var D=null,L=[];v||(v=of({},null,T[$a])),S!==null&&(D=S?lse(A,T,S):A);var U={_next:ce,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return _w(T,v.cfg)},"diagLog"),getCfg:s(function(){return v.cfg},"getCfg"),getExtCfg:Te,getConfig:Le,hasNext:s(function(){return!!D},"hasNext"),getNext:s(function(){return D},"getNext"),setNext:s(function(Me){D=Me},"setNext"),iterate:Ke,onComplete:ee}};function ee(Me,je){for(var ut=[],rt=2;rt<arguments.length;rt++)ut[rt-2]=arguments[rt];Me&&L[ao]({func:Me,self:H(je)?U.ctx:je,args:ut})}s(ee,"_addOnComplete");function ce(){var Me=D;if(D=Me?Me[wp]():null,!Me){var je=L;je&&je[ni]>0&&(Wr(je,function(ut){try{ut.func.call(ut.self,ut.args)}catch(rt){Rr(T[$a],2,73,"Unexpected Exception during onComplete - "+Ft(rt))}}),L=[])}return Me}s(ce,"_moveNext");function Ce(Me,je){var ut=null,rt=v.cfg;if(rt&&Me){var Ct=rt[t1];!Ct&&je&&(Ct={}),rt[t1]=Ct,Ct=v.ref(rt,t1),Ct&&(ut=Ct[Me],!ut&&je&&(ut={}),Ct[Me]=ut,ut=v.ref(Ct,Me))}return ut}s(Ce,"_getExtCfg");function Te(Me,je){var ut=Ce(Me,!0);return je&&oe(je,function(rt,Ct){if(X(ut[rt])){var Mt=v.cfg[rt];(Mt||!X(Mt))&&(ut[rt]=Mt)}gN(v,ut,rt,Ct)}),v.setDf(ut,je)}s(Te,"_resolveExtCfg");function Le(Me,je,ut){ut===void 0&&(ut=!1);var rt,Ct=Ce(Me,!1),Mt=v.cfg;return Ct&&(Ct[je]||!X(Ct[je]))?rt=Ct[je]:(Mt[je]||!X(Mt[je]))&&(rt=Mt[je]),rt||!X(rt)?rt:ut}s(Le,"_getConfig");function Ke(Me){for(var je;je=U._next();){var ut=je[Gv]();ut&&Me(ut)}}return s(Ke,"_iterateChain"),U}s(RN,"_createInternalContext");function Tx(A,v,T,S){var D=of(v),L=RN(A,D,T,S),U=L.ctx;function ee(Ce){var Te=L._next();return Te&&Te[tf](Ce,U),!Te}s(ee,"_processNext");function ce(Ce,Te){return Ce===void 0&&(Ce=null),tt(Ce)&&(Ce=B(Ce,D.cfg,T,Te)),Tx(Ce||U[wp](),D.cfg,T,Te)}return s(ce,"_createNew"),U[dl]=ee,U[JC]=ce,U}s(Tx,"createProcessTelemetryContext");function w(A,v,T){var S=of(v.config),D=RN(A,S,v,T),L=D.ctx;function U(ce){var Ce=D._next();return Ce&&Ce[KC](L,ce),!Ce}s(U,"_processNext");function ee(ce,Ce){return ce===void 0&&(ce=null),tt(ce)&&(ce=B(ce,S.cfg,v,Ce)),w(ce||L[wp](),v,Ce)}return s(ee,"_createNew"),L[dl]=U,L[JC]=ee,L}s(w,"createProcessTelemetryUnloadContext");function R(A,v,T){var S=of(v.config),D=RN(A,S,v,T),L=D.ctx;function U(ce){return L.iterate(function(Ce){Qe(Ce[hh])&&Ce[hh](L,ce)})}s(U,"_processNext");function ee(ce,Ce){return ce===void 0&&(ce=null),tt(ce)&&(ce=B(ce,S.cfg,v,Ce)),R(ce||L[wp](),v,Ce)}return s(ee,"_createNew"),L[dl]=U,L[JC]=ee,L}s(R,"createProcessTelemetryUpdateContext");function B(A,v,T,S){var D=null,L=!S;if(tt(A)&&A[ni]>0){var U=null;Wr(A,function(ee){if(!L&&S===ee&&(L=!0),L&&ee&&Qe(ee[tf])){var ce=F(ee,v,T);D||(D=ce),U&&U._setNext(ce),U=ce}})}return S&&!D?B([S],v,T):D}s(B,"createTelemetryProxyChain");function F(A,v,T){var S=null,D=Qe(A[tf]),L=Qe(A[vA]),U;A?U=A[CA]+"-"+A[Xv]+"-"+LU++:U="Unknown-0-"+LU++;var ee={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Le,update:Ke,_id:U,_setNext:s(function(Me){S=Me},"_setNext")};function ce(){var Me;return A&&Qe(A[SN])&&(Me=A[SN]()),Me||(Me=Tx(ee,v,T)),Me}s(ce,"_getTelCtx");function Ce(Me,je,ut,rt,Ct){var Mt=!1,Yt=A?A[CA]:cse,Ar=Me[NU];return Ar||(Ar=Me[NU]={}),Me.setNext(S),A&&bx(Me[za](),function(){return Yt+":"+ut},function(){Ar[U]=!0;try{var Yn=S?S._id:_i;Yn&&(Ar[Yn]=!1),Mt=je(Me)}catch(Ni){var Di=S?Ar[S._id]:!0;Di&&(Mt=!0),(!S||!Di)&&Rr(Me[Tp](),1,73,"Plugin ["+Yt+"] failed during "+ut+" - "+Ft(Ni)+", run flags: "+Ft(Ar))}},rt,Ct),Mt}s(Ce,"_processChain");function Te(Me,je){je=je||ce();function ut(rt){if(!A||!D)return!1;var Ct=DA(A);return Ct[Ip]||Ct[M5]?!1:(L&&A[vA](S),A[tf](Me,rt),!0)}s(ut,"_callProcessTelemetry"),Ce(je,ut,"processTelemetry",function(){return{item:Me}},!Me.sync)||je[dl](Me)}s(Te,"_processTelemetry");function Le(Me,je){function ut(){var rt=!1;if(A){var Ct=DA(A),Mt=A[za]||Ct[za];A&&(!Mt||Mt===Me.core())&&!Ct[Ip]&&(Ct[za]=null,Ct[Ip]=!0,Ct[xp]=!1,A[Ip]&&A[Ip](Me,je)===!0&&(rt=!0))}return rt}s(ut,"_callTeardown"),Ce(Me,ut,"unload",function(){},je.isAsync)||Me[dl](je)}s(Le,"_unloadPlugin");function Ke(Me,je){function ut(){var rt=!1;if(A){var Ct=DA(A),Mt=A[za]||Ct[za];A&&(!Mt||Mt===Me.core())&&!Ct[Ip]&&A[hh]&&A[hh](Me,je)===!0&&(rt=!0)}return rt}s(ut,"_callUpdate"),Ce(Me,ut,"update",function(){},!1)||Me[dl](je)}return s(Ke,"_updatePlugin"),Vt(ee)}s(F,"createTelemetryPluginProxy");function ae(){var A=[];function v(S){S&&A[ao](S)}s(v,"_addHandler");function T(S,D){Wr(A,function(L){try{L(S,D)}catch(U){Rr(S[Tp](),2,73,"Unexpected error calling unload handler - "+Ft(U))}}),A=[]}return s(T,"_runHandlers"),{add:v,run:T}}s(ae,"createUnloadHandlerContainer");function be(){var A=[];function v(S){var D=A;A=[],Wr(D,function(L){try{(L.rm||L.remove).call(L)}catch(U){Rr(S,2,73,"Unloading:"+Ft(U))}})}s(v,"_doUnload");function T(S){S&&Tv(A,S)}return s(T,"_addHook"),{run:v,add:T}}s(be,"createUnloadHookContainer");var we,Oe="getPlugin",Ze=(we={},we[t1]={isVal:q5,v:{}},we),gt=function(){function A(){var v=this,T,S,D,L,U;Ce(),Gl(A,v,function(Te){Te[dw]=function(Le,Ke,Me,je){ce(Le,Ke,je),T=!0},Te[Ip]=function(Le,Ke){var Me=Te[za];if(!Me||Le&&Me!==Le[za]())return;var je,ut=!1,rt=Le||w(null,Me,D&&D[Oe]?D[Oe]():D),Ct=Ke||{reason:0,isAsync:!1};function Mt(){ut||(ut=!0,L.run(rt,Ke),U.run(rt[Tp]()),je===!0&&rt[dl](Ct),Ce())}return s(Mt,"_unloadCallback"),!Te[_5]||Te[_5](rt,Ct,Mt)!==!0?Mt():je=!0,je},Te[hh]=function(Le,Ke){var Me=Te[za];if(!Me||Le&&Me!==Le[za]())return;var je,ut=!1,rt=Le||R(null,Me,D&&D[Oe]?D[Oe]():D),Ct=Ke||{reason:0};function Mt(){ut||(ut=!0,ce(rt.getCfg(),rt.core(),rt[wp]()))}return s(Mt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(rt,Ct,Mt)!==!0?Mt():je=!0,je},Aw(Te,"_addUnloadCb",function(){return L},"add"),Aw(Te,"_addHook",function(){return U},"add"),Ye(Te,"_unloadHooks",{g:s(function(){return U},"g")})}),v[Tp]=function(Te){return ee(Te)[Tp]()},v[xp]=function(){return T},v.setInitialized=function(Te){T=Te},v[vA]=function(Te){D=Te},v[dl]=function(Te,Le){Le?Le[dl](Te):D&&Qe(D[tf])&&D[tf](Te,null)},v._getTelCtx=ee;function ee(Te){Te===void 0&&(Te=null);var Le=Te;if(!Le){var Ke=S||Tx(null,{},v[za]);D&&D[Oe]?Le=Ke[JC](null,D[Oe]):Le=Ke[JC](null,D)}return Le}s(ee,"_getTelCtx");function ce(Te,Le,Ke){of(Te,Ze,_w(Le)),!Ke&&Le&&(Ke=Le[jv]()[wp]());var Me=D;D&&D[Oe]&&(Me=D[Oe]()),v[za]=Le,S=Tx(Ke,Te,Le,Me)}s(ce,"_setDefaults");function Ce(){T=!1,v[za]=null,S=null,D=null,U=be(),L=ae()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function sr(A,v,T){var S={id:v,fn:T};Tv(A,S);var D={remove:s(function(){Wr(A,function(L,U){if(L.id===S.id)return A[qv](U,1),-1})},"remove")};return D}s(sr,"_addInitializer");function Rn(A,v,T){for(var S=!1,D=A[ni],L=0;L<D;++L){var U=A[L];if(U)try{if(U.fn[b5](null,[v])===!1){S=!0;break}}catch(ee){Rr(T,2,64,"Telemetry initializer failed: "+Gc(ee),{exception:Ft(ee)},!0)}}return!S}s(Rn,"_runInitializers");var zn=function(A){uw(v,A);function v(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,D;L(),Gl(v,T,function(U,ee){U.addTelemetryInitializer=function(ce){return sr(D,S++,ce)},U[tf]=function(ce,Ce){Rn(D,ce,Ce?Ce[Tp]():U[Tp]())&&U[dl](ce,Ce)},U[_5]=function(){L()}});function L(){S=0,D=[]}return s(L,"_initDefaults"),T}return s(v,"TelemetryInitializerPlugin"),v.__ieDyn=1,v}(gt),fr,wr="Plugins must provide initialize method",Gn="_notificationManager",kn="SDK is still unloading...",Si="SDK is not initialized",xo=100,ji=5e4,Ac=Zt((fr={cookieCfg:{}},fr[Jv]={rdOnly:!0,ref:!0,v:[]},fr[yh]={rdOnly:!0,ref:!0,v:[]},fr[t1]={ref:!0,v:{}},fr[a0]=ef,fr.loggingLevelConsole=0,fr.diagnosticLogInterval=ef,fr));function wx(A,v){return new sse(v)}s(wx,"_createPerfManager");function Dw(A,v,T){var S=[],D=[],L={};return Wr(T,function(U){(X(U)||X(U[dw]))&&zr(wr);var ee=U[Xv],ce=U[CA];U&&ee&&(X(L[ee])?L[ee]=ce:ek(A,"Two extensions have same priority #"+ee+" - "+L[ee]+", "+ce)),!ee||ee<v?S[ao](U):D[ao](U)}),{core:S,channels:D}}s(Dw,"_validateExtensions");function kN(A,v){var T=!1;return Wr(v,function(S){if(S===A)return T=!0,-1}),T}s(kN,"_isPluginPresent");function ck(A,v,T,S){T&&oe(T,function(D,L){S&&dd(L)&&dd(v[D])&&ck(A,v[D],L,S),S&&dd(L)&&dd(v[D])?ck(A,v[D],L,S):A.set(v,D,L)})}s(ck,"_deepMergeConfig");function MU(A,v){var T=null,S=-1;return Wr(A,function(D,L){if(D.w===v)return T=D,S=L,-1}),{i:S,l:T}}s(MU,"_findWatcher");function use(A,v){var T=MU(A,v).l;return T||(T={w:v,rm:s(function(){var S=MU(A,v);S.i!==-1&&A[qv](S.i,1)},"rm")},A[ao](T)),T}s(use,"_addDelayedCfgListener");function PN(A,v,T){Wr(v,function(S){var D=vh(A,S.w,T);delete S.w,S.rm=function(){D.rm()}})}s(PN,"_registerDelayedCfgListener");function FU(A,v,T,S){return v.add(A[mh](function(D){var L=D.cfg.disableDbgExt;L===!0&&S&&(T[fw](S),S=null),T&&!S&&L!==!0&&(S=Yoe(D.cfg),T[I5](S))})),S}s(FU,"_initDebugListener");function OU(A){return Ye({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(OU,"_createUnloadHook");var _t=function(){function A(){var v,T,S,D,L,U,ee,ce,Ce,Te,Le,Ke,Me,je,ut,rt,Ct,Mt,Yt,Ar,Yn,Di,Ni,Bo,yn,Ur,Li,ea,ss,Ot,qr,bo;Gl(A,this,function(Tt){ct(),Tt._getDbgPlgTargets=function(){return[Ni,D]},Tt[xp]=function(){return T},Tt.activeStatus=function(){return Ur},Tt._setPendingStatus=function(){Ur=3},Tt[dw]=function(pt,mr,Fn,Nr){Me&&zr(kn),Tt[xp]()&&zr("Core cannot be initialized more than once"),v=of(pt,Ac,Fn||Tt[$a],!1),pt=v.cfg,$l(v[mh](function(Ho){var Rs=Ho.cfg,Pu=Ur===3;if(!Pu){ea=Rs.initInMemoMaxSize||xo;var sf=Rs.instrumentationKey,Th=Rs.endpointUrl;if(X(sf)){Yn=null,Ur=yA.INACTIVE;var wh="Please provide instrumentation key";T?(Rr(S,1,100,wh),Ea()):zr(wh);return}var vk=[];if(It(sf)?(vk[ao](sf),Yn=null):Yn=sf,It(Th)?(vk[ao](Th),Li=null):Li=Th,vk[ni]){ss=!1,Ur=3;var JN=q5(Rs.initTimeOut)?Rs.initTimeOut:ji,Hse=fd(vk);hA(function(){ss||Pn()},JN),Zd(Hse,function(Fx){try{if(ss)return;if(!Fx.rejected){var Ox=Fx[Wv];if(Ox&&Ox[ni]){var cq=Ox[0];if(Yn=cq&&cq[Wv],Ox[ni]>1){var lq=Ox[1];Li=lq&&lq[Wv]}}Yn&&(pt.instrumentationKey=Yn,pt.endpointUrl=Li)}Pn()}catch{ss||Pn()}})}else Pn();var xk=Ho.ref(Ho.cfg,t1);oe(xk,function(Fx){Ho.ref(xk,Fx)})}})),L=Nr,Yt=FU(v,Mt,L&&Tt[o0](),Yt),Lx(),Tt[$a]=Fn;var On=pt[Jv];if(Te=[],Te[ao].apply(Te,qQ(qQ([],mr,!1),On)),Le=pt[yh],va(null),(!Ke||Ke[ni]===0)&&zr("No "+yh+" available"),Le&&Le[ni]>1){var Oo=Tt[Gv]("TeeChannelController");(!Oo||!Oo.plugin)&&Rr(S,1,28,"TeeChannel required")}PN(pt,Di,S),Di=null,T=!0,Ur===yA.ACTIVE&&Ea()},Tt.getChannels=function(){var pt=[];return Ke&&Wr(Ke,function(mr){pt[ao](mr)}),Vt(pt)},Tt.track=function(pt){bx(Tt[hw](),function(){return"AppInsightsCore:track"},function(){pt===null&&(ta(pt),zr("Invalid telemetry item")),!pt[EA]&&X(pt[EA])&&(ta(pt),zr("telemetry name required")),pt.iKey=pt.iKey||Yn,pt.time=pt.time||gw(new Date),pt.ver=pt.ver||"4.0",!Me&&Tt[xp]()&&Ur===yA.ACTIVE?Ec()[dl](pt):Ur!==yA.INACTIVE&&D[ni]<=ea&&D[ao](pt)},function(){return{item:pt}},!pt.sync)},Tt[jv]=Ec,Tt[o0]=function(){return L||(L=new ise(v.cfg),Tt[Gn]=L),L},Tt[I5]=function(pt){Tt.getNotifyMgr()[I5](pt)},Tt[fw]=function(pt){L&&L[fw](pt)},Tt.getCookieMgr=function(){return ce||(ce=ese(v.cfg,Tt[$a])),ce},Tt.setCookieMgr=function(pt){ce!==pt&&(Ax(ce,!1),ce=pt)},Tt[hw]=function(){return U||ee||Ya()},Tt.setPerfMgr=function(pt){U=pt},Tt.eventCnt=function(){return D[ni]},Tt.releaseQueue=function(){if(T&&D[ni]>0){var pt=D;D=[],Ur===2?Wr(pt,function(mr){mr.iKey=mr.iKey||Yn,Ec()[dl](mr)}):Rr(S,2,20,"core init status is not active")}},Tt.pollInternalLogs=function(pt){return ut=pt||null,bo=!1,Ot&&Ot[Hv](),Do(!0)};function Pn(){ss=!0,X(Yn)?(Ur=yA.INACTIVE,Rr(S,1,112,"ikey can't be resolved from promises")):Ur=yA.ACTIVE,Ea()}s(Pn,"_setStatus");function Ea(){T&&(Tt.releaseQueue(),Tt.pollInternalLogs())}s(Ea,"_releaseQueues");function Do(pt){if((!Ot||!Ot[bp])&&!bo){var mr=pt||S&&S.queue[ni]>0;mr&&(qr||(qr=!0,$l(v[mh](function(Fn){var Nr=Fn.cfg.diagnosticLogInterval;(!Nr||!(Nr>0))&&(Nr=1e4);var On=!1;Ot&&(On=Ot[bp],Ot[Hv]()),Ot=g5(Nx,Nr),Ot.unref(),Ot[bp]=On}))),Ot[bp]=!0)}return Ot}s(Do,"_startLogPoller"),Tt[HQ]=function(){bo=!0,Ot&&Ot[Hv](),Nx()},nN(Tt,function(){return je},["addTelemetryInitializer"]),Tt[KC]=function(pt,mr,Fn){pt===void 0&&(pt=!0),T||zr(Si),Me&&zr(kn);var Nr={reason:50,isAsync:pt,flushComplete:!1},On;pt&&!mr&&(On=Kv(function(Rs){mr=Rs}));var Oo=w(Np(),Tt);Oo[T5](function(){Mt.run(Tt[$a]),CU([ce,L,S],pt,function(){ct(),mr&&mr(Nr)})},Tt);function Ho(Rs){Nr.flushComplete=Rs,Me=!0,Ct.run(Oo,Nr),Tt[HQ](),Oo[dl](Nr)}return s(Ho,"_doUnload"),Nx(),bh(pt,Ho,6,Fn),On},Tt[Gv]=gl,Tt.addPlugin=function(pt,mr,Fn,Nr){if(!pt){Nr&&Nr(!1),Mx(wr);return}var On=gl(pt[CA]);if(On&&!mr){Nr&&Nr(!1),Mx("Plugin ["+pt[CA]+"] is already loaded!");return}var Oo={reason:16};function Ho(sf){Te[ao](pt),Oo.added=[pt],va(Oo),Nr&&Nr(!0)}if(s(Ho,"_addPlugin"),On){var Rs=[On.plugin],Pu={reason:2,isAsync:!!Fn};hd(Rs,Pu,function(sf){sf?(Oo.removed=Rs,Oo.reason|=32,Ho()):Nr&&Nr(!1)})}else Ho()},Tt.updateCfg=function(pt,mr){mr===void 0&&(mr=!0);var Fn;if(Tt[xp]()){Fn={reason:1,cfg:v.cfg,oldCfg:d5({},v.cfg),newConfig:d5({},pt),merge:mr},pt=Fn.newConfig;var Nr=v.cfg;pt[Jv]=Nr[Jv],pt[yh]=Nr[yh]}v._block(function(On){var Oo=On.cfg;ck(On,Oo,pt,mr),mr||oe(Oo,function(Ho){nt(pt,Ho)||On.set(Oo,Ho,ef)}),On.setDf(Oo,Ac)},!0),v.notify(),Fn&&Ih(Fn)},Tt.evtNamespace=function(){return rt},Tt.flush=bh,Tt.getTraceCtx=function(pt){return Ar||(Ar=ase()),Ar},Tt.setTraceCtx=function(pt){Ar=pt||null},Tt.addUnloadHook=$l,Aw(Tt,"addUnloadCb",function(){return Ct},"add"),Tt.onCfgChange=function(pt){var mr;return T?mr=vh(v.cfg,pt,Tt[$a]):mr=use(Di,pt),OU(mr)},Tt.getWParam=function(){return aA()||v.cfg.enableWParam?0:-1};function hl(){var pt={};Bo=[];var mr=s(function(Fn){Fn&&Wr(Fn,function(Nr){if(Nr[CA]&&Nr[Vv]&&!pt[Nr.identifier]){var On=Nr[CA]+"="+Nr[Vv];Bo[ao](On),pt[Nr.identifier]=Nr}})},"_addPluginVersions");mr(Ke),Le&&Wr(Le,function(Fn){mr(Fn)}),mr(Te)}s(hl,"_setPluginVersions");function ct(){T=!1,v=of({},Ac,Tt[$a]),v.cfg[WQ]=1,Ye(Tt,"config",{g:s(function(){return v.cfg},"g"),s:s(function(mr){Tt.updateCfg(mr,!1)},"s")}),Ye(Tt,"pluginVersionStringArr",{g:s(function(){return Bo||hl(),Bo},"g")}),Ye(Tt,"pluginVersionString",{g:s(function(){return yn||(Bo||hl(),yn=Bo.join(";")),yn||_i},"g")}),Ye(Tt,"logger",{g:s(function(){return S||(S=new Sw(v.cfg),v[$a]=S),S},"g"),s:s(function(mr){v[$a]=mr,S!==mr&&(Ax(S,!1),S=mr)},"s")}),Tt[$a]=new Sw(v.cfg),Ni=[];var pt=Tt.config[Jv]||[];pt.splice(0,pt[ni]),Tv(pt,Ni),je=new zn,D=[],Ax(L,!1),L=null,U=null,ee=null,Ax(ce,!1),ce=null,Ce=null,Te=[],Le=null,Ke=null,Me=!1,ut=null,rt=Eh("AIBaseCore",!0),Ct=ae(),Ar=null,Yn=null,Mt=be(),Di=[],yn=null,Bo=null,bo=!1,Ot=null,qr=!1,Ur=0,Li=null,ea=null,ss=!1}s(ct,"_initDefaults");function Ec(){var pt=Tx(Np(),v.cfg,Tt);return pt[T5](Do),pt}s(Ec,"_createTelCtx");function va(pt){var mr=Dw(Tt[$a],Goe,Te);Ce=null,yn=null,Bo=null,Ke=(Le||[])[0]||[],Ke=_N(Tv(Ke,mr[yh]));var Fn=Tv(_N(mr[za]),Ke);Ni=Vt(Fn);var Nr=Tt.config[Jv]||[];Nr.splice(0,Nr[ni]),Tv(Nr,Ni);var On=Ec();Ke&&Ke[ni]>0&&wN(On[JC](Ke),Fn),wN(On,Fn),pt&&Ih(pt)}s(va,"_initPluginChain");function gl(pt){var mr=null,Fn=null,Nr=[];return Wr(Ni,function(On){if(On[CA]===pt&&On!==je)return Fn=On,-1;On.getChannel&&Nr[ao](On)}),!Fn&&Nr[ni]>0&&Wr(Nr,function(On){if(Fn=On.getChannel(pt),!Fn)return-1}),Fn&&(mr={plugin:Fn,setEnabled:s(function(On){DA(Fn)[M5]=!On},"setEnabled"),isEnabled:s(function(){var On=DA(Fn);return!On[Ip]&&!On[M5]},"isEnabled"),remove:s(function(On,Oo){On===void 0&&(On=!0);var Ho=[Fn],Rs={reason:1,isAsync:On};hd(Ho,Rs,function(Pu){Pu&&va({reason:32,removed:Ho}),Oo&&Oo(Pu)})},"remove")}),mr}s(gl,"_getPlugin");function Np(){if(!Ce){var pt=(Ni||[]).slice();ud(pt,je)===-1&&pt[ao](je),Ce=B(_N(pt),v.cfg,Tt)}return Ce}s(Np,"_getPluginChain");function hd(pt,mr,Fn){if(pt&&pt[ni]>0){var Nr=B(pt,v.cfg,Tt),On=w(Nr,Tt);On[T5](function(){var Oo=!1,Ho=[];Wr(Te,function(Pu,sf){kN(Pu,pt)?Oo=!0:Ho[ao](Pu)}),Te=Ho,yn=null,Bo=null;var Rs=[];Le&&(Wr(Le,function(Pu,sf){var Th=[];Wr(Pu,function(wh){kN(wh,pt)?Oo=!0:Th[ao](wh)}),Rs[ao](Th)}),Le=Rs),Fn&&Fn(Oo),Do()}),On[dl](mr)}else Fn(!1)}s(hd,"_removePlugins");function Nx(){if(S&&S.queue){var pt=S.queue.slice(0);S.queue[ni]=0,Wr(pt,function(mr){var Fn={name:ut||"InternalMessageId: "+mr[w5],iKey:Yn,time:gw(new Date),baseType:Z5.dataType,baseData:{message:mr[XC]}};Tt.track(Fn)})}}s(Nx,"_flushInternalLogs");function bh(pt,mr,Fn,Nr){var On=1,Oo=!1,Ho=null;Nr=Nr||5e3;function Rs(){On--,Oo&&On===0&&(Ho&&Ho[Hv](),Ho=null,mr&&mr(Oo),mr=null)}if(s(Rs,"doCallback"),Ke&&Ke[ni]>0){var Pu=Ec()[JC](Ke);Pu.iterate(function(sf){if(sf.flush){On++;var Th=!1;sf.flush(pt,function(){Th=!0,Rs()},Fn)||Th||(pt&&Ho==null?Ho=hA(function(){Ho=null,Rs()},Nr):Rs())}})}return Oo=!0,Rs(),!0}s(bh,"_flushChannels");function Lx(){var pt;$l(v[mh](function(mr){var Fn=mr.cfg.enablePerfMgr;if(Fn){var Nr=mr.cfg[a0];(pt!==Nr||!pt)&&(Nr||(Nr=wx),rU(mr.cfg,a0,Nr),pt=Nr,ee=null),!U&&!ee&&Qe(Nr)&&(ee=Nr(Tt,Tt[o0]()))}else ee=null,pt=null}))}s(Lx,"_initPerfManager");function Ih(pt){var mr=R(Np(),Tt);mr[T5](Do),(!Tt._updateHook||Tt._updateHook(mr,pt)!==!0)&&mr[dl](pt)}s(Ih,"_doUpdate");function Mx(pt){var mr=Tt[$a];mr?(Rr(mr,2,73,pt),Do()):zr(pt)}s(Mx,"_logOrThrowError");function ta(pt){var mr=Tt[o0]();mr&&mr[ex]([pt],2)}s(ta,"_notifyInvalidEvent");function $l(pt){Mt.add(pt)}s($l,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function Dr(A,v){try{if(A&&A!==""){var T=pd().parse(A);if(T&&T[GQ]&&T[GQ]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[ni])return T}}catch(S){Rr(v,1,43,"Cannot parse the response. "+(S[EA]||Ft(S)),{response:A})}return null}s(Dr,"parseResponse");var ln="",Zo="NoResponseBody",yc="&"+Zo+"=true",Ca="POST",Cc=function(){function A(){var v=0,T,S,D,L,U,ee,ce,Ce,Te,Le,Ke,Me,je,ut;Gl(A,this,function(rt,Ct){var Mt=!0;ss(),rt[dw]=function(Ot,qr){D=qr,S&&Rr(D,1,28,"Sender is already initialized"),rt.SetConfig(Ot),S=!0},rt._getDbgPlgTargets=function(){return[S,L,ee,T]},rt.SetConfig=function(Ot){try{if(U=Ot.senderOnCompleteCallBack||{},ee=!!Ot.disableCredentials,ce=Ot.fetchCredentials,L=!!Ot.isOneDs,T=!!Ot.enableSendPromise,Te=!!Ot.disableXhr,Le=!!Ot.disableBeacon,Ke=!!Ot.disableBeaconSync,ut=Ot.timeWrapper,je=!!Ot.addNoResponse,Me=!!Ot.disableFetchKeepAlive,Ce={sendPOST:Ur},L||(Mt=!1),ee){var qr=ax();qr&&qr.protocol&&qr.protocol[Qv]()==="file:"&&(Mt=!1)}return!0}catch{}return!1},rt.getSyncFetchPayload=function(){return v},rt.getSenderInst=function(Ot,qr){return Ot&&Ot[ni]?Di(Ot,qr):null},rt.getFallbackInst=function(){return Ce},rt[_5]=function(Ot,qr){ss()};function Yt(Ot,qr){Ni(qr,200,{},Ot)}s(Yt,"_onSuccess");function Ar(Ot,qr){Rr(D,2,26,"Failed to send telemetry.",{message:Ot}),Ni(qr,400,{})}s(Ar,"_onError");function Yn(Ot){Ar("No endpoint url is provided for the batch",Ot)}s(Yn,"_onNoPayloadUrl");function Di(Ot,qr){for(var bo=0,Tt=null,Pn=0;Tt==null&&Pn<Ot[ni];)bo=Ot[Pn],!Te&&bo===1?uN()?Tt=ea:dN()&&(Tt=Ur):bo===2&&xw(qr)&&(!qr||!Me)?Tt=Li:bo===3&&_A()&&(qr?!Ke:!Le)&&(Tt=yn),Pn++;return Tt?{_transport:bo,_isSync:qr,sendPOST:Tt}:null}s(Di,"_getSenderInterface");function Ni(Ot,qr,bo,Tt){try{Ot&&Ot(qr,bo,Tt)}catch{}}s(Ni,"_doOnComplete");function Bo(Ot,qr){var bo=cA(),Tt=Ot[gh];if(!Tt)return Yn(qr),!0;Tt=Ot[gh]+(je?yc:ln);var Pn=Ot[$v],Ea=L?Pn:new Blob([Pn],{type:"text/plain;charset=UTF-8"}),Do=bo.sendBeacon(Tt,Ea);return Do}s(Bo,"_doBeaconSend");function yn(Ot,qr,bo){var Tt=Ot[$v];try{if(Tt)if(Bo(Ot,qr))Yt(ln,qr);else{var Pn=U&&U.beaconOnRetry;Pn&&Qe(Pn)?Pn(Ot,qr,Bo):(Ce&&Ce.sendPOST(Ot,qr,!0),Rr(D,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ea){L&&ek(D,"Failed to send telemetry using sendBeacon API. Ex:"+Ft(Ea)),Ni(qr,L?0:400,{},ln)}}s(yn,"_beaconSender");function Ur(Ot,qr,bo){var Tt,Pn,Ea,Do=Ot[J8]||{};!bo&&T&&(Tt=Kv(function(va,gl){Pn=va,Ea=gl})),L&&bo&&Ot.disableXhrSync&&(bo=!1);var hl=Ot[gh];if(!hl){Yn(qr),Pn&&Pn(!1);return}var ct=sN(Ca,hl,Mt,!0,bo,Ot[Ah]);L||ct.setRequestHeader("Content-type","application/json"),Wr(Et(Do),function(va){ct.setRequestHeader(va,Do[va])}),ct.onreadystatechange=function(){L||(Ec(ct),ct.readyState===4&&Pn&&Pn(!0))},ct.onload=function(){L&&Ec(ct)};function Ec(va){var gl=U&&U.xhrOnComplete,Np=gl&&Qe(gl);if(Np)gl(va,qr,Ot);else{var hd=H5(va);Ni(qr,va[pw],i1(va,L),hd)}}return s(Ec,"_doOnReadyFunc"),ct.onerror=function(va){Ni(qr,L?ct[pw]:400,i1(ct,L),L?ln:W5(ct)),Ea&&Ea(va)},ct.ontimeout=function(){Ni(qr,L?ct[pw]:500,i1(ct,L),L?ln:W5(ct)),Pn&&Pn(!1)},ct.send(Ot[$v]),Tt}s(Ur,"_xhrSender");function Li(Ot,qr,bo){var Tt,Pn=Ot[gh],Ea=Ot[$v],Do=L?Ea:new Blob([Ea],{type:"application/json"}),hl,ct,Ec,va=new Headers,gl=Ea[ni],Np=!1,hd=!1,Nx=Ot[J8]||{},bh=(Tt={method:Ca,body:Do},Tt[EU]=!0,Tt);Ot.headers&&Et(Ot.headers)[ni]>0&&(Wr(Et(Nx),function(ta){va.append(ta,Nx[ta])}),bh[J8]=va),ce?bh.credentials=ce:Mt&&L&&(bh.credentials="include"),bo&&(bh.keepalive=!0,v+=gl,L?Ot._sendReason===2&&(Np=!0,je&&(Pn+=yc)):Np=!0);var Lx=new Request(Pn,bh);try{Lx[EU]=!0}catch{}if(!bo&&T&&(hl=Kv(function(ta,$l){ct=ta,Ec=$l})),!Pn){Yn(qr),ct&&ct(!1);return}function Ih(ta){Ni(qr,L?0:400,{},L?ln:ta)}s(Ih,"_handleError");function Mx(ta,$l,pt){var mr=ta[pw],Fn=U.fetchOnComplete;Fn&&Qe(Fn)?Fn(ta,qr,pt||ln,$l):Ni(qr,mr,{},pt||ln)}s(Mx,"_onFetchComplete");try{Zd(fetch(L?Pn:Lx,L?bh:null),function(ta){if(bo&&(v-=gl,gl=0),!hd)if(hd=!0,ta.rejected)Ih(ta.reason&&ta.reason[XC]),Ec&&Ec(ta.reason);else{var $l=ta[Wv];try{!L&&!$l.ok?(Ih($l.statusText),ct&&ct(!1)):L&&!$l.body?(Mx($l,null,ln),ct&&ct(!0)):Zd($l.text(),function(pt){Mx($l,Ot,pt[Wv]),ct&&ct(!0)})}catch(pt){Ih(Ft(pt)),Ec&&Ec(pt)}}})}catch(ta){hd||(Ih(Ft(ta)),Ec&&Ec(ta))}return Np&&!hd&&(hd=!0,Ni(qr,200,{}),ct&&ct(!0)),L&&!hd&&Ot[Ah]>0&&ut&&ut.set(function(){hd||(hd=!0,Ni(qr,500,{}),ct&&ct(!0))},Ot[Ah]),hl}s(Li,"_doFetchSender");function ea(Ot,qr,bo){var Tt=uh(),Pn=new XDomainRequest,Ea=Ot[$v];Pn.onload=function(){var va=H5(Pn),gl=U&&U.xdrOnComplete;gl&&Qe(gl)?gl(Pn,qr,Ot):Ni(qr,200,{},va)},Pn.onerror=function(){Ni(qr,400,{},L?ln:iU(Pn))},Pn.ontimeout=function(){Ni(qr,500,{})},Pn.onprogress=function(){};var Do=Tt&&Tt.location&&Tt.location.protocol||"",hl=Ot[gh];if(!hl){Yn(qr);return}if(!L&&hl.lastIndexOf(Do,0)!==0){var ct="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Rr(D,2,40,". "+ct),Ar(ct,qr);return}var Ec=L?hl:hl[bA](/^(https?:)/,"");Pn.open(Ca,Ec),Ot[Ah]&&(Pn[Ah]=Ot[Ah]),Pn.send(Ea),L&&bo?ut&&ut.set(function(){Pn.send(Ea)},0):Pn.send(Ea)}s(ea,"_xdrSender");function ss(){v=0,S=!1,T=!1,D=null,L=null,U=null,ee=null,ce=null,Ce=null,Te=!1,Le=!1,Ke=!1,Me=!1,je=!1,ut=null}s(ss,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),a1="on",NA="attachEvent",_x="addEventListener",QU="detachEvent",UU="removeEventListener",lk="events";Eh("aiEvtPageHide"),Eh("aiEvtPageShow");var dse=/\.[\.]+/g,x_e=/[\.]+$/,Npt=1,qU=dU("events"),Lpt=/^([^.]*)(?:\.(.+)|)/;function b_e(A){return A&&A[bA]?A[bA](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,_i):A}s(b_e,"_normalizeNamespace");function fse(A,v){if(v){var T=_i;tt(v)?(T=_i,Wr(v,function(D){D=b_e(D),D&&(D[0]!=="."&&(D="."+D),T+=D)})):T=b_e(v),T&&(T[0]!=="."&&(T="."+T),A=(A||_i)+T)}var S=Lpt.exec(A||_i)||[];return{type:S[1],ns:(S[2]||_i).replace(dse,".").replace(x_e,_i)[xA](".").sort().join(".")}}s(fse,"_getEvtNamespace");function I_e(A,v,T){T===void 0&&(T=!0);var S=qU.get(A,lk,{},T),D=S[v];return D||(D=S[v]=[]),D}s(I_e,"_getRegisteredEvents");function T_e(A,v,T,S){A&&v&&v[jl]&&(A[UU]?A[UU](v[jl],T,S):A[QU]&&A[QU](a1+v[jl],T))}s(T_e,"_doDetach");function Mpt(A,v,T,S){var D=!1;return A&&v&&v[jl]&&T&&(A[_x]?(A[_x](v[jl],T,S),D=!0):A[NA]&&(A[NA](a1+v[jl],T),D=!0)),D}s(Mpt,"_doAttach");function w_e(A,v,T,S){for(var D=v[ni];D--;){var L=v[D];L&&(!T.ns||T.ns===L[z8].ns)&&(!S||S(L))&&(T_e(A,L[z8],L.handler,L.capture),v[qv](D,1))}}s(w_e,"_doUnregister");function Fpt(A,v,T){if(v[jl])w_e(A,I_e(A,v[jl]),v,T);else{var S=qU.get(A,lk,{});oe(S,function(D,L){w_e(A,L,v,T)}),Et(S)[ni]===0&&qU.kill(A,lk)}}s(Fpt,"_unregisterEvents");function __e(A,v){var T;return v?(tt(v)?T=[A].concat(v):T=[A,v],T=fse("xx",T).ns[xA](".")):T=A,T}s(__e,"mergeEvtNamespace");function S_e(A,v,T,S,D){D===void 0&&(D=!1);var L=!1;if(A)try{var U=fse(v,S);if(L=Mpt(A,U,T,D),L&&qU.accept(A)){var ee={guid:Npt++,evtName:U,handler:T,capture:D};I_e(A,U.type)[ao](ee)}}catch{}return L}s(S_e,"eventOn");function Opt(A,v,T,S,D){if(D===void 0&&(D=!1),A)try{var L=fse(v,S),U=!1;Fpt(A,L,function(ee){return L.ns&&!T||ee.handler===T?(U=!0,!0):!1}),U||T_e(A,L,T,D)}catch{}}s(Opt,"eventOff");var R_e="sampleRate",pse="ProcessLegacy",k_e="http.method",mse="https://dc.services.visualstudio.com",uk="/v2/track",Sx="not_specified",P_e=_oe({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),HU="split",bi="length",hse="toLowerCase",Nw="ingestionendpoint",BN="toString",B_e="removeItem",WU="message",Qpt="count",gse="stringify",Ase="pathname",DN="match",Rx="name",LA="properties",c1="measurements",GU="sizeInBytes",jU="typeName",NN="exceptions",LN="severityLevel",yse="problemGroup",dk="parsedStack",VU="hasFullStack",$U="assembly",l1="fileName",fk="line",zU="aiDataContract",YU="duration";function D_e(A,v,T){var S=v[bi],D=Upt(A,v);if(D[bi]!==S){for(var L=0,U=D;T[U]!==void 0;)L++,U=ge(D,0,147)+Wpt(L);D=U}return D}s(D_e,"dataSanitizeKeyAndAddUniqueness");function Upt(A,v){var T;return v&&(v=so(qt(v)),v[bi]>150&&(T=ge(v,0,150),Rr(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:v},!0))),T||v}s(Upt,"dataSanitizeKey");function Ru(A,v,T){T===void 0&&(T=1024);var S;return v&&(T=T||1024,v=so(qt(v)),v[bi]>T&&(S=ge(v,0,T),Rr(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:v},!0))),S||v}s(Ru,"dataSanitizeString");function Cse(A,v){return L_e(A,v,2048,66)}s(Cse,"dataSanitizeUrl");function N_e(A,v){var T;return v&&v[bi]>32768&&(T=ge(v,0,32768),Rr(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:v},!0)),T||v}s(N_e,"dataSanitizeMessage");function qpt(A,v){var T;if(v){var S=""+v;S[bi]>32768&&(T=ge(S,0,32768),Rr(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:v},!0))}return T||v}s(qpt,"dataSanitizeException");function Lw(A,v){if(v){var T={};oe(v,function(S,D){if(ke(D)&&cx())try{D=pd()[gse](D)}catch(L){Rr(A,2,49,"custom property is not valid",{exception:L},!0)}D=Ru(A,D,8192),S=D_e(A,S,T),T[S]=D}),v=T}return v}s(Lw,"dataSanitizeProperties");function Mw(A,v){if(v){var T={};oe(v,function(S,D){S=D_e(A,S,T),T[S]=D}),v=T}return v}s(Mw,"dataSanitizeMeasurements");function Hpt(A,v){return v&&L_e(A,v,128,69)[BN]()}s(Hpt,"dataSanitizeId");function L_e(A,v,T,S){var D;return v&&(v=so(qt(v)),v[bi]>T&&(D=ge(v,0,T),Rr(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:v},!0))),D||v}s(L_e,"dataSanitizeInput");function Wpt(A){var v="00"+A;return ve(v,v[bi]-3)}s(Wpt,"dsPadNumber");var M_e=bv()||{},F_e=0,Gpt=[null,null,null,null,null];function jpt(A){var v=F_e,T=Gpt,S=T[v];return M_e.createElement?T[v]||(S=T[v]=M_e.createElement("a")):S={host:Vpt(A,!0)},S.href=A,v++,v>=T[bi]&&(v=0),F_e=v,S}s(jpt,"urlParseUrl");function Vpt(A,v){var T=$pt(A,v)||"";if(T){var S=T[DN](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[bi]>3&&he(S[2])&&S[2][bi]>0)return S[2]+(S[3]||"")}return T}s(Vpt,"urlParseHost");function $pt(A,v){var T=null;if(A){var S=A[DN](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[bi]>2&&he(S[2])&&S[2][bi]>0&&(T=S[2]||"",v&&S[bi]>2)){var D=(S[1]||"")[hse](),L=S[3]||"";(D==="http"&&L===":80"||D==="https"&&L===":443")&&(L=""),T+=L}}return T}s($pt,"urlParseFullHost");var zpt=[mse+uk,"https://breeze.aimon.applicationinsights.io"+uk,"https://dc-int.services.visualstudio.com"+uk];function O_e(A){return ud(zpt,A[hse]())!==-1}s(O_e,"isInternalApplicationInsightsEndpoint");function Ypt(A,v,T,S){var D,L=S,U=S;if(v&&v[bi]>0){var ee=jpt(v);if(D=ee.host,!L)if(ee[Ase]!=null){var ce=ee.pathname[bi]===0?"/":ee[Ase];ce.charAt(0)!=="/"&&(ce="/"+ce),U=ee[Ase],L=Ru(A,T?T+" "+ce:ce)}else L=Ru(A,v)}else D=S,L=S;return{target:D,name:L,data:U}}s(Ypt,"AjaxHelperParseDependencyPath");var Ese=x5({LocalStorage:0,SessionStorage:1}),pk=void 0,Q_e="";function U_e(A){try{if(X(Ep()))return null;var v=new Date()[BN](),T=Ba(A===Ese.LocalStorage?"localStorage":"sessionStorage"),S=Q_e+v;T.setItem(S,v);var D=T.getItem(S)!==v;if(T[B_e](S),!D)return T}catch{}return null}s(U_e,"_getVerifiedStorageObject");function vse(){return q_e()?U_e(Ese.SessionStorage):null}s(vse,"_getSessionStorageObject");function Kpt(A){Q_e=A||""}s(Kpt,"utlSetStoragePrefix");function q_e(A){return(A||pk===void 0)&&(pk=!!U_e(Ese.SessionStorage)),pk}s(q_e,"utlCanUseSessionStorage");function Jpt(A,v){var T=vse();if(T!==null)try{return T.getItem(v)}catch(S){pk=!1,Rr(A,2,2,"Browser failed read of session storage. "+Gc(S),{exception:Ft(S)})}return null}s(Jpt,"utlGetSessionStorage");function Xpt(A,v,T){var S=vse();if(S!==null)try{return S.setItem(v,T),!0}catch(D){pk=!1,Rr(A,2,4,"Browser failed write to session storage. "+Gc(D),{exception:Ft(D)})}return!1}s(Xpt,"utlSetSessionStorage");function Zpt(A,v){var T=vse();if(T!==null)try{return T[B_e](v),!0}catch(S){pk=!1,Rr(A,2,6,"Browser failed removal of session storage item. "+Gc(S),{exception:Ft(S)})}return!1}s(Zpt,"utlRemoveSessionStorage");var emt=";",tmt="=";function xse(A){if(!A)return{};var v=A[HU](emt),T=hoe(v,function(D,L){var U=L[HU](tmt);if(U[bi]===2){var ee=U[0][hse](),ce=U[1];D[ee]=ce}return D},{});if(Et(T)[bi]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[Nw]=T[Nw]||"https://"+S+"dc."+T.endpointsuffix}T[Nw]=T[Nw]||mse,FQ(T[Nw],"/")&&(T[Nw]=T[Nw].slice(0,-1))}return T}s(xse,"parseConnectionString");var rmt=function(){function A(v,T,S){var D=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[Rx]=Ru(v,S)||Sx,L.data=T,L.time=gw(new Date),L[zU]={time:1,iKey:1,name:1,sampleRate:s(function(){return D.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),mk=function(){function A(v,T,S,D){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[Rx]=Ru(v,T)||Sx,L[LA]=Lw(v,S),L[c1]=Mw(v,D)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),nmt=58,imt=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,omt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,smt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,amt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,cmt=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,lmt=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,umt=/([^\(\s\n]+):([0-9]+)$/,H_e="<no_method>",hk="error",Dp="stack",bse="stackDetails",W_e="errorSrc",Ise="message",G_e="description",j_e=[{re:omt,len:5,m:1,fn:2,ln:3,col:4},{chk:fmt,pre:dmt,re:smt,len:4,m:1,fn:2,ln:3},{re:amt,len:3,m:1,fn:2,hdl:J_e},{re:cmt,len:2,fn:1,hdl:J_e}];function dmt(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(dmt,"_scrubAnonymous");function fmt(A){return dh(A,"[native")<0}s(fmt,"_ignoreNative");function Tse(A,v){var T=A;return T&&!he(T)&&(JSON&&JSON[gse]?(T=JSON[gse](A),v&&(!T||T==="{}")&&(Qe(A[BN])?T=A[BN]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(Tse,"_stringify");function V_e(A,v){var T=A;return A&&(T&&!he(T)&&(T=A[Ise]||A[G_e]||T),T&&!he(T)&&(T=Tse(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),v&&v!=="String"&&v!=="Object"&&v!=="Error"&&dh(T||"",v)===-1&&(T=v+": "+T),T||""}s(V_e,"_formatMessage");function pmt(A){try{if(ke(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(pmt,"_isExceptionDetailsInternal");function mmt(A){try{if(ke(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(mmt,"_isExceptionInternal");function $_e(A){return A&&A.src&&he(A.src)&&A.obj&&tt(A.obj)}s($_e,"_isStackDetails");function Fw(A){var v=A||"";he(v)||(he(v[Dp])?v=v[Dp]:v=""+v);var T=v[HU](`
`);return{src:v,obj:T}}s(Fw,"_convertStackObj");function hmt(A){for(var v=[],T=A[HU](`
`),S=0;S<T[bi];S++){var D=T[S];T[S+1]&&(D+="@"+T[S+1],S++),v.push(D)}return{src:A,obj:v}}s(hmt,"_getOperaStack");function z_e(A){var v=null;if(A)try{if(A[Dp])v=Fw(A[Dp]);else if(A[hk]&&A[hk][Dp])v=Fw(A[hk][Dp]);else if(A.exception&&A.exception[Dp])v=Fw(A.exception[Dp]);else if($_e(A))v=A;else if($_e(A[bse]))v=A[bse];else if(uh()&&uh().opera&&A[Ise])v=hmt(A[WU]);else if(A.reason&&A.reason[Dp])v=Fw(A.reason[Dp]);else if(he(A))v=Fw(A);else{var T=A[Ise]||A[G_e]||"";he(A[W_e])&&(T&&(T+=`
`),T+=" from "+A[W_e]),T&&(v=Fw(T))}}catch(S){v=Fw(S)}return v||{src:"",obj:null}}s(z_e,"_getStackFromErrorObj");function gmt(A){var v="";return A&&(A.obj?v=A.obj.join(`
`):v=A.src||""),v}s(gmt,"_formatStackTrace");function Amt(A){var v,T=A.obj;if(T&&T[bi]>0){v=[];var S=0,D=!1,L=0;Wr(T,function(ut){if(D||vmt(ut)){var rt=qt(ut);D=!0;var Ct=xmt(rt,S);Ct&&(L+=Ct[GU],v.push(Ct),S++)}});var U=32*1024;if(L>U)for(var ee=0,ce=v[bi]-1,Ce=0,Te=ee,Le=ce;ee<ce;){var Ke=v[ee][GU],Me=v[ce][GU];if(Ce+=Ke+Me,Ce>U){var je=Le-Te+1;v.splice(Te,je);break}Te=ee,Le=ce,ee++,ce--}}return v}s(Amt,"_parseStack");function KU(A){var v="";if(A&&(v=A.typeName||A[Rx]||"",!v))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[BN]());v=S&&S[bi]>1?S[1]:""}catch{}return v}s(KU,"_getErrorType");function wse(A){if(A)try{if(!he(A)){var v=KU(A),T=Tse(A,!1);return(!T||T==="{}")&&(A[hk]&&(A=A[hk],v=KU(A)),T=Tse(A,!0)),dh(T,v)!==0&&v!=="String"?v+":"+T:T}}catch{}return""+(A||"")}s(wse,"_formatErrorCode");var JU=function(){function A(v,T,S,D,L,U){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var ee=this;ee.ver=2,mmt(T)?(ee[NN]=T[NN]||[],ee[LA]=T[LA],ee[c1]=T[c1],T[LN]&&(ee[LN]=T[LN]),T.id&&(ee.id=T.id,T[LA].id=T.id),T[yse]&&(ee[yse]=T[yse]),X(T.isManual)||(ee.isManual=T.isManual)):(S||(S={}),U&&(S.id=U),ee[NN]=[Y_e(v,T,S)],ee[LA]=Lw(v,S),ee[c1]=Mw(v,D),L&&(ee[LN]=L),U&&(ee.id=U))}return s(A,"Exception"),A.CreateAutoException=function(v,T,S,D,L,U,ee,ce){var Ce=KU(L||U||v);return{message:V_e(v,Ce),url:T,lineNumber:S,columnNumber:D,error:wse(L||U||v),evt:wse(U||v),typeName:Ce,stackDetails:z_e(ee||L||U),errorSrc:ce}},A.CreateFromInterface=function(v,T,S,D){var L=T[NN]&&HC(T[NN],function(ee){return Emt(v,ee)}),U=new A(v,ph(ph({},T),{exceptions:L}),S,D);return U},A.prototype.toInterface=function(){var v=this,T=v.exceptions,S=v.properties,D=v.measurements,L=v.severityLevel,U=v.problemGroup,ee=v.id,ce=v.isManual,Ce=T instanceof Array&&HC(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:D,problemGroup:U,id:ee,isManual:ce}},A.CreateSimpleException=function(v,T,S,D,L,U){var ee;return{exceptions:[(ee={},ee[VU]=!0,ee.message=v,ee.stack=L,ee.typeName=T,ee)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=wse,A}(),ymt=Vt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function Cmt(){var A=this,v=tt(A[dk])&&HC(A[dk],function(S){return Imt(S)}),T={id:A.id,outerId:A.outerId,typeName:A[jU],message:A[WU],hasFullStack:A[VU],stack:A[Dp],parsedStack:v||void 0};return T}s(Cmt,"_toInterface");function Y_e(A,v,T){var S,D,L,U,ee,ce,Ce,Te;if(pmt(v))U=v[jU],ee=v[WU],Ce=v[Dp],Te=v[dk]||[],ce=v[VU];else{var Le=v,Ke=Le&&Le.evt;vt(Le)||(Le=Le[hk]||Ke||Le),U=Ru(A,KU(Le))||Sx,ee=N_e(A,V_e(v||Le,U))||Sx;var Me=v[bse]||z_e(v);Te=Amt(Me),tt(Te)&&HC(Te,function(je){je[$U]=Ru(A,je[$U]),je[l1]=Ru(A,je[l1])}),Ce=qpt(A,gmt(Me)),ce=tt(Te)&&Te[bi]>0,T&&(T[jU]=T[jU]||U)}return S={},S[zU]=ymt,S.id=D,S.outerId=L,S.typeName=U,S.message=ee,S[VU]=ce,S.stack=Ce,S.parsedStack=Te,S.toInterface=Cmt,S}s(Y_e,"_createExceptionDetails");function Emt(A,v){var T=tt(v[dk])&&HC(v[dk],function(D){return bmt(D)})||v[dk],S=Y_e(A,ph(ph({},v),{parsedStack:T}));return S}s(Emt,"_createExDetailsFromInterface");function K_e(A,v){var T=v[DN](lmt);if(T&&T[bi]>=4)A[l1]=T[1],A[fk]=parseInt(T[2]);else{var S=v[DN](umt);S&&S[bi]>=3?(A[l1]=S[1],A[fk]=parseInt(S[2])):A[l1]=v}}s(K_e,"_parseFilename");function J_e(A,v,T){var S=A[l1];v.fn&&T&&T[bi]>v.fn&&(v.ln&&T[bi]>v.ln?(S=so(T[v.fn]||""),A[fk]=parseInt(so(T[v.ln]||""))||0):S=so(T[v.fn]||"")),S&&K_e(A,S)}s(J_e,"_handleFilename");function vmt(A){var v=!1;if(A&&he(A)){var T=so(A);T&&(v=imt.test(T))}return v}s(vmt,"_isStackFrame");var X_e=Vt({level:1,method:1,assembly:0,fileName:0,line:0});function xmt(A,v){var T,S;if(A&&he(A)&&so(A)){S=(T={},T[zU]=X_e,T.level=v,T.assembly=so(A),T.method=H_e,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var D=0;D<j_e[bi];){var L=j_e[D];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var U=A[DN](L.re);if(U&&U[bi]>=L.len){L.m&&(S.method=so(U[L.m]||H_e)),L.hdl?L.hdl(S,L,U):L.fn&&(L.ln?(S[l1]=so(U[L.fn]||""),S[fk]=parseInt(so(U[L.ln]||""))||0):K_e(S,U[L.fn]||""));break}D++}}return Z_e(S)}s(xmt,"_extractStackFrame");function bmt(A){var v,T=(v={},v[zU]=X_e,v.level=A.level,v.method=A.method,v.assembly=A[$U],v.fileName=A[l1],v.line=A[fk],v.sizeInBytes=0,v);return Z_e(T)}s(bmt,"_stackFrameFromInterface");function Z_e(A){var v=nmt;return A&&(v+=A.method[bi],v+=A.assembly[bi],v+=A.fileName[bi],v+=A.level.toString()[bi],v+=A.line.toString()[bi],A[GU]=v),A}s(Z_e,"_populateFrameSizeInBytes");function Imt(A){return{level:A.level,method:A.method,assembly:A[$U],fileName:A[l1],line:A[fk]}}s(Imt,"_parsedFrameToInterface");var Tmt=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),MN=function(){function A(v,T,S,D,L,U,ee,ce,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Le=new Tmt;Le[Qpt]=D>0?D:void 0,Le.max=isNaN(U)||U===null?void 0:U,Le.min=isNaN(L)||L===null?void 0:L,Le[Rx]=Ru(v,T)||Sx,Le.value=S,Le.stdDev=isNaN(ee)||ee===null?void 0:ee,Te.metrics=[Le],Te[LA]=Lw(v,ce),Te[c1]=Mw(v,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),FN="";function eSe(A){(isNaN(A)||A<0)&&(A=0),A=Eoe(A);var v=FN+A%1e3,T=FN+WC(A/1e3)%60,S=FN+WC(A/(1e3*60))%60,D=FN+WC(A/(1e3*60*60))%24,L=WC(A/(1e3*60*60*24));return v=v[bi]===1?"00"+v:v[bi]===2?"0"+v:v,T=T[bi]<2?"0"+T:T,S=S[bi]<2?"0"+S:S,D=D[bi]<2?"0"+D:D,(L>0?L+".":FN)+D+":"+S+":"+T+"."+v}s(eSe,"msToTimeSpan");var XU=function(){function A(v,T,S,D,L,U,ee){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ce=this;ce.ver=2,ce.id=Hpt(v,ee),ce.url=Cse(v,S),ce[Rx]=Ru(v,T)||Sx,isNaN(D)||(ce[YU]=eSe(D)),ce[LA]=Lw(v,L),ce[c1]=Mw(v,U)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),ZU=function(){function A(v,T,S,D,L,U,ee,ce,Ce,Te,Le,Ke){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Me=this;Me.ver=2,Me.id=T,Me[YU]=eSe(L),Me.success=U,Me.resultCode=ee+"",Me.type=Ru(v,Ce);var je=Ypt(v,S,ce,D);Me.data=Cse(v,D)||je.data,Me.target=Ru(v,je.target),Te&&(Me.target="".concat(Me.target," | ").concat(Te)),Me[Rx]=Ru(v,je[Rx]),Me[LA]=Lw(v,Le),Me[c1]=Mw(v,Ke)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),eq=function(){function A(v,T,S,D,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var U=this;U.ver=2,T=T||Sx,U[WU]=N_e(v,T),U[LA]=Lw(v,D),U[c1]=Mw(v,L),S&&(U[LN]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),tq=function(){function A(v,T,S,D,L,U,ee){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ce=this;ce.ver=2,ce.url=Cse(v,S),ce[Rx]=Ru(v,T)||Sx,ce[LA]=Lw(v,L),ce[c1]=Mw(v,U),ee&&(ce.domProcessing=ee.domProcessing,ce[YU]=ee[YU],ce.networkConnect=ee.networkConnect,ce.perfTotal=ee.perfTotal,ce.receivedResponse=ee.receivedResponse,ce.sentRequest=ee.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),Ow=function(){function A(v,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=v,this.baseData=T}return s(A,"Data"),A}(),wmt=x5({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function kx(A){var v="ai."+A+".";return function(T){return v+T}}s(kx,"_aiNameFunc");var ON=kx("application"),Vc=kx("device"),rq=kx("location"),gk=kx("operation"),_se=kx("session"),Px=kx("user"),Qw=kx("cloud"),QN=kx("internal"),tSe=function(A){uw(v,A);function v(){return A.call(this)||this}return s(v,"ContextTagKeys"),v}(Moe({applicationVersion:ON("ver"),applicationBuild:ON("build"),applicationTypeId:ON("typeId"),applicationId:ON("applicationId"),applicationLayer:ON("layer"),deviceId:Vc("id"),deviceIp:Vc("ip"),deviceLanguage:Vc("language"),deviceLocale:Vc("locale"),deviceModel:Vc("model"),deviceFriendlyName:Vc("friendlyName"),deviceNetwork:Vc("network"),deviceNetworkName:Vc("networkName"),deviceOEMName:Vc("oemName"),deviceOS:Vc("os"),deviceOSVersion:Vc("osVersion"),deviceRoleInstance:Vc("roleInstance"),deviceRoleName:Vc("roleName"),deviceScreenResolution:Vc("screenResolution"),deviceType:Vc("type"),deviceMachineName:Vc("machineName"),deviceVMName:Vc("vmName"),deviceBrowser:Vc("browser"),deviceBrowserVersion:Vc("browserVersion"),locationIp:rq("ip"),locationCountry:rq("country"),locationProvince:rq("province"),locationCity:rq("city"),operationId:gk("id"),operationName:gk("name"),operationParentId:gk("parentId"),operationRootId:gk("rootId"),operationSyntheticSource:gk("syntheticSource"),operationCorrelationVector:gk("correlationVector"),sessionId:_se("id"),sessionIsFirst:_se("isFirst"),sessionIsNew:_se("isNew"),userAccountAcquisitionDate:Px("accountAcquisitionDate"),userAccountId:Px("accountId"),userAgent:Px("userAgent"),userId:Px("id"),userStoreRegion:Px("storeRegion"),userAuthUserId:Px("authUserId"),userAnonymousUserAcquisitionDate:Px("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Px("authUserAcquisitionDate"),cloudName:Qw("name"),cloudRole:Qw("role"),cloudRoleVer:Qw("roleVer"),cloudRoleInstance:Qw("roleInstance"),cloudEnvironment:Qw("environment"),cloudLocation:Qw("location"),cloudDeploymentUnit:Qw("deploymentUnit"),internalNodeName:QN("nodeName"),internalSdkVersion:QN("sdkVersion"),internalAgentVersion:QN("agentVersion"),internalSnippet:QN("snippet"),internalSdkSrc:QN("sdkSrc")})),pl=new tSe;function rSe(A,v){Opt(A,null,null,v)}s(rSe,"_disableEvents");function _mt(A){var v=bv(),T=cA(),S=!1,D=[],L=1;T&&!X(T.onLine)&&!T.onLine&&(L=2);var U=0,ee=Ke(),ce=__e(Eh("OfflineListener"),A);try{if(Te(uh())&&(S=!0),v){var Ce=v.body||v;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Yt){var Ar=!1;return Yt&&(Ar=S_e(Yt,"online",ut,ce),Ar&&S_e(Yt,"offline",rt,ce)),Ar}s(Te,"_enableEvents");function Le(){return ee}s(Le,"_isOnline");function Ke(){return!(U===2||L===2)}s(Ke,"calCurrentState");function Me(){var Yt=Ke();ee!==Yt&&(ee=Yt,Wr(D,function(Ar){var Yn={isOnline:ee,rState:L,uState:U};try{Ar(Yn)}catch{}}))}s(Me,"listnerNoticeCheck");function je(Yt){U=Yt,Me()}s(je,"setOnlineState");function ut(){L=1,Me()}s(ut,"_setOnline");function rt(){L=2,Me()}s(rt,"_setOffline");function Ct(){var Yt=uh();if(Yt&&S){if(rSe(Yt,ce),v){var Ar=v.body||v;H(Ar.ononline)||rSe(Ar,ce)}S=!1}}s(Ct,"_unload");function Mt(Yt){return D.push(Yt),{rm:s(function(){var Ar=D.indexOf(Yt);if(Ar>-1)return D.splice(Ar,1)},"rm")}}return s(Mt,"addListener"),{isOnline:Le,isListening:s(function(){return S},"isListening"),unload:Ct,addListener:Mt,setOnlineState:je}}s(_mt,"createOfflineListener");var Smt="AppInsightsChannelPlugin",Uw="duration",Vl="tags",Sse="deviceType",u0="data",u1="name",UN="traceID",Ri="length",qN="stringify",qw="measurements",MA="dataType",Hw="envelopeType",Ww="toString",Gw="enqueue",jw="count",d1="push",Rse="emitLineDelimitedJson",Ak="clear",nq="markAsSent",HN="clearSent",kse="bufferOverride",WN="BUFFER_KEY",Bx="SENT_BUFFER_KEY",yk="concat",GN="MAX_BUFFER_SIZE",jN="triggerSend",ku="diagLog",Pse="initialize",VN="_sender",$N="endpointUrl",zN="instrumentationKey",Bse="customHeaders",nSe="maxBatchSizeInBytes",Dse="onunloadDisableBeacon",Nse="isBeaconApiDisabled",iSe="alwaysUseXhrOverride",oSe="enableSessionStorageBuffer",FA="_buffer",sSe="onunloadDisableFetch",aSe="disableSendBeaconSplit",iq="getSenderInst",Vw="_onError",Lse="_onPartialSuccess",oq="_onSuccess",Mse="itemsReceived",Fse="itemsAccepted",Ose="baseType",sq="sampleRate",Rmt="getHashCodeScore",Qse="baseType",Zs="baseData",ml="properties",cSe="true";function Ka(A,v,T){return TA(A,v,T,de)}s(Ka,"_setValueIf");function kmt(A,v,T){var S=T[Vl]=T[Vl]||{},D=v.ext=v.ext||{},L=v[Vl]=v[Vl]||[],U=D.user;U&&(Ka(S,pl.userAuthUserId,U.authId),Ka(S,pl.userId,U.id||U.localId));var ee=D.app;ee&&Ka(S,pl.sessionId,ee.sesId);var ce=D.device;ce&&(Ka(S,pl.deviceId,ce.id||ce.localId),Ka(S,pl[Sse],ce.deviceClass),Ka(S,pl.deviceIp,ce.ip),Ka(S,pl.deviceModel,ce.model),Ka(S,pl[Sse],ce[Sse]));var Ce=v.ext.web;if(Ce){Ka(S,pl.deviceLanguage,Ce.browserLang),Ka(S,pl.deviceBrowserVersion,Ce.browserVer),Ka(S,pl.deviceBrowser,Ce.browser);var Te=T[u0]=T[u0]||{},Le=Te[Zs]=Te[Zs]||{},Ke=Le[ml]=Le[ml]||{};Ka(Ke,"domain",Ce.domain),Ka(Ke,"isManual",Ce.isManual?cSe:null),Ka(Ke,"screenRes",Ce.screenRes),Ka(Ke,"userConsent",Ce.userConsent?cSe:null)}var Me=D.os;Me&&(Ka(S,pl.deviceOS,Me[u1]),Ka(S,pl.deviceOSVersion,Me.osVer));var je=D.trace;je&&(Ka(S,pl.operationParentId,je.parentID),Ka(S,pl.operationName,Ru(A,je[u1])),Ka(S,pl.operationId,je[UN]));for(var ut={},rt=L[Ri]-1;rt>=0;rt--){var Ct=L[rt];oe(Ct,function(Yt,Ar){ut[Yt]=Ar}),L.splice(rt,1)}oe(L,function(Yt,Ar){ut[Yt]=Ar});var Mt=ph(ph({},S),ut);Mt[pl.internalSdkVersion]||(Mt[pl.internalSdkVersion]=Ru(A,"javascript:".concat(Pmt.Version),64)),T[Vl]=iN(Mt)}s(kmt,"_extractPartAExtensions");function Dx(A,v,T){X(A)||oe(A,function(S,D){ht(D)?T[S]=D:he(D)?v[S]=D:cx()&&(v[S]=pd()[qN](D))})}s(Dx,"_extractPropsAndMeasurements");function $w(A,v){X(A)||oe(A,function(T,S){A[T]=S||v})}s($w,"_convertPropsUndefinedToCustomDefinedValue");function zw(A,v,T,S){var D=new rmt(A,S,v);Ka(D,"sampleRate",T[R_e]),(T[Zs]||{}).startTime&&(D.time=gw(T[Zs].startTime)),D.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return D[u1]=D[u1].replace("{0}",L),kmt(A,T,D),T[Vl]=T[Vl]||[],iN(D)}s(zw,"_createEnvelope");function Yw(A,v){X(v[Zs])&&Rr(A,1,46,"telemetryItem.baseData cannot be null.")}s(Yw,"EnvelopeCreatorInit");var Pmt={Version:"3.3.6"};function Bmt(A,v,T){Yw(A,v);var S=v[Zs][qw]||{},D=v[Zs][ml]||{};Dx(v[u0],D,S),X(T)||$w(D,T);var L=v[Zs];if(X(L))return ek(A,"Invalid input for dependency data"),null;var U=L[ml]&&L[ml][k_e]?L[ml][k_e]:"GET",ee=new ZU(A,L.id,L.target,L[u1],L[Uw],L.success,L.responseCode,U,L.type,L.correlationContext,D,S),ce=new Ow(ZU[MA],ee);return zw(A,ZU[Hw],v,ce)}s(Bmt,"DependencyEnvelopeCreator");function lSe(A,v,T){Yw(A,v);var S={},D={};v[Qse]!==mk[MA]&&(S.baseTypeSource=v[Qse]),v[Qse]===mk[MA]?(S=v[Zs][ml]||{},D=v[Zs][qw]||{}):v[Zs]&&Dx(v[Zs],S,D),Dx(v[u0],S,D),X(T)||$w(S,T);var L=v[Zs][u1],U=new mk(A,L,S,D),ee=new Ow(mk[MA],U);return zw(A,mk[Hw],v,ee)}s(lSe,"EventEnvelopeCreator");function Dmt(A,v,T){Yw(A,v);var S=v[Zs][qw]||{},D=v[Zs][ml]||{};Dx(v[u0],D,S),X(T)||$w(D,T);var L=v[Zs],U=JU.CreateFromInterface(A,L,D,S),ee=new Ow(JU[MA],U);return zw(A,JU[Hw],v,ee)}s(Dmt,"ExceptionEnvelopeCreator");function Nmt(A,v,T){Yw(A,v);var S=v[Zs],D=S[ml]||{},L=S[qw]||{};Dx(v[u0],D,L),X(T)||$w(D,T);var U=new MN(A,S[u1],S.average,S.sampleCount,S.min,S.max,S.stdDev,D,L),ee=new Ow(MN[MA],U);return zw(A,MN[Hw],v,ee)}s(Nmt,"MetricEnvelopeCreator");function Lmt(A,v,T){Yw(A,v);var S,D=v[Zs];!X(D)&&!X(D[ml])&&!X(D[ml][Uw])?(S=D[ml][Uw],delete D[ml][Uw]):!X(v[u0])&&!X(v[u0][Uw])&&(S=v[u0][Uw],delete v[u0][Uw]);var L=v[Zs],U;((v.ext||{}).trace||{})[UN]&&(U=v.ext.trace[UN]);var ee=L.id||U,ce=L[u1],Ce=L.uri,Te=L[ml]||{},Le=L[qw]||{};if(X(L.refUri)||(Te.refUri=L.refUri),X(L.pageType)||(Te.pageType=L.pageType),X(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[Ww]()),!X(L[ml])){var Ke=L[ml];oe(Ke,function(ut,rt){Te[ut]=rt})}Dx(v[u0],Te,Le),X(T)||$w(Te,T);var Me=new XU(A,ce,Ce,S,Te,Le,ee),je=new Ow(XU[MA],Me);return zw(A,XU[Hw],v,je)}s(Lmt,"PageViewEnvelopeCreator");function Mmt(A,v,T){Yw(A,v);var S=v[Zs],D=S[u1],L=S.uri||S.url,U=S[ml]||{},ee=S[qw]||{};Dx(v[u0],U,ee),X(T)||$w(U,T);var ce=new tq(A,D,L,void 0,U,ee,S),Ce=new Ow(tq[MA],ce);return zw(A,tq[Hw],v,Ce)}s(Mmt,"PageViewPerformanceEnvelopeCreator");function Fmt(A,v,T){Yw(A,v);var S=v[Zs].message,D=v[Zs].severityLevel,L=v[Zs][ml]||{},U=v[Zs][qw]||{};Dx(v[u0],L,U),X(T)||$w(L,T);var ee=new eq(A,S,D,L,U),ce=new Ow(eq[MA],ee);return zw(A,eq[Hw],v,ce)}s(Fmt,"TraceEnvelopeCreator");var uSe=function(){function A(v,T){var S=[],D=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(U){return S=U,S},Gl(A,this,function(U){U[Gw]=function(ee){if(U[jw]()>=T.eventsLimitInMem){D||(Rr(v,2,105,"Maximum in-memory buffer size reached: "+U[jw](),!0),D=!0);return}ee.cnt=ee.cnt||0,!(!X(L)&&ee.cnt>L)&&S[d1](ee)},U[jw]=function(){return S[Ri]},U.size=function(){for(var ee=S[Ri],ce=0;ce<S[Ri];ce++)ee+=S[ce].item[Ri];return T[Rse]||(ee+=2),ee},U[Ak]=function(){S=[],D=!1},U.getItems=function(){return S.slice(0)},U.batchPayloads=function(ee){if(ee&&ee[Ri]>0){var ce=[];Wr(ee,function(Te){ce[d1](Te.item)});var Ce=T[Rse]?ce.join(`
`):"["+ce.join(",")+"]";return Ce}return null},U.createNew=function(ee,ce,Ce){var Te=S.slice(0);ee=ee||v,ce=ce||{};var Le=Ce?new dSe(ee,ce):new Use(ee,ce);return Wr(Te,function(Ke){Le[Gw](Ke)}),Le}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),Use=function(A){uw(v,A);function v(T,S){var D=A.call(this,T,S)||this;return Gl(v,D,function(L,U){L[nq]=function(ee){U[Ak]()},L[HN]=function(ee){}}),D}return s(v,"ArraySendBuffer"),v.__ieDyn=1,v}(uSe),Omt=["AI_buffer","AI_sentBuffer"],dSe=function(A){uw(v,A);function v(S,D){var L=A.call(this,S,D)||this,U=!1,ee=D?.namePrefix,ce=D[kse]||{getItem:Jpt,setItem:Xpt},Ce=ce.getItem,Te=ce.setItem,Le=D.maxRetryCnt;return Gl(v,L,function(Ke,Me){var je=Ar(v[WN]),ut=Ar(v[Bx]),rt=Ni(),Ct=ut[yk](rt),Mt=Ke._set(je[yk](Ct));Mt[Ri]>v[GN]&&(Mt[Ri]=v[GN]),Di(v[Bx],[]),Di(v[WN],Mt),Ke[Gw]=function(yn){if(Ke[jw]()>=v[GN]){U||(Rr(S,2,67,"Maximum buffer size reached: "+Ke[jw](),!0),U=!0);return}yn.cnt=yn.cnt||0,!(!X(Le)&&yn.cnt>Le)&&(Me[Gw](yn),Di(v[WN],Ke._get()))},Ke[Ak]=function(){Me[Ak](),Di(v[WN],Ke._get()),Di(v[Bx],[]),U=!1},Ke[nq]=function(yn){Di(v[WN],Ke._set(Yt(yn,Ke._get())));var Ur=Ar(v[Bx]);Ur instanceof Array&&yn instanceof Array&&(Ur=Ur[yk](yn),Ur[Ri]>v[GN]&&(Rr(S,1,67,"Sent buffer reached its maximum size: "+Ur[Ri],!0),Ur[Ri]=v[GN]),Di(v[Bx],Ur))},Ke[HN]=function(yn){var Ur=Ar(v[Bx]);Ur=Yt(yn,Ur),Di(v[Bx],Ur)},Ke.createNew=function(yn,Ur,Li){Li=!!Li;var ea=Ke._get().slice(0),ss=Ar(v[Bx]).slice(0);yn=yn||S,Ur=Ur||{},Ke[Ak]();var Ot=Li?new v(yn,Ur):new Use(yn,Ur);return Wr(ea,function(qr){Ot[Gw](qr)}),Li&&Ot[nq](ss),Ot};function Yt(yn,Ur){var Li=[],ea=[];return Wr(yn,function(ss){ea[d1](ss.item)}),Wr(Ur,function(ss){!Qe(ss)&&ud(ea,ss.item)===-1&&Li[d1](ss)}),Li}s(Yt,"_removePayloadsFromBuffer");function Ar(yn){var Ur=yn;return Ur=ee?ee+"_"+Ur:Ur,Yn(Ur)}s(Ar,"_getBuffer");function Yn(yn){try{var Ur=Ce(S,yn);if(Ur){var Li=pd().parse(Ur);if(he(Li)&&(Li=pd().parse(Li)),Li&&tt(Li))return Li}}catch(ea){Rr(S,1,42," storage key: "+yn+", "+Gc(ea),{exception:Ft(ea)})}return[]}s(Yn,"_getBufferBase");function Di(yn,Ur){var Li=yn;try{Li=ee?ee+"_"+Li:Li;var ea=JSON[qN](Ur);Te(S,Li,ea)}catch(ss){Te(S,Li,JSON[qN]([])),Rr(S,2,41," storage key: "+Li+", "+Gc(ss)+". Buffer cleared",{exception:Ft(ss)})}}s(Di,"_setBuffer");function Ni(){var yn=[];try{return Wr(Omt,function(Ur){var Li=Bo(Ur);if(yn=yn[yk](Li),ee){var ea=ee+"_"+Ur,ss=Bo(ea);yn=yn[yk](ss)}}),yn}catch(Ur){Rr(S,2,41,"Transfer events from previous buffers: "+Gc(Ur)+". previous Buffer items can not be removed",{exception:Ft(Ur)})}return[]}s(Ni,"_getPreviousEvents");function Bo(yn){try{var Ur=Yn(yn),Li=[];return Wr(Ur,function(ea){var ss={item:ea,cnt:0};Li[d1](ss)}),Zpt(S,yn),Li}catch{}return[]}s(Bo,"_getItemsFromPreviousKey")}),L}s(v,"SessionStorageSendBuffer");var T;return T=v,v.VERSION="_1",v.BUFFER_KEY="AI_buffer"+T.VERSION,v.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,v.MAX_BUFFER_SIZE=2e3,v}(uSe),Qmt=function(){function A(v){Gl(A,this,function(T){T.serialize=function(U){var ee=S(U,"root");try{return pd()[qN](ee)}catch(ce){Rr(v,1,48,ce&&Qe(ce[Ww])?ce[Ww]():"Error serializing object",null,!0)}};function S(U,ee){var ce="__aiCircularRefCheck",Ce={};if(!U)return Rr(v,1,48,"cannot serialize object because it is null or undefined",{name:ee},!0),Ce;if(U[ce])return Rr(v,2,50,"Circular reference detected while serializing object",{name:ee},!0),Ce;if(!U.aiDataContract){if(ee==="measurements")Ce=L(U,"number",ee);else if(ee==="properties")Ce=L(U,"string",ee);else if(ee==="tags")Ce=L(U,"string",ee);else if(tt(U))Ce=D(U,ee);else{Rr(v,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:ee},!0);try{pd()[qN](U),Ce=U}catch(Te){Rr(v,1,48,Te&&Qe(Te[Ww])?Te[Ww]():"Error serializing object",null,!0)}}return Ce}return U[ce]=!0,oe(U.aiDataContract,function(Te,Le){var Ke=Qe(Le)?Le()&1:Le&1,Me=Qe(Le)?Le()&4:Le&4,je=Le&2,ut=U[Te]!==void 0,rt=ke(U[Te])&&U[Te]!==null;if(Ke&&!ut&&!je)Rr(v,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:ee});else if(!Me){var Ct=void 0;rt?je?Ct=D(U[Te],Te):Ct=S(U[Te],Te):Ct=U[Te],Ct!==void 0&&(Ce[Te]=Ct)}}),delete U[ce],Ce}s(S,"_serializeObject");function D(U,ee){var ce;if(U)if(!tt(U))Rr(v,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:ee},!0);else{ce=[];for(var Ce=0;Ce<U[Ri];Ce++){var Te=U[Ce],Le=S(Te,ee+"["+Ce+"]");ce[d1](Le)}}return ce}s(D,"_serializeArray");function L(U,ee,ce){var Ce;return U&&(Ce={},oe(U,function(Te,Le){if(ee==="string")Le===void 0?Ce[Te]="undefined":Le===null?Ce[Te]="null":Le[Ww]?Ce[Te]=Le[Ww]():Ce[Te]="invalid field: toString() is not defined.";else if(ee==="number")if(Le===void 0)Ce[Te]="undefined";else if(Le===null)Ce[Te]="null";else{var Ke=parseFloat(Le);Ce[Te]=Ke}else Ce[Te]="invalid field: "+ce+" is of unknown type.",Rr(v,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),Umt=8,qmt=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(v){var T=this.getHashCode(v)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(v){if(v==="")return 0;for(;v[Ri]<Umt;)v=v[yk](v);for(var T=5381,S=0;S<v[Ri];++S)T=(T<<5)+T+v.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),Hmt=function(){function A(){var v=this,T=new qmt,S=new tSe;v.getSamplingScore=function(D){var L=0;return D[Vl]&&D[Vl][S.userId]?L=T.getHashCodeScore(D[Vl][S.userId]):D.ext&&D.ext.user&&D.ext.user.id?L=T[Rmt](D.ext.user.id):D[Vl]&&D[Vl][S.operationId]?L=T.getHashCodeScore(D[Vl][S.operationId]):D.ext&&D.ext.telemetryTrace&&D.ext.telemetryTrace[UN]?L=T.getHashCodeScore(D.ext.telemetryTrace[UN]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),Wmt=function(){function A(v,T){this.INT_MAX_VALUE=2147483647;var S=T||_w(null);(v>100||v<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:v},!0),v=100),this[sq]=v,this.samplingScoreGenerator=new Hmt}return s(A,"Sample"),A.prototype.isSampledIn=function(v){var T=this[sq],S=!1;return T==null||T>=100||v.baseType===MN[MA]?!0:(S=this.samplingScoreGenerator.getSamplingScore(v)<T,S)},A}(),Ss,f1,OA=void 0,fSe="",Gmt=65e3;function pSe(A){try{return A.responseText}catch{}return null}s(pSe,"_getResponseText");function jmt(A){return A&&A.sendPOST}s(jmt,"isOverrideFn");var mSe=Zt((Ss={endpointUrl:yN(de,mse+uk)},Ss[Rse]=kp(),Ss.maxBatchInterval=15e3,Ss[nSe]=102400,Ss.disableTelemetry=kp(),Ss[oSe]=kp(!0),Ss.isRetryDisabled=kp(),Ss[Nse]=kp(!0),Ss[aSe]=kp(!0),Ss.disableXhr=kp(),Ss[sSe]=kp(),Ss[Dse]=kp(),Ss[zN]=OA,Ss.namePrefix=OA,Ss.samplingPercentage=yN(Vmt,100),Ss[Bse]=OA,Ss.convertUndefined=OA,Ss.eventsLimitInMem=1e4,Ss[kse]=!1,Ss.httpXHROverride={isVal:jmt,v:OA},Ss[iSe]=kp(),Ss.transports=OA,Ss.retryCodes=OA,Ss.maxRetryCnt={isVal:ht,v:10},Ss));function Vmt(A){return!isNaN(A)&&A>0&&A<=100}s(Vmt,"_chkSampling");var $mt=(f1={},f1[mk.dataType]=lSe,f1[eq.dataType]=Fmt,f1[XU.dataType]=Lmt,f1[tq.dataType]=Mmt,f1[JU.dataType]=Dmt,f1[MN.dataType]=Nmt,f1[ZU.dataType]=Bmt,f1),hSe=function(A){uw(v,A);function v(){var T=A.call(this)||this;T.priority=1001,T.identifier=Smt;var S,D,L,U,ee,ce,Ce,Te=0,Le,Ke,Me,je,ut,rt,Ct,Mt,Yt,Ar,Yn,Di,Ni,Bo,yn,Ur,Li,ea,ss,Ot,qr,bo,Tt,Pn,Ea,Do,hl;return Gl(v,T,function(ct,Ec){ASe(),ct.pause=function(){Fx(),L=!0},ct.resume=function(){L&&(L=!1,D=null,Ho(),xk())},ct.flush=function(qe,At,er){if(qe===void 0&&(qe=!0),!L){Fx();try{return ct[jN](qe,null,er||1)}catch(Br){Rr(ct[ku](),1,22,"flush failed, telemetry will not be collected: "+Gc(Br),{exception:Ft(Br)})}}},ct.onunloadFlush=function(){if(!L)if(Ct||Ot)try{return ct[jN](!0,sf,2)}catch(qe){Rr(ct[ku](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Gc(qe),{exception:Ft(qe)})}else ct.flush(!1)},ct.addHeader=function(qe,At){Ce[qe]=At},ct[Pse]=function(qe,At,er,Br){ct.isInitialized()&&Rr(ct[ku](),1,28,"Sender is already initialized"),Ec[Pse](qe,At,er,Br);var Qn=ct.identifier;ee=new Qmt(At.logger),S=0,D=null,ct[VN]=null,ce=0;var vn=ct[ku]();Me=__e(Eh("Sender"),At.evtNamespace&&At.evtNamespace()),Ke=_mt(Me),ct._addHook(vh(qe,function(co){var Ja=co.cfg;Ja.storagePrefix&&Kpt(Ja.storagePrefix);var d0=Tx(null,Ja,At),Ci=d0.getExtCfg(Qn,mSe),ySe=Ci[$N];if(je&&ySe===je){var Wse=Ja[$N];Wse&&Wse!==ySe&&(Ci[$N]=Wse)}It(Ci[zN])&&(Ci[zN]=Ja[zN]),Ye(ct,"_senderConfig",{g:s(function(){return Ci},"g")}),ut!==Ci[$N]&&(je=ut=Ci[$N]),At.activeStatus()===yA.PENDING?ct.pause():At.activeStatus()===yA.ACTIVE&&ct.resume(),Ar&&Ar!==Ci[Bse]&&Wr(Ar,function(zl){delete Ce[zl.header]}),rt=Ci[nSe],Ct=(Ci[Dse]===!1||Ci[Nse]===!1)&&_A(),Mt=Ci[Dse]===!1&&_A(),Yt=Ci[Nse]===!1&&_A(),Ot=Ci[iSe],qr=!!Ci.disableXhr,hl=Ci.retryCodes;var Gse=Ci[kse],bk=!!Ci[oSe]&&(!!Gse||q_e()),CSe=Ci.namePrefix,Jmt=bk!==Ur||bk&&ea!==CSe||bk&&Li!==Gse;if(ct[FA]){if(Jmt)try{ct[FA]=ct[FA].createNew(vn,Ci,bk)}catch(zl){Rr(ct[ku](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+Gc(zl),{exception:Ft(zl)})}Ho()}else ct[FA]=bk?new dSe(vn,Ci):new Use(vn,Ci);ea=CSe,Ur=bk,Li=Gse,bo=!Ci[sSe]&&xw(!0),Ea=!!Ci[aSe],ct._sample=new Wmt(Ci.samplingPercentage,vn),Di=Ci[zN],!It(Di)&&!gSe(Di,Ja)&&Rr(vn,1,100,"Invalid Instrumentation key "+Di),Ar=Ci[Bse],he(je)&&!O_e(je)&&Ar&&Ar[Ri]>0?Wr(Ar,function(zl){T.addHeader(zl.header,zl.value)}):Ar=null,ss=Ci.enableSendPromise;var ESe=gl();Do?Do.SetConfig(ESe):(Do=new Cc,Do[Pse](ESe,vn));var uq=Ci.httpXHROverride,dq=null,XN=null,Xmt=oU([3,1,2],Ci.transports);dq=Do&&Do[iq](Xmt,!1);var jse=Do&&Do.getFallbackInst();Tt=s(function(zl,Kw){return Nr(jse,zl,Kw)},"_xhrSend"),Pn=s(function(zl,Kw){return Nr(jse,zl,Kw,!1)},"_fallbackSend"),dq=Ot?uq:dq||uq||jse,ct[VN]=function(zl,Kw){return Nr(dq,zl,Kw)},bo&&(Le=vk);var Vse=oU([3,1],Ci.unloadTransports);bo||(Vse=Vse.filter(function(zl){return zl!==2})),XN=Do&&Do[iq](Vse,!0),XN=Ot?uq:XN||uq,(Ot||Ci.unloadTransports||!Le)&&XN&&(Le=s(function(zl,Kw){return Nr(XN,zl,Kw)},"_syncUnloadSender")),Le||(Le=Tt),Yn=Ci.disableTelemetry,Ni=Ci.convertUndefined||OA,Bo=Ci.isRetryDisabled,yn=Ci.maxBatchInterval}))},ct.processTelemetry=function(qe,At){At=ct._getTelCtx(At);var er=At[ku]();try{var Br=Ih(qe,er);if(!Br)return;var Qn=Mx(qe,er);if(!Qn)return;var vn=ee.serialize(Qn),co=ct[FA];Ho(vn);var Ja={item:vn,cnt:0};co[Gw](Ja),xk()}catch(d0){Rr(er,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Gc(d0),{exception:Ft(d0)})}ct.processNext(qe,At)},ct.isCompletelyIdle=function(){return!L&&Te===0&&ct._buffer[jw]()===0},ct.getOfflineListener=function(){return Ke},ct._xhrReadyStateChange=function(qe,At,er){if(!wh(At))return Np(qe,At,er)},ct[jN]=function(qe,At,er){qe===void 0&&(qe=!0);var Br;if(!L)try{var Qn=ct[FA];if(Yn)Qn[Ak]();else if(Qn[jw]()>0){var vn=Qn.getItems();lq(er||0,qe),At?Br=At.call(ct,vn,qe):Br=ct[VN](vn,qe)}Fx()}catch(Ja){var co=lx();(!co||co>9)&&Rr(ct[ku](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+Gc(Ja),{exception:Ft(Ja)})}return Br},ct.getOfflineSupport=function(){return{getUrl:s(function(){return je},"getUrl"),createPayload:pt,serialize:ta,batch:$l,shouldProcess:s(function(qe){return!!Ih(qe)},"shouldProcess")}},ct._doTeardown=function(qe,At){ct.onunloadFlush(),Ax(Ke,!1),ASe()},ct[Vw]=function(qe,At,er){if(!wh(qe))return hd(qe,At)},ct[Lse]=function(qe,At){if(!wh(qe))return Nx(qe,At)},ct[oq]=function(qe,At){if(!wh(qe))return bh(qe)},ct._xdrOnLoad=function(qe,At){if(!wh(At))return va(qe,At)};function va(qe,At){var er=pSe(qe);if(qe&&(er+""=="200"||er===""))S=0,ct[oq](At,0);else{var Br=Dr(er);Br&&Br[Mse]&&Br[Mse]>Br[Fse]&&!Bo?ct[Lse](At,Br):ct[Vw](At,iU(qe))}}s(va,"_xdrOnLoad");function gl(){try{var qe={xdrOnComplete:s(function(er,Br,Qn){var vn=Lx(Qn);if(vn)return va(er,vn)},"xdrOnComplete"),fetchOnComplete:s(function(er,Br,Qn,vn){var co=Lx(vn);if(co)return Rs(er.status,co,er.url,co[Ri],er.statusText,Qn||"")},"fetchOnComplete"),xhrOnComplete:s(function(er,Br,Qn){var vn=Lx(Qn);if(vn)return Np(er,vn,vn[Ri])},"xhrOnComplete"),beaconOnRetry:s(function(er,Br,Qn){return Th(er,Br,Qn)},"beaconOnRetry")},At={enableSendPromise:ss,isOneDs:!1,disableCredentials:!1,disableXhr:qr,disableBeacon:!Yt,disableBeaconSync:!Mt,senderOnCompleteCallBack:qe};return At}catch{}return null}s(gl,"_getSendPostMgrConfig");function Np(qe,At,er){qe.readyState===4&&Rs(qe.status,At,qe.responseURL,er,W5(qe),pSe(qe)||qe.response)}s(Np,"_xhrReadyStateChange");function hd(qe,At,er){Rr(ct[ku](),2,26,"Failed to send telemetry.",{message:At}),ct._buffer&&ct._buffer[HN](qe)}s(hd,"_onError");function Nx(qe,At){for(var er=[],Br=[],Qn=At.errors.reverse(),vn=0,co=Qn;vn<co.length;vn++){var Ja=co[vn],d0=qe.splice(Ja.index,1)[0];Ox(Ja.statusCode)?Br[d1](d0):er[d1](d0)}qe[Ri]>0&&ct[oq](qe,At[Fse]),er[Ri]>0&&ct[Vw](er,W5(null,["partial success",At[Fse],"of",At.itemsReceived].join(" "))),Br[Ri]>0&&(JN(Br),Rr(ct[ku](),2,40,"Partial success. Delivered: "+qe[Ri]+", Failed: "+er[Ri]+". Will retry to send "+Br[Ri]+" our of "+At[Mse]+" items"))}s(Nx,"_onPartialSuccess");function bh(qe,At){ct._buffer&&ct._buffer[HN](qe)}s(bh,"_onSuccess");function Lx(qe){try{if(qe){var At=qe,er=At.oriPayload;return er&&er[Ri]?er:null}}catch{}return null}s(Lx,"_getPayloadArr");function Ih(qe,At){if(Yn)return!1;if(!qe)return At&&Rr(At,1,7,"Cannot send empty telemetry"),!1;if(qe.baseData&&!qe[Ose])return At&&Rr(At,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(qe[Ose]||(qe[Ose]="EventData"),!ct[VN])return At&&Rr(At,1,28,"Sender was not initialized"),!1;if(mr(qe))qe[R_e]=ct._sample[sq];else return At&&Rr(At,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ct._sample[sq]}),!1;return!0}s(Ih,"_validate");function Mx(qe,At){var er=qe.iKey||Di,Br=v.constructEnvelope(qe,er,At,Ni);if(!Br){Rr(At,1,47,"Unable to create an AppInsights envelope");return}var Qn=!1;if(qe[Vl]&&qe[Vl][pse]&&(Wr(qe[Vl][pse],function(vn){try{vn&&vn(Br)===!1&&(Qn=!0,ek(At,"Telemetry processor check returns false"))}catch(co){Rr(At,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+Gc(co),{exception:Ft(co)},!0)}}),delete qe[Vl][pse]),!Qn)return Br}s(Mx,"_getEnvelope");function ta(qe){var At=fSe,er=ct[ku]();try{var Br=Ih(qe,er),Qn=null;Br&&(Qn=Mx(qe,er)),Qn&&(At=ee.serialize(Qn))}catch{}return At}s(ta,"_serialize");function $l(qe){var At=fSe;return qe&&qe[Ri]&&(At="["+qe.join(",")+"]"),At}s($l,"_batch");function pt(qe){var At=Oo();return{urlString:je,data:qe,headers:At}}s(pt,"_createPayload");function mr(qe){return ct._sample.isSampledIn(qe)}s(mr,"_isSampledIn");function Fn(qe,At,er,Br){At===200&&qe?ct._onSuccess(qe,qe[Ri]):Br&&ct[Vw](qe,Br)}s(Fn,"_getOnComplete");function Nr(qe,At,er,Br){Br===void 0&&(Br=!0);var Qn=s(function(Ja,d0,Ci){return Fn(At,Ja,d0,Ci)},"onComplete"),vn=On(At),co=qe&&qe.sendPOST;return co&&vn?(Br&&ct._buffer[nq](At),co(vn,Qn,!er)):null}s(Nr,"_doSend");function On(qe){if(tt(qe)&&qe[Ri]>0){var At=ct[FA].batchPayloads(qe),er=Oo(),Br={data:At,urlString:je,headers:er,disableXhrSync:qr,disableFetchKeepAlive:!bo,oriPayload:qe};return Br}return null}s(On,"_getPayload");function Oo(){try{var qe=Ce||{};return O_e(je)&&(qe[P_e[6]]=P_e[7]),qe}catch{}return null}s(Oo,"_getHeaders");function Ho(qe){var At=qe?qe[Ri]:0;return ct[FA].size()+At>rt?((!Ke||Ke.isOnline())&&ct[jN](!0,null,10),!0):!1}s(Ho,"_checkMaxSize");function Rs(qe,At,er,Br,Qn,vn){var co=null;if(ct._appId||(co=Dr(vn),co&&co.appId&&(ct._appId=co.appId)),(qe<200||qe>=300)&&qe!==0){if((qe===301||qe===307||qe===308)&&!Pu(er)){ct[Vw](At,Qn);return}if(Ke&&!Ke.isOnline()){if(!Bo){var Ja=10;JN(At,Ja),Rr(ct[ku](),2,40,". Offline - Response Code: ".concat(qe,". Offline status: ").concat(!Ke.isOnline(),". Will retry to send ").concat(At.length," items."))}return}!Bo&&Ox(qe)?(JN(At),Rr(ct[ku](),2,40,". Response code "+qe+". Will retry to send "+At[Ri]+" items.")):ct[Vw](At,Qn)}else Pu(er),qe===206?(co||(co=Dr(vn)),co&&!Bo?ct[Lse](At,co):ct[Vw](At,Qn)):(S=0,ct[oq](At,Br))}s(Rs,"_checkResponsStatus");function Pu(qe){return ce>=10?!1:!X(qe)&&qe!==""&&qe!==je?(je=qe,++ce,!0):!1}s(Pu,"_checkAndUpdateEndPointUrl");function sf(qe,At){if(Le)Le(qe,!1);else{var er=Do&&Do[iq]([3],!0);return Nr(er,qe,At)}}s(sf,"_doUnloadSend");function Th(qe,At,er){var Br=qe,Qn=Br&&Br.oriPayload;if(Ea)Pn&&Pn(Qn,!0),Rr(ct[ku](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var vn=[],co=0;co<Qn[Ri];co++){var Ja=Qn[co],d0=[Ja],Ci=On(d0);er(Ci,At)?ct._onSuccess(d0,d0[Ri]):vn[d1](Ja)}vn[Ri]>0&&(Pn&&Pn(vn,!0),Rr(ct[ku](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Th,"_onBeaconRetry");function wh(qe){try{if(qe&&qe[Ri])return he(qe[0])}catch{}return null}s(wh,"_isStringArr");function vk(qe,At){var er=null;if(tt(qe)){for(var Br=qe[Ri],Qn=0;Qn<qe[Ri];Qn++)Br+=qe[Qn].item[Ri];var vn=Do.getSyncFetchPayload();vn+Br<=Gmt?er=2:_A()?er=3:(er=1,Rr(ct[ku](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var co=Do&&Do[iq]([er],!0);return Nr(co,qe,At)}return null}s(vk,"_fetchKeepAliveSender");function JN(qe,At){if(At===void 0&&(At=1),!(!qe||qe[Ri]===0)){var er=ct[FA];er[HN](qe),S++;for(var Br=0,Qn=qe;Br<Qn.length;Br++){var vn=Qn[Br];vn.cnt=vn.cnt||0,vn.cnt++,er[Gw](vn)}Hse(At),xk()}}s(JN,"_resendPayload");function Hse(qe){var At=10,er;if(S<=1)er=At;else{var Br=(Math.pow(2,S)-1)/2,Qn=WC(Math.random()*Br*At)+1;Qn=qe*Qn,er=_e(ri(Qn,3600),At)}var vn=fA()+er*1e3;D=vn}s(Hse,"_setRetryTime");function xk(){if(!U&&!L){var qe=D?_e(0,D-fA()):0,At=_e(yn,qe);U=hA(function(){U=null,ct[jN](!0,null,1)},At)}}s(xk,"_setupTimer");function Fx(){U&&U.cancel(),U=null,D=null}s(Fx,"_clearScheduledTimer");function Ox(qe){return X(hl)?qe===401||qe===408||qe===429||qe===500||qe===502||qe===503||qe===504:hl[Ri]&&hl.indexOf(qe)>-1}s(Ox,"_isRetriable");function cq(){var qe="getNotifyMgr";return ct.core[qe]?ct.core[qe]():ct.core._notificationManager}s(cq,"_getNotifyMgr");function lq(qe,At){var er=cq();if(er&&er.eventsSendRequest)try{er.eventsSendRequest(qe,At)}catch(Br){Rr(ct[ku](),1,74,"send request notification failed: "+Gc(Br),{exception:Ft(Br)})}}s(lq,"_notifySendRequest");function gSe(qe,At){var er=At.disableInstrumentationKeyValidation,Br=X(er)?!1:er;if(Br)return!0;var Qn="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",vn=new RegExp(Qn);return vn.test(qe)}s(gSe,"_validateInstrumentationKey");function ASe(){ct[VN]=null,ct[FA]=null,ct._appId=null,ct._sample=null,Ce={},Ke=null,S=0,D=null,L=!1,U=null,ee=null,ce=0,Te=0,Le=null,Me=null,je=null,ut=null,rt=0,Ct=!1,Ar=null,Yn=!1,Di=null,Ni=OA,Bo=!1,Ur=null,ea=OA,qr=!1,bo=!1,Ea=!1,Tt=null,Pn=null,Do=null,Ye(ct,"_senderConfig",{g:s(function(){return nU({},mSe)},"g")})}s(ASe,"_initDefaults")}),T}return s(v,"Sender"),v.constructEnvelope=function(T,S,D,L){var U;S!==T.iKey&&!X(S)?U=ph(ph({},T),{iKey:S}):U=T;var ee=$mt[U.baseType]||lSe;return ee(D,U,L)},v}(gt),Ck="instrumentationKey",aq="connectionString",YN="endpointUrl",KN="userOverrideEndpointUrl",Ek,qse=void 0,zmt=(Ek={diagnosticLogInterval:yN(Ymt,1e4)},Ek[aq]=qse,Ek.endpointUrl=qse,Ek[Ck]=qse,Ek.extensionConfig={},Ek);function Ymt(A){return A&&A>0}s(Ymt,"_chkDiagLevel");var Kmt=function(){function A(v){var T=new _t,S;(X(v)||X(v[Ck])&&X(v[aq]))&&zr("Invalid input configuration"),Gl(A,this,function(L){Ye(L,"config",{g:s(function(){return S},"g")}),U(),L.initialize=U,L.track=D,nN(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function U(){var ee=of(v||{},zmt);S=ee.cfg,T.addUnloadHook(vh(ee,function(){var ce=S[aq];if(It(ce)){var Ce=N5(function(Me,je){Zd(ce,function(ut){var rt=ut.value,Ct=S[Ck];if(!ut.rejected&&rt){S[aq]=rt;var Mt=xse(rt);Ct=Mt.instrumentationkey||Ct}Me(Ct)})}),Te=N5(function(Me,je){Zd(ce,function(ut){var rt=ut.value,Ct=S[YN];if(!ut.rejected&&rt){var Mt=xse(rt),Yt=Mt.ingestionendpoint;Ct=Yt?Yt+uk:Ct}Me(Ct)})});S[Ck]=Ce,S[YN]=S[KN]||Te}if(he(ce)){var Le=xse(ce),Ke=Le.ingestionendpoint;S[YN]=S[KN]?S[KN]:Ke+uk,S[Ck]=Le.instrumentationkey||S[Ck]}S[YN]=S[KN]?S[KN]:S[YN]})),T.initialize(S,[new hSe])}s(U,"_initialize")});function D(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(D,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=_t,t.ApplicationInsights=Kmt,t.Sender=hSe,t.SeverityLevel=wmt,t.arrForEach=Wr,t.isNullOrUndefined=X,t.proxyFunctions=nN,t.throwError=zr})});var Gue=Q((i7r,T8e)=>{d();var M4=1e3,F4=M4*60,O4=F4*60,k_=O4*24,AIt=k_*7,yIt=k_*365.25;T8e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return CIt(t);if(r==="number"&&isFinite(t))return e.long?vIt(t):EIt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function CIt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*yIt;case"weeks":case"week":case"w":return r*AIt;case"days":case"day":case"d":return r*k_;case"hours":case"hour":case"hrs":case"hr":case"h":return r*O4;case"minutes":case"minute":case"mins":case"min":case"m":return r*F4;case"seconds":case"second":case"secs":case"sec":case"s":return r*M4;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(CIt,"parse");function EIt(t){var e=Math.abs(t);return e>=k_?Math.round(t/k_)+"d":e>=O4?Math.round(t/O4)+"h":e>=F4?Math.round(t/F4)+"m":e>=M4?Math.round(t/M4)+"s":t+"ms"}s(EIt,"fmtShort");function vIt(t){var e=Math.abs(t);return e>=k_?hG(t,e,k_,"day"):e>=O4?hG(t,e,O4,"hour"):e>=F4?hG(t,e,F4,"minute"):e>=M4?hG(t,e,M4,"second"):t+" ms"}s(vIt,"fmtLong");function hG(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(hG,"plural")});var jue=Q((a7r,w8e)=>{d();function xIt(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=Gue(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let p=0;for(let m=0;m<f.length;m++)p=(p<<5)-p+f.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(f){let p,m=null,h,g;function y(...E){if(!y.enabled)return;let x=y,b=Number(new Date),_=b-(p||b);x.diff=_,x.prev=p,x.curr=b,p=b,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let k=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(N,M)=>{if(N==="%%")return"%";k++;let J=r.formatters[M];if(typeof J=="function"){let se=E[k];N=J.call(x,se),E.splice(k,1),k--}return N}),r.formatArgs.call(x,E),(x.log||r.log).apply(x,E)}return s(y,"debug"),y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(f)),g),"get"),set:s(E=>{m=E},"set")}),typeof r.init=="function"&&r.init(y),y}s(r,"createDebug");function n(f,p){let m=r(this.namespace+(typeof p>"u"?":":p)+f);return m.log=this.log,m}s(n,"extend");function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let p,m=(typeof f=="string"?f:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(f=m[p].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}s(i,"enable");function o(){let f=[...r.names.map(c),...r.skips.map(c).map(p=>"-"+p)].join(",");return r.enable(""),f}s(o,"disable");function a(f){if(f[f.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(f))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(f))return!0;return!1}s(a,"enabled");function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}s(c,"toNamespace");function l(f){return f instanceof Error?f.stack||f.message:f}s(l,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(xIt,"setup");w8e.exports=xIt});var _8e=Q((S0,gG)=>{d();S0.formatArgs=IIt;S0.save=TIt;S0.load=wIt;S0.useColors=bIt;S0.storage=_It();S0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();S0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function bIt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(bIt,"useColors");function IIt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+gG.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(IIt,"formatArgs");S0.log=console.debug||console.log||(()=>{});function TIt(t){try{t?S0.storage.setItem("debug",t):S0.storage.removeItem("debug")}catch{}}s(TIt,"save");function wIt(){let t;try{t=S0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(wIt,"load");function _It(){try{return localStorage}catch{}}s(_It,"localstorage");gG.exports=jue()(S0);var{formatters:SIt}=gG.exports;SIt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var R8e=Q((f7r,S8e)=>{"use strict";d();S8e.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var B8e=Q((m7r,P8e)=>{"use strict";d();var RIt=require("os"),k8e=require("tty"),Xp=R8e(),{env:Il}=process,yb;Xp("no-color")||Xp("no-colors")||Xp("color=false")||Xp("color=never")?yb=0:(Xp("color")||Xp("colors")||Xp("color=true")||Xp("color=always"))&&(yb=1);"FORCE_COLOR"in Il&&(Il.FORCE_COLOR==="true"?yb=1:Il.FORCE_COLOR==="false"?yb=0:yb=Il.FORCE_COLOR.length===0?1:Math.min(parseInt(Il.FORCE_COLOR,10),3));function Vue(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(Vue,"translateLevel");function $ue(t,e){if(yb===0)return 0;if(Xp("color=16m")||Xp("color=full")||Xp("color=truecolor"))return 3;if(Xp("color=256"))return 2;if(t&&!e&&yb===void 0)return 0;let r=yb||0;if(Il.TERM==="dumb")return r;if(process.platform==="win32"){let n=RIt.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Il)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Il)||Il.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Il)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Il.TEAMCITY_VERSION)?1:0;if(Il.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Il){let n=parseInt((Il.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Il.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Il.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Il.TERM)||"COLORTERM"in Il?1:r}s($ue,"supportsColor");function kIt(t){let e=$ue(t,t&&t.isTTY);return Vue(e)}s(kIt,"getSupportLevel");P8e.exports={supportsColor:kIt,stdout:Vue($ue(!0,k8e.isatty(1))),stderr:Vue($ue(!0,k8e.isatty(2)))}});var N8e=Q((su,yG)=>{d();var PIt=require("tty"),AG=require("util");su.init=OIt;su.log=LIt;su.formatArgs=DIt;su.save=MIt;su.load=FIt;su.useColors=BIt;su.destroy=AG.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");su.colors=[6,2,3,4,5,1];try{let t=B8e();t&&(t.stderr||t).level>=2&&(su.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}su.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function BIt(){return"colors"in su.inspectOpts?!!su.inspectOpts.colors:PIt.isatty(process.stderr.fd)}s(BIt,"useColors");function DIt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+yG.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=NIt()+e+" "+t[0]}s(DIt,"formatArgs");function NIt(){return su.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(NIt,"getDate");function LIt(...t){return process.stderr.write(AG.format(...t)+`
`)}s(LIt,"log");function MIt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(MIt,"save");function FIt(){return process.env.DEBUG}s(FIt,"load");function OIt(t){t.inspectOpts={};let e=Object.keys(su.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=su.inspectOpts[e[r]]}s(OIt,"init");yG.exports=jue()(su);var{formatters:D8e}=yG.exports;D8e.o=function(t){return this.inspectOpts.colors=this.useColors,AG.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};D8e.O=function(t){return this.inspectOpts.colors=this.useColors,AG.inspect(t,this.inspectOpts)}});var oy=Q((C7r,zue)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?zue.exports=_8e():zue.exports=N8e()});var F8e=Q(Cf=>{"use strict";d();var QIt=Cf&&Cf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),UIt=Cf&&Cf.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),L8e=Cf&&Cf.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&QIt(e,t,r);return UIt(e,t),e};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.req=Cf.json=Cf.toBuffer=void 0;var qIt=L8e(require("http")),HIt=L8e(require("https"));async function M8e(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}s(M8e,"toBuffer");Cf.toBuffer=M8e;async function WIt(t){let r=(await M8e(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}s(WIt,"json");Cf.json=WIt;function GIt(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?HIt:qIt).request(t,e),i=new Promise((o,a)=>{n.once("response",o).once("error",a).end()});return n.then=i.then.bind(i),n}s(GIt,"req");Cf.req=GIt});var Kue=Q(R0=>{"use strict";d();var Q8e=R0&&R0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jIt=R0&&R0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),U8e=R0&&R0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Q8e(e,t,r);return jIt(e,t),e},VIt=R0&&R0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Q8e(e,t,r)};Object.defineProperty(R0,"__esModule",{value:!0});R0.Agent=void 0;var $It=U8e(require("net")),O8e=U8e(require("http")),zIt=require("https");VIt(F8e(),R0);var sy=Symbol("AgentBaseInternalState"),Yue=class extends O8e.Agent{static{s(this,"Agent")}constructor(e){super(e),this[sy]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new $It.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?zIt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},o=this.getName(i),a=this.incrementSockets(o);Promise.resolve().then(()=>this.connect(e,i)).then(c=>{if(this.decrementSockets(o,a),c instanceof O8e.Agent)return c.addRequest(e,i);this[sy].currentSocket=c,super.createSocket(e,r,n)},c=>{this.decrementSockets(o,a),n(c)})}createConnection(){let e=this[sy].currentSocket;if(this[sy].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[sy].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[sy]&&(this[sy].defaultPort=e)}get protocol(){return this[sy].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[sy]&&(this[sy].protocol=e)}};R0.Agent=Yue});var q8e=Q(Q4=>{"use strict";d();var YIt=Q4&&Q4.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Q4,"__esModule",{value:!0});Q4.parseProxyResponse=void 0;var KIt=YIt(oy()),CG=(0,KIt.default)("https-proxy-agent:parse-proxy-response");function JIt(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let f=t.read();f?u(f):t.once("readable",o)}s(o,"read");function a(){t.removeListener("end",c),t.removeListener("error",l),t.removeListener("readable",o)}s(a,"cleanup");function c(){a(),CG("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}s(c,"onend");function l(f){a(),CG("onerror %o",f),r(f)}s(l,"onerror");function u(f){i.push(f),n+=f.length;let p=Buffer.concat(i,n),m=p.indexOf(`\r
\r
`);if(m===-1){CG("have not received end of HTTP headers yet..."),o();return}let h=p.slice(0,m).toString("ascii").split(`\r
`),g=h.shift();if(!g)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let y=g.split(" "),E=+y[1],x=y.slice(2).join(" "),b={};for(let _ of h){if(!_)continue;let k=_.indexOf(":");if(k===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${_}"`));let P=_.slice(0,k).toLowerCase(),N=_.slice(k+1).trimStart(),M=b[P];typeof M=="string"?b[P]=[M,N]:Array.isArray(M)?M.push(N):b[P]=N}CG("got proxy server response: %o %o",g,b),a(),e({connect:{statusCode:E,statusText:x,headers:b},buffered:p})}s(u,"ondata"),t.on("error",l),t.on("end",c),o()})}s(JIt,"parseProxyResponse");Q4.parseProxyResponse=JIt});var V8e=Q(Zp=>{"use strict";d();var XIt=Zp&&Zp.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ZIt=Zp&&Zp.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),G8e=Zp&&Zp.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&XIt(e,t,r);return ZIt(e,t),e},j8e=Zp&&Zp.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zp,"__esModule",{value:!0});Zp.HttpsProxyAgent=void 0;var Jue=G8e(require("net")),H8e=G8e(require("tls")),eTt=j8e(require("assert")),tTt=j8e(oy()),rTt=Kue(),nTt=require("url"),iTt=q8e(),Z6=(0,tTt.default)("https-proxy-agent"),EG=class extends rTt.Agent{static{s(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new nTt.URL(e):e,this.proxyHeaders=r?.headers??{},Z6("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?W8e(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;if(n.protocol==="https:"){Z6("Creating `tls.Socket`: %o",this.connectOpts);let m=this.connectOpts.servername||this.connectOpts.host;i=H8e.connect({...this.connectOpts,servername:m})}else Z6("Creating `net.Socket`: %o",this.connectOpts),i=Jue.connect(this.connectOpts);let o=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},a=Jue.isIPv6(r.host)?`[${r.host}]`:r.host,c=`CONNECT ${a}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let m=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(m).toString("base64")}`}o.Host=`${a}:${r.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let m of Object.keys(o))c+=`${m}: ${o[m]}\r
`;let l=(0,iTt.parseProxyResponse)(i);i.write(`${c}\r
`);let{connect:u,buffered:f}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200){if(e.once("socket",oTt),r.secureEndpoint){Z6("Upgrading socket connection to TLS");let m=r.servername||r.host;return H8e.connect({...W8e(r,"host","path","port"),socket:i,servername:m})}return i}i.destroy();let p=new Jue.Socket({writable:!1});return p.readable=!0,e.once("socket",m=>{Z6("Replaying proxy buffer for failed request"),(0,eTt.default)(m.listenerCount("data")>0),m.push(f),m.push(null)}),p}};EG.protocols=["http","https"];Zp.HttpsProxyAgent=EG;function oTt(t){t.resume()}s(oTt,"resume");function W8e(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(W8e,"omit")});var Y8e=Q(em=>{"use strict";d();var sTt=em&&em.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aTt=em&&em.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),z8e=em&&em.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&sTt(e,t,r);return aTt(e,t),e},cTt=em&&em.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(em,"__esModule",{value:!0});em.HttpProxyAgent=void 0;var lTt=z8e(require("net")),uTt=z8e(require("tls")),dTt=cTt(oy()),fTt=require("events"),pTt=Kue(),$8e=require("url"),U4=(0,dTt.default)("http-proxy-agent"),vG=class extends pTt.Agent{static{s(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new $8e.URL(e):e,this.proxyHeaders=r?.headers??{},U4("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?mTt(r,"headers"):null,host:n,port:i}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,i=r.secureEndpoint?"https:":"http:",o=e.getHeader("host")||"localhost",a=`${i}//${o}`,c=new $8e.URL(e.path,a);r.port!==80&&(c.port=String(r.port)),e.path=String(c);let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(l)){let f=l[u];f&&e.setHeader(u,f)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,i;U4("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(U4("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,i=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(i),U4("Output buffer: %o",e.outputData[0].data));let o;return this.proxy.protocol==="https:"?(U4("Creating `tls.Socket`: %o",this.connectOpts),o=uTt.connect(this.connectOpts)):(U4("Creating `net.Socket`: %o",this.connectOpts),o=lTt.connect(this.connectOpts)),await(0,fTt.once)(o,"connect"),o}};vG.protocols=["http","https"];em.HttpProxyAgent=vG;function mTt(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(mTt,"omit")});var ANe=Q(MG=>{"use strict";d();Object.defineProperty(MG,"__esModule",{value:!0});MG.state=void 0;MG.state={instrumenterImplementation:void 0}});var TNe=Q(qG=>{"use strict";d();Object.defineProperty(qG,"__esModule",{value:!0});qG.state=void 0;qG.state={operationRequestMap:new WeakMap}});var uP=Q((Xfe,R6e)=>{d();var Dj=require("buffer"),Ay=Dj.Buffer;function S6e(t,e){for(var r in t)e[r]=t[r]}s(S6e,"copyProps");Ay.from&&Ay.alloc&&Ay.allocUnsafe&&Ay.allocUnsafeSlow?R6e.exports=Dj:(S6e(Dj,Xfe),Xfe.Buffer=CS);function CS(t,e,r){return Ay(t,e,r)}s(CS,"SafeBuffer");CS.prototype=Object.create(Ay.prototype);S6e(Ay,CS);CS.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ay(t,e,r)};CS.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ay(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};CS.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ay(t)};CS.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Dj.SlowBuffer(t)}});var Zfe=Q((Gin,k6e)=>{d();var Nj=uP().Buffer,V_t=require("stream"),$_t=require("util");function Lj(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=Nj.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=Nj.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}s(Lj,"DataStream");$_t.inherits(Lj,V_t);Lj.prototype.write=s(function(e){this.buffer=Nj.concat([this.buffer,Nj.from(e)]),this.emit("data",e)},"write");Lj.prototype.end=s(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");k6e.exports=Lj});var B6e=Q(($in,P6e)=>{"use strict";d();function e0e(t){var e=(t/8|0)+(t%8===0?0:1);return e}s(e0e,"getParamSize");var z_t={ES256:e0e(256),ES384:e0e(384),ES512:e0e(521)};function Y_t(t){var e=z_t[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}s(Y_t,"getParamBytesForAlg");P6e.exports=Y_t});var Q6e=Q((Kin,O6e)=>{"use strict";d();var Mj=uP().Buffer,N6e=B6e(),Fj=128,L6e=0,K_t=32,J_t=16,X_t=2,M6e=J_t|K_t|L6e<<6,Oj=X_t|L6e<<6;function Z_t(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(Z_t,"base64Url");function F6e(t){if(Mj.isBuffer(t))return t;if(typeof t=="string")return Mj.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}s(F6e,"signatureAsBuffer");function eSt(t,e){t=F6e(t);var r=N6e(e),n=r+1,i=t.length,o=0;if(t[o++]!==M6e)throw new Error('Could not find expected "seq"');var a=t[o++];if(a===(Fj|1)&&(a=t[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(t[o++]!==Oj)throw new Error('Could not find expected "int" for "r"');var c=t[o++];if(i-o-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(i-o-2)+'" available');if(n<c)throw new Error('"r" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=o;if(o+=c,t[o++]!==Oj)throw new Error('Could not find expected "int" for "s"');var u=t[o++];if(i-o!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-o)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var f=o;if(o+=u,o!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var p=r-c,m=r-u,h=Mj.allocUnsafe(p+c+m+u);for(o=0;o<p;++o)h[o]=0;t.copy(h,o,l+Math.max(-p,0),l+c),o=r;for(var g=o;o<g+m;++o)h[o]=0;return t.copy(h,o,f+Math.max(-m,0),f+u),h=h.toString("base64"),h=Z_t(h),h}s(eSt,"derToJose");function D6e(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=Fj;return i&&--n,n}s(D6e,"countPadding");function tSt(t,e){t=F6e(t);var r=N6e(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=D6e(t,0,r),o=D6e(t,r,t.length),a=r-i,c=r-o,l=2+a+1+1+c,u=l<Fj,f=Mj.allocUnsafe((u?2:3)+l),p=0;return f[p++]=M6e,u?f[p++]=l:(f[p++]=Fj|1,f[p++]=l&255),f[p++]=Oj,f[p++]=a,i<0?(f[p++]=0,p+=t.copy(f,p,0,r)):p+=t.copy(f,p,i,r),f[p++]=Oj,f[p++]=c,o<0?(f[p++]=0,t.copy(f,p,r)):t.copy(f,p,r+o),f}s(tSt,"joseToDer");O6e.exports={derToJose:eSt,joseToDer:tSt}});var q6e=Q((Zin,U6e)=>{"use strict";d();var dL=require("buffer").Buffer,t0e=require("buffer").SlowBuffer;U6e.exports=Qj;function Qj(t,e){if(!dL.isBuffer(t)||!dL.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}s(Qj,"bufferEq");Qj.install=function(){dL.prototype.equal=t0e.prototype.equal=s(function(e){return Qj(this,e)},"equal")};var rSt=dL.prototype.equal,nSt=t0e.prototype.equal;Qj.restore=function(){dL.prototype.equal=rSt,t0e.prototype.equal=nSt}});var o0e=Q((ron,K6e)=>{d();var fP=uP().Buffer,nm=require("crypto"),W6e=Q6e(),H6e=require("util"),iSt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,fL="secret must be a string or buffer",dP="key must be a string or a buffer",oSt="key must be a string, a buffer or an object",n0e=typeof nm.createPublicKey=="function";n0e&&(dP+=" or a KeyObject",fL+="or a KeyObject");function G6e(t){if(!fP.isBuffer(t)&&typeof t!="string"&&(!n0e||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw eg(dP)}s(G6e,"checkIsPublicKey");function j6e(t){if(!fP.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw eg(oSt)}s(j6e,"checkIsPrivateKey");function sSt(t){if(!fP.isBuffer(t)){if(typeof t=="string")return t;if(!n0e||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw eg(fL)}}s(sSt,"checkIsSecretKey");function i0e(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(i0e,"fromBase64");function V6e(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}s(V6e,"toBase64");function eg(t){var e=[].slice.call(arguments,1),r=H6e.format.bind(H6e,t).apply(null,e);return new TypeError(r)}s(eg,"typeError");function aSt(t){return fP.isBuffer(t)||typeof t=="string"}s(aSt,"bufferOrString");function pL(t){return aSt(t)||(t=JSON.stringify(t)),t}s(pL,"normalizeInput");function $6e(t){return s(function(r,n){sSt(n),r=pL(r);var i=nm.createHmac("sha"+t,n),o=(i.update(r),i.digest("base64"));return i0e(o)},"sign")}s($6e,"createHmacSigner");var r0e,cSt="timingSafeEqual"in nm?s(function(e,r){return e.byteLength!==r.byteLength?!1:nm.timingSafeEqual(e,r)},"timingSafeEqual"):s(function(e,r){return r0e||(r0e=q6e()),r0e(e,r)},"timingSafeEqual");function lSt(t){return s(function(r,n,i){var o=$6e(t)(r,i);return cSt(fP.from(n),fP.from(o))},"verify")}s(lSt,"createHmacVerifier");function z6e(t){return s(function(r,n){j6e(n),r=pL(r);var i=nm.createSign("RSA-SHA"+t),o=(i.update(r),i.sign(n,"base64"));return i0e(o)},"sign")}s(z6e,"createKeySigner");function Y6e(t){return s(function(r,n,i){G6e(i),r=pL(r),n=V6e(n);var o=nm.createVerify("RSA-SHA"+t);return o.update(r),o.verify(i,n,"base64")},"verify")}s(Y6e,"createKeyVerifier");function uSt(t){return s(function(r,n){j6e(n),r=pL(r);var i=nm.createSign("RSA-SHA"+t),o=(i.update(r),i.sign({key:n,padding:nm.constants.RSA_PKCS1_PSS_PADDING,saltLength:nm.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return i0e(o)},"sign")}s(uSt,"createPSSKeySigner");function dSt(t){return s(function(r,n,i){G6e(i),r=pL(r),n=V6e(n);var o=nm.createVerify("RSA-SHA"+t);return o.update(r),o.verify({key:i,padding:nm.constants.RSA_PKCS1_PSS_PADDING,saltLength:nm.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}s(dSt,"createPSSKeyVerifier");function fSt(t){var e=z6e(t);return s(function(){var n=e.apply(null,arguments);return n=W6e.derToJose(n,"ES"+t),n},"sign")}s(fSt,"createECDSASigner");function pSt(t){var e=Y6e(t);return s(function(n,i,o){i=W6e.joseToDer(i,"ES"+t).toString("base64");var a=e(n,i,o);return a},"verify")}s(pSt,"createECDSAVerifer");function mSt(){return s(function(){return""},"sign")}s(mSt,"createNoneSigner");function hSt(){return s(function(e,r){return r===""},"verify")}s(hSt,"createNoneVerifier");K6e.exports=s(function(e){var r={hs:$6e,rs:z6e,ps:uSt,es:fSt,none:mSt},n={hs:lSt,rs:Y6e,ps:dSt,es:pSt,none:hSt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw eg(iSt,e);var o=(i[1]||i[3]).toLowerCase(),a=i[2];return{sign:r[o](a),verify:n[o](a)}},"jwa")});var s0e=Q((oon,J6e)=>{d();var gSt=require("buffer").Buffer;J6e.exports=s(function(e){return typeof e=="string"?e:typeof e=="number"||gSt.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var n9e=Q((con,r9e)=>{d();var ASt=uP().Buffer,X6e=Zfe(),ySt=o0e(),CSt=require("stream"),Z6e=s0e(),a0e=require("util");function e9e(t,e){return ASt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(e9e,"base64url");function ESt(t,e,r){r=r||"utf8";var n=e9e(Z6e(t),"binary"),i=e9e(Z6e(e),r);return a0e.format("%s.%s",n,i)}s(ESt,"jwsSecuredInput");function t9e(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,o=ySt(e.alg),a=ESt(e,r,i),c=o.sign(a,n);return a0e.format("%s.%s",a,c)}s(t9e,"jwsSign");function Uj(t){var e=t.secret||t.privateKey||t.key,r=new X6e(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new X6e(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}s(Uj,"SignStream");a0e.inherits(Uj,CSt);Uj.prototype.sign=s(function(){try{var e=t9e({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");Uj.sign=t9e;r9e.exports=Uj});var p9e=Q((don,f9e)=>{d();var o9e=uP().Buffer,i9e=Zfe(),vSt=o0e(),xSt=require("stream"),s9e=s0e(),bSt=require("util"),ISt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function TSt(t){return Object.prototype.toString.call(t)==="[object Object]"}s(TSt,"isObject");function wSt(t){if(TSt(t))return t;try{return JSON.parse(t)}catch{return}}s(wSt,"safeJsonParse");function a9e(t){var e=t.split(".",1)[0];return wSt(o9e.from(e,"base64").toString("binary"))}s(a9e,"headerFromJWS");function _St(t){return t.split(".",2).join(".")}s(_St,"securedInputFromJWS");function c9e(t){return t.split(".")[2]}s(c9e,"signatureFromJWS");function SSt(t,e){e=e||"utf8";var r=t.split(".")[1];return o9e.from(r,"base64").toString(e)}s(SSt,"payloadFromJWS");function l9e(t){return ISt.test(t)&&!!a9e(t)}s(l9e,"isValidJws");function u9e(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=s9e(t);var i=c9e(t),o=_St(t),a=vSt(e);return a.verify(o,i,r)}s(u9e,"jwsVerify");function d9e(t,e){if(e=e||{},t=s9e(t),!l9e(t))return null;var r=a9e(t);if(!r)return null;var n=SSt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:c9e(t)}}s(d9e,"jwsDecode");function pP(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new i9e(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new i9e(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}s(pP,"VerifyStream");bSt.inherits(pP,xSt);pP.prototype.verify=s(function(){try{var e=u9e(this.signature.buffer,this.algorithm,this.key.buffer),r=d9e(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");pP.decode=d9e;pP.isValid=l9e;pP.verify=u9e;f9e.exports=pP});var Hj=Q(Qb=>{d();var m9e=n9e(),qj=p9e(),RSt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Qb.ALGORITHMS=RSt;Qb.sign=m9e.sign;Qb.verify=qj.verify;Qb.decode=qj.decode;Qb.isValid=qj.isValid;Qb.createSign=s(function(e){return new m9e(e)},"createSign");Qb.createVerify=s(function(e){return new qj(e)},"createVerify")});var c0e=Q((Aon,h9e)=>{d();var kSt=Hj();h9e.exports=function(t,e){e=e||{};var r=kSt.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var mL=Q((Con,g9e)=>{d();var Wj=s(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");Wj.prototype=Object.create(Error.prototype);Wj.prototype.constructor=Wj;g9e.exports=Wj});var l0e=Q((xon,y9e)=>{d();var A9e=mL(),Gj=s(function(t,e){A9e.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");Gj.prototype=Object.create(A9e.prototype);Gj.prototype.constructor=Gj;y9e.exports=Gj});var u0e=Q((Ton,E9e)=>{d();var C9e=mL(),jj=s(function(t,e){C9e.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");jj.prototype=Object.create(C9e.prototype);jj.prototype.constructor=jj;E9e.exports=jj});var d0e=Q((Son,v9e)=>{d();var PSt=Gue();v9e.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=PSt(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var hL=Q((kon,x9e)=>{d();var BSt="2.0.0",DSt=Number.MAX_SAFE_INTEGER||9007199254740991,NSt=16,LSt=250,MSt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];x9e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:NSt,MAX_SAFE_BUILD_LENGTH:LSt,MAX_SAFE_INTEGER:DSt,RELEASE_TYPES:MSt,SEMVER_SPEC_VERSION:BSt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var gL=Q((Bon,b9e)=>{d();var FSt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};b9e.exports=FSt});var mP=Q((yy,I9e)=>{d();var{MAX_SAFE_COMPONENT_LENGTH:f0e,MAX_SAFE_BUILD_LENGTH:OSt,MAX_LENGTH:QSt}=hL(),USt=gL();yy=I9e.exports={};var qSt=yy.re=[],HSt=yy.safeRe=[],yr=yy.src=[],WSt=yy.safeSrc=[],Cr=yy.t={},GSt=0,p0e="[a-zA-Z0-9-]",jSt=[["\\s",1],["\\d",QSt],[p0e,OSt]],VSt=s(t=>{for(let[e,r]of jSt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),li=s((t,e,r)=>{let n=VSt(e),i=GSt++;USt(t,i,e),Cr[t]=i,yr[i]=e,WSt[i]=n,qSt[i]=new RegExp(e,r?"g":void 0),HSt[i]=new RegExp(n,r?"g":void 0)},"createToken");li("NUMERICIDENTIFIER","0|[1-9]\\d*");li("NUMERICIDENTIFIERLOOSE","\\d+");li("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p0e}*`);li("MAINVERSION",`(${yr[Cr.NUMERICIDENTIFIER]})\\.(${yr[Cr.NUMERICIDENTIFIER]})\\.(${yr[Cr.NUMERICIDENTIFIER]})`);li("MAINVERSIONLOOSE",`(${yr[Cr.NUMERICIDENTIFIERLOOSE]})\\.(${yr[Cr.NUMERICIDENTIFIERLOOSE]})\\.(${yr[Cr.NUMERICIDENTIFIERLOOSE]})`);li("PRERELEASEIDENTIFIER",`(?:${yr[Cr.NUMERICIDENTIFIER]}|${yr[Cr.NONNUMERICIDENTIFIER]})`);li("PRERELEASEIDENTIFIERLOOSE",`(?:${yr[Cr.NUMERICIDENTIFIERLOOSE]}|${yr[Cr.NONNUMERICIDENTIFIER]})`);li("PRERELEASE",`(?:-(${yr[Cr.PRERELEASEIDENTIFIER]}(?:\\.${yr[Cr.PRERELEASEIDENTIFIER]})*))`);li("PRERELEASELOOSE",`(?:-?(${yr[Cr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${yr[Cr.PRERELEASEIDENTIFIERLOOSE]})*))`);li("BUILDIDENTIFIER",`${p0e}+`);li("BUILD",`(?:\\+(${yr[Cr.BUILDIDENTIFIER]}(?:\\.${yr[Cr.BUILDIDENTIFIER]})*))`);li("FULLPLAIN",`v?${yr[Cr.MAINVERSION]}${yr[Cr.PRERELEASE]}?${yr[Cr.BUILD]}?`);li("FULL",`^${yr[Cr.FULLPLAIN]}$`);li("LOOSEPLAIN",`[v=\\s]*${yr[Cr.MAINVERSIONLOOSE]}${yr[Cr.PRERELEASELOOSE]}?${yr[Cr.BUILD]}?`);li("LOOSE",`^${yr[Cr.LOOSEPLAIN]}$`);li("GTLT","((?:<|>)?=?)");li("XRANGEIDENTIFIERLOOSE",`${yr[Cr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);li("XRANGEIDENTIFIER",`${yr[Cr.NUMERICIDENTIFIER]}|x|X|\\*`);li("XRANGEPLAIN",`[v=\\s]*(${yr[Cr.XRANGEIDENTIFIER]})(?:\\.(${yr[Cr.XRANGEIDENTIFIER]})(?:\\.(${yr[Cr.XRANGEIDENTIFIER]})(?:${yr[Cr.PRERELEASE]})?${yr[Cr.BUILD]}?)?)?`);li("XRANGEPLAINLOOSE",`[v=\\s]*(${yr[Cr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${yr[Cr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${yr[Cr.XRANGEIDENTIFIERLOOSE]})(?:${yr[Cr.PRERELEASELOOSE]})?${yr[Cr.BUILD]}?)?)?`);li("XRANGE",`^${yr[Cr.GTLT]}\\s*${yr[Cr.XRANGEPLAIN]}$`);li("XRANGELOOSE",`^${yr[Cr.GTLT]}\\s*${yr[Cr.XRANGEPLAINLOOSE]}$`);li("COERCEPLAIN",`(^|[^\\d])(\\d{1,${f0e}})(?:\\.(\\d{1,${f0e}}))?(?:\\.(\\d{1,${f0e}}))?`);li("COERCE",`${yr[Cr.COERCEPLAIN]}(?:$|[^\\d])`);li("COERCEFULL",yr[Cr.COERCEPLAIN]+`(?:${yr[Cr.PRERELEASE]})?(?:${yr[Cr.BUILD]})?(?:$|[^\\d])`);li("COERCERTL",yr[Cr.COERCE],!0);li("COERCERTLFULL",yr[Cr.COERCEFULL],!0);li("LONETILDE","(?:~>?)");li("TILDETRIM",`(\\s*)${yr[Cr.LONETILDE]}\\s+`,!0);yy.tildeTrimReplace="$1~";li("TILDE",`^${yr[Cr.LONETILDE]}${yr[Cr.XRANGEPLAIN]}$`);li("TILDELOOSE",`^${yr[Cr.LONETILDE]}${yr[Cr.XRANGEPLAINLOOSE]}$`);li("LONECARET","(?:\\^)");li("CARETTRIM",`(\\s*)${yr[Cr.LONECARET]}\\s+`,!0);yy.caretTrimReplace="$1^";li("CARET",`^${yr[Cr.LONECARET]}${yr[Cr.XRANGEPLAIN]}$`);li("CARETLOOSE",`^${yr[Cr.LONECARET]}${yr[Cr.XRANGEPLAINLOOSE]}$`);li("COMPARATORLOOSE",`^${yr[Cr.GTLT]}\\s*(${yr[Cr.LOOSEPLAIN]})$|^$`);li("COMPARATOR",`^${yr[Cr.GTLT]}\\s*(${yr[Cr.FULLPLAIN]})$|^$`);li("COMPARATORTRIM",`(\\s*)${yr[Cr.GTLT]}\\s*(${yr[Cr.LOOSEPLAIN]}|${yr[Cr.XRANGEPLAIN]})`,!0);yy.comparatorTrimReplace="$1$2$3";li("HYPHENRANGE",`^\\s*(${yr[Cr.XRANGEPLAIN]})\\s+-\\s+(${yr[Cr.XRANGEPLAIN]})\\s*$`);li("HYPHENRANGELOOSE",`^\\s*(${yr[Cr.XRANGEPLAINLOOSE]})\\s+-\\s+(${yr[Cr.XRANGEPLAINLOOSE]})\\s*$`);li("STAR","(<|>)?=?\\s*\\*");li("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");li("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Vj=Q((Mon,T9e)=>{d();var $St=Object.freeze({loose:!0}),zSt=Object.freeze({}),YSt=s(t=>t?typeof t!="object"?$St:t:zSt,"parseOptions");T9e.exports=YSt});var m0e=Q((Qon,S9e)=>{d();var w9e=/^[0-9]+$/,_9e=s((t,e)=>{let r=w9e.test(t),n=w9e.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),KSt=s((t,e)=>_9e(e,t),"rcompareIdentifiers");S9e.exports={compareIdentifiers:_9e,rcompareIdentifiers:KSt}});var Gu=Q((Hon,B9e)=>{d();var $j=gL(),{MAX_LENGTH:R9e,MAX_SAFE_INTEGER:zj}=hL(),{safeRe:k9e,safeSrc:P9e,t:Yj}=mP(),JSt=Vj(),{compareIdentifiers:hP}=m0e(),h0e=class t{static{s(this,"SemVer")}constructor(e,r){if(r=JSt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>R9e)throw new TypeError(`version is longer than ${R9e} characters`);$j("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?k9e[Yj.LOOSE]:k9e[Yj.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>zj||this.major<0)throw new TypeError("Invalid major version");if(this.minor>zj||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>zj||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<zj)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if($j("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),hP(this.major,e.major)||hP(this.minor,e.minor)||hP(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if($j("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return hP(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if($j("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return hP(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=new RegExp(`^${this.options.loose?P9e[Yj.PRERELEASELOOSE]:P9e[Yj.PRERELEASE]}$`),o=`-${r}`.match(i);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),hP(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};B9e.exports=h0e});var ES=Q((jon,N9e)=>{d();var D9e=Gu(),XSt=s((t,e,r=!1)=>{if(t instanceof D9e)return t;try{return new D9e(t,e)}catch(n){if(!r)return null;throw n}},"parse");N9e.exports=XSt});var M9e=Q((zon,L9e)=>{d();var ZSt=ES(),e2t=s((t,e)=>{let r=ZSt(t,e);return r?r.version:null},"valid");L9e.exports=e2t});var O9e=Q((Jon,F9e)=>{d();var t2t=ES(),r2t=s((t,e)=>{let r=t2t(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");F9e.exports=r2t});var q9e=Q((esn,U9e)=>{d();var Q9e=Gu(),n2t=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new Q9e(t instanceof Q9e?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");U9e.exports=n2t});var G9e=Q((nsn,W9e)=>{d();var H9e=ES(),i2t=s((t,e)=>{let r=H9e(t,null,!0),n=H9e(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,c=o?n:r,l=!!a.prerelease.length;if(!!c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(c.compareMain(a)===0)return c.minor&&!c.patch?"minor":"patch"}let f=l?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"},"diff");W9e.exports=i2t});var V9e=Q((ssn,j9e)=>{d();var o2t=Gu(),s2t=s((t,e)=>new o2t(t,e).major,"major");j9e.exports=s2t});var z9e=Q((lsn,$9e)=>{d();var a2t=Gu(),c2t=s((t,e)=>new a2t(t,e).minor,"minor");$9e.exports=c2t});var K9e=Q((fsn,Y9e)=>{d();var l2t=Gu(),u2t=s((t,e)=>new l2t(t,e).patch,"patch");Y9e.exports=u2t});var X9e=Q((hsn,J9e)=>{d();var d2t=ES(),f2t=s((t,e)=>{let r=d2t(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");J9e.exports=f2t});var im=Q((ysn,eLe)=>{d();var Z9e=Gu(),p2t=s((t,e,r)=>new Z9e(t,r).compare(new Z9e(e,r)),"compare");eLe.exports=p2t});var rLe=Q((vsn,tLe)=>{d();var m2t=im(),h2t=s((t,e,r)=>m2t(e,t,r),"rcompare");tLe.exports=h2t});var iLe=Q((Isn,nLe)=>{d();var g2t=im(),A2t=s((t,e)=>g2t(t,e,!0),"compareLoose");nLe.exports=A2t});var Kj=Q((_sn,sLe)=>{d();var oLe=Gu(),y2t=s((t,e,r)=>{let n=new oLe(t,r),i=new oLe(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");sLe.exports=y2t});var cLe=Q((ksn,aLe)=>{d();var C2t=Kj(),E2t=s((t,e)=>t.sort((r,n)=>C2t(r,n,e)),"sort");aLe.exports=E2t});var uLe=Q((Dsn,lLe)=>{d();var v2t=Kj(),x2t=s((t,e)=>t.sort((r,n)=>v2t(n,r,e)),"rsort");lLe.exports=x2t});var AL=Q((Msn,dLe)=>{d();var b2t=im(),I2t=s((t,e,r)=>b2t(t,e,r)>0,"gt");dLe.exports=I2t});var Jj=Q((Qsn,fLe)=>{d();var T2t=im(),w2t=s((t,e,r)=>T2t(t,e,r)<0,"lt");fLe.exports=w2t});var g0e=Q((Hsn,pLe)=>{d();var _2t=im(),S2t=s((t,e,r)=>_2t(t,e,r)===0,"eq");pLe.exports=S2t});var A0e=Q((jsn,mLe)=>{d();var R2t=im(),k2t=s((t,e,r)=>R2t(t,e,r)!==0,"neq");mLe.exports=k2t});var Xj=Q((zsn,hLe)=>{d();var P2t=im(),B2t=s((t,e,r)=>P2t(t,e,r)>=0,"gte");hLe.exports=B2t});var Zj=Q((Jsn,gLe)=>{d();var D2t=im(),N2t=s((t,e,r)=>D2t(t,e,r)<=0,"lte");gLe.exports=N2t});var y0e=Q((ean,ALe)=>{d();var L2t=g0e(),M2t=A0e(),F2t=AL(),O2t=Xj(),Q2t=Jj(),U2t=Zj(),q2t=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return L2t(t,r,n);case"!=":return M2t(t,r,n);case">":return F2t(t,r,n);case">=":return O2t(t,r,n);case"<":return Q2t(t,r,n);case"<=":return U2t(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");ALe.exports=q2t});var CLe=Q((nan,yLe)=>{d();var H2t=Gu(),W2t=ES(),{safeRe:eV,t:tV}=mP(),G2t=s((t,e)=>{if(t instanceof H2t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?eV[tV.COERCEFULL]:eV[tV.COERCE]);else{let l=e.includePrerelease?eV[tV.COERCERTLFULL]:eV[tV.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return W2t(`${n}.${i}.${o}${a}${c}`,e)},"coerce");yLe.exports=G2t});var vLe=Q((san,ELe)=>{d();var C0e=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};ELe.exports=C0e});var om=Q((lan,TLe)=>{d();var j2t=/\s+/g,E0e=class t{static{s(this,"Range")}constructor(e,r){if(r=$2t(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof v0e)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(j2t," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!bLe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&eRt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&X2t)|(this.options.loose&&Z2t))+":"+e,i=xLe.get(n);if(i)return i;let o=this.options.loose,a=o?Tf[_d.HYPHENRANGELOOSE]:Tf[_d.HYPHENRANGE];e=e.replace(a,uRt(this.options.includePrerelease)),qs("hyphen replace",e),e=e.replace(Tf[_d.COMPARATORTRIM],Y2t),qs("comparator trim",e),e=e.replace(Tf[_d.TILDETRIM],K2t),qs("tilde trim",e),e=e.replace(Tf[_d.CARETTRIM],J2t),qs("caret trim",e);let c=e.split(" ").map(p=>tRt(p,this.options)).join(" ").split(/\s+/).map(p=>lRt(p,this.options));o&&(c=c.filter(p=>(qs("loose invalid filter",p,this.options),!!p.match(Tf[_d.COMPARATORLOOSE])))),qs("range list",c);let l=new Map,u=c.map(p=>new v0e(p,this.options));for(let p of u){if(bLe(p))return[p];l.set(p.value,p)}l.size>1&&l.has("")&&l.delete("");let f=[...l.values()];return xLe.set(n,f),f}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>ILe(n,r)&&e.set.some(i=>ILe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new z2t(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(dRt(this.set[r],e,this.options))return!0;return!1}};TLe.exports=E0e;var V2t=vLe(),xLe=new V2t,$2t=Vj(),v0e=yL(),qs=gL(),z2t=Gu(),{safeRe:Tf,t:_d,comparatorTrimReplace:Y2t,tildeTrimReplace:K2t,caretTrimReplace:J2t}=mP(),{FLAG_INCLUDE_PRERELEASE:X2t,FLAG_LOOSE:Z2t}=hL(),bLe=s(t=>t.value==="<0.0.0-0","isNullSet"),eRt=s(t=>t.value==="","isAny"),ILe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),tRt=s((t,e)=>(qs("comp",t,e),t=iRt(t,e),qs("caret",t),t=rRt(t,e),qs("tildes",t),t=sRt(t,e),qs("xrange",t),t=cRt(t,e),qs("stars",t),t),"parseComparator"),Sd=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),rRt=s((t,e)=>t.trim().split(/\s+/).map(r=>nRt(r,e)).join(" "),"replaceTildes"),nRt=s((t,e)=>{let r=e.loose?Tf[_d.TILDELOOSE]:Tf[_d.TILDE];return t.replace(r,(n,i,o,a,c)=>{qs("tilde",t,n,i,o,a,c);let l;return Sd(i)?l="":Sd(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:Sd(a)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(qs("replaceTilde pr",c),l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,qs("tilde return",l),l})},"replaceTilde"),iRt=s((t,e)=>t.trim().split(/\s+/).map(r=>oRt(r,e)).join(" "),"replaceCarets"),oRt=s((t,e)=>{qs("caret",t,e);let r=e.loose?Tf[_d.CARETLOOSE]:Tf[_d.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,c,l)=>{qs("caret",t,i,o,a,c,l);let u;return Sd(o)?u="":Sd(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Sd(c)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:l?(qs("replaceCaret pr",l),o==="0"?a==="0"?u=`>=${o}.${a}.${c}-${l} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}-${l} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c}-${l} <${+o+1}.0.0-0`):(qs("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${c}${n} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c} <${+o+1}.0.0-0`),qs("caret return",u),u})},"replaceCaret"),sRt=s((t,e)=>(qs("replaceXRanges",t,e),t.split(/\s+/).map(r=>aRt(r,e)).join(" ")),"replaceXRanges"),aRt=s((t,e)=>{t=t.trim();let r=e.loose?Tf[_d.XRANGELOOSE]:Tf[_d.XRANGE];return t.replace(r,(n,i,o,a,c,l)=>{qs("xRange",t,n,i,o,a,c,l);let u=Sd(o),f=u||Sd(a),p=f||Sd(c),m=p;return i==="="&&m&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(f&&(a=0),c=0,i===">"?(i=">=",f?(o=+o+1,a=0,c=0):(a=+a+1,c=0)):i==="<="&&(i="<",f?o=+o+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+o}.${a}.${c}${l}`):f?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${l} <${o}.${+a+1}.0-0`),qs("xRange return",n),n})},"replaceXRange"),cRt=s((t,e)=>(qs("replaceStars",t,e),t.trim().replace(Tf[_d.STAR],"")),"replaceStars"),lRt=s((t,e)=>(qs("replaceGTE0",t,e),t.trim().replace(Tf[e.includePrerelease?_d.GTE0PRE:_d.GTE0],"")),"replaceGTE0"),uRt=s(t=>(e,r,n,i,o,a,c,l,u,f,p,m)=>(Sd(n)?r="":Sd(i)?r=`>=${n}.0.0${t?"-0":""}`:Sd(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Sd(u)?l="":Sd(f)?l=`<${+u+1}.0.0-0`:Sd(p)?l=`<${u}.${+f+1}.0-0`:m?l=`<=${u}.${f}.${p}-${m}`:t?l=`<${u}.${f}.${+p+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),"hyphenReplace"),dRt=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(qs(t[n].semver),t[n].semver!==v0e.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var yL=Q((fan,PLe)=>{d();var CL=Symbol("SemVer ANY"),I0e=class t{static{s(this,"Comparator")}static get ANY(){return CL}constructor(e,r){if(r=wLe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),b0e("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===CL?this.value="":this.value=this.operator+this.semver.version,b0e("comp",this)}parse(e){let r=this.options.loose?_Le[SLe.COMPARATORLOOSE]:_Le[SLe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new RLe(n[2],this.options.loose):this.semver=CL}toString(){return this.value}test(e){if(b0e("Comparator.test",e,this.options.loose),this.semver===CL||e===CL)return!0;if(typeof e=="string")try{e=new RLe(e,this.options)}catch{return!1}return x0e(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new kLe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new kLe(this.value,r).test(e.semver):(r=wLe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||x0e(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||x0e(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};PLe.exports=I0e;var wLe=Vj(),{safeRe:_Le,t:SLe}=mP(),x0e=y0e(),b0e=gL(),RLe=Gu(),kLe=om()});var EL=Q((han,BLe)=>{d();var fRt=om(),pRt=s((t,e,r)=>{try{e=new fRt(e,r)}catch{return!1}return e.test(t)},"satisfies");BLe.exports=pRt});var NLe=Q((yan,DLe)=>{d();var mRt=om(),hRt=s((t,e)=>new mRt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");DLe.exports=hRt});var MLe=Q((van,LLe)=>{d();var gRt=Gu(),ARt=om(),yRt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new ARt(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new gRt(n,r))}),n},"maxSatisfying");LLe.exports=yRt});var OLe=Q((Ian,FLe)=>{d();var CRt=Gu(),ERt=om(),vRt=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new ERt(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new CRt(n,r))}),n},"minSatisfying");FLe.exports=vRt});var qLe=Q((_an,ULe)=>{d();var T0e=Gu(),xRt=om(),QLe=AL(),bRt=s((t,e)=>{t=new xRt(t,e);let r=new T0e("0.0.0");if(t.test(r)||(r=new T0e("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let c=new T0e(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||QLe(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||QLe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");ULe.exports=bRt});var WLe=Q((kan,HLe)=>{d();var IRt=om(),TRt=s((t,e)=>{try{return new IRt(t,e).range||"*"}catch{return null}},"validRange");HLe.exports=TRt});var rV=Q((Dan,$Le)=>{d();var wRt=Gu(),VLe=yL(),{ANY:_Rt}=VLe,SRt=om(),RRt=EL(),GLe=AL(),jLe=Jj(),kRt=Zj(),PRt=Xj(),BRt=s((t,e,r,n)=>{t=new wRt(t,n),e=new SRt(e,n);let i,o,a,c,l;switch(r){case">":i=GLe,o=kRt,a=jLe,c=">",l=">=";break;case"<":i=jLe,o=PRt,a=GLe,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(RRt(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let f=e.set[u],p=null,m=null;if(f.forEach(h=>{h.semver===_Rt&&(h=new VLe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===c||p.operator===l||(!m.operator||m.operator===c)&&o(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0},"outside");$Le.exports=BRt});var YLe=Q((Man,zLe)=>{d();var DRt=rV(),NRt=s((t,e,r)=>DRt(t,e,">",r),"gtr");zLe.exports=NRt});var JLe=Q((Qan,KLe)=>{d();var LRt=rV(),MRt=s((t,e,r)=>LRt(t,e,"<",r),"ltr");KLe.exports=MRt});var eMe=Q((Han,ZLe)=>{d();var XLe=om(),FRt=s((t,e,r)=>(t=new XLe(t,r),e=new XLe(e,r),t.intersects(e,r)),"intersects");ZLe.exports=FRt});var rMe=Q((jan,tMe)=>{d();var ORt=EL(),QRt=im();tMe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((f,p)=>QRt(f,p,r));for(let f of a)ORt(f,e,r)?(o=f,i||(i=f)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let c=[];for(let[f,p]of n)f===p?c.push(f):!p&&f===a[0]?c.push("*"):p?f===a[0]?c.push(`<=${p}`):c.push(`${f} - ${p}`):c.push(`>=${f}`);let l=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var cMe=Q(($an,aMe)=>{d();var nMe=om(),_0e=yL(),{ANY:w0e}=_0e,vL=EL(),S0e=im(),URt=s((t,e,r={})=>{if(t===e)return!0;t=new nMe(t,r),e=new nMe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=HRt(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),qRt=[new _0e(">=0.0.0-0")],iMe=[new _0e(">=0.0.0")],HRt=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===w0e){if(e.length===1&&e[0].semver===w0e)return!0;r.includePrerelease?t=qRt:t=iMe}if(e.length===1&&e[0].semver===w0e){if(r.includePrerelease)return!0;e=iMe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=oMe(i,h,r):h.operator==="<"||h.operator==="<="?o=sMe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=S0e(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!vL(h,String(i),r)||o&&!vL(h,String(o),r))return null;for(let g of e)if(!vL(h,String(g),r))return!1;return!0}let c,l,u,f,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(f=f||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(c=oMe(i,h,r),c===h&&c!==i)return!1}else if(i.operator===">="&&!vL(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(l=sMe(o,h,r),l===h&&l!==o)return!1}else if(o.operator==="<="&&!vL(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&f&&!i&&a!==0||m||p)},"simpleSubset"),oMe=s((t,e,r)=>{if(!t)return e;let n=S0e(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),sMe=s((t,e,r)=>{if(!t)return e;let n=S0e(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");aMe.exports=URt});var gP=Q((Kan,dMe)=>{d();var R0e=mP(),lMe=hL(),WRt=Gu(),uMe=m0e(),GRt=ES(),jRt=M9e(),VRt=O9e(),$Rt=q9e(),zRt=G9e(),YRt=V9e(),KRt=z9e(),JRt=K9e(),XRt=X9e(),ZRt=im(),e5t=rLe(),t5t=iLe(),r5t=Kj(),n5t=cLe(),i5t=uLe(),o5t=AL(),s5t=Jj(),a5t=g0e(),c5t=A0e(),l5t=Xj(),u5t=Zj(),d5t=y0e(),f5t=CLe(),p5t=yL(),m5t=om(),h5t=EL(),g5t=NLe(),A5t=MLe(),y5t=OLe(),C5t=qLe(),E5t=WLe(),v5t=rV(),x5t=YLe(),b5t=JLe(),I5t=eMe(),T5t=rMe(),w5t=cMe();dMe.exports={parse:GRt,valid:jRt,clean:VRt,inc:$Rt,diff:zRt,major:YRt,minor:KRt,patch:JRt,prerelease:XRt,compare:ZRt,rcompare:e5t,compareLoose:t5t,compareBuild:r5t,sort:n5t,rsort:i5t,gt:o5t,lt:s5t,eq:a5t,neq:c5t,gte:l5t,lte:u5t,cmp:d5t,coerce:f5t,Comparator:p5t,Range:m5t,satisfies:h5t,toComparators:g5t,maxSatisfying:A5t,minSatisfying:y5t,minVersion:C5t,validRange:E5t,outside:v5t,gtr:x5t,ltr:b5t,intersects:I5t,simplifyRange:T5t,subset:w5t,SemVer:WRt,re:R0e.re,src:R0e.src,tokens:R0e.t,SEMVER_SPEC_VERSION:lMe.SEMVER_SPEC_VERSION,RELEASE_TYPES:lMe.RELEASE_TYPES,compareIdentifiers:uMe.compareIdentifiers,rcompareIdentifiers:uMe.rcompareIdentifiers}});var pMe=Q((Xan,fMe)=>{d();var _5t=gP();fMe.exports=_5t.satisfies(process.version,">=15.7.0")});var hMe=Q((ecn,mMe)=>{d();var S5t=gP();mMe.exports=S5t.satisfies(process.version,">=16.9.0")});var k0e=Q((rcn,gMe)=>{d();var R5t=pMe(),k5t=hMe(),P5t={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},B5t={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};gMe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=P5t[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(R5t)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,o=B5t[t];if(i!==o)throw new Error(`"alg" parameter "${t}" requires curve "${o}".`);break;case"rsa-pss":if(k5t){let a=parseInt(t.slice(-3),10),{hashAlgorithm:c,mgf1HashAlgorithm:l,saltLength:u}=e.asymmetricKeyDetails;if(c!==`sha${a}`||l!==c)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var P0e=Q((icn,AMe)=>{d();var D5t=gP();AMe.exports=D5t.satisfies(process.version,"^6.12.0 || >=8.0.0")});var EMe=Q((scn,CMe)=>{d();var vs=mL(),N5t=l0e(),yMe=u0e(),L5t=c0e(),M5t=d0e(),F5t=k0e(),O5t=P0e(),Q5t=Hj(),{KeyObject:U5t,createSecretKey:q5t,createPublicKey:H5t}=require("crypto"),B0e=["RS256","RS384","RS512"],W5t=["ES256","ES384","ES512"],D0e=["RS256","RS384","RS512"],G5t=["HS256","HS384","HS512"];O5t&&(B0e.splice(B0e.length,0,"PS256","PS384","PS512"),D0e.splice(D0e.length,0,"PS256","PS384","PS512"));CMe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=s(function(f,p){if(f)throw f;return p},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new vs("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new vs("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new vs("allowInvalidAsymmetricKeyTypes must be a boolean"));let o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new vs("jwt must be provided"));if(typeof t!="string")return i(new vs("jwt must be a string"));let a=t.split(".");if(a.length!==3)return i(new vs("jwt malformed"));let c;try{c=L5t(t,{complete:!0})}catch(f){return i(f)}if(!c)return i(new vs("invalid token"));let l=c.header,u;if(typeof e=="function"){if(!n)return i(new vs("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=s(function(f,p){return p(null,e)},"getSecret");return u(l,function(f,p){if(f)return i(new vs("error in secret or public key callback: "+f.message));let m=a[2].trim()!=="";if(!m&&p)return i(new vs("jwt signature is required"));if(m&&!p)return i(new vs("secret or public key must be provided"));if(!m&&!r.algorithms)return i(new vs('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof U5t))try{p=H5t(p)}catch{try{p=q5t(typeof p=="string"?Buffer.from(p):p)}catch{return i(new vs("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(p.type==="secret"?r.algorithms=G5t:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?r.algorithms=D0e:p.asymmetricKeyType==="ec"?r.algorithms=W5t:r.algorithms=B0e),r.algorithms.indexOf(c.header.alg)===-1)return i(new vs("invalid algorithm"));if(l.alg.startsWith("HS")&&p.type!=="secret")return i(new vs(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&p.type!=="public")return i(new vs(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{F5t(l.alg,p)}catch(y){return i(y)}let h;try{h=Q5t.verify(t,c.header.alg,p)}catch(y){return i(y)}if(!h)return i(new vs("invalid signature"));let g=c.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return i(new vs("invalid nbf value"));if(g.nbf>o+(r.clockTolerance||0))return i(new N5t("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return i(new vs("invalid exp value"));if(o>=g.exp+(r.clockTolerance||0))return i(new yMe("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let y=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(b){return y.some(function(_){return _ instanceof RegExp?_.test(b):_===b})}))return i(new vs("jwt audience invalid. expected: "+y.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return i(new vs("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return i(new vs("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return i(new vs("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return i(new vs("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return i(new vs("iat required when maxAge is specified"));let y=M5t(r.maxAge,g.iat);if(typeof y>"u")return i(new vs('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=y+(r.clockTolerance||0))return i(new yMe("maxAge exceeded",new Date(y*1e3)))}if(r.complete===!0){let y=c.signature;return i(null,{header:l,payload:g,signature:y})}return i(null,g)})}});var wMe=Q((lcn,TMe)=>{d();var vMe=1/0,bMe=9007199254740991,j5t=17976931348623157e292,xMe=NaN,V5t="[object Arguments]",$5t="[object Function]",z5t="[object GeneratorFunction]",Y5t="[object String]",K5t="[object Symbol]",J5t=/^\s+|\s+$/g,X5t=/^[-+]0x[0-9a-f]+$/i,Z5t=/^0b[01]+$/i,ekt=/^0o[0-7]+$/i,tkt=/^(?:0|[1-9]\d*)$/,rkt=parseInt;function nkt(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}s(nkt,"arrayMap");function ikt(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}s(ikt,"baseFindIndex");function okt(t,e,r){if(e!==e)return ikt(t,skt,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}s(okt,"baseIndexOf");function skt(t){return t!==t}s(skt,"baseIsNaN");function akt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}s(akt,"baseTimes");function ckt(t,e){return nkt(e,function(r){return t[r]})}s(ckt,"baseValues");function lkt(t,e){return function(r){return t(e(r))}}s(lkt,"overArg");var nV=Object.prototype,L0e=nV.hasOwnProperty,iV=nV.toString,ukt=nV.propertyIsEnumerable,dkt=lkt(Object.keys,Object),fkt=Math.max;function pkt(t,e){var r=IMe(t)||ykt(t)?akt(t.length,String):[],n=r.length,i=!!n;for(var o in t)(e||L0e.call(t,o))&&!(i&&(o=="length"||hkt(o,n)))&&r.push(o);return r}s(pkt,"arrayLikeKeys");function mkt(t){if(!gkt(t))return dkt(t);var e=[];for(var r in Object(t))L0e.call(t,r)&&r!="constructor"&&e.push(r);return e}s(mkt,"baseKeys");function hkt(t,e){return e=e??bMe,!!e&&(typeof t=="number"||tkt.test(t))&&t>-1&&t%1==0&&t<e}s(hkt,"isIndex");function gkt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||nV;return t===r}s(gkt,"isPrototype");function Akt(t,e,r,n){t=M0e(t)?t:Skt(t),r=r&&!n?Tkt(r):0;var i=t.length;return r<0&&(r=fkt(i+r,0)),xkt(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&okt(t,e,r)>-1}s(Akt,"includes");function ykt(t){return Ckt(t)&&L0e.call(t,"callee")&&(!ukt.call(t,"callee")||iV.call(t)==V5t)}s(ykt,"isArguments");var IMe=Array.isArray;function M0e(t){return t!=null&&vkt(t.length)&&!Ekt(t)}s(M0e,"isArrayLike");function Ckt(t){return F0e(t)&&M0e(t)}s(Ckt,"isArrayLikeObject");function Ekt(t){var e=N0e(t)?iV.call(t):"";return e==$5t||e==z5t}s(Ekt,"isFunction");function vkt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bMe}s(vkt,"isLength");function N0e(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(N0e,"isObject");function F0e(t){return!!t&&typeof t=="object"}s(F0e,"isObjectLike");function xkt(t){return typeof t=="string"||!IMe(t)&&F0e(t)&&iV.call(t)==Y5t}s(xkt,"isString");function bkt(t){return typeof t=="symbol"||F0e(t)&&iV.call(t)==K5t}s(bkt,"isSymbol");function Ikt(t){if(!t)return t===0?t:0;if(t=wkt(t),t===vMe||t===-vMe){var e=t<0?-1:1;return e*j5t}return t===t?t:0}s(Ikt,"toFinite");function Tkt(t){var e=Ikt(t),r=e%1;return e===e?r?e-r:e:0}s(Tkt,"toInteger");function wkt(t){if(typeof t=="number")return t;if(bkt(t))return xMe;if(N0e(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=N0e(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(J5t,"");var r=Z5t.test(t);return r||ekt.test(t)?rkt(t.slice(2),r?2:8):X5t.test(t)?xMe:+t}s(wkt,"toNumber");function _kt(t){return M0e(t)?pkt(t):mkt(t)}s(_kt,"keys");function Skt(t){return t?ckt(t,_kt(t)):[]}s(Skt,"values");TMe.exports=Akt});var SMe=Q((fcn,_Me)=>{d();var Rkt="[object Boolean]",kkt=Object.prototype,Pkt=kkt.toString;function Bkt(t){return t===!0||t===!1||Dkt(t)&&Pkt.call(t)==Rkt}s(Bkt,"isBoolean");function Dkt(t){return!!t&&typeof t=="object"}s(Dkt,"isObjectLike");_Me.exports=Bkt});var DMe=Q((hcn,BMe)=>{d();var RMe=1/0,Nkt=17976931348623157e292,kMe=NaN,Lkt="[object Symbol]",Mkt=/^\s+|\s+$/g,Fkt=/^[-+]0x[0-9a-f]+$/i,Okt=/^0b[01]+$/i,Qkt=/^0o[0-7]+$/i,Ukt=parseInt,qkt=Object.prototype,Hkt=qkt.toString;function Wkt(t){return typeof t=="number"&&t==$kt(t)}s(Wkt,"isInteger");function PMe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(PMe,"isObject");function Gkt(t){return!!t&&typeof t=="object"}s(Gkt,"isObjectLike");function jkt(t){return typeof t=="symbol"||Gkt(t)&&Hkt.call(t)==Lkt}s(jkt,"isSymbol");function Vkt(t){if(!t)return t===0?t:0;if(t=zkt(t),t===RMe||t===-RMe){var e=t<0?-1:1;return e*Nkt}return t===t?t:0}s(Vkt,"toFinite");function $kt(t){var e=Vkt(t),r=e%1;return e===e?r?e-r:e:0}s($kt,"toInteger");function zkt(t){if(typeof t=="number")return t;if(jkt(t))return kMe;if(PMe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=PMe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Mkt,"");var r=Okt.test(t);return r||Qkt.test(t)?Ukt(t.slice(2),r?2:8):Fkt.test(t)?kMe:+t}s(zkt,"toNumber");BMe.exports=Wkt});var LMe=Q((ycn,NMe)=>{d();var Ykt="[object Number]",Kkt=Object.prototype,Jkt=Kkt.toString;function Xkt(t){return!!t&&typeof t=="object"}s(Xkt,"isObjectLike");function Zkt(t){return typeof t=="number"||Xkt(t)&&Jkt.call(t)==Ykt}s(Zkt,"isNumber");NMe.exports=Zkt});var QMe=Q((vcn,OMe)=>{d();var e4t="[object Object]";function t4t(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}s(t4t,"isHostObject");function r4t(t,e){return function(r){return t(e(r))}}s(r4t,"overArg");var n4t=Function.prototype,MMe=Object.prototype,FMe=n4t.toString,i4t=MMe.hasOwnProperty,o4t=FMe.call(Object),s4t=MMe.toString,a4t=r4t(Object.getPrototypeOf,Object);function c4t(t){return!!t&&typeof t=="object"}s(c4t,"isObjectLike");function l4t(t){if(!c4t(t)||s4t.call(t)!=e4t||t4t(t))return!1;var e=a4t(t);if(e===null)return!0;var r=i4t.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&FMe.call(r)==o4t}s(l4t,"isPlainObject");OMe.exports=l4t});var qMe=Q((Icn,UMe)=>{d();var u4t="[object String]",d4t=Object.prototype,f4t=d4t.toString,p4t=Array.isArray;function m4t(t){return!!t&&typeof t=="object"}s(m4t,"isObjectLike");function h4t(t){return typeof t=="string"||!p4t(t)&&m4t(t)&&f4t.call(t)==u4t}s(h4t,"isString");UMe.exports=h4t});var VMe=Q((_cn,jMe)=>{d();var g4t="Expected a function",HMe=1/0,A4t=17976931348623157e292,WMe=NaN,y4t="[object Symbol]",C4t=/^\s+|\s+$/g,E4t=/^[-+]0x[0-9a-f]+$/i,v4t=/^0b[01]+$/i,x4t=/^0o[0-7]+$/i,b4t=parseInt,I4t=Object.prototype,T4t=I4t.toString;function w4t(t,e){var r;if(typeof e!="function")throw new TypeError(g4t);return t=P4t(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}s(w4t,"before");function _4t(t){return w4t(2,t)}s(_4t,"once");function GMe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(GMe,"isObject");function S4t(t){return!!t&&typeof t=="object"}s(S4t,"isObjectLike");function R4t(t){return typeof t=="symbol"||S4t(t)&&T4t.call(t)==y4t}s(R4t,"isSymbol");function k4t(t){if(!t)return t===0?t:0;if(t=B4t(t),t===HMe||t===-HMe){var e=t<0?-1:1;return e*A4t}return t===t?t:0}s(k4t,"toFinite");function P4t(t){var e=k4t(t),r=e%1;return e===e?r?e-r:e:0}s(P4t,"toInteger");function B4t(t){if(typeof t=="number")return t;if(R4t(t))return WMe;if(GMe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=GMe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(C4t,"");var r=v4t.test(t);return r||x4t.test(t)?b4t(t.slice(2),r?2:8):E4t.test(t)?WMe:+t}s(B4t,"toNumber");jMe.exports=_4t});var tFe=Q((kcn,eFe)=>{d();var $Me=d0e(),D4t=P0e(),N4t=k0e(),zMe=Hj(),L4t=wMe(),oV=SMe(),YMe=DMe(),O0e=LMe(),JMe=QMe(),Ub=qMe(),M4t=VMe(),{KeyObject:F4t,createSecretKey:O4t,createPrivateKey:Q4t}=require("crypto"),XMe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];D4t&&XMe.splice(3,0,"PS256","PS384","PS512");var U4t={expiresIn:{isValid:s(function(t){return YMe(t)||Ub(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:s(function(t){return YMe(t)||Ub(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:s(function(t){return Ub(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:L4t.bind(null,XMe),message:'"algorithm" must be a valid string enum value'},header:{isValid:JMe,message:'"header" must be an object'},encoding:{isValid:Ub,message:'"encoding" must be a string'},issuer:{isValid:Ub,message:'"issuer" must be a string'},subject:{isValid:Ub,message:'"subject" must be a string'},jwtid:{isValid:Ub,message:'"jwtid" must be a string'},noTimestamp:{isValid:oV,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Ub,message:'"keyid" must be a string'},mutatePayload:{isValid:oV,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:oV,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:oV,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},q4t={iat:{isValid:O0e,message:'"iat" should be a number of seconds'},exp:{isValid:O0e,message:'"exp" should be a number of seconds'},nbf:{isValid:O0e,message:'"nbf" should be a number of seconds'}};function ZMe(t,e,r,n){if(!JMe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=t[i];if(!o){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw new Error(o.message)})}s(ZMe,"validate");function H4t(t){return ZMe(U4t,!1,t,"options")}s(H4t,"validateOptions");function W4t(t){return ZMe(q4t,!0,t,"payload")}s(W4t,"validatePayload");var KMe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},G4t=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];eFe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),o=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(n)return n(u);throw u}if(s(a,"failure"),!e&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof F4t))try{e=Q4t(e)}catch{try{e=O4t(typeof e=="string"?Buffer.from(e):e)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(o.alg.startsWith("HS")&&e.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${o.alg}`));if(/^(?:RS|PS|ES)/.test(o.alg)){if(e.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${o.alg}`));if(!r.allowInsecureKeySizes&&!o.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`))}if(typeof t>"u")return a(new Error("payload is required"));if(i){try{W4t(t)}catch(u){return a(u)}r.mutatePayload||(t=Object.assign({},t))}else{let u=G4t.filter(function(f){return typeof r[f]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{H4t(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{N4t(o.alg,e)}catch(u){return a(u)}let c=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=c),typeof r.notBefore<"u"){try{t.nbf=$Me(r.notBefore,c)}catch(u){return a(u)}if(typeof t.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=$Me(r.expiresIn,c)}catch(u){return a(u)}if(typeof t.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(KMe).forEach(function(u){let f=KMe[u];if(typeof r[u]<"u"){if(typeof t[f]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+f+'" property.'));t[f]=r[u]}});let l=r.encoding||"utf8";if(typeof n=="function")n=n&&M4t(n),zMe.createSign({header:o,privateKey:e,payload:t,encoding:l}).once("error",n).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`));n(null,u)});else{let u=zMe.sign({header:o,payload:t,secret:e,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`);return u}}});var nFe=Q((Dcn,rFe)=>{d();rFe.exports={decode:c0e(),verify:EMe(),sign:tFe(),JsonWebTokenError:mL(),NotBeforeError:l0e(),TokenExpiredError:u0e()}});function hPt(){try{return W0e.default.statSync("/.dockerenv"),!0}catch{return!1}}function gPt(){try{return W0e.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function G0e(){return H0e===void 0&&(H0e=hPt()||gPt()),H0e}var W0e,H0e,yFe=_h(()=>{d();W0e=Ne(require("node:fs"),1);s(hPt,"hasDockerEnv");s(gPt,"hasDockerCGroup");s(G0e,"isDocker")});function IP(){return j0e===void 0&&(j0e=APt()||G0e()),j0e}var CFe,j0e,APt,V0e=_h(()=>{d();CFe=Ne(require("node:fs"),1);yFe();APt=s(()=>{try{return CFe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");s(IP,"isInsideContainer")});var $0e,vFe,xFe,EFe,TP,bFe=_h(()=>{d();$0e=Ne(require("node:process"),1),vFe=Ne(require("node:os"),1),xFe=Ne(require("node:fs"),1);V0e();EFe=s(()=>{if($0e.default.platform!=="linux")return!1;if(vFe.default.release().toLowerCase().includes("microsoft"))return!IP();try{return xFe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!IP():!1}catch{return!1}},"isWsl"),TP=$0e.default.env.__IS_WSL_TEST__?EFe:EFe()});function IS(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}var IFe=_h(()=>{d();s(IS,"defineLazyProperty")});async function z0e(){if(wFe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await yPt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var TFe,wFe,_Fe,yPt,SFe=_h(()=>{d();TFe=require("node:util"),wFe=Ne(require("node:process"),1),_Fe=require("node:child_process"),yPt=(0,TFe.promisify)(_Fe.execFile);s(z0e,"defaultBrowserId")});async function PFe(t,{humanReadableOutput:e=!0}={}){if(RFe.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await CPt("osascript",["-e",t,r]);return n.trim()}var RFe,kFe,Y0e,CPt,BFe=_h(()=>{d();RFe=Ne(require("node:process"),1),kFe=require("node:util"),Y0e=require("node:child_process"),CPt=(0,kFe.promisify)(Y0e.execFile);s(PFe,"runAppleScript")});async function K0e(t){return PFe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var DFe=_h(()=>{d();BFe();s(K0e,"bundleName")});async function J0e(t=EPt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new yV(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=vPt[n];if(!i)throw new yV(`Unknown browser ID: ${n}`);return i}var NFe,LFe,EPt,vPt,yV,MFe=_h(()=>{d();NFe=require("node:util"),LFe=require("node:child_process"),EPt=(0,NFe.promisify)(LFe.execFile),vPt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},yV=class extends Error{static{s(this,"UnknownBrowserError")}};s(J0e,"defaultBrowser")});async function X0e(){if(CV.default.platform==="darwin"){let t=await z0e();return{name:await K0e(t),id:t}}if(CV.default.platform==="linux"){let{stdout:t}=await xPt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:bPt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(CV.default.platform==="win32")return J0e();throw new Error("Only macOS, Linux, and Windows are supported")}var FFe,CV,OFe,xPt,bPt,QFe=_h(()=>{d();FFe=require("node:util"),CV=Ne(require("node:process"),1),OFe=require("node:child_process");SFe();DFe();MFe();xPt=(0,FFe.promisify)(OFe.execFile),bPt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");s(X0e,"defaultBrowser")});var $Fe={};ra($Fe,{apps:()=>wS,default:()=>PL,openApp:()=>SPt});async function wPt(){let t=await VFe(),r=epe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:n}=await IPt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}function WFe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[qFe]:e}=t;if(!e)throw new Error(`${qFe} is not supported`);return e}function npe({[wP]:t},{wsl:e}){if(e&&TP)return WFe(e);if(!t)throw new Error(`${wP} is not supported`);return WFe(t)}var RL,epe,tpe,GFe,jFe,rpe,TS,IPt,Z0e,UFe,wP,qFe,TPt,VFe,HFe,kL,_Pt,SPt,wS,PL,EV=_h(()=>{d();RL=Ne(require("node:process"),1),epe=require("node:buffer"),tpe=Ne(require("node:path"),1),GFe=require("node:url"),jFe=Ne(require("node:util"),1),rpe=Ne(require("node:child_process"),1),TS=Ne(require("node:fs/promises"),1);bFe();IFe();QFe();V0e();IPt=jFe.default.promisify(rpe.default.execFile),Z0e=tpe.default.dirname((0,GFe.fileURLToPath)(importMetaUrlShim)),UFe=tpe.default.join(Z0e,"xdg-open"),{platform:wP,arch:qFe}=RL.default,TPt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await TS.default.access(r,TS.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await TS.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),VFe=s(async()=>`${await TPt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");s(wPt,"getWindowsDefaultBrowserFromWsl");HFe=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),kL=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return HFe(t.app,c=>kL({...t,app:c}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return HFe(e,c=>kL({...t,app:{name:c,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let c={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},l={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=TP?await wPt():await X0e();if(u.id in c){let f=c[u.id];return e==="browserPrivate"&&r.push(l[f]),kL({...t,app:{name:wS[f],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(wP==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(wP==="win32"||TP&&!IP()&&!e){n=TP?await VFe():`${RL.default.env.SYSTEMROOT||RL.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),TP||(o.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(l=>`"\`"${l}\`""`),c.push("-ArgumentList",r.join(","))),t.target=epe.Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let c=!Z0e||Z0e==="/",l=!1;try{await TS.default.access(UFe,TS.constants.X_OK),l=!0}catch{}n=RL.default.versions.electron??(wP==="android"||c||!l)?"xdg-open":UFe}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}wP==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=rpe.default.spawn(n,i,o);return t.wait?new Promise((c,l)=>{a.once("error",l),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){l(new Error(`Exited with code ${u}`));return}c(a)})}):(a.unref(),a)},"baseOpen"),_Pt=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return kL({...e,target:t})},"open"),SPt=s((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return kL({...e,app:{name:t,arguments:r}})},"openApp");s(WFe,"detectArchBinary");s(npe,"detectPlatformBinary");wS={};IS(wS,"chrome",()=>npe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));IS(wS,"firefox",()=>npe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));IS(wS,"edge",()=>npe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));IS(wS,"browser",()=>"browser");IS(wS,"browserPrivate",()=>"browserPrivate");PL=_Pt});var AOe=Q(Ey=>{"use strict";d();Object.defineProperty(Ey,"__esModule",{value:!0});Ey.bytePairEncode=Ey.BinaryMap=Ey.binaryMapKey=void 0;var XPt=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),c=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*c},"binaryMapKey");Ey.binaryMapKey=XPt;var ppe=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,Ey.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,Ey.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};Ey.BinaryMap=ppe;var Cy=new Int32Array(128),Pd=new Int32Array(128);function ZPt(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;Cy.length<r*2;)Pd=new Int32Array(Pd.length*2),Cy=new Int32Array(Cy.length*2);for(let l=0;l<r-1;l++){let u=e.get(t,l,l+2)??2147483647;u<n&&(n=u,i=l),Pd[l]=l,Cy[l]=u}Pd[r-1]=r-1,Cy[r-1]=2147483647,Pd[r]=r,Cy[r]=2147483647;let o=r+1;function a(l,u=0){if(l+u+2<o){let f=e.get(t,Pd[l],Pd[l+u+2]);if(f!==void 0)return f}return 2147483647}for(s(a,"getRank");n!==2147483647;){Cy[Pd[i]]=a(i,1),i>0&&(Cy[Pd[i-1]]=a(i-1,1));for(let l=i+1;l<o-1;l++)Pd[l]=Pd[l+1];o--,i=-1,n=2147483647;for(let l=0;l<o-1;l++){let u=Cy[Pd[l]];Cy[Pd[l]]<n&&(n=u,i=l)}}let c=[];for(let l=0;l<o-1;l++)c.push(e.get(t,Pd[l],Pd[l+1]));return c}s(ZPt,"bytePairEncode");Ey.bytePairEncode=ZPt});var yOe=Q(RV=>{"use strict";d();Object.defineProperty(RV,"__esModule",{value:!0});RV.makeTextEncoder=void 0;var mpe=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},hpe=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},e3t=s(()=>typeof Buffer<"u"?new hpe:new mpe,"makeTextEncoder");RV.makeTextEncoder=e3t});var COe=Q(kV=>{"use strict";d();Object.defineProperty(kV,"__esModule",{value:!0});kV.LRUCache=void 0;var gpe=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new Ape(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};kV.LRUCache=gpe;var Ape=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var Cpe=Q(BV=>{"use strict";d();Object.defineProperty(BV,"__esModule",{value:!0});BV.TikTokenizer=void 0;var PV=AOe(),t3t=yOe(),r3t=COe();function n3t(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),c=parseInt(o[1]);if(!isNaN(c))e.set(a,c);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(n3t,"loadTikTokenBpe");function i3t(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(i3t,"escapeRegExp");var ype=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,t3t.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new r3t.LRUCache(i);let o=typeof e=="string"?n3t(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new PV.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>i3t(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let c=this.cache.get(o[0]);if(c)for(let l of c)r.push(l);else{let l=this.textEncoder.encode(o[0]),u=this.encoder.get(l,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let f=(0,PV.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let p of f)r.push(p);this.cache.set(o[0],f)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,c){let l,u=e.substring(n,i);for(this.regex.lastIndex=0;l=this.regex.exec(u);){let f=l[0],p=this.cache.get(f);if(p)if(a+p.length<=o)a+=p.length,c+=f.length,r.push(...p);else{let m=o-a;a+=m,c+=f.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(f),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(f,[h]),a+1<=o)a++,c+=f.length,r.push(h);else break;else{let g=(0,PV.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(f,g),a+g.length<=o){a+=g.length,c+=f.length;for(let y of g)r.push(y)}else{let y=o-a;a+=y,c+=f.length;for(let E=0;E<y;E++)r.push(g[E]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:c}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,c=0;for(;;){let u,f;if([u,f]=this.findNextSpecialToken(e,o,n),f>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,f,r,a,c);if(a=p,c=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),c+=u[0].length,o>=e.length)||a>=r)break}else break}let l=c===e.length?e:e.slice(0,c);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,c=0,l=new Map;for(l.set(a,c);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let E=g[0],x=this.cache.get(E);if(x)a+=x.length,c+=E.length,i.push(...x),l.set(a,c);else{let b=this.textEncoder.encode(E),_=this.encoder.get(b);if(_!==void 0)this.cache.set(E,[_]),a++,c+=E.length,i.push(_),l.set(a,c);else{let k=(0,PV.bytePairEncode)(b,this.encoder,this.textEncoder.length);this.cache.set(E,k),a+=k.length,c+=E.length;for(let P of k)i.push(P);l.set(a,c)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,c+=m[0].length,l.set(a,c),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,f=0,p=0;for(let[m,h]of l)if(m>=u){f=m,p=h;break}if(f>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(f),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let c=this.textEncoder.encode(a);i=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};BV.TikTokenizer=ype});var ROe=Q(kc=>{"use strict";d();Object.defineProperty(kc,"__esModule",{value:!0});kc.createTokenizer=kc.createByEncoderName=kc.createByModelName=kc.getRegexByModel=kc.getRegexByEncoder=kc.getSpecialTokensByModel=kc.getSpecialTokensByEncoder=kc.MODEL_TO_ENCODING=void 0;var o3t=Cpe(),s3t=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);kc.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var DV="<|endoftext|>",EOe="<|fim_prefix|>",vOe="<|fim_middle|>",xOe="<|fim_suffix|>",bOe="<|endofprompt|>",WL="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",IOe="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",a3t=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],TOe=a3t.join("|");function Epe(t){let e="";if(kc.MODEL_TO_ENCODING.has(t))e=kc.MODEL_TO_ENCODING.get(t);else for(let[r,n]of s3t)if(t.startsWith(r)){e=n;break}return e}s(Epe,"getEncoderFromModelName");async function c3t(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(c3t,"fetchAndSaveFile");function vpe(t){let e=new Map([[DV,50256]]);switch(t){case"o200k_base":e=new Map([[DV,199999],[bOe,200018]]);break;case"cl100k_base":e=new Map([[DV,100257],[EOe,100258],[vOe,100259],[xOe,100260],[bOe,100276]]);break;case"p50k_edit":e=new Map([[DV,50256],[EOe,50281],[vOe,50282],[xOe,50283]]);break;default:break}return e}s(vpe,"getSpecialTokensByEncoder");kc.getSpecialTokensByEncoder=vpe;function l3t(t){let e=Epe(t);return vpe(e)}s(l3t,"getSpecialTokensByModel");kc.getSpecialTokensByModel=l3t;function wOe(t){switch(t){case"o200k_base":return TOe;case"cl100k_base":return IOe;default:break}return WL}s(wOe,"getRegexByEncoder");kc.getRegexByEncoder=wOe;function u3t(t){let e=Epe(t);return wOe(e)}s(u3t,"getRegexByModel");kc.getRegexByModel=u3t;async function d3t(t,e=null){return _Oe(Epe(t),e)}s(d3t,"createByModelName");kc.createByModelName=d3t;async function _Oe(t,e=null){let r,n,i=vpe(t);switch(t){case"o200k_base":r=TOe,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=IOe,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=WL,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=WL,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=WL,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=WL,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),c=a.basename(n),l=a.resolve(__dirname,"..","model");o.existsSync(l)||o.mkdirSync(l,{recursive:!0});let u=a.resolve(l,c);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await c3t(n,u),console.log(`Saved file to ${u}`)),SOe(u,i,r)}s(_Oe,"createByEncoderName");kc.createByEncoderName=_Oe;function SOe(t,e,r,n=8192){return new o3t.TikTokenizer(t,e,r,n)}s(SOe,"createTokenizer");kc.createTokenizer=SOe});var kOe=Q(Pc=>{"use strict";d();Object.defineProperty(Pc,"__esModule",{value:!0});Pc.createTokenizer=Pc.createByEncoderName=Pc.createByModelName=Pc.getSpecialTokensByModel=Pc.getSpecialTokensByEncoder=Pc.getRegexByModel=Pc.getRegexByEncoder=Pc.MODEL_TO_ENCODING=Pc.TikTokenizer=void 0;var f3t=Cpe();Object.defineProperty(Pc,"TikTokenizer",{enumerable:!0,get:s(function(){return f3t.TikTokenizer},"get")});var Vb=ROe();Object.defineProperty(Pc,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return Vb.MODEL_TO_ENCODING},"get")});Object.defineProperty(Pc,"getRegexByEncoder",{enumerable:!0,get:s(function(){return Vb.getRegexByEncoder},"get")});Object.defineProperty(Pc,"getRegexByModel",{enumerable:!0,get:s(function(){return Vb.getRegexByModel},"get")});Object.defineProperty(Pc,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return Vb.getSpecialTokensByEncoder},"get")});Object.defineProperty(Pc,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return Vb.getSpecialTokensByModel},"get")});Object.defineProperty(Pc,"createByModelName",{enumerable:!0,get:s(function(){return Vb.createByModelName},"get")});Object.defineProperty(Pc,"createByEncoderName",{enumerable:!0,get:s(function(){return Vb.createByEncoderName},"get")});Object.defineProperty(Pc,"createTokenizer",{enumerable:!0,get:s(function(){return Vb.createTokenizer},"get")})});var kpe=Q((rEn,ZOe)=>{"use strict";d();ZOe.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var t7e=Q((oEn,e7e)=>{"use strict";d();var GDt=kpe();function jDt(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=GDt(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(jDt,"parsePath");e7e.exports=jDt});var a7e=Q((cEn,s7e)=>{"use strict";d();var VDt=t7e();function $Dt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s($Dt,"_interopDefaultLegacy");var zDt=$Dt(VDt);function YDt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(YDt,"getAugmentedNamespace");var n7e={},KDt="text/plain",JDt="us-ascii",r7e=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),XDt=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let c=!1;a[a.length-1]==="base64"&&(a.pop(),c=!0);let l=(a.shift()||"").toLowerCase(),f=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===JDt)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return c&&f.push("base64"),(f.length>0||l&&l!==KDt)&&f.unshift(l),`data:${f.join(";")},${c?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function ZDt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return XDt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,l="";for(;;){let f=a.exec(i.pathname);if(!f)break;let p=f[0],m=f.index,h=i.pathname.slice(c,m);l+=h.replace(/\/{2,}/g,"/"),l+=p,c=m+p.length}let u=i.pathname.slice(c,i.pathname.length);l+=u.replace(/\/{2,}/g,"/"),i.pathname=l}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),c=a[a.length-1];r7e(c,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])r7e(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(ZDt,"normalizeUrl");var e8t=Object.freeze({__proto__:null,default:ZDt}),t8t=YDt(e8t);Object.defineProperty(n7e,"__esModule",{value:!0});var r8t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n8t=t8t,i8t=i7e(n8t),o8t=zDt.default,s8t=i7e(o8t);function i7e(t){return t&&t.__esModule?t:{default:t}}s(i7e,"_interopRequireDefault");var o7e=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(l){var u=new Error(l);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":r8t(r))!=="object"&&(r={stripHash:!1}),e=(0,i8t.default)(e,r));var o=(0,s8t.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");o7e.MAX_INPUT_LENGTH=2048;var a8t=n7e.default=o7e;s7e.exports=a8t});var u7e=Q((dEn,l7e)=>{"use strict";d();var c8t=kpe();function c7e(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=c8t(t);if(t=t.substring(t.indexOf("://")+3),c7e(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s(c7e,"isSsh");l7e.exports=c7e});var p7e=Q((mEn,f7e)=>{"use strict";d();var l8t=a7e(),d7e=u7e();function u8t(t){let e=l8t(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),d7e(e.protocols)||e.protocols.length===0&&d7e(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(u8t,"gitUp");f7e.exports=u8t});var h7e=Q((AEn,m7e)=>{"use strict";d();var d8t=p7e();function Ppe(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(b){return typeof b=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=d8t(t),i=n.resource.split("."),o=null;switch(n.toString=function(b){return Ppe.stringify(this,b)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var c=o.indexOf("-",2),l=o.indexOf("blob",2),u=o.indexOf("tree",2),f=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=c>0?c-1:l>0&&u>0?Math.min(l-1,u-1):l>0?l-1:p>0?p-1:u>0?u-1:f>0?f-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],f&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(n.filepathtype=o[y+1],n.ref=o[y+2],o.length>y+3&&(n.filepath=o.slice(y+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var E=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,x=E.exec(n.pathname);return x!=null&&(n.source="bitbucket-server",x[1]==="users"?n.owner="~"+x[2]:n.owner=x[2],n.organization=n.owner,n.name=x[3],o=x[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=m8t(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(Ppe,"gitUrlParse");Ppe.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?f8t(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+p8t(t)+i;default:return t.href}};function f8t(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(f8t,"buildToken");function p8t(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(p8t,"buildPath");function m8t(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(m8t,"findLongestMatchingSubstring");m7e.exports=Ppe});var XV=Q((exports,module)=>{d();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var c=63&t[e++];if((224&a)!=192){var l=63&t[e++];if((a=(240&a)==224?(15&a)<<12|c<<6|l:(7&a)<<18|c<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|c)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var c=t.charCodeAt(a);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++a)),c<=127){if(r>=o)break;e[r++]=c}else if(c<=2047){if(r+1>=o)break;e[r++]=192|c>>6,e[r++]=128|63&c}else if(c<=65535){if(r+2>=o)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|63&c}else{if(r+3>=o)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|63&c}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var c=getDylinkMetadata(o);c.neededDynlibs&&(dynamicLibraries=c.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var x=0,b=1;;){var _=t[e++];if(x+=(127&_)*b,b*=128,!(128&_))break}return x}s(n,"_");function i(){var x=n();return UTF8ArrayToString(t,(e+=x)-x,x)}s(i,"n");function o(x,b){if(x)throw new Error(b)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var c=WebAssembly.Module.customSections(t,a);c.length===0&&(a="dylink",c=WebAssembly.Module.customSections(t,a)),o(c.length===0,"need dylink section"),r=(t=new Uint8Array(c[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var f=n(),p=0;p<f;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(f=n(),p=0;p<f;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=n();y--;){var E=i();256&n()&&u.tlsExports.add(E)}else if(h===4)for(y=n();y--;)i(),E=i(),(3&n())==1&&u.weakImports.add(E);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(c){if(e.fs&&e.fs.findObject(c)){var l=e.fs.readFile(c,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(c=locateFile(c),e.loadAsync)return new Promise(function(u,f){readAsync(c,p=>u(new Uint8Array(p)),f)});if(!readBinary)throw new Error(c+": file not found, and synchronous loading of external files is not available");return readBinary(c)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var c=preloadedWasm[t];return e.loadAsync?Promise.resolve(c):c}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(c){n.global&&mergeLibSymbols(c,t),n.module=c}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(c){return a(c),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(c){if(c&&c.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(c.node)))return-54;throw c}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(c){if(typeof FS>"u"||!(c instanceof FS.ErrnoError))throw c;return c.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],c=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,a,c,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((l,u,f)=>e.slice(l,f),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let u=0;u<i;u++)marshalRange(l,n.includedRanges[u]),l+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let c=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,c}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let f=0,p=o.length;f<p;f++)e.includes(o[f])&&i.push(f);let a=C._malloc(SIZE_OF_INT*i.length);for(let f=0,p=i.length;f<p;f++)setValue(a+f*SIZE_OF_INT,i[f],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let c=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(c);if(c>0){let f=l;for(let p=0;p<c;p++)u[p]=unmarshalNode(this.tree,f),f+=SIZE_OF_NODE}return C._free(l),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),E=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,x=e.substr(E,100).split(`
`)[0],b,_=x.match(QUERY_WORD_REGEX)[0];switch(y){case 2:b=new RangeError(`Bad node name '${_}'`);break;case 3:b=new RangeError(`Bad field name '${_}'`);break;case 4:b=new RangeError(`Bad capture name @${_}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${E}: '${x}'...`),_="";break;default:b=new SyntaxError(`Bad syntax at offset ${E}: '${x}'...`),_=""}throw b.index=E,b.length=_.length,C._free(n),b}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),c=C._ts_query_pattern_count(i),l=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let E=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");l[y]=UTF8ToString(E,x)}for(let y=0;y<o;y++){let E=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(E,x)}let f=new Array(c),p=new Array(c),m=new Array(c),h=new Array(c),g=new Array(c);for(let y=0;y<c;y++){let E=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let b=[],_=E;for(let k=0;k<x;k++){let P=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,P===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:l[N]});else if(P===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:u[N]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let M=b[0].value,J=!0;switch(M){case"not-eq?":J=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let q=b[1].name,le=b[2].name;g[y].push(function(ie){let V,H;for(let z of ie)z.name===q&&(V=z.node),z.name===le&&(H=z.node);return V===void 0||H===void 0||V.text===H.text===J})}else{let q=b[1].name,le=b[2].value;g[y].push(function(ie){for(let V of ie)if(V.name===q)return V.node.text===le===J;return!0})}break;case"not-match?":J=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let se=b[1].name,K=new RegExp(b[2].value);g[y].push(function(q){for(let le of q)if(le.name===se)return K.test(le.node.text)===J;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(q=>q.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');f[y]||(f[y]={}),f[y][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${M}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(q=>q.type!=="string"))throw new Error(`Arguments to \`#${M}\` predicate must be a strings.".`);let G=M==="is?"?p:m;G[y]||(G[y]={}),G[y][b[1].value]=b[2]?b[2].value:null;break;default:h[y].push({operator:M,operands:b.slice(1)})}b.length=0}}Object.freeze(f[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(n),new Query(INTERNAL,i,l,g,h,Object.freeze(f),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let c=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=i[a]();return new Language(INTERNAL,c)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,c,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=c,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!l;let f=0,p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(E=>E(y))){u[f++]={pattern:h,captures:y};let E=this.setProperties[h];E&&(u[m].setProperties=E);let x=this.assertedProperties[h];x&&(u[m].assertedProperties=x);let b=this.refutedProperties[h];b&&(u[m].refutedProperties=b)}}return u.length=f,C._free(c),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!l;let f=[],p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,f.length=g,p=unmarshalCaptures(this,e.tree,p,f),this.textPredicates[h].every(E=>E(f))){let E=f[y],x=this.setProperties[h];x&&(E.setProperties=x);let b=this.assertedProperties[h];b&&(E.assertedProperties=b);let _=this.refutedProperties[h];_&&(E.refutedProperties=_),u.push(E)}}return C._free(c),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),c=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:c}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),c=new Node(INTERNAL,t);return c.id=r,c.startIndex=n,c.startPosition={row:i,column:o},c[0]=a,c}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var bme=Q((ZIn,iQe)=>{d();var xme=require("fs"),R$=require("path"),gM=R$.join,XNt=R$.dirname,rQe=xme.accessSync&&function(t){try{xme.accessSync(t)}catch{return!1}return!0}||xme.existsSync||R$.existsSync,nQe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function ZNt(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(nQe).map(function(l){l in t||(t[l]=nQe[l])}),t.module_root||(t.module_root=e6t(__filename)),R$.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,c;n<i;n++){o=gM.apply(null,t.try[n].map(function(l){return t[l]||l})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw c=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return t.arrow+l}).join(`
`)),c.tries=r,c}s(ZNt,"bindings");iQe.exports=ZNt;function e6t(t){for(var e=XNt(t),r;;){if(e==="."&&(e=process.cwd()),rQe(gM(e,"dist")))return gM(e,"dist");if(rQe(gM(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=gM(e,"..")}}s(e6t,"getRoot")});var sQe=Q((rTn,oQe)=>{d();oQe.exports=bme()("node_sqlite3.node")});var lQe=Q(cQe=>{d();var t6t=require("util");function r6t(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(c){return t6t.inspect(c,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=aQe(l).join(`
`),l.stack+=`
--> in `+o,l.stack+=`
`+aQe(i).slice(1).join(`
`),l.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(r6t,"extendTrace");cQe.extendTrace=r6t;function aQe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(aQe,"filter")});var pQe=Q((dQe,fQe)=>{d();var n6t=require("path"),pm=sQe(),qP=require("events").EventEmitter;fQe.exports=dQe=pm;function HP(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new k$(this,e,r);return t.call(this,i,n)}}s(HP,"normalizeMethod");function Tme(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(Tme,"inherits");pm.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new Dd(t,e,r);let n;if(t=n6t.resolve(t),!pm.cached.objects[t])n=pm.cached.objects[t]=new Dd(t,e,r);else{n=pm.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var Dd=pm.Database,k$=pm.Statement,Ime=pm.Backup;Tme(Dd,qP);Tme(k$,qP);Tme(Ime,qP);Dd.prototype.prepare=HP(function(t,e){return e.length?t.bind.apply(t,e):t});Dd.prototype.run=HP(function(t,e){return t.run.apply(t,e).finalize(),this});Dd.prototype.get=HP(function(t,e){return t.get.apply(t,e).finalize(),this});Dd.prototype.all=HP(function(t,e){return t.all.apply(t,e).finalize(),this});Dd.prototype.each=HP(function(t,e){return t.each.apply(t,e).finalize(),this});Dd.prototype.map=HP(function(t,e){return t.map.apply(t,e).finalize(),this});Dd.prototype.backup=function(){let t;return arguments.length<=2?t=new Ime(this,arguments[0],"main","main",!0,arguments[1]):t=new Ime(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[pm.BUSY,pm.LOCKED],t};k$.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let c=0;c<n.length;c++)i[n[c][a]]=n[c];else{let c=o[1];for(let l=0;l<n.length;l++)i[n[l][a]]=n[l][c]}}e(r,i)}),this.all.apply(this,t)};var uQe=!1,wme=["trace","profile","change"];Dd.prototype.addListener=Dd.prototype.on=function(t){let e=qP.prototype.addListener.apply(this,arguments);return wme.indexOf(t)>=0&&this.configure(t,!0),e};Dd.prototype.removeListener=function(t){let e=qP.prototype.removeListener.apply(this,arguments);return wme.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Dd.prototype.removeAllListeners=function(t){let e=qP.prototype.removeAllListeners.apply(this,arguments);return wme.indexOf(t)>=0&&this.configure(t,!1),e};pm.verbose=function(){if(!uQe){let t=lQe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Dd.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(k$.prototype,e)}),uQe=!0}return pm}});var W$=Q(Nc=>{"use strict";d();Object.defineProperty(Nc,"__esModule",{value:!0});Nc.thenable=Nc.typedArray=Nc.stringArray=Nc.array=Nc.func=Nc.error=Nc.number=Nc.string=Nc.boolean=void 0;function o6t(t){return t===!0||t===!1}s(o6t,"boolean");Nc.boolean=o6t;function yQe(t){return typeof t=="string"||t instanceof String}s(yQe,"string");Nc.string=yQe;function s6t(t){return typeof t=="number"||t instanceof Number}s(s6t,"number");Nc.number=s6t;function a6t(t){return t instanceof Error}s(a6t,"error");Nc.error=a6t;function CQe(t){return typeof t=="function"}s(CQe,"func");Nc.func=CQe;function EQe(t){return Array.isArray(t)}s(EQe,"array");Nc.array=EQe;function c6t(t){return EQe(t)&&t.every(e=>yQe(e))}s(c6t,"stringArray");Nc.stringArray=c6t;function l6t(t,e){return Array.isArray(t)&&t.every(e)}s(l6t,"typedArray");Nc.typedArray=l6t;function u6t(t){return t&&CQe(t.then)}s(u6t,"thenable");Nc.thenable=u6t});var Rme=Q(mm=>{"use strict";d();Object.defineProperty(mm,"__esModule",{value:!0});mm.generateUuid=mm.parse=mm.isUUID=mm.v4=mm.empty=void 0;var CM=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},EM=class t extends CM{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};EM._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];EM._timeHighBits=["8","9","a","b"];mm.empty=new CM("00000000-0000-0000-0000-000000000000");function vQe(){return new EM}s(vQe,"v4");mm.v4=vQe;var d6t=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function xQe(t){return d6t.test(t)}s(xQe,"isUUID");mm.isUUID=xQe;function f6t(t){if(!xQe(t))throw new Error("invalid uuid");return new CM(t)}s(f6t,"parse");mm.parse=f6t;function p6t(){return vQe().asHex()}s(p6t,"generateUuid");mm.generateUuid=p6t});var bQe=Q(rI=>{"use strict";d();Object.defineProperty(rI,"__esModule",{value:!0});rI.attachPartialResult=rI.ProgressFeature=rI.attachWorkDone=void 0;var tI=mi(),m6t=Rme(),WS=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(tI.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(tI.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(tI.WorkDoneProgress.type,this._token,{kind:"end"})}};WS.Instances=new Map;var G$=class extends WS{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new tI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},vM=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},j$=class extends vM{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new tI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function h6t(t,e){if(e===void 0||e.workDoneToken===void 0)return new vM;let r=e.workDoneToken;return delete e.workDoneToken,new WS(t,r)}s(h6t,"attachWorkDone");rI.attachWorkDone=h6t;var g6t=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(tI.WorkDoneProgressCancelNotification.type,r=>{let n=WS.Instances.get(r.token);(n instanceof G$||n instanceof j$)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new vM:new WS(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,m6t.generateUuid)();return this.connection.sendRequest(tI.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new G$(this.connection,e))}else return Promise.resolve(new j$)}},"ProgressFeature");rI.ProgressFeature=g6t;var kme;(function(t){t.type=new tI.ProgressType})(kme||(kme={}));var Pme=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(kme.type,this._token,e)}};function A6t(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new Pme(t,r)}s(A6t,"attachPartialResult");rI.attachPartialResult=A6t});var IQe=Q(V$=>{"use strict";d();Object.defineProperty(V$,"__esModule",{value:!0});V$.ConfigurationFeature=void 0;var y6t=mi(),C6t=W$(),E6t=s(t=>class extends t{getConfiguration(e){return e?C6t.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(y6t.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");V$.ConfigurationFeature=E6t});var TQe=Q(z$=>{"use strict";d();Object.defineProperty(z$,"__esModule",{value:!0});z$.WorkspaceFoldersFeature=void 0;var $$=mi(),v6t=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new $$.Emitter,this.connection.onNotification($$.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest($$.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register($$.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");z$.WorkspaceFoldersFeature=v6t});var wQe=Q(Y$=>{"use strict";d();Object.defineProperty(Y$,"__esModule",{value:!0});Y$.CallHierarchyFeature=void 0;var Bme=mi(),x6t=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Bme.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=Bme.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=Bme.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");Y$.CallHierarchyFeature=x6t});var Nme=Q(nI=>{"use strict";d();Object.defineProperty(nI,"__esModule",{value:!0});nI.SemanticTokensBuilder=nI.SemanticTokensDiff=nI.SemanticTokensFeature=void 0;var K$=mi(),b6t=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(K$.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=K$.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=K$.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=K$.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");nI.SemanticTokensFeature=b6t;var J$=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,c=this.modifiedSequence.slice(n,o+1);return c.length===1&&c[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:c}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};nI.SemanticTokensDiff=J$;var Dme=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,c=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(c-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=c,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new J$(this._prevData,this._data).computeDiff()}:this.build()}};nI.SemanticTokensBuilder=Dme});var _Qe=Q(X$=>{"use strict";d();Object.defineProperty(X$,"__esModule",{value:!0});X$.ShowDocumentFeature=void 0;var I6t=mi(),T6t=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(I6t.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");X$.ShowDocumentFeature=T6t});var SQe=Q(Z$=>{"use strict";d();Object.defineProperty(Z$,"__esModule",{value:!0});Z$.FileOperationsFeature=void 0;var GP=mi(),w6t=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(GP.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(GP.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(GP.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(GP.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(GP.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(GP.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");Z$.FileOperationsFeature=w6t});var RQe=Q(ez=>{"use strict";d();Object.defineProperty(ez,"__esModule",{value:!0});ez.LinkedEditingRangeFeature=void 0;var _6t=mi(),S6t=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(_6t.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");ez.LinkedEditingRangeFeature=S6t});var kQe=Q(tz=>{"use strict";d();Object.defineProperty(tz,"__esModule",{value:!0});tz.TypeHierarchyFeature=void 0;var Lme=mi(),R6t=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Lme.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=Lme.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=Lme.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");tz.TypeHierarchyFeature=R6t});var BQe=Q(rz=>{"use strict";d();Object.defineProperty(rz,"__esModule",{value:!0});rz.InlineValueFeature=void 0;var PQe=mi(),k6t=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(PQe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(PQe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");rz.InlineValueFeature=k6t});var NQe=Q(nz=>{"use strict";d();Object.defineProperty(nz,"__esModule",{value:!0});nz.FoldingRangeFeature=void 0;var DQe=mi(),P6t=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(DQe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=DQe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");nz.FoldingRangeFeature=P6t});var LQe=Q(iz=>{"use strict";d();Object.defineProperty(iz,"__esModule",{value:!0});iz.InlayHintFeature=void 0;var Mme=mi(),B6t=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(Mme.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Mme.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest(Mme.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");iz.InlayHintFeature=B6t});var MQe=Q(oz=>{"use strict";d();Object.defineProperty(oz,"__esModule",{value:!0});oz.DiagnosticFeature=void 0;var xM=mi(),D6t=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(xM.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(xM.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(xM.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(xM.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(xM.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");oz.DiagnosticFeature=D6t});var Ome=Q(sz=>{"use strict";d();Object.defineProperty(sz,"__esModule",{value:!0});sz.TextDocuments=void 0;var GS=mi(),Fme=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new GS.Emitter,this._onDidOpen=new GS.Emitter,this._onDidClose=new GS.Emitter,this._onDidSave=new GS.Emitter,this._onWillSave=new GS.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=GS.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=this._syncedDocuments.get(i.uri);c!==void 0&&(c=this._configuration.update(c,o,a),this._syncedDocuments.set(i.uri,c),this._onDidChangeContent.fire(Object.freeze({document:c})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),GS.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};sz.TextDocuments=Fme});var Ume=Q(jP=>{"use strict";d();Object.defineProperty(jP,"__esModule",{value:!0});jP.NotebookDocuments=jP.NotebookSyncFeature=void 0;var hm=mi(),FQe=Ome(),N6t=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(hm.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(hm.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(hm.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(hm.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");jP.NotebookSyncFeature=N6t;var az=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,hm.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,hm.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,hm.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};az.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var Qme=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof FQe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new FQe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new hm.Emitter,this._onDidChange=new hm.Emitter,this._onDidSave=new hm.Emitter,this._onDidClose=new hm.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new az,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,c=!1,l=i.change;l.metadata!==void 0&&(c=!0,o.metadata=l.metadata);let u=[],f=[],p=[],m=[];if(l.cells!==void 0){let x=l.cells;if(x.structure!==void 0){let b=x.structure.array;if(o.cells.splice(b.start,b.deleteCount,...b.cells!==void 0?b.cells:[]),x.structure.didOpen!==void 0)for(let _ of x.structure.didOpen)r.openTextDocument({textDocument:_}),u.push(_.uri);if(x.structure.didClose)for(let _ of x.structure.didClose)r.closeTextDocument({textDocument:_}),f.push(_.uri)}if(x.data!==void 0){let b=new Map(x.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=b.get(o.cells[_].document);if(k!==void 0){let P=o.cells.splice(_,1,k);if(p.push({old:P[0],new:k}),b.delete(k.document),b.size===0)break}}}if(x.textContent!==void 0)for(let b of x.textContent)r.changeTextDocument({textDocument:b.document,contentChanges:b.changes}),m.push(b.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};c&&(h.metadata={old:a,new:o.metadata});let g=[];for(let x of u)g.push(this.getNotebookCell(x));let y=[];for(let x of f)y.push(this.getNotebookCell(x));let E=[];for(let x of m)E.push(this.getNotebookCell(x));(g.length>0||y.length>0||p.length>0||E.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:E}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),hm.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};jP.NotebookDocuments=Qme});var OQe=Q(cz=>{"use strict";d();Object.defineProperty(cz,"__esModule",{value:!0});cz.MonikerFeature=void 0;var L6t=mi(),M6t=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=L6t.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");cz.MonikerFeature=M6t});var Vme=Q(Po=>{"use strict";d();Object.defineProperty(Po,"__esModule",{value:!0});Po.createConnection=Po.combineFeatures=Po.combineNotebooksFeatures=Po.combineLanguagesFeatures=Po.combineWorkspaceFeatures=Po.combineWindowFeatures=Po.combineClientFeatures=Po.combineTracerFeatures=Po.combineTelemetryFeatures=Po.combineConsoleFeatures=Po._NotebooksImpl=Po._LanguagesImpl=Po.BulkUnregistration=Po.BulkRegistration=Po.ErrorMessageTracker=void 0;var Kt=mi(),gm=W$(),Hme=Rme(),oi=bQe(),F6t=IQe(),O6t=TQe(),Q6t=wQe(),U6t=Nme(),q6t=_Qe(),H6t=SQe(),W6t=RQe(),G6t=kQe(),j6t=BQe(),V6t=NQe(),$6t=LQe(),z6t=MQe(),Y6t=Ume(),K6t=OQe();function qme(t){if(t!==null)return t}s(qme,"null2Undefined");var Wme=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Po.ErrorMessageTracker=Wme;var lz=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(Kt.MessageType.Error,e)}warn(e){this.send(Kt.MessageType.Warning,e)}info(e){this.send(Kt.MessageType.Info,e)}log(e){this.send(Kt.MessageType.Log,e)}debug(e){this.send(Kt.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(Kt.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,Kt.RAL)().console.error("Sending log message failed")})}},Gme=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:Kt.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(Kt.ShowMessageRequest.type,n).then(qme)}showWarningMessage(e,...r){let n={type:Kt.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(Kt.ShowMessageRequest.type,n).then(qme)}showInformationMessage(e,...r){let n={type:Kt.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(Kt.ShowMessageRequest.type,n).then(qme)}},QQe=(0,q6t.ShowDocumentFeature)((0,oi.ProgressFeature)(Gme)),UQe;(function(t){function e(){return new uz}s(e,"create"),t.create=e})(UQe||(Po.BulkRegistration=UQe={}));var uz=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=gm.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=Hme.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},qQe;(function(t){function e(){return new bM(void 0,[])}s(e,"create"),t.create=e})(qQe||(Po.BulkUnregistration=qQe={}));var bM=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(Kt.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=gm.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(Kt.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},dz=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof uz?this.registerMany(e):e instanceof bM?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=gm.string(r)?r:r.method,o=Hme.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(Kt.RegistrationRequest.type,a).then(c=>(e.add({id:o,method:i}),e),c=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(c)))}registerSingle2(e,r){let n=gm.string(e)?e:e.method,i=Hme.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(Kt.RegistrationRequest.type,o).then(a=>Kt.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(Kt.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(Kt.RegistrationRequest.type,r).then(()=>new bM(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},jme=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(Kt.ApplyWorkspaceEditRequest.type,n)}},HQe=(0,H6t.FileOperationsFeature)((0,O6t.WorkspaceFoldersFeature)((0,F6t.ConfigurationFeature)(jme))),fz=class{static{s(this,"TracerImpl")}constructor(){this._trace=Kt.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==Kt.Trace.Off&&this.connection.sendNotification(Kt.LogTraceNotification.type,{message:e,verbose:this._trace===Kt.Trace.Verbose?r:void 0}).catch(()=>{})}},pz=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(Kt.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},mz=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,oi.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,oi.attachPartialResult)(this.connection,r)}};Po._LanguagesImpl=mz;var WQe=(0,V6t.FoldingRangeFeature)((0,K6t.MonikerFeature)((0,z6t.DiagnosticFeature)((0,$6t.InlayHintFeature)((0,j6t.InlineValueFeature)((0,G6t.TypeHierarchyFeature)((0,W6t.LinkedEditingRangeFeature)((0,U6t.SemanticTokensFeature)((0,Q6t.CallHierarchyFeature)(mz))))))))),hz=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,oi.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,oi.attachPartialResult)(this.connection,r)}};Po._NotebooksImpl=hz;var GQe=(0,Y6t.NotebookSyncFeature)(hz);function jQe(t,e){return function(r){return e(t(r))}}s(jQe,"combineConsoleFeatures");Po.combineConsoleFeatures=jQe;function VQe(t,e){return function(r){return e(t(r))}}s(VQe,"combineTelemetryFeatures");Po.combineTelemetryFeatures=VQe;function $Qe(t,e){return function(r){return e(t(r))}}s($Qe,"combineTracerFeatures");Po.combineTracerFeatures=$Qe;function zQe(t,e){return function(r){return e(t(r))}}s(zQe,"combineClientFeatures");Po.combineClientFeatures=zQe;function YQe(t,e){return function(r){return e(t(r))}}s(YQe,"combineWindowFeatures");Po.combineWindowFeatures=YQe;function KQe(t,e){return function(r){return e(t(r))}}s(KQe,"combineWorkspaceFeatures");Po.combineWorkspaceFeatures=KQe;function JQe(t,e){return function(r){return e(t(r))}}s(JQe,"combineLanguagesFeatures");Po.combineLanguagesFeatures=JQe;function XQe(t,e){return function(r){return e(t(r))}}s(XQe,"combineNotebooksFeatures");Po.combineNotebooksFeatures=XQe;function J6t(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,jQe),tracer:r(t.tracer,e.tracer,$Qe),telemetry:r(t.telemetry,e.telemetry,VQe),client:r(t.client,e.client,zQe),window:r(t.window,e.window,YQe),workspace:r(t.workspace,e.workspace,KQe),languages:r(t.languages,e.languages,JQe),notebooks:r(t.notebooks,e.notebooks,XQe)}}s(J6t,"combineFeatures");Po.combineFeatures=J6t;function X6t(t,e,r){let n=r&&r.console?new(r.console(lz)):new lz,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(fz)):new fz,a=r&&r.telemetry?new(r.telemetry(pz)):new pz,c=r&&r.client?new(r.client(dz)):new dz,l=r&&r.window?new(r.window(QQe)):new QQe,u=r&&r.workspace?new(r.workspace(HQe)):new HQe,f=r&&r.languages?new(r.languages(WQe)):new WQe,p=r&&r.notebooks?new(r.notebooks(GQe)):new GQe,m=[n,o,a,c,l,u,f,p];function h(b){return b instanceof Promise?b:gm.thenable(b)?new Promise((_,k)=>{b.then(P=>_(P),P=>k(P))}):Promise.resolve(b)}s(h,"asPromise");let g,y,E,x={listen:s(()=>i.listen(),"listen"),sendRequest:s((b,..._)=>i.sendRequest(gm.string(b)?b:b.method,..._),"sendRequest"),onRequest:s((b,_)=>i.onRequest(b,_),"onRequest"),sendNotification:s((b,_)=>{let k=gm.string(b)?b:b.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((b,_)=>i.onNotification(b,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(b=>(y=b,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(b=>i.onNotification(Kt.InitializedNotification.type,b),"onInitialized"),onShutdown:s(b=>(g=b,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(b=>(E=b,{dispose:s(()=>{E=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return c},get window(){return l},get workspace(){return u},get languages(){return f},get notebooks(){return p},onDidChangeConfiguration:s(b=>i.onNotification(Kt.DidChangeConfigurationNotification.type,b),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(b=>i.onNotification(Kt.DidChangeWatchedFilesNotification.type,b),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(b=>i.onNotification(Kt.DidOpenTextDocumentNotification.type,b),"onDidOpenTextDocument"),onDidChangeTextDocument:s(b=>i.onNotification(Kt.DidChangeTextDocumentNotification.type,b),"onDidChangeTextDocument"),onDidCloseTextDocument:s(b=>i.onNotification(Kt.DidCloseTextDocumentNotification.type,b),"onDidCloseTextDocument"),onWillSaveTextDocument:s(b=>i.onNotification(Kt.WillSaveTextDocumentNotification.type,b),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(b=>i.onRequest(Kt.WillSaveTextDocumentWaitUntilRequest.type,b),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(b=>i.onNotification(Kt.DidSaveTextDocumentNotification.type,b),"onDidSaveTextDocument"),sendDiagnostics:s(b=>i.sendNotification(Kt.PublishDiagnosticsNotification.type,b),"sendDiagnostics"),onHover:s(b=>i.onRequest(Kt.HoverRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(b=>i.onRequest(Kt.CompletionRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(b=>i.onRequest(Kt.CompletionResolveRequest.type,b),"onCompletionResolve"),onSignatureHelp:s(b=>i.onRequest(Kt.SignatureHelpRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(b=>i.onRequest(Kt.DeclarationRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(b=>i.onRequest(Kt.DefinitionRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(b=>i.onRequest(Kt.TypeDefinitionRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(b=>i.onRequest(Kt.ImplementationRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(b=>i.onRequest(Kt.ReferencesRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(b=>i.onRequest(Kt.DocumentHighlightRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(b=>i.onRequest(Kt.DocumentSymbolRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(b=>i.onRequest(Kt.WorkspaceSymbolRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(b=>i.onRequest(Kt.WorkspaceSymbolResolveRequest.type,b),"onWorkspaceSymbolResolve"),onCodeAction:s(b=>i.onRequest(Kt.CodeActionRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(b=>i.onRequest(Kt.CodeActionResolveRequest.type,(_,k)=>b(_,k)),"onCodeActionResolve"),onCodeLens:s(b=>i.onRequest(Kt.CodeLensRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(b=>i.onRequest(Kt.CodeLensResolveRequest.type,(_,k)=>b(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(b=>i.onRequest(Kt.DocumentFormattingRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(b=>i.onRequest(Kt.DocumentRangeFormattingRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(b=>i.onRequest(Kt.DocumentOnTypeFormattingRequest.type,(_,k)=>b(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(b=>i.onRequest(Kt.RenameRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(b=>i.onRequest(Kt.PrepareRenameRequest.type,(_,k)=>b(_,k)),"onPrepareRename"),onDocumentLinks:s(b=>i.onRequest(Kt.DocumentLinkRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(b=>i.onRequest(Kt.DocumentLinkResolveRequest.type,(_,k)=>b(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(b=>i.onRequest(Kt.DocumentColorRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(b=>i.onRequest(Kt.ColorPresentationRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(b=>i.onRequest(Kt.FoldingRangeRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(b=>i.onRequest(Kt.SelectionRangeRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),(0,oi.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(b=>i.onRequest(Kt.ExecuteCommandRequest.type,(_,k)=>b(_,k,(0,oi.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let b of m)b.attach(x);return i.onRequest(Kt.InitializeRequest.type,b=>{e.initialize(b),gm.string(b.trace)&&(o.trace=Kt.Trace.fromString(b.trace));for(let _ of m)_.initialize(b.capabilities);if(y){let _=y(b,new Kt.CancellationTokenSource().token,(0,oi.attachWorkDone)(i,b),void 0);return h(_).then(k=>{if(k instanceof Kt.ResponseError)return k;let P=k;P||(P={capabilities:{}});let N=P.capabilities;N||(N={},P.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=gm.number(x.__textDocumentSync)?x.__textDocumentSync:Kt.TextDocumentSyncKind.None:!gm.number(N.textDocumentSync)&&!gm.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=gm.number(x.__textDocumentSync)?x.__textDocumentSync:Kt.TextDocumentSyncKind.None);for(let M of m)M.fillServerCapabilities(N);return P})}else{let _={capabilities:{textDocumentSync:Kt.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest(Kt.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new Kt.CancellationTokenSource().token)}),i.onNotification(Kt.ExitNotification.type,()=>{try{E&&E()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(Kt.SetTraceNotification.type,b=>{o.trace=Kt.Trace.fromString(b.value)}),x}s(X6t,"createConnection");Po.createConnection=X6t});var ZQe=Q(Pf=>{"use strict";d();Object.defineProperty(Pf,"__esModule",{value:!0});Pf.resolveModulePath=Pf.FileSystem=Pf.resolveGlobalYarnPath=Pf.resolveGlobalNodePath=Pf.resolve=Pf.uriToFilePath=void 0;var Z6t=require("url"),cg=require("path"),$me=require("fs"),Jme=require("child_process");function e9t(t){let e=Z6t.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return cg.normalize(r.join("/"))}s(e9t,"uriToFilePath");Pf.uriToFilePath=e9t;function zme(){return process.platform==="win32"}s(zme,"isWindows");function gz(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,c)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(f=>u[f]=l[f]),e&&$me.existsSync(e)&&(u[i]?u[i]=e+cg.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let f=(0,Jme.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(f.pid===void 0){c(new Error(`Starting process to resolve node module  ${t} failed`));return}f.on("error",m=>{c(m)}),f.on("message",m=>{m.c==="r"&&(f.send({c:"e"}),m.s?a(m.r):c(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};f.send(p)}catch(f){c(f)}})}s(gz,"resolve");Pf.resolve=gz;function Yme(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};zme()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,Jme.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?zme()?cg.join(a,"node_modules"):cg.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(Yme,"resolveGlobalNodePath");Pf.resolveGlobalNodePath=Yme;function t9t(t){let e="yarn",r={encoding:"utf8"};zme()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,Jme.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let c of a)try{let l=JSON.parse(c);if(l.type==="log")return cg.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(t9t,"resolveGlobalYarnPath");Pf.resolveGlobalYarnPath=t9t;var Kme;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!$me.existsSync(__filename.toUpperCase())||!$me.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?cg.normalize(o).indexOf(cg.normalize(i))===0:cg.normalize(o).toLowerCase().indexOf(cg.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(Kme||(Pf.FileSystem=Kme={}));function r9t(t,e,r,n){return r?(cg.isAbsolute(r)||(r=cg.join(t,r)),gz(e,r,r,n).then(i=>Kme.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>gz(e,Yme(n),t,n))):gz(e,Yme(n),t,n)}s(r9t,"resolveModulePath");Pf.resolveModulePath=r9t});var Xme=Q((y_n,eUe)=>{"use strict";d();eUe.exports=mi()});var tUe=Q(Az=>{"use strict";d();Object.defineProperty(Az,"__esModule",{value:!0});Az.InlineCompletionFeature=void 0;var n9t=mi(),i9t=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(n9t.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");Az.InlineCompletionFeature=i9t});var iUe=Q(zu=>{"use strict";d();var o9t=zu&&zu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nUe=zu&&zu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&o9t(e,t,r)};Object.defineProperty(zu,"__esModule",{value:!0});zu.ProposedFeatures=zu.NotebookDocuments=zu.TextDocuments=zu.SemanticTokensBuilder=void 0;var s9t=Nme();Object.defineProperty(zu,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return s9t.SemanticTokensBuilder},"get")});var a9t=tUe();nUe(mi(),zu);var c9t=Ome();Object.defineProperty(zu,"TextDocuments",{enumerable:!0,get:s(function(){return c9t.TextDocuments},"get")});var l9t=Ume();Object.defineProperty(zu,"NotebookDocuments",{enumerable:!0,get:s(function(){return l9t.NotebookDocuments},"get")});nUe(Vme(),zu);var rUe;(function(t){t.all={__brand:"features",languages:a9t.InlineCompletionFeature}})(rUe||(zu.ProposedFeatures=rUe={}))});var Lc=Q(Am=>{"use strict";d();var u9t=Am&&Am.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cUe=Am&&Am.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&u9t(e,t,r)};Object.defineProperty(Am,"__esModule",{value:!0});Am.createConnection=Am.Files=void 0;var oUe=require("node:util"),Zme=W$(),d9t=Vme(),IM=ZQe(),jS=Xme();cUe(Xme(),Am);cUe(iUe(),Am);var sUe;(function(t){t.uriToFilePath=IM.uriToFilePath,t.resolveGlobalNodePath=IM.resolveGlobalNodePath,t.resolveGlobalYarnPath=IM.resolveGlobalYarnPath,t.resolve=IM.resolve,t.resolveModulePath=IM.resolveModulePath})(sUe||(Am.Files=sUe={}));var aUe;function yz(){if(aUe!==void 0)try{aUe.end()}catch{}}s(yz,"endProtocolConnection");var VP=!1,lUe;function f9t(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(lUe=setInterval(()=>{try{process.kill(n,0)}catch{yz(),process.exit(VP?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(f9t,"setupExitTimer");f9t();var p9t={initialize:s(t=>{let e=t.processId;Zme.number(e)&&lUe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(VP?0:1)}},3e3)},"initialize"),get shutdownReceived(){return VP},set shutdownReceived(t){VP=t},exit:s(t=>{yz(),process.exit(t)},"exit")};function m9t(t,e,r,n){let i,o,a,c;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),jS.ConnectionStrategy.is(t)||jS.ConnectionOptions.is(t)?c=t:(o=t,a=e,c=r),h9t(o,a,c,i)}s(m9t,"createConnection");Am.createConnection=m9t;function h9t(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let l,u,f=process.argv.slice(2);for(let p=0;p<f.length;p++){let m=f[p];if(m==="--node-ipc"){t=new jS.IPCMessageReader(process),e=new jS.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){l=parseInt(f[p+1]);break}else if(m==="--pipe"){u=f[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){l=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(l){let p=(0,jS.createServerSocketTransport)(l);t=p[0],e=p[1]}else if(u){let p=(0,jS.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(Zme.func(t.read)&&Zme.func(t.on)){let l=t;l.on("end",()=>{yz(),process.exit(VP?0:1)}),l.on("close",()=>{yz(),process.exit(VP?0:1)})}let c=s(l=>{let u=(0,jS.createProtocolConnection)(t,e,l,r);return i&&g9t(l),u},"connectionFactory");return(0,d9t.createConnection)(c,p9t,n)}s(h9t,"_createConnection");function g9t(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,oUe.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...c]=o;t.error(`Assertion failed: ${a} ${e(c)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,oUe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(g9t,"patchConsole")});var lg=Q((k_n,uUe)=>{"use strict";d();uUe.exports=Lc()});var ZHe=Q((Fkn,XHe)=>{"use strict";d();XHe.exports=KHe;function KHe(t,e,r){t instanceof RegExp&&(t=YHe(t,r)),e instanceof RegExp&&(e=YHe(e,r));var n=JHe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(KHe,"balanced");function YHe(t,e){var r=e.match(t);return r?r[0]:null}s(YHe,"maybeMatch");KHe.range=JHe;function JHe(t,e,r){var n,i,o,a,c,l=r.indexOf(t),u=r.indexOf(e,l+1),f=l;if(l>=0&&u>0){if(t===e)return[l,u];for(n=[],o=r.length;f>=0&&!c;)f==l?(n.push(f),l=r.indexOf(t,f+1)):n.length==1?c=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,f+1)),f=l<u&&l>=0?l:u;n.length&&(c=[o,a])}return c}s(JHe,"range")});var aWe=Q((Ukn,sWe)=>{d();var eWe=ZHe();sWe.exports=aLt;var tWe="\0SLASH"+Math.random()+"\0",rWe="\0OPEN"+Math.random()+"\0",tge="\0CLOSE"+Math.random()+"\0",nWe="\0COMMA"+Math.random()+"\0",iWe="\0PERIOD"+Math.random()+"\0";function ege(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(ege,"numeric");function oLt(t){return t.split("\\\\").join(tWe).split("\\{").join(rWe).split("\\}").join(tge).split("\\,").join(nWe).split("\\.").join(iWe)}s(oLt,"escapeBraces");function sLt(t){return t.split(tWe).join("\\").split(rWe).join("{").split(tge).join("}").split(nWe).join(",").split(iWe).join(".")}s(sLt,"unescapeBraces");function oWe(t){if(!t)return[""];var e=[],r=eWe("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=oWe(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}s(oWe,"parseCommaParts");function aLt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),LM(oLt(t),!0).map(sLt)):[]}s(aLt,"expandTop");function cLt(t){return"{"+t+"}"}s(cLt,"embrace");function lLt(t){return/^-?0\d/.test(t)}s(lLt,"isPadded");function uLt(t,e){return t<=e}s(uLt,"lte");function dLt(t,e){return t>=e}s(dLt,"gte");function LM(t,e){var r=[],n=eWe("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?LM(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var c=i+"{"+n.body+"}"+o[a];r.push(c)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),f=l||u,p=n.body.indexOf(",")>=0;if(!f&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+tge+n.post,LM(t)):[t];var m;if(f)m=n.body.split(/\.\./);else if(m=oWe(n.body),m.length===1&&(m=LM(m[0],!1).map(cLt),m.length===1))return o.map(function(K){return n.pre+m[0]+K});var h;if(f){var g=ege(m[0]),y=ege(m[1]),E=Math.max(m[0].length,m[1].length),x=m.length==3?Math.abs(ege(m[2])):1,b=uLt,_=y<g;_&&(x*=-1,b=dLt);var k=m.some(lLt);h=[];for(var P=g;b(P,y);P+=x){var N;if(u)N=String.fromCharCode(P),N==="\\"&&(N="");else if(N=String(P),k){var M=E-N.length;if(M>0){var J=new Array(M+1).join("0");P<0?N="-"+J+N.slice(1):N=J+N}}h.push(N)}}else{h=[];for(var se=0;se<m.length;se++)h.push.apply(h,LM(m[se],!1))}for(var se=0;se<h.length;se++)for(var a=0;a<o.length;a++){var c=i+h[se]+o[a];(!e||f||c)&&r.push(c)}}return r}s(LM,"expand")});var pa=Q((i$n,EVe)=>{d();EVe.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Lo=Q((s$n,vVe)=>{"use strict";d();var Sa=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},RAe=class extends Sa{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},kAe=class extends Sa{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},PAe=class extends Sa{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},BAe=class extends Sa{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},DAe=class extends Sa{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},NAe=class extends Sa{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},LAe=class extends Sa{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},UK=class extends Sa{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},MAe=class extends UK{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},FAe=class extends Sa{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},OAe=class extends Sa{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},QAe=class extends Sa{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},UAe=class extends Sa{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},qAe=class extends Sa{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},HAe=class extends Sa{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},WAe=class extends Sa{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},GAe=class extends Sa{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},jAe=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},VAe=class extends Sa{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},$Ae=class extends Sa{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},zAe=class extends Sa{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},YAe=class extends Sa{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};vVe.exports={AbortError:UK,HTTPParserError:jAe,UndiciError:Sa,HeadersTimeoutError:kAe,HeadersOverflowError:PAe,BodyTimeoutError:BAe,RequestContentLengthMismatchError:OAe,ConnectTimeoutError:RAe,ResponseStatusCodeError:DAe,InvalidArgumentError:NAe,InvalidReturnValueError:LAe,RequestAbortedError:MAe,ClientDestroyedError:UAe,ClientClosedError:qAe,InformationalError:FAe,SocketError:HAe,NotSupportedError:WAe,ResponseContentLengthMismatchError:QAe,BalancedPoolMissingUpstreamError:GAe,ResponseExceededMaxSizeError:VAe,RequestRetryError:$Ae,ResponseError:zAe,SecureProxyConnectionError:YAe}});var HK=Q((l$n,xVe)=>{"use strict";d();var qK={},KAe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<KAe.length;++t){let e=KAe[t],r=e.toLowerCase();qK[e]=qK[r]=r}Object.setPrototypeOf(qK,null);xVe.exports={wellknownHeaderNames:KAe,headerNameLowerCasedRecord:qK}});var wVe=Q((d$n,TVe)=>{"use strict";d();var{wellknownHeaderNames:bVe,headerNameLowerCasedRecord:e7t}=HK(),JAe=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},WK=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new JAe(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},IVe=new WK;for(let t=0;t<bVe.length;++t){let e=e7t[bVe[t]];IVe.insert(e,e)}TVe.exports={TernarySearchTree:WK,tree:IVe}});var Pi=Q((m$n,HVe)=>{"use strict";d();var lF=require("node:assert"),{kDestroyed:SVe,kBodyUsed:Q3,kListeners:XAe,kBody:_Ve}=pa(),{IncomingMessage:t7t}=require("node:http"),VK=require("node:stream"),r7t=require("node:net"),{Blob:n7t}=require("node:buffer"),i7t=require("node:util"),{stringify:o7t}=require("node:querystring"),{EventEmitter:s7t}=require("node:events"),{InvalidArgumentError:Dl}=Lo(),{headerNameLowerCasedRecord:a7t}=HK(),{tree:RVe}=wVe(),[c7t,l7t]=process.versions.node.split(".").map(t=>Number(t)),jK=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[_Ve]=e,this[Q3]=!1}async*[Symbol.asyncIterator](){lF(!this[Q3],"disturbed"),this[Q3]=!0,yield*this[_Ve]}};function u7t(t){return $K(t)?(NVe(t)===0&&t.on("data",function(){lF(!1)}),typeof t.readableDidRead!="boolean"&&(t[Q3]=!1,s7t.prototype.on.call(t,"data",function(){this[Q3]=!0})),t):t&&typeof t.pipeTo=="function"?new jK(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&DVe(t)?new jK(t):t}s(u7t,"wrapRequestBody");function d7t(){}s(d7t,"nop");function $K(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s($K,"isStream");function kVe(t){if(t===null)return!1;if(t instanceof n7t)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(kVe,"isBlobLike");function f7t(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=o7t(e);return r&&(t+="?"+r),t}s(f7t,"buildURL");function PVe(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(PVe,"isValidPort");function GK(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(GK,"isHttpOrHttpsPrefixed");function BVe(t){if(typeof t=="string"){if(t=new URL(t),!GK(t.origin||t.protocol))throw new Dl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Dl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&PVe(t.port)===!1)throw new Dl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Dl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Dl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Dl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Dl("Invalid URL origin: the origin must be a string or null/undefined.");if(!GK(t.origin||t.protocol))throw new Dl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!GK(t.origin||t.protocol))throw new Dl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(BVe,"parseURL");function p7t(t){if(t=BVe(t),t.pathname!=="/"||t.search||t.hash)throw new Dl("invalid url");return t}s(p7t,"parseOrigin");function m7t(t){if(t[0]==="["){let r=t.indexOf("]");return lF(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(m7t,"getHostname");function h7t(t){if(!t)return null;lF(typeof t=="string");let e=m7t(t);return r7t.isIP(e)?"":e}s(h7t,"getServerName");function g7t(t){return JSON.parse(JSON.stringify(t))}s(g7t,"deepClone");function A7t(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(A7t,"isAsyncIterable");function DVe(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(DVe,"isIterable");function NVe(t){if(t==null)return 0;if($K(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(kVe(t))return t.size!=null?t.size:null;if(FVe(t))return t.byteLength}return null}s(NVe,"bodyLength");function LVe(t){return t&&!!(t.destroyed||t[SVe]||VK.isDestroyed?.(t))}s(LVe,"isDestroyed");function y7t(t,e){t==null||!$K(t)||LVe(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===t7t&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[SVe]=!0))}s(y7t,"destroy");var C7t=/timeout=(\d+)/;function E7t(t){let e=t.toString().match(C7t);return e?parseInt(e[1],10)*1e3:null}s(E7t,"parseKeepAliveTimeout");function MVe(t){return typeof t=="string"?a7t[t]??t.toLowerCase():RVe.lookup(t)??t.toString("latin1").toLowerCase()}s(MVe,"headerNameToString");function v7t(t){return RVe.lookup(t)??t.toString("latin1").toLowerCase()}s(v7t,"bufferToLowerCasedHeaderName");function x7t(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=MVe(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(x7t,"parseHeaders");function b7t(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,c=0;for(let l=0;l<t.length;l+=2)o=t[l],a=t[l+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),c=o.length,c===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:c===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=o,r[l+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(b7t,"parseRawHeaders");function FVe(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(FVe,"isBuffer");function I7t(t,e,r){if(!t||typeof t!="object")throw new Dl("handler must be an object");if(typeof t.onConnect!="function")throw new Dl("invalid onConnect method");if(typeof t.onError!="function")throw new Dl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Dl("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Dl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Dl("invalid onHeaders method");if(typeof t.onData!="function")throw new Dl("invalid onData method");if(typeof t.onComplete!="function")throw new Dl("invalid onComplete method")}}s(I7t,"validateHandler");function T7t(t){return!!(t&&(VK.isDisturbed(t)||t[Q3]))}s(T7t,"isDisturbed");function w7t(t){return!!(t&&VK.isErrored(t))}s(w7t,"isErrored");function _7t(t){return!!(t&&VK.isReadable(t))}s(_7t,"isReadable");function S7t(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(S7t,"getSocketInfo");function R7t(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(R7t,"ReadableStreamFrom");function k7t(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(k7t,"isFormDataLike");function P7t(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(P7t,"addAbortListener");var B7t=typeof String.prototype.toWellFormed=="function",D7t=typeof String.prototype.isWellFormed=="function";function OVe(t){return B7t?`${t}`.toWellFormed():i7t.toUSVString(t)}s(OVe,"toUSVString");function N7t(t){return D7t?`${t}`.isWellFormed():OVe(t)===`${t}`}s(N7t,"isUSVString");function QVe(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(QVe,"isTokenCharCode");function L7t(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!QVe(t.charCodeAt(e)))return!1;return!0}s(L7t,"isValidHTTPToken");var M7t=/[^\t\x20-\x7e\x80-\xff]/;function F7t(t){return!M7t.test(t)}s(F7t,"isValidHeaderValue");function O7t(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(O7t,"parseRangeHeader");function Q7t(t,e,r){return(t[XAe]??=[]).push([e,r]),t.on(e,r),t}s(Q7t,"addListener");function U7t(t){for(let[e,r]of t[XAe]??[])t.removeListener(e,r);t[XAe]=null}s(U7t,"removeAllListeners");function q7t(t,e,r){try{e.onError(r),lF(e.aborted)}catch(n){t.emit("error",n)}}s(q7t,"errorRequest");var UVe=Object.create(null);UVe.enumerable=!0;var ZAe={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},qVe={...ZAe,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(ZAe,null);Object.setPrototypeOf(qVe,null);HVe.exports={kEnumerableProperty:UVe,nop:d7t,isDisturbed:T7t,isErrored:w7t,isReadable:_7t,toUSVString:OVe,isUSVString:N7t,isBlobLike:kVe,parseOrigin:p7t,parseURL:BVe,getServerName:h7t,isStream:$K,isIterable:DVe,isAsyncIterable:A7t,isDestroyed:LVe,headerNameToString:MVe,bufferToLowerCasedHeaderName:v7t,addListener:Q7t,removeAllListeners:U7t,errorRequest:q7t,parseRawHeaders:b7t,parseHeaders:x7t,parseKeepAliveTimeout:E7t,destroy:y7t,bodyLength:NVe,deepClone:g7t,ReadableStreamFrom:R7t,isBuffer:FVe,validateHandler:I7t,getSocketInfo:S7t,isFormDataLike:k7t,buildURL:f7t,addAbortListener:P7t,isValidHTTPToken:L7t,isValidHeaderValue:F7t,isTokenCharCode:QVe,parseRangeHeader:O7t,normalizedMethodRecordsBase:ZAe,normalizedMethodRecords:qVe,isValidPort:PVe,isHttpOrHttpsPrefixed:GK,nodeMajor:c7t,nodeMinor:l7t,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:u7t}});var U3=Q((A$n,GVe)=>{"use strict";d();var Qo=require("node:diagnostics_channel"),tye=require("node:util"),zK=tye.debuglog("undici"),eye=tye.debuglog("fetch"),x2=tye.debuglog("websocket"),WVe=!1,H7t={beforeConnect:Qo.channel("undici:client:beforeConnect"),connected:Qo.channel("undici:client:connected"),connectError:Qo.channel("undici:client:connectError"),sendHeaders:Qo.channel("undici:client:sendHeaders"),create:Qo.channel("undici:request:create"),bodySent:Qo.channel("undici:request:bodySent"),headers:Qo.channel("undici:request:headers"),trailers:Qo.channel("undici:request:trailers"),error:Qo.channel("undici:request:error"),open:Qo.channel("undici:websocket:open"),close:Qo.channel("undici:websocket:close"),socketError:Qo.channel("undici:websocket:socket_error"),ping:Qo.channel("undici:websocket:ping"),pong:Qo.channel("undici:websocket:pong")};if(zK.enabled||eye.enabled){let t=eye.enabled?eye:zK;Qo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Qo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Qo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),Qo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),Qo.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),Qo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),Qo.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),WVe=!0}if(x2.enabled){if(!WVe){let t=zK.enabled?zK:x2;Qo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Qo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Qo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),Qo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}Qo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;x2("connection opened %s%s",e,r?`:${r}`:"")}),Qo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;x2("closed connection to %s - %s %s",e.url,r,n)}),Qo.channel("undici:websocket:socket_error").subscribe(t=>{x2("connection errored - %s",t.message)}),Qo.channel("undici:websocket:ping").subscribe(t=>{x2("ping received")}),Qo.channel("undici:websocket:pong").subscribe(t=>{x2("pong received")})}GVe.exports={channels:H7t}});var YVe=Q((C$n,zVe)=>{"use strict";d();var{InvalidArgumentError:Ra,NotSupportedError:W7t}=Lo(),yE=require("node:assert"),{isValidHTTPToken:$Ve,isValidHeaderValue:jVe,isStream:G7t,destroy:j7t,isBuffer:V7t,isFormDataLike:$7t,isIterable:z7t,isBlobLike:Y7t,buildURL:K7t,validateHandler:J7t,getServerName:X7t,normalizedMethodRecords:Z7t}=Pi(),{channels:Ny}=U3(),{headerNameLowerCasedRecord:VVe}=HK(),eQt=/[^\u0021-\u00ff]/,Dm=Symbol("handler"),rye=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:c,blocking:l,upgrade:u,headersTimeout:f,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},E){if(typeof r!="string")throw new Ra("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new Ra("path must be an absolute URL or start with a slash");if(eQt.test(r))throw new Ra("invalid request path");if(typeof n!="string")throw new Ra("method must be a string");if(Z7t[n]===void 0&&!$Ve(n))throw new Ra("invalid request method");if(u&&typeof u!="string")throw new Ra("upgrade must be a string");if(f!=null&&(!Number.isFinite(f)||f<0))throw new Ra("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new Ra("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new Ra("invalid reset");if(g!=null&&typeof g!="boolean")throw new Ra("invalid expectContinue");if(this.headersTimeout=f,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(G7t(i)){this.body=i;let x=this.body._readableState;(!x||!x.autoDestroy)&&(this.endHandler=s(function(){j7t(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=b=>{this.abort?this.abort(b):this.error=b},this.body.on("error",this.errorHandler)}else if(V7t(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if($7t(i)||z7t(i)||Y7t(i))this.body=i;else throw new Ra("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?K7t(r,a):r,this.origin=e,this.idempotent=c??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new Ra("headers array must be even");for(let x=0;x<o.length;x+=2)YK(this,o[x],o[x+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let x of o){if(!Array.isArray(x)||x.length!==2)throw new Ra("headers must be in key-value pair format");YK(this,x[0],x[1])}else{let x=Object.keys(o);for(let b=0;b<x.length;++b)YK(this,x[b],o[x[b]])}else if(o!=null)throw new Ra("headers must be an object or an array");J7t(E,n,u),this.servername=y||X7t(this.host),this[Dm]=E,Ny.create.hasSubscribers&&Ny.create.publish({request:this})}onBodySent(e){if(this[Dm].onBodySent)try{return this[Dm].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(Ny.bodySent.hasSubscribers&&Ny.bodySent.publish({request:this}),this[Dm].onRequestSent)try{return this[Dm].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(yE(!this.aborted),yE(!this.completed),this.error)e(this.error);else return this.abort=e,this[Dm].onConnect(e)}onResponseStarted(){return this[Dm].onResponseStarted?.()}onHeaders(e,r,n,i){yE(!this.aborted),yE(!this.completed),Ny.headers.hasSubscribers&&Ny.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[Dm].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){yE(!this.aborted),yE(!this.completed);try{return this[Dm].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return yE(!this.aborted),yE(!this.completed),this[Dm].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),yE(!this.aborted),this.completed=!0,Ny.trailers.hasSubscribers&&Ny.trailers.publish({request:this,trailers:e});try{return this[Dm].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),Ny.error.hasSubscribers&&Ny.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[Dm].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return YK(this,e,r),this}};function YK(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new Ra(`invalid ${e} header`);if(r===void 0)return;let n=VVe[e];if(n===void 0&&(n=e.toLowerCase(),VVe[n]===void 0&&!$Ve(n)))throw new Ra("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!jVe(r[o]))throw new Ra(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new Ra(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!jVe(r))throw new Ra(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new Ra("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new Ra("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new Ra(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new Ra("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new W7t("expect header not supported");t.headers.push(e,r)}}}s(YK,"processHeader");zVe.exports=rye});var uF=Q((x$n,KVe)=>{"use strict";d();var tQt=require("node:events"),KK=class extends tQt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new nye(this,n)}},nye=class extends KK{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};KVe.exports=KK});var G3=Q((T$n,JVe)=>{"use strict";d();var rQt=uF(),{ClientDestroyedError:iye,ClientClosedError:nQt,InvalidArgumentError:q3}=Lo(),{kDestroy:iQt,kClose:oQt,kClosed:dF,kDestroyed:H3,kDispatch:oye,kInterceptors:b2}=pa(),CE=Symbol("onDestroyed"),W3=Symbol("onClosed"),JK=Symbol("Intercepted Dispatch"),sye=class extends rQt{static{s(this,"DispatcherBase")}constructor(){super(),this[H3]=!1,this[CE]=null,this[dF]=!1,this[W3]=[]}get destroyed(){return this[H3]}get closed(){return this[dF]}get interceptors(){return this[b2]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[b2][r]!="function")throw new q3("interceptor must be an function")}this[b2]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new q3("invalid callback");if(this[H3]){queueMicrotask(()=>e(new iye,null));return}if(this[dF]){this[W3]?this[W3].push(e):queueMicrotask(()=>e(null,null));return}this[dF]=!0,this[W3].push(e);let r=s(()=>{let n=this[W3];this[W3]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[oQt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,c)=>a?o(a):i(c))});if(typeof r!="function")throw new q3("invalid callback");if(this[H3]){this[CE]?this[CE].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new iye),this[H3]=!0,this[CE]=this[CE]||[],this[CE].push(r);let n=s(()=>{let i=this[CE];this[CE]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[iQt](e).then(()=>{queueMicrotask(n)})}[JK](e,r){if(!this[b2]||this[b2].length===0)return this[JK]=this[oye],this[oye](e,r);let n=this[oye].bind(this);for(let i=this[b2].length-1;i>=0;i--)n=this[b2][i](n);return this[JK]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new q3("handler must be an object");try{if(!e||typeof e!="object")throw new q3("opts must be an object.");if(this[H3]||this[CE])throw new iye;if(this[dF])throw new nQt;return this[JK](e,r)}catch(n){if(typeof r.onError!="function")throw new q3("invalid onError method");return r.onError(n),!1}}};JVe.exports=sye});var pye=Q((S$n,t$e)=>{"use strict";d();var j3=0,aye=1e3,cye=(aye>>1)-1,EE,lye=Symbol("kFastTimer"),vE=[],uye=-2,dye=-1,ZVe=0,XVe=1;function fye(){j3+=cye;let t=0,e=vE.length;for(;t<e;){let r=vE[t];r._state===ZVe?(r._idleStart=j3-cye,r._state=XVe):r._state===XVe&&j3>=r._idleStart+r._idleTimeout&&(r._state=dye,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===dye?(r._state=uye,--e!==0&&(vE[t]=vE[e])):++t}vE.length=e,vE.length!==0&&e$e()}s(fye,"onTick");function e$e(){EE?EE.refresh():(clearTimeout(EE),EE=setTimeout(fye,cye),EE.unref&&EE.unref())}s(e$e,"refreshTimeout");var XK=class{static{s(this,"FastTimer")}[lye]=!0;_state=uye;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===uye&&vE.push(this),(!EE||vE.length===1)&&e$e(),this._state=ZVe}clear(){this._state=dye,this._idleStart=-1}};t$e.exports={setTimeout(t,e,r){return e<=aye?setTimeout(t,e,r):new XK(t,e,r)},clearTimeout(t){t[lye]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new XK(t,e,r)},clearFastTimeout(t){t.clear()},now(){return j3},tick(t=0){j3+=t-aye+1,fye(),fye()},reset(){j3=0,vE.length=0,clearTimeout(EE),EE=null},kFastTimer:lye}});var fF=Q((D$n,s$e)=>{"use strict";d();var sQt=require("node:net"),r$e=require("node:assert"),o$e=Pi(),{InvalidArgumentError:aQt,ConnectTimeoutError:cQt}=Lo(),ZK=pye();function n$e(){}s(n$e,"noop");var mye,hye;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?hye=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:hye=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function lQt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new aQt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},c=new hye(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:f,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},E){let x;if(p==="https:"){mye||(mye=require("node:tls")),h=h||a.servername||o$e.getServerName(f)||null;let _=h||u;r$e(_);let k=i||c.get(_)||null;m=m||443,x=mye.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),x.on("session",function(P){c.set(_,P)})}else r$e(!y,"httpSocket can only be sent on TLS update"),m=m||80,x=sQt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;x.setKeepAlive(!0,_)}let b=uQt(new WeakRef(x),{timeout:n,hostname:u,port:m});return x.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(b),E){let _=E;E=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(b),E){let k=E;E=null,k(_)}}),x},"connect")}s(lQt,"buildConnector");var uQt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return n$e;let r=null,n=null,i=ZK.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>i$e(t.deref(),e))})},e.timeout);return()=>{ZK.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return n$e;let r=null,n=ZK.setFastTimeout(()=>{r=setImmediate(()=>{i$e(t.deref(),e)})},e.timeout);return()=>{ZK.clearFastTimeout(n),clearImmediate(r)}};function i$e(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,o$e.destroy(t,new cQt(r))}s(i$e,"onConnectTimeout");s$e.exports=lQt});var a$e=Q(eJ=>{"use strict";d();Object.defineProperty(eJ,"__esModule",{value:!0});eJ.enumToMap=void 0;function dQt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(dQt,"enumToMap");eJ.enumToMap=dQt});var c$e=Q(Wt=>{"use strict";d();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.SPECIAL_HEADERS=Wt.HEADER_STATE=Wt.MINOR=Wt.MAJOR=Wt.CONNECTION_TOKEN_CHARS=Wt.HEADER_CHARS=Wt.TOKEN=Wt.STRICT_TOKEN=Wt.HEX=Wt.URL_CHAR=Wt.STRICT_URL_CHAR=Wt.USERINFO_CHARS=Wt.MARK=Wt.ALPHANUM=Wt.NUM=Wt.HEX_MAP=Wt.NUM_MAP=Wt.ALPHA=Wt.FINISH=Wt.H_METHOD_MAP=Wt.METHOD_MAP=Wt.METHODS_RTSP=Wt.METHODS_ICE=Wt.METHODS_HTTP=Wt.METHODS=Wt.LENIENT_FLAGS=Wt.FLAGS=Wt.TYPE=Wt.ERROR=void 0;var fQt=a$e(),pQt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(pQt=Wt.ERROR||(Wt.ERROR={}));var mQt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(mQt=Wt.TYPE||(Wt.TYPE={}));var hQt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(hQt=Wt.FLAGS||(Wt.FLAGS={}));var gQt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(gQt=Wt.LENIENT_FLAGS||(Wt.LENIENT_FLAGS={}));var gn;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(gn=Wt.METHODS||(Wt.METHODS={}));Wt.METHODS_HTTP=[gn.DELETE,gn.GET,gn.HEAD,gn.POST,gn.PUT,gn.CONNECT,gn.OPTIONS,gn.TRACE,gn.COPY,gn.LOCK,gn.MKCOL,gn.MOVE,gn.PROPFIND,gn.PROPPATCH,gn.SEARCH,gn.UNLOCK,gn.BIND,gn.REBIND,gn.UNBIND,gn.ACL,gn.REPORT,gn.MKACTIVITY,gn.CHECKOUT,gn.MERGE,gn["M-SEARCH"],gn.NOTIFY,gn.SUBSCRIBE,gn.UNSUBSCRIBE,gn.PATCH,gn.PURGE,gn.MKCALENDAR,gn.LINK,gn.UNLINK,gn.PRI,gn.SOURCE];Wt.METHODS_ICE=[gn.SOURCE];Wt.METHODS_RTSP=[gn.OPTIONS,gn.DESCRIBE,gn.ANNOUNCE,gn.SETUP,gn.PLAY,gn.PAUSE,gn.TEARDOWN,gn.GET_PARAMETER,gn.SET_PARAMETER,gn.REDIRECT,gn.RECORD,gn.FLUSH,gn.GET,gn.POST];Wt.METHOD_MAP=fQt.enumToMap(gn);Wt.H_METHOD_MAP={};Object.keys(Wt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Wt.H_METHOD_MAP[t]=Wt.METHOD_MAP[t])});var AQt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(AQt=Wt.FINISH||(Wt.FINISH={}));Wt.ALPHA=[];for(let t=65;t<=90;t++)Wt.ALPHA.push(String.fromCharCode(t)),Wt.ALPHA.push(String.fromCharCode(t+32));Wt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Wt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Wt.NUM=["0","1","2","3","4","5","6","7","8","9"];Wt.ALPHANUM=Wt.ALPHA.concat(Wt.NUM);Wt.MARK=["-","_",".","!","~","*","'","(",")"];Wt.USERINFO_CHARS=Wt.ALPHANUM.concat(Wt.MARK).concat(["%",";",":","&","=","+","$",","]);Wt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Wt.ALPHANUM);Wt.URL_CHAR=Wt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Wt.URL_CHAR.push(t);Wt.HEX=Wt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Wt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Wt.ALPHANUM);Wt.TOKEN=Wt.STRICT_TOKEN.concat([" "]);Wt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Wt.HEADER_CHARS.push(t);Wt.CONNECTION_TOKEN_CHARS=Wt.HEADER_CHARS.filter(t=>t!==44);Wt.MAJOR=Wt.NUM_MAP;Wt.MINOR=Wt.MAJOR;var V3;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(V3=Wt.HEADER_STATE||(Wt.HEADER_STATE={}));Wt.SPECIAL_HEADERS={connection:V3.CONNECTION,"content-length":V3.CONTENT_LENGTH,"proxy-connection":V3.CONNECTION,"transfer-encoding":V3.TRANSFER_ENCODING,upgrade:V3.UPGRADE}});var gye=Q((q$n,l$e)=>{"use strict";d();var{Buffer:yQt}=require("node:buffer");l$e.exports=yQt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var d$e=Q((W$n,u$e)=>{"use strict";d();var{Buffer:CQt}=require("node:buffer");u$e.exports=CQt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var pF=Q((j$n,C$e)=>{"use strict";d();var f$e=["GET","HEAD","POST"],EQt=new Set(f$e),vQt=[101,204,205,304],p$e=[301,302,303,307,308],xQt=new Set(p$e),m$e=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],bQt=new Set(m$e),h$e=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],IQt=new Set(h$e),TQt=["follow","manual","error"],g$e=["GET","HEAD","OPTIONS","TRACE"],wQt=new Set(g$e),_Qt=["navigate","same-origin","no-cors","cors"],SQt=["omit","same-origin","include"],RQt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],kQt=["content-encoding","content-language","content-location","content-type","content-length"],PQt=["half"],A$e=["CONNECT","TRACE","TRACK"],BQt=new Set(A$e),y$e=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],DQt=new Set(y$e);C$e.exports={subresource:y$e,forbiddenMethods:A$e,requestBodyHeader:kQt,referrerPolicy:h$e,requestRedirect:TQt,requestMode:_Qt,requestCredentials:SQt,requestCache:RQt,redirectStatus:p$e,corsSafeListedMethods:f$e,nullBodyStatus:vQt,safeMethods:g$e,badPorts:m$e,requestDuplex:PQt,subresourceSet:DQt,badPortsSet:bQt,redirectStatusSet:xQt,corsSafeListedMethodsSet:EQt,safeMethodsSet:wQt,forbiddenMethodsSet:BQt,referrerPolicySet:IQt}});var yye=Q(($$n,E$e)=>{"use strict";d();var Aye=Symbol.for("undici.globalOrigin.1");function NQt(){return globalThis[Aye]}s(NQt,"getGlobalOrigin");function LQt(t){if(t===void 0){Object.defineProperty(globalThis,Aye,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,Aye,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(LQt,"setGlobalOrigin");E$e.exports={getGlobalOrigin:NQt,setGlobalOrigin:LQt}});var Mf=Q((K$n,_$e)=>{"use strict";d();var rJ=require("node:assert"),MQt=new TextEncoder,mF=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,FQt=/[\u000A\u000D\u0009\u0020]/,OQt=/[\u0009\u000A\u000C\u000D\u0020]/g,QQt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function UQt(t){rJ(t.protocol==="data:");let e=b$e(t,!0);e=e.slice(5);let r={position:0},n=$3(",",e,r),i=n.length;if(n=VQt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=I$e(o);if(/;(\u0020){0,}base64$/i.test(n)){let l=w$e(a);if(a=HQt(l),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let c=Cye(n);return c==="failure"&&(c=Cye("text/plain;charset=US-ASCII")),{mimeType:c,body:a}}s(UQt,"dataURLProcessor");function b$e(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(b$e,"URLSerializer");function nJ(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(nJ,"collectASequenceOfCodePoints");function $3(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s($3,"collectASequenceOfCodePointsFast");function I$e(t){let e=MQt.encode(t);return qQt(e)}s(I$e,"stringPercentDecode");function v$e(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(v$e,"isHexCharByte");function x$e(t){return t>=48&&t<=57?t-48:(t&223)-55}s(x$e,"hexByteToNumber");function qQt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(v$e(t[i+1])&&v$e(t[i+2]))?r[n++]=37:(r[n++]=x$e(t[i+1])<<4|x$e(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(qQt,"percentDecode");function Cye(t){t=tJ(t,!0,!0);let e={position:0},r=$3("/",t,e);if(r.length===0||!mF.test(r)||e.position>t.length)return"failure";e.position++;let n=$3(";",t,e);if(n=tJ(n,!1,!0),n.length===0||!mF.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,nJ(u=>FQt.test(u),t,e);let c=nJ(u=>u!==";"&&u!=="=",t,e);if(c=c.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let l=null;if(t[e.position]==='"')l=T$e(t,e,!0),$3(";",t,e);else if(l=$3(";",t,e),l=tJ(l,!1,!0),l.length===0)continue;c.length!==0&&mF.test(c)&&(l.length===0||QQt.test(l))&&!a.parameters.has(c)&&a.parameters.set(c,l)}return a}s(Cye,"parseMIMEType");function HQt(t){t=t.replace(OQt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(HQt,"forgivingBase64");function T$e(t,e,r){let n=e.position,i="";for(rJ(t[e.position]==='"'),e.position++;i+=nJ(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{rJ(o==='"');break}}return r?i:t.slice(n,e.position)}s(T$e,"collectAnHTTPQuotedString");function WQt(t){rJ(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",mF.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(WQt,"serializeAMimeType");function GQt(t){return t===13||t===10||t===9||t===32}s(GQt,"isHTTPWhiteSpace");function tJ(t,e=!0,r=!0){return Eye(t,e,r,GQt)}s(tJ,"removeHTTPWhitespace");function jQt(t){return t===13||t===10||t===9||t===12||t===32}s(jQt,"isASCIIWhitespace");function VQt(t,e=!0,r=!0){return Eye(t,e,r,jQt)}s(VQt,"removeASCIIWhitespace");function Eye(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(Eye,"removeChars");function w$e(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(w$e,"isomorphicDecode");function $Qt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s($Qt,"minimizeSupportedMimeType");_$e.exports={dataURLProcessor:UQt,URLSerializer:b$e,collectASequenceOfCodePoints:nJ,collectASequenceOfCodePointsFast:$3,stringPercentDecode:I$e,parseMIMEType:Cye,collectAnHTTPQuotedString:T$e,serializeAMimeType:WQt,removeChars:Eye,removeHTTPWhitespace:tJ,minimizeSupportedMimeType:$Qt,HTTP_TOKEN_CODEPOINTS:mF,isomorphicDecode:w$e}});var gu=Q((Z$n,S$e)=>{"use strict";d();var{types:Ly,inspect:zQt}=require("node:util"),{markAsUncloneable:YQt}=require("node:worker_threads"),{toUSVString:KQt}=Pi(),Lt={};Lt.converters={};Lt.util={};Lt.errors={};Lt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Lt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Lt.errors.exception({header:t.prefix,message:r})};Lt.errors.invalidArgument=function(t){return Lt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Lt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};Lt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw Lt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};Lt.illegalConstructor=function(){throw Lt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Lt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Lt.util.markAsUncloneable=YQt||(()=>{});Lt.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Lt.errors.exception({header:"Integer conversion",message:`Could not convert ${Lt.util.Stringify(t)} to an integer.`});if(a=Lt.util.IntegerPart(a),a<o||a>i)throw Lt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Lt.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Lt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Lt.util.Stringify=function(t){switch(Lt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return zQt(t);case"String":return`"${t}"`;default:return`${t}`}};Lt.sequenceConverter=function(t){return(e,r,n,i)=>{if(Lt.util.Type(e)!=="Object")throw Lt.errors.exception({header:r,message:`${n} (${Lt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],c=0;if(o===void 0||typeof o.next!="function")throw Lt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:u}=o.next();if(l)break;a.push(t(u,r,`${n}[${c++}]`))}return a}};Lt.recordConverter=function(t,e){return(r,n,i)=>{if(Lt.util.Type(r)!=="Object")throw Lt.errors.exception({header:n,message:`${i} ("${Lt.util.Type(r)}") is not an Object.`});let o={};if(!Ly.isProxy(r)){let c=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of c){let u=t(l,n,i),f=e(r[l],n,i);o[u]=f}return o}let a=Reflect.ownKeys(r);for(let c of a)if(Reflect.getOwnPropertyDescriptor(r,c)?.enumerable){let u=t(c,n,i),f=e(r[c],n,i);o[u]=f}return o}};Lt.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Lt.errors.exception({header:r,message:`Expected ${n} ("${Lt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Lt.dictionaryConverter=function(t){return(e,r,n)=>{let i=Lt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Lt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:c,defaultValue:l,required:u,converter:f}=a;if(u===!0&&!Object.hasOwn(e,c))throw Lt.errors.exception({header:r,message:`Missing required key "${c}".`});let p=e[c],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=l()),u||m||p!==void 0){if(p=f(p,r,`${n}.${c}`),a.allowedValues&&!a.allowedValues.includes(p))throw Lt.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[c]=p}}return o}};Lt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};Lt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Lt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Lt.converters.ByteString=function(t,e,r){let n=Lt.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};Lt.converters.USVString=KQt;Lt.converters.boolean=function(t){return!!t};Lt.converters.any=function(t){return t};Lt.converters["long long"]=function(t,e,r){return Lt.util.ConvertToInt(t,64,"signed",void 0,e,r)};Lt.converters["unsigned long long"]=function(t,e,r){return Lt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};Lt.converters["unsigned long"]=function(t,e,r){return Lt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};Lt.converters["unsigned short"]=function(t,e,r,n){return Lt.util.ConvertToInt(t,16,"unsigned",n,e,r)};Lt.converters.ArrayBuffer=function(t,e,r,n){if(Lt.util.Type(t)!=="Object"||!Ly.isAnyArrayBuffer(t))throw Lt.errors.conversionFailed({prefix:e,argument:`${r} ("${Lt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&Ly.isSharedArrayBuffer(t))throw Lt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Lt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Lt.converters.TypedArray=function(t,e,r,n,i){if(Lt.util.Type(t)!=="Object"||!Ly.isTypedArray(t)||t.constructor.name!==e.name)throw Lt.errors.conversionFailed({prefix:r,argument:`${n} ("${Lt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&Ly.isSharedArrayBuffer(t.buffer))throw Lt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Lt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Lt.converters.DataView=function(t,e,r,n){if(Lt.util.Type(t)!=="Object"||!Ly.isDataView(t))throw Lt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&Ly.isSharedArrayBuffer(t.buffer))throw Lt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Lt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Lt.converters.BufferSource=function(t,e,r,n){if(Ly.isAnyArrayBuffer(t))return Lt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(Ly.isTypedArray(t))return Lt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(Ly.isDataView(t))return Lt.converters.DataView(t,e,r,{...n,allowShared:!1});throw Lt.errors.conversionFailed({prefix:e,argument:`${r} ("${Lt.util.Stringify(t)}")`,types:["BufferSource"]})};Lt.converters["sequence<ByteString>"]=Lt.sequenceConverter(Lt.converters.ByteString);Lt.converters["sequence<sequence<ByteString>>"]=Lt.sequenceConverter(Lt.converters["sequence<ByteString>"]);Lt.converters["record<ByteString, ByteString>"]=Lt.recordConverter(Lt.converters.ByteString,Lt.converters.ByteString);S$e.exports={webidl:Lt}});var z0=Q((tzn,H$e)=>{"use strict";d();var{Transform:JQt}=require("node:stream"),R$e=require("node:zlib"),{redirectStatusSet:XQt,referrerPolicySet:ZQt,badPortsSet:eUt}=pF(),{getGlobalOrigin:k$e}=yye(),{collectASequenceOfCodePoints:I2,collectAnHTTPQuotedString:tUt,removeChars:rUt,parseMIMEType:nUt}=Mf(),{performance:iUt}=require("node:perf_hooks"),{isBlobLike:oUt,ReadableStreamFrom:sUt,isValidHTTPToken:P$e,normalizedMethodRecordsBase:aUt}=Pi(),T2=require("node:assert"),{isUint8Array:cUt}=require("node:util/types"),{webidl:hF}=gu(),B$e=[],oJ;try{oJ=require("node:crypto");let t=["sha256","sha384","sha512"];B$e=oJ.getHashes().filter(e=>t.includes(e))}catch{}function D$e(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(D$e,"responseURL");function lUt(t,e){if(!XQt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&L$e(r)&&(N$e(r)||(r=uUt(r)),r=new URL(r,D$e(t))),r&&!r.hash&&(r.hash=e),r}s(lUt,"responseLocationURL");function N$e(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(N$e,"isValidEncodedURL");function uUt(t){return Buffer.from(t,"binary").toString("utf8")}s(uUt,"normalizeBinaryStringToUtf8");function AF(t){return t.urlList[t.urlList.length-1]}s(AF,"requestCurrentURL");function dUt(t){let e=AF(t);return U$e(e)&&eUt.has(e.port)?"blocked":"allowed"}s(dUt,"requestBadPort");function fUt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(fUt,"isErrorLike");function pUt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(pUt,"isValidReasonPhrase");var mUt=P$e;function L$e(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(L$e,"isValidHeaderValue");function hUt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(ZQt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(hUt,"setRequestReferrerPolicyOnRedirect");function gUt(){return"allowed"}s(gUt,"crossOriginResourcePolicyCheck");function AUt(){return"success"}s(AUt,"corsCheck");function yUt(){return"success"}s(yUt,"TAOCheck");function CUt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(CUt,"appendFetchMetadata");function EUt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&xye(t.origin)&&!xye(AF(t))&&(e=null);break;case"same-origin":sJ(t,AF(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(EUt,"appendRequestOriginHeader");function z3(t,e){return t}s(z3,"coarsenTime");function vUt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:z3(t.domainLookupStartTime,r),domainLookupEndTime:z3(t.domainLookupEndTime,r),connectionStartTime:z3(t.connectionStartTime,r),connectionEndTime:z3(t.connectionEndTime,r),secureConnectionStartTime:z3(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(vUt,"clampAndCoarsenConnectionTimingInfo");function xUt(t){return z3(iUt.now(),t)}s(xUt,"coarsenedSharedCurrentTime");function bUt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(bUt,"createOpaqueTimingInfo");function M$e(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(M$e,"makePolicyContainer");function IUt(t){return{referrerPolicy:t.referrerPolicy}}s(IUt,"clonePolicyContainer");function TUt(t){let e=t.referrerPolicy;T2(e);let r=null;if(t.referrer==="client"){let c=k$e();if(!c||c.origin==="null")return"no-referrer";r=new URL(c)}else t.referrer instanceof URL&&(r=t.referrer);let n=vye(r),i=vye(r,!0);n.toString().length>4096&&(n=i);let o=sJ(t,n),a=gF(n)&&!gF(t.url);switch(e){case"origin":return i??vye(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let c=AF(t);return sJ(n,c)?n:gF(n)&&!gF(c)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(TUt,"determineRequestsReferrer");function vye(t,e){return T2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(vye,"stripURLForReferrer");function gF(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(gF,"isURLPotentiallyTrustworthy");function wUt(t,e){if(oJ===void 0)return!0;let r=F$e(e);if(r==="no metadata"||r.length===0)return!0;let n=SUt(r),i=RUt(r,n);for(let o of i){let a=o.algo,c=o.hash,l=oJ.createHash(a).update(t).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),kUt(l,c))return!0}return!1}s(wUt,"bytesMatch");var _Ut=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function F$e(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=_Ut.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();B$e.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(F$e,"parseMetadata");function SUt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(SUt,"getStrongestMetadata");function RUt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(RUt,"filterMetadataListByAlgorithm");function kUt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(kUt,"compareBase64Mixed");function PUt(t){}s(PUt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function sJ(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(sJ,"sameOrigin");function BUt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(BUt,"createDeferredPromise");function DUt(t){return t.controller.state==="aborted"}s(DUt,"isAborted");function NUt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(NUt,"isCancelled");function LUt(t){return aUt[t.toLowerCase()]??t}s(LUt,"normalizeMethod");function MUt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return T2(typeof e=="string"),e}s(MUt,"serializeJavascriptValueToJSONString");var FUt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function O$e(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,c){this.#e=a,this.#t=c,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,c=this.#e[e],l=c.length;if(a>=l)return{value:void 0,done:!0};let{[r]:u,[n]:f}=c[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=f;break;case"key+value":p=[u,f];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,FUt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(O$e,"createIterator");function OUt(t,e,r,n=0,i=1){let o=O$e(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return hF.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return hF.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return hF.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(l,u=globalThis){if(hF.brandCheck(this,e),hF.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:f,1:p}of o(this,"key+value"))l.call(u,p,f,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(OUt,"iteratorMixin");async function QUt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await Q$e(o))}catch(a){i(a)}}s(QUt,"fullyReadBody");function UUt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(UUt,"isReadableStreamLike");function qUt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(qUt,"readableStreamClose");var HUt=/[^\x00-\xFF]/;function iJ(t){return T2(!HUt.test(t)),t}s(iJ,"isomorphicEncode");async function Q$e(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!cUt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(Q$e,"readAllBytes");function WUt(t){T2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(WUt,"urlIsLocal");function xye(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(xye,"urlHasHttpsScheme");function U$e(t){T2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(U$e,"urlIsHttpHttpsScheme");function GUt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&I2(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&I2(l=>l==="	"||l===" ",r,n);let i=I2(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&I2(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&I2(l=>l==="	"||l===" ",r,n);let a=I2(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),c=a.length?Number(a):null;return n.position<r.length||c===null&&o===null||o>c?"failure":{rangeStartValue:o,rangeEndValue:c}}s(GUt,"simpleRangeHeaderValue");function jUt(t,e,r){let n="bytes ";return n+=iJ(`${t}`),n+="-",n+=iJ(`${e}`),n+="/",n+=iJ(`${r}`),n}s(jUt,"buildContentRange");var bye=class extends JQt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?R$e.createInflate(this.#e):R$e.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function VUt(t){return new bye(t)}s(VUt,"createInflate");function $Ut(t){let e=null,r=null,n=null,i=q$e("content-type",t);if(i===null)return"failure";for(let o of i){let a=nUt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s($Ut,"extractMimeType");function zUt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=I2(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=tUt(e,r),r.position<e.length)continue}else T2(e.charCodeAt(r.position)===44),r.position++;i=rUt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(zUt,"gettingDecodingSplitting");function q$e(t,e){let r=e.get(t,!0);return r===null?null:zUt(r)}s(q$e,"getDecodeSplit");var YUt=new TextDecoder;function KUt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),YUt.decode(t))}s(KUt,"utf8DecodeBytes");var Iye=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return k$e()}get origin(){return this.baseUrl?.origin}policyContainer=M$e()},Tye=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new Iye},JUt=new Tye;H$e.exports={isAborted:DUt,isCancelled:NUt,isValidEncodedURL:N$e,createDeferredPromise:BUt,ReadableStreamFrom:sUt,tryUpgradeRequestToAPotentiallyTrustworthyURL:PUt,clampAndCoarsenConnectionTimingInfo:vUt,coarsenedSharedCurrentTime:xUt,determineRequestsReferrer:TUt,makePolicyContainer:M$e,clonePolicyContainer:IUt,appendFetchMetadata:CUt,appendRequestOriginHeader:EUt,TAOCheck:yUt,corsCheck:AUt,crossOriginResourcePolicyCheck:gUt,createOpaqueTimingInfo:bUt,setRequestReferrerPolicyOnRedirect:hUt,isValidHTTPToken:P$e,requestBadPort:dUt,requestCurrentURL:AF,responseURL:D$e,responseLocationURL:lUt,isBlobLike:oUt,isURLPotentiallyTrustworthy:gF,isValidReasonPhrase:pUt,sameOrigin:sJ,normalizeMethod:LUt,serializeJavascriptValueToJSONString:MUt,iteratorMixin:OUt,createIterator:O$e,isValidHeaderName:mUt,isValidHeaderValue:L$e,isErrorLike:fUt,fullyReadBody:QUt,bytesMatch:wUt,isReadableStreamLike:UUt,readableStreamClose:qUt,isomorphicEncode:iJ,urlIsLocal:WUt,urlHasHttpsScheme:xye,urlIsHttpHttpsScheme:U$e,readAllBytes:Q$e,simpleRangeHeaderValue:GUt,buildContentRange:jUt,parseMetadata:F$e,createInflate:VUt,extractMimeType:$Ut,getDecodeSplit:q$e,utf8DecodeBytes:KUt,environmentSettingsObject:JUt}});var wI=Q((izn,W$e)=>{"use strict";d();W$e.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var _ye=Q((szn,G$e)=>{"use strict";d();var{Blob:XUt,File:ZUt}=require("node:buffer"),{kState:xE}=wI(),{webidl:My}=gu(),wye=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[xE]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return My.brandCheck(this,t),this[xE].blobLike.stream(...e)}arrayBuffer(...e){return My.brandCheck(this,t),this[xE].blobLike.arrayBuffer(...e)}slice(...e){return My.brandCheck(this,t),this[xE].blobLike.slice(...e)}text(...e){return My.brandCheck(this,t),this[xE].blobLike.text(...e)}get size(){return My.brandCheck(this,t),this[xE].blobLike.size}get type(){return My.brandCheck(this,t),this[xE].blobLike.type}get name(){return My.brandCheck(this,t),this[xE].name}get lastModified(){return My.brandCheck(this,t),this[xE].lastModified}get[Symbol.toStringTag](){return"File"}};My.converters.Blob=My.interfaceConverter(XUt);function eqt(t){return t instanceof ZUt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(eqt,"isFileLike");G$e.exports={FileLike:wye,isFileLike:eqt}});var CF=Q((lzn,Y$e)=>{"use strict";d();var{isBlobLike:aJ,iteratorMixin:tqt}=z0(),{kState:Ud}=wI(),{kEnumerableProperty:Y3}=Pi(),{FileLike:j$e,isFileLike:rqt}=_ye(),{webidl:Is}=gu(),{File:z$e}=require("node:buffer"),V$e=require("node:util"),$$e=globalThis.File??z$e,yF=class t{static{s(this,"FormData")}constructor(e){if(Is.util.markAsUncloneable(this),e!==void 0)throw Is.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Ud]=[]}append(e,r,n=void 0){Is.brandCheck(this,t);let i="FormData.append";if(Is.argumentLengthCheck(arguments,2,i),arguments.length===3&&!aJ(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Is.converters.USVString(e,i,"name"),r=aJ(r)?Is.converters.Blob(r,i,"value",{strict:!1}):Is.converters.USVString(r,i,"value"),n=arguments.length===3?Is.converters.USVString(n,i,"filename"):void 0;let o=Sye(e,r,n);this[Ud].push(o)}delete(e){Is.brandCheck(this,t);let r="FormData.delete";Is.argumentLengthCheck(arguments,1,r),e=Is.converters.USVString(e,r,"name"),this[Ud]=this[Ud].filter(n=>n.name!==e)}get(e){Is.brandCheck(this,t);let r="FormData.get";Is.argumentLengthCheck(arguments,1,r),e=Is.converters.USVString(e,r,"name");let n=this[Ud].findIndex(i=>i.name===e);return n===-1?null:this[Ud][n].value}getAll(e){Is.brandCheck(this,t);let r="FormData.getAll";return Is.argumentLengthCheck(arguments,1,r),e=Is.converters.USVString(e,r,"name"),this[Ud].filter(n=>n.name===e).map(n=>n.value)}has(e){Is.brandCheck(this,t);let r="FormData.has";return Is.argumentLengthCheck(arguments,1,r),e=Is.converters.USVString(e,r,"name"),this[Ud].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){Is.brandCheck(this,t);let i="FormData.set";if(Is.argumentLengthCheck(arguments,2,i),arguments.length===3&&!aJ(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Is.converters.USVString(e,i,"name"),r=aJ(r)?Is.converters.Blob(r,i,"name",{strict:!1}):Is.converters.USVString(r,i,"name"),n=arguments.length===3?Is.converters.USVString(n,i,"name"):void 0;let o=Sye(e,r,n),a=this[Ud].findIndex(c=>c.name===e);a!==-1?this[Ud]=[...this[Ud].slice(0,a),o,...this[Ud].slice(a+1).filter(c=>c.name!==e)]:this[Ud].push(o)}[V$e.inspect.custom](e,r){let n=this[Ud].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=V$e.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};tqt("FormData",yF,Ud,"name","value");Object.defineProperties(yF.prototype,{append:Y3,delete:Y3,get:Y3,getAll:Y3,has:Y3,set:Y3,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function Sye(t,e,r){if(typeof e!="string"){if(rqt(e)||(e=e instanceof Blob?new $$e([e],"blob",{type:e.type}):new j$e(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof z$e?new $$e([e],r,n):new j$e(e,r,n)}}return{name:t,value:e}}s(Sye,"makeEntry");Y$e.exports={FormData:yF,makeEntry:Sye}});var tze=Q((fzn,eze)=>{"use strict";d();var{isUSVString:K$e,bufferToLowerCasedHeaderName:nqt}=Pi(),{utf8DecodeBytes:iqt}=z0(),{HTTP_TOKEN_CODEPOINTS:oqt,isomorphicDecode:J$e}=Mf(),{isFileLike:sqt}=_ye(),{makeEntry:aqt}=CF(),cJ=require("node:assert"),{File:cqt}=require("node:buffer"),lqt=globalThis.File??cqt,uqt=Buffer.from('form-data; name="'),X$e=Buffer.from("; filename"),dqt=Buffer.from("--"),fqt=Buffer.from(`--\r
`);function pqt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(pqt,"isAsciiString");function mqt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(mqt,"validateBoundary");function hqt(t,e){cJ(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&lJ(t,dqt,o)||o.position===t.length-4&&lJ(t,fqt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let c=gqt(t,o);if(c==="failure")return"failure";let{name:l,filename:u,contentType:f,encoding:p}=c;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(f??="text/plain",pqt(f)||(f=""),h=new lqt([m],u,{type:f})):h=iqt(Buffer.from(m)),cJ(K$e(l)),cJ(typeof h=="string"&&K$e(h)||sqt(h)),i.push(aqt(l,h,u))}}s(hqt,"multipartFormDataParser");function gqt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=K3(c=>c!==10&&c!==13&&c!==58,t,e);if(a=Rye(a,!0,!0,c=>c===9||c===32),!oqt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,K3(c=>c===32||c===9,t,e),nqt(a)){case"content-disposition":{if(r=n=null,!lJ(t,uqt,e)||(e.position+=17,r=Z$e(t,e),r===null))return"failure";if(lJ(t,X$e,e)){let c=e.position+X$e.length;if(t[c]===42&&(e.position+=1,c+=1),t[c]!==61||t[c+1]!==34||(e.position+=12,n=Z$e(t,e),n===null))return"failure"}break}case"content-type":{let c=K3(l=>l!==10&&l!==13,t,e);c=Rye(c,!1,!0,l=>l===9||l===32),i=J$e(c);break}case"content-transfer-encoding":{let c=K3(l=>l!==10&&l!==13,t,e);c=Rye(c,!1,!0,l=>l===9||l===32),o=J$e(c);break}default:K3(c=>c!==10&&c!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(gqt,"parseMultipartFormDataHeaders");function Z$e(t,e){cJ(t[e.position-1]===34);let r=K3(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(Z$e,"parseMultipartFormDataName");function K3(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(K3,"collectASequenceOfBytes");function Rye(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(Rye,"removeChars");function lJ(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(lJ,"bufferStartsWith");eze.exports={multipartFormDataParser:hqt,validateBoundary:mqt}});var Z3=Q((hzn,lze)=>{"use strict";d();var EF=Pi(),{ReadableStreamFrom:Aqt,isBlobLike:rze,isReadableStreamLike:yqt,readableStreamClose:Cqt,createDeferredPromise:Eqt,fullyReadBody:vqt,extractMimeType:xqt,utf8DecodeBytes:oze}=z0(),{FormData:nze}=CF(),{kState:X3}=wI(),{webidl:bqt}=gu(),{Blob:Iqt}=require("node:buffer"),kye=require("node:assert"),{isErrored:sze,isDisturbed:Tqt}=require("node:stream"),{isArrayBuffer:wqt}=require("node:util/types"),{serializeAMimeType:_qt}=Mf(),{multipartFormDataParser:Sqt}=tze(),Pye;try{let t=require("node:crypto");Pye=s(e=>t.randomInt(0,e),"random")}catch{Pye=s(t=>Math.floor(Math.random(t)),"random")}var uJ=new TextEncoder;function Rqt(){}s(Rqt,"noop");var Bye=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,Dye;Bye&&(Dye=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!Tqt(e)&&!sze(e)&&e.cancel("Response object has been garbage collected").catch(Rqt)}));function aze(t,e=!1){let r=null;t instanceof ReadableStream?r=t:rze(t)?r=t.stream():r=new ReadableStream({async pull(l){let u=typeof i=="string"?uJ.encode(i):i;u.byteLength&&l.enqueue(u),queueMicrotask(()=>Cqt(l))},start(){},type:"bytes"}),kye(yqt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(wqt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(EF.isFormDataLike(t)){let l=`----formdata-undici-0${`${Pye(1e11)}`.padStart(11,"0")}`,u=`--${l}\r
Content-Disposition: form-data`;let f=s(E=>E.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(E=>E.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[E,x]of t)if(typeof x=="string"){let b=uJ.encode(u+`; name="${f(p(E))}"\r
\r
${p(x)}\r
`);m.push(b),o+=b.byteLength}else{let b=uJ.encode(`${u}; name="${f(p(E))}"`+(x.name?`; filename="${f(x.name)}"`:"")+`\r
Content-Type: ${x.type||"application/octet-stream"}\r
\r
`);m.push(b,x,h),typeof x.size=="number"?o+=b.byteLength+x.size+h.byteLength:g=!0}let y=uJ.encode(`--${l}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let E of m)E.stream?yield*E.stream():yield E},"action"),a=`multipart/form-data; boundary=${l}`}else if(rze(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(EF.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:Aqt(t)}if((typeof i=="string"||EF.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:f,done:p}=await l.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!sze(r)){let m=new Uint8Array(f);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(aze,"extractBody");function kqt(t,e=!1){return t instanceof ReadableStream&&(kye(!EF.isDisturbed(t),"The body has already been consumed."),kye(!t.locked,"The stream is locked.")),aze(t,e)}s(kqt,"safelyExtractBody");function Pqt(t,e){let[r,n]=e.stream.tee();return Bye&&Dye.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(Pqt,"cloneBody");function Bqt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(Bqt,"throwIfAborted");function Dqt(t){return{blob(){return J3(this,r=>{let n=ize(this);return n===null?n="":n&&(n=_qt(n)),new Iqt([r],{type:n})},t)},arrayBuffer(){return J3(this,r=>new Uint8Array(r).buffer,t)},text(){return J3(this,oze,t)},json(){return J3(this,Lqt,t)},formData(){return J3(this,r=>{let n=ize(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=Sqt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new nze;return o[X3]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new nze;for(let[a,c]of i)o.append(a,c);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return J3(this,r=>new Uint8Array(r),t)}}}s(Dqt,"bodyMixinMethods");function Nqt(t){Object.assign(t.prototype,Dqt(t))}s(Nqt,"mixinBody");async function J3(t,e,r){if(bqt.brandCheck(t,r),cze(t))throw new TypeError("Body is unusable: Body has already been read");Bqt(t[X3]);let n=Eqt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(c){i(c)}},"successSteps");return t[X3].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await vqt(t[X3].body,o,i),n.promise)}s(J3,"consumeBody");function cze(t){let e=t[X3].body;return e!=null&&(e.stream.locked||EF.isDisturbed(e.stream))}s(cze,"bodyUnusable");function Lqt(t){return JSON.parse(oze(t))}s(Lqt,"parseJSONFromBytes");function ize(t){let e=t[X3].headersList,r=xqt(e);return r==="failure"?null:r}s(ize,"bodyMimeType");lze.exports={extractBody:aze,safelyExtractBody:kqt,cloneBody:Pqt,mixinBody:Nqt,streamRegistry:Dye,hasFinalizationRegistry:Bye,bodyUnusable:cze}});var Eze=Q((yzn,Cze)=>{"use strict";d();var Tn=require("node:assert"),ei=Pi(),{channels:uze}=U3(),Nye=pye(),{RequestContentLengthMismatchError:w2,ResponseContentLengthMismatchError:Mqt,RequestAbortedError:gze,HeadersTimeoutError:Fqt,HeadersOverflowError:Oqt,SocketError:gJ,InformationalError:eB,BodyTimeoutError:Qqt,HTTPParserError:Uqt,ResponseExceededMaxSizeError:qqt}=Lo(),{kUrl:Aze,kReset:Ff,kClient:Oye,kParser:Ua,kBlocking:bF,kRunning:Ku,kPending:Hqt,kSize:dze,kWriting:SI,kQueue:Eg,kNoRef:vF,kKeepAliveDefaultTimeout:Wqt,kHostHeader:Gqt,kPendingIdx:jqt,kRunningIdx:Nm,kError:Lm,kPipelining:mJ,kSocket:tB,kKeepAliveTimeoutValue:AJ,kMaxHeadersSize:Lye,kKeepAliveMaxTimeout:Vqt,kKeepAliveTimeoutThreshold:$qt,kHeadersTimeout:zqt,kBodyTimeout:Yqt,kStrictContentLength:Qye,kMaxRequests:fze,kCounter:Kqt,kMaxResponseSize:Jqt,kOnError:Xqt,kResume:_I,kHTTPContext:yze}=pa(),Fy=c$e(),Zqt=Buffer.alloc(0),dJ=Buffer[Symbol.species],fJ=ei.addListener,eHt=ei.removeAllListeners,Mye;async function tHt(){let t=process.env.JEST_WORKER_ID?gye():void 0,e;try{e=await WebAssembly.compile(d$e())}catch{e=await WebAssembly.compile(t||gye())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{Tn(nl.ptr===r);let o=n-Qy+Oy.byteOffset;return nl.onStatus(new dJ(Oy.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(Tn(nl.ptr===r),nl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{Tn(nl.ptr===r);let o=n-Qy+Oy.byteOffset;return nl.onHeaderField(new dJ(Oy.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{Tn(nl.ptr===r);let o=n-Qy+Oy.byteOffset;return nl.onHeaderValue(new dJ(Oy.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(Tn(nl.ptr===r),nl.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{Tn(nl.ptr===r);let o=n-Qy+Oy.byteOffset;return nl.onBody(new dJ(Oy.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(Tn(nl.ptr===r),nl.onMessageComplete()||0),"wasm_on_message_complete")}})}s(tHt,"lazyllhttp");var Fye=null,Uye=tHt();Uye.catch();var nl=null,Oy=null,pJ=0,Qy=null,rHt=0,xF=1,rB=2|xF,hJ=4|xF,qye=8|rHt,Hye=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){Tn(Number.isFinite(e[Lye])&&e[Lye]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(Fy.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[Lye],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[Jqt]}setTimeout(e,r){e!==this.timeoutValue||r&xF^this.timeoutType&xF?(this.timeout&&(Nye.clearTimeout(this.timeout),this.timeout=null),e&&(r&xF?this.timeout=Nye.setFastTimeout(pze,e,new WeakRef(this)):(this.timeout=setTimeout(pze,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(Tn(this.ptr!=null),Tn(nl==null),this.llhttp.llhttp_resume(this.ptr),Tn(this.timeoutType===hJ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||Zqt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Tn(this.ptr!=null),Tn(nl==null),Tn(!this.paused);let{socket:r,llhttp:n}=this;e.length>pJ&&(Qy&&n.free(Qy),pJ=Math.ceil(e.length/4096)*4096,Qy=n.malloc(pJ)),new Uint8Array(n.memory.buffer,Qy,pJ).set(e);try{let i;try{Oy=e,nl=this,i=n.llhttp_execute(this.ptr,Qy,e.length)}catch(a){throw a}finally{nl=null,Oy=null}let o=n.llhttp_get_error_pos(this.ptr)-Qy;if(i===Fy.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===Fy.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==Fy.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),c="";if(a){let l=new Uint8Array(n.memory.buffer,a).indexOf(0);c="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,l).toString()+")"}throw new Uqt(c,Fy.ERROR[i],e.slice(o))}}catch(i){ei.destroy(r,i)}}destroy(){Tn(this.ptr!=null),Tn(nl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Nye.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[Eg][r[Nm]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=ei.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&ei.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&ei.destroy(this.socket,new Oqt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;Tn(r),Tn(n[tB]===i),Tn(!i.destroyed),Tn(!this.paused),Tn((o.length&1)===0);let c=n[Eg][n[Nm]];Tn(c),Tn(c.upgrade||c.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[Ua].destroy(),i[Ua]=null,i[Oye]=null,i[Lm]=null,eHt(i),n[tB]=null,n[yze]=null,n[Eg][n[Nm]++]=null,n.emit("disconnect",n[Aze],[n],new eB("upgrade"));try{c.onUpgrade(a,o,i)}catch(l){ei.destroy(i,l)}n[_I]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:c}=this;if(o.destroyed)return-1;let l=i[Eg][i[Nm]];if(!l)return-1;if(Tn(!this.upgrade),Tn(this.statusCode<200),e===100)return ei.destroy(o,new gJ("bad response",ei.getSocketInfo(o))),-1;if(r&&!l.upgrade)return ei.destroy(o,new gJ("bad upgrade",ei.getSocketInfo(o))),-1;if(Tn(this.timeoutType===rB),this.statusCode=e,this.shouldKeepAlive=n||l.method==="HEAD"&&!o[Ff]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let f=l.bodyTimeout!=null?l.bodyTimeout:i[Yqt];this.setTimeout(f,hJ)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return Tn(i[Ku]===1),this.upgrade=!0,2;if(r)return Tn(i[Ku]===1),this.upgrade=!0,2;if(Tn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[mJ]){let f=this.keepAlive?ei.parseKeepAliveTimeout(this.keepAlive):null;if(f!=null){let p=Math.min(f-i[$qt],i[Vqt]);p<=0?o[Ff]=!0:i[AJ]=p}else i[AJ]=i[Wqt]}else o[Ff]=!0;let u=l.onHeaders(e,a,this.resume,c)===!1;return l.aborted?-1:l.method==="HEAD"||e<200?1:(o[bF]&&(o[bF]=!1,i[_I]()),u?Fy.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[Eg][r[Nm]];if(Tn(a),Tn(this.timeoutType===hJ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Tn(i>=200),o>-1&&this.bytesRead+e.length>o)return ei.destroy(n,new qqt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return Fy.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:c,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;Tn(n>=100),Tn((this.headers.length&1)===0);let u=e[Eg][e[Nm]];if(Tn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&c!==parseInt(a,10))return ei.destroy(r,new Mqt),-1;if(u.onComplete(o),e[Eg][e[Nm]++]=null,r[SI])return Tn(e[Ku]===0),ei.destroy(r,new eB("reset")),Fy.ERROR.PAUSED;if(l){if(r[Ff]&&e[Ku]===0)return ei.destroy(r,new eB("reset")),Fy.ERROR.PAUSED;e[mJ]==null||e[mJ]===1?setImmediate(()=>e[_I]()):e[_I]()}else return ei.destroy(r,new eB("reset")),Fy.ERROR.PAUSED}}};function pze(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===rB?(!e[SI]||e.writableNeedDrain||n[Ku]>1)&&(Tn(!i,"cannot be paused while waiting for headers"),ei.destroy(e,new Fqt)):r===hJ?i||ei.destroy(e,new Qqt):r===qye&&(Tn(n[Ku]===0&&n[AJ]),ei.destroy(e,new eB("socket idle timeout")))}s(pze,"onParserTimeout");async function nHt(t,e){t[tB]=e,Fye||(Fye=await Uye,Uye=null),e[vF]=!1,e[SI]=!1,e[Ff]=!1,e[bF]=!1,e[Ua]=new Hye(t,e,Fye),fJ(e,"error",function(n){Tn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[Ua];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[Lm]=n,this[Oye][Xqt](n)}),fJ(e,"readable",function(){let n=this[Ua];n&&n.readMore()}),fJ(e,"end",function(){let n=this[Ua];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}ei.destroy(this,new gJ("other side closed",ei.getSocketInfo(this)))}),fJ(e,"close",function(){let n=this[Oye],i=this[Ua];i&&(!this[Lm]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[Ua].destroy(),this[Ua]=null);let o=this[Lm]||new gJ("closed",ei.getSocketInfo(this));if(n[tB]=null,n[yze]=null,n.destroyed){Tn(n[Hqt]===0);let a=n[Eg].splice(n[Nm]);for(let c=0;c<a.length;c++){let l=a[c];ei.errorRequest(n,l,o)}}else if(n[Ku]>0&&o.code!=="UND_ERR_INFO"){let a=n[Eg][n[Nm]];n[Eg][n[Nm]++]=null,ei.errorRequest(n,a,o)}n[jqt]=n[Nm],Tn(n[Ku]===0),n.emit("disconnect",n[Aze],[n],o),n[_I]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return sHt(t,...n)},resume(){iHt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[SI]||e[Ff]||e[bF]||n&&(t[Ku]>0&&!n.idempotent||t[Ku]>0&&(n.upgrade||n.method==="CONNECT")||t[Ku]>0&&ei.bodyLength(n.body)!==0&&(ei.isStream(n.body)||ei.isAsyncIterable(n.body)||ei.isFormDataLike(n.body))))}}}s(nHt,"connectH1");function iHt(t){let e=t[tB];if(e&&!e.destroyed){if(t[dze]===0?!e[vF]&&e.unref&&(e.unref(),e[vF]=!0):e[vF]&&e.ref&&(e.ref(),e[vF]=!1),t[dze]===0)e[Ua].timeoutType!==qye&&e[Ua].setTimeout(t[AJ],qye);else if(t[Ku]>0&&e[Ua].statusCode<200&&e[Ua].timeoutType!==rB){let r=t[Eg][t[Nm]],n=r.headersTimeout!=null?r.headersTimeout:t[zqt];e[Ua].setTimeout(n,rB)}}}s(iHt,"resumeH1");function oHt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(oHt,"shouldSendContentLength");function sHt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:c}=e,{body:l,headers:u,contentLength:f}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(ei.isFormDataLike(l)){Mye||(Mye=Z3().extractBody);let[E,x]=Mye(l);e.contentType==null&&u.push("content-type",x),l=E.stream,f=E.length}else ei.isBlobLike(l)&&e.contentType==null&&l.type&&u.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let m=ei.bodyLength(l);if(f=m??f,f===null&&(f=e.contentLength),f===0&&!p&&(f=null),oHt(r)&&f>0&&e.contentLength!==null&&e.contentLength!==f){if(t[Qye])return ei.errorRequest(t,e,new w2),!1;process.emitWarning(new w2)}let h=t[tB],g=s(E=>{e.aborted||e.completed||(ei.errorRequest(t,e,E||new gze),ei.destroy(l),ei.destroy(h,new eB("aborted")))},"abort");try{e.onConnect(g)}catch(E){ei.errorRequest(t,e,E)}if(e.aborted)return!1;r==="HEAD"&&(h[Ff]=!0),(o||r==="CONNECT")&&(h[Ff]=!0),c!=null&&(h[Ff]=c),t[fze]&&h[Kqt]++>=t[fze]&&(h[Ff]=!0),a&&(h[bF]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[Gqt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[mJ]&&!h[Ff]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let E=0;E<u.length;E+=2){let x=u[E+0],b=u[E+1];if(Array.isArray(b))for(let _=0;_<b.length;_++)y+=`${x}: ${b[_]}\r
`;else y+=`${x}: ${b}\r
`}return uze.sendHeaders.hasSubscribers&&uze.sendHeaders.publish({request:e,headers:y,socket:h}),!l||m===0?mze(g,null,t,e,h,f,y,p):ei.isBuffer(l)?mze(g,l,t,e,h,f,y,p):ei.isBlobLike(l)?typeof l.stream=="function"?hze(g,l.stream(),t,e,h,f,y,p):cHt(g,l,t,e,h,f,y,p):ei.isStream(l)?aHt(g,l,t,e,h,f,y,p):ei.isIterable(l)?hze(g,l,t,e,h,f,y,p):Tn(!1),!0}s(sHt,"writeH1");function aHt(t,e,r,n,i,o,a,c){Tn(o!==0||r[Ku]===0,"stream body cannot be pipelined");let l=!1,u=new yJ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a}),f=s(function(g){if(!l)try{!u.write(g)&&this.pause&&this.pause()}catch(y){ei.destroy(this,y)}},"onData"),p=s(function(){l||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!l){let g=new gze;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!l){if(l=!0,Tn(i.destroyed||i[SI]&&r[Ku]<=1),i.off("drain",p).off("error",h),e.removeListener("data",f).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?ei.destroy(e,g):ei.destroy(e)}},"onFinished");e.on("data",f).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(aHt,"writeStream");function mze(t,e,r,n,i,o,a,c){try{e?ei.isBuffer(e)&&(Tn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!c&&n.reset!==!1&&(i[Ff]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(Tn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[_I]()}catch(l){t(l)}}s(mze,"writeBuffer");async function cHt(t,e,r,n,i,o,a,c){Tn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new w2;let l=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!c&&n.reset!==!1&&(i[Ff]=!0),r[_I]()}catch(l){t(l)}}s(cHt,"writeBlob");async function hze(t,e,r,n,i,o,a,c){Tn(o!==0||r[Ku]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let m=l;l=null,m()}}s(u,"onDrain");let f=s(()=>new Promise((m,h)=>{Tn(l===null),i[Lm]?h(i[Lm]):l=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new yJ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a});try{for await(let m of e){if(i[Lm])throw i[Lm];p.write(m)||await f()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(hze,"writeIterable");var yJ=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:c}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=c,this.abort=e,r[SI]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:c,header:l}=this;if(r[Lm])throw r[Lm];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[Qye])throw new w2;process.emitWarning(new w2)}r.cork(),a===0&&(!c&&n.reset!==!1&&(r[Ff]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let f=r.write(e);return r.uncork(),n.onBodySent(e),f||r[Ua].timeout&&r[Ua].timeoutType===rB&&r[Ua].timeout.refresh&&r[Ua].timeout.refresh(),f}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:c}=this;if(c.onRequestSent(),e[SI]=!1,e[Lm])throw e[Lm];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[Qye])throw new w2;process.emitWarning(new w2)}e[Ua].timeout&&e[Ua].timeoutType===rB&&e[Ua].timeout.refresh&&e[Ua].timeout.refresh(),n[_I]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[SI]=!1,e&&(Tn(n[Ku]<=1,"pipeline should only contain this request"),i(e))}};Cze.exports=nHt});var Sze=Q((vzn,_ze)=>{"use strict";d();var Mm=require("node:assert"),{pipeline:lHt}=require("node:stream"),Xi=Pi(),{RequestContentLengthMismatchError:Wye,RequestAbortedError:vze,SocketError:IF,InformationalError:Gye}=Lo(),{kUrl:CJ,kReset:vJ,kClient:nB,kRunning:xJ,kPending:uHt,kQueue:RI,kPendingIdx:jye,kRunningIdx:vg,kError:bg,kSocket:Nl,kStrictContentLength:dHt,kOnError:Vye,kMaxConcurrentStreams:wze,kHTTP2Session:xg,kResume:kI,kSize:fHt,kHTTPContext:pHt}=pa(),bE=Symbol("open streams"),xze,bze=!1,EJ;try{EJ=require("node:http2")}catch{EJ={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:mHt,HTTP2_HEADER_METHOD:hHt,HTTP2_HEADER_PATH:gHt,HTTP2_HEADER_SCHEME:AHt,HTTP2_HEADER_CONTENT_LENGTH:yHt,HTTP2_HEADER_EXPECT:CHt,HTTP2_HEADER_STATUS:EHt}}=EJ;function vHt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(vHt,"parseH2Headers");async function xHt(t,e){t[Nl]=e,bze||(bze=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=EJ.connect(t[CJ],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[wze]});r[bE]=0,r[nB]=t,r[Nl]=e,Xi.addListener(r,"error",IHt),Xi.addListener(r,"frameError",THt),Xi.addListener(r,"end",wHt),Xi.addListener(r,"goaway",_Ht),Xi.addListener(r,"close",function(){let{[nB]:i}=this,{[Nl]:o}=i,a=this[Nl][bg]||this[bg]||new IF("closed",Xi.getSocketInfo(o));if(i[xg]=null,i.destroyed){Mm(i[uHt]===0);let c=i[RI].splice(i[vg]);for(let l=0;l<c.length;l++){let u=c[l];Xi.errorRequest(i,u,a)}}}),r.unref(),t[xg]=r,e[xg]=r,Xi.addListener(e,"error",function(i){Mm(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[bg]=i,this[nB][Vye](i)}),Xi.addListener(e,"end",function(){Xi.destroy(this,new IF("other side closed",Xi.getSocketInfo(this)))}),Xi.addListener(e,"close",function(){let i=this[bg]||new IF("closed",Xi.getSocketInfo(this));t[Nl]=null,this[xg]!=null&&this[xg].destroy(i),t[jye]=t[vg],Mm(t[xJ]===0),t.emit("disconnect",t[CJ],[t],i),t[kI]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return RHt(t,...i)},resume(){bHt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(xHt,"connectH2");function bHt(t){let e=t[Nl];e?.destroyed===!1&&(t[fHt]===0&&t[wze]===0?(e.unref(),t[xg].unref()):(e.ref(),t[xg].ref()))}s(bHt,"resumeH2");function IHt(t){Mm(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Nl][bg]=t,this[nB][Vye](t)}s(IHt,"onHttp2SessionError");function THt(t,e,r){if(r===0){let n=new Gye(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Nl][bg]=n,this[nB][Vye](n)}}s(THt,"onHttp2FrameError");function wHt(){let t=new IF("other side closed",Xi.getSocketInfo(this[Nl]));this.destroy(t),Xi.destroy(this[Nl],t)}s(wHt,"onHttp2SessionEnd");function _Ht(t){let e=this[bg]||new IF(`HTTP/2: "GOAWAY" frame received with code ${t}`,Xi.getSocketInfo(this)),r=this[nB];if(r[Nl]=null,r[pHt]=null,this[xg]!=null&&(this[xg].destroy(e),this[xg]=null),Xi.destroy(this[Nl],e),r[vg]<r[RI].length){let n=r[RI][r[vg]];r[RI][r[vg]++]=null,Xi.errorRequest(r,n,e),r[jye]=r[vg]}Mm(r[xJ]===0),r.emit("disconnect",r[CJ],[r],e),r[kI]()}s(_Ht,"onHTTP2GoAway");function SHt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(SHt,"shouldSendContentLength");function RHt(t,e){let r=t[xg],{method:n,path:i,host:o,upgrade:a,expectContinue:c,signal:l,headers:u}=e,{body:f}=e;if(a)return Xi.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let P=u[k+0],N=u[k+1];if(Array.isArray(N))for(let M=0;M<N.length;M++)p[P]?p[P]+=`,${N[M]}`:p[P]=N[M];else p[P]=N}let m,{hostname:h,port:g}=t[CJ];p[mHt]=o||`${h}${g?`:${g}`:""}`,p[hHt]=n;let y=s(k=>{e.aborted||e.completed||(k=k||new vze,Xi.errorRequest(t,e,k),m!=null&&Xi.destroy(m,k),Xi.destroy(f,k),t[RI][t[vg]++]=null,t[kI]())},"abort");try{e.onConnect(y)}catch(k){Xi.errorRequest(t,e,k)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:l}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[bE],t[RI][t[vg]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[bE],t[RI][t[vg]++]=null}),m.once("close",()=>{r[bE]-=1,r[bE]===0&&r.unref()}),!0;p[gHt]=i,p[AHt]="https";let E=n==="PUT"||n==="POST"||n==="PATCH";f&&typeof f.read=="function"&&f.read(0);let x=Xi.bodyLength(f);if(Xi.isFormDataLike(f)){xze??=Z3().extractBody;let[k,P]=xze(f);p["content-type"]=P,f=k.stream,x=k.length}if(x==null&&(x=e.contentLength),(x===0||!E)&&(x=null),SHt(n)&&x>0&&e.contentLength!=null&&e.contentLength!==x){if(t[dHt])return Xi.errorRequest(t,e,new Wye),!1;process.emitWarning(new Wye)}x!=null&&(Mm(f,"no body must not have content length"),p[yHt]=`${x}`),r.ref();let b=n==="GET"||n==="HEAD"||f===null;return c?(p[CHt]="100-continue",m=r.request(p,{endStream:b,signal:l}),m.once("continue",_)):(m=r.request(p,{endStream:b,signal:l}),_()),++r[bE],m.once("response",k=>{let{[EHt]:P,...N}=k;if(e.onResponseStarted(),e.aborted){let M=new vze;Xi.errorRequest(t,e,M),Xi.destroy(m,M);return}e.onHeaders(Number(P),vHt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",M=>{e.onData(M)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[bE]===0&&r.unref(),y(new Gye("HTTP/2: stream half-closed (remote)")),t[RI][t[vg]++]=null,t[jye]=t[vg],t[kI]()}),m.once("close",()=>{r[bE]-=1,r[bE]===0&&r.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,P)=>{y(new Gye(`HTTP/2: "frameError" received - type ${k}, code ${P}`))}),!0;function _(){!f||x===0?Ize(y,m,null,t,e,t[Nl],x,E):Xi.isBuffer(f)?Ize(y,m,f,t,e,t[Nl],x,E):Xi.isBlobLike(f)?typeof f.stream=="function"?Tze(y,m,f.stream(),t,e,t[Nl],x,E):PHt(y,m,f,t,e,t[Nl],x,E):Xi.isStream(f)?kHt(y,t[Nl],E,m,f,t,e,x):Xi.isIterable(f)?Tze(y,m,f,t,e,t[Nl],x,E):Mm(!1)}s(_,"writeBodyH2")}s(RHt,"writeH2");function Ize(t,e,r,n,i,o,a,c){try{r!=null&&Xi.isBuffer(r)&&(Mm(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),c||(o[vJ]=!0),i.onRequestSent(),n[kI]()}catch(l){t(l)}}s(Ize,"writeBuffer");function kHt(t,e,r,n,i,o,a,c){Mm(c!==0||o[xJ]===0,"stream body cannot be pipelined");let l=lHt(i,n,f=>{f?(Xi.destroy(l,f),t(f)):(Xi.removeAllListeners(l),a.onRequestSent(),r||(e[vJ]=!0),o[kI]())});Xi.addListener(l,"data",u);function u(f){a.onBodySent(f)}s(u,"onPipeData")}s(kHt,"writeStream");async function PHt(t,e,r,n,i,o,a,c){Mm(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new Wye;let l=Buffer.from(await r.arrayBuffer());e.cork(),e.write(l),e.uncork(),e.end(),i.onBodySent(l),i.onRequestSent(),c||(o[vJ]=!0),n[kI]()}catch(l){t(l)}}s(PHt,"writeBlob");async function Tze(t,e,r,n,i,o,a,c){Mm(a!==0||n[xJ]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let p=l;l=null,p()}}s(u,"onDrain");let f=s(()=>new Promise((p,m)=>{Mm(l===null),o[bg]?m(o[bg]):l=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[bg])throw o[bg];let m=e.write(p);i.onBodySent(p),m||await f()}e.end(),i.onRequestSent(),c||(o[vJ]=!0),n[kI]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(Tze,"writeIterable");_ze.exports=xHt});var IJ=Q((Izn,Pze)=>{"use strict";d();var Uy=Pi(),{kBodyUsed:TF}=pa(),zye=require("node:assert"),{InvalidArgumentError:BHt}=Lo(),DHt=require("node:events"),NHt=[300,301,302,303,307,308],Rze=Symbol("body"),bJ=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[Rze]=e,this[TF]=!1}async*[Symbol.asyncIterator](){zye(!this[TF],"disturbed"),this[TF]=!0,yield*this[Rze]}},$ye=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new BHt("maxRedirections must be a positive number");Uy.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,Uy.isStream(this.opts.body)?(Uy.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){zye(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[TF]=!1,DHt.prototype.on.call(this.opts.body,"data",function(){this[TF]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new bJ(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Uy.isIterable(this.opts.body)&&(this.opts.body=new bJ(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||Uy.isDisturbed(this.opts.body)?null:LHt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:c}=Uy.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=c?`${a}${c}`:a;this.opts.headers=MHt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=l,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function LHt(t,e){if(NHt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&Uy.headerNameToString(e[r])==="location")return e[r+1]}s(LHt,"parseLocation");function kze(t,e,r){if(t.length===4)return Uy.headerNameToString(t)==="host";if(e&&Uy.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=Uy.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(kze,"shouldRemoveHeader");function MHt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)kze(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))kze(i,e,r)||n.push(i,t[i]);else zye(t==null,"headers must be an object or an array");return n}s(MHt,"cleanRequestHeaders");Pze.exports=$ye});var TJ=Q((_zn,Bze)=>{"use strict";d();var FHt=IJ();function OHt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new FHt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(OHt,"createRedirectInterceptor");Bze.exports=OHt});var BF=Q((kzn,Hze)=>{"use strict";d();var IE=require("node:assert"),Oze=require("node:net"),QHt=require("node:http"),_2=Pi(),{channels:iB}=U3(),UHt=YVe(),qHt=G3(),{InvalidArgumentError:dc,InformationalError:HHt,ClientDestroyedError:WHt}=Lo(),GHt=fF(),{kUrl:qy,kServerName:PI,kClient:jHt,kBusy:Yye,kConnect:VHt,kResuming:S2,kRunning:kF,kPending:PF,kSize:RF,kQueue:Ig,kConnected:$Ht,kConnecting:oB,kNeedDrain:DI,kKeepAliveDefaultTimeout:Dze,kHostHeader:zHt,kPendingIdx:Tg,kRunningIdx:TE,kError:YHt,kPipelining:wJ,kKeepAliveTimeoutValue:KHt,kMaxHeadersSize:JHt,kKeepAliveMaxTimeout:XHt,kKeepAliveTimeoutThreshold:ZHt,kHeadersTimeout:eWt,kBodyTimeout:tWt,kStrictContentLength:rWt,kConnector:wF,kMaxRedirections:nWt,kMaxRequests:Kye,kCounter:iWt,kClose:oWt,kDestroy:sWt,kDispatch:aWt,kInterceptors:Nze,kLocalAddress:_F,kMaxResponseSize:cWt,kOnError:lWt,kHTTPContext:fc,kMaxConcurrentStreams:uWt,kResume:SF}=pa(),dWt=Eze(),fWt=Sze(),Lze=!1,BI=Symbol("kClosedResolve"),Mze=s(()=>{},"noop");function Qze(t){return t[wJ]??t[fc]?.defaultPipelining??1}s(Qze,"getPipelining");var Jye=class extends qHt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:c,bodyTimeout:l,idleTimeout:u,keepAlive:f,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:E,tls:x,strictContentLength:b,maxCachedSessions:_,maxRedirections:k,connect:P,maxRequestsPerClient:N,localAddress:M,maxResponseSize:J,autoSelectFamily:se,autoSelectFamilyAttemptTimeout:K,maxConcurrentStreams:G,allowH2:q}={}){if(super(),f!==void 0)throw new dc("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new dc("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new dc("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new dc("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new dc("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new dc("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new dc("invalid socketPath");if(c!=null&&(!Number.isFinite(c)||c<0))throw new dc("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new dc("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new dc("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new dc("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new dc("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new dc("bodyTimeout must be a positive integer or zero");if(P!=null&&typeof P!="function"&&typeof P!="object")throw new dc("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new dc("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new dc("maxRequestsPerClient must be a positive number");if(M!=null&&(typeof M!="string"||Oze.isIP(M)===0))throw new dc("localAddress must be valid string IP address");if(J!=null&&(!Number.isInteger(J)||J<-1))throw new dc("maxResponseSize must be a positive number");if(K!=null&&(!Number.isInteger(K)||K<-1))throw new dc("autoSelectFamilyAttemptTimeout must be a positive number");if(q!=null&&typeof q!="boolean")throw new dc("allowH2 must be a valid boolean value");if(G!=null&&(typeof G!="number"||G<1))throw new dc("maxConcurrentStreams must be a positive integer, greater than 0");typeof P!="function"&&(P=GHt({...x,maxCachedSessions:_,allowH2:q,socketPath:y,timeout:c,...se?{autoSelectFamily:se,autoSelectFamilyAttemptTimeout:K}:void 0,...P})),r?.Client&&Array.isArray(r.Client)?(this[Nze]=r.Client,Lze||(Lze=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[Nze]=[pWt({maxRedirections:k})],this[qy]=_2.parseOrigin(e),this[wF]=P,this[wJ]=E??1,this[JHt]=n||QHt.maxHeaderSize,this[Dze]=p??4e3,this[XHt]=h??6e5,this[ZHt]=g??2e3,this[KHt]=this[Dze],this[PI]=null,this[_F]=M??null,this[S2]=0,this[DI]=0,this[zHt]=`host: ${this[qy].hostname}${this[qy].port?`:${this[qy].port}`:""}\r
`,this[tWt]=l??3e5,this[eWt]=i??3e5,this[rWt]=b??!0,this[nWt]=k,this[Kye]=N,this[BI]=null,this[cWt]=J>-1?J:-1,this[uWt]=G??100,this[fc]=null,this[Ig]=[],this[TE]=0,this[Tg]=0,this[SF]=le=>Xye(this,le),this[lWt]=le=>Uze(this,le)}get pipelining(){return this[wJ]}set pipelining(e){this[wJ]=e,this[SF](!0)}get[PF](){return this[Ig].length-this[Tg]}get[kF](){return this[Tg]-this[TE]}get[RF](){return this[Ig].length-this[TE]}get[$Ht](){return!!this[fc]&&!this[oB]&&!this[fc].destroyed}get[Yye](){return!!(this[fc]?.busy(null)||this[RF]>=(Qze(this)||1)||this[PF]>0)}[VHt](e){qze(this),this.once("connect",e)}[aWt](e,r){let n=e.origin||this[qy].origin,i=new UHt(n,e,r);return this[Ig].push(i),this[S2]||(_2.bodyLength(i.body)==null&&_2.isIterable(i.body)?(this[S2]=1,queueMicrotask(()=>Xye(this))):this[SF](!0)),this[S2]&&this[DI]!==2&&this[Yye]&&(this[DI]=2),this[DI]<2}async[oWt](){return new Promise(e=>{this[RF]?this[BI]=e:e(null)})}async[sWt](e){return new Promise(r=>{let n=this[Ig].splice(this[Tg]);for(let o=0;o<n.length;o++){let a=n[o];_2.errorRequest(this,a,e)}let i=s(()=>{this[BI]&&(this[BI](),this[BI]=null),r(null)},"callback");this[fc]?(this[fc].destroy(e,i),this[fc]=null):queueMicrotask(i),this[SF]()})}},pWt=TJ();function Uze(t,e){if(t[kF]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){IE(t[Tg]===t[TE]);let r=t[Ig].splice(t[TE]);for(let n=0;n<r.length;n++){let i=r[n];_2.errorRequest(t,i,e)}IE(t[RF]===0)}}s(Uze,"onError");async function qze(t){IE(!t[oB]),IE(!t[fc]);let{host:e,hostname:r,protocol:n,port:i}=t[qy];if(r[0]==="["){let o=r.indexOf("]");IE(o!==-1);let a=r.substring(1,o);IE(Oze.isIP(a)),r=a}t[oB]=!0,iB.beforeConnect.hasSubscribers&&iB.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[fc]?.version,servername:t[PI],localAddress:t[_F]},connector:t[wF]});try{let o=await new Promise((a,c)=>{t[wF]({host:e,hostname:r,protocol:n,port:i,servername:t[PI],localAddress:t[_F]},(l,u)=>{l?c(l):a(u)})});if(t.destroyed){_2.destroy(o.on("error",Mze),new WHt);return}IE(o);try{t[fc]=o.alpnProtocol==="h2"?await fWt(t,o):await dWt(t,o)}catch(a){throw o.destroy().on("error",Mze),a}t[oB]=!1,o[iWt]=0,o[Kye]=t[Kye],o[jHt]=t,o[YHt]=null,iB.connected.hasSubscribers&&iB.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[fc]?.version,servername:t[PI],localAddress:t[_F]},connector:t[wF],socket:o}),t.emit("connect",t[qy],[t])}catch(o){if(t.destroyed)return;if(t[oB]=!1,iB.connectError.hasSubscribers&&iB.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[fc]?.version,servername:t[PI],localAddress:t[_F]},connector:t[wF],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(IE(t[kF]===0);t[PF]>0&&t[Ig][t[Tg]].servername===t[PI];){let a=t[Ig][t[Tg]++];_2.errorRequest(t,a,o)}else Uze(t,o);t.emit("connectionError",t[qy],[t],o)}t[SF]()}s(qze,"connect");function Fze(t){t[DI]=0,t.emit("drain",t[qy],[t])}s(Fze,"emitDrain");function Xye(t,e){t[S2]!==2&&(t[S2]=2,mWt(t,e),t[S2]=0,t[TE]>256&&(t[Ig].splice(0,t[TE]),t[Tg]-=t[TE],t[TE]=0))}s(Xye,"resume");function mWt(t,e){for(;;){if(t.destroyed){IE(t[PF]===0);return}if(t[BI]&&!t[RF]){t[BI](),t[BI]=null;return}if(t[fc]&&t[fc].resume(),t[Yye])t[DI]=2;else if(t[DI]===2){e?(t[DI]=1,queueMicrotask(()=>Fze(t))):Fze(t);continue}if(t[PF]===0||t[kF]>=(Qze(t)||1))return;let r=t[Ig][t[Tg]];if(t[qy].protocol==="https:"&&t[PI]!==r.servername){if(t[kF]>0)return;t[PI]=r.servername,t[fc]?.destroy(new HHt("servername changed"),()=>{t[fc]=null,Xye(t)})}if(t[oB])return;if(!t[fc]){qze(t);return}if(t[fc].destroyed||t[fc].busy(r))return;!r.aborted&&t[fc].write(r)?t[Tg]++:t[Ig].splice(t[Tg],1)}}s(mWt,"_resume");Hze.exports=Jye});var Zye=Q((Nzn,Wze)=>{"use strict";d();var _J=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};Wze.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new _J}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new _J),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var jze=Q((Fzn,Gze)=>{d();var{kFree:hWt,kConnected:gWt,kPending:AWt,kQueued:yWt,kRunning:CWt,kSize:EWt}=pa(),R2=Symbol("pool"),eCe=class{static{s(this,"PoolStats")}constructor(e){this[R2]=e}get connected(){return this[R2][gWt]}get free(){return this[R2][hWt]}get pending(){return this[R2][AWt]}get queued(){return this[R2][yWt]}get running(){return this[R2][CWt]}get size(){return this[R2][EWt]}};Gze.exports=eCe});var sCe=Q((Uzn,tYe)=>{"use strict";d();var vWt=G3(),xWt=Zye(),{kConnected:tCe,kSize:Vze,kRunning:$ze,kPending:zze,kQueued:DF,kBusy:bWt,kFree:IWt,kUrl:TWt,kClose:wWt,kDestroy:_Wt,kDispatch:SWt}=pa(),RWt=jze(),Of=Symbol("clients"),qd=Symbol("needDrain"),NF=Symbol("queue"),rCe=Symbol("closed resolve"),nCe=Symbol("onDrain"),Yze=Symbol("onConnect"),Kze=Symbol("onDisconnect"),Jze=Symbol("onConnectionError"),iCe=Symbol("get dispatcher"),Zze=Symbol("add client"),eYe=Symbol("remove client"),Xze=Symbol("stats"),oCe=class extends vWt{static{s(this,"PoolBase")}constructor(){super(),this[NF]=new xWt,this[Of]=[],this[DF]=0;let e=this;this[nCe]=s(function(n,i){let o=e[NF],a=!1;for(;!a;){let c=o.shift();if(!c)break;e[DF]--,a=!this.dispatch(c.opts,c.handler)}this[qd]=a,!this[qd]&&e[qd]&&(e[qd]=!1,e.emit("drain",n,[e,...i])),e[rCe]&&o.isEmpty()&&Promise.all(e[Of].map(c=>c.close())).then(e[rCe])},"onDrain"),this[Yze]=(r,n)=>{e.emit("connect",r,[e,...n])},this[Kze]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[Jze]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[Xze]=new RWt(this)}get[bWt](){return this[qd]}get[tCe](){return this[Of].filter(e=>e[tCe]).length}get[IWt](){return this[Of].filter(e=>e[tCe]&&!e[qd]).length}get[zze](){let e=this[DF];for(let{[zze]:r}of this[Of])e+=r;return e}get[$ze](){let e=0;for(let{[$ze]:r}of this[Of])e+=r;return e}get[Vze](){let e=this[DF];for(let{[Vze]:r}of this[Of])e+=r;return e}get stats(){return this[Xze]}async[wWt](){this[NF].isEmpty()?await Promise.all(this[Of].map(e=>e.close())):await new Promise(e=>{this[rCe]=e})}async[_Wt](e){for(;;){let r=this[NF].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[Of].map(r=>r.destroy(e)))}[SWt](e,r){let n=this[iCe]();return n?n.dispatch(e,r)||(n[qd]=!0,this[qd]=!this[iCe]()):(this[qd]=!0,this[NF].push({opts:e,handler:r}),this[DF]++),!this[qd]}[Zze](e){return e.on("drain",this[nCe]).on("connect",this[Yze]).on("disconnect",this[Kze]).on("connectionError",this[Jze]),this[Of].push(e),this[qd]&&queueMicrotask(()=>{this[qd]&&this[nCe](e[TWt],[this,e])}),this}[eYe](e){e.close(()=>{let r=this[Of].indexOf(e);r!==-1&&this[Of].splice(r,1)}),this[qd]=this[Of].some(r=>!r[qd]&&r.closed!==!0&&r.destroyed!==!0)}};tYe.exports={PoolBase:oCe,kClients:Of,kNeedDrain:qd,kAddClient:Zze,kRemoveClient:eYe,kGetDispatcher:iCe}});var sB=Q((Wzn,oYe)=>{"use strict";d();var{PoolBase:kWt,kClients:SJ,kNeedDrain:PWt,kAddClient:BWt,kGetDispatcher:DWt}=sCe(),NWt=BF(),{InvalidArgumentError:aCe}=Lo(),rYe=Pi(),{kUrl:nYe,kInterceptors:LWt}=pa(),MWt=fF(),cCe=Symbol("options"),lCe=Symbol("connections"),iYe=Symbol("factory");function FWt(t,e){return new NWt(t,e)}s(FWt,"defaultFactory");var uCe=class extends kWt{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=FWt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:c,socketPath:l,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new aCe("invalid connections");if(typeof n!="function")throw new aCe("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new aCe("connect must be a function or an object");typeof i!="function"&&(i=MWt({...a,maxCachedSessions:c,allowH2:p,socketPath:l,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f}:void 0,...i})),this[LWt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[lCe]=r||null,this[nYe]=rYe.parseOrigin(e),this[cCe]={...rYe.deepClone(m),connect:i,allowH2:p},this[cCe].interceptors=m.interceptors?{...m.interceptors}:void 0,this[iYe]=n,this.on("connectionError",(h,g,y)=>{for(let E of g){let x=this[SJ].indexOf(E);x!==-1&&this[SJ].splice(x,1)}})}[DWt](){for(let e of this[SJ])if(!e[PWt])return e;if(!this[lCe]||this[SJ].length<this[lCe]){let e=this[iYe](this[nYe],this[cCe]);return this[BWt](e),e}}};oYe.exports=uCe});var uYe=Q((Vzn,lYe)=>{"use strict";d();var{BalancedPoolMissingUpstreamError:OWt,InvalidArgumentError:QWt}=Lo(),{PoolBase:UWt,kClients:Ju,kNeedDrain:LF,kAddClient:qWt,kRemoveClient:HWt,kGetDispatcher:WWt}=sCe(),GWt=sB(),{kUrl:dCe,kInterceptors:jWt}=pa(),{parseOrigin:sYe}=Pi(),aYe=Symbol("factory"),RJ=Symbol("options"),cYe=Symbol("kGreatestCommonDivisor"),k2=Symbol("kCurrentWeight"),P2=Symbol("kIndex"),Fm=Symbol("kWeight"),kJ=Symbol("kMaxWeightPerServer"),PJ=Symbol("kErrorPenalty");function VWt(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(VWt,"getGreatestCommonDivisor");function $Wt(t,e){return new GWt(t,e)}s($Wt,"defaultFactory");var fCe=class extends UWt{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=$Wt,...n}={}){if(super(),this[RJ]=n,this[P2]=-1,this[k2]=0,this[kJ]=this[RJ].maxWeightPerServer||100,this[PJ]=this[RJ].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new QWt("factory must be a function.");this[jWt]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[aYe]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=sYe(e).origin;if(this[Ju].find(i=>i[dCe].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[aYe](r,Object.assign({},this[RJ]));this[qWt](n),n.on("connect",()=>{n[Fm]=Math.min(this[kJ],n[Fm]+this[PJ])}),n.on("connectionError",()=>{n[Fm]=Math.max(1,n[Fm]-this[PJ]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[Fm]=Math.max(1,n[Fm]-this[PJ]),this._updateBalancedPoolStats())});for(let i of this[Ju])i[Fm]=this[kJ];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[Ju].length;r++)e=VWt(this[Ju][r][Fm],e);this[cYe]=e}removeUpstream(e){let r=sYe(e).origin,n=this[Ju].find(i=>i[dCe].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[HWt](n),this}get upstreams(){return this[Ju].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[dCe].origin)}[WWt](){if(this[Ju].length===0)throw new OWt;if(!this[Ju].find(o=>!o[LF]&&o.closed!==!0&&o.destroyed!==!0)||this[Ju].map(o=>o[LF]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[Ju].findIndex(o=>!o[LF]);for(;n++<this[Ju].length;){this[P2]=(this[P2]+1)%this[Ju].length;let o=this[Ju][this[P2]];if(o[Fm]>this[Ju][i][Fm]&&!o[LF]&&(i=this[P2]),this[P2]===0&&(this[k2]=this[k2]-this[cYe],this[k2]<=0&&(this[k2]=this[kJ])),o[Fm]>=this[k2]&&!o[LF])return o}return this[k2]=this[Ju][i][Fm],this[P2]=i,this[Ju][i]}};lYe.exports=fCe});var aB=Q((Yzn,AYe)=>{"use strict";d();var{InvalidArgumentError:BJ}=Lo(),{kClients:NI,kRunning:dYe,kClose:zWt,kDestroy:YWt,kDispatch:KWt,kInterceptors:JWt}=pa(),XWt=G3(),ZWt=sB(),eGt=BF(),tGt=Pi(),rGt=TJ(),fYe=Symbol("onConnect"),pYe=Symbol("onDisconnect"),mYe=Symbol("onConnectionError"),nGt=Symbol("maxRedirections"),hYe=Symbol("onDrain"),gYe=Symbol("factory"),pCe=Symbol("options");function iGt(t,e){return e&&e.connections===1?new eGt(t,e):new ZWt(t,e)}s(iGt,"defaultFactory");var mCe=class extends XWt{static{s(this,"Agent")}constructor({factory:e=iGt,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new BJ("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new BJ("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new BJ("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[JWt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[rGt({maxRedirections:r})],this[pCe]={...tGt.deepClone(i),connect:n},this[pCe].interceptors=i.interceptors?{...i.interceptors}:void 0,this[nGt]=r,this[gYe]=e,this[NI]=new Map,this[hYe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[fYe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[pYe]=(o,a,c)=>{this.emit("disconnect",o,[this,...a],c)},this[mYe]=(o,a,c)=>{this.emit("connectionError",o,[this,...a],c)}}get[dYe](){let e=0;for(let r of this[NI].values())e+=r[dYe];return e}[KWt](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new BJ("opts.origin must be a non-empty string or URL.");let i=this[NI].get(n);return i||(i=this[gYe](e.origin,this[pCe]).on("drain",this[hYe]).on("connect",this[fYe]).on("disconnect",this[pYe]).on("connectionError",this[mYe]),this[NI].set(n,i)),i.dispatch(e,r)}async[zWt](){let e=[];for(let r of this[NI].values())e.push(r.close());this[NI].clear(),await Promise.all(e)}async[YWt](e){let r=[];for(let n of this[NI].values())r.push(n.destroy(e));this[NI].clear(),await Promise.all(r)}};AYe.exports=mCe});var ACe=Q((Xzn,vYe)=>{"use strict";d();var{kProxy:oGt,kClose:sGt,kDestroy:aGt,kInterceptors:cGt}=pa(),{URL:MF}=require("node:url"),lGt=aB(),uGt=sB(),dGt=G3(),{InvalidArgumentError:LJ,RequestAbortedError:fGt,SecureProxyConnectionError:pGt}=Lo(),yYe=fF(),DJ=Symbol("proxy agent"),NJ=Symbol("proxy client"),FF=Symbol("proxy headers"),hCe=Symbol("request tls settings"),CYe=Symbol("proxy tls settings"),EYe=Symbol("connect endpoint function");function mGt(t){return t==="https:"?443:80}s(mGt,"defaultProtocolPort");function hGt(t,e){return new uGt(t,e)}s(hGt,"defaultFactory");var gGt=s(()=>{},"noop"),gCe=class extends dGt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof MF)&&!e.uri)throw new LJ("Proxy uri is mandatory");let{clientFactory:r=hGt}=e;if(typeof r!="function")throw new LJ("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:c,username:l,password:u,hostname:f}=n;if(this[oGt]={uri:i,protocol:c},this[cGt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[hCe]=e.requestTls,this[CYe]=e.proxyTls,this[FF]=e.headers||{},e.auth&&e.token)throw new LJ("opts.auth cannot be used in combination with opts.token");e.auth?this[FF]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[FF]["proxy-authorization"]=e.token:l&&u&&(this[FF]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=yYe({...e.proxyTls});this[EYe]=yYe({...e.requestTls}),this[NJ]=r(n,{connect:p}),this[DJ]=new lGt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${mGt(m.protocol)}`);try{let{socket:y,statusCode:E}=await this[NJ].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[FF],host:m.host},servername:this[CYe]?.servername||f});if(E!==200&&(y.on("error",gGt).destroy(),h(new fGt(`Proxy response (${E}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let x;this[hCe]?x=this[hCe].servername:x=m.servername,this[EYe]({...m,servername:x,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new pGt(y)):h(y)}},"connect")})}dispatch(e,r){let n=AGt(e.headers);if(yGt(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new MF(e.origin);n.host=i}return this[DJ].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new MF(e):e instanceof MF?e:new MF(e.uri)}async[sGt](){await this[DJ].close(),await this[NJ].close()}async[aGt](){await this[DJ].destroy(),await this[NJ].destroy()}};function AGt(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s(AGt,"buildHeaders");function yGt(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new LJ("Proxy-Authorization should be sent in ProxyAgent constructor")}s(yGt,"throwIfProxyAuthIsSent");vYe.exports=gCe});var _Ye=Q((tYn,wYe)=>{"use strict";d();var CGt=G3(),{kClose:EGt,kDestroy:vGt,kClosed:xYe,kDestroyed:bYe,kDispatch:xGt,kNoProxyAgent:OF,kHttpProxyAgent:LI,kHttpsProxyAgent:B2}=pa(),IYe=ACe(),bGt=aB(),IGt={"http:":80,"https:":443},TYe=!1,yCe=class extends CGt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,TYe||(TYe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[OF]=new bGt(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[LI]=new IYe({...o,uri:a}):this[LI]=this[OF];let c=n??process.env.https_proxy??process.env.HTTPS_PROXY;c?this[B2]=new IYe({...o,uri:c}):this[B2]=this[LI],this.#o()}[xGt](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[EGt](){await this[OF].close(),this[LI][xYe]||await this[LI].close(),this[B2][xYe]||await this[B2].close()}async[vGt](e){await this[OF].destroy(e),this[LI][bYe]||await this[LI].destroy(e),this[B2][bYe]||await this[B2].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||IGt[r]||0,this.#r(n,i)?r==="https:"?this[B2]:this[LI]:this[OF]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};wYe.exports=yCe});var MJ=Q((iYn,PYe)=>{"use strict";d();var cB=require("node:assert"),{kRetryHandlerDefaultRetry:SYe}=pa(),{RequestRetryError:QF}=Lo(),{isDisturbed:RYe,parseHeaders:TGt,parseRangeHeader:kYe,wrapRequestBody:wGt}=Pi();function _Gt(t){let e=Date.now();return new Date(t).getTime()-e}s(_Gt,"calculateRetryAfterHeader");var CCe=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:c,minTimeout:l,timeoutFactor:u,methods:f,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:wGt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[SYe],retryAfter:m??!0,maxTimeout:c??30*1e3,minTimeout:l??500,timeoutFactor:u??2,maxRetries:a??5,methods:f??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[SYe](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:c}=e,{method:l,retryOptions:u}=n,{maxRetries:f,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:E}=u,{counter:x}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(E)&&!E.includes(l)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(x>f){i(e);return}let b=c?.["retry-after"];b&&(b=Number(b),b=Number.isNaN(b)?_Gt(b):b*1e3);let _=b>0?Math.min(b,m):Math.min(p*h**(x-1),m);setTimeout(()=>i(null),_)}onHeaders(e,r,n,i){let o=TGt(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new QF("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new QF("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let c=kYe(o["content-range"]);if(!c)return this.abort(new QF("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new QF("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:l,size:u,end:f=u-1}=c;return cB(this.start===l,"content-range mismatch"),cB(this.end==null||this.end===f,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let c=kYe(o["content-range"]);if(c==null)return this.handler.onHeaders(e,r,n,i);let{start:l,size:u,end:f=u-1}=c;cB(l!=null&&Number.isFinite(l),"content-range mismatch"),cB(f!=null&&Number.isFinite(f),"invalid content-length"),this.start=l,this.end=f}if(this.end==null){let c=o["content-length"];this.end=c!=null?Number(c)-1:null}return cB(Number.isFinite(this.start)),cB(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new QF("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||RYe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||RYe(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};PYe.exports=CCe});var DYe=Q((aYn,BYe)=>{"use strict";d();var SGt=uF(),RGt=MJ(),ECe=class extends SGt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new RGt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};BYe.exports=ECe});var wCe=Q((uYn,HYe)=>{"use strict";d();var OYe=require("node:assert"),{Readable:kGt}=require("node:stream"),{RequestAbortedError:QYe,NotSupportedError:PGt,InvalidArgumentError:BGt,AbortError:vCe}=Lo(),UYe=Pi(),{ReadableStreamFrom:DGt}=Pi(),Y0=Symbol("kConsume"),UF=Symbol("kReading"),MI=Symbol("kBody"),NYe=Symbol("kAbort"),qYe=Symbol("kContentType"),LYe=Symbol("kContentLength"),NGt=s(()=>{},"noop"),xCe=class extends kGt{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[NYe]=r,this[Y0]=null,this[MI]=null,this[qYe]=n,this[LYe]=i,this[UF]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new QYe),e&&this[NYe](),super.destroy(e)}_destroy(e,r){this[UF]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[UF]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[UF]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[Y0]&&e!==null?(ICe(this[Y0],e),this[UF]?super.push(e):!0):super.push(e)}async text(){return qF(this,"text")}async json(){return qF(this,"json")}async blob(){return qF(this,"blob")}async bytes(){return qF(this,"bytes")}async arrayBuffer(){return qF(this,"arrayBuffer")}async formData(){throw new PGt}get bodyUsed(){return UYe.isDisturbed(this)}get body(){return this[MI]||(this[MI]=DGt(this),this[Y0]&&(this[MI].getReader(),OYe(this[MI].locked))),this[MI]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new BGt("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[LYe]>r&&this.destroy(new vCe);let a=s(()=>{this.destroy(n.reason??new vCe)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new vCe):i(null)}).on("error",NGt).on("data",function(c){r-=c.length,r<=0&&this.destroy()}).resume()})}};function LGt(t){return t[MI]&&t[MI].locked===!0||t[Y0]}s(LGt,"isLocked");function MGt(t){return UYe.isDisturbed(t)||LGt(t)}s(MGt,"isUnusable");async function qF(t,e){return OYe(!t[Y0]),new Promise((r,n)=>{if(MGt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[Y0]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){TCe(this[Y0],i)}).on("close",function(){this[Y0].body!==null&&TCe(this[Y0],new QYe)}),FGt(t[Y0])})})}s(qF,"consume");function FGt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)ICe(t,e.buffer[i])}else for(let r of e.buffer)ICe(t,r);for(e.endEmitted?FYe(this[Y0]):t.stream.on("end",function(){FYe(this[Y0])}),t.stream.resume();t.stream.read()!=null;);}s(FGt,"consumeStart");function bCe(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(bCe,"chunksDecode");function MYe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(MYe,"chunksConcat");function FYe(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(bCe(r,o)):e==="json"?n(JSON.parse(bCe(r,o))):e==="arrayBuffer"?n(MYe(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[qYe]})):e==="bytes"&&n(MYe(r,o)),TCe(t)}catch(a){i.destroy(a)}}s(FYe,"consumeEnd");function ICe(t,e){t.length+=e.length,t.body.push(e)}s(ICe,"consumePush");function TCe(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(TCe,"consumeFinish");HYe.exports={Readable:xCe,chunksDecode:bCe}});var _Ce=Q((pYn,$Ye)=>{d();var OGt=require("node:assert"),{ResponseStatusCodeError:WYe}=Lo(),{chunksDecode:GYe}=wCe(),QGt=128*1024;async function UGt({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){OGt(e);let a=[],c=0;try{for await(let p of e)if(a.push(p),c+=p.length,c>QGt){a=[],c=0;break}}catch{a=[],c=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!c){queueMicrotask(()=>t(new WYe(l,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let f;try{jYe(r)?f=JSON.parse(GYe(a,c)):VYe(r)&&(f=GYe(a,c))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new WYe(l,n,o,f)))}s(UGt,"getResolveErrorBodyCallback");var jYe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),VYe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");$Ye.exports={getResolveErrorBodyCallback:UGt,isContentTypeApplicationJson:jYe,isContentTypeText:VYe}});var KYe=Q((gYn,SCe)=>{"use strict";d();var qGt=require("node:assert"),{Readable:HGt}=wCe(),{InvalidArgumentError:lB,RequestAbortedError:zYe}=Lo(),K0=Pi(),{getResolveErrorBodyCallback:WGt}=_Ce(),{AsyncResource:GGt}=require("node:async_hooks"),FJ=class extends GGt{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new lB("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:c,responseHeaders:l,throwOnError:u,highWaterMark:f}=e;try{if(typeof r!="function")throw new lB("invalid callback");if(f&&(typeof f!="number"||f<0))throw new lB("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new lB("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new lB("invalid method");if(c&&typeof c!="function")throw new lB("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw K0.isStream(a)&&K0.destroy(a.on("error",K0.nop),p),p}this.method=i,this.responseHeaders=l||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=c||null,this.throwOnError=u,this.highWaterMark=f,this.signal=n,this.reason=null,this.removeAbortListener=null,K0.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new zYe:this.removeAbortListener=K0.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new zYe,this.res?K0.destroy(this.res.on("error",K0.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}qGt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:c,context:l,responseHeaders:u,highWaterMark:f}=this,p=u==="raw"?K0.parseRawHeaders(r):K0.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?K0.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],y=new HGt({resume:n,abort:c,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:f});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(WGt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:l}))}onData(e){return this.res.push(e)}onComplete(e){K0.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{K0.destroy(r,e)})),i&&(this.body=null,K0.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function YYe(t,e){if(e===void 0)return new Promise((r,n)=>{YYe.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new FJ(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(YYe,"request");SCe.exports=YYe;SCe.exports.RequestHandler=FJ});var HF=Q((CYn,ZYe)=>{d();var{addAbortListener:jGt}=Pi(),{RequestAbortedError:VGt}=Lo(),uB=Symbol("kListener"),Hy=Symbol("kSignal");function JYe(t){t.abort?t.abort(t[Hy]?.reason):t.reason=t[Hy]?.reason??new VGt,XYe(t)}s(JYe,"abort");function $Gt(t,e){if(t.reason=null,t[Hy]=null,t[uB]=null,!!e){if(e.aborted){JYe(t);return}t[Hy]=e,t[uB]=()=>{JYe(t)},jGt(t[Hy],t[uB])}}s($Gt,"addSignal");function XYe(t){t[Hy]&&("removeEventListener"in t[Hy]?t[Hy].removeEventListener("abort",t[uB]):t[Hy].removeListener("abort",t[uB]),t[Hy]=null,t[uB]=null)}s(XYe,"removeSignal");ZYe.exports={addSignal:$Gt,removeSignal:XYe}});var nKe=Q((xYn,rKe)=>{"use strict";d();var zGt=require("node:assert"),{finished:YGt,PassThrough:KGt}=require("node:stream"),{InvalidArgumentError:dB,InvalidReturnValueError:JGt}=Lo(),wg=Pi(),{getResolveErrorBodyCallback:XGt}=_Ce(),{AsyncResource:ZGt}=require("node:async_hooks"),{addSignal:ejt,removeSignal:eKe}=HF(),RCe=class extends ZGt{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new dB("invalid opts");let{signal:i,method:o,opaque:a,body:c,onInfo:l,responseHeaders:u,throwOnError:f}=e;try{if(typeof n!="function")throw new dB("invalid callback");if(typeof r!="function")throw new dB("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new dB("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new dB("invalid method");if(l&&typeof l!="function")throw new dB("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw wg.isStream(c)&&wg.destroy(c.on("error",wg.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=c,this.onInfo=l||null,this.throwOnError=f||!1,wg.isStream(c)&&c.on("error",p=>{this.onError(p)}),ejt(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}zGt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:c,callback:l,responseHeaders:u}=this,f=u==="raw"?wg.parseRawHeaders(r):wg.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:f});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?wg.parseHeaders(r):f)["content-type"];p=new KGt,this.callback=null,this.runInAsyncScope(XGt,null,{callback:l,body:p,contentType:g,statusCode:e,statusMessage:i,headers:f})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:f,opaque:a,context:c}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new JGt("expected Writable");YGt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:E,trailers:x,abort:b}=this;this.res=null,(h||!y.readable)&&wg.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:E,trailers:x}),h&&b()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;eKe(this),r&&(this.trailers=wg.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;eKe(this),this.factory=null,r?(this.res=null,wg.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,wg.destroy(o,e))}};function tKe(t,e,r){if(r===void 0)return new Promise((n,i)=>{tKe.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new RCe(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(tKe,"stream");rKe.exports=tKe});var aKe=Q((TYn,sKe)=>{"use strict";d();var{Readable:oKe,Duplex:tjt,PassThrough:rjt}=require("node:stream"),{InvalidArgumentError:WF,InvalidReturnValueError:njt,RequestAbortedError:kCe}=Lo(),Om=Pi(),{AsyncResource:ijt}=require("node:async_hooks"),{addSignal:ojt,removeSignal:sjt}=HF(),iKe=require("node:assert"),fB=Symbol("resume"),PCe=class extends oKe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[fB]=null}_read(){let{[fB]:e}=this;e&&(this[fB]=null,e())}_destroy(e,r){this._read(),r(e)}},BCe=class extends oKe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[fB]=e}_read(){this[fB]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new kCe),r(e)}},DCe=class extends ijt{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new WF("invalid opts");if(typeof r!="function")throw new WF("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:c}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new WF("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new WF("invalid method");if(a&&typeof a!="function")throw new WF("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=c||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new PCe().on("error",Om.nop),this.ret=new tjt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:l}=this;l?.resume&&l.resume()},"read"),write:s((l,u,f)=>{let{req:p}=this;p.push(l,u)||p._readableState.destroyed?f():p[fB]=f},"write"),destroy:s((l,u)=>{let{body:f,req:p,res:m,ret:h,abort:g}=this;!l&&!h._readableState.endEmitted&&(l=new kCe),g&&l&&g(),Om.destroy(f,l),Om.destroy(p,l),Om.destroy(m,l),sjt(this),u(l)},"destroy")}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,ojt(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}iKe(!i,"pipeline cannot be retried"),iKe(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let l=this.responseHeaders==="raw"?Om.parseRawHeaders(r):Om.parseHeaders(r);this.onInfo({statusCode:e,headers:l})}return}this.res=new BCe(n);let c;try{this.handler=null;let l=this.responseHeaders==="raw"?Om.parseRawHeaders(r):Om.parseHeaders(r);c=this.runInAsyncScope(o,null,{statusCode:e,headers:l,opaque:i,body:this.res,context:a})}catch(l){throw this.res.on("error",Om.nop),l}if(!c||typeof c.on!="function")throw new njt("expected Readable");c.on("data",l=>{let{ret:u,body:f}=this;!u.push(l)&&f.pause&&f.pause()}).on("error",l=>{let{ret:u}=this;Om.destroy(u,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||Om.destroy(l,new kCe)}),this.body=c}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,Om.destroy(r,e)}};function ajt(t,e){try{let r=new DCe(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new rjt().destroy(r)}}s(ajt,"pipeline");sKe.exports=ajt});var pKe=Q((SYn,fKe)=>{"use strict";d();var{InvalidArgumentError:NCe,SocketError:cjt}=Lo(),{AsyncResource:ljt}=require("node:async_hooks"),cKe=Pi(),{addSignal:ujt,removeSignal:lKe}=HF(),uKe=require("node:assert"),LCe=class extends ljt{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new NCe("invalid opts");if(typeof r!="function")throw new NCe("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new NCe("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,ujt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}uKe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new cjt("bad upgrade",null)}onUpgrade(e,r,n){uKe(e===101);let{callback:i,opaque:o,context:a}=this;lKe(this),this.callback=null;let c=this.responseHeaders==="raw"?cKe.parseRawHeaders(r):cKe.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;lKe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function dKe(t,e){if(e===void 0)return new Promise((r,n)=>{dKe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new LCe(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(dKe,"upgrade");fKe.exports=dKe});var yKe=Q((PYn,AKe)=>{"use strict";d();var djt=require("node:assert"),{AsyncResource:fjt}=require("node:async_hooks"),{InvalidArgumentError:MCe,SocketError:pjt}=Lo(),mKe=Pi(),{addSignal:mjt,removeSignal:hKe}=HF(),FCe=class extends fjt{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new MCe("invalid opts");if(typeof r!="function")throw new MCe("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new MCe("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,mjt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}djt(this.callback),this.abort=e,this.context=r}onHeaders(){throw new pjt("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;hKe(this),this.callback=null;let c=r;c!=null&&(c=this.responseHeaders==="raw"?mKe.parseRawHeaders(r):mKe.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;hKe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function gKe(t,e){if(e===void 0)return new Promise((r,n)=>{gKe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new FCe(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(gKe,"connect");AKe.exports=gKe});var CKe=Q((NYn,pB)=>{"use strict";d();pB.exports.request=KYe();pB.exports.stream=nKe();pB.exports.pipeline=aKe();pB.exports.upgrade=pKe();pB.exports.connect=yKe()});var QCe=Q((MYn,EKe)=>{"use strict";d();var{UndiciError:hjt}=Lo(),OCe=class t extends hjt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};EKe.exports={MockNotMatchedError:OCe}});var mB=Q((QYn,vKe)=>{"use strict";d();vKe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var GF=Q((qYn,BKe)=>{"use strict";d();var{MockNotMatchedError:D2}=QCe(),{kDispatches:OJ,kMockAgent:gjt,kOriginalDispatch:Ajt,kOrigin:yjt,kGetNetConnect:Cjt}=mB(),{buildURL:Ejt}=Pi(),{STATUS_CODES:vjt}=require("node:http"),{types:{isPromise:xjt}}=require("node:util");function wE(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(wE,"matchValue");function bKe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(bKe,"lowerCaseEntries");function IKe(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):bKe(t)[e.toLocaleLowerCase()]}s(IKe,"getHeaderByName");function HCe(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(HCe,"buildHeadersFromArray");function TKe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=HCe(e)),t.headers(e?bKe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=IKe(e,r);if(!wE(n,i))return!1}return!0}s(TKe,"matchHeaders");function xKe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(xKe,"safeUrl");function bjt(t,{path:e,method:r,body:n,headers:i}){let o=wE(t.path,e),a=wE(t.method,r),c=typeof t.body<"u"?wE(t.body,n):!0,l=TKe(t,i);return o&&a&&c&&l}s(bjt,"matchKey");function wKe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(wKe,"getResponseData");function _Ke(t,e){let r=e.query?Ejt(e.path,e.query):e.path,n=typeof r=="string"?xKe(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>wE(xKe(o),n));if(i.length===0)throw new D2(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>wE(o,e.method)),i.length===0)throw new D2(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?wE(o,e.body):!0),i.length===0)throw new D2(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>TKe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new D2(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(_Ke,"getMockDispatch");function Ijt(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(Ijt,"addMockDispatch");function UCe(t,e){let r=t.findIndex(n=>n.consumed?bjt(n,e):!1);r!==-1&&t.splice(r,1)}s(UCe,"deleteMockDispatch");function SKe(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(SKe,"buildKey");function qCe(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let c=0;c<o.length;++c)r.push(a,Buffer.from(`${o[c]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(qCe,"generateKeyValues");function RKe(t){return vjt[t]||"unknown"}s(RKe,"getStatusText");async function Tjt(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(Tjt,"getResponse");function kKe(t,e){let r=SKe(t),n=_Ke(this[OJ],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:c,error:l},delay:u,persist:f}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!f&&p>=m,n.pending=p<m,l!==null)return UCe(this[OJ],r),e.onError(l),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[OJ])},u):h(this[OJ]);function h(y,E=o){let x=Array.isArray(t.headers)?HCe(t.headers):t.headers,b=typeof E=="function"?E({...t,headers:x}):E;if(xjt(b)){b.then(N=>h(y,N));return}let _=wKe(b),k=qCe(a),P=qCe(c);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,RKe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(P),UCe(y,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(kKe,"mockDispatch");function wjt(){let t=this[gjt],e=this[yjt],r=this[Ajt];return s(function(i,o){if(t.isMockActive)try{kKe.call(this,i,o)}catch(a){if(a instanceof D2){let c=t[Cjt]();if(c===!1)throw new D2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(PKe(c,e))r.call(this,i,o);else throw new D2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(wjt,"buildMockDispatch");function PKe(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>wE(n,r.host)))}s(PKe,"checkNetConnect");function _jt(t){if(t){let{agent:e,...r}=t;return r}}s(_jt,"buildMockOptions");BKe.exports={getResponseData:wKe,getMockDispatch:_Ke,addMockDispatch:Ijt,deleteMockDispatch:UCe,buildKey:SKe,generateKeyValues:qCe,matchValue:wE,getResponse:Tjt,getStatusText:RKe,mockDispatch:kKe,buildMockDispatch:wjt,checkNetConnect:PKe,buildMockOptions:_jt,getHeaderByName:IKe,buildHeadersFromArray:HCe}});var YCe=Q((GYn,zCe)=>{"use strict";d();var{getResponseData:Sjt,buildKey:Rjt,addMockDispatch:WCe}=GF(),{kDispatches:QJ,kDispatchKey:UJ,kDefaultHeaders:GCe,kDefaultTrailers:jCe,kContentLength:VCe,kMockDispatch:qJ}=mB(),{InvalidArgumentError:Wy}=Lo(),{buildURL:kjt}=Pi(),hB=class{static{s(this,"MockScope")}constructor(e){this[qJ]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Wy("waitInMs must be a valid integer > 0");return this[qJ].delay=e,this}persist(){return this[qJ].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Wy("repeatTimes must be a valid integer > 0");return this[qJ].times=e,this}},$Ce=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new Wy("opts must be an object");if(typeof e.path>"u")throw new Wy("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=kjt(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[UJ]=Rjt(e),this[QJ]=r,this[GCe]={},this[jCe]={},this[VCe]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=Sjt(r),o=this[VCe]?{"content-length":i.length}:{},a={...this[GCe],...o,...n.headers},c={...this[jCe],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:c}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new Wy("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new Wy("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(c=>{let l=e(c);if(typeof l!="object"||l===null)throw new Wy("reply options callback must return an object");let u={data:"",responseOptions:{},...l};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=WCe(this[QJ],this[UJ],o);return new hB(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=WCe(this[QJ],this[UJ],n);return new hB(i)}replyWithError(e){if(typeof e>"u")throw new Wy("error must be defined");let r=WCe(this[QJ],this[UJ],{error:e});return new hB(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new Wy("headers must be defined");return this[GCe]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new Wy("trailers must be defined");return this[jCe]=e,this}replyContentLength(){return this[VCe]=!0,this}};zCe.exports.MockInterceptor=$Ce;zCe.exports.MockScope=hB});var XCe=Q(($Yn,QKe)=>{"use strict";d();var{promisify:Pjt}=require("node:util"),Bjt=BF(),{buildMockDispatch:Djt}=GF(),{kDispatches:DKe,kMockAgent:NKe,kClose:LKe,kOriginalClose:MKe,kOrigin:FKe,kOriginalDispatch:Njt,kConnected:KCe}=mB(),{MockInterceptor:Ljt}=YCe(),OKe=pa(),{InvalidArgumentError:Mjt}=Lo(),JCe=class extends Bjt{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new Mjt("Argument opts.agent must implement Agent");this[NKe]=r.agent,this[FKe]=e,this[DKe]=[],this[KCe]=1,this[Njt]=this.dispatch,this[MKe]=this.close.bind(this),this.dispatch=Djt.call(this),this.close=this[LKe]}get[OKe.kConnected](){return this[KCe]}intercept(e){return new Ljt(e,this[DKe])}async[LKe](){await Pjt(this[MKe])(),this[KCe]=0,this[NKe][OKe.kClients].delete(this[FKe])}};QKe.exports=JCe});var t1e=Q((KYn,VKe)=>{"use strict";d();var{promisify:Fjt}=require("node:util"),Ojt=sB(),{buildMockDispatch:Qjt}=GF(),{kDispatches:UKe,kMockAgent:qKe,kClose:HKe,kOriginalClose:WKe,kOrigin:GKe,kOriginalDispatch:Ujt,kConnected:ZCe}=mB(),{MockInterceptor:qjt}=YCe(),jKe=pa(),{InvalidArgumentError:Hjt}=Lo(),e1e=class extends Ojt{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new Hjt("Argument opts.agent must implement Agent");this[qKe]=r.agent,this[GKe]=e,this[UKe]=[],this[ZCe]=1,this[Ujt]=this.dispatch,this[WKe]=this.close.bind(this),this.dispatch=Qjt.call(this),this.close=this[HKe]}get[jKe.kConnected](){return this[ZCe]}intercept(e){return new qjt(e,this[UKe])}async[HKe](){await Fjt(this[WKe])(),this[ZCe]=0,this[qKe][jKe.kClients].delete(this[GKe])}};VKe.exports=e1e});var zKe=Q((eKn,$Ke)=>{"use strict";d();var Wjt={pronoun:"it",is:"is",was:"was",this:"this"},Gjt={pronoun:"they",is:"are",was:"were",this:"these"};$Ke.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?Wjt:Gjt,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var KKe=Q((iKn,YKe)=>{"use strict";d();var{Transform:jjt}=require("node:stream"),{Console:Vjt}=require("node:console"),$jt=process.versions.icu?"\u2705":"Y ",zjt=process.versions.icu?"\u274C":"N ";YKe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new jjt({transform(r,n,i){i(null,r)}}),this.logger=new Vjt({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:c,timesInvoked:l,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?$jt:zjt,Invocations:l,Remaining:a?1/0:c-l}));return this.logger.table(r),this.transform.read().toString()}}});var eJe=Q((aKn,ZKe)=>{"use strict";d();var{kClients:N2}=pa(),Yjt=aB(),{kAgent:r1e,kMockAgentSet:HJ,kMockAgentGet:JKe,kDispatches:n1e,kIsMockActive:WJ,kNetConnect:L2,kGetNetConnect:Kjt,kOptions:GJ,kFactory:jJ}=mB(),Jjt=XCe(),Xjt=t1e(),{matchValue:Zjt,buildMockOptions:eVt}=GF(),{InvalidArgumentError:XKe,UndiciError:tVt}=Lo(),rVt=uF(),nVt=zKe(),iVt=KKe(),i1e=class extends rVt{static{s(this,"MockAgent")}constructor(e){if(super(e),this[L2]=!0,this[WJ]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new XKe("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new Yjt(e);this[r1e]=r,this[N2]=r[N2],this[GJ]=eVt(e)}get(e){let r=this[JKe](e);return r||(r=this[jJ](e),this[HJ](e,r)),r}dispatch(e,r){return this.get(e.origin),this[r1e].dispatch(e,r)}async close(){await this[r1e].close(),this[N2].clear()}deactivate(){this[WJ]=!1}activate(){this[WJ]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[L2])?this[L2].push(e):this[L2]=[e];else if(typeof e>"u")this[L2]=!0;else throw new XKe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[L2]=!1}get isMockActive(){return this[WJ]}[HJ](e,r){this[N2].set(e,r)}[jJ](e){let r=Object.assign({agent:this},this[GJ]);return this[GJ]&&this[GJ].connections===1?new Jjt(e,r):new Xjt(e,r)}[JKe](e){let r=this[N2].get(e);if(r)return r;if(typeof e!="string"){let n=this[jJ]("http://localhost:9999");return this[HJ](e,n),n}for(let[n,i]of Array.from(this[N2]))if(i&&typeof n!="string"&&Zjt(n,e)){let o=this[jJ](e);return this[HJ](e,o),o[n1e]=i[n1e],o}}[Kjt](){return this[L2]}pendingInterceptors(){let e=this[N2];return Array.from(e.entries()).flatMap(([r,n])=>n[n1e].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new iVt}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new nVt("interceptor","interceptors").pluralize(r.length);throw new tVt(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};ZKe.exports=i1e});var VJ=Q((uKn,iJe)=>{"use strict";d();var tJe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:oVt}=Lo(),sVt=aB();nJe()===void 0&&rJe(new sVt);function rJe(t){if(!t||typeof t.dispatch!="function")throw new oVt("Argument agent must implement Agent");Object.defineProperty(globalThis,tJe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(rJe,"setGlobalDispatcher");function nJe(){return globalThis[tJe]}s(nJe,"getGlobalDispatcher");iJe.exports={setGlobalDispatcher:rJe,getGlobalDispatcher:nJe}});var $J=Q((mKn,oJe)=>{"use strict";d();oJe.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var aJe=Q((AKn,sJe)=>{"use strict";d();var aVt=IJ();sJe.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...c}=i;if(!a)return r(i,o);let l=new aVt(r,a,i,o);return r(c,l)},"redirectInterceptor")}});var lJe=Q((EKn,cJe)=>{"use strict";d();var cVt=MJ();cJe.exports=t=>e=>s(function(n,i){return e(n,new cVt({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var dJe=Q((bKn,uJe)=>{"use strict";d();var lVt=Pi(),{InvalidArgumentError:uVt,RequestAbortedError:dVt}=Lo(),fVt=$J(),o1e=class extends fVt{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new uVt("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=lVt.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new dVt(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function pVt({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new o1e({maxSize:o},i);return e(n,a)},"Intercept")}s(pVt,"createDumpInterceptor");uJe.exports=pVt});var mJe=Q((wKn,pJe)=>{"use strict";d();var{isIP:mVt}=require("node:net"),{lookup:hVt}=require("node:dns"),gVt=$J(),{InvalidArgumentError:gB,InformationalError:AVt}=Lo(),fJe=Math.pow(2,31)-1,s1e=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,c)=>{if(a||c==null||c.length===0){n(a??new AVt("No DNS entries found"));return}this.setRecords(e,c);let l=this.#i.get(e.hostname),u=this.pick(e,l,o.affinity),f;typeof u.port=="number"?f=`:${u.port}`:e.port!==""?f=`:${e.port}`:f="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${f}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let c;typeof a.port=="number"?c=`:${a.port}`:e.port!==""?c=`:${e.port}`:c="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${c}`)}}#n(e,r,n){hVt(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let c of o)a.set(`${c.address}:${c.family}`,c);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,c;if(this.dualStack?(n==null&&(a==null||a===fJe?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?c=o[n]:c=o[n===4?6:4]):c=o[n],c==null||c.ips.length===0)return i;c.offset==null||c.offset===fJe?c.offset=0:c.offset++;let l=c.offset%c.ips.length;return i=c.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(c.ips.splice(l,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new a1e(this,e,r)}},a1e=class extends gVt{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};pJe.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new gB("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new gB("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new gB("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new gB("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new gB("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new gB("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new s1e(n);return o=>s(function(c,l){let u=c.origin.constructor===URL?c.origin:new URL(c.origin);return mVt(u.hostname)!==0?o(c,l):(i.runLookup(u,c,(f,p)=>{if(f)return l.onError(f);let m=null;m={...c,servername:u.hostname,origin:p,headers:{host:u.hostname,...c.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:l},c))}),!0)},"dnsInterceptor")}});var M2=Q((RKn,vJe)=>{"use strict";d();var{kConstruct:yVt}=pa(),{kEnumerableProperty:AB}=Pi(),{iteratorMixin:CVt,isValidHeaderName:jF,isValidHeaderValue:gJe}=z0(),{webidl:yo}=gu(),c1e=require("node:assert"),zJ=require("node:util"),Mc=Symbol("headers map"),J0=Symbol("headers map sorted");function hJe(t){return t===10||t===13||t===9||t===32}s(hJe,"isHTTPWhiteSpaceCharCode");function AJe(t){let e=0,r=t.length;for(;r>e&&hJe(t.charCodeAt(r-1));)--r;for(;r>e&&hJe(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(AJe,"headerValueNormalize");function yJe(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw yo.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});l1e(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)l1e(t,r[n],e[r[n]])}else throw yo.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(yJe,"fill");function l1e(t,e,r){if(r=AJe(r),jF(e)){if(!gJe(r))throw yo.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw yo.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(EJe(t)==="immutable")throw new TypeError("immutable");return u1e(t).append(e,r,!1)}s(l1e,"appendHeader");function CJe(t,e){return t[0]<e[0]?-1:1}s(CJe,"compareHeaderName");var YJ=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[Mc]=new Map(e[Mc]),this[J0]=e[J0],this.cookies=e.cookies===null?null:[...e.cookies]):(this[Mc]=new Map(e),this[J0]=null)}contains(e,r){return this[Mc].has(r?e:e.toLowerCase())}clear(){this[Mc].clear(),this[J0]=null,this.cookies=null}append(e,r,n){this[J0]=null;let i=n?e:e.toLowerCase(),o=this[Mc].get(i);if(o){let a=i==="cookie"?"; ":", ";this[Mc].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[Mc].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[J0]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[Mc].set(i,{name:e,value:r})}delete(e,r){this[J0]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[Mc].delete(e)}get(e,r){return this[Mc].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[Mc])yield[e,r]}get entries(){let e={};if(this[Mc].size!==0)for(let{name:r,value:n}of this[Mc].values())e[r]=n;return e}rawValues(){return this[Mc].values()}get entriesList(){let e=[];if(this[Mc].size!==0)for(let{0:r,1:{name:n,value:i}}of this[Mc])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[Mc].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[Mc][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],c1e(i[1].value!==null);for(let o=1,a=0,c=0,l=0,u=0,f,p;o<e;++o){for(p=n.next().value,f=r[o]=[p[0],p[1].value],c1e(f[1]!==null),l=0,c=o;l<c;)u=l+(c-l>>1),r[u][0]<=f[0]?l=u+1:c=u;if(o!==u){for(a=o;a>l;)r[a]=r[--a];r[l]=f}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[Mc])r[n++]=[i,o],c1e(o!==null);return r.sort(CJe)}}},_g=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){yo.util.markAsUncloneable(this),e!==yVt&&(this.#t=new YJ,this.#e="none",e!==void 0&&(e=yo.converters.HeadersInit(e,"Headers contructor","init"),yJe(this,e)))}append(e,r){yo.brandCheck(this,t),yo.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=yo.converters.ByteString(e,n,"name"),r=yo.converters.ByteString(r,n,"value"),l1e(this,e,r)}delete(e){if(yo.brandCheck(this,t),yo.argumentLengthCheck(arguments,1,"Headers.delete"),e=yo.converters.ByteString(e,"Headers.delete","name"),!jF(e))throw yo.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){yo.brandCheck(this,t),yo.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=yo.converters.ByteString(e,r,"name"),!jF(e))throw yo.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){yo.brandCheck(this,t),yo.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=yo.converters.ByteString(e,r,"name"),!jF(e))throw yo.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){yo.brandCheck(this,t),yo.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=yo.converters.ByteString(e,n,"name"),r=yo.converters.ByteString(r,n,"value"),r=AJe(r),jF(e)){if(!gJe(r))throw yo.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw yo.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){yo.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[J0](){if(this.#t[J0])return this.#t[J0];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[J0]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let c=0;c<n.length;++c)e.push([o,n[c]]);else e.push([o,a])}return this.#t[J0]=e}[zJ.inspect.custom](e,r){return r.depth??=e,`Headers ${zJ.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:EJe,setHeadersGuard:EVt,getHeadersList:u1e,setHeadersList:vVt}=_g;Reflect.deleteProperty(_g,"getHeadersGuard");Reflect.deleteProperty(_g,"setHeadersGuard");Reflect.deleteProperty(_g,"getHeadersList");Reflect.deleteProperty(_g,"setHeadersList");CVt("Headers",_g,J0,0,1);Object.defineProperties(_g.prototype,{append:AB,delete:AB,get:AB,has:AB,set:AB,getSetCookie:AB,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[zJ.inspect.custom]:{enumerable:!1}});yo.converters.HeadersInit=function(t,e,r){if(yo.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!zJ.types.isProxy(t)&&n===_g.prototype.entries)try{return u1e(t).entriesList}catch{}return typeof n=="function"?yo.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):yo.converters["record<ByteString, ByteString>"](t,e,r)}throw yo.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};vJe.exports={fill:yJe,compareHeaderName:CJe,Headers:_g,HeadersList:YJ,getHeadersGuard:EJe,setHeadersGuard:EVt,setHeadersList:vVt,getHeadersList:u1e}});var $F=Q((BKn,PJe)=>{"use strict";d();var{Headers:_Je,HeadersList:xJe,fill:xVt,getHeadersGuard:bVt,setHeadersGuard:SJe,setHeadersList:RJe}=M2(),{extractBody:bJe,cloneBody:IVt,mixinBody:TVt,hasFinalizationRegistry:wVt,streamRegistry:_Vt,bodyUnusable:SVt}=Z3(),d1e=Pi(),IJe=require("node:util"),{kEnumerableProperty:X0}=d1e,{isValidReasonPhrase:RVt,isCancelled:kVt,isAborted:PVt,isBlobLike:BVt,serializeJavascriptValueToJSONString:DVt,isErrorLike:NVt,isomorphicEncode:LVt,environmentSettingsObject:MVt}=z0(),{redirectStatusSet:FVt,nullBodyStatus:OVt}=pF(),{kState:qa,kHeaders:_E}=wI(),{webidl:hi}=gu(),{FormData:QVt}=CF(),{URLSerializer:TJe}=Mf(),{kConstruct:JJ}=pa(),f1e=require("node:assert"),{types:UVt}=require("node:util"),qVt=new TextEncoder("utf-8"),F2=class t{static{s(this,"Response")}static error(){return VF(XJ(),"immutable")}static json(e,r={}){hi.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=hi.converters.ResponseInit(r));let n=qVt.encode(DVt(e)),i=bJe(n),o=VF(yB({}),"response");return wJe(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){hi.argumentLengthCheck(arguments,1,"Response.redirect"),e=hi.converters.USVString(e),r=hi.converters["unsigned short"](r);let n;try{n=new URL(e,MVt.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!FVt.has(r))throw new RangeError(`Invalid status code ${r}`);let i=VF(yB({}),"immutable");i[qa].status=r;let o=LVt(TJe(n));return i[qa].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(hi.util.markAsUncloneable(this),e===JJ)return;e!==null&&(e=hi.converters.BodyInit(e)),r=hi.converters.ResponseInit(r),this[qa]=yB({}),this[_E]=new _Je(JJ),SJe(this[_E],"response"),RJe(this[_E],this[qa].headersList);let n=null;if(e!=null){let[i,o]=bJe(e);n={body:i,type:o}}wJe(this,r,n)}get type(){return hi.brandCheck(this,t),this[qa].type}get url(){hi.brandCheck(this,t);let e=this[qa].urlList,r=e[e.length-1]??null;return r===null?"":TJe(r,!0)}get redirected(){return hi.brandCheck(this,t),this[qa].urlList.length>1}get status(){return hi.brandCheck(this,t),this[qa].status}get ok(){return hi.brandCheck(this,t),this[qa].status>=200&&this[qa].status<=299}get statusText(){return hi.brandCheck(this,t),this[qa].statusText}get headers(){return hi.brandCheck(this,t),this[_E]}get body(){return hi.brandCheck(this,t),this[qa].body?this[qa].body.stream:null}get bodyUsed(){return hi.brandCheck(this,t),!!this[qa].body&&d1e.isDisturbed(this[qa].body.stream)}clone(){if(hi.brandCheck(this,t),SVt(this))throw hi.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=p1e(this[qa]);return VF(e,bVt(this[_E]))}[IJe.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${IJe.formatWithOptions(r,n)}`}};TVt(F2);Object.defineProperties(F2.prototype,{type:X0,url:X0,status:X0,ok:X0,redirected:X0,statusText:X0,headers:X0,clone:X0,body:X0,bodyUsed:X0,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(F2,{json:X0,redirect:X0,error:X0});function p1e(t){if(t.internalResponse)return kJe(p1e(t.internalResponse),t.type);let e=yB({...t,body:null});return t.body!=null&&(e.body=IVt(e,t.body)),e}s(p1e,"cloneResponse");function yB(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new xJe(t?.headersList):new xJe,urlList:t?.urlList?[...t.urlList]:[]}}s(yB,"makeResponse");function XJ(t){let e=NVt(t);return yB({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(XJ,"makeNetworkError");function HVt(t){return t.type==="error"&&t.status===0}s(HVt,"isNetworkError");function KJ(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return f1e(!(n in e)),r[n]=i,!0}})}s(KJ,"makeFilteredResponse");function kJe(t,e){if(e==="basic")return KJ(t,{type:"basic",headersList:t.headersList});if(e==="cors")return KJ(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return KJ(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return KJ(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});f1e(!1)}s(kJe,"filterResponse");function WVt(t,e=null){return f1e(kVt(t)),PVt(t)?XJ(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):XJ(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(WVt,"makeAppropriateNetworkError");function wJe(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!RVt(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[qa].status=e.status),"statusText"in e&&e.statusText!=null&&(t[qa].statusText=e.statusText),"headers"in e&&e.headers!=null&&xVt(t[_E],e.headers),r){if(OVt.includes(t.status))throw hi.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[qa].body=r.body,r.type!=null&&!t[qa].headersList.contains("content-type",!0)&&t[qa].headersList.append("content-type",r.type,!0)}}s(wJe,"initializeResponse");function VF(t,e){let r=new F2(JJ);return r[qa]=t,r[_E]=new _Je(JJ),RJe(r[_E],t.headersList),SJe(r[_E],e),wVt&&t.body?.stream&&_Vt.register(r,new WeakRef(t.body.stream)),r}s(VF,"fromInnerResponse");hi.converters.ReadableStream=hi.interfaceConverter(ReadableStream);hi.converters.FormData=hi.interfaceConverter(QVt);hi.converters.URLSearchParams=hi.interfaceConverter(URLSearchParams);hi.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?hi.converters.USVString(t,e,r):BVt(t)?hi.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||UVt.isArrayBuffer(t)?hi.converters.BufferSource(t,e,r):d1e.isFormDataLike(t)?hi.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?hi.converters.URLSearchParams(t,e,r):hi.converters.DOMString(t,e,r)};hi.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?hi.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:hi.converters.XMLHttpRequestBodyInit(t,e,r)};hi.converters.ResponseInit=hi.dictionaryConverter([{key:"status",converter:hi.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:hi.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:hi.converters.HeadersInit}]);PJe.exports={isNetworkError:HVt,makeNetworkError:XJ,makeResponse:yB,makeAppropriateNetworkError:WVt,filterResponse:kJe,Response:F2,cloneResponse:p1e,fromInnerResponse:VF}});var LJe=Q((LKn,NJe)=>{"use strict";d();var{kConnected:BJe,kSize:DJe}=pa(),m1e=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[BJe]===0&&this.value[DJe]===0?void 0:this.value}},h1e=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[BJe]===0&&e[DJe]===0&&this.finalizer(r)})}unregister(e){}};NJe.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:m1e,FinalizationRegistry:h1e}):{WeakRef,FinalizationRegistry}}});var CB=Q((OKn,KJe)=>{"use strict";d();var{extractBody:GVt,mixinBody:jVt,cloneBody:VVt,bodyUnusable:MJe}=Z3(),{Headers:jJe,fill:$Vt,HeadersList:rX,setHeadersGuard:A1e,getHeadersGuard:zVt,setHeadersList:VJe,getHeadersList:FJe}=M2(),{FinalizationRegistry:YVt}=LJe()(),eX=Pi(),OJe=require("node:util"),{isValidHTTPToken:KVt,sameOrigin:QJe,environmentSettingsObject:ZJ}=z0(),{forbiddenMethodsSet:JVt,corsSafeListedMethodsSet:XVt,referrerPolicy:ZVt,requestRedirect:e$t,requestMode:t$t,requestCredentials:r$t,requestCache:n$t,requestDuplex:i$t}=pF(),{kEnumerableProperty:Fc,normalizedMethodRecordsBase:o$t,normalizedMethodRecords:s$t}=eX,{kHeaders:Z0,kSignal:tX,kState:Vs,kDispatcher:g1e}=wI(),{webidl:wn}=gu(),{URLSerializer:a$t}=Mf(),{kConstruct:nX}=pa(),c$t=require("node:assert"),{getMaxListeners:UJe,setMaxListeners:qJe,getEventListeners:l$t,defaultMaxListeners:HJe}=require("node:events"),u$t=Symbol("abortController"),$Je=new YVt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),iX=new WeakMap;function WJe(t){return e;function e(){let r=t.deref();if(r!==void 0){$Je.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=iX.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}iX.delete(r.signal)}}}}s(WJe,"buildAbort");var GJe=!1,FI=class t{static{s(this,"Request")}constructor(e,r={}){if(wn.util.markAsUncloneable(this),e===nX)return;let n="Request constructor";wn.argumentLengthCheck(arguments,1,n),e=wn.converters.RequestInfo(e,n,"input"),r=wn.converters.RequestInit(r,n,"init");let i=null,o=null,a=ZJ.settingsObject.baseUrl,c=null;if(typeof e=="string"){this[g1e]=r.dispatcher;let x;try{x=new URL(e,a)}catch(b){throw new TypeError("Failed to parse URL from "+e,{cause:b})}if(x.username||x.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=oX({urlList:[x]}),o="cors"}else this[g1e]=r.dispatcher||e[g1e],c$t(e instanceof t),i=e[Vs],c=e[tX];let l=ZJ.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&QJe(i.window,l)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=oX({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:ZJ.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let f=Object.keys(r).length!==0;if(f&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let x=r.referrer;if(x==="")i.referrer="no-referrer";else{let b;try{b=new URL(x,a)}catch(_){throw new TypeError(`Referrer "${x}" is not a valid URL.`,{cause:_})}b.protocol==="about:"&&b.hostname==="client"||l&&!QJe(b,ZJ.settingsObject.baseUrl)?i.referrer="client":i.referrer=b}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw wn.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let x=r.method,b=s$t[x];if(b!==void 0)i.method=b;else{if(!KVt(x))throw new TypeError(`'${x}' is not a valid HTTP method.`);let _=x.toUpperCase();if(JVt.has(_))throw new TypeError(`'${x}' HTTP method is unsupported.`);x=o$t[_]??x,i.method=x}!GJe&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),GJe=!0)}r.signal!==void 0&&(c=r.signal),this[Vs]=i;let m=new AbortController;if(this[tX]=m.signal,c!=null){if(!c||typeof c.aborted!="boolean"||typeof c.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(c.aborted)m.abort(c.reason);else{this[u$t]=m;let x=new WeakRef(m),b=WJe(x);try{(typeof UJe=="function"&&UJe(c)===HJe||l$t(c,"abort").length>=HJe)&&qJe(1500,c)}catch{}eX.addAbortListener(c,b),$Je.register(m,{signal:c,abort:b},b)}}if(this[Z0]=new jJe(nX),VJe(this[Z0],i.headersList),A1e(this[Z0],"request"),p==="no-cors"){if(!XVt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);A1e(this[Z0],"request-no-cors")}if(f){let x=FJe(this[Z0]),b=r.headers!==void 0?r.headers:new rX(x);if(x.clear(),b instanceof rX){for(let{name:_,value:k}of b.rawValues())x.append(_,k,!1);x.cookies=b.cookies}else $Vt(this[Z0],b)}let h=e instanceof t?e[Vs].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[x,b]=GVt(r.body,i.keepalive);g=x,b&&!FJe(this[Z0]).contains("content-type",!0)&&this[Z0].append("content-type",b)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let E=y;if(g==null&&h!=null){if(MJe(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let x=new TransformStream;h.stream.pipeThrough(x),E={source:h.source,length:h.length,stream:x.readable}}this[Vs].body=E}get method(){return wn.brandCheck(this,t),this[Vs].method}get url(){return wn.brandCheck(this,t),a$t(this[Vs].url)}get headers(){return wn.brandCheck(this,t),this[Z0]}get destination(){return wn.brandCheck(this,t),this[Vs].destination}get referrer(){return wn.brandCheck(this,t),this[Vs].referrer==="no-referrer"?"":this[Vs].referrer==="client"?"about:client":this[Vs].referrer.toString()}get referrerPolicy(){return wn.brandCheck(this,t),this[Vs].referrerPolicy}get mode(){return wn.brandCheck(this,t),this[Vs].mode}get credentials(){return this[Vs].credentials}get cache(){return wn.brandCheck(this,t),this[Vs].cache}get redirect(){return wn.brandCheck(this,t),this[Vs].redirect}get integrity(){return wn.brandCheck(this,t),this[Vs].integrity}get keepalive(){return wn.brandCheck(this,t),this[Vs].keepalive}get isReloadNavigation(){return wn.brandCheck(this,t),this[Vs].reloadNavigation}get isHistoryNavigation(){return wn.brandCheck(this,t),this[Vs].historyNavigation}get signal(){return wn.brandCheck(this,t),this[tX]}get body(){return wn.brandCheck(this,t),this[Vs].body?this[Vs].body.stream:null}get bodyUsed(){return wn.brandCheck(this,t),!!this[Vs].body&&eX.isDisturbed(this[Vs].body.stream)}get duplex(){return wn.brandCheck(this,t),"half"}clone(){if(wn.brandCheck(this,t),MJe(this))throw new TypeError("unusable");let e=zJe(this[Vs]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=iX.get(this.signal);n===void 0&&(n=new Set,iX.set(this.signal,n));let i=new WeakRef(r);n.add(i),eX.addAbortListener(r.signal,WJe(i))}return YJe(e,r.signal,zVt(this[Z0]))}[OJe.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${OJe.formatWithOptions(r,n)}`}};jVt(FI);function oX(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new rX(t.headersList):new rX}}s(oX,"makeRequest");function zJe(t){let e=oX({...t,body:null});return t.body!=null&&(e.body=VVt(e,t.body)),e}s(zJe,"cloneRequest");function YJe(t,e,r){let n=new FI(nX);return n[Vs]=t,n[tX]=e,n[Z0]=new jJe(nX),VJe(n[Z0],t.headersList),A1e(n[Z0],r),n}s(YJe,"fromInnerRequest");Object.defineProperties(FI.prototype,{method:Fc,url:Fc,headers:Fc,redirect:Fc,clone:Fc,signal:Fc,duplex:Fc,destination:Fc,body:Fc,bodyUsed:Fc,isHistoryNavigation:Fc,isReloadNavigation:Fc,keepalive:Fc,integrity:Fc,cache:Fc,credentials:Fc,attribute:Fc,referrerPolicy:Fc,referrer:Fc,mode:Fc,[Symbol.toStringTag]:{value:"Request",configurable:!0}});wn.converters.Request=wn.interfaceConverter(FI);wn.converters.RequestInfo=function(t,e,r){return typeof t=="string"?wn.converters.USVString(t,e,r):t instanceof FI?wn.converters.Request(t,e,r):wn.converters.USVString(t,e,r)};wn.converters.AbortSignal=wn.interfaceConverter(AbortSignal);wn.converters.RequestInit=wn.dictionaryConverter([{key:"method",converter:wn.converters.ByteString},{key:"headers",converter:wn.converters.HeadersInit},{key:"body",converter:wn.nullableConverter(wn.converters.BodyInit)},{key:"referrer",converter:wn.converters.USVString},{key:"referrerPolicy",converter:wn.converters.DOMString,allowedValues:ZVt},{key:"mode",converter:wn.converters.DOMString,allowedValues:t$t},{key:"credentials",converter:wn.converters.DOMString,allowedValues:r$t},{key:"cache",converter:wn.converters.DOMString,allowedValues:n$t},{key:"redirect",converter:wn.converters.DOMString,allowedValues:e$t},{key:"integrity",converter:wn.converters.DOMString},{key:"keepalive",converter:wn.converters.boolean},{key:"signal",converter:wn.nullableConverter(t=>wn.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:wn.converters.any},{key:"duplex",converter:wn.converters.DOMString,allowedValues:i$t},{key:"dispatcher",converter:wn.converters.any}]);KJe.exports={Request:FI,makeRequest:oX,fromInnerRequest:YJe,cloneRequest:zJe}});var YF=Q((qKn,dXe)=>{"use strict";d();var{makeNetworkError:Ko,makeAppropriateNetworkError:sX,filterResponse:y1e,makeResponse:aX,fromInnerResponse:d$t}=$F(),{HeadersList:JJe}=M2(),{Request:f$t,cloneRequest:p$t}=CB(),OI=require("node:zlib"),{bytesMatch:m$t,makePolicyContainer:h$t,clonePolicyContainer:g$t,requestBadPort:A$t,TAOCheck:y$t,appendRequestOriginHeader:C$t,responseLocationURL:E$t,requestCurrentURL:Gy,setRequestReferrerPolicyOnRedirect:v$t,tryUpgradeRequestToAPotentiallyTrustworthyURL:x$t,createOpaqueTimingInfo:b1e,appendFetchMetadata:b$t,corsCheck:I$t,crossOriginResourcePolicyCheck:T$t,determineRequestsReferrer:w$t,coarsenedSharedCurrentTime:zF,createDeferredPromise:_$t,isBlobLike:S$t,sameOrigin:x1e,isCancelled:O2,isAborted:XJe,isErrorLike:R$t,fullyReadBody:k$t,readableStreamClose:P$t,isomorphicEncode:cX,urlIsLocal:B$t,urlIsHttpHttpsScheme:I1e,urlHasHttpsScheme:D$t,clampAndCoarsenConnectionTimingInfo:N$t,simpleRangeHeaderValue:L$t,buildContentRange:M$t,createInflate:F$t,extractMimeType:O$t}=z0(),{kState:rXe,kDispatcher:Q$t}=wI(),Q2=require("node:assert"),{safelyExtractBody:T1e,extractBody:ZJe}=Z3(),{redirectStatusSet:nXe,nullBodyStatus:iXe,safeMethodsSet:U$t,requestBodyHeader:q$t,subresourceSet:H$t}=pF(),W$t=require("node:events"),{Readable:G$t,pipeline:j$t,finished:V$t}=require("node:stream"),{addAbortListener:$$t,isErrored:z$t,isReadable:lX,bufferToLowerCasedHeaderName:eXe}=Pi(),{dataURLProcessor:Y$t,serializeAMimeType:K$t,minimizeSupportedMimeType:J$t}=Mf(),{getGlobalDispatcher:X$t}=VJ(),{webidl:Z$t}=gu(),{STATUS_CODES:ezt}=require("node:http"),tzt=["GET","HEAD"],rzt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",C1e,uX=class extends W$t{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function nzt(t){oXe(t,"fetch")}s(nzt,"handleFetchDone");function izt(t,e=void 0){Z$t.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=_$t(),n;try{n=new f$t(t,e)}catch(f){return r.reject(f),r.promise}let i=n[rXe];if(n.signal.aborted)return E1e(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,c=!1,l=null;return $$t(n.signal,()=>{c=!0,Q2(l!=null),l.abort(n.signal.reason);let f=a?.deref();E1e(r,i,f,n.signal.reason)}),l=aXe({request:i,processResponseEndOfBody:nzt,processResponse:s(f=>{if(!c){if(f.aborted){E1e(r,i,a,l.serializedAbortReason);return}if(f.type==="error"){r.reject(new TypeError("fetch failed",{cause:f.error}));return}a=new WeakRef(d$t(f,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[Q$t]}),r.promise}s(izt,"fetch");function oXe(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;I1e(r)&&n!==null&&(t.timingAllowPassed||(n=b1e({startTime:n.startTime}),i=""),n.endTime=zF(),t.timingInfo=n,sXe(n,r.href,e,globalThis,i))}s(oXe,"finalizeAndReportTiming");var sXe=performance.markResourceTiming;function E1e(t,e,r,n){if(t&&t.reject(n),e.body!=null&&lX(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[rXe];i.body!=null&&lX(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(E1e,"abortFetch");function aXe({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:c=X$t()}){Q2(c);let l=null,u=!1;t.client!=null&&(l=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let f=zF(u),p=b1e({startTime:f}),m={controller:new uX(c),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:u};return Q2(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=g$t(t.client.policyContainer):t.policyContainer=h$t()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,H$t.has(t.destination),cXe(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(aXe,"fetching");async function cXe(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!B$t(Gy(r))&&(n=Ko("local URLs only")),x$t(r),A$t(r)==="blocked"&&(n=Ko("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=w$t(r)),n===null&&(n=await(async()=>{let o=Gy(r);return x1e(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await tXe(t)):r.mode==="same-origin"?Ko('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?Ko('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await tXe(t)):I1e(Gy(r))?(r.responseTainting="cors",await lXe(t)):Ko("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=y1e(n,"basic"):r.responseTainting==="cors"?n=y1e(n,"cors"):r.responseTainting==="opaque"?n=y1e(n,"opaque"):Q2(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=Ko()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||iXe.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(c=>v1e(t,Ko(c)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(c=>{if(!m$t(c,r.integrity)){o("integrity mismatch");return}n.body=T1e(c)[0],v1e(t,n)},"processBody");await k$t(n.body,a,o)}else v1e(t,n)}s(cXe,"mainFetch");function tXe(t){if(O2(t)&&t.request.redirectCount===0)return Promise.resolve(sX(t));let{request:e}=t,{protocol:r}=Gy(e);switch(r){case"about:":return Promise.resolve(Ko("about scheme is not supported"));case"blob:":{C1e||(C1e=require("node:buffer").resolveObjectURL);let n=Gy(e);if(n.search.length!==0)return Promise.resolve(Ko("NetworkError when attempting to fetch resource."));let i=C1e(n.toString());if(e.method!=="GET"||!S$t(i))return Promise.resolve(Ko("invalid method"));let o=aX(),a=i.size,c=cX(`${a}`),l=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),f=L$t(u,!0);if(f==="failure")return Promise.resolve(Ko("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=f;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(Ko("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,l),g=ZJe(h);o.body=g[0];let y=cX(`${h.size}`),E=M$t(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",l,!0),o.headersList.set("content-range",E,!0)}else{let u=ZJe(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",c,!0),o.headersList.set("content-type",l,!0)}return Promise.resolve(o)}case"data:":{let n=Gy(e),i=Y$t(n);if(i==="failure")return Promise.resolve(Ko("failed to fetch the data URL"));let o=K$t(i.mimeType);return Promise.resolve(aX({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:T1e(i.body)[0]}))}case"file:":return Promise.resolve(Ko("not implemented... yet..."));case"http:":case"https:":return lXe(t).catch(n=>Ko(n));default:return Promise.resolve(Ko("unknown scheme"))}}s(tXe,"schemeFetch");function ozt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(ozt,"finalizeResponse");function v1e(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let c=e.cacheState,l=e.bodyInfo;e.timingAllowPassed||(r=b1e(r),c="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let f=O$t(e.headersList);f!=="failure"&&(l.contentType=J$t(f))}t.request.initiatorType!=null&&sXe(r,t.request.url.href,t.request.initiatorType,globalThis,c,l,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():V$t(i.body.stream,()=>{n()})}s(v1e,"fetchFinale");async function lXe(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await uXe(t),e.responseTainting==="cors"&&I$t(e,r)==="failure")return Ko("cors failure");y$t(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&T$t(e.origin,e.client,e.destination,n)==="blocked"?Ko("blocked"):(nXe.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=Ko("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await szt(t,r):Q2(!1)),r.timingInfo=i,r)}s(lXe,"httpFetch");function szt(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=E$t(n,Gy(r).hash),i==null)return e}catch(a){return Promise.resolve(Ko(a))}if(!I1e(i))return Promise.resolve(Ko("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(Ko("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!x1e(r,i))return Promise.resolve(Ko('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(Ko('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(Ko());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!tzt.includes(r.method)){r.method="GET",r.body=null;for(let a of q$t)r.headersList.delete(a)}x1e(Gy(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(Q2(r.body.source!=null),r.body=T1e(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=zF(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),v$t(r,n),cXe(t,!0)}s(szt,"httpRedirectFetch");async function uXe(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,c=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=p$t(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",f=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),f!=null&&(p=cX(`${f}`)),p!=null&&o.headersList.append("content-length",p,!0),f!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",cX(o.referrer.href),!0),C$t(o),b$t(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",rzt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(D$t(Gy(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),c==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return Ko("only if cached");let m=await azt(i,u,r);!U$t.has(o.method)&&m.status>=200&&m.status<=399,l&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?Ko():O2(t)?sX(t):Ko("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(O2(t))return sX(t);t.controller.connection.destroy(),a=await uXe(t,e,!0)}return a}s(uXe,"httpNetworkOrCacheFetch");async function azt(t,e=!1,r=!1){Q2(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let c=r?"yes":"no";n.mode;let l=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(x){O2(t)||(yield x,t.processRequestBodyChunkLength?.(x.byteLength))},"processBodyChunk"),y=s(()=>{O2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),E=s(x=>{O2(t)||(x.name==="AbortError"?t.controller.abort():t.controller.terminate(x))},"processBodyError");l=async function*(){try{for await(let x of n.body.stream)yield*g(x);y()}catch(x){E(x)}}()}try{let{body:g,status:y,statusText:E,headersList:x,socket:b}=await h({body:l});if(b)i=aX({status:y,statusText:E,headersList:x,socket:b});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=aX({status:y,statusText:E,headersList:x})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),sX(t,g)):Ko(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),f=s(g=>{O2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await f(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:x,value:b}=await t.controller.next();if(XJe(t))break;g=x?void 0:b}catch(x){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=x,y=!0)}if(g===void 0){P$t(t.controller.controller),ozt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let E=new Uint8Array(g);if(E.byteLength&&t.controller.controller.enqueue(E),z$t(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){XJe(t)?(i.aborted=!0,lX(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):lX(p)&&t.controller.controller.error(new TypeError("terminated",{cause:R$t(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=Gy(n),E=t.controller.dispatcher;return new Promise((x,b)=>E.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:E.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=N$t(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=zF(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=zF(t.crossOriginIsolatedCapability)},onHeaders(_,k,P,N){if(_<200)return;let M=[],J="",se=new JJe;for(let ie=0;ie<k.length;ie+=2)se.append(eXe(k[ie]),k[ie+1].toString("latin1"),!0);let K=se.get("content-encoding",!0);K&&(M=K.toLowerCase().split(",").map(ie=>ie.trim())),J=se.get("location",!0),this.body=new G$t({read:P});let G=[],q=J&&n.redirect==="follow"&&nXe.has(_);if(M.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!iXe.includes(_)&&!q)for(let ie=M.length-1;ie>=0;--ie){let V=M[ie];if(V==="x-gzip"||V==="gzip")G.push(OI.createGunzip({flush:OI.constants.Z_SYNC_FLUSH,finishFlush:OI.constants.Z_SYNC_FLUSH}));else if(V==="deflate")G.push(F$t({flush:OI.constants.Z_SYNC_FLUSH,finishFlush:OI.constants.Z_SYNC_FLUSH}));else if(V==="br")G.push(OI.createBrotliDecompress({flush:OI.constants.BROTLI_OPERATION_FLUSH,finishFlush:OI.constants.BROTLI_OPERATION_FLUSH}));else{G.length=0;break}}let le=this.onError.bind(this);return x({status:_,statusText:N,headersList:se,body:G.length?j$t(this.body,...G,ie=>{ie&&this.onError(ie)}).on("error",le):this.body.on("error",le)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),b(_)},onUpgrade(_,k,P){if(_!==101)return;let N=new JJe;for(let M=0;M<k.length;M+=2)N.append(eXe(k[M]),k[M+1].toString("latin1"),!0);return x({status:_,statusText:ezt[_],headersList:N,socket:P}),!0}}))}s(h,"dispatch")}s(azt,"httpNetworkFetch");dXe.exports={fetch:izt,Fetch:uX,fetching:aXe,finalizeAndReportTiming:oXe}});var w1e=Q((GKn,fXe)=>{"use strict";d();fXe.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var mXe=Q((VKn,pXe)=>{"use strict";d();var{webidl:ep}=gu(),dX=Symbol("ProgressEvent state"),_1e=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=ep.converters.DOMString(e,"ProgressEvent constructor","type"),r=ep.converters.ProgressEventInit(r??{}),super(e,r),this[dX]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return ep.brandCheck(this,t),this[dX].lengthComputable}get loaded(){return ep.brandCheck(this,t),this[dX].loaded}get total(){return ep.brandCheck(this,t),this[dX].total}};ep.converters.ProgressEventInit=ep.dictionaryConverter([{key:"lengthComputable",converter:ep.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:ep.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:ep.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:ep.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:ep.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:ep.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);pXe.exports={ProgressEvent:_1e}});var gXe=Q((YKn,hXe)=>{"use strict";d();function czt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(czt,"getEncoding");hXe.exports={getEncoding:czt}});var IXe=Q((XKn,bXe)=>{"use strict";d();var{kState:EB,kError:S1e,kResult:AXe,kAborted:KF,kLastProgressEventFired:R1e}=w1e(),{ProgressEvent:lzt}=mXe(),{getEncoding:yXe}=gXe(),{serializeAMimeType:uzt,parseMIMEType:CXe}=Mf(),{types:dzt}=require("node:util"),{StringDecoder:EXe}=require("string_decoder"),{btoa:vXe}=require("node:buffer"),fzt={enumerable:!0,writable:!1,configurable:!1};function pzt(t,e,r,n){if(t[EB]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[EB]="loading",t[AXe]=null,t[S1e]=null;let o=e.stream().getReader(),a=[],c=o.read(),l=!0;(async()=>{for(;!t[KF];)try{let{done:u,value:f}=await c;if(l&&!t[KF]&&queueMicrotask(()=>{QI("loadstart",t)}),l=!1,!u&&dzt.isUint8Array(f))a.push(f),(t[R1e]===void 0||Date.now()-t[R1e]>=50)&&!t[KF]&&(t[R1e]=Date.now(),queueMicrotask(()=>{QI("progress",t)})),c=o.read();else if(u){queueMicrotask(()=>{t[EB]="done";try{let p=mzt(a,r,e.type,n);if(t[KF])return;t[AXe]=p,QI("load",t)}catch(p){t[S1e]=p,QI("error",t)}t[EB]!=="loading"&&QI("loadend",t)});break}}catch(u){if(t[KF])return;queueMicrotask(()=>{t[EB]="done",t[S1e]=u,QI("error",t),t[EB]!=="loading"&&QI("loadend",t)});break}})()}s(pzt,"readOperation");function QI(t,e){let r=new lzt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(QI,"fireAProgressEvent");function mzt(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=CXe(r||"application/octet-stream");o!=="failure"&&(i+=uzt(o)),i+=";base64,";let a=new EXe("latin1");for(let c of t)i+=vXe(a.write(c));return i+=vXe(a.end()),i}case"Text":{let i="failure";if(n&&(i=yXe(n)),i==="failure"&&r){let o=CXe(r);o!=="failure"&&(i=yXe(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),hzt(t,i)}case"ArrayBuffer":return xXe(t).buffer;case"BinaryString":{let i="",o=new EXe("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(mzt,"packageData");function hzt(t,e){let r=xXe(t),n=gzt(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(hzt,"decode");function gzt(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(gzt,"BOMSniffing");function xXe(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(xXe,"combineByteSequences");bXe.exports={staticPropertyDescriptors:fzt,readOperation:pzt,fireAProgressEvent:QI}});var SXe=Q((tJn,_Xe)=>{"use strict";d();var{staticPropertyDescriptors:vB,readOperation:fX,fireAProgressEvent:TXe}=IXe(),{kState:U2,kError:wXe,kResult:pX,kEvents:Mo,kAborted:Azt}=w1e(),{webidl:is}=gu(),{kEnumerableProperty:Qf}=Pi(),Sg=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[U2]="empty",this[pX]=null,this[wXe]=null,this[Mo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=is.converters.Blob(e,{strict:!1}),fX(this,e,"ArrayBuffer")}readAsBinaryString(e){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=is.converters.Blob(e,{strict:!1}),fX(this,e,"BinaryString")}readAsText(e,r=void 0){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=is.converters.Blob(e,{strict:!1}),r!==void 0&&(r=is.converters.DOMString(r,"FileReader.readAsText","encoding")),fX(this,e,"Text",r)}readAsDataURL(e){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=is.converters.Blob(e,{strict:!1}),fX(this,e,"DataURL")}abort(){if(this[U2]==="empty"||this[U2]==="done"){this[pX]=null;return}this[U2]==="loading"&&(this[U2]="done",this[pX]=null),this[Azt]=!0,TXe("abort",this),this[U2]!=="loading"&&TXe("loadend",this)}get readyState(){switch(is.brandCheck(this,t),this[U2]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return is.brandCheck(this,t),this[pX]}get error(){return is.brandCheck(this,t),this[wXe]}get onloadend(){return is.brandCheck(this,t),this[Mo].loadend}set onloadend(e){is.brandCheck(this,t),this[Mo].loadend&&this.removeEventListener("loadend",this[Mo].loadend),typeof e=="function"?(this[Mo].loadend=e,this.addEventListener("loadend",e)):this[Mo].loadend=null}get onerror(){return is.brandCheck(this,t),this[Mo].error}set onerror(e){is.brandCheck(this,t),this[Mo].error&&this.removeEventListener("error",this[Mo].error),typeof e=="function"?(this[Mo].error=e,this.addEventListener("error",e)):this[Mo].error=null}get onloadstart(){return is.brandCheck(this,t),this[Mo].loadstart}set onloadstart(e){is.brandCheck(this,t),this[Mo].loadstart&&this.removeEventListener("loadstart",this[Mo].loadstart),typeof e=="function"?(this[Mo].loadstart=e,this.addEventListener("loadstart",e)):this[Mo].loadstart=null}get onprogress(){return is.brandCheck(this,t),this[Mo].progress}set onprogress(e){is.brandCheck(this,t),this[Mo].progress&&this.removeEventListener("progress",this[Mo].progress),typeof e=="function"?(this[Mo].progress=e,this.addEventListener("progress",e)):this[Mo].progress=null}get onload(){return is.brandCheck(this,t),this[Mo].load}set onload(e){is.brandCheck(this,t),this[Mo].load&&this.removeEventListener("load",this[Mo].load),typeof e=="function"?(this[Mo].load=e,this.addEventListener("load",e)):this[Mo].load=null}get onabort(){return is.brandCheck(this,t),this[Mo].abort}set onabort(e){is.brandCheck(this,t),this[Mo].abort&&this.removeEventListener("abort",this[Mo].abort),typeof e=="function"?(this[Mo].abort=e,this.addEventListener("abort",e)):this[Mo].abort=null}};Sg.EMPTY=Sg.prototype.EMPTY=0;Sg.LOADING=Sg.prototype.LOADING=1;Sg.DONE=Sg.prototype.DONE=2;Object.defineProperties(Sg.prototype,{EMPTY:vB,LOADING:vB,DONE:vB,readAsArrayBuffer:Qf,readAsBinaryString:Qf,readAsText:Qf,readAsDataURL:Qf,abort:Qf,readyState:Qf,result:Qf,error:Qf,onloadstart:Qf,onprogress:Qf,onload:Qf,onabort:Qf,onerror:Qf,onloadend:Qf,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Sg,{EMPTY:vB,LOADING:vB,DONE:vB});_Xe.exports={FileReader:Sg}});var mX=Q((iJn,RXe)=>{"use strict";d();RXe.exports={kConstruct:pa().kConstruct}});var BXe=Q((sJn,PXe)=>{"use strict";d();var yzt=require("node:assert"),{URLSerializer:kXe}=Mf(),{isValidHeaderName:Czt}=z0();function Ezt(t,e,r=!1){let n=kXe(t,r),i=kXe(e,r);return n===i}s(Ezt,"urlEquals");function vzt(t){yzt(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),Czt(r)&&e.push(r);return e}s(vzt,"getFieldValues");PXe.exports={urlEquals:Ezt,getFieldValues:vzt}});var LXe=Q((lJn,NXe)=>{"use strict";d();var{kConstruct:xzt}=mX(),{urlEquals:bzt,getFieldValues:k1e}=BXe(),{kEnumerableProperty:q2,isDisturbed:Izt}=Pi(),{webidl:nn}=gu(),{Response:Tzt,cloneResponse:wzt,fromInnerResponse:_zt}=$F(),{Request:SE,fromInnerRequest:Szt}=CB(),{kState:Rg}=wI(),{fetching:Rzt}=YF(),{urlIsHttpHttpsScheme:hX,createDeferredPromise:xB,readAllBytes:kzt}=z0(),P1e=require("node:assert"),gX=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==xzt&&nn.illegalConstructor(),nn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){nn.brandCheck(this,t);let n="Cache.match";nn.argumentLengthCheck(arguments,1,n),e=nn.converters.RequestInfo(e,n,"request"),r=nn.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){nn.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=nn.converters.RequestInfo(e,n,"request")),r=nn.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){nn.brandCheck(this,t);let r="Cache.add";nn.argumentLengthCheck(arguments,1,r),e=nn.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){nn.brandCheck(this,t);let r="Cache.addAll";nn.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw nn.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=nn.converters.RequestInfo(m),typeof m=="string")continue;let h=m[Rg];if(!hX(h.url)||h.method!=="GET")throw nn.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new SE(m)[Rg];if(!hX(h.url))throw nn.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=xB();o.push(Rzt({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(nn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let E=k1e(y.headersList.get("vary"));for(let x of E)if(x==="*"){g.reject(nn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let b of o)b.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),n.push(g.promise)}let c=await Promise.all(n),l=[],u=0;for(let m of c){let h={type:"put",request:i[u],response:m};l.push(h),u++}let f=xB(),p=null;try{this.#t(l)}catch(m){p=m}return queueMicrotask(()=>{p===null?f.resolve(void 0):f.reject(p)}),f.promise}async put(e,r){nn.brandCheck(this,t);let n="Cache.put";nn.argumentLengthCheck(arguments,2,n),e=nn.converters.RequestInfo(e,n,"request"),r=nn.converters.Response(r,n,"response");let i=null;if(e instanceof SE?i=e[Rg]:i=new SE(e)[Rg],!hX(i.url)||i.method!=="GET")throw nn.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[Rg];if(o.status===206)throw nn.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=k1e(o.headersList.get("vary"));for(let g of h)if(g==="*")throw nn.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(Izt(o.body.stream)||o.body.stream.locked))throw nn.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=wzt(o),c=xB();if(o.body!=null){let g=o.body.stream.getReader();kzt(g).then(c.resolve,c.reject)}else c.resolve(void 0);let l=[],u={type:"put",request:i,response:a};l.push(u);let f=await c.promise;a.body!=null&&(a.body.source=f);let p=xB(),m=null;try{this.#t(l)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){nn.brandCheck(this,t);let n="Cache.delete";nn.argumentLengthCheck(arguments,1,n),e=nn.converters.RequestInfo(e,n,"request"),r=nn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof SE){if(i=e[Rg],i.method!=="GET"&&!r.ignoreMethod)return!1}else P1e(typeof e=="string"),i=new SE(e)[Rg];let o=[],a={type:"delete",request:i,options:r};o.push(a);let c=xB(),l=null,u;try{u=this.#t(o)}catch(f){l=f}return queueMicrotask(()=>{l===null?c.resolve(!!u?.length):c.reject(l)}),c.promise}async keys(e=void 0,r={}){nn.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=nn.converters.RequestInfo(e,n,"request")),r=nn.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof SE){if(i=e[Rg],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new SE(e)[Rg]);let o=xB(),a=[];if(e===void 0)for(let c of this.#e)a.push(c[0]);else{let c=this.#i(i,r);for(let l of c)a.push(l[0])}return queueMicrotask(()=>{let c=[];for(let l of a){let u=Szt(l,new AbortController().signal,"immutable");c.push(u)}o.resolve(Object.freeze(c))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw nn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw nn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let c;if(a.type==="delete"){if(c=this.#i(a.request,a.options),c.length===0)return[];for(let l of c){let u=r.indexOf(l);P1e(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw nn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=a.request;if(!hX(l.url))throw nn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw nn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw nn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});c=this.#i(a.request);for(let u of c){let f=r.indexOf(u);P1e(f!==-1),r.splice(f,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[c,l]=a;this.#n(e,c,l,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!bzt(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let c=k1e(n.headersList.get("vary"));for(let l of c){if(l==="*")return!1;let u=r.headersList.get(l),f=e.headersList.get(l);if(u!==f)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof SE){if(i=e[Rg],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new SE(e)[Rg]);let o=[];if(e===void 0)for(let c of this.#e)o.push(c[1]);else{let c=this.#i(i,r);for(let l of c)o.push(l[1])}let a=[];for(let c of o){let l=_zt(c,"immutable");if(a.push(l.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(gX.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:q2,matchAll:q2,add:q2,addAll:q2,put:q2,delete:q2,keys:q2});var DXe=[{key:"ignoreSearch",converter:nn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:nn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:nn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];nn.converters.CacheQueryOptions=nn.dictionaryConverter(DXe);nn.converters.MultiCacheQueryOptions=nn.dictionaryConverter([...DXe,{key:"cacheName",converter:nn.converters.DOMString}]);nn.converters.Response=nn.interfaceConverter(Tzt);nn.converters["sequence<RequestInfo>"]=nn.sequenceConverter(nn.converters.RequestInfo);NXe.exports={Cache:gX}});var FXe=Q((fJn,MXe)=>{"use strict";d();var{kConstruct:JF}=mX(),{Cache:AX}=LXe(),{webidl:Xu}=gu(),{kEnumerableProperty:XF}=Pi(),yX=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==JF&&Xu.illegalConstructor(),Xu.util.markAsUncloneable(this)}async match(e,r={}){if(Xu.brandCheck(this,t),Xu.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=Xu.converters.RequestInfo(e),r=Xu.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new AX(JF,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new AX(JF,n).match(e,r);if(o!==void 0)return o}}async has(e){Xu.brandCheck(this,t);let r="CacheStorage.has";return Xu.argumentLengthCheck(arguments,1,r),e=Xu.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){Xu.brandCheck(this,t);let r="CacheStorage.open";if(Xu.argumentLengthCheck(arguments,1,r),e=Xu.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new AX(JF,i)}let n=[];return this.#e.set(e,n),new AX(JF,n)}async delete(e){Xu.brandCheck(this,t);let r="CacheStorage.delete";return Xu.argumentLengthCheck(arguments,1,r),e=Xu.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return Xu.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(yX.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:XF,has:XF,open:XF,delete:XF,keys:XF});MXe.exports={CacheStorage:yX}});var QXe=Q((hJn,OXe)=>{"use strict";d();OXe.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var B1e=Q((AJn,GXe)=>{"use strict";d();function Pzt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(Pzt,"isCTLExcludingHtab");function UXe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(UXe,"validateCookieName");function qXe(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(qXe,"validateCookieValue");function HXe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(HXe,"validateCookiePath");function Bzt(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(Bzt,"validateCookieDomain");var Dzt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Nzt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CX=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function WXe(t){return typeof t=="number"&&(t=new Date(t)),`${Dzt[t.getUTCDay()]}, ${CX[t.getUTCDate()]} ${Nzt[t.getUTCMonth()]} ${t.getUTCFullYear()} ${CX[t.getUTCHours()]}:${CX[t.getUTCMinutes()]}:${CX[t.getUTCSeconds()]} GMT`}s(WXe,"toIMFDate");function Lzt(t){if(t<0)throw new Error("Invalid cookie max-age")}s(Lzt,"validateCookieMaxAge");function Mzt(t){if(t.name.length===0)return null;UXe(t.name),qXe(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(Lzt(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(Bzt(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(HXe(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${WXe(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(Mzt,"stringify");GXe.exports={isCTLExcludingHtab:Pzt,validateCookieName:UXe,validateCookiePath:HXe,validateCookieValue:qXe,toIMFDate:WXe,stringify:Mzt}});var VXe=Q((EJn,jXe)=>{"use strict";d();var{maxNameValuePairSize:Fzt,maxAttributeValueSize:Ozt}=QXe(),{isCTLExcludingHtab:Qzt}=B1e(),{collectASequenceOfCodePointsFast:EX}=Mf(),Uzt=require("node:assert");function qzt(t){if(Qzt(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=EX(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=EX("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>Fzt?null:{name:n,value:i,...bB(r)}}s(qzt,"parseSetCookie");function bB(t,e={}){if(t.length===0)return e;Uzt(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=EX(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=EX("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>Ozt)return bB(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return bB(t,e);let c=Number(i);e.maxAge=c}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",c=i.toLowerCase();c.includes("none")&&(a="None"),c.includes("strict")&&(a="Strict"),c.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return bB(t,e)}s(bB,"parseUnparsedAttributes");jXe.exports={parseSetCookie:qzt,parseUnparsedAttributes:bB}});var YXe=Q((bJn,zXe)=>{"use strict";d();var{parseSetCookie:Hzt}=VXe(),{stringify:Wzt}=B1e(),{webidl:Zi}=gu(),{Headers:vX}=M2();function Gzt(t){Zi.argumentLengthCheck(arguments,1,"getCookies"),Zi.brandCheck(t,vX,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(Gzt,"getCookies");function jzt(t,e,r){Zi.brandCheck(t,vX,{strict:!1});let n="deleteCookie";Zi.argumentLengthCheck(arguments,2,n),e=Zi.converters.DOMString(e,n,"name"),r=Zi.converters.DeleteCookieAttributes(r),$Xe(t,{name:e,value:"",expires:new Date(0),...r})}s(jzt,"deleteCookie");function Vzt(t){Zi.argumentLengthCheck(arguments,1,"getSetCookies"),Zi.brandCheck(t,vX,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>Hzt(r)):[]}s(Vzt,"getSetCookies");function $Xe(t,e){Zi.argumentLengthCheck(arguments,2,"setCookie"),Zi.brandCheck(t,vX,{strict:!1}),e=Zi.converters.Cookie(e);let r=Wzt(e);r&&t.append("Set-Cookie",r)}s($Xe,"setCookie");Zi.converters.DeleteCookieAttributes=Zi.dictionaryConverter([{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Zi.converters.Cookie=Zi.dictionaryConverter([{converter:Zi.converters.DOMString,key:"name"},{converter:Zi.converters.DOMString,key:"value"},{converter:Zi.nullableConverter(t=>typeof t=="number"?Zi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Zi.sequenceConverter(Zi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);zXe.exports={getCookies:Gzt,deleteCookie:jzt,getSetCookies:Vzt,setCookie:$Xe}});var TB=Q((wJn,JXe)=>{"use strict";d();var{webidl:Kr}=gu(),{kEnumerableProperty:Uf}=Pi(),{kConstruct:KXe}=pa(),{MessagePort:$zt}=require("node:worker_threads"),IB=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===KXe){super(arguments[1],arguments[2]),Kr.util.markAsUncloneable(this);return}let n="MessageEvent constructor";Kr.argumentLengthCheck(arguments,1,n),e=Kr.converters.DOMString(e,n,"type"),r=Kr.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,Kr.util.markAsUncloneable(this)}get data(){return Kr.brandCheck(this,t),this.#e.data}get origin(){return Kr.brandCheck(this,t),this.#e.origin}get lastEventId(){return Kr.brandCheck(this,t),this.#e.lastEventId}get source(){return Kr.brandCheck(this,t),this.#e.source}get ports(){return Kr.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",c=null,l=[]){return Kr.brandCheck(this,t),Kr.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:c,ports:l})}static createFastMessageEvent(e,r){let n=new t(KXe,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:zzt}=IB;delete IB.createFastMessageEvent;var xX=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";Kr.argumentLengthCheck(arguments,1,n),e=Kr.converters.DOMString(e,n,"type"),r=Kr.converters.CloseEventInit(r),super(e,r),this.#e=r,Kr.util.markAsUncloneable(this)}get wasClean(){return Kr.brandCheck(this,t),this.#e.wasClean}get code(){return Kr.brandCheck(this,t),this.#e.code}get reason(){return Kr.brandCheck(this,t),this.#e.reason}},bX=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";Kr.argumentLengthCheck(arguments,1,n),super(e,r),Kr.util.markAsUncloneable(this),e=Kr.converters.DOMString(e,n,"type"),r=Kr.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return Kr.brandCheck(this,t),this.#e.message}get filename(){return Kr.brandCheck(this,t),this.#e.filename}get lineno(){return Kr.brandCheck(this,t),this.#e.lineno}get colno(){return Kr.brandCheck(this,t),this.#e.colno}get error(){return Kr.brandCheck(this,t),this.#e.error}};Object.defineProperties(IB.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:Uf,origin:Uf,lastEventId:Uf,source:Uf,ports:Uf,initMessageEvent:Uf});Object.defineProperties(xX.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:Uf,code:Uf,wasClean:Uf});Object.defineProperties(bX.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:Uf,filename:Uf,lineno:Uf,colno:Uf,error:Uf});Kr.converters.MessagePort=Kr.interfaceConverter($zt);Kr.converters["sequence<MessagePort>"]=Kr.sequenceConverter(Kr.converters.MessagePort);var D1e=[{key:"bubbles",converter:Kr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Kr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Kr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Kr.converters.MessageEventInit=Kr.dictionaryConverter([...D1e,{key:"data",converter:Kr.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:Kr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:Kr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:Kr.nullableConverter(Kr.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:Kr.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);Kr.converters.CloseEventInit=Kr.dictionaryConverter([...D1e,{key:"wasClean",converter:Kr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:Kr.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:Kr.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);Kr.converters.ErrorEventInit=Kr.dictionaryConverter([...D1e,{key:"message",converter:Kr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:Kr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:Kr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:Kr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:Kr.converters.any}]);JXe.exports={MessageEvent:IB,CloseEvent:xX,ErrorEvent:bX,createFastMessageEvent:zzt}});var H2=Q((RJn,XXe)=>{"use strict";d();var Yzt="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",Kzt={enumerable:!0,writable:!1,configurable:!1},Jzt={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},Xzt={NOT_SENT:0,PROCESSING:1,SENT:2},Zzt={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},eYt=2**16-1,tYt={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},rYt=Buffer.allocUnsafe(0),nYt={string:1,typedArray:2,arrayBuffer:3,blob:4};XXe.exports={uid:Yzt,sentCloseFrameState:Xzt,staticPropertyDescriptors:Kzt,states:Jzt,opcodes:Zzt,maxUnsigned16Bit:eYt,parserStates:tYt,emptyBuffer:rYt,sendHints:nYt}});var ZF=Q((PJn,ZXe)=>{"use strict";d();ZXe.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var rO=Q((DJn,cZe)=>{"use strict";d();var{kReadyState:eO,kController:iYt,kResponse:oYt,kBinaryType:sYt,kWebSocketURL:aYt}=ZF(),{states:tO,opcodes:UI}=H2(),{ErrorEvent:cYt,createFastMessageEvent:lYt}=TB(),{isUtf8:uYt}=require("node:buffer"),{collectASequenceOfCodePointsFast:dYt,removeHTTPWhitespace:eZe}=Mf();function fYt(t){return t[eO]===tO.CONNECTING}s(fYt,"isConnecting");function pYt(t){return t[eO]===tO.OPEN}s(pYt,"isEstablished");function mYt(t){return t[eO]===tO.CLOSING}s(mYt,"isClosing");function hYt(t){return t[eO]===tO.CLOSED}s(hYt,"isClosed");function N1e(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(N1e,"fireEvent");function gYt(t,e,r){if(t[eO]!==tO.OPEN)return;let n;if(e===UI.TEXT)try{n=aZe(r)}catch{rZe(t,"Received invalid UTF-8 in text frame.");return}else e===UI.BINARY&&(t[sYt]==="blob"?n=new Blob([r]):n=AYt(r));N1e("message",t,lYt,{origin:t[aYt].origin,data:n})}s(gYt,"websocketMessageReceived");function AYt(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(AYt,"toArrayBuffer");function yYt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(yYt,"isValidSubprotocol");function CYt(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(CYt,"isValidStatusCode");function rZe(t,e){let{[iYt]:r,[oYt]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&N1e("error",t,(i,o)=>new cYt(i,o),{error:new Error(e),message:e})}s(rZe,"failWebsocketConnection");function nZe(t){return t===UI.CLOSE||t===UI.PING||t===UI.PONG}s(nZe,"isControlFrame");function iZe(t){return t===UI.CONTINUATION}s(iZe,"isContinuationFrame");function oZe(t){return t===UI.TEXT||t===UI.BINARY}s(oZe,"isTextBinaryFrame");function EYt(t){return oZe(t)||iZe(t)||nZe(t)}s(EYt,"isValidOpcode");function vYt(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=dYt(";",t,e),[i,o=""]=n.split("=");r.set(eZe(i,!0,!1),eZe(o,!1,!0)),e.position++}return r}s(vYt,"parseExtensions");function xYt(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(xYt,"isValidClientWindowBits");var sZe=typeof process.versions.icu=="string",tZe=sZe?new TextDecoder("utf-8",{fatal:!0}):void 0,aZe=sZe?tZe.decode.bind(tZe):function(t){if(uYt(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};cZe.exports={isConnecting:fYt,isEstablished:pYt,isClosing:mYt,isClosed:hYt,fireEvent:N1e,isValidSubprotocol:yYt,isValidStatusCode:CYt,failWebsocketConnection:rZe,websocketMessageReceived:gYt,utf8Decode:aZe,isControlFrame:nZe,isContinuationFrame:iZe,isTextBinaryFrame:oZe,isValidOpcode:EYt,parseExtensions:vYt,isValidClientWindowBits:xYt}});var TX=Q((MJn,lZe)=>{"use strict";d();var{maxUnsigned16Bit:bYt}=H2(),IX=16386,L1e,nO=null,wB=IX;try{L1e=require("node:crypto")}catch{L1e={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function IYt(){return wB===IX&&(wB=0,L1e.randomFillSync(nO??=Buffer.allocUnsafe(IX),0,IX)),[nO[wB++],nO[wB++],nO[wB++],nO[wB++]]}s(IYt,"generateMask");var M1e=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=IYt(),i=r?.byteLength??0,o=i,a=6;i>bYt?(a+=8,o=127):i>125&&(a+=2,o=126);let c=Buffer.allocUnsafe(i+a);c[0]=c[1]=0,c[0]|=128,c[0]=(c[0]&240)+e;c[a-4]=n[0],c[a-3]=n[1],c[a-2]=n[2],c[a-1]=n[3],c[1]=o,o===126?c.writeUInt16BE(i,2):o===127&&(c[2]=c[3]=0,c.writeUIntBE(i,4,6)),c[1]|=128;for(let l=0;l<i;++l)c[a+l]=r[l]^n[l&3];return c}};lZe.exports={WebsocketFrameSend:M1e}});var O1e=Q((QJn,gZe)=>{"use strict";d();var{uid:TYt,states:iO,sentCloseFrameState:wX,emptyBuffer:wYt,opcodes:_Yt}=H2(),{kReadyState:oO,kSentClose:_X,kByteParser:dZe,kReceivedClose:uZe,kResponse:fZe}=ZF(),{fireEvent:SYt,failWebsocketConnection:qI,isClosing:RYt,isClosed:kYt,isEstablished:PYt,parseExtensions:BYt}=rO(),{channels:_B}=U3(),{CloseEvent:DYt}=TB(),{makeRequest:NYt}=CB(),{fetching:LYt}=YF(),{Headers:MYt,getHeadersList:FYt}=M2(),{getDecodeSplit:OYt}=z0(),{WebsocketFrameSend:QYt}=TX(),F1e;try{F1e=require("node:crypto")}catch{}function UYt(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let c=NYt({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=FYt(new MYt(o.headers));c.headersList=p}let l=F1e.randomBytes(16).toString("base64");c.headersList.append("sec-websocket-key",l),c.headersList.append("sec-websocket-version","13");for(let p of e)c.headersList.append("sec-websocket-protocol",p);return c.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),LYt({request:c,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){qI(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){qI(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){qI(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){qI(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=F1e.createHash("sha1").update(l+TYt).digest("base64");if(m!==h){qI(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=BYt(g),!y.has("permessage-deflate"))){qI(n,"Sec-WebSocket-Extensions header does not match.");return}let E=p.headersList.get("Sec-WebSocket-Protocol");if(E!==null&&!OYt("sec-websocket-protocol",c.headersList).includes(E)){qI(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",pZe),p.socket.on("close",mZe),p.socket.on("error",hZe),_B.open.hasSubscribers&&_B.open.publish({address:p.socket.address(),protocol:E,extensions:g}),i(p,y)}})}s(UYt,"establishWebSocketConnection");function qYt(t,e,r,n){if(!(RYt(t)||kYt(t)))if(!PYt(t))qI(t,"Connection was closed before it was established."),t[oO]=iO.CLOSING;else if(t[_X]===wX.NOT_SENT){t[_X]=wX.PROCESSING;let i=new QYt;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=wYt,t[fZe].socket.write(i.createFrame(_Yt.CLOSE)),t[_X]=wX.SENT,t[oO]=iO.CLOSING}else t[oO]=iO.CLOSING}s(qYt,"closeWebSocketConnection");function pZe(t){this.ws[dZe].write(t)||this.pause()}s(pZe,"onSocketData");function mZe(){let{ws:t}=this,{[fZe]:e}=t;e.socket.off("data",pZe),e.socket.off("close",mZe),e.socket.off("error",hZe);let r=t[_X]===wX.SENT&&t[uZe],n=1005,i="",o=t[dZe].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[uZe]||(n=1006),t[oO]=iO.CLOSED,SYt("close",t,(a,c)=>new DYt(a,c),{wasClean:r,code:n,reason:i}),_B.close.hasSubscribers&&_B.close.publish({websocket:t,code:n,reason:i})}s(mZe,"onSocketClose");function hZe(t){let{ws:e}=this;e[oO]=iO.CLOSING,_B.socketError.hasSubscribers&&_B.socketError.publish(t),this.destroy()}s(hZe,"onSocketError");gZe.exports={establishWebSocketConnection:UYt,closeWebSocketConnection:qYt}});var yZe=Q((HJn,AZe)=>{"use strict";d();var{createInflateRaw:HYt,Z_DEFAULT_WINDOWBITS:WYt}=require("node:zlib"),{isValidClientWindowBits:GYt}=rO(),jYt=Buffer.from([0,0,255,255]),SX=Symbol("kBuffer"),RX=Symbol("kLength"),Q1e=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=WYt;if(this.#t.serverMaxWindowBits){if(!GYt(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=HYt({windowBits:i}),this.#e[SX]=[],this.#e[RX]=0,this.#e.on("data",o=>{this.#e[SX].push(o),this.#e[RX]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(jYt),this.#e.flush(()=>{let i=Buffer.concat(this.#e[SX],this.#e[RX]);this.#e[SX].length=0,this.#e[RX]=0,n(null,i)})}};AZe.exports={PerMessageDeflate:Q1e}});var RZe=Q((jJn,SZe)=>{"use strict";d();var{Writable:VYt}=require("node:stream"),$Yt=require("node:assert"),{parserStates:qf,opcodes:SB,states:zYt,emptyBuffer:CZe,sentCloseFrameState:EZe}=H2(),{kReadyState:YYt,kSentClose:vZe,kResponse:xZe,kReceivedClose:bZe}=ZF(),{channels:kX}=U3(),{isValidStatusCode:KYt,isValidOpcode:JYt,failWebsocketConnection:Qm,websocketMessageReceived:IZe,utf8Decode:XYt,isControlFrame:TZe,isTextBinaryFrame:U1e,isContinuationFrame:ZYt}=rO(),{WebsocketFrameSend:wZe}=TX(),{closeWebSocketConnection:_Ze}=O1e(),{PerMessageDeflate:eKt}=yZe(),q1e=class extends VYt{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=qf.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new eKt(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===qf.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==SB.CONTINUATION,c=r[1]&127,l=r[0]&64,u=r[0]&32,f=r[0]&16;if(!JYt(i))return Qm(this.ws,"Invalid opcode received"),e();if(o)return Qm(this.ws,"Frame cannot be masked"),e();if(l!==0&&!this.#s.has("permessage-deflate")){Qm(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||f!==0){Qm(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!U1e(i)){Qm(this.ws,"Invalid frame type was fragmented.");return}if(U1e(i)&&this.#o.length>0){Qm(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){Qm(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((c>125||a)&&TZe(i)){Qm(this.ws,"Control frame either too large or fragmented");return}if(ZYt(i)&&this.#o.length===0&&!this.#r.compressed){Qm(this.ws,"Unexpected continuation frame");return}c<=125?(this.#r.payloadLength=c,this.#n=qf.READ_DATA):c===126?this.#n=qf.PAYLOADLENGTH_16:c===127&&(this.#n=qf.PAYLOADLENGTH_64),U1e(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===qf.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=qf.READ_DATA}else if(this.#n===qf.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){Qm(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=qf.READ_DATA}else if(this.#n===qf.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(TZe(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=qf.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){_Ze(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=qf.INFO,this.#i=!0,this.run(e);return}IZe(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=qf.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);IZe(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=qf.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return CZe;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){$Yt(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!KYt(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=XYt(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===SB.CLOSE){if(n===1)return Qm(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return _Ze(this.ws,i,o,o.length),Qm(this.ws,o),!1}if(this.ws[vZe]!==EZe.SENT){let i=CZe;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new wZe(i);this.ws[xZe].socket.write(o.createFrame(SB.CLOSE),a=>{a||(this.ws[vZe]=EZe.SENT)})}return this.ws[YYt]=zYt.CLOSING,this.ws[bZe]=!0,!1}else if(r===SB.PING){if(!this.ws[bZe]){let i=new wZe(e);this.ws[xZe].socket.write(i.createFrame(SB.PONG)),kX.ping.hasSubscribers&&kX.ping.publish({payload:e})}}else r===SB.PONG&&kX.pong.hasSubscribers&&kX.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};SZe.exports={ByteParser:q1e}});var NZe=Q((zJn,DZe)=>{"use strict";d();var{WebsocketFrameSend:tKt}=TX(),{opcodes:kZe,sendHints:RB}=H2(),rKt=Zye(),PZe=Buffer[Symbol.species],H1e=class{static{s(this,"SendQueue")}#e=new rKt;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==RB.blob){let o=BZe(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=BZe(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function BZe(t,e){return new tKt(nKt(t,e)).createFrame(e===RB.string?kZe.TEXT:kZe.BINARY)}s(BZe,"createFrame");function nKt(t,e){switch(e){case RB.string:return Buffer.from(t);case RB.arrayBuffer:case RB.blob:return new PZe(t);case RB.typedArray:return new PZe(t.buffer,t.byteOffset,t.byteLength)}}s(nKt,"toBuffer");DZe.exports={SendQueue:H1e}});var WZe=Q((JJn,HZe)=>{"use strict";d();var{webidl:Vn}=gu(),{URLSerializer:iKt}=Mf(),{environmentSettingsObject:LZe}=z0(),{staticPropertyDescriptors:HI,states:sO,sentCloseFrameState:oKt,sendHints:PX}=H2(),{kWebSocketURL:MZe,kReadyState:W1e,kController:sKt,kBinaryType:BX,kResponse:FZe,kSentClose:aKt,kByteParser:cKt}=ZF(),{isConnecting:lKt,isEstablished:uKt,isClosing:dKt,isValidSubprotocol:fKt,fireEvent:OZe}=rO(),{establishWebSocketConnection:pKt,closeWebSocketConnection:QZe}=O1e(),{ByteParser:mKt}=RZe(),{kEnumerableProperty:Um,isBlobLike:UZe}=Pi(),{getGlobalDispatcher:hKt}=VJ(),{types:qZe}=require("node:util"),{ErrorEvent:gKt,CloseEvent:AKt}=TB(),{SendQueue:yKt}=NZe(),tp=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),Vn.util.markAsUncloneable(this);let n="WebSocket constructor";Vn.argumentLengthCheck(arguments,1,n);let i=Vn.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=Vn.converters.USVString(e,n,"url"),r=i.protocols;let o=LZe.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(l){throw new DOMException(l,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>fKt(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[MZe]=new URL(a.href);let c=LZe.settingsObject;this[sKt]=pKt(a,r,c,this,(l,u)=>this.#o(l,u),i),this[W1e]=t.CONNECTING,this[aKt]=oKt.NOT_SENT,this[BX]="blob"}close(e=void 0,r=void 0){Vn.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=Vn.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=Vn.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");QZe(this,e,r,i)}send(e){Vn.brandCheck(this,t);let r="WebSocket.send";if(Vn.argumentLengthCheck(arguments,1,r),e=Vn.converters.WebSocketSendData(e,r,"data"),lKt(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!uKt(this)||dKt(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},PX.string)}else qZe.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},PX.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},PX.typedArray)):UZe(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},PX.blob))}get readyState(){return Vn.brandCheck(this,t),this[W1e]}get bufferedAmount(){return Vn.brandCheck(this,t),this.#t}get url(){return Vn.brandCheck(this,t),iKt(this[MZe])}get extensions(){return Vn.brandCheck(this,t),this.#n}get protocol(){return Vn.brandCheck(this,t),this.#i}get onopen(){return Vn.brandCheck(this,t),this.#e.open}set onopen(e){Vn.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Vn.brandCheck(this,t),this.#e.error}set onerror(e){Vn.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Vn.brandCheck(this,t),this.#e.close}set onclose(e){Vn.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Vn.brandCheck(this,t),this.#e.message}set onmessage(e){Vn.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Vn.brandCheck(this,t),this[BX]}set binaryType(e){Vn.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[BX]="blob":this[BX]=e}#o(e,r){this[FZe]=e;let n=new mKt(this,r);n.on("drain",CKt),n.on("error",EKt.bind(this)),e.socket.ws=this,this[cKt]=n,this.#r=new yKt(e.socket),this[W1e]=sO.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),OZe("open",this)}};tp.CONNECTING=tp.prototype.CONNECTING=sO.CONNECTING;tp.OPEN=tp.prototype.OPEN=sO.OPEN;tp.CLOSING=tp.prototype.CLOSING=sO.CLOSING;tp.CLOSED=tp.prototype.CLOSED=sO.CLOSED;Object.defineProperties(tp.prototype,{CONNECTING:HI,OPEN:HI,CLOSING:HI,CLOSED:HI,url:Um,readyState:Um,bufferedAmount:Um,onopen:Um,onerror:Um,onclose:Um,close:Um,onmessage:Um,binaryType:Um,send:Um,extensions:Um,protocol:Um,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(tp,{CONNECTING:HI,OPEN:HI,CLOSING:HI,CLOSED:HI});Vn.converters["sequence<DOMString>"]=Vn.sequenceConverter(Vn.converters.DOMString);Vn.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return Vn.util.Type(t)==="Object"&&Symbol.iterator in t?Vn.converters["sequence<DOMString>"](t):Vn.converters.DOMString(t,e,r)};Vn.converters.WebSocketInit=Vn.dictionaryConverter([{key:"protocols",converter:Vn.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Vn.converters.any,defaultValue:s(()=>hKt(),"defaultValue")},{key:"headers",converter:Vn.nullableConverter(Vn.converters.HeadersInit)}]);Vn.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Vn.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Vn.converters.WebSocketInit(t):{protocols:Vn.converters["DOMString or sequence<DOMString>"](t)}};Vn.converters.WebSocketSendData=function(t){if(Vn.util.Type(t)==="Object"){if(UZe(t))return Vn.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||qZe.isArrayBuffer(t))return Vn.converters.BufferSource(t)}return Vn.converters.USVString(t)};function CKt(){this.ws[FZe].socket.resume()}s(CKt,"onParserDrain");function EKt(t){let e,r;t instanceof AKt?(e=t.reason,r=t.code):e=t.message,OZe("error",this,()=>new gKt("error",{error:t,message:e})),QZe(this,r)}s(EKt,"onParserError");HZe.exports={WebSocket:tp}});var G1e=Q((eXn,GZe)=>{"use strict";d();function vKt(t){return t.indexOf("\0")===-1}s(vKt,"isValidLastEventId");function xKt(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(xKt,"isASCIINumber");function bKt(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(bKt,"delay");GZe.exports={isValidLastEventId:vKt,isASCIINumber:xKt,delay:bKt}});var zZe=Q((nXn,$Ze)=>{"use strict";d();var{Transform:IKt}=require("node:stream"),{isASCIINumber:jZe,isValidLastEventId:VZe}=G1e(),RE=[239,187,191],j1e=10,DX=13,TKt=58,wKt=32,V1e=class extends IKt{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===RE[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===RE[0]&&this.buffer[1]===RE[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===RE[0]&&this.buffer[1]===RE[1]&&this.buffer[2]===RE[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===RE[0]&&this.buffer[1]===RE[1]&&this.buffer[2]===RE[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===j1e){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===j1e||this.buffer[this.pos]===DX){this.buffer[this.pos]===DX&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===j1e||this.buffer[this.pos]===DX){this.buffer[this.pos]===DX&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(TKt);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===wKt&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":jZe(o)&&(r[i]=o);break;case"id":VZe(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&jZe(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&VZe(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};$Ze.exports={EventSourceStream:V1e}});var ret=Q((sXn,tet)=>{"use strict";d();var{pipeline:_Kt}=require("node:stream"),{fetching:SKt}=YF(),{makeRequest:RKt}=CB(),{webidl:kE}=gu(),{EventSourceStream:kKt}=zZe(),{parseMIMEType:PKt}=Mf(),{createFastMessageEvent:BKt}=TB(),{isNetworkError:YZe}=$F(),{delay:DKt}=G1e(),{kEnumerableProperty:W2}=Pi(),{environmentSettingsObject:KZe}=z0(),JZe=!1,XZe=3e3,aO=0,ZZe=1,cO=2,NKt="anonymous",LKt="use-credentials",kB=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=aO;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),kE.util.markAsUncloneable(this);let n="EventSource constructor";kE.argumentLengthCheck(arguments,1,n),JZe||(JZe=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=kE.converters.USVString(e,n,"url"),r=kE.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:XZe};let i=KZe,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=o.href;let a=NKt;r.withCredentials&&(a=LKt,this.#i=!0);let c={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};c.client=KZe.settingsObject,c.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],c.cache="no-store",c.initiator="other",c.urlList=[new URL(this.#t)],this.#r=RKt(c),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===cO)return;this.#n=aO;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{YZe(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(YZe(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let i=n.headersList.get("content-type",!0),o=i!==null?PKt(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=ZZe,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let c=new kKt({eventSourceSettings:this.#a,push:s(l=>{this.dispatchEvent(BKt(l.type,l.options))},"push")});_Kt(n.body.stream,c,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=SKt(e)}async#l(){this.#n!==cO&&(this.#n=aO,this.dispatchEvent(new Event("error")),await DKt(this.#a.reconnectionTime),this.#n===aO&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){kE.brandCheck(this,t),this.#n!==cO&&(this.#n=cO,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},eet={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:aO,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:ZZe,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:cO,writable:!1}};Object.defineProperties(kB,eet);Object.defineProperties(kB.prototype,eet);Object.defineProperties(kB.prototype,{close:W2,onerror:W2,onmessage:W2,onopen:W2,readyState:W2,url:W2,withCredentials:W2});kE.converters.EventSourceInitDict=kE.dictionaryConverter([{key:"withCredentials",converter:kE.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:kE.converters.any}]);tet.exports={EventSource:kB,defaultReconnectionTime:XZe}});var set=Q((lXn,Ln)=>{"use strict";d();var MKt=BF(),net=uF(),FKt=sB(),OKt=uYe(),QKt=aB(),UKt=ACe(),qKt=_Ye(),HKt=DYe(),iet=Lo(),LX=Pi(),{InvalidArgumentError:NX}=iet,PB=CKe(),WKt=fF(),GKt=XCe(),jKt=eJe(),VKt=t1e(),$Kt=QCe(),zKt=MJ(),{getGlobalDispatcher:oet,setGlobalDispatcher:YKt}=VJ(),KKt=$J(),JKt=IJ(),XKt=TJ();Object.assign(net.prototype,PB);Ln.exports.Dispatcher=net;Ln.exports.Client=MKt;Ln.exports.Pool=FKt;Ln.exports.BalancedPool=OKt;Ln.exports.Agent=QKt;Ln.exports.ProxyAgent=UKt;Ln.exports.EnvHttpProxyAgent=qKt;Ln.exports.RetryAgent=HKt;Ln.exports.RetryHandler=zKt;Ln.exports.DecoratorHandler=KKt;Ln.exports.RedirectHandler=JKt;Ln.exports.createRedirectInterceptor=XKt;Ln.exports.interceptors={redirect:aJe(),retry:lJe(),dump:dJe(),dns:mJe()};Ln.exports.buildConnector=WKt;Ln.exports.errors=iet;Ln.exports.util={parseHeaders:LX.parseHeaders,headerNameToString:LX.headerNameToString};function lO(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new NX("invalid url");if(r!=null&&typeof r!="object")throw new NX("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new NX("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(LX.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=LX.parseURL(e);let{agent:i,dispatcher:o=oet()}=r;if(i)throw new NX("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(lO,"makeDispatcher");Ln.exports.setGlobalDispatcher=YKt;Ln.exports.getGlobalDispatcher=oet;var ZKt=YF().fetch;Ln.exports.fetch=s(async function(e,r=void 0){try{return await ZKt(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Ln.exports.Headers=M2().Headers;Ln.exports.Response=$F().Response;Ln.exports.Request=CB().Request;Ln.exports.FormData=CF().FormData;Ln.exports.File=globalThis.File??require("node:buffer").File;Ln.exports.FileReader=SXe().FileReader;var{setGlobalOrigin:eJt,getGlobalOrigin:tJt}=yye();Ln.exports.setGlobalOrigin=eJt;Ln.exports.getGlobalOrigin=tJt;var{CacheStorage:rJt}=FXe(),{kConstruct:nJt}=mX();Ln.exports.caches=new rJt(nJt);var{deleteCookie:iJt,getCookies:oJt,getSetCookies:sJt,setCookie:aJt}=YXe();Ln.exports.deleteCookie=iJt;Ln.exports.getCookies=oJt;Ln.exports.getSetCookies=sJt;Ln.exports.setCookie=aJt;var{parseMIMEType:cJt,serializeAMimeType:lJt}=Mf();Ln.exports.parseMIMEType=cJt;Ln.exports.serializeAMimeType=lJt;var{CloseEvent:uJt,ErrorEvent:dJt,MessageEvent:fJt}=TB();Ln.exports.WebSocket=WZe().WebSocket;Ln.exports.CloseEvent=uJt;Ln.exports.ErrorEvent=dJt;Ln.exports.MessageEvent=fJt;Ln.exports.request=lO(PB.request);Ln.exports.stream=lO(PB.stream);Ln.exports.pipeline=lO(PB.pipeline);Ln.exports.connect=lO(PB.connect);Ln.exports.upgrade=lO(PB.upgrade);Ln.exports.MockClient=GKt;Ln.exports.MockPool=VKt;Ln.exports.MockAgent=jKt;Ln.exports.mockErrors=$Kt;var{EventSource:pJt}=ret();Ln.exports.EventSource=pJt});var xi=Q((fXn,aet)=>{d();aet.exports={options:{usePureJavaScript:!1}}});var det=Q((mXn,uet)=>{d();var $1e={};uet.exports=$1e;var cet={};$1e.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=mJt(t,e);else{var i=0,o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;++i){for(var l=0,u=t[i];l<c.length;++l)u+=c[l]<<8,c[l]=u%o,u=u/o|0;for(;u>0;)c.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=e[c[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};$1e.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=cet[e];if(!r){r=cet[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var c=r[t.charCodeAt(n)];if(c===void 0)return;for(var l=0,u=c;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var f=0;t[f]===o&&f<t.length-1;++f)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function mJt(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,c=t.at(r);a<o.length;++a)c+=o[a]<<8,o[a]=c%n,c=c/n|0;for(;c>0;)o.push(c%n),c=c/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}s(mJt,"_encodeWithByteBuffer")});var _o=Q((AXn,het)=>{d();var fet=xi(),pet=det(),Pe=het.exports=fet.util=fet.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Pe.nextTick=process.nextTick,typeof setImmediate=="function"?Pe.setImmediate=setImmediate:Pe.setImmediate=Pe.nextTick;return}if(typeof setImmediate=="function"){Pe.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Pe.nextTick=function(c){return setImmediate(c)};return}if(Pe.setImmediate=function(c){setTimeout(c,0)},typeof window<"u"&&typeof window.postMessage=="function"){let c=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var a=c;s(c,"handler");var t="forge.setImmediate",e=[];Pe.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",c,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Pe.setImmediate;Pe.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}Pe.nextTick=Pe.setImmediate})();Pe.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Pe.globalScope=function(){return Pe.isNodejs?global:typeof self>"u"?window:self}();Pe.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Pe.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Pe.isArrayBufferView=function(t){return t&&Pe.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function uO(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(uO,"_checkBitsParam");Pe.ByteBuffer=z1e;function z1e(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Pe.isArrayBuffer(t)||Pe.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof z1e||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(z1e,"ByteStringBuffer");Pe.ByteStringBuffer=z1e;var hJt=4096;Pe.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>hJt&&(this.data.substr(0,1),this._constructedStringLength=0)};Pe.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Pe.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Pe.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Pe.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Pe.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Pe.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Pe.encodeUtf8(t))};Pe.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Pe.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Pe.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Pe.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Pe.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Pe.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Pe.ByteStringBuffer.prototype.putInt=function(t,e){uO(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Pe.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Pe.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Pe.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Pe.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Pe.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Pe.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Pe.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Pe.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Pe.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Pe.ByteStringBuffer.prototype.getInt=function(t){uO(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Pe.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Pe.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Pe.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Pe.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Pe.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Pe.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Pe.ByteStringBuffer.prototype.copy=function(){var t=Pe.createBuffer(this.data);return t.read=this.read,t};Pe.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Pe.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Pe.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Pe.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Pe.ByteStringBuffer.prototype.toString=function(){return Pe.decodeUtf8(this.bytes())};function gJt(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Pe.isArrayBuffer(t),n=Pe.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(gJt,"DataBuffer");Pe.DataBuffer=gJt;Pe.DataBuffer.prototype.length=function(){return this.write-this.read};Pe.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Pe.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Pe.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Pe.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Pe.DataBuffer.prototype.putBytes=function(t,e){if(Pe.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Pe.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Pe.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Pe.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Pe.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Pe.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Pe.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Pe.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Pe.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Pe.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Pe.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Pe.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Pe.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Pe.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Pe.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Pe.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Pe.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Pe.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Pe.DataBuffer.prototype.putInt=function(t,e){uO(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Pe.DataBuffer.prototype.putSignedInt=function(t,e){return uO(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Pe.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Pe.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Pe.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Pe.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Pe.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Pe.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Pe.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Pe.DataBuffer.prototype.getInt=function(t){uO(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Pe.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Pe.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Pe.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Pe.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Pe.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Pe.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Pe.DataBuffer.prototype.copy=function(){return new Pe.DataBuffer(this)};Pe.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Pe.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Pe.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Pe.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Pe.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Pe.binary.raw.encode(e);if(t==="hex")return Pe.binary.hex.encode(e);if(t==="base64")return Pe.binary.base64.encode(e);if(t==="utf8")return Pe.text.utf8.decode(e);if(t==="utf16")return Pe.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Pe.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Pe.encodeUtf8(t)),new Pe.ByteBuffer(t)};Pe.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Pe.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,c=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),c>=10&&(n+=o,o="",c=0),o+=String.fromCharCode(i),++c;return n+=o,n};Pe.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Pe.bytesToHex=function(t){return Pe.createBuffer(t).toHex()};Pe.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var WI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",GI=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],met="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Pe.encode64=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.length;)i=t.charCodeAt(c++),o=t.charCodeAt(c++),a=t.charCodeAt(c++),r+=WI.charAt(i>>2),r+=WI.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=WI.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":WI.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Pe.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=GI[t.charCodeAt(a++)-43],n=GI[t.charCodeAt(a++)-43],i=GI[t.charCodeAt(a++)-43],o=GI[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Pe.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Pe.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Pe.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:pet.encode,decode:pet.decode}};Pe.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Pe.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Pe.binary.hex.encode=Pe.bytesToHex;Pe.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Pe.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.byteLength;)i=t[c++],o=t[c++],a=t[c++],r+=WI.charAt(i>>2),r+=WI.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=WI.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":WI.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Pe.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,c,l=0,u=r;l<t.length;)i=GI[t.charCodeAt(l++)-43],o=GI[t.charCodeAt(l++)-43],a=GI[t.charCodeAt(l++)-43],c=GI[t.charCodeAt(l++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,c!==64&&(n[u++]=(a&3)<<6|c));return e?u-r:n.subarray(0,u)};Pe.binary.base58.encode=function(t,e){return Pe.binary.baseN.encode(t,met,e)};Pe.binary.base58.decode=function(t,e){return Pe.binary.baseN.decode(t,met,e)};Pe.text={utf8:{},utf16:{}};Pe.text.utf8.encode=function(t,e,r){t=Pe.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Pe.text.utf8.decode=function(t){return Pe.decodeUtf8(String.fromCharCode.apply(null,t))};Pe.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,c=0;c<t.length;++c)i[a++]=t.charCodeAt(c),o+=2;return e?o-r:n};Pe.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Pe.deflate=function(t,e,r){if(e=Pe.decode64(t.deflate(Pe.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Pe.inflate=function(t,e,r){var n=t.inflate(Pe.encode64(e)).rval;return n===null?null:Pe.decode64(n)};var Y1e=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Pe.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),K1e=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Pe.decode64(r))),r},"_getStorageObject"),AJt=s(function(t,e,r,n){var i=K1e(t,e);i===null&&(i={}),i[r]=n,Y1e(t,e,i)},"_setItem"),yJt=s(function(t,e,r){var n=K1e(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),CJt=s(function(t,e,r){var n=K1e(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),Y1e(t,e,n)}},"_removeItem"),EJt=s(function(t,e){Y1e(t,e,null)},"_clearItems"),MX=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var c in r){i=r[c];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){a=l}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Pe.setItem=function(t,e,r,n,i){MX(AJt,arguments,i)};Pe.getItem=function(t,e,r,n){return MX(yJt,arguments,n)};Pe.removeItem=function(t,e,r,n){MX(CJt,arguments,n)};Pe.clearItems=function(t,e,r){MX(EJt,arguments,r)};Pe.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Pe.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var c=r[0][1];switch(c){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+c+"?>")}}return o.push(t.substring(a)),o.join("")};Pe.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,c=n===void 0?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",f=u.length>3?u.length%3:0;return l+(f?u.substr(0,f)+c:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+c)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Pe.formatSize=function(t){return t>=1073741824?t=Pe.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Pe.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Pe.formatNumber(t/1024,0)+" KiB":t=Pe.formatNumber(t,0)+" bytes",t};Pe.bytesFromIP=function(t){return t.indexOf(".")!==-1?Pe.bytesFromIPv4(t):t.indexOf(":")!==-1?Pe.bytesFromIPv6(t):null};Pe.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Pe.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Pe.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Pe.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Pe.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Pe.bytesToIP=function(t){return t.length===4?Pe.bytesToIPv4(t):t.length===16?Pe.bytesToIPv6(t):null};Pe.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Pe.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Pe.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],c=e.length;!a||c!==a.end+1?r.push({start:c,end:c}):(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};Pe.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Pe&&!t.update)return e(null,Pe.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Pe.cores=navigator.hardwareConcurrency,e(null,Pe.cores);if(typeof Worker>"u")return Pe.cores=1,e(null,Pe.cores);if(typeof Blob>"u")return Pe.cores=2,e(null,Pe.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var c=Date.now(),l=c+4;Date.now()<l;);self.postMessage({st:c,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,c,l){if(c===0){var u=Math.floor(a.reduce(function(f,p){return f+p},0)/a.length);return Pe.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Pe.cores)}i(l,function(f,p){a.push(o(l,p)),n(a,c-1,l)})}s(n,"sample");function i(a,c){for(var l=[],u=[],f=0;f<a;++f){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)l[h].terminate();c(null,u)}}),l.push(p)}for(var f=0;f<a;++f)l[f].postMessage(f)}s(i,"map");function o(a,c){for(var l=[],u=0;u<a;++u)for(var f=c[u],p=l[u]=[],m=0;m<a;++m)if(u!==m){var h=c[m];(f.st>h.st&&f.st<h.et||h.st>f.st&&h.st<f.et)&&p.push(m)}return l.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var FX=Q((EXn,get)=>{d();var Ll=xi();_o();get.exports=Ll.cipher=Ll.cipher||{};Ll.cipher.algorithms=Ll.cipher.algorithms||{};Ll.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ll.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ll.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Ll.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ll.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ll.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Ll.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Ll.cipher.algorithms[t]=e};Ll.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Ll.cipher.algorithms?Ll.cipher.algorithms[t]:null};var J1e=Ll.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};J1e.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Ll.util.createBuffer(),this.output=t.output||Ll.util.createBuffer(),this.mode.start(e)};J1e.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};J1e.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Z1e=Q((xXn,Aet)=>{d();var Ml=xi();_o();Ml.cipher=Ml.cipher||{};var Qi=Aet.exports=Ml.cipher.modes=Ml.cipher.modes||{};Qi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Qi.ecb.prototype.start=function(t){};Qi.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Qi.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Qi.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Qi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Qi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Qi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=OX(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Qi.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Qi.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Qi.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Qi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Qi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Ml.util.createBuffer(),this._partialBytes=0};Qi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=OX(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Qi.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Qi.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Qi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ml.util.createBuffer(),this._partialBytes=0};Qi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=OX(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Qi.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Qi.ofb.prototype.decrypt=Qi.ofb.prototype.encrypt;Qi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ml.util.createBuffer(),this._partialBytes=0};Qi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=OX(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Qi.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}QX(this._inBlock)};Qi.ctr.prototype.decrypt=Qi.ctr.prototype.encrypt;Qi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Ml.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Qi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Ml.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Ml.util.createBuffer(t.additionalData):r=Ml.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Ml.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(X1e(n*8)))}this._inBlock=this._j0.slice(0),QX(this._inBlock),this._partialBytes=0,r=Ml.util.createBuffer(r),this._aDataLength=X1e(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Qi.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),QX(this._inBlock)};Qi.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),QX(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Qi.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Ml.util.createBuffer();var n=this._aDataLength.concat(X1e(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Qi.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Qi.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Qi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Qi.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Qi.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var c=[0,0,0,0],l=a/n|0,u=(n-1-a%n)*e;c[l]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(c,t),e)}return o};Qi.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var c=i[o],l=i[a];i[o+a]=[c[0]^l[0],c[1]^l[1],c[2]^l[2],c[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function OX(t,e){if(typeof t=="string"&&(t=Ml.util.createBuffer(t)),Ml.util.isArray(t)&&t.length>4){var r=t;t=Ml.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Ml.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(OX,"transformIV");function QX(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(QX,"inc32");function X1e(t){return[t/4294967296|0,t&4294967295]}s(X1e,"from64To32")});var jI=Q((TXn,vet)=>{d();var Ts=xi();FX();Z1e();_o();vet.exports=Ts.aes=Ts.aes||{};Ts.aes.startEncrypting=function(t,e,r,n){var i=UX({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};Ts.aes.createEncryptionCipher=function(t,e){return UX({key:t,output:null,decrypt:!1,mode:e})};Ts.aes.startDecrypting=function(t,e,r,n){var i=UX({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};Ts.aes.createDecryptionCipher=function(t,e){return UX({key:t,output:null,decrypt:!0,mode:e})};Ts.aes.Algorithm=function(t,e){rEe||Cet();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return tEe(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return tEe(r._w,n,i,!0)},"decrypt")}}),r._init=!1};Ts.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Ts.util.createBuffer(e);else if(Ts.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Ts.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Ts.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!Ts.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=Eet(e,t.decrypt&&!a),this._init=!0}};Ts.aes._expandKey=function(t,e){return rEe||Cet(),Eet(t,e)};Ts.aes._updateBlock=tEe;DB("AES-ECB",Ts.cipher.modes.ecb);DB("AES-CBC",Ts.cipher.modes.cbc);DB("AES-CFB",Ts.cipher.modes.cfb);DB("AES-OFB",Ts.cipher.modes.ofb);DB("AES-CTR",Ts.cipher.modes.ctr);DB("AES-GCM",Ts.cipher.modes.gcm);function DB(t,e){var r=s(function(){return new Ts.aes.Algorithm(t,e)},"factory");Ts.cipher.registerAlgorithm(t,r)}s(DB,"registerAlgorithm");var rEe=!1,BB=4,Hd,eEe,yet,G2,kg;function Cet(){rEe=!0,yet=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Hd=new Array(256),eEe=new Array(256),G2=new Array(4),kg=new Array(4);for(var e=0;e<4;++e)G2[e]=new Array(256),kg[e]=new Array(256);for(var r=0,n=0,i,o,a,c,l,u,f,e=0;e<256;++e){c=n^n<<1^n<<2^n<<3^n<<4,c=c>>8^c&255^99,Hd[r]=c,eEe[c]=r,l=t[c],i=t[r],o=t[i],a=t[o],u=l<<24^c<<16^c<<8^(c^l),f=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)G2[p][r]=u,kg[p][c]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(Cet,"initialize");function Eet(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,c=BB*a,l=o;l<c;++l)n=r[l-1],l%o===0?(n=Hd[n>>>16&255]<<24^Hd[n>>>8&255]<<16^Hd[n&255]<<8^Hd[n>>>24]^yet[i]<<24,i++):o>6&&l%o===4&&(n=Hd[n>>>24]<<24^Hd[n>>>16&255]<<16^Hd[n>>>8&255]<<8^Hd[n&255]),r[l]=r[l-o]^n;if(e){var u,f=kg[0],p=kg[1],m=kg[2],h=kg[3],g=r.slice(0);c=r.length;for(var l=0,y=c-BB;l<c;l+=BB,y-=BB)if(l===0||l===c-BB)g[l]=r[y],g[l+1]=r[y+3],g[l+2]=r[y+2],g[l+3]=r[y+1];else for(var E=0;E<BB;++E)u=r[y+E],g[l+(3&-E)]=f[Hd[u>>>24]]^p[Hd[u>>>16&255]]^m[Hd[u>>>8&255]]^h[Hd[u&255]];r=g}return r}s(Eet,"_expandKey");function tEe(t,e,r,n){var i=t.length/4-1,o,a,c,l,u;n?(o=kg[0],a=kg[1],c=kg[2],l=kg[3],u=eEe):(o=G2[0],a=G2[1],c=G2[2],l=G2[3],u=Hd);var f,p,m,h,g,y,E;f=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var x=3,b=1;b<i;++b)g=o[f>>>24]^a[p>>>16&255]^c[m>>>8&255]^l[h&255]^t[++x],y=o[p>>>24]^a[m>>>16&255]^c[h>>>8&255]^l[f&255]^t[++x],E=o[m>>>24]^a[h>>>16&255]^c[f>>>8&255]^l[p&255]^t[++x],h=o[h>>>24]^a[f>>>16&255]^c[p>>>8&255]^l[m&255]^t[++x],f=g,p=y,m=E;r[0]=u[f>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++x],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[f&255]^t[++x],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[f>>>8&255]<<8^u[p&255]^t[++x],r[n?1:3]=u[h>>>24]<<24^u[f>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++x]}s(tEe,"_updateBlock");function UX(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Ts.cipher.createDecipher(r,t.key):n=Ts.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof Ts.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(UX,"_createCipher")});var VI=Q((SXn,xet)=>{d();var dO=xi();dO.pki=dO.pki||{};var nEe=xet.exports=dO.pki.oids=dO.oids=dO.oids||{};function kt(t,e){nEe[t]=e,nEe[e]=t}s(kt,"_IN");function Uo(t,e){nEe[t]=e}s(Uo,"_I_");kt("1.2.840.113549.1.1.1","rsaEncryption");kt("1.2.840.113549.1.1.4","md5WithRSAEncryption");kt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");kt("1.2.840.113549.1.1.7","RSAES-OAEP");kt("1.2.840.113549.1.1.8","mgf1");kt("1.2.840.113549.1.1.9","pSpecified");kt("1.2.840.113549.1.1.10","RSASSA-PSS");kt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");kt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");kt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");kt("1.3.101.112","EdDSA25519");kt("1.2.840.10040.4.3","dsa-with-sha1");kt("1.3.14.3.2.7","desCBC");kt("1.3.14.3.2.26","sha1");kt("1.3.14.3.2.29","sha1WithRSASignature");kt("2.16.840.1.101.3.4.2.1","sha256");kt("2.16.840.1.101.3.4.2.2","sha384");kt("2.16.840.1.101.3.4.2.3","sha512");kt("2.16.840.1.101.3.4.2.4","sha224");kt("2.16.840.1.101.3.4.2.5","sha512-224");kt("2.16.840.1.101.3.4.2.6","sha512-256");kt("1.2.840.113549.2.2","md2");kt("1.2.840.113549.2.5","md5");kt("1.2.840.113549.1.7.1","data");kt("1.2.840.113549.1.7.2","signedData");kt("1.2.840.113549.1.7.3","envelopedData");kt("1.2.840.113549.1.7.4","signedAndEnvelopedData");kt("1.2.840.113549.1.7.5","digestedData");kt("1.2.840.113549.1.7.6","encryptedData");kt("1.2.840.113549.1.9.1","emailAddress");kt("1.2.840.113549.1.9.2","unstructuredName");kt("1.2.840.113549.1.9.3","contentType");kt("1.2.840.113549.1.9.4","messageDigest");kt("1.2.840.113549.1.9.5","signingTime");kt("1.2.840.113549.1.9.6","counterSignature");kt("1.2.840.113549.1.9.7","challengePassword");kt("1.2.840.113549.1.9.8","unstructuredAddress");kt("1.2.840.113549.1.9.14","extensionRequest");kt("1.2.840.113549.1.9.20","friendlyName");kt("1.2.840.113549.1.9.21","localKeyId");kt("1.2.840.113549.1.9.22.1","x509Certificate");kt("1.2.840.113549.1.12.10.1.1","keyBag");kt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");kt("1.2.840.113549.1.12.10.1.3","certBag");kt("1.2.840.113549.1.12.10.1.4","crlBag");kt("1.2.840.113549.1.12.10.1.5","secretBag");kt("1.2.840.113549.1.12.10.1.6","safeContentsBag");kt("1.2.840.113549.1.5.13","pkcs5PBES2");kt("1.2.840.113549.1.5.12","pkcs5PBKDF2");kt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");kt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");kt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");kt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");kt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");kt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");kt("1.2.840.113549.2.7","hmacWithSHA1");kt("1.2.840.113549.2.8","hmacWithSHA224");kt("1.2.840.113549.2.9","hmacWithSHA256");kt("1.2.840.113549.2.10","hmacWithSHA384");kt("1.2.840.113549.2.11","hmacWithSHA512");kt("1.2.840.113549.3.7","des-EDE3-CBC");kt("2.16.840.1.101.3.4.1.2","aes128-CBC");kt("2.16.840.1.101.3.4.1.22","aes192-CBC");kt("2.16.840.1.101.3.4.1.42","aes256-CBC");kt("2.5.4.3","commonName");kt("2.5.4.4","surname");kt("2.5.4.5","serialNumber");kt("2.5.4.6","countryName");kt("2.5.4.7","localityName");kt("2.5.4.8","stateOrProvinceName");kt("2.5.4.9","streetAddress");kt("2.5.4.10","organizationName");kt("2.5.4.11","organizationalUnitName");kt("2.5.4.12","title");kt("2.5.4.13","description");kt("2.5.4.15","businessCategory");kt("2.5.4.17","postalCode");kt("2.5.4.42","givenName");kt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");kt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");kt("2.16.840.1.113730.1.1","nsCertType");kt("2.16.840.1.113730.1.13","nsComment");Uo("2.5.29.1","authorityKeyIdentifier");Uo("2.5.29.2","keyAttributes");Uo("2.5.29.3","certificatePolicies");Uo("2.5.29.4","keyUsageRestriction");Uo("2.5.29.5","policyMapping");Uo("2.5.29.6","subtreesConstraint");Uo("2.5.29.7","subjectAltName");Uo("2.5.29.8","issuerAltName");Uo("2.5.29.9","subjectDirectoryAttributes");Uo("2.5.29.10","basicConstraints");Uo("2.5.29.11","nameConstraints");Uo("2.5.29.12","policyConstraints");Uo("2.5.29.13","basicConstraints");kt("2.5.29.14","subjectKeyIdentifier");kt("2.5.29.15","keyUsage");Uo("2.5.29.16","privateKeyUsagePeriod");kt("2.5.29.17","subjectAltName");kt("2.5.29.18","issuerAltName");kt("2.5.29.19","basicConstraints");Uo("2.5.29.20","cRLNumber");Uo("2.5.29.21","cRLReason");Uo("2.5.29.22","expirationDate");Uo("2.5.29.23","instructionCode");Uo("2.5.29.24","invalidityDate");Uo("2.5.29.25","cRLDistributionPoints");Uo("2.5.29.26","issuingDistributionPoint");Uo("2.5.29.27","deltaCRLIndicator");Uo("2.5.29.28","issuingDistributionPoint");Uo("2.5.29.29","certificateIssuer");Uo("2.5.29.30","nameConstraints");kt("2.5.29.31","cRLDistributionPoints");kt("2.5.29.32","certificatePolicies");Uo("2.5.29.33","policyMappings");Uo("2.5.29.34","policyConstraints");kt("2.5.29.35","authorityKeyIdentifier");Uo("2.5.29.36","policyConstraints");kt("2.5.29.37","extKeyUsage");Uo("2.5.29.46","freshestCRL");Uo("2.5.29.54","inhibitAnyPolicy");kt("1.3.6.1.4.1.11129.2.4.2","timestampList");kt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");kt("1.3.6.1.5.5.7.3.1","serverAuth");kt("1.3.6.1.5.5.7.3.2","clientAuth");kt("1.3.6.1.5.5.7.3.3","codeSigning");kt("1.3.6.1.5.5.7.3.4","emailProtection");kt("1.3.6.1.5.5.7.3.8","timeStamping")});var Pg=Q((PXn,Iet)=>{d();var $s=xi();_o();VI();var or=Iet.exports=$s.asn1=$s.asn1||{};or.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};or.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};or.create=function(t,e,r,n,i){if($s.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var c={tagClass:t,type:e,constructed:r,composed:r||$s.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=or.copy(c)),c};or.copy=function(t,e){var r;if($s.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(or.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:or.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};or.equals=function(t,e,r){if($s.util.isArray(t)){if(!$s.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!or.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&or.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};or.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function fO(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(fO,"_checkBufferLength");var vJt=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;fO(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");or.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=$s.util.createBuffer(t));var r=t.length(),n=qX(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function qX(t,e,r,n){var i;fO(t,e,2);var o=t.getByte();e--;var a=o&192,c=o&31;i=t.length();var l=vJt(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=l,u}l=e}var f,p,m=(o&32)===32;if(m)if(f=[],l===void 0)for(;;){if(fO(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),f.push(qX(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),f.push(qX(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(f===void 0&&a===or.Class.UNIVERSAL&&c===or.Type.BITSTRING&&(p=t.bytes(l)),f===void 0&&n.decodeBitStrings&&a===or.Class.UNIVERSAL&&c===or.Type.BITSTRING&&l>1){var h=t.read,g=e,y=0;if(c===or.Type.BITSTRING&&(fO(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var E={strict:!0,decodeBitStrings:!0},x=qX(t,e,r+1,E),b=i-t.length();e-=b,c==or.Type.BITSTRING&&b++;var _=x.tagClass;b===l&&(_===or.Class.UNIVERSAL||_===or.Class.CONTEXT_SPECIFIC)&&(f=[x])}catch{}f===void 0&&(t.read=h,e=g)}if(f===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(c===or.Type.BMPSTRING)for(f="";l>0;l-=2)fO(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(l),e-=l}var k=p===void 0?null:{bitStringContents:p};return or.create(a,c,m,f,k)}s(qX,"_fromDer");or.toDer=function(t){var e=$s.util.createBuffer(),r=t.tagClass|t.type,n=$s.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=or.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(or.toDer(t.value[o]))}else if(t.type===or.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===or.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),c="";do c+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(c.length|128);for(var o=c.length-1;o>=0;--o)e.putByte(c.charCodeAt(o))}return e.putBuffer(n),e};or.oidToDer=function(t){var e=t.split("."),r=$s.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,c=2;c<e.length;++c){n=!0,i=[],o=parseInt(e[c],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};or.derToOid=function(t){var e;typeof t=="string"&&(t=$s.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};or.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),c=0;if(t.length>11){var l=t.charAt(10),u=10;l!=="+"&&l!=="-"&&(c=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,0),u&&(l=t.charAt(u),l==="+"||l==="-")){var f=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=f*60+p;m*=6e4,l==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};or.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),c=parseInt(t.substr(12,2),10),l=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,l),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,c,l)),e};or.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};or.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};or.integerToDer=function(t){var e=$s.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};or.derToInteger=function(t){typeof t=="string"&&(t=$s.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};or.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&$s.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=or.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var c;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var bet=/[^\\u0000-\\u00ff]/;or.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case or.Class.UNIVERSAL:n+="Universal:";break;case or.Class.APPLICATION:n+="Application:";break;case or.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case or.Class.PRIVATE:n+="Private:";break}if(t.tagClass===or.Class.UNIVERSAL)switch(n+=t.type,t.type){case or.Type.NONE:n+=" (None)";break;case or.Type.BOOLEAN:n+=" (Boolean)";break;case or.Type.INTEGER:n+=" (Integer)";break;case or.Type.BITSTRING:n+=" (Bit string)";break;case or.Type.OCTETSTRING:n+=" (Octet string)";break;case or.Type.NULL:n+=" (Null)";break;case or.Type.OID:n+=" (Object Identifier)";break;case or.Type.ODESC:n+=" (Object Descriptor)";break;case or.Type.EXTERNAL:n+=" (External or Instance of)";break;case or.Type.REAL:n+=" (Real)";break;case or.Type.ENUMERATED:n+=" (Enumerated)";break;case or.Type.EMBEDDED:n+=" (Embedded PDV)";break;case or.Type.UTF8:n+=" (UTF8)";break;case or.Type.ROID:n+=" (Relative Object Identifier)";break;case or.Type.SEQUENCE:n+=" (Sequence)";break;case or.Type.SET:n+=" (Set)";break;case or.Type.PRINTABLESTRING:n+=" (Printable String)";break;case or.Type.IA5String:n+=" (IA5String (ASCII))";break;case or.Type.UTCTIME:n+=" (UTC time)";break;case or.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case or.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,c="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,c+=or.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(c+=","));n+=i+"Sub values: "+a+c}else{if(n+=i+"Value: ",t.type===or.Type.OID){var l=or.derToOid(t.value);n+=l,$s.pki&&$s.pki.oids&&l in $s.pki.oids&&(n+=" ("+$s.pki.oids[l]+") ")}if(t.type===or.Type.INTEGER)try{n+=or.derToInteger(t.value)}catch{n+="0x"+$s.util.bytesToHex(t.value)}else if(t.type===or.Type.BITSTRING){if(t.value.length>1?n+="0x"+$s.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===or.Type.OCTETSTRING)bet.test(t.value)||(n+="("+t.value+") "),n+="0x"+$s.util.bytesToHex(t.value);else if(t.type===or.Type.UTF8)try{n+=$s.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+$s.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===or.Type.PRINTABLESTRING||t.type===or.Type.IA5String?n+=t.value:bet.test(t.value)?n+="0x"+$s.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var jy=Q((NXn,Tet)=>{d();var HX=xi();Tet.exports=HX.md=HX.md||{};HX.md.algorithms=HX.md.algorithms||{}});var NB=Q((MXn,wet)=>{d();var PE=xi();jy();_o();var xJt=wet.exports=PE.hmac=PE.hmac||{};xJt.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in PE.md.algorithms)e=PE.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=PE.util.createBuffer(a);else if(PE.util.isArray(a)){var c=a;a=PE.util.createBuffer();for(var l=0;l<c.length;++l)a.putByte(c[l])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=PE.util.createBuffer(),n=PE.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var c=a.at(l);r.putByte(54^c),n.putByte(92^c)}if(u<e.blockLength)for(var c=e.blockLength-u,l=0;l<c;++l)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var GX=Q((OXn,Pet)=>{d();var Vy=xi();jy();_o();var Ret=Pet.exports=Vy.md5=Vy.md5||{};Vy.md.md5=Vy.md.algorithms.md5=Ret;Ret.create=function(){ket||bJt();var t=null,e=Vy.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Vy.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Vy.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),_et(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Vy.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(iEe.substr(0,n.blockLength-a));for(var c,l=0,u=n.fullMessageLength.length-1;u>=0;--u)c=n.fullMessageLength[u]*8+l,l=c/4294967296>>>0,i.putInt32Le(c>>>0);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};_et(f,r,i);var p=Vy.util.createBuffer();return p.putInt32Le(f.h0),p.putInt32Le(f.h1),p.putInt32Le(f.h2),p.putInt32Le(f.h3),p},n};var iEe=null,WX=null,pO=null,LB=null,ket=!1;function bJt(){iEe="\x80",iEe+=Vy.util.fillString("\0",64),WX=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],pO=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],LB=new Array(64);for(var t=0;t<64;++t)LB[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);ket=!0}s(bJt,"_init");function _et(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,f=0;f<16;++f)e[f]=r.getInt32Le(),l=c^o&(a^c),n=i+l+LB[f]+e[f],u=pO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<32;++f)l=a^c&(o^a),n=i+l+LB[f]+e[WX[f]],u=pO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<48;++f)l=o^a^c,n=i+l+LB[f]+e[WX[f]],u=pO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<64;++f)l=a^(o|~c),n=i+l+LB[f]+e[WX[f]],u=pO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,p-=64}}s(_et,"_update")});var j2=Q((qXn,Det)=>{d();var VX=xi();_o();var Bet=Det.exports=VX.pem=VX.pem||{};Bet.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=jX(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=jX(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=jX(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=jX(t.headers[i]);return t.procType&&(r+=`\r
`),r+=VX.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Bet.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var c={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:VX.util.decode64(o[3])};if(e.push(c),!!o[2]){for(var l=o[2].split(i),u=0;o&&u<l.length;){for(var f=l[u].replace(/\s+$/,""),p=u+1;p<l.length;++p){var m=l[p];if(!/\s/.test(m[0]))break;f+=m,u=p}if(o=f.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(IJt(g[y]));if(c.procType)if(!c.contentDomain&&h.name==="Content-Domain")c.contentDomain=g[0]||"";else if(!c.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++u}if(c.procType==="ENCRYPTED"&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function jX(t){for(var e=t.name+": ",r=[],n=s(function(l,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var c=e[a];c===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+c+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(jX,"foldHeader");function IJt(t){return t.replace(/^\s+/,"")}s(IJt,"ltrim")});var mO=Q((GXn,Let)=>{d();var ma=xi();FX();Z1e();_o();Let.exports=ma.des=ma.des||{};ma.des.startEncrypting=function(t,e,r,n){var i=$X({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ma.des.createEncryptionCipher=function(t,e){return $X({key:t,output:null,decrypt:!1,mode:e})};ma.des.startDecrypting=function(t,e,r,n){var i=$X({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ma.des.createDecryptionCipher=function(t,e){return $X({key:t,output:null,decrypt:!0,mode:e})};ma.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return Net(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return Net(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};ma.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=ma.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=DJt(e),this._init=!0}};$y("DES-ECB",ma.cipher.modes.ecb);$y("DES-CBC",ma.cipher.modes.cbc);$y("DES-CFB",ma.cipher.modes.cfb);$y("DES-OFB",ma.cipher.modes.ofb);$y("DES-CTR",ma.cipher.modes.ctr);$y("3DES-ECB",ma.cipher.modes.ecb);$y("3DES-CBC",ma.cipher.modes.cbc);$y("3DES-CFB",ma.cipher.modes.cfb);$y("3DES-OFB",ma.cipher.modes.ofb);$y("3DES-CTR",ma.cipher.modes.ctr);function $y(t,e){var r=s(function(){return new ma.des.Algorithm(t,e)},"factory");ma.cipher.registerAlgorithm(t,r)}s($y,"registerAlgorithm");var TJt=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],wJt=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],_Jt=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],SJt=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],RJt=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],kJt=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],PJt=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],BJt=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function DJt(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,E=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,_,k=0;k<y;k++){var P=t.getInt32(),N=t.getInt32();_=(P>>>4^N)&252645135,N^=_,P^=_<<4,_=(N>>>-16^P)&65535,P^=_,N^=_<<-16,_=(P>>>2^N)&858993459,N^=_,P^=_<<2,_=(N>>>-16^P)&65535,P^=_,N^=_<<-16,_=(P>>>1^N)&1431655765,N^=_,P^=_<<1,_=(N>>>8^P)&16711935,P^=_,N^=_<<8,_=(P>>>1^N)&1431655765,N^=_,P^=_<<1,_=P<<8|N>>>20&240,P=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var M=0;M<x.length;++M){x[M]?(P=P<<2|P>>>26,N=N<<2|N>>>26):(P=P<<1|P>>>27,N=N<<1|N>>>27),P&=-15,N&=-15;var J=e[P>>>28]|r[P>>>24&15]|n[P>>>20&15]|i[P>>>16&15]|o[P>>>12&15]|a[P>>>8&15]|c[P>>>4&15],se=l[N>>>28]|u[N>>>24&15]|f[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(se>>>16^J)&65535,E[b++]=J^_,E[b++]=se^_<<16}}return E}s(DJt,"_createKeys");function Net(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,c=e[0],l=e[1];a=(c>>>4^l)&252645135,l^=a,c^=a<<4,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,c=c<<1|c>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var f=o[u+1],p=o[u+2],m=o[u];m!=f;m+=p){var h=l^t[m],g=(l>>>4|l<<28)^t[m+1];a=c,c=l,l=a^(wJt[h>>>24&63]|SJt[h>>>16&63]|kJt[h>>>8&63]|BJt[h&63]|TJt[g>>>24&63]|_Jt[g>>>16&63]|RJt[g>>>8&63]|PJt[g&63])}a=c,c=l,l=a}c=c>>>1|c<<31,l=l>>>1|l<<31,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(c>>>4^l)&252645135,l^=a,c^=a<<4,r[0]=c,r[1]=l}s(Net,"_updateBlock");function $X(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=ma.cipher.createDecipher(r,t.key):n=ma.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof ma.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s($X,"_createCipher")});var zX=Q(($Xn,Met)=>{d();var Wd=xi();NB();jy();_o();var NJt=Wd.pkcs5=Wd.pkcs5||{},BE;Wd.util.isNodejs&&!Wd.options.usePureJavaScript&&(BE=require("crypto"));Met.exports=Wd.pbkdf2=NJt.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),Wd.util.isNodejs&&!Wd.options.usePureJavaScript&&BE.pbkdf2&&(i===null||typeof i!="object")&&(BE.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?BE.pbkdf2Sync.length===4?BE.pbkdf2(t,e,r,n,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):BE.pbkdf2(t,e,r,n,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):BE.pbkdf2Sync.length===4?BE.pbkdf2Sync(t,e,r,n).toString("binary"):BE.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Wd.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Wd.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var c=new Error("Derived key is too long.");if(o)return o(c);throw c}var l=Math.ceil(n/a),u=n-(l-1)*a,f=Wd.hmac.create();f.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=l;++y){f.start(null,null),f.update(e),f.update(Wd.util.int32ToBytes(y)),m=g=f.digest().getBytes();for(var E=2;E<=r;++E)f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Wd.util.xorBytes(m,h,a),g=h;p+=y<l?m:m.substr(0,u)}return p}var y=1,E;function x(){if(y>l)return o(null,p);f.start(null,null),f.update(e),f.update(Wd.util.int32ToBytes(y)),m=g=f.digest().getBytes(),E=2,b()}s(x,"outer");function b(){if(E<=r)return f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Wd.util.xorBytes(m,h,a),g=h,++E,Wd.util.setImmediate(b);p+=y<l?m:m.substr(0,u),++y,x()}s(b,"inner"),x()}});var sEe=Q((KXn,qet)=>{d();var zy=xi();jy();_o();var Oet=qet.exports=zy.sha256=zy.sha256||{};zy.md.sha256=zy.md.algorithms.sha256=Oet;Oet.create=function(){Qet||LJt();var t=null,e=zy.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=zy.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=zy.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),Fet(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=zy.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(oEe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Fet(p,r,i);var m=zy.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var oEe=null,Qet=!1,Uet=null;function LJt(){oEe="\x80",oEe+=zy.util.fillString("\0",64),Uet=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Qet=!0}s(LJt,"_init");function Fet(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,y,E,x,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,E=t.h6,x=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=E^g&(y^E),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),l=f&p|m&(f^p),n=x+a+c+Uet[u]+e[u],i=o+l,x=E,E=y,y=g,g=h+n>>>0,h=m,m=p,p=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+E|0,t.h7=t.h7+x|0,b-=64}}s(Fet,"_update")});var aEe=Q((ZXn,Het)=>{d();var Yy=xi();_o();var YX=null;Yy.util.isNodejs&&!Yy.options.usePureJavaScript&&!process.versions["node-webkit"]&&(YX=require("crypto"));var MJt=Het.exports=Yy.prng=Yy.prng||{};MJt.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=Yy.util.createBuffer();e.key=null,E();function E(x){if(x)return f(x);if(y.length()>=u)return f(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Yy.util.nextTick(function(){o(E)});var b=p(e.key,e.seed);e.generated+=b.length,y.putBytes(b),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),Yy.util.setImmediate(E)}s(E,"generate")},e.generateSync=function(u){var f=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=Yy.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=f(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(f(e.key,p(e.seed))),e.seed=h(f(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return c(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(p,m){if(p)return u(p);e.collect(m),c(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return c();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),c()}s(a,"_reseedSync");function c(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,p=0;p<32;++p)e.reseeds%f===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(c,"_seed");function l(u){var f=null,p=Yy.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(f=s(function(P){return m.getRandomValues(P)},"getRandomValues"));var h=Yy.util.createBuffer();if(f)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{f(y);for(var E=0;E<y.length;++E)h.putInt32(y[E])}catch(P){if(!(typeof QuotaExceededError<"u"&&P instanceof QuotaExceededError))throw P}}if(h.length()<u)for(var x,b,_,k=Math.floor(Math.random()*65536);h.length()<u;){b=16807*(k&65535),x=16807*(k>>16),b+=(x&32767)<<16,b+=x>>15,b=(b&2147483647)+(b>>31),k=b&4294967295;for(var E=0;E<3;++E)_=k>>>(E<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(l,"defaultSeedFile"),YX?(e.seedFile=function(u,f){YX.randomBytes(u,function(p,m){if(p)return f(p);f(null,m.toString())})},e.seedFileSync=function(u){return YX.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,l(u))}catch(p){f(p)}},e.seedFileSync=l),e.collect=function(u){for(var f=u.length,p=0;p<f;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var p="",m=0;m<f;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var f=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",f)}},e}});var qm=Q((rZn,cEe)=>{d();var Fl=xi();jI();sEe();aEe();_o();(function(){if(Fl.random&&Fl.random.getBytes){cEe.exports=Fl.random;return}(function(t){var e={},r=new Array(4),n=Fl.util.createBuffer();e.formatKey=function(p){var m=Fl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),Fl.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=Fl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return Fl.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=Fl.md.sha256;function i(){var p=Fl.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,c=Fl.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(a=s(function(p){return l.getRandomValues(p)},"getRandomValues")),Fl.options.usePureJavaScript||!Fl.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!Fl.random)Fl.random=o;else for(var f in o)Fl.random[f]=o[f];Fl.random.createInstance=i,cEe.exports=Fl.random})(typeof jQuery<"u"?jQuery:null)})()});var uEe=Q((oZn,jet)=>{d();var Hf=xi();_o();var lEe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Wet=[1,2,3,5],FJt=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),OJt=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");jet.exports=Hf.rc2=Hf.rc2||{};Hf.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Hf.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),c;for(c=n;c<128;c++)r.putByte(lEe[r.at(c-1)+r.at(c-n)&255]);for(r.setAt(128-o,lEe[r.at(128-o)&a]),c=127-o;c>=0;c--)r.setAt(c,lEe[r.at(c+1)^r.at(c+o)]);return r};var Get=s(function(t,e,r){var n=!1,i=null,o=null,a=null,c,l,u,f,p=[];for(t=Hf.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(c=s(function(g){for(u=0;u<4;u++)g[u]+=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=FJt(g[u],Wet[u]),f++},"mixRound"),l=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(c=s(function(g){for(u=3;u>=0;u--)g[u]=OJt(g[u],Wet[u]),g[u]-=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),f--},"mixRound"),l=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var E=i.getInt16Le();a!==null&&(r?E^=a.getInt16Le():a.putInt16Le(E)),y.push(E&65535)}f=r?0:63;for(var x=0;x<g.length;x++)for(var b=0;b<g[x][0];b++)g[x][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=Hf.util.createBuffer(g)),n=!1,i=Hf.util.createBuffer(),o=y||new Hf.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,c],[1,l],[6,c],[1,l],[5,c]])},"update"),finish:s(function(g){var y=!0;if(r)if(g)y=g(8,i,!r);else{var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E)}if(y&&(n=!0,h.update()),!r&&(y=i.length()===0,y))if(g)y=g(8,o,!r);else{var x=o.length(),b=o.at(x-1);b>x?y=!1:o.truncate(b)}return y},"finish")},h},"createCipher");Hf.rc2.startEncrypting=function(t,e,r){var n=Hf.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Hf.rc2.createEncryptionCipher=function(t,e){return Get(t,e,!0)};Hf.rc2.startDecrypting=function(t,e,r){var n=Hf.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Hf.rc2.createDecryptionCipher=function(t,e){return Get(t,e,!1)}});var gO=Q((cZn,Zet)=>{d();var dEe=xi();Zet.exports=dEe.jsbn=dEe.jsbn||{};var DE,QJt=0xdeadbeefcafe,Vet=(QJt&16777215)==15715070;function xt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(xt,"BigInteger");dEe.jsbn.BigInteger=xt;function So(){return new xt(null)}s(So,"nbi");function UJt(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(UJt,"am1");function qJt(t,e,r,n,i,o){for(var a=e&32767,c=e>>15;--o>=0;){var l=this.data[t]&32767,u=this.data[t++]>>15,f=c*l+u*a;l=a*l+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(f>>>15)+c*u+(i>>>30),r.data[n++]=l&1073741823}return i}s(qJt,"am2");function $et(t,e,r,n,i,o){for(var a=e&16383,c=e>>14;--o>=0;){var l=this.data[t]&16383,u=this.data[t++]>>14,f=c*l+u*a;l=a*l+((f&16383)<<14)+r.data[n]+i,i=(l>>28)+(f>>14)+c*u,r.data[n++]=l&268435455}return i}s($et,"am3");typeof navigator>"u"?(xt.prototype.am=$et,DE=28):Vet&&navigator.appName=="Microsoft Internet Explorer"?(xt.prototype.am=qJt,DE=30):Vet&&navigator.appName!="Netscape"?(xt.prototype.am=UJt,DE=26):(xt.prototype.am=$et,DE=28);xt.prototype.DB=DE;xt.prototype.DM=(1<<DE)-1;xt.prototype.DV=1<<DE;var fEe=52;xt.prototype.FV=Math.pow(2,fEe);xt.prototype.F1=fEe-DE;xt.prototype.F2=2*DE-fEe;var HJt="0123456789abcdefghijklmnopqrstuvwxyz",KX=new Array,MB,Hm;MB=48;for(Hm=0;Hm<=9;++Hm)KX[MB++]=Hm;MB=97;for(Hm=10;Hm<36;++Hm)KX[MB++]=Hm;MB=65;for(Hm=10;Hm<36;++Hm)KX[MB++]=Hm;function zet(t){return HJt.charAt(t)}s(zet,"int2char");function Yet(t,e){var r=KX[t.charCodeAt(e)];return r??-1}s(Yet,"intAt");function WJt(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(WJt,"bnpCopyTo");function GJt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(GJt,"bnpFromInt");function $I(t){var e=So();return e.fromInt(t),e}s($I,"nbv");function jJt(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:Yet(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&xt.ZERO.subTo(this,this)}s(jJt,"bnpFromString");function VJt(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(VJt,"bnpClamp");function $Jt(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-- >0)for(c<this.DB&&(n=this.data[a]>>c)>0&&(i=!0,o=zet(n));a>=0;)c<e?(n=(this.data[a]&(1<<c)-1)<<e-c,n|=this.data[--a]>>(c+=this.DB-e)):(n=this.data[a]>>(c-=e)&r,c<=0&&(c+=this.DB,--a)),n>0&&(i=!0),i&&(o+=zet(n));return i?o:"0"}s($Jt,"bnToString");function zJt(){var t=So();return xt.ZERO.subTo(this,t),t}s(zJt,"bnNegate");function YJt(){return this.s<0?this.negate():this}s(YJt,"bnAbs");function KJt(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(KJt,"bnCompareTo");function JX(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(JX,"nbits");function JJt(){return this.t<=0?0:this.DB*(this.t-1)+JX(this.data[this.t-1]^this.s&this.DM)}s(JJt,"bnBitLength");function XJt(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(XJt,"bnpDLShiftTo");function ZJt(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(ZJt,"bnpDRShiftTo");function eXt(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)e.data[c+o+1]=this.data[c]>>n|a,a=(this.data[c]&i)<<r;for(c=o-1;c>=0;--c)e.data[c]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(eXt,"bnpLShiftTo");function tXt(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(tXt,"bnpRShiftTo");function rXt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(rXt,"bnpSubTo");function nXt(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&xt.ZERO.subTo(e,e)}s(nXt,"bnpMultiplyTo");function iXt(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(iXt,"bnpSquareTo");function oXt(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=So());var o=So(),a=this.s,c=t.s,l=this.DB-JX(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(f!=0){var p=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=r.t,E=y-u,x=e??So();for(o.dlShiftTo(E,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),xt.ONE.dlShiftTo(u,x),x.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--E>=0;){var b=r.data[--y]==f?this.DM:Math.floor(r.data[y]*m+(r.data[y-1]+g)*h);if((r.data[y]+=o.am(0,b,r,E,0,u))<b)for(o.dlShiftTo(E,x),r.subTo(x,r);r.data[y]<--b;)r.subTo(x,r)}e!=null&&(r.drShiftTo(u,e),a!=c&&xt.ZERO.subTo(e,e)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&xt.ZERO.subTo(r,r)}}}s(oXt,"bnpDivRemTo");function sXt(t){var e=So();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(xt.ZERO)>0&&t.subTo(e,e),e}s(sXt,"bnMod");function V2(t){this.m=t}s(V2,"Classic");function aXt(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(aXt,"cConvert");function cXt(t){return t}s(cXt,"cRevert");function lXt(t){t.divRemTo(this.m,null,t)}s(lXt,"cReduce");function uXt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(uXt,"cMulTo");function dXt(t,e){t.squareTo(e),this.reduce(e)}s(dXt,"cSqrTo");V2.prototype.convert=aXt;V2.prototype.revert=cXt;V2.prototype.reduce=lXt;V2.prototype.mulTo=uXt;V2.prototype.sqrTo=dXt;function fXt(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(fXt,"bnpInvDigit");function $2(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s($2,"Montgomery");function pXt(t){var e=So();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(xt.ZERO)>0&&this.m.subTo(e,e),e}s(pXt,"montConvert");function mXt(t){var e=So();return t.copyTo(e),this.reduce(e),e}s(mXt,"montRevert");function hXt(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(hXt,"montReduce");function gXt(t,e){t.squareTo(e),this.reduce(e)}s(gXt,"montSqrTo");function AXt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(AXt,"montMulTo");$2.prototype.convert=pXt;$2.prototype.revert=mXt;$2.prototype.reduce=hXt;$2.prototype.mulTo=AXt;$2.prototype.sqrTo=gXt;function yXt(){return(this.t>0?this.data[0]&1:this.s)==0}s(yXt,"bnpIsEven");function CXt(t,e){if(t>4294967295||t<1)return xt.ONE;var r=So(),n=So(),i=e.convert(this),o=JX(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(CXt,"bnpExp");function EXt(t,e){var r;return t<256||e.isEven()?r=new V2(e):r=new $2(e),this.exp(t,r)}s(EXt,"bnModPowInt");xt.prototype.copyTo=WJt;xt.prototype.fromInt=GJt;xt.prototype.fromString=jJt;xt.prototype.clamp=VJt;xt.prototype.dlShiftTo=XJt;xt.prototype.drShiftTo=ZJt;xt.prototype.lShiftTo=eXt;xt.prototype.rShiftTo=tXt;xt.prototype.subTo=rXt;xt.prototype.multiplyTo=nXt;xt.prototype.squareTo=iXt;xt.prototype.divRemTo=oXt;xt.prototype.invDigit=fXt;xt.prototype.isEven=yXt;xt.prototype.exp=CXt;xt.prototype.toString=$Jt;xt.prototype.negate=zJt;xt.prototype.abs=YJt;xt.prototype.compareTo=KJt;xt.prototype.bitLength=JJt;xt.prototype.mod=sXt;xt.prototype.modPowInt=EXt;xt.ZERO=$I(0);xt.ONE=$I(1);function vXt(){var t=So();return this.copyTo(t),t}s(vXt,"bnClone");function xXt(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(xXt,"bnIntValue");function bXt(){return this.t==0?this.s:this.data[0]<<24>>24}s(bXt,"bnByteValue");function IXt(){return this.t==0?this.s:this.data[0]<<16>>16}s(IXt,"bnShortValue");function TXt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(TXt,"bnpChunkSize");function wXt(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(wXt,"bnSigNum");function _Xt(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=$I(r),i=So(),o=So(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(_Xt,"bnpToRadix");function SXt(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,c=0;c<t.length;++c){var l=Yet(t,c);if(l<0){t.charAt(c)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&xt.ZERO.subTo(this,this)}s(SXt,"bnpFromRadix");function RXt(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(xt.ONE.shiftLeft(t-1),pEe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(xt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(RXt,"bnpFromNumber");function kXt(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(kXt,"bnToByteArray");function PXt(t){return this.compareTo(t)==0}s(PXt,"bnEquals");function BXt(t){return this.compareTo(t)<0?this:t}s(BXt,"bnMin");function DXt(t){return this.compareTo(t)>0?this:t}s(DXt,"bnMax");function NXt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(NXt,"bnpBitwiseTo");function LXt(t,e){return t&e}s(LXt,"op_and");function MXt(t){var e=So();return this.bitwiseTo(t,LXt,e),e}s(MXt,"bnAnd");function pEe(t,e){return t|e}s(pEe,"op_or");function FXt(t){var e=So();return this.bitwiseTo(t,pEe,e),e}s(FXt,"bnOr");function Ket(t,e){return t^e}s(Ket,"op_xor");function OXt(t){var e=So();return this.bitwiseTo(t,Ket,e),e}s(OXt,"bnXor");function Jet(t,e){return t&~e}s(Jet,"op_andnot");function QXt(t){var e=So();return this.bitwiseTo(t,Jet,e),e}s(QXt,"bnAndNot");function UXt(){for(var t=So(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(UXt,"bnNot");function qXt(t){var e=So();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(qXt,"bnShiftLeft");function HXt(t){var e=So();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(HXt,"bnShiftRight");function WXt(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(WXt,"lbit");function GXt(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+WXt(this.data[t]);return this.s<0?this.t*this.DB:-1}s(GXt,"bnGetLowestSetBit");function jXt(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(jXt,"cbit");function VXt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=jXt(this.data[r]^e);return t}s(VXt,"bnBitCount");function $Xt(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s($Xt,"bnTestBit");function zXt(t,e){var r=xt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(zXt,"bnpChangeBit");function YXt(t){return this.changeBit(t,pEe)}s(YXt,"bnSetBit");function KXt(t){return this.changeBit(t,Jet)}s(KXt,"bnClearBit");function JXt(t){return this.changeBit(t,Ket)}s(JXt,"bnFlipBit");function XXt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(XXt,"bnpAddTo");function ZXt(t){var e=So();return this.addTo(t,e),e}s(ZXt,"bnAdd");function eZt(t){var e=So();return this.subTo(t,e),e}s(eZt,"bnSubtract");function tZt(t){var e=So();return this.multiplyTo(t,e),e}s(tZt,"bnMultiply");function rZt(t){var e=So();return this.divRemTo(t,e,null),e}s(rZt,"bnDivide");function nZt(t){var e=So();return this.divRemTo(t,null,e),e}s(nZt,"bnRemainder");function iZt(t){var e=So(),r=So();return this.divRemTo(t,e,r),new Array(e,r)}s(iZt,"bnDivideAndRemainder");function oZt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(oZt,"bnpDMultiply");function sZt(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(sZt,"bnpDAddOffset");function hO(){}s(hO,"NullExp");function Xet(t){return t}s(Xet,"nNop");function aZt(t,e,r){t.multiplyTo(e,r)}s(aZt,"nMulTo");function cZt(t,e){t.squareTo(e)}s(cZt,"nSqrTo");hO.prototype.convert=Xet;hO.prototype.revert=Xet;hO.prototype.mulTo=aZt;hO.prototype.sqrTo=cZt;function lZt(t){return this.exp(t,new hO)}s(lZt,"bnPow");function uZt(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(uZt,"bnpMultiplyLowerTo");function dZt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(dZt,"bnpMultiplyUpperTo");function FB(t){this.r2=So(),this.q3=So(),xt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(FB,"Barrett");function fZt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=So();return t.copyTo(e),this.reduce(e),e}s(fZt,"barrettConvert");function pZt(t){return t}s(pZt,"barrettRevert");function mZt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(mZt,"barrettReduce");function hZt(t,e){t.squareTo(e),this.reduce(e)}s(hZt,"barrettSqrTo");function gZt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(gZt,"barrettMulTo");FB.prototype.convert=fZt;FB.prototype.revert=pZt;FB.prototype.reduce=mZt;FB.prototype.mulTo=gZt;FB.prototype.sqrTo=hZt;function AZt(t,e){var r=t.bitLength(),n,i=$I(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new V2(e):e.isEven()?o=new FB(e):o=new $2(e);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var f=So();for(o.sqrTo(a[1],f);c<=u;)a[c]=So(),o.mulTo(f,a[c-2],a[c]),c+=2}var p=t.t-1,m,h=!0,g=So(),y;for(r=JX(t.data[p])-1;p>=0;){for(r>=l?m=t.data[p]>>r-l&u:(m=(t.data[p]&(1<<r+1)-1)<<l-r,p>0&&(m|=t.data[p-1]>>this.DB+r-l)),c=n;(m&1)==0;)m>>=1,--c;if((r-=c)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;c>1;)o.sqrTo(i,g),o.sqrTo(g,i),c-=2;c>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s(AZt,"bnModPow");function yZt(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(yZt,"bnGCD");function CZt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(CZt,"bnpModInt");function EZt(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return xt.ZERO;for(var r=t.clone(),n=this.clone(),i=$I(1),o=$I(0),a=$I(0),c=$I(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!c.isEven())&&(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(o,c))}if(n.compareTo(xt.ONE)!=0)return xt.ZERO;if(c.compareTo(t)>=0)return c.subtract(t);if(c.signum()<0)c.addTo(t,c);else return c;return c.signum()<0?c.add(t):c}s(EZt,"bnModInverse");var Bg=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],vZt=(1<<26)/Bg[Bg.length-1];function xZt(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Bg[Bg.length-1]){for(e=0;e<Bg.length;++e)if(r.data[0]==Bg[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Bg.length;){for(var n=Bg[e],i=e+1;i<Bg.length&&n<vZt;)n*=Bg[i++];for(n=r.modInt(n);e<i;)if(n%Bg[e++]==0)return!1}return r.millerRabin(t)}s(xZt,"bnIsProbablePrime");function bZt(t){var e=this.subtract(xt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=IZt(),o,a=0;a<t;++a){do o=new xt(this.bitLength(),i);while(o.compareTo(xt.ONE)<=0||o.compareTo(e)>=0);var c=o.modPow(n,this);if(c.compareTo(xt.ONE)!=0&&c.compareTo(e)!=0){for(var l=1;l++<r&&c.compareTo(e)!=0;)if(c=c.modPowInt(2,this),c.compareTo(xt.ONE)==0)return!1;if(c.compareTo(e)!=0)return!1}}return!0}s(bZt,"bnpMillerRabin");function IZt(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(IZt,"bnGetPrng");xt.prototype.chunkSize=TXt;xt.prototype.toRadix=_Xt;xt.prototype.fromRadix=SXt;xt.prototype.fromNumber=RXt;xt.prototype.bitwiseTo=NXt;xt.prototype.changeBit=zXt;xt.prototype.addTo=XXt;xt.prototype.dMultiply=oZt;xt.prototype.dAddOffset=sZt;xt.prototype.multiplyLowerTo=uZt;xt.prototype.multiplyUpperTo=dZt;xt.prototype.modInt=CZt;xt.prototype.millerRabin=bZt;xt.prototype.clone=vXt;xt.prototype.intValue=xXt;xt.prototype.byteValue=bXt;xt.prototype.shortValue=IXt;xt.prototype.signum=wXt;xt.prototype.toByteArray=kXt;xt.prototype.equals=PXt;xt.prototype.min=BXt;xt.prototype.max=DXt;xt.prototype.and=MXt;xt.prototype.or=FXt;xt.prototype.xor=OXt;xt.prototype.andNot=QXt;xt.prototype.not=UXt;xt.prototype.shiftLeft=qXt;xt.prototype.shiftRight=HXt;xt.prototype.getLowestSetBit=GXt;xt.prototype.bitCount=VXt;xt.prototype.testBit=$Xt;xt.prototype.setBit=YXt;xt.prototype.clearBit=KXt;xt.prototype.flipBit=JXt;xt.prototype.add=ZXt;xt.prototype.subtract=eZt;xt.prototype.multiply=tZt;xt.prototype.divide=rZt;xt.prototype.remainder=nZt;xt.prototype.divideAndRemainder=iZt;xt.prototype.modPow=AZt;xt.prototype.modInverse=EZt;xt.prototype.pow=lZt;xt.prototype.gcd=yZt;xt.prototype.isProbablePrime=xZt});var OB=Q((dZn,ntt)=>{d();var Ky=xi();jy();_o();var ttt=ntt.exports=Ky.sha1=Ky.sha1||{};Ky.md.sha1=Ky.md.algorithms.sha1=ttt;ttt.create=function(){rtt||TZt();var t=null,e=Ky.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Ky.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Ky.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),ett(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Ky.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(mEe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};ett(p,r,i);var m=Ky.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var mEe=null,rtt=!1;function TZt(){mEe="\x80",mEe+=Ky.util.fillString("\0",64),rtt=!0}s(TZt,"_init");function ett(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,l=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o&a|c&(o^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+3395469782+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,p-=64}}s(ett,"_update")});var hEe=Q((mZn,ott)=>{d();var Jy=xi();_o();qm();OB();var itt=ott.exports=Jy.pkcs1=Jy.pkcs1||{};itt.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=Jy.md.sha1.create(),a||(a=o);var c=Math.ceil(t.n.bitLength()/8),l=c-2*o.digestLength-2;if(e.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=l,u}n||(n=""),o.update(n,"raw");for(var f=o.digest(),p="",m=l-e.length,h=0;h<m;h++)p+="\0";var g=f.getBytes()+p+""+e;if(!i)i=Jy.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=XX(i,c-o.digestLength-1,a),E=Jy.util.xorBytes(g,y,g.length),x=XX(E,o.digestLength,a),b=Jy.util.xorBytes(i,x,i.length);return"\0"+b+E};itt.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=e.length,E.expectedLength=a,E}if(i===void 0?i=Jy.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var c=i.digest().getBytes(),l=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),p=XX(f,i.digestLength,o),m=Jy.util.xorBytes(u,p,u.length),h=XX(m,a-i.digestLength-1,o),g=Jy.util.xorBytes(f,h,f.length),y=g.substring(0,i.digestLength),E=l!=="\0",x=0;x<i.digestLength;++x)E|=c.charAt(x)!==y.charAt(x);for(var b=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var P=g.charCodeAt(k),N=P&1^1,M=b?65534:0;E|=P&M,b=b&N,_+=b}if(E||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function XX(t,e,r){r||(r=Jy.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(XX,"rsa_mgf1")});var AEe=Q((AZn,gEe)=>{d();var zI=xi();_o();gO();qm();(function(){if(zI.prime){gEe.exports=zI.prime;return}var t=gEe.exports=zI.prime=zI.prime||{},e=zI.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||zI.random,E={nextBytes:s(function(x){for(var b=y.getBytesSync(x.length),_=0;_<x.length;++_)x[_]=b.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,E,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?l(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),E=0,x=f(y.bitLength());"millerRabinTests"in h&&(x=h.millerRabinTests);var b=10;"maxBlockTime"in h&&(b=h.maxBlockTime),c(y,p,m,E,x,b,g)}s(a,"primeincFindPrimeWithoutWorkers");function c(p,m,h,g,y,E,x){var b=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return x(null,p);p.dAddOffset(r[g++%8],0)}while(E<0||+new Date-b<E);zI.util.setImmediate(function(){c(p,m,h,g,y,E,x)})}s(c,"_primeinc");function l(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),E=h.workers,x=h.workLoad||100,b=x*30/8,_=h.workerScript||"forge/prime.worker.js";if(E===-1)return zI.util.estimateCores(function(P,N){P&&(N=2),E=N-1,k()});k();function k(){E=Math.max(1,E);for(var P=[],N=0;N<E;++N)P[N]=new Worker(_);for(var M=E,N=0;N<E;++N)P[N].addEventListener("message",se);var J=!1;function se(K){if(!J){--M;var G=K.data;if(G.found){for(var q=0;q<P.length;++q)P[q].terminate();return J=!0,g(null,new e(G.prime,16))}y.bitLength()>p&&(y=u(p,m));var le=y.toString(16);K.target.postMessage({hex:le,workLoad:x}),y.dAddOffset(b,0)}}s(se,"workerMessage")}s(k,"generate")}s(l,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function f(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(f,"getMillerRabinTests")})()});var AO=Q((EZn,ftt)=>{d();var on=xi();Pg();gO();VI();hEe();AEe();qm();_o();typeof Co>"u"&&(Co=on.jsbn.BigInteger);var Co,yEe=on.util.isNodejs?require("crypto"):null,He=on.asn1,Wm=on.util;on.pki=on.pki||{};ftt.exports=on.pki.rsa=on.rsa=on.rsa||{};var ui=on.pki,wZt=[6,4,2,4,2,4,6,2],_Zt={name:"PrivateKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},SZt={name:"RSAPrivateKey",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},RZt={name:"RSAPublicKey",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},kZt=on.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:He.Class.UNIVERSAL,type:He.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},PZt={name:"DigestInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:He.Class.UNIVERSAL,type:He.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:He.Class.UNIVERSAL,type:He.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},BZt=s(function(t){var e;if(t.algorithm in ui.oids)e=ui.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=He.oidToDer(e).getBytes(),i=He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[]),o=He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[]);o.value.push(He.create(He.Class.UNIVERSAL,He.Type.OID,!1,n)),o.value.push(He.create(He.Class.UNIVERSAL,He.Type.NULL,!1,""));var a=He.create(He.Class.UNIVERSAL,He.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),He.toDer(i).getBytes()},"emsaPkcs1v15encode"),utt=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Co.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Co.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Co(on.util.bytesToHex(on.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Co.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");ui.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=dtt(t,e,r)):(i=on.util.createBuffer(),i.putBytes(t));for(var a=new Co(i.toHex(),16),c=utt(a,e,n),l=c.toString(16),u=on.util.createBuffer(),f=o-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(on.util.hexToBytes(l)),u.getBytes()};ui.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new Co(on.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=utt(a,e,r),l=c.toString(16),u=on.util.createBuffer(),f=i-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(on.util.hexToBytes(l)),n!==!1?ZX(u.getBytes(),e,r):u.getBytes()};ui.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||on.random,i={nextBytes:s(function(c){for(var l=n.getBytesSync(c.length),u=0;u<c.length;++u)c[u]=l.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new Co(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};ui.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Co(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,c=0;t.keys===null&&(e<=0||c<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,u=l-1;t.pqState===0?(t.num=new Co(l,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Co.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime(NZt(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(wZt[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Co.ONE).gcd(t.e).compareTo(Co.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Co.ONE),t.q1=t.q.subtract(Co.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Co.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:ui.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ui.rsa.setPublicKey(t.n,t.e)}}a=+new Date,c+=a-o,o=a}return t.keys!==null};ui.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!on.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(stt("generateKeyPair"))return yEe.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(c,l,u){if(c)return n(c);n(null,{privateKey:ui.privateKeyFromPem(u),publicKey:ui.publicKeyFromPem(l)})});if(att("generateKey")&&att("exportKey"))return Wm.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:ltt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(c){return Wm.globalScope.crypto.subtle.exportKey("pkcs8",c.privateKey)}).then(void 0,function(c){n(c)}).then(function(c){if(c){var l=ui.privateKeyFromAsn1(He.fromDer(on.util.createBuffer(c)));n(null,{privateKey:l,publicKey:ui.setRsaPublicKey(l.n,l.e)})}});if(ctt("generateKey")&&ctt("exportKey")){var i=Wm.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:ltt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(c){var l=c.target.result,u=Wm.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(f){var p=f.target.result,m=ui.privateKeyFromAsn1(He.fromDer(on.util.createBuffer(p)));n(null,{privateKey:m,publicKey:ui.setRsaPublicKey(m.n,m.e)})},u.onerror=function(f){n(f)}},i.onerror=function(c){n(c)};return}}else if(stt("generateKeyPairSync")){var o=yEe.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ui.privateKeyFromPem(o.privateKey),publicKey:ui.publicKeyFromPem(o.publicKey)}}}var a=ui.rsa.createKeyPairGenerationState(t,e,r);if(!n)return ui.rsa.stepKeyPairGenerationState(a,0),a.keys;DZt(a,r,n)};ui.setRsaPublicKey=ui.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(c,l,u){return dtt(c,l,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(c,l){return on.pkcs1.encode_rsa_oaep(l,c,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(c){return c},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return ui.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(l,u){u=ZX(u,r,!0);var f=He.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!He.validate(f,PZt,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=He.derToOid(p.algorithmIdentifier);if(!(g===on.oids.md2||g===on.oids.md5||g===on.oids.sha1||g===on.oids.sha224||g===on.oids.sha256||g===on.oids.sha384||g===on.oids.sha512||g===on.oids["sha512-224"]||g===on.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===on.oids.md2||g===on.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(l,u){return u=ZX(u,r,!0),l===u},"verify")});var c=ui.rsa.decrypt(i,r,!0,!1);return o.verify(n,c,r.n.bitLength())},r};ui.setRsaPrivateKey=ui.rsa.setPrivateKey=function(t,e,r,n,i,o,a,c){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:c};return l.decrypt=function(u,f,p){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var m=ui.rsa.decrypt(u,l,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:ZX};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:s(function(h,g){return on.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(m,l,!1)},l.sign=function(u,f){var p=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:BZt},p=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:s(function(){return u},"encode")},p=1);var m=f.encode(u,l.n.bitLength());return ui.rsa.encrypt(m,l,p)},l};ui.wrapRsaPrivateKey=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,He.integerToDer(0).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.OID,!1,He.oidToDer(ui.oids.rsaEncryption).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.NULL,!1,"")]),He.create(He.Class.UNIVERSAL,He.Type.OCTETSTRING,!1,He.toDer(t).getBytes())])};ui.privateKeyFromAsn1=function(t){var e={},r=[];if(He.validate(t,_Zt,e,r)&&(t=He.fromDer(on.util.createBuffer(e.privateKey))),e={},r=[],!He.validate(t,SZt,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,c,l,u,f,p;return i=on.util.createBuffer(e.privateKeyModulus).toHex(),o=on.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=on.util.createBuffer(e.privateKeyPrivateExponent).toHex(),c=on.util.createBuffer(e.privateKeyPrime1).toHex(),l=on.util.createBuffer(e.privateKeyPrime2).toHex(),u=on.util.createBuffer(e.privateKeyExponent1).toHex(),f=on.util.createBuffer(e.privateKeyExponent2).toHex(),p=on.util.createBuffer(e.privateKeyCoefficient).toHex(),ui.setRsaPrivateKey(new Co(i,16),new Co(o,16),new Co(a,16),new Co(c,16),new Co(l,16),new Co(u,16),new Co(f,16),new Co(p,16))};ui.privateKeyToAsn1=ui.privateKeyToRSAPrivateKey=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,He.integerToDer(0).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.n)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.e)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.d)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.p)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.q)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.dP)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.dQ)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.qInv))])};ui.publicKeyFromAsn1=function(t){var e={},r=[];if(He.validate(t,kZt,e,r)){var n=He.derToOid(e.publicKeyOid);if(n!==ui.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!He.validate(t,RZt,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=on.util.createBuffer(e.publicKeyModulus).toHex(),a=on.util.createBuffer(e.publicKeyExponent).toHex();return ui.setRsaPublicKey(new Co(o,16),new Co(a,16))};ui.publicKeyToAsn1=ui.publicKeyToSubjectPublicKeyInfo=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.OID,!1,He.oidToDer(ui.oids.rsaEncryption).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.NULL,!1,"")]),He.create(He.Class.UNIVERSAL,He.Type.BITSTRING,!1,[ui.publicKeyToRSAPublicKey(t)])])};ui.publicKeyToRSAPublicKey=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.n)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,Xy(t.e))])};function dtt(t,e,r){var n=on.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,c;if(r===0||r===1){c=r===0?0:255;for(var l=0;l<a;++l)n.putByte(c)}else for(;a>0;){for(var u=0,f=on.random.getBytes(a),l=0;l<a;++l)c=f.charCodeAt(l),c===0?++u:n.putByte(c);a=u}return n.putByte(0),n.putBytes(t),n}s(dtt,"_encodePkcs1_v1_5");function ZX(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=on.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(a!==0||r&&c!==0&&c!==1||!r&&c!=2||r&&c===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(c===0){l=i-3-n;for(var u=0;u<l;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(c===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(c===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var f=o.getByte();if(f!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(ZX,"_decodePkcs1_v1_5");function DZt(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(c,l){if(c)return r(c);if(t.p=l,t.q!==null)return a(c,t.q);o(t.qBits,a)})}s(i,"generate");function o(c,l){on.prime.generateProbablePrime(c,n,l)}s(o,"getPrime");function a(c,l){if(c)return r(c);if(t.q=l,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Co.ONE).gcd(t.e).compareTo(Co.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Co.ONE).gcd(t.e).compareTo(Co.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(Co.ONE),t.q1=t.q.subtract(Co.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Co.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:ui.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ui.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(DZt,"_generateKeyPair");function Xy(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=on.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(Xy,"_bnToBytes");function NZt(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(NZt,"_getMillerRabinTests");function stt(t){return on.util.isNodejs&&typeof yEe[t]=="function"}s(stt,"_detectNodeCrypto");function att(t){return typeof Wm.globalScope<"u"&&typeof Wm.globalScope.crypto=="object"&&typeof Wm.globalScope.crypto.subtle=="object"&&typeof Wm.globalScope.crypto.subtle[t]=="function"}s(att,"_detectSubtleCrypto");function ctt(t){return typeof Wm.globalScope<"u"&&typeof Wm.globalScope.msCrypto=="object"&&typeof Wm.globalScope.msCrypto.subtle=="object"&&typeof Wm.globalScope.msCrypto.subtle[t]=="function"}s(ctt,"_detectSubtleMsCrypto");function ltt(t){for(var e=on.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(ltt,"_intToUint8Array")});var CEe=Q((bZn,Att)=>{d();var pr=xi();jI();Pg();mO();jy();VI();zX();j2();qm();uEe();AO();_o();typeof ptt>"u"&&(ptt=pr.jsbn.BigInteger);var ptt,lt=pr.asn1,gi=pr.pki=pr.pki||{};Att.exports=gi.pbe=pr.pbe=pr.pbe||{};var z2=gi.oids,LZt={name:"EncryptedPrivateKeyInfo",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},MZt={name:"PBES2Algorithms",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:lt.Class.UNIVERSAL,type:lt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:lt.Class.UNIVERSAL,type:lt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},FZt={name:"pkcs-12PbeParams",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:lt.Class.UNIVERSAL,type:lt.Type.INTEGER,constructed:!1,capture:"iterations"}]};gi.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=pr.random.getBytesSync(r.saltSize),i=r.count,o=lt.integerToDer(i),a,c,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,p;switch(r.algorithm){case"aes128":a=16,u=16,f=z2["aes128-CBC"],p=pr.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,f=z2["aes192-CBC"],p=pr.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,f=z2["aes256-CBC"],p=pr.aes.createEncryptionCipher;break;case"des":a=8,u=8,f=z2.desCBC,p=pr.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=gtt(h),y=pr.pkcs5.pbkdf2(e,n,i,a,g),E=pr.random.getBytesSync(u),x=p(y);x.start(E),x.update(lt.toDer(t)),x.finish(),l=x.output.getBytes();var b=OZt(n,o,a,h);c=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(z2.pkcs5PBES2).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(z2.pkcs5PBKDF2).getBytes()),b]),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(f).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,E)])])])}else if(r.algorithm==="3des"){a=24;var _=new pr.util.ByteBuffer(n),y=gi.pbe.generatePkcs12Key(e,_,1,i,a),E=gi.pbe.generatePkcs12Key(e,_,2,i,a),x=pr.des.createEncryptionCipher(y);x.start(E),x.update(lt.toDer(t)),x.finish(),l=x.output.getBytes(),c=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(z2["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,n),lt.create(lt.Class.UNIVERSAL,lt.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var k=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[c,lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,l)]);return k};gi.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!lt.validate(t,LZt,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=lt.derToOid(n.encryptionOid),c=gi.pbe.getCipher(a,n.encryptionParams,e),l=pr.util.createBuffer(n.encryptedData);return c.update(l),c.finish()&&(r=lt.fromDer(c.output)),r};gi.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:lt.toDer(t).getBytes()};return pr.pem.encode(r,{maxline:e})};gi.encryptedPrivateKeyFromPem=function(t){var e=pr.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return lt.fromDer(e.body)};gi.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=gi.wrapRsaPrivateKey(gi.privateKeyToAsn1(t));return n=gi.encryptPrivateKeyInfo(n,e,r),gi.encryptedPrivateKeyToPem(n)}var i,o,a,c;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=pr.random.getBytesSync(16),c=pr.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=pr.random.getBytesSync(16),c=pr.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=pr.random.getBytesSync(16),c=pr.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=pr.random.getBytesSync(8),c=pr.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=pr.random.getBytesSync(8),c=pr.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var u=pr.pbe.opensslDeriveBytes(e,o.substr(0,8),a),f=c(u);f.start(o),f.update(lt.toDer(gi.privateKeyToAsn1(t))),f.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:pr.util.bytesToHex(o).toUpperCase()},body:f.output.getBytes()};return pr.pem.encode(p)};gi.decryptRsaPrivateKey=function(t,e){var r=null,n=pr.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=pr.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=pr.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=pr.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=pr.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=pr.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return pr.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return pr.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return pr.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var c=pr.util.hexToBytes(n.dekInfo.parameters),l=pr.pbe.opensslDeriveBytes(e,c.substr(0,8),o),u=a(l);if(u.start(c),u.update(pr.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=gi.decryptPrivateKeyInfo(lt.fromDer(r),e):r=lt.fromDer(r),r!==null&&(r=gi.privateKeyFromAsn1(r)),r};gi.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,c;if(typeof o>"u"||o===null){if(!("sha1"in pr.md))throw new Error('"sha1" hash algorithm unavailable.');o=pr.md.sha1.create()}var l=o.digestLength,u=o.blockLength,f=new pr.util.ByteBuffer,p=new pr.util.ByteBuffer;if(t!=null){for(c=0;c<t.length;c++)p.putInt16(t.charCodeAt(c));p.putInt16(0)}var m=p.length(),h=e.length(),g=new pr.util.ByteBuffer;g.fillWithByte(r,u);var y=u*Math.ceil(h/u),E=new pr.util.ByteBuffer;for(c=0;c<y;c++)E.putByte(e.at(c%h));var x=u*Math.ceil(m/u),b=new pr.util.ByteBuffer;for(c=0;c<x;c++)b.putByte(p.at(c%m));var _=E;_.putBuffer(b);for(var k=Math.ceil(i/l),P=1;P<=k;P++){var N=new pr.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var M=0;M<n;M++)o.start(),o.update(N.getBytes()),N=o.digest();var J=new pr.util.ByteBuffer;for(c=0;c<u;c++)J.putByte(N.at(c%l));var se=Math.ceil(h/u)+Math.ceil(m/u),K=new pr.util.ByteBuffer;for(a=0;a<se;a++){var G=new pr.util.ByteBuffer(_.getBytes(u)),q=511;for(c=J.length()-1;c>=0;c--)q=q>>8,q+=J.at(c)+G.at(c),G.setAt(c,q&255);K.putBuffer(G)}_=K,f.putBuffer(N)}return f.truncate(f.length()-i),f};gi.pbe.getCipher=function(t,e,r){switch(t){case gi.oids.pkcs5PBES2:return gi.pbe.getCipherForPBES2(t,e,r);case gi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case gi.oids["pbewithSHAAnd40BitRC2-CBC"]:return gi.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};gi.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!lt.validate(e,MZt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=lt.derToOid(n.kdfOid),t!==gi.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=lt.derToOid(n.encOid),t!==gi.oids["aes128-CBC"]&&t!==gi.oids["aes192-CBC"]&&t!==gi.oids["aes256-CBC"]&&t!==gi.oids["des-EDE3-CBC"]&&t!==gi.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,c=pr.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var l,u;switch(gi.oids[t]){case"aes128-CBC":l=16,u=pr.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=pr.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=pr.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=pr.des.createDecryptionCipher;break;case"desCBC":l=8,u=pr.des.createDecryptionCipher;break}var f=htt(n.prfOid),p=pr.pkcs5.pbkdf2(r,a,c,l,f),m=n.encIv,h=u(p);return h.start(m),h};gi.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!lt.validate(e,FZt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=pr.util.createBuffer(n.salt),c=pr.util.createBuffer(n.iterations);c=c.getInt(c.length()<<3);var l,u,f;switch(t){case gi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,f=pr.des.startDecrypting;break;case gi.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,f=s(function(y,E){var x=pr.rc2.createDecryptionCipher(y,40);return x.start(E,null),x},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=htt(n.prfOid),m=gi.pbe.generatePkcs12Key(r,a,1,c,l,p);p.start();var h=gi.pbe.generatePkcs12Key(r,a,2,c,u,p);return f(m,h)};gi.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in pr.md))throw new Error('"md5" hash algorithm unavailable.');n=pr.md.md5.create()}e===null&&(e="");for(var i=[mtt(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(mtt(n,i[a-1]+t+e));return i.join("").substr(0,r)};function mtt(t,e){return t.start().update(e).digest().getBytes()}s(mtt,"hash");function htt(t){var e;if(!t)e="hmacWithSHA1";else if(e=gi.oids[lt.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return gtt(e)}s(htt,"prfOidToMessageDigest");function gtt(t){var e=pr.md;switch(t){case"hmacWithSHA224":e=pr.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(gtt,"prfAlgorithmToMessageDigest");function OZt(t,e,r,n){var i=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,t),lt.create(lt.Class.UNIVERSAL,lt.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(lt.create(lt.Class.UNIVERSAL,lt.Type.INTEGER,!1,pr.util.hexToBytes(r.toString(16))),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(gi.oids[n]).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.NULL,!1,"")])),i}s(OZt,"createPbkdf2Params")});var EEe=Q((wZn,Ett)=>{d();var QB=xi();Pg();_o();var ar=QB.asn1,UB=Ett.exports=QB.pkcs7asn1=QB.pkcs7asn1||{};QB.pkcs7=QB.pkcs7||{};QB.pkcs7.asn1=UB;var ytt={name:"ContentInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};UB.contentInfoValidator=ytt;var Ctt={name:"EncryptedContentInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:ar.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};UB.envelopedDataValidator={name:"EnvelopedData",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Ctt)};UB.encryptedDataValidator={name:"EncryptedData",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"}].concat(Ctt)};var QZt={name:"SignerInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:ar.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};UB.signedDataValidator={name:"SignedData",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},ytt,{name:"SignedData.Certificates",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:ar.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SET,capture:"signerInfos",optional:!0,value:[QZt]}]};UB.recipientInfoValidator={name:"RecipientInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var vEe=Q((SZn,vtt)=>{d();var Y2=xi();_o();Y2.mgf=Y2.mgf||{};var UZt=vtt.exports=Y2.mgf.mgf1=Y2.mgf1=Y2.mgf1||{};UZt.create=function(t){var e={generate:s(function(r,n){for(var i=new Y2.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var c=new Y2.util.ByteBuffer;c.putInt32(a),t.start(),t.update(r+c.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var btt=Q((PZn,xtt)=>{d();var eZ=xi();vEe();xtt.exports=eZ.mgf=eZ.mgf||{};eZ.mgf.mgf1=eZ.mgf1});var tZ=Q((DZn,Itt)=>{d();var K2=xi();qm();_o();var qZt=Itt.exports=K2.pss=K2.pss||{};qZt.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=K2.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||K2.random,c={};return c.encode=function(l,u){var f,p=u-1,m=Math.ceil(p/8),h=l.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new K2.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var E=e.digest().getBytes(),x=new K2.util.ByteBuffer;x.fillWithByte(0,m-o-n-2),x.putByte(1),x.putBytes(g);var b=x.getBytes(),_=m-n-1,k=r.generate(E,_),P="";for(f=0;f<_;f++)P+=String.fromCharCode(b.charCodeAt(f)^k.charCodeAt(f));var N=65280>>8*m-p&255;return P=String.fromCharCode(P.charCodeAt(0)&~N)+P.substr(1),P+E+"\xBC"},c.verify=function(l,u,f){var p,m=f-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,y=u.substr(0,g),E=u.substr(g,n),x=65280>>8*h-m&255;if((y.charCodeAt(0)&x)!==0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(E,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^b.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~x)+_.substr(1);var k=h-n-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var P=_.substr(-o),N=new K2.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(l),N.putBytes(P),e.start(),e.update(N.getBytes());var M=e.digest().getBytes();return E===M},c}});var iZ=Q((LZn,Rtt)=>{d();var sn=xi();jI();Pg();mO();jy();btt();VI();j2();tZ();AO();_o();var j=sn.asn1,jt=Rtt.exports=sn.pki=sn.pki||{},Eo=jt.oids,Ha={};Ha.CN=Eo.commonName;Ha.commonName="CN";Ha.C=Eo.countryName;Ha.countryName="C";Ha.L=Eo.localityName;Ha.localityName="L";Ha.ST=Eo.stateOrProvinceName;Ha.stateOrProvinceName="ST";Ha.O=Eo.organizationName;Ha.organizationName="O";Ha.OU=Eo.organizationalUnitName;Ha.organizationalUnitName="OU";Ha.E=Eo.emailAddress;Ha.emailAddress="E";var wtt=sn.pki.rsa.publicKeyValidator,HZt={name:"Certificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},wtt,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},WZt={name:"rsapss",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},GZt={name:"CertificationRequestInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},wtt,{name:"CertificationRequestInfo.attributes",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:j.Class.UNIVERSAL,type:j.Type.SET,constructed:!0}]}]}]},jZt={name:"CertificationRequest",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[GZt,{name:"CertificationRequest.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};jt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var c=0;c<n.value.length;++c)o={},i=n.value[c],o.type=j.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in Eo&&(o.name=Eo[o.type],o.name in Ha&&(o.shortName=Ha[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};jt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=j.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var c={};if(c.type=i,c.value=o[a].value,c.valueTagClass=o[a].type,c.type in Eo&&(c.name=Eo[c.type],c.name in Ha&&(c.shortName=Ha[c.name])),c.type===Eo.extensionRequest){c.extensions=[];for(var l=0;l<c.value.length;++l)c.extensions.push(jt.certificateExtensionFromAsn1(c.value[l]))}e.push(c)}return e};function YI(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(YI,"_getAttribute");var rZ=s(function(t,e,r){var n={};if(t!==Eo["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Eo.sha1},mgf:{algorithmOid:Eo.mgf1,hash:{algorithmOid:Eo.sha1}},saltLength:20});var i={},o=[];if(!j.validate(e,WZt,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=j.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=j.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=j.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),nZ=s(function(t){switch(Eo[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return sn.md.sha1.create();case"md5WithRSAEncryption":return sn.md.md5.create();case"sha256WithRSAEncryption":return sn.md.sha256.create();case"sha384WithRSAEncryption":return sn.md.sha384.create();case"sha512WithRSAEncryption":return sn.md.sha512.create();case"RSASSA-PSS":return sn.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),_tt=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case Eo.sha1WithRSAEncryption:case Eo.sha1WithRSASignature:break;case Eo["RSASSA-PSS"]:var n,i;if(n=Eo[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||sn.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=Eo[e.signatureParameters.mgf.algorithmOid],i===void 0||sn.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=sn.mgf[i].create(sn.md[n].create()),n=Eo[e.signatureParameters.hash.algorithmOid],n===void 0||sn.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=sn.pss.create(sn.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");jt.certificateFromPem=function(t,e,r){var n=sn.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=j.fromDer(n.body,r);return jt.certificateFromAsn1(o,e)};jt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:j.toDer(jt.certificateToAsn1(t)).getBytes()};return sn.pem.encode(r,{maxline:e})};jt.publicKeyFromPem=function(t){var e=sn.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=j.fromDer(e.body);return jt.publicKeyFromAsn1(n)};jt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:j.toDer(jt.publicKeyToAsn1(t)).getBytes()};return sn.pem.encode(r,{maxline:e})};jt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:j.toDer(jt.publicKeyToRSAPublicKey(t)).getBytes()};return sn.pem.encode(r,{maxline:e})};jt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||sn.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=j.toDer(jt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=j.toDer(jt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};jt.certificationRequestFromPem=function(t,e,r){var n=sn.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=j.fromDer(n.body,r);return jt.certificationRequestFromAsn1(o,e)};jt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:j.toDer(jt.certificationRequestToAsn1(t)).getBytes()};return sn.pem.encode(r,{maxline:e})};jt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return YI(t.issuer,e)},t.issuer.addField=function(e){Gm([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return YI(t.subject,e)},t.subject.addField=function(e){Gm([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Gm(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Gm(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)Stt(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||sn.md.sha1.create();var n=Eo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=jt.getTBSCertificate(t);var o=j.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=nZ({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||jt.getTBSCertificate(e),l=j.toDer(c);a.update(l.getBytes())}return a!==null&&(r=_tt({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,c=0;r&&c<n.attributes.length;++c)o=n.attributes[c],a=i.attributes[c],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return jt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Eo.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return sn.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};jt.certificateFromAsn1=function(t,e){var r={},n=[];if(!j.validate(t,HZt,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=j.derToOid(r.publicKeyOid);if(o!==jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=jt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=sn.util.createBuffer(r.certSerialNumber);a.serialNumber=c.toHex(),a.signatureOid=sn.asn1.derToOid(r.certSignatureOid),a.signatureParameters=rZ(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=sn.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=rZ(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(j.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(j.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(j.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(j.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=r.tbsCertificate,e){a.md=nZ({signatureOid:a.signatureOid,type:"certificate"});var u=j.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var f=sn.md.sha1.create(),p=j.toDer(r.certIssuer);f.update(p.getBytes()),a.issuer.getField=function(g){return YI(a.issuer,g)},a.issuer.addField=function(g){Gm([g]),a.issuer.attributes.push(g)},a.issuer.attributes=jt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=f.digest().toHex();var m=sn.md.sha1.create(),h=j.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return YI(a.subject,g)},a.subject.addField=function(g){Gm([g]),a.subject.attributes.push(g)},a.subject.attributes=jt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=jt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};jt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(jt.certificateExtensionFromAsn1(n.value[i]));return e};jt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=j.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===j.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Eo){if(e.name=Eo[e.id],e.name==="keyUsage"){var r=j.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=j.fromDer(e.value);r.value.length>0&&r.value[0].type===j.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===j.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=j.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=j.fromDer(e.value),a=0;a<r.value.length;++a){var c=j.derToOid(r.value[a].value);c in Eo?e[Eo[c]]=!0:e[c]=!0}else if(e.name==="nsCertType"){var r=j.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=j.fromDer(e.value),u=0;u<r.value.length;++u){l=r.value[u];var f={type:l.type,value:l.value};switch(e.altNames.push(f),l.type){case 1:case 2:case 6:break;case 7:f.ip=sn.util.bytesToIP(l.value);break;case 8:f.oid=j.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=j.fromDer(e.value);e.subjectKeyIdentifier=sn.util.bytesToHex(r.value)}}return e};jt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!j.validate(t,jZt,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=j.derToOid(r.publicKeyOid);if(o!==jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=jt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=sn.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=rZ(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=sn.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=rZ(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=nZ({signatureOid:a.signatureOid,type:"certification request"});var c=j.toDer(a.certificationRequestInfo);a.md.update(c.getBytes())}var l=sn.md.sha1.create();return a.subject.getField=function(u){return YI(a.subject,u)},a.subject.addField=function(u){Gm([u]),a.subject.attributes.push(u)},a.subject.attributes=jt.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return YI(a,u)},a.addAttribute=function(u){Gm([u]),a.attributes.push(u)},a.attributes=jt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};jt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return YI(t.subject,e)},t.subject.addField=function(e){Gm([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return YI(t,e)},t.addAttribute=function(e){Gm([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Gm(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Gm(e),t.attributes=e},t.sign=function(e,r){t.md=r||sn.md.sha1.create();var n=Eo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=jt.getCertificationRequestInfo(t);var o=j.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=nZ({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||jt.getCertificationRequestInfo(t),i=j.toDer(n);r.update(i.getBytes())}return r!==null&&(e=_tt({certificate:t,md:r,signature:t.signature})),e},t};function qB(t){for(var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,c=j.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass,c===j.Type.UTF8&&(a=sn.util.encodeUtf8(a))),n=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(r.type).getBytes()),j.create(j.Class.UNIVERSAL,c,!1,a)])]),e.value.push(n)}return e}s(qB,"_dnToAsn1");function Gm(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in jt.oids?e.name=jt.oids[e.type]:e.shortName&&e.shortName in Ha&&(e.name=jt.oids[Ha[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in jt.oids)e.type=jt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in Ha&&(e.shortName=Ha[e.name]),e.type===Eo.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=j.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(jt.certificateExtensionToAsn1(Stt(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(Gm,"_fillMissingFields");function Stt(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in jt.oids&&(t.name=jt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in jt.oids)t.id=jt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var l in t)t[l]===!0&&(l in Eo?c.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(Eo[l]).getBytes())):l.indexOf(".")!==-1&&c.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=sn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));t.value.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=j.create(j.Class.UNIVERSAL,j.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var c=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[j.create(j.Class.CONTEXT_SPECIFIC,4,!0,[qB(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];c.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=sn.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);c.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var c=t.value.value,y=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),E=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]),u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=sn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));E.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[E])),c.push(y)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(Stt,"_fillMissingExtensionFields");function xEe(t,e){switch(t){case Eo["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.saltLength).getBytes())])),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,r);default:return j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")}}s(xEe,"_signatureParametersToAsn1");function VZt(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=j.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===j.Type.UTF8&&(o=sn.util.encodeUtf8(o));var c=!1;"valueConstructed"in i&&(c=i.valueConstructed);var l=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(i.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,a,c,o)])]);e.value.push(l)}return e}s(VZt,"_CRIAttributesToAsn1");var $Zt=new Date("1950-01-01T00:00:00Z"),zZt=new Date("2050-01-01T00:00:00Z");function Ttt(t){return t>=$Zt&&t<zZt?j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(t)):j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(t))}s(Ttt,"_dateToAsn1");jt.getTBSCertificate=function(t){var e=Ttt(t.validity.notBefore),r=Ttt(t.validity.notAfter),n=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes())]),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,sn.util.hexToBytes(t.serialNumber)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.siginfo.algorithmOid).getBytes()),xEe(t.siginfo.algorithmOid,t.siginfo.parameters)]),qB(t.issuer),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,r]),qB(t.subject),jt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(jt.certificateExtensionsToAsn1(t.extensions)),n};jt.getCertificationRequestInfo=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),qB(t.subject),jt.publicKeyToAsn1(t.publicKey),VZt(t)]);return e};jt.distinguishedNameToAsn1=function(t){return qB(t)};jt.certificateToAsn1=function(t){var e=t.tbsCertificate||jt.getTBSCertificate(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),xEe(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};jt.certificateExtensionsToAsn1=function(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,3,!0,[]),r=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(jt.certificateExtensionToAsn1(t[n]));return e};jt.certificateExtensionToAsn1=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.id).getBytes())),t.critical&&e.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=j.toDer(r).getBytes()),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,r)),e};jt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||jt.getCertificationRequestInfo(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),xEe(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};jt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var c=r(a.issuer);return c},e.addCertificate=function(a){if(typeof a=="string"&&(a=sn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var c=e.certs[a.subject.hash];sn.util.isArray(c)||(c=[c]),c.push(a),e.certs[a.subject.hash]=c}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=sn.pki.certificateFromPem(a));var c=r(a.subject);if(!c)return!1;sn.util.isArray(c)||(c=[c]);for(var l=j.toDer(jt.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var f=j.toDer(jt.certificateToAsn1(c[u])).getBytes();if(l===f)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var c in e.certs)if(e.certs.hasOwnProperty(c)){var l=e.certs[c];if(!sn.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},e.removeCertificate=function(a){var c;if(typeof a=="string"&&(a=sn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var l=r(a.subject);if(!sn.util.isArray(l))return c=e.certs[a.subject.hash],delete e.certs[a.subject.hash],c;for(var u=j.toDer(jt.certificateToAsn1(a)).getBytes(),f=0;f<l.length;++f){var p=j.toDer(jt.certificateToAsn1(l[f])).getBytes();u===p&&(c=l[f],l.splice(f,1))}return l.length===0&&delete e.certs[a.subject.hash],c};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var c=sn.md.sha1.create();a.attributes=jt.RDNAttributesAsArray(qB(a),c),a.hash=c.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};jt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};jt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,c=0;do{var l=e.shift(),u=null,f=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:jt.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(l),u===null&&l.isIssuer(l)&&(f=!0,u=l),u){var p=u;sn.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(l)}catch{}}m||(a={message:"Certificate signature is invalid.",error:jt.certificateError.bad_certificate})}a===null&&(!u||f)&&!t.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:jt.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:jt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<l.extensions.length;++g){var y=l.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:jt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||f))){var E=l.getExtension("basicConstraints"),x=l.getExtension("keyUsage");if(x!==null&&(!x.keyCertSign||E===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:jt.certificateError.bad_certificate}),a===null&&E!==null&&!E.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:jt.certificateError.bad_certificate}),a===null&&x!==null&&"pathLenConstraint"in E){var b=c-1;b>E.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:jt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=r.verify?r.verify(_,c,n):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:jt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!sn.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++c}while(e.length>0);return!0}});var IEe=Q((OZn,Ptt)=>{d();var ws=xi();Pg();NB();VI();EEe();CEe();qm();AO();OB();_o();iZ();var Ie=ws.asn1,Ui=ws.pki,CO=Ptt.exports=ws.pkcs12=ws.pkcs12||{},ktt={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},YZt={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},ktt,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},KZt={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},JZt={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},XZt={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function yO(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var c=t[o].safeBags[a];if(!(n!==void 0&&c.type!==n)){if(e===null){i.push(c);continue}c.attributes[e]!==void 0&&c.attributes[e].indexOf(r)>=0&&i.push(c)}}return i}s(yO,"_getBagsByAttribute");CO.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Ie.validate(t,YZt,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(E){var x={},b;return"localKeyId"in E?b=E.localKeyId:"localKeyIdHex"in E&&(b=ws.util.hexToBytes(E.localKeyIdHex)),b===void 0&&!("friendlyName"in E)&&"bagType"in E&&(x[E.bagType]=yO(a.safeContents,null,null,E.bagType)),b!==void 0&&(x.localKeyId=yO(a.safeContents,"localKeyId",b,E.bagType)),"friendlyName"in E&&(x.friendlyName=yO(a.safeContents,"friendlyName",E.friendlyName,E.bagType)),x},"getBags"),getBagsByFriendlyName:s(function(E,x){return yO(a.safeContents,"friendlyName",E,x)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(E,x){return yO(a.safeContents,"localKeyId",E,x)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Ie.derToOid(n.contentType)!==Ui.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(n.contentType),o}var c=n.content.value[0];if(c.tagClass!==Ie.Class.UNIVERSAL||c.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(c=bEe(c),n.mac){var l=null,u=0,f=Ie.derToOid(n.macAlgorithm);switch(f){case Ui.oids.sha1:l=ws.md.sha1.create(),u=20;break;case Ui.oids.sha256:l=ws.md.sha256.create(),u=32;break;case Ui.oids.sha384:l=ws.md.sha384.create(),u=48;break;case Ui.oids.sha512:l=ws.md.sha512.create(),u=64;break;case Ui.oids.md5:l=ws.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+f);var p=new ws.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(ws.util.bytesToHex(n.macIterations),16):1,h=CO.generateKey(r,p,3,m,u,l),g=ws.hmac.create();g.start(l,h),g.update(c.value);var y=g.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return ZZt(a,c.value,e,r),a};function bEe(t){if(t.composed||t.constructed){for(var e=ws.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(bEe,"_decodePkcs7Data");function ZZt(t,e,r,n){if(e=Ie.fromDer(e,r),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},c=[];if(!Ie.validate(o,ktt,a,c)){var l=new Error("Cannot read ContentInfo.");throw l.errors=c,l}var u={encrypted:!1},f=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case Ui.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");f=bEe(p).value;break;case Ui.oids.encryptedData:f=eer(p,n),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=Ie.derToOid(a.contentType),l}u.safeBags=ter(f,r,n),t.safeContents.push(u)}}s(ZZt,"_decodeAuthenticatedSafe");function eer(t,e){var r={},n=[];if(!Ie.validate(t,ws.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Ie.derToOid(r.contentType);if(o!==Ui.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(r.encAlgorithm);var a=Ui.pbe.getCipher(o,r.encParameter,e),c=bEe(r.encryptedContentAsn1),l=ws.util.createBuffer(c.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(eer,"_decryptSafeContents");function ter(t,e,r){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},c=[];if(!Ie.validate(o,KZt,a,c)){var l=new Error("Cannot read SafeBag.");throw l.errors=c,l}var u={type:Ie.derToOid(a.bagId),attributes:rer(a.bagAttributes)};n.push(u);var f,p,m=a.bagValue.value[0];switch(u.type){case Ui.oids.pkcs8ShroudedKeyBag:if(m=Ui.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Ui.oids.keyBag:try{u.key=Ui.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case Ui.oids.certBag:f=XZt,p=s(function(){if(Ie.derToOid(a.certId)!==Ui.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=Ui.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(f!==void 0&&!Ie.validate(m,f,a,c)){var l=new Error("Cannot read PKCS#12 "+f.name);throw l.errors=c,l}p()}return n}s(ter,"_decodeSafeContents");function rer(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Ie.validate(t[r],JZt,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(n.oid);if(Ui.oids[a]!==void 0){e[Ui.oids[a]]=[];for(var c=0;c<n.values.length;++c)e[Ui.oids[a]].push(n.values[c].value)}}return e}s(rer,"_decodeBagAttributes");CO.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=ws.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=ws.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=Ui.certificateFromPem(a));var c=ws.md.sha1.create();c.update(Ie.toDer(Ui.certificateToAsn1(a)).getBytes()),i=c.digest().getBytes()}else i=ws.random.getBytes(20);var l=[];i!==null&&l.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,l));var u=[],f=[];e!==null&&(ws.util.isArray(e)?f=e:f=[e]);for(var p=[],m=0;m<f.length;++m){e=f[m],typeof e=="string"&&(e=Ui.certificateFromPem(e));var h=m===0?o:void 0,g=Ui.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),x=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(E).getBytes())])]);u.push(x)}var b=null;if(t!==null){var _=Ui.wrapRsaPrivateKey(Ui.privateKeyToAsn1(t));r===null?b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ui.encryptPrivateKeyInfo(_,r,n)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[b]),P=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(P)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),M;if(n.useMac){var c=ws.md.sha1.create(),J=new ws.util.ByteBuffer(ws.random.getBytes(n.saltSize)),se=n.count,t=CO.generateKey(r,J,3,se,20),K=ws.hmac.create();K.start(c,t),K.update(Ie.toDer(N).getBytes());var G=K.getMac();M=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,G.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,J.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(se).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),M])};CO.generateKey=ws.pbe.generatePkcs12Key});var wEe=Q((qZn,Btt)=>{d();var KI=xi();Pg();VI();CEe();j2();zX();IEe();tZ();AO();_o();iZ();var TEe=KI.asn1,HB=Btt.exports=KI.pki=KI.pki||{};HB.pemToDer=function(t){var e=KI.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return KI.util.createBuffer(e.body)};HB.privateKeyFromPem=function(t){var e=KI.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=TEe.fromDer(e.body);return HB.privateKeyFromAsn1(n)};HB.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:TEe.toDer(HB.privateKeyToAsn1(t)).getBytes()};return KI.pem.encode(r,{maxline:e})};HB.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:TEe.toDer(t).getBytes()};return KI.pem.encode(r,{maxline:e})}});var BEe=Q((WZn,Utt)=>{d();var bt=xi();Pg();NB();GX();j2();wEe();qm();OB();_o();var cZ=s(function(t,e,r,n){var i=bt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),c=t.substr(0,a),l=t.substr(o,a),u=bt.util.createBuffer(),f=bt.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);f.start("MD5",c);var h=bt.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),h.putBuffer(f.digest());f.start("SHA1",l);var y=bt.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),y.putBuffer(f.digest());return i.putBytes(bt.util.xorBytes(h.getBytes(),y.getBytes(),n)),i},"prf_TLS1"),ner=s(function(t,e,r){var n=bt.hmac.create();n.start("SHA1",t);var i=bt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),ier=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=bt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),oer=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=bt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),rp=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return bt.util.createBuffer(t.getBytes(r))},"readVector"),jm=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),Y={};Y.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};Y.SupportedVersions=[Y.Versions.TLS_1_1,Y.Versions.TLS_1_0];Y.Version=Y.SupportedVersions[0];Y.MaxFragment=15360;Y.ConnectionEnd={server:0,client:1};Y.PRFAlgorithm={tls_prf_sha256:0};Y.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};Y.CipherType={stream:0,block:1,aead:2};Y.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};Y.CompressionMethod={none:0,deflate:1};Y.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};Y.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};Y.Alert={};Y.Alert.Level={warning:1,fatal:2};Y.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};Y.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};Y.CipherSuites={};Y.getCipherSuite=function(t){var e=null;for(var r in Y.CipherSuites){var n=Y.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};Y.handleUnexpected=function(t,e){var r=!t.open&&t.entity===Y.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.unexpected_message}})};Y.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(Y.queue(t,Y.createAlert(t,{level:Y.Alert.Level.warning,description:Y.Alert.Description.no_renegotiation})),Y.flush(t)),t.process()};Y.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===Y.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:bt.util.createBuffer(o.getBytes(32)),session_id:rp(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=rp(o,2),n.compression_methods=rp(o,1)),a=r-(a-o.length()),a>0){for(var c=rp(o,2);c.length()>0;)n.extensions.push({type:[c.getByte(),c.getByte()],data:rp(c,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var u=n.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var f=rp(u.data,2);f.length()>0;){var p=f.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(rp(f,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=Y.getCipherSuite(n.cipher_suite);else for(var m=bt.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=Y.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.handshake_failure},cipherSuite:bt.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=Y.CompressionMethod.none}return n};Y.createSecurityParameters=function(t,e){var r=t.entity===Y.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:Y.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:Y.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};Y.handleServerHello=function(t,e,r){var n=Y.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=Ltt,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=aer,t.session.resuming=!1,Y.createSecurityParameters(t,n)),t.session.id=i,t.process()}};Y.handleClientHello=function(t,e,r){var n=Y.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=bt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,c=1;c<Y.SupportedVersions.length&&(a=Y.SupportedVersions[c],!(a.minor<=n.version.minor));++c);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=kEe,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?mer:REe,t.session.resuming=!1,Y.createSecurityParameters(t,n)),t.open=!0,Y.queue(t,Y.createRecord(t,{type:Y.ContentType.handshake,data:Y.createServerHello(t)})),t.session.resuming?(Y.queue(t,Y.createRecord(t,{type:Y.ContentType.change_cipher_spec,data:Y.createChangeCipherSpec()})),t.state.pending=Y.createConnectionState(t),t.state.current.write=t.state.pending.write,Y.queue(t,Y.createRecord(t,{type:Y.ContentType.handshake,data:Y.createFinished(t)}))):(Y.queue(t,Y.createRecord(t,{type:Y.ContentType.handshake,data:Y.createCertificate(t)})),t.fail||(Y.queue(t,Y.createRecord(t,{type:Y.ContentType.handshake,data:Y.createServerKeyExchange(t)})),t.verifyClient!==!1&&Y.queue(t,Y.createRecord(t,{type:Y.ContentType.handshake,data:Y.createCertificateRequest(t)})),Y.queue(t,Y.createRecord(t,{type:Y.ContentType.handshake,data:Y.createServerHelloDone(t)})))),Y.flush(t),t.process()}};Y.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:rp(n,3)},o,a,c=[];try{for(;i.certificate_list.length()>0;)o=rp(i.certificate_list,3),a=bt.asn1.fromDer(o),o=bt.pki.certificateFromAsn1(a,!0),c.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.bad_certificate}})}var l=t.entity===Y.ConnectionEnd.client;(l||t.verifyClient===!0)&&c.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.illegal_parameter}}):c.length===0?t.expect=l?Dtt:REe:(l?t.session.serverCertificate=c[0]:t.session.clientCertificate=c[0],Y.verifyCertificateChain(t,c)&&(t.expect=l?Dtt:REe)),t.process()};Y.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.unsupported_certificate}});t.expect=cer,t.process()};Y.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:rp(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=bt.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==a.pre_master_secret.charCodeAt(0)||c.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=bt.random.getBytes(48)}t.expect=kEe,t.session.clientCertificate!==null&&(t.expect=her),t.process()};Y.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:rp(n,1),certificate_authorities:rp(n,2)};t.session.certificateRequest=i,t.expect=ler,t.process()};Y.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:rp(n,2).getBytes()},a=bt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var c=t.session.clientCertificate;if(!c.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.handshake_failure}})}t.expect=kEe,t.process()};Y.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!bt.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=Y.createRecord(t,{type:Y.ContentType.handshake,data:Y.createCertificate(t)}),Y.queue(t,e)),e=Y.createRecord(t,{type:Y.ContentType.handshake,data:Y.createClientKeyExchange(t)}),Y.queue(t,e),t.expect=fer;var a=s(function(c,l){c.session.certificateRequest!==null&&c.session.clientCertificate!==null&&Y.queue(c,Y.createRecord(c,{type:Y.ContentType.handshake,data:Y.createCertificateVerify(c,l)})),Y.queue(c,Y.createRecord(c,{type:Y.ContentType.change_cipher_spec,data:Y.createChangeCipherSpec()})),c.state.pending=Y.createConnectionState(c),c.state.current.write=c.state.pending.write,Y.queue(c,Y.createRecord(c,{type:Y.ContentType.handshake,data:Y.createFinished(c)})),c.expect=Ltt,Y.flush(c),c.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);Y.getClientSignature(t,a)};Y.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.illegal_parameter}});var r=t.entity===Y.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=Y.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?uer:ger,t.process()};Y.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=bt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===Y.ConnectionEnd.client,c=a?"server finished":"client finished",l=t.session.sp,u=12,f=cZ;if(n=f(l.master_secret,c,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(Y.queue(t,Y.createRecord(t,{type:Y.ContentType.change_cipher_spec,data:Y.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,Y.queue(t,Y.createRecord(t,{type:Y.ContentType.handshake,data:Y.createFinished(t)}))),t.expect=a?der:Aer,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,Y.flush(t),t.isConnected=!0,t.connected(t),t.process()};Y.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case Y.Alert.Description.close_notify:i="Connection closed.";break;case Y.Alert.Description.unexpected_message:i="Unexpected message.";break;case Y.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case Y.Alert.Description.decryption_failed:i="Decryption failed.";break;case Y.Alert.Description.record_overflow:i="Record overflow.";break;case Y.Alert.Description.decompression_failure:i="Decompression failed.";break;case Y.Alert.Description.handshake_failure:i="Handshake failure.";break;case Y.Alert.Description.bad_certificate:i="Bad certificate.";break;case Y.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case Y.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case Y.Alert.Description.certificate_expired:i="Certificate expired.";break;case Y.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case Y.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case Y.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case Y.Alert.Description.access_denied:i="Access denied.";break;case Y.Alert.Description.decode_error:i="Decode error.";break;case Y.Alert.Description.decrypt_error:i="Decrypt error.";break;case Y.Alert.Description.export_restriction:i="Export restriction.";break;case Y.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case Y.Alert.Description.insufficient_security:i="Insufficient security.";break;case Y.Alert.Description.internal_error:i="Internal error.";break;case Y.Alert.Description.user_canceled:i="User canceled.";break;case Y.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===Y.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===Y.ConnectionEnd.client?"server":"client",alert:n}),t.process()};Y.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=bt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in aZ[t.entity][t.expect]?(t.entity===Y.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:bt.md.md5.create(),sha1:bt.md.sha1.create()}),n!==Y.HandshakeType.hello_request&&n!==Y.HandshakeType.certificate_verify&&n!==Y.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),aZ[t.entity][t.expect][n](t,e,i)):Y.handleUnexpected(t,e)};Y.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};Y.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===Y.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();Y.queue(t,Y.createRecord(t,{type:Y.ContentType.heartbeat,data:Y.createHeartbeat(Y.HeartbeatMessageType.heartbeat_response,o)})),Y.flush(t)}else if(n===Y.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,bt.util.createBuffer(o))}t.process()};var ser=0,aer=1,Dtt=2,cer=3,ler=4,Ltt=5,uer=6,der=7,fer=8,per=0,mer=1,REe=2,her=3,kEe=4,ger=5,Aer=6,$=Y.handleUnexpected,Mtt=Y.handleChangeCipherSpec,Au=Y.handleAlert,Gd=Y.handleHandshake,Ftt=Y.handleApplicationData,yu=Y.handleHeartbeat,PEe=[];PEe[Y.ConnectionEnd.client]=[[$,Au,Gd,$,yu],[$,Au,Gd,$,yu],[$,Au,Gd,$,yu],[$,Au,Gd,$,yu],[$,Au,Gd,$,yu],[Mtt,Au,$,$,yu],[$,Au,Gd,$,yu],[$,Au,Gd,Ftt,yu],[$,Au,Gd,$,yu]];PEe[Y.ConnectionEnd.server]=[[$,Au,Gd,$,yu],[$,Au,Gd,$,yu],[$,Au,Gd,$,yu],[$,Au,Gd,$,yu],[Mtt,Au,$,$,yu],[$,Au,Gd,$,yu],[$,Au,Gd,Ftt,yu],[$,Au,Gd,$,yu]];var JI=Y.handleHelloRequest,yer=Y.handleServerHello,Ott=Y.handleCertificate,Ntt=Y.handleServerKeyExchange,_Ee=Y.handleCertificateRequest,oZ=Y.handleServerHelloDone,Qtt=Y.handleFinished,aZ=[];aZ[Y.ConnectionEnd.client]=[[$,$,yer,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[JI,$,$,$,$,$,$,$,$,$,$,Ott,Ntt,_Ee,oZ,$,$,$,$,$,$],[JI,$,$,$,$,$,$,$,$,$,$,$,Ntt,_Ee,oZ,$,$,$,$,$,$],[JI,$,$,$,$,$,$,$,$,$,$,$,$,_Ee,oZ,$,$,$,$,$,$],[JI,$,$,$,$,$,$,$,$,$,$,$,$,$,oZ,$,$,$,$,$,$],[JI,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[JI,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Qtt],[JI,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[JI,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];var Cer=Y.handleClientHello,Eer=Y.handleClientKeyExchange,ver=Y.handleCertificateVerify;aZ[Y.ConnectionEnd.server]=[[$,Cer,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,Ott,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Eer,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,ver,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Qtt],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];Y.generateKeys=function(t,e){var r=cZ,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===Y.Versions.TLS_1_0.major&&t.version.minor===Y.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),c={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(c.client_write_IV=a.getBytes(e.fixed_iv_length),c.server_write_IV=a.getBytes(e.fixed_iv_length)),c};Y.createConnectionState=function(t){var e=t.entity===Y.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=Y.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case Y.CompressionMethod.none:break;case Y.CompressionMethod.deflate:n.read.compressFunction=oer,n.write.compressFunction=ier;break;default:throw new Error("Unsupported compression algorithm.")}}return n};Y.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=bt.util.createBuffer();return r.putInt32(e),r.putBytes(bt.random.getBytes(28)),r};Y.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};Y.createAlert=function(t,e){var r=bt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),Y.createRecord(t,{type:Y.ContentType.alert,data:r})};Y.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=bt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=bt.util.createBuffer();o.putByte(Y.CompressionMethod.none);var a=o.length(),c=bt.util.createBuffer();if(t.virtualHost){var l=bt.util.createBuffer();l.putByte(0),l.putByte(0);var u=bt.util.createBuffer();u.putByte(0),jm(u,2,bt.util.createBuffer(t.virtualHost));var f=bt.util.createBuffer();jm(f,2,u),jm(l,2,f),c.putBuffer(l)}var p=c.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=bt.util.createBuffer();return g.putByte(Y.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),jm(g,1,bt.util.createBuffer(m)),jm(g,2,e),jm(g,1,o),p>0&&jm(g,2,c),g};Y.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=bt.util.createBuffer();return n.putByte(Y.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),jm(n,1,bt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};Y.createCertificate=function(t){var e=t.entity===Y.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=bt.util.createBuffer();if(r!==null)try{bt.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var c=bt.pem.decode(r[a])[0];if(c.type!=="CERTIFICATE"&&c.type!=="X509 CERTIFICATE"&&c.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=c.type,l}if(c.procType&&c.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=bt.util.createBuffer(c.body);o===null&&(o=bt.asn1.fromDer(u.bytes(),!1));var f=bt.util.createBuffer();jm(f,3,u),i.putBuffer(f)}r=bt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.bad_certificate}})}var p=3+i.length(),m=bt.util.createBuffer();return m.putByte(Y.HandshakeType.certificate),m.putInt24(p),jm(m,3,i),m};Y.createClientKeyExchange=function(t){var e=bt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(bt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=bt.util.createBuffer();return o.putByte(Y.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};Y.createServerKeyExchange=function(t){var e=0,r=bt.util.createBuffer();return e>0&&(r.putByte(Y.HandshakeType.server_key_exchange),r.putInt24(e)),r};Y.getClientSignature=function(t,e){var r=bt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=bt.pki.privateKeyFromPem(a)}catch(c){n.error(n,{message:"Could not get private key.",cause:c,send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};Y.createCertificateVerify=function(t,e){var r=e.length+2,n=bt.util.createBuffer();return n.putByte(Y.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};Y.createCertificateRequest=function(t){var e=bt.util.createBuffer();e.putByte(1);var r=bt.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=bt.pki.distinguishedNameToAsn1(i.subject),a=bt.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var c=1+e.length()+2+r.length(),l=bt.util.createBuffer();return l.putByte(Y.HandshakeType.certificate_request),l.putInt24(c),jm(l,1,e),jm(l,2,r),l};Y.createServerHelloDone=function(t){var e=bt.util.createBuffer();return e.putByte(Y.HandshakeType.server_hello_done),e.putInt24(0),e};Y.createChangeCipherSpec=function(){var t=bt.util.createBuffer();return t.putByte(1),t};Y.createFinished=function(t){var e=bt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===Y.ConnectionEnd.client,n=t.session.sp,i=12,o=cZ,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var c=bt.util.createBuffer();return c.putByte(Y.HandshakeType.finished),c.putInt24(e.length()),c.putBuffer(e),c};Y.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=bt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(bt.random.getBytes(o)),n};Y.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===Y.ContentType.handshake||e.type===Y.ContentType.alert||e.type===Y.ContentType.change_cipher_spec))){if(e.type===Y.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=Y.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>Y.MaxFragment;)n.push(Y.createRecord(t,{type:e.type,data:bt.util.createBuffer(i.slice(0,Y.MaxFragment))})),i=i.slice(Y.MaxFragment);i.length>0&&n.push(Y.createRecord(t,{type:e.type,data:bt.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],c=t.state.current.write;c.update(t,a)&&t.records.push(a)}}};Y.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var SEe=s(function(t){switch(t){case!0:return!0;case bt.pki.certificateError.bad_certificate:return Y.Alert.Description.bad_certificate;case bt.pki.certificateError.unsupported_certificate:return Y.Alert.Description.unsupported_certificate;case bt.pki.certificateError.certificate_revoked:return Y.Alert.Description.certificate_revoked;case bt.pki.certificateError.certificate_expired:return Y.Alert.Description.certificate_expired;case bt.pki.certificateError.certificate_unknown:return Y.Alert.Description.certificate_unknown;case bt.pki.certificateError.unknown_ca:return Y.Alert.Description.unknown_ca;default:return Y.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),xer=s(function(t){switch(t){case!0:return!0;case Y.Alert.Description.bad_certificate:return bt.pki.certificateError.bad_certificate;case Y.Alert.Description.unsupported_certificate:return bt.pki.certificateError.unsupported_certificate;case Y.Alert.Description.certificate_revoked:return bt.pki.certificateError.certificate_revoked;case Y.Alert.Description.certificate_expired:return bt.pki.certificateError.certificate_expired;case Y.Alert.Description.certificate_unknown:return bt.pki.certificateError.certificate_unknown;case Y.Alert.Description.unknown_ca:return bt.pki.certificateError.unknown_ca;default:return bt.pki.certificateError.bad_certificate}},"_alertDescToCertError");Y.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,c){var l=SEe(o),u=t.verify(t,o,a,c);if(u!==!0){if(typeof u=="object"&&!bt.util.isArray(u)){var f=new Error("The application rejected the certificate.");throw f.send=!0,f.alert={level:Y.Alert.Level.fatal,description:Y.Alert.Description.bad_certificate},u.message&&(f.message=u.message),u.alert&&(f.alert.description=u.alert),f}u!==o&&(u=xer(u))}return u},bt.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||bt.util.isArray(i))&&(i={send:!0,alert:{level:Y.Alert.Level.fatal,description:SEe(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:Y.Alert.Level.fatal,description:SEe(i.error)}),t.error(t,i)}return!t.fail};Y.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=bt.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var c in r.order)if(r.order[c]===a){r.order.splice(c,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=bt.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};Y.createConnection=function(t){var e=null;t.caStore?bt.util.isArray(t.caStore)?e=bt.pki.createCaStore(t.caStore):e=t.caStore:e=bt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in Y.CipherSuites)r.push(Y.CipherSuites[n])}var i=t.server?Y.ConnectionEnd.server:Y.ConnectionEnd.client,o=t.sessionCache?Y.createSessionCache(t.sessionCache):null,a={version:{major:Y.Version.major,minor:Y.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(f,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:bt.util.createBuffer(),tlsData:bt.util.createBuffer(),data:bt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(f,p){p.origin=p.origin||(f.entity===Y.ConnectionEnd.client?"client":"server"),p.send&&(Y.queue(f,Y.createAlert(f,p.alert)),Y.flush(f));var m=p.fatal!==!1;m&&(f.fail=!0),t.error(f,p),m&&f.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(f){a.version={major:Y.Version.major,minor:Y.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===Y.ConnectionEnd.client?ser:per,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(f||typeof f>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=Y.createConnectionState(a)},a.reset();var c=s(function(f,p){var m=p.type-Y.ContentType.change_cipher_spec,h=PEe[f.entity][f.expect];m in h?h[m](f,p):Y.handleUnexpected(f,p)},"_update"),l=s(function(f){var p=0,m=f.input,h=m.length();if(h<5)p=5-h;else{f.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:bt.util.createBuffer(),ready:!1};var g=f.record.version.major===f.version.major;g&&f.session&&f.session.version&&(g=f.record.version.minor===f.version.minor),g||f.error(f,{message:"Incompatible TLS version.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(f){var p=0,m=f.input,h=m.length();if(h<f.record.length)p=f.record.length-h;else{f.record.fragment.putBytes(m.getBytes(f.record.length)),m.compact();var g=f.state.current.read;g.update(f,f.record)&&(f.fragmented!==null&&(f.fragmented.type===f.record.type?(f.fragmented.fragment.putBuffer(f.record.fragment),f.record=f.fragmented):f.error(f,{message:"Invalid fragmented record.",send:!0,alert:{level:Y.Alert.Level.fatal,description:Y.Alert.Description.unexpected_message}})),f.record.ready=!0)}return p},"_readRecord");return a.handshake=function(f){if(a.entity!==Y.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,f=f||"";var p=null;f.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(f)),p===null&&(f="")),f.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(f=p.id)),a.session={id:f,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:bt.md.md5.create(),sha1:bt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=Y.createRandom().getBytes(),a.open=!0,Y.queue(a,Y.createRecord(a,{type:Y.ContentType.handshake,data:Y.createClientHello(a)})),Y.flush(a)}},a.process=function(f){var p=0;return f&&a.input.putBytes(f),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&c(a,a.record)),p},a.prepare=function(f){return Y.queue(a,Y.createRecord(a,{type:Y.ContentType.application_data,data:bt.util.createBuffer(f)})),Y.flush(a)},a.prepareHeartbeatRequest=function(f,p){return f instanceof bt.util.ByteBuffer&&(f=f.bytes()),typeof p>"u"&&(p=f.length),a.expectedHeartbeatPayload=f,Y.queue(a,Y.createRecord(a,{type:Y.ContentType.heartbeat,data:Y.createHeartbeat(Y.HeartbeatMessageType.heartbeat_request,f,p)})),Y.flush(a)},a.close=function(f){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,Y.queue(a,Y.createAlert(a,{level:Y.Alert.Level.warning,description:Y.Alert.Description.close_notify})),Y.flush(a)),a.closed(a)),a.reset(f)},a};Utt.exports=bt.tls=bt.tls||{};for(sZ in Y)typeof Y[sZ]!="function"&&(bt.tls[sZ]=Y[sZ]);var sZ;bt.tls.prf_tls1=cZ;bt.tls.hmac_sha1=ner;bt.tls.createSessionCache=Y.createSessionCache;bt.tls.createConnection=Y.createConnection});var Wtt=Q((VZn,Htt)=>{d();var XI=xi();jI();BEe();var Vm=Htt.exports=XI.tls;Vm.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Vm.BulkCipherAlgorithm.aes,t.cipher_type=Vm.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Vm.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:qtt};Vm.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Vm.BulkCipherAlgorithm.aes,t.cipher_type=Vm.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Vm.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:qtt};function qtt(t,e,r){var n=e.entity===XI.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:XI.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:XI.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=wer,t.write.cipherFunction=ber,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Vm.hmac_sha1}s(qtt,"initConnectionState");function ber(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===Vm.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=XI.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Vm.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(Ier)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(ber,"encrypt_aes_cbc_sha1");function Ier(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(Ier,"encrypt_aes_cbc_sha1_padding");function Ter(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(Ter,"decrypt_aes_cbc_sha1_padding");function wer(t,e){var r=!1,n;t.version.minor===Vm.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(Ter);var o=e.macLength,a=XI.random.getBytesSync(o),c=i.output.length();c>=o?(t.fragment=i.output.getBytes(c-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=XI.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=_er(e.macKey,a,l)&&r,r}s(wer,"decrypt_aes_cbc_sha1");function _er(t,e,r){var n=XI.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(_er,"compareMacs")});var LEe=Q((YZn,$tt)=>{d();var zs=xi();jy();_o();var EO=$tt.exports=zs.sha512=zs.sha512||{};zs.md.sha512=zs.md.algorithms.sha512=EO;var jtt=zs.sha384=zs.sha512.sha384=zs.sha512.sha384||{};jtt.create=function(){return EO.create("SHA-384")};zs.md.sha384=zs.md.algorithms.sha384=jtt;zs.sha512.sha256=zs.sha512.sha256||{create:s(function(){return EO.create("SHA-512/256")},"create")};zs.md["sha512/256"]=zs.md.algorithms["sha512/256"]=zs.sha512.sha256;zs.sha512.sha224=zs.sha512.sha224||{create:s(function(){return EO.create("SHA-512/224")},"create")};zs.md["sha512/224"]=zs.md.algorithms["sha512/224"]=zs.sha512.sha224;EO.create=function(t){if(Vtt||Ser(),typeof t>"u"&&(t="SHA-512"),!(t in J2))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=J2[t],r=null,n=zs.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var c={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return c.start=function(){c.messageLength=0,c.fullMessageLength=c.messageLength128=[];for(var l=c.messageLengthSize/4,u=0;u<l;++u)c.fullMessageLength.push(0);n=zs.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return c},c.start(),c.update=function(l,u){u==="utf8"&&(l=zs.util.encodeUtf8(l));var f=l.length;c.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var p=c.fullMessageLength.length-1;p>=0;--p)c.fullMessageLength[p]+=f[1],f[1]=f[0]+(c.fullMessageLength[p]/4294967296>>>0),c.fullMessageLength[p]=c.fullMessageLength[p]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(l),Gtt(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),c},c.digest=function(){var l=zs.util.createBuffer();l.putBytes(n.bytes());var u=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize,f=u&c.blockLength-1;l.putBytes(DEe.substr(0,c.blockLength-f));for(var p,m,h=c.fullMessageLength[0]*8,g=0;g<c.fullMessageLength.length-1;++g)p=c.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,l.putInt32(h>>>0),h=p>>>0;l.putInt32(h);for(var y=new Array(r.length),g=0;g<r.length;++g)y[g]=r[g].slice(0);Gtt(y,i,l);var E=zs.util.createBuffer(),x;t==="SHA-512"?x=y.length:t==="SHA-384"?x=y.length-2:x=y.length-4;for(var g=0;g<x;++g)E.putInt32(y[g][0]),(g!==x-1||t!=="SHA-512/224")&&E.putInt32(y[g][1]);return E},c};var DEe=null,Vtt=!1,NEe=null,J2=null;function Ser(){DEe="\x80",DEe+=zs.util.fillString("\0",128),NEe=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],J2={},J2["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],J2["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],J2["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],J2["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Vtt=!0}s(Ser,"_init");function Gtt(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,y,E,x,b,_,k,P,N,M,J,se,K,G,q,le,ie,V,H,z,X,ue,ne,me,he=r.length();he>=128;){for(V=0;V<16;++V)e[V][0]=r.getInt32()>>>0,e[V][1]=r.getInt32()>>>0;for(;V<80;++V)X=e[V-2],H=X[0],z=X[1],n=((H>>>19|z<<13)^(z>>>29|H<<3)^H>>>6)>>>0,i=((H<<13|z>>>19)^(z<<3|H>>>29)^(H<<26|z>>>6))>>>0,ne=e[V-15],H=ne[0],z=ne[1],o=((H>>>1|z<<31)^(H>>>8|z<<24)^H>>>7)>>>0,a=((H<<31|z>>>1)^(H<<24|z>>>8)^(H<<25|z>>>7))>>>0,ue=e[V-7],me=e[V-16],z=i+ue[1]+a+me[1],e[V][0]=n+ue[0]+o+me[0]+(z/4294967296>>>0)>>>0,e[V][1]=z>>>0;for(y=t[0][0],E=t[0][1],x=t[1][0],b=t[1][1],_=t[2][0],k=t[2][1],P=t[3][0],N=t[3][1],M=t[4][0],J=t[4][1],se=t[5][0],K=t[5][1],G=t[6][0],q=t[6][1],le=t[7][0],ie=t[7][1],V=0;V<80;++V)u=((M>>>14|J<<18)^(M>>>18|J<<14)^(J>>>9|M<<23))>>>0,f=((M<<18|J>>>14)^(M<<14|J>>>18)^(J<<23|M>>>9))>>>0,p=(G^M&(se^G))>>>0,m=(q^J&(K^q))>>>0,c=((y>>>28|E<<4)^(E>>>2|y<<30)^(E>>>7|y<<25))>>>0,l=((y<<4|E>>>28)^(E<<30|y>>>2)^(E<<25|y>>>7))>>>0,h=(y&x|_&(y^x))>>>0,g=(E&b|k&(E^b))>>>0,z=ie+f+m+NEe[V][1]+e[V][1],n=le+u+p+NEe[V][0]+e[V][0]+(z/4294967296>>>0)>>>0,i=z>>>0,z=l+g,o=c+h+(z/4294967296>>>0)>>>0,a=z>>>0,le=G,ie=q,G=se,q=K,se=M,K=J,z=N+i,M=P+n+(z/4294967296>>>0)>>>0,J=z>>>0,P=_,N=k,_=x,k=b,x=y,b=E,z=i+a,y=n+o+(z/4294967296>>>0)>>>0,E=z>>>0;z=t[0][1]+E,t[0][0]=t[0][0]+y+(z/4294967296>>>0)>>>0,t[0][1]=z>>>0,z=t[1][1]+b,t[1][0]=t[1][0]+x+(z/4294967296>>>0)>>>0,t[1][1]=z>>>0,z=t[2][1]+k,t[2][0]=t[2][0]+_+(z/4294967296>>>0)>>>0,t[2][1]=z>>>0,z=t[3][1]+N,t[3][0]=t[3][0]+P+(z/4294967296>>>0)>>>0,t[3][1]=z>>>0,z=t[4][1]+J,t[4][0]=t[4][0]+M+(z/4294967296>>>0)>>>0,t[4][1]=z>>>0,z=t[5][1]+K,t[5][0]=t[5][0]+se+(z/4294967296>>>0)>>>0,t[5][1]=z>>>0,z=t[6][1]+q,t[6][0]=t[6][0]+G+(z/4294967296>>>0)>>>0,t[6][1]=z>>>0,z=t[7][1]+ie,t[7][0]=t[7][0]+le+(z/4294967296>>>0)>>>0,t[7][1]=z>>>0,he-=128}}s(Gtt,"_update")});var ztt=Q(MEe=>{d();var Rer=xi();Pg();var Ol=Rer.asn1;MEe.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Ol.Class.UNIVERSAL,type:Ol.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Ol.Class.UNIVERSAL,type:Ol.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Ol.Class.UNIVERSAL,type:Ol.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ol.Class.UNIVERSAL,type:Ol.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Ol.Class.UNIVERSAL,type:Ol.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};MEe.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Ol.Class.UNIVERSAL,type:Ol.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Ol.Class.UNIVERSAL,type:Ol.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ol.Class.UNIVERSAL,type:Ol.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Ol.Class.UNIVERSAL,type:Ol.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var art=Q((eei,srt)=>{d();var Cu=xi();gO();qm();LEe();_o();var ert=ztt(),ker=ert.publicKeyValidator,Per=ert.privateKeyValidator;typeof Ytt>"u"&&(Ytt=Cu.jsbn.BigInteger);var Ytt,QEe=Cu.util.ByteBuffer,Wf=typeof Buffer>"u"?Uint8Array:Buffer;Cu.pki=Cu.pki||{};srt.exports=Cu.pki.ed25519=Cu.ed25519=Cu.ed25519||{};var qi=Cu.ed25519;qi.constants={};qi.constants.PUBLIC_KEY_BYTE_LENGTH=32;qi.constants.PRIVATE_KEY_BYTE_LENGTH=64;qi.constants.SEED_BYTE_LENGTH=32;qi.constants.SIGN_BYTE_LENGTH=64;qi.constants.HASH_BYTE_LENGTH=64;qi.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Cu.random.getBytesSync(qi.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==qi.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+qi.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=NE({message:e,encoding:"binary"});for(var r=new Wf(qi.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Wf(qi.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return Ler(r,n),{publicKey:r,privateKey:n}};qi.privateKeyFromAsn1=function(t){var e={},r=[],n=Cu.asn1.validate(t,Per,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Cu.asn1.derToOid(e.privateKeyOid),a=Cu.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.privateKey,l=NE({message:Cu.asn1.fromDer(c).value,encoding:"binary"});return{privateKeyBytes:l}};qi.publicKeyFromAsn1=function(t){var e={},r=[],n=Cu.asn1.validate(t,ker,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Cu.asn1.derToOid(e.publicKeyOid),a=Cu.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.ed25519PublicKey;if(c.length!==qi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return NE({message:c,encoding:"binary"})};qi.publicKeyFromPrivateKey=function(t){t=t||{};var e=NE({message:t.privateKey,encoding:"binary"});if(e.length!==qi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+qi.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Wf(qi.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};qi.sign=function(t){t=t||{};var e=NE(t),r=NE({message:t.privateKey,encoding:"binary"});if(r.length===qi.constants.SEED_BYTE_LENGTH){var n=qi.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==qi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+qi.constants.SEED_BYTE_LENGTH+" or "+qi.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Wf(qi.constants.SIGN_BYTE_LENGTH+e.length);Mer(i,e,e.length,r);for(var o=new Wf(qi.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};qi.verify=function(t){t=t||{};var e=NE(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=NE({message:t.signature,encoding:"binary"});if(r.length!==qi.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+qi.constants.SIGN_BYTE_LENGTH);var n=NE({message:t.publicKey,encoding:"binary"});if(n.length!==qi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+qi.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Wf(qi.constants.SIGN_BYTE_LENGTH+e.length),o=new Wf(qi.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<qi.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+qi.constants.SIGN_BYTE_LENGTH]=e[a];return Fer(o,i,i.length,n)>=0};function NE(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Wf)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new QEe(e,r)}else if(!(e instanceof QEe))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Wf(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(NE,"messageToNativeBuffer");var UEe=_n(),lZ=_n([1]),Ber=_n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Der=_n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Ktt=_n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Jtt=_n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),FEe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Ner=_n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function vO(t,e){var r=Cu.md.sha512.create(),n=new QEe(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Wf(qi.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(vO,"sha512");function Ler(t,e){var r=[_n(),_n(),_n(),_n()],n,i=vO(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,GEe(r,i),WEe(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(Ler,"crypto_sign_keypair");function Mer(t,e,r,n){var i,o,a=new Float64Array(64),c=[_n(),_n(),_n(),_n()],l=vO(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var f=vO(t.subarray(32),r+32);for(qEe(f),GEe(c,f),WEe(t,c),i=32;i<64;++i)t[i]=n[i];var p=vO(t,r+64);for(qEe(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=f[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*l[o];return trt(t.subarray(32),a),u}s(Mer,"crypto_sign");function Fer(t,e,r,n){var i,o,a=new Wf(32),c=[_n(),_n(),_n(),_n()],l=[_n(),_n(),_n(),_n()];if(o=-1,r<64||Oer(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=vO(t,r);if(qEe(u),irt(c,l,u),GEe(l,e.subarray(32)),HEe(c,l),WEe(a,c),r-=64,rrt(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(Fer,"crypto_sign_open");function trt(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*FEe[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*FEe[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*FEe[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(trt,"modL");function qEe(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;trt(t,e)}s(qEe,"reduce");function HEe(t,e){var r=_n(),n=_n(),i=_n(),o=_n(),a=_n(),c=_n(),l=_n(),u=_n(),f=_n();GB(r,t[1],t[0]),GB(f,e[1],e[0]),ps(r,r,f),WB(n,t[0],t[1]),WB(f,e[0],e[1]),ps(n,n,f),ps(i,t[3],e[3]),ps(i,i,Der),ps(o,t[2],e[2]),WB(o,o,o),GB(a,n,r),GB(c,o,i),WB(l,o,i),WB(u,n,r),ps(t[0],a,c),ps(t[1],u,l),ps(t[2],l,c),ps(t[3],a,u)}s(HEe,"add");function Xtt(t,e,r){for(var n=0;n<4;++n)ort(t[n],e[n],r)}s(Xtt,"cswap");function WEe(t,e){var r=_n(),n=_n(),i=_n();Her(i,e[2]),ps(r,e[0],i),ps(n,e[1],i),uZ(t,n),t[31]^=nrt(r)<<7}s(WEe,"pack");function uZ(t,e){var r,n,i,o=_n(),a=_n();for(r=0;r<16;++r)a[r]=e[r];for(OEe(a),OEe(a),OEe(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,ort(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(uZ,"pack25519");function Oer(t,e){var r=_n(),n=_n(),i=_n(),o=_n(),a=_n(),c=_n(),l=_n();return ZI(t[2],lZ),Qer(t[1],e),X2(i,t[1]),ps(o,i,Ber),GB(i,i,t[2]),WB(o,t[2],o),X2(a,o),X2(c,a),ps(l,c,a),ps(r,l,i),ps(r,r,o),Uer(r,r),ps(r,r,i),ps(r,r,o),ps(r,r,o),ps(t[0],r,o),X2(n,t[0]),ps(n,n,o),Ztt(n,i)&&ps(t[0],t[0],Ner),X2(n,t[0]),ps(n,n,o),Ztt(n,i)?-1:(nrt(t[0])===e[31]>>7&&GB(t[0],UEe,t[0]),ps(t[3],t[0],t[1]),0)}s(Oer,"unpackneg");function Qer(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(Qer,"unpack25519");function Uer(t,e){var r=_n(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)X2(r,r),n!==1&&ps(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(Uer,"pow2523");function Ztt(t,e){var r=new Wf(32),n=new Wf(32);return uZ(r,t),uZ(n,e),rrt(r,0,n,0)}s(Ztt,"neq25519");function rrt(t,e,r,n){return qer(t,e,r,n,32)}s(rrt,"crypto_verify_32");function qer(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(qer,"vn");function nrt(t){var e=new Wf(32);return uZ(e,t),e[0]&1}s(nrt,"par25519");function irt(t,e,r){var n,i;for(ZI(t[0],UEe),ZI(t[1],lZ),ZI(t[2],lZ),ZI(t[3],UEe),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,Xtt(t,e,n),HEe(e,t),HEe(t,t),Xtt(t,e,n)}s(irt,"scalarmult");function GEe(t,e){var r=[_n(),_n(),_n(),_n()];ZI(r[0],Ktt),ZI(r[1],Jtt),ZI(r[2],lZ),ps(r[3],Ktt,Jtt),irt(t,r,e)}s(GEe,"scalarbase");function ZI(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(ZI,"set25519");function Her(t,e){var r=_n(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)X2(r,r),n!==2&&n!==4&&ps(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(Her,"inv25519");function OEe(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(OEe,"car25519");function ort(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(ort,"sel25519");function _n(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(_n,"gf");function WB(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s(WB,"A");function GB(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(GB,"Z");function X2(t,e){ps(t,e,e)}s(X2,"S");function ps(t,e,r){var n,i,o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=0,g=0,y=0,E=0,x=0,b=0,_=0,k=0,P=0,N=0,M=0,J=0,se=0,K=0,G=0,q=0,le=0,ie=0,V=0,H=0,z=0,X=0,ue=0,ne=r[0],me=r[1],he=r[2],Qe=r[3],ke=r[4],tt=r[5],Fe=r[6],ht=r[7],St=r[8],vt=r[9],It=r[10],de=r[11],Ue=r[12],ye=r[13],nt=r[14],te=r[15];n=e[0],o+=n*ne,a+=n*me,c+=n*he,l+=n*Qe,u+=n*ke,f+=n*tt,p+=n*Fe,m+=n*ht,h+=n*St,g+=n*vt,y+=n*It,E+=n*de,x+=n*Ue,b+=n*ye,_+=n*nt,k+=n*te,n=e[1],a+=n*ne,c+=n*me,l+=n*he,u+=n*Qe,f+=n*ke,p+=n*tt,m+=n*Fe,h+=n*ht,g+=n*St,y+=n*vt,E+=n*It,x+=n*de,b+=n*Ue,_+=n*ye,k+=n*nt,P+=n*te,n=e[2],c+=n*ne,l+=n*me,u+=n*he,f+=n*Qe,p+=n*ke,m+=n*tt,h+=n*Fe,g+=n*ht,y+=n*St,E+=n*vt,x+=n*It,b+=n*de,_+=n*Ue,k+=n*ye,P+=n*nt,N+=n*te,n=e[3],l+=n*ne,u+=n*me,f+=n*he,p+=n*Qe,m+=n*ke,h+=n*tt,g+=n*Fe,y+=n*ht,E+=n*St,x+=n*vt,b+=n*It,_+=n*de,k+=n*Ue,P+=n*ye,N+=n*nt,M+=n*te,n=e[4],u+=n*ne,f+=n*me,p+=n*he,m+=n*Qe,h+=n*ke,g+=n*tt,y+=n*Fe,E+=n*ht,x+=n*St,b+=n*vt,_+=n*It,k+=n*de,P+=n*Ue,N+=n*ye,M+=n*nt,J+=n*te,n=e[5],f+=n*ne,p+=n*me,m+=n*he,h+=n*Qe,g+=n*ke,y+=n*tt,E+=n*Fe,x+=n*ht,b+=n*St,_+=n*vt,k+=n*It,P+=n*de,N+=n*Ue,M+=n*ye,J+=n*nt,se+=n*te,n=e[6],p+=n*ne,m+=n*me,h+=n*he,g+=n*Qe,y+=n*ke,E+=n*tt,x+=n*Fe,b+=n*ht,_+=n*St,k+=n*vt,P+=n*It,N+=n*de,M+=n*Ue,J+=n*ye,se+=n*nt,K+=n*te,n=e[7],m+=n*ne,h+=n*me,g+=n*he,y+=n*Qe,E+=n*ke,x+=n*tt,b+=n*Fe,_+=n*ht,k+=n*St,P+=n*vt,N+=n*It,M+=n*de,J+=n*Ue,se+=n*ye,K+=n*nt,G+=n*te,n=e[8],h+=n*ne,g+=n*me,y+=n*he,E+=n*Qe,x+=n*ke,b+=n*tt,_+=n*Fe,k+=n*ht,P+=n*St,N+=n*vt,M+=n*It,J+=n*de,se+=n*Ue,K+=n*ye,G+=n*nt,q+=n*te,n=e[9],g+=n*ne,y+=n*me,E+=n*he,x+=n*Qe,b+=n*ke,_+=n*tt,k+=n*Fe,P+=n*ht,N+=n*St,M+=n*vt,J+=n*It,se+=n*de,K+=n*Ue,G+=n*ye,q+=n*nt,le+=n*te,n=e[10],y+=n*ne,E+=n*me,x+=n*he,b+=n*Qe,_+=n*ke,k+=n*tt,P+=n*Fe,N+=n*ht,M+=n*St,J+=n*vt,se+=n*It,K+=n*de,G+=n*Ue,q+=n*ye,le+=n*nt,ie+=n*te,n=e[11],E+=n*ne,x+=n*me,b+=n*he,_+=n*Qe,k+=n*ke,P+=n*tt,N+=n*Fe,M+=n*ht,J+=n*St,se+=n*vt,K+=n*It,G+=n*de,q+=n*Ue,le+=n*ye,ie+=n*nt,V+=n*te,n=e[12],x+=n*ne,b+=n*me,_+=n*he,k+=n*Qe,P+=n*ke,N+=n*tt,M+=n*Fe,J+=n*ht,se+=n*St,K+=n*vt,G+=n*It,q+=n*de,le+=n*Ue,ie+=n*ye,V+=n*nt,H+=n*te,n=e[13],b+=n*ne,_+=n*me,k+=n*he,P+=n*Qe,N+=n*ke,M+=n*tt,J+=n*Fe,se+=n*ht,K+=n*St,G+=n*vt,q+=n*It,le+=n*de,ie+=n*Ue,V+=n*ye,H+=n*nt,z+=n*te,n=e[14],_+=n*ne,k+=n*me,P+=n*he,N+=n*Qe,M+=n*ke,J+=n*tt,se+=n*Fe,K+=n*ht,G+=n*St,q+=n*vt,le+=n*It,ie+=n*de,V+=n*Ue,H+=n*ye,z+=n*nt,X+=n*te,n=e[15],k+=n*ne,P+=n*me,N+=n*he,M+=n*Qe,J+=n*ke,se+=n*tt,K+=n*Fe,G+=n*ht,q+=n*St,le+=n*vt,ie+=n*It,V+=n*de,H+=n*Ue,z+=n*ye,X+=n*nt,ue+=n*te,o+=38*P,a+=38*N,c+=38*M,l+=38*J,u+=38*se,f+=38*K,p+=38*G,m+=38*q,h+=38*le,g+=38*ie,y+=38*V,E+=38*H,x+=38*z,b+=38*X,_+=38*ue,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=f,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=E,t[12]=x,t[13]=b,t[14]=_,t[15]=k}s(ps,"M")});var drt=Q((nei,urt)=>{d();var np=xi();_o();qm();gO();urt.exports=np.kem=np.kem||{};var crt=np.jsbn.BigInteger;np.kem.rsa={};np.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||np.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),c;do c=new crt(np.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(c.compareTo(crt.ONE)<=0);c=np.util.hexToBytes(c.toString(16));var l=a-c.length;l>0&&(c=np.util.fillString("\0",l)+c);var u=i.encrypt(c,"NONE"),f=t.generate(c,o);return{encapsulation:u,key:f}},n.decrypt=function(i,o,a){var c=i.decrypt(o,"NONE");return t.generate(c,a)},n};np.kem.kdf1=function(t,e){lrt(this,t,0,e||t.digestLength)};np.kem.kdf2=function(t,e){lrt(this,t,1,e||t.digestLength)};function lrt(t,e,r,n){t.generate=function(i,o){for(var a=new np.util.ByteBuffer,c=Math.ceil(o/n)+r,l=new np.util.ByteBuffer,u=r;u<c;++u){l.putInt32(u),e.start(),e.update(i+l.getBytes());var f=e.digest();a.putBytes(f.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(lrt,"_createKDF")});var hrt=Q((sei,mrt)=>{d();var eo=xi();_o();mrt.exports=eo.log=eo.log||{};eo.log.levels=["none","error","warning","info","debug","verbose","max"];var dZ={},$Ee=[],bO=null;eo.log.LEVEL_LOCKED=2;eo.log.NO_LEVEL_CHECK=4;eo.log.INTERPOLATE=8;for(Zy=0;Zy<eo.log.levels.length;++Zy)jEe=eo.log.levels[Zy],dZ[jEe]={index:Zy,name:jEe.toUpperCase()};var jEe,Zy;eo.log.logMessage=function(t){for(var e=dZ[t.level].index,r=0;r<$Ee.length;++r){var n=$Ee[r];if(n.flags&eo.log.NO_LEVEL_CHECK)n.f(t);else{var i=dZ[n.level].index;e<=i&&n.f(n,t)}}};eo.log.prepareStandard=function(t){"standard"in t||(t.standard=dZ[t.level].name+" ["+t.category+"] "+t.message)};eo.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=eo.util.format.apply(this,e)}};eo.log.prepareStandardFull=function(t){"standardFull"in t||(eo.log.prepareStandard(t),t.standardFull=t.standard)};for(VEe=["error","warning","info","debug","verbose"],Zy=0;Zy<VEe.length;++Zy)(function(e){eo.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};eo.log.logMessage(o)}})(VEe[Zy]);var VEe,Zy;eo.log.makeLogger=function(t){var e={flags:0,f:t};return eo.log.setLevel(e,"none"),e};eo.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&eo.log.LEVEL_LOCKED))for(var n=0;n<eo.log.levels.length;++n){var i=eo.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};eo.log.lock=function(t,e){typeof e>"u"||e?t.flags|=eo.log.LEVEL_LOCKED:t.flags&=~eo.log.LEVEL_LOCKED};eo.log.addLogger=function(t){$Ee.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(frt={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},IO=s(function(t,e){eo.log.prepareStandard(e);var r=frt[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),jB=eo.log.makeLogger(IO)):(IO=s(function(e,r){eo.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),jB=eo.log.makeLogger(IO)),eo.log.setLevel(jB,"debug"),eo.log.addLogger(jB),bO=jB):console={log:s(function(){},"log")};var jB,frt,IO;bO!==null&&typeof window<"u"&&window.location&&(xO=new URL(window.location.href).searchParams,xO.has("console.level")&&eo.log.setLevel(bO,xO.get("console.level").slice(-1)[0]),xO.has("console.lock")&&(prt=xO.get("console.lock").slice(-1)[0],prt=="true"&&eo.log.lock(bO)));var xO,prt;eo.log.consoleLogger=bO});var Art=Q((lei,grt)=>{d();grt.exports=jy();GX();OB();sEe();LEe()});var Ert=Q((dei,Crt)=>{d();var Jt=xi();jI();Pg();mO();VI();j2();EEe();qm();_o();iZ();var Se=Jt.asn1,jd=Crt.exports=Jt.pkcs7=Jt.pkcs7||{};jd.messageFromPem=function(t){var e=Jt.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=Se.fromDer(e.body);return jd.messageFromAsn1(n)};jd.messageToPem=function(t,e){var r={type:"PKCS7",body:Se.toDer(t.toAsn1()).getBytes()};return Jt.pem.encode(r,{maxline:e})};jd.messageFromAsn1=function(t){var e={},r=[];if(!Se.validate(t,jd.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=Se.derToOid(e.contentType),o;switch(i){case Jt.pki.oids.envelopedData:o=jd.createEnvelopedData();break;case Jt.pki.oids.encryptedData:o=jd.createEncryptedData();break;case Jt.pki.oids.signedData:o=jd.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};jd.createSignedData=function(){var t=null;return t={type:Jt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(YEe(t,n,jd.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Jt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Jt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.signerInfos)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=Jt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var c=n.key;if(!c)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof c=="string"&&(c=Jt.pki.privateKeyFromPem(c));var l=n.digestAlgorithm||Jt.pki.oids.sha1;switch(l){case Jt.pki.oids.sha1:case Jt.pki.oids.sha256:case Jt.pki.oids.sha384:case Jt.pki.oids.sha512:case Jt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var f=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!f&&h.type===Jt.pki.oids.contentType){if(f=!0,p)break;continue}if(!p&&h.type===Jt.pki.oids.messageDigest){if(p=!0,f)break;continue}}if(!f||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:c,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:Jt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Jt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Jt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Jt.util.encodeUtf8(t.content)),n.detached?t.detachedContent=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=Jt.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=Jt.md[Jt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=Jt.md[Jt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(a).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Se.derToOid(t.contentInfo.value[0].value),a=Se.toDer(i);a.getByte(),Se.getBerValueLength(a),a=a.getBytes();for(var c in n)n[c].start().update(a);for(var l=new Date,u=0;u<t.signers.length;++u){var f=t.signers[u];if(f.authenticatedAttributes.length===0){if(o!==Jt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[]),m=0;m<f.authenticatedAttributes.length;++m){var h=f.authenticatedAttributes[m];h.type===Jt.pki.oids.messageDigest?h.value=n[f.digestAlgorithm].digest():h.type===Jt.pki.oids.signingTime&&(h.value||(h.value=l)),p.value.push(zEe(h)),f.authenticatedAttributesAsn1.value.push(zEe(h))}a=Se.toDer(p).getBytes(),f.md.start().update(a)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=zer(t.signers)}s(r,"addSignerInfos")};jd.createEncryptedData=function(){var t=null;return t={type:Jt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Jt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){YEe(t,e,jd.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),yrt(t)},"decrypt")},t};jd.createEnvelopedData=function(){var t=null;return t={type:Jt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Jt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=YEe(t,e,jd.asn1.envelopedDataValidator);t.recipients=jer(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,Ver(t.recipients)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,Yer(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,c=0;c<r.length;++c)if(o[c].type!==r[c].type||o[c].value!==r[c].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Jt.pki.oids.rsaEncryption:case Jt.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Jt.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}yrt(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Jt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case Jt.pki.oids["aes128-CBC"]:n=16,i=16,o=Jt.aes.createEncryptionCipher;break;case Jt.pki.oids["aes192-CBC"]:n=24,i=16,o=Jt.aes.createEncryptionCipher;break;case Jt.pki.oids["aes256-CBC"]:n=32,i=16,o=Jt.aes.createEncryptionCipher;break;case Jt.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Jt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Jt.util.createBuffer(Jt.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Jt.util.createBuffer(Jt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var l=t.recipients[c];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case Jt.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}},"encrypt")},t};function Wer(t){var e={},r=[];if(!Se.validate(t,jd.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Jt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Jt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Se.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(Wer,"_recipientFromAsn1");function Ger(t){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Jt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Jt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.encryptedContent.algorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(Ger,"_recipientToAsn1");function jer(t){for(var e=[],r=0;r<t.length;++r)e.push(Wer(t[r]));return e}s(jer,"_recipientsFromAsn1");function Ver(t){for(var e=[],r=0;r<t.length;++r)e.push(Ger(t[r]));return e}s(Ver,"_recipientsToAsn1");function $er(t){var e=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Jt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Jt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.digestAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.signatureAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(zEe(i))}e.value.push(r)}return e}s($er,"_signerToAsn1");function zer(t){for(var e=[],r=0;r<t.length;++r)e.push($er(t[r]));return e}s(zer,"_signersToAsn1");function zEe(t){var e;if(t.type===Jt.pki.oids.contentType)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.value).getBytes());else if(t.type===Jt.pki.oids.messageDigest)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Jt.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Se.utcTimeToDate(i):i=Se.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=Se.create(Se.Class.UNIVERSAL,Se.Type.UTCTIME,!1,Se.dateToUtcTime(i)):e=Se.create(Se.Class.UNIVERSAL,Se.Type.GENERALIZEDTIME,!1,Se.dateToGeneralizedTime(i))}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[e])])}s(zEe,"_attributeToAsn1");function Yer(t){return[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Jt.pki.oids.data).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.algorithm).getBytes()),t.parameter?Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(Yer,"_encryptedContentToAsn1");function YEe(t,e,r){var n={},i=[];if(!Se.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Se.derToOid(n.contentType);if(a!==Jt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var c="";if(Jt.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=n.encryptedContent[l].value}else c=n.encryptedContent;t.encryptedContent={algorithm:Se.derToOid(n.encAlgorithm),parameter:Jt.util.createBuffer(n.encParameter.value),content:Jt.util.createBuffer(c)}}if(n.content){var c="";if(Jt.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=n.content[l].value}else c=n.content;t.content=Jt.util.createBuffer(c)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(YEe,"_fromAsn1");function yrt(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Jt.pki.oids["aes128-CBC"]:case Jt.pki.oids["aes192-CBC"]:case Jt.pki.oids["aes256-CBC"]:e=Jt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Jt.pki.oids.desCBC:case Jt.pki.oids["des-EDE3-CBC"]:e=Jt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(yrt,"_decryptContent")});var xrt=Q((mei,vrt)=>{d();var Oc=xi();jI();NB();GX();OB();_o();var pZ=vrt.exports=Oc.ssh=Oc.ssh||{};pZ.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=Oc.util.createBuffer();VB(a,n),eC(a,t.e),eC(a,t.n);var c=Oc.util.encode64(a.bytes(),64),l=Math.floor(c.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=c;var u=Oc.util.createBuffer();eC(u,t.d),eC(u,t.p),eC(u,t.q),eC(u,t.qInv);var f;if(!e)f=Oc.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=fZ(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=Oc.util.createBuffer();h.putBuffer(fZ("\0\0\0\0",e)),h.putBuffer(fZ("\0\0\0",e));var g=Oc.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(Oc.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),f=Oc.util.encode64(y.bytes(),64)}l=Math.floor(f.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=f;var E=fZ("putty-private-key-file-mac-key",e),x=Oc.util.createBuffer();VB(x,n),VB(x,i),VB(x,r),x.putInt32(a.length()),x.putBuffer(a),x.putInt32(u.length()),x.putBuffer(u);var b=Oc.hmac.create();return b.start("sha1",E),b.update(x.bytes()),o+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,o};pZ.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=Oc.util.createBuffer();return VB(n,r),eC(n,t.e),eC(n,t.n),r+" "+Oc.util.encode64(n.bytes())+" "+e};pZ.privateKeyToOpenSSH=function(t,e){return e?Oc.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):Oc.pki.privateKeyToPem(t)};pZ.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Oc.md.md5.create(),n="ssh-rsa",i=Oc.util.createBuffer();VB(i,n),eC(i,t.e),eC(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function eC(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=Oc.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(eC,"_addBigIntegerToBuffer");function VB(t,e){t.putInt32(e.length),t.putString(e)}s(VB,"_addStringToBuffer");function fZ(){for(var t=Oc.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s(fZ,"_sha1")});var Irt=Q((Aei,brt)=>{d();brt.exports=xi();jI();Wtt();Pg();FX();mO();art();NB();drt();hrt();Art();vEe();zX();j2();hEe();IEe();Ert();wEe();AEe();aEe();tZ();qm();uEe();xrt();BEe();_o()});var _rt=Q(Z2=>{"use strict";d();Object.defineProperty(Z2,"__esModule",{value:!0});Z2.convert=Z2.Format=void 0;var TO=Irt(),eT;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(eT=Z2.Format||(Z2.Format={}));function Trt(t){var e=TO.pki.pemToDer(t),r=TO.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(Trt,"myASN");function Ker(t){var e=Trt(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(Ker,"txtFormat");function wrt(t,e){switch(e){case eT.der:return TO.pki.pemToDer(t);case eT.pem:return t;case eT.txt:return Ker(t);case eT.asn1:return Trt(t);case eT.fingerprint:var r=TO.md.sha1.create(),n=wrt(t,eT.der);return r.update(n.getBytes()),r.digest().toHex();case eT.x509:return TO.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(wrt,"convert");Z2.convert=wrt});var Drt=Q(Gf=>{"use strict";d();var tT=Gf&&Gf.__assign||function(){return tT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},tT.apply(this,arguments)},mZ=Gf&&Gf.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Gf,"__esModule",{value:!0});Gf.convert=Gf.Format=Gf.addToGlobalAgent=Gf.get=void 0;var KEe=require("https"),Jer=require("tls"),Srt=require("child_process"),Rrt=set(),LE=_rt();Object.defineProperty(Gf,"Format",{enumerable:!0,get:s(function(){return LE.Format},"get")});Object.defineProperty(Gf,"convert",{enumerable:!0,get:s(function(){return LE.convert},"get")});var krt=process.platform==="darwin",Prt=KEe.globalAgent,gZ={keychain:"all",unique:!0,excludeBundled:!0,format:LE.Format.pem};function Brt(t){if(t===void 0&&(t=gZ),!krt)return[];t=tT(tT({},gZ),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,Srt.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=mZ(mZ([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,Srt.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=mZ(mZ([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var c=n.map(function(u){return(0,LE.convert)(u,LE.Format.fingerprint)}),l=t.excludeBundled?Jer.rootCertificates.map(function(u){return(0,LE.convert)(u,LE.Format.fingerprint)}):[];n=n.filter(function(u,f){var p=c[f];return!(t.unique&&f!==c.indexOf(p)||t.excludeBundled&&l.includes(p))})}return n.map(function(u){return(0,LE.convert)(u,t.format)})}s(Brt,"get");Gf.get=Brt;var hZ=Prt.options.ca,Xer=s(function(t){if(t===void 0&&(t=gZ),!!krt){var e;Array.isArray(hZ)?e=Array.from(hZ):e=typeof hZ<"u"?[hZ]:[],Brt(tT(tT(tT({},gZ),t),{format:LE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),Prt.options.ca=e,KEe.Agent=function(r){return function(n){var i=typeof n<"u"?tT({},n):{};return typeof i.ca>"u"&&(i.ca=e),r.call(this,i)}}(KEe.Agent),(0,Rrt.setGlobalDispatcher)(new Rrt.Agent({connect:{ca:e}}))}},"addToGlobalAgent");Gf.addToGlobalAgent=Xer});var Nrt=Q((Tei,JEe)=>{d();function Zer(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=r(e(__dirname,"crypt32.node")),i=[],o=new n.Crypt32;try{let a;for(;a=o.next();){let c=new t(a);i.push(c.toString())}}finally{o.done()}return Array.from(new Set(i))}s(Zer,"all");process.platform!=="win32"?JEe.exports.all=()=>[]:JEe.exports.all=Zer});var Hrt=Q((Bei,qrt)=>{"use strict";d();function Urt(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(Urt,"validateParameter");function ttr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(ttr,"hasOwnProperty");function rtr(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let c=e[o],l=r[a];ttr(c,"default")&&l==null&&(l=c.default),c.type==="object"&&c.default!=null&&(l=Object.assign({},c.default,l)),c.name==="options"&&(typeof l=="function"||l==null)&&(l={}),Urt(l,e,o)?n.push(l):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((c,l)=>{if(c)return a(c);o(l)}),t.apply(this,n)});t.apply(this,n)}}s(rtr,"defineOperation");qrt.exports={defineOperation:rtr,validateParameter:Urt}});var sve=Q((Lei,jrt)=>{"use strict";d();var YB=bme()("kerberos"),zB=YB.KerberosClient,Wrt=YB.KerberosServer,rT=Hrt().defineOperation,ntr=1,itr=2,otr=4,str=8,atr=16,ctr=32,ltr=64,utr=128,dtr=256,Grt=0,ftr=9,ptr=6;zB.prototype.step=rT(zB.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);zB.prototype.wrap=rT(zB.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);zB.prototype.unwrap=rT(zB.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);Wrt.prototype.step=rT(Wrt.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var mtr=rT(YB.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),htr=rT(YB.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),gtr=rT(YB.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:Grt}},{name:"callback",type:"function",required:!1}]),Atr=rT(YB.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);jrt.exports={initializeClient:gtr,initializeServer:Atr,principalDetails:htr,checkPassword:mtr,GSS_C_DELEG_FLAG:ntr,GSS_C_MUTUAL_FLAG:itr,GSS_C_REPLAY_FLAG:otr,GSS_C_SEQUENCE_FLAG:str,GSS_C_CONF_FLAG:atr,GSS_C_INTEG_FLAG:ctr,GSS_C_ANON_FLAG:ltr,GSS_C_PROT_READY_FLAG:utr,GSS_C_TRANS_FLAG:dtr,GSS_C_NO_OID:Grt,GSS_MECH_OID_KRB5:ftr,GSS_MECH_OID_SPNEGO:ptr}});var Vrt=Q((Fei,ytr)=>{ytr.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var zrt=Q((Oei,$rt)=>{"use strict";d();var Ctr=require("dns"),Etr=sve(),ave=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=vtr(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,c,l){if(!a)return l();Ctr.resolveCname(c,(u,f)=>{if(u)return l(u);Array.isArray(f)&&f.length>0&&(i.host=f[0]),l()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let c={};r!=null&&Object.assign(c,{user:e,password:r});let l=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;Etr.initializeClient(l,c,(u,f)=>{if(u)return n(u,null);i.client=f,n(null,f)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function vtr(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=xtr(t),r(null,i)})}}s(vtr,"firstTransition");function xtr(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=btr(t),r(null,i||"")})}}s(xtr,"secondTransition");function btr(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=Itr(t),r(null,a)})})}}s(btr,"thirdTransition");function Itr(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(Itr,"fourthTransition");$rt.exports={MongoAuthProcess:ave}});var Krt=Q((qei,wO)=>{"use strict";d();var Yrt=sve();wO.exports=Yrt;wO.exports.Kerberos=Yrt;wO.exports.version=Vrt().version;wO.exports.processes={MongoAuthProcess:zrt().MongoAuthProcess}});var Qnt=Q(Lve=>{"use strict";d();Object.defineProperty(Lve,"__esModule",{value:!0});Lve.assertNever=Drr;function Drr(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(Drr,"assertNever")});var HO=Q(GE=>{"use strict";d();Object.defineProperty(GE,"__esModule",{value:!0});GE.ChatCompletionContentPartOpaque=GE.ChatCompletionContentPartKind=GE.ChatRole=void 0;var Nrr=Qnt(),ZZ;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(ZZ||(GE.ChatRole=ZZ={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,Nrr.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(ZZ||(GE.ChatRole=ZZ={}));var Unt;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(Unt||(GE.ChatCompletionContentPartKind=Unt={}));var qnt;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(qnt||(GE.ChatCompletionContentPartOpaque=qnt={}))});var Mve=Q(pC=>{"use strict";d();Object.defineProperty(pC,"__esModule",{value:!0});pC.BaseTokensPerName=pC.BaseTokensPerMessage=pC.BaseTokensPerCompletion=pC.ChatRole=void 0;var Hnt;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Hnt||(pC.ChatRole=Hnt={}));pC.BaseTokensPerCompletion=3;pC.BaseTokensPerMessage=3;pC.BaseTokensPerName=1});var Gnt=Q(tee=>{"use strict";d();Object.defineProperty(tee,"__esModule",{value:!0});tee.toOpenAiChatMessage=Wnt;tee.toOpenAIChatMessages=Frr;var jE=HO(),eee=Mve(),Lrr=dT();function Fve(t){return t.filter(e=>e.type===jE.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Fve,"onlyStringContent");function Mrr(t){let e=t.map(r=>{if(r.type===jE.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===jE.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===jE.ChatCompletionContentPartKind.Opaque&&jE.ChatCompletionContentPartOpaque.usableIn(r,Lrr.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(Mrr,"stringAndImageContent");function Wnt(t){switch(t.role){case jE.ChatRole.System:return{role:eee.ChatRole.System,content:Fve(t.content),name:t.name};case jE.ChatRole.User:return{role:eee.ChatRole.User,content:Mrr(t.content),name:t.name};case jE.ChatRole.Assistant:return{role:eee.ChatRole.Assistant,content:Fve(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case jE.ChatRole.Tool:return{role:eee.ChatRole.Tool,content:Fve(t.content),tool_call_id:t.toolCallId};default:return}}s(Wnt,"toOpenAiChatMessage");function Frr(t){return t.map(Wnt).filter(e=>!!e)}s(Frr,"toOpenAIChatMessages")});var Vnt=Q(iee=>{"use strict";d();Object.defineProperty(iee,"__esModule",{value:!0});iee.toVsCodeChatMessage=jnt;iee.toVsCodeChatMessages=Orr;var nee=HO();function ree(t){return t.filter(e=>e.type===nee.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(ree,"onlyStringContent");var fT;function jnt(t){switch(fT??=require("vscode"),t.role){case nee.ChatRole.Assistant:let e=fT.LanguageModelChatMessage.Assistant(ree(t.content),t.name);return t.toolCalls&&(e.content=[new fT.LanguageModelTextPart(ree(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new fT.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case nee.ChatRole.User:return fT.LanguageModelChatMessage.User(ree(t.content),t.name);case nee.ChatRole.Tool:{let r=fT.LanguageModelChatMessage.User("");return r.content=[new fT.LanguageModelToolResultPart(t.toolCallId,[new fT.LanguageModelTextPart(ree(t.content))])],r}default:return}}s(jnt,"toVsCodeChatMessage");function Orr(t){return t.map(jnt).filter(e=>!!e)}s(Orr,"toVsCodeChatMessages")});var dT=Q(Lg=>{"use strict";d();Object.defineProperty(Lg,"__esModule",{value:!0});Lg.OutputMode=Lg.Raw=Lg.OpenAI=void 0;Lg.toMode=Ove;Lg.toVSCode=Qrr;Lg.toOpenAI=Urr;var $nt=Gnt(),znt=Vnt();Lg.OpenAI=Mve();Lg.Raw=HO();var iR;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(iR||(Lg.OutputMode=iR={}));function Ove(t,e){switch(t){case iR.Raw:return e;case iR.VSCode:return e instanceof Array?(0,znt.toVsCodeChatMessages)(e):(0,znt.toVsCodeChatMessage)(e);case iR.OpenAI:return e instanceof Array?(0,$nt.toOpenAIChatMessages)(e):(0,$nt.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(Ove,"toMode");function Qrr(t){return Ove(iR.VSCode,t)}s(Qrr,"toVSCode");function Urr(t){return Ove(iR.OpenAI,t)}s(Urr,"toOpenAI")});var Qve=Q(WO=>{"use strict";d();Object.defineProperty(WO,"__esModule",{value:!0});WO.jsonRetainedProps=void 0;WO.forEachNode=Ynt;WO.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function Ynt(t,e){if(e(t),t.type===1)for(let r of t.children)Ynt(r,e)}s(Ynt,"forEachNode")});var Knt=Q(Uve=>{"use strict";d();Object.defineProperty(Uve,"__esModule",{value:!0});Uve.once=qrr;function qrr(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(qrr,"once")});var Gve=Q(td=>{"use strict";d();Object.defineProperty(td,"__esModule",{value:!0});td.BudgetExceededError=td.MaterializedChatMessageImage=td.MaterializedChatMessageBreakpoint=td.MaterializedChatMessageOpaque=td.MaterializedChatMessage=td.MaterializedChatMessageTextChunk=td.GenericMaterializedContainer=void 0;var aD=Knt(),cp=dT(),VE=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,c){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=c,this.children=o(this),c&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[l,u]=this.children;u.isEmpty?this.children=[l]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=mT(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return oit(e,this.children,r)}allMetadata(){return iit(this)}findById(e){return Wve(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)Hrr(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof Fg&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof Fg||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return Hve(this,e),e}};td.GenericMaterializedContainer=VE;var GO=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,aD.once)(async e=>await e.tokenLength({type:cp.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};td.MaterializedChatMessageTextChunk=GO;var Fg=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,c,l,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=c,this.metadata=l,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=oit(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return Hve(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return Wve(e,this)}_tokenCount=(0,aD.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,cp.toMode)(e.mode,r))});_upperBound=(0,aD.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,aD.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===cp.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===cp.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,cp.toMode)(e.mode,r))});_text=(0,aD.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of rit(this)){if(r instanceof oR||r instanceof pT){e.push(r);continue}if(r instanceof Mg){e.at(-1)instanceof Mg?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:cp.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof oR)return{type:cp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:sit(r.src),detail:r.detail}};if(r instanceof pT)return r.value;if(r instanceof Mg)return r.part;throw new Error("Unexpected element type")});if(this.role===cp.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===cp.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===cp.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===cp.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};td.MaterializedChatMessage=Fg;var pT=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&cp.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};td.MaterializedChatMessageOpaque=pT;var Mg=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};td.MaterializedChatMessageBreakpoint=Mg;var oR=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,c){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=c}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,aD.once)(async e=>e.tokenLength({type:cp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:sit(this.src),detail:this.detail}}));isEmpty=!1};td.MaterializedChatMessageImage=oR;function mT(t){return t instanceof VE||t instanceof Fg}s(mT,"isContainerType");function tit(t){return t instanceof GO||t instanceof oR||t instanceof pT||t instanceof Mg}s(tit,"isContentType");function Hrr(t){if(!mT(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(Hrr,"assertContainerOrChatMessage");function*rit(t,e=!1){for(let r of t.children)r instanceof GO?(yield{content:r,isTextSibling:e},e=!0):r instanceof oR||r instanceof pT||r instanceof Mg?yield{content:r,isTextSibling:!1}:r instanceof pT?yield{content:r,isTextSibling:!0}:(r&&(yield*rit(r,e)),e=!1)}s(rit,"contentChunks");function Wrr(t,e){let r;function n(i,o){if(tit(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");jO(r.node,e)}s(Wrr,"removeLowestPriorityLegacy");var Jnt=new WeakMap;function nit(t){let e=Jnt.get(t);if(e!==void 0)return e;let r=!1;return t instanceof Mg?r=!0:t instanceof Fg?r=t.children.some(n=>n instanceof Mg):t instanceof VE&&(r=t.children.some(nit)),Jnt.set(t,r),r}s(nit,"hasCachePoint");function Grr(t){if(t instanceof Fg)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof Fg)return!1;return!0}s(Grr,"shouldLookForCachePointInNode");function Hve(t,e){let r;if(t instanceof VE&&t.has(1)){Wrr(t,e);return}let n=Grr(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:c}=i[o],l=a[a.length-1].children[c];if(!(n&&nit(l)&&(r=void 0,l instanceof Mg))){if(l instanceof VE&&l.has(4)){let u=[...a,l];i.splice(o+1,0,...l.children.map((f,p)=>({chain:u,index:p})))}else if(!r||l.priority<r.value.priority)r={chain:a,index:c,value:l};else if(l.priority===r.value.priority){r.lowestNested??=Xnt(r.value);let u=Xnt(l);u<r.lowestNested&&(r={chain:a,index:c,value:l,lowestNested:u})}}}if(!r)throw new oee(t);tit(r.value)||r.value instanceof VE&&r.value.has(2)||mT(r.value)&&!r.value.children.length?jO(r.value,e):Hve(r.value,e)}s(Hve,"removeLowestPriorityChild");var oee=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof Fg?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};td.BudgetExceededError=oee;function Xnt(t){if(!mT(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(Xnt,"getLowestPriorityAmongChildren");function*iit(t){yield*t.metadata;for(let e of t.children)mT(e)?yield*iit(e):yield*e.metadata}s(iit,"allMetadata");function oit(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(mT(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(oit,"replaceNode");function*Znt(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,mT(r)&&e.push(...r.children)}}s(Znt,"forEachNode");function jrr(t){let e=t;for(;e.parent;)e=e.parent;return e}s(jrr,"getRoot");function eit(t){return t instanceof VE&&t.keepWithId!==void 0}s(eit,"isKeepWith");var qve=new Set;function Vrr(t,e){let r=new Set;for(let n of Znt(t))eit(n)&&!qve.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)qve.add(n);try{let n=jrr(t);for(let i of Znt(n))eit(i)&&r.has(i.keepWithId)?jO(i,e):i instanceof Fg&&i.toolCalls&&(i.toolCalls=$rr(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&jO(i,e))}finally{for(let n of r)qve.delete(n)}}s(Vrr,"removeOtherKeepWiths");function Wve(t,e){if(e.id===t)return e;for(let r of e.children)if(mT(r)){let n=Wve(t,r);if(n)return n}}s(Wve,"findNodeById");function jO(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),Vrr(t,e),r.isEmpty?jO(r,e):r.onChunksChange())}s(jO,"removeNode");function sit(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(sit,"getEncodedBase64");function $rr(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s($rr,"filterIfDifferent")});var cit=Q(()=>{"use strict";d();function zrr(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(zrr,"_vscpp");function ait(){throw new Error("This should not be invoked!")}s(ait,"_vscppf");ait.isFragment=!0;globalThis.vscpp=zrr;globalThis.vscppf=ait});var Vve=Q(see=>{"use strict";d();Object.defineProperty(see,"__esModule",{value:!0});see.PromptElement=void 0;cit();var jve=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};see.PromptElement=jve});var rxe=Q(to=>{"use strict";d();Object.defineProperty(to,"__esModule",{value:!0});to.LogicalWrapper=to.IfEmpty=to.AbstractKeepWith=to.TokenLimit=to.Expandable=to.Chunk=to.LegacyPrioritization=to.ToolResult=to.PrioritizedList=to.Image=to.TextChunk=to.ToolMessage=to.AssistantMessage=to.UserMessage=to.SystemMessage=to.BaseChatMessage=void 0;to.isChatMessagePromptElement=Yrr;to.useKeepWith=Zrr;var $O=Og(),Jm=Vve();function Yrr(t){return t instanceof aee||t instanceof cee||t instanceof lee}s(Yrr,"isChatMessagePromptElement");var sR=class extends Jm.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};to.BaseChatMessage=sR;var aee=class extends sR{static{s(this,"SystemMessage")}constructor(e){e.role=$O.Raw.ChatRole.System,super(e)}};to.SystemMessage=aee;var cee=class extends sR{static{s(this,"UserMessage")}constructor(e){e.role=$O.Raw.ChatRole.User,super(e)}};to.UserMessage=cee;var lee=class extends sR{static{s(this,"AssistantMessage")}constructor(e){e.role=$O.Raw.ChatRole.Assistant,super(e)}};to.AssistantMessage=lee;var Krr=/\s+/g,$ve=class extends sR{static{s(this,"ToolMessage")}constructor(e){e.role=$O.Raw.ChatRole.Tool,super(e)}};to.ToolMessage=$ve;var uee=class extends Jm.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?Krr:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let l of this.props.children||[])if(l&&typeof l=="object"){if(typeof l.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");l.ctor==="br"?o+=`
`:a.push(l)}else l!=null&&(o+=l);let c=await Jrr(e,i,o,n);return vscpp(vscppf,null,a,c)}render(e){return e}};to.TextChunk=uee;async function Jrr(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let c=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:$O.Raw.ChatCompletionContentPartKind.Text,text:c},n)>t.tokenBudget)return i;i=c,o=a}return i}s(Jrr,"getTextContentBelowBudget");var zve=class extends Jm.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};to.Image=zve;var Yve=class extends Jm.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(uee,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};to.PrioritizedList=Yve;var Kve=class extends Jm.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};to.ToolResult=Kve;var Jve=class extends Jm.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};to.LegacyPrioritization=Jve;var Xve=class extends Jm.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};to.Chunk=Xve;var Zve=class extends Jm.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};to.Expandable=Zve;var exe=class extends Jm.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};to.TokenLimit=exe;var dee=class extends Jm.PromptElement{static{s(this,"AbstractKeepWith")}};to.AbstractKeepWith=dee;var Xrr=0;function Zrr(){let t=Xrr++;return class extends dee{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(Zrr,"useKeepWith");var txe=class extends Jm.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(VO,null,this.props.alt),vscpp(VO,{flexGrow:1},this.props.children))}};to.IfEmpty=txe;var VO=class extends Jm.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};to.LogicalWrapper=VO});var uit=Q(zO=>{"use strict";d();Object.defineProperty(zO,"__esModule",{value:!0});zO.localize=enr;zO.localize2=tnr;zO.getConfiguredDefaultLocale=rnr;function lit(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(lit,"_format");function enr(t,e,...r){return lit(e,r)}s(enr,"localize");function tnr(t,e,...r){let n=lit(e,r);return{original:n,value:n}}s(tnr,"localize2");function rnr(t){}s(rnr,"getConfiguredDefaultLocale")});var sxe=Q(Ut=>{"use strict";d();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.isAndroid=Ut.isEdge=Ut.isSafari=Ut.isFirefox=Ut.isChrome=Ut.OS=Ut.setTimeout0=Ut.setTimeout0IsFaster=Ut.translationsConfigFile=Ut.platformLocale=Ut.locale=Ut.Language=Ut.language=Ut.userAgent=Ut.platform=Ut.isCI=Ut.isMobile=Ut.isIOS=Ut.webWorkerOrigin=Ut.isWebWorker=Ut.isWeb=Ut.isElectron=Ut.isNative=Ut.isLinuxSnap=Ut.isLinux=Ut.isMacintosh=Ut.isWindows=Ut.LANGUAGE_DEFAULT=void 0;Ut.PlatformToString=inr;Ut.isLittleEndian=onr;Ut.isBigSurOrNewer=snr;var dit=uit();Ut.LANGUAGE_DEFAULT="en";var JO=!1,XO=!1,KO=!1,hit=!1,git=!1,ixe=!1,Ait=!1,oxe=!1,yit=!1,Cit=!1,YO,fee=Ut.LANGUAGE_DEFAULT,nxe=Ut.LANGUAGE_DEFAULT,Eit,$E,zE=globalThis,lp;typeof zE.vscode<"u"&&typeof zE.vscode.process<"u"?lp=zE.vscode.process:typeof process<"u"&&(lp=process);var vit=typeof lp?.versions?.electron=="string",nnr=vit&&lp?.type==="renderer";if(typeof lp=="object"){JO=lp.platform==="win32",XO=lp.platform==="darwin",KO=lp.platform==="linux",hit=KO&&!!lp.env.SNAP&&!!lp.env.SNAP_REVISION,Ait=vit,yit=!!lp.env.CI||!!lp.env.BUILD_ARTIFACTSTAGINGDIRECTORY,YO=Ut.LANGUAGE_DEFAULT,fee=Ut.LANGUAGE_DEFAULT;let t=lp.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];YO=e.locale,nxe=e.osLocale,fee=r||Ut.LANGUAGE_DEFAULT,Eit=e._translationsConfigFile}catch{}git=!0}else typeof navigator=="object"&&!nnr?($E=navigator.userAgent,JO=$E.indexOf("Windows")>=0,XO=$E.indexOf("Macintosh")>=0,oxe=($E.indexOf("Macintosh")>=0||$E.indexOf("iPad")>=0||$E.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,KO=$E.indexOf("Linux")>=0,Cit=$E?.indexOf("Mobi")>=0,ixe=!0,YO=dit.getConfiguredDefaultLocale(dit.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Ut.LANGUAGE_DEFAULT,fee=YO,nxe=navigator.language):console.error("Unable to resolve platform.");function inr(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(inr,"PlatformToString");var pee=0;XO?pee=1:JO?pee=3:KO&&(pee=2);Ut.isWindows=JO;Ut.isMacintosh=XO;Ut.isLinux=KO;Ut.isLinuxSnap=hit;Ut.isNative=git;Ut.isElectron=Ait;Ut.isWeb=ixe;Ut.isWebWorker=ixe&&typeof zE.importScripts=="function";Ut.webWorkerOrigin=Ut.isWebWorker?zE.origin:void 0;Ut.isIOS=oxe;Ut.isMobile=Cit;Ut.isCI=yit;Ut.platform=pee;Ut.userAgent=$E;Ut.language=fee;var fit;(function(t){function e(){return Ut.language}s(e,"value"),t.value=e;function r(){return Ut.language.length===2?Ut.language==="en":Ut.language.length>=3?Ut.language[0]==="e"&&Ut.language[1]==="n"&&Ut.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return Ut.language==="en"}s(n,"isDefault"),t.isDefault=n})(fit||(Ut.Language=fit={}));Ut.locale=YO;Ut.platformLocale=nxe;Ut.translationsConfigFile=Eit;Ut.setTimeout0IsFaster=typeof zE.postMessage=="function"&&!zE.importScripts;Ut.setTimeout0=(()=>{if(Ut.setTimeout0IsFaster){let t=[];zE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),zE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Ut.OS=XO||oxe?2:JO?1:3;var pit=!0,mit=!1;function onr(){if(!mit){mit=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,pit=new Uint16Array(t.buffer)[0]===513}return pit}s(onr,"isLittleEndian");Ut.isChrome=!!(Ut.userAgent&&Ut.userAgent.indexOf("Chrome")>=0);Ut.isFirefox=!!(Ut.userAgent&&Ut.userAgent.indexOf("Firefox")>=0);Ut.isSafari=!!(!Ut.isChrome&&Ut.userAgent&&Ut.userAgent.indexOf("Safari")>=0);Ut.isEdge=!!(Ut.userAgent&&Ut.userAgent.indexOf("Edg/")>=0);Ut.isAndroid=!!(Ut.userAgent&&Ut.userAgent.indexOf("Android")>=0);function snr(t){return parseFloat(t)>=20}s(snr,"isBigSurOrNewer")});var bit=Q(mC=>{"use strict";d();Object.defineProperty(mC,"__esModule",{value:!0});mC.arch=mC.platform=mC.env=mC.cwd=void 0;var xit=sxe(),aR,axe=globalThis.vscode;if(typeof axe<"u"&&typeof axe.process<"u"){let t=axe.process;aR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?aR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:aR={get platform(){return xit.isWindows?"win32":xit.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};mC.cwd=aR.cwd;mC.env=aR.env;mC.platform=aR.platform;mC.arch=aR.arch});var Tit=Q(ur=>{"use strict";d();Object.defineProperty(ur,"__esModule",{value:!0});ur.delimiter=ur.sep=ur.toNamespacedPath=ur.parse=ur.format=ur.extname=ur.basename=ur.dirname=ur.relative=ur.resolve=ur.join=ur.isAbsolute=ur.normalize=ur.posix=ur.win32=void 0;var cD=bit(),anr=65,cnr=97,lnr=90,unr=122,AT=46,Ul=47,zf=92,hT=58,dnr=63,mee=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function fnr(t,e){if(t===null||typeof t!="object")throw new mee(e,"Object",t)}s(fnr,"validateObject");function ja(t,e){if(typeof t!="string")throw new mee(e,"string",t)}s(ja,"validateString");var Yf=cD.platform==="win32";function yi(t){return t===Ul||t===zf}s(yi,"isPathSeparator");function cxe(t){return t===Ul}s(cxe,"isPosixPathSeparator");function gT(t){return t>=anr&&t<=lnr||t>=cnr&&t<=unr}s(gT,"isWindowsDeviceRoot");function hee(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=Ul}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==AT||i.charCodeAt(i.length-2)!==AT){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===AT&&c!==-1?++c:c=-1}return i}s(hee,"normalizeString");function Iit(t,e){fnr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(Iit,"_format");ur.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ja(o,"path"),o.length===0)continue}else e.length===0?o=cD.cwd():(o=cD.env[`=${e}`]||cD.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===zf)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)yi(f)&&(c=1,u=!0);else if(yi(f))if(u=!0,yi(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!yi(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&yi(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!yi(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else gT(f)&&o.charCodeAt(1)===hT&&(l=o.slice(0,2),c=2,a>2&&yi(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=hee(r,!n,"\\",yi),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){ja(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return cxe(o)?"\\":t;if(yi(o))if(i=!0,yi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!yi(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else gT(o)&&t.charCodeAt(1)===hT&&(n=t.slice(0,2),r=2,e>2&&yi(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?hee(t.slice(r),!i,"\\",yi):"";return a.length===0&&!i&&(a="."),a.length>0&&yi(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){ja(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return yi(r)||e>2&&gT(r)&&t.charCodeAt(1)===hT&&yi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];ja(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&yi(r.charCodeAt(0))){++i;let o=r.length;o>1&&yi(r.charCodeAt(1))&&(++i,o>2&&(yi(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&yi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ur.win32.normalize(e)},relative(t,e){if(ja(t,"from"),ja(e,"to"),t===e)return"";let r=ur.win32.resolve(t),n=ur.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===zf;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===zf;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===zf;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===zf;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===zf&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===zf)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===zf?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===zf)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===zf&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ur.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===zf){if(e.charCodeAt(1)===zf){let r=e.charCodeAt(2);if(r!==dnr&&r!==AT)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(gT(e.charCodeAt(0))&&e.charCodeAt(1)===hT&&e.charCodeAt(2)===zf)return`\\\\?\\${e}`;return t},dirname(t){ja(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return yi(i)?t:".";if(yi(i)){if(r=n=1,yi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!yi(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else gT(i)&&t.charCodeAt(1)===hT&&(r=e>2&&yi(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(yi(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&ja(e,"ext"),ja(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&gT(t.charCodeAt(0))&&t.charCodeAt(1)===hT&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(yi(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(yi(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ja(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===hT&&gT(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(yi(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===AT?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:Iit.bind(null,"\\"),parse(t){ja(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return yi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(yi(i)){if(n=1,yi(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!yi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&yi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!yi(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(gT(i)&&t.charCodeAt(1)===hT){if(r<=2)return e.root=e.dir=t,e;if(n=2,yi(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),yi(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===AT?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var pnr=(()=>{if(Yf){let t=/\\/g;return()=>{let e=cD.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>cD.cwd()})();ur.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:pnr();ja(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Ul)}return e=hee(e,!r,"/",cxe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(ja(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ul,r=t.charCodeAt(t.length-1)===Ul;return t=hee(t,!e,"/",cxe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ja(t,"path"),t.length>0&&t.charCodeAt(0)===Ul},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];ja(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":ur.posix.normalize(e)},relative(t,e){if(ja(t,"from"),ja(e,"to"),t===e||(t=ur.posix.resolve(t),e=ur.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Ul&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===Ul)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===Ul?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===Ul)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(ja(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ul,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Ul){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&ja(e,"ext"),ja(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===Ul){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Ul){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ja(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===Ul){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===AT?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:Iit.bind(null,"/"),parse(t){ja(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Ul,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===Ul){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===AT?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ur.posix.win32=ur.win32.win32=ur.win32;ur.posix.posix=ur.win32.posix=ur.posix;ur.normalize=Yf?ur.win32.normalize:ur.posix.normalize;ur.isAbsolute=Yf?ur.win32.isAbsolute:ur.posix.isAbsolute;ur.join=Yf?ur.win32.join:ur.posix.join;ur.resolve=Yf?ur.win32.resolve:ur.posix.resolve;ur.relative=Yf?ur.win32.relative:ur.posix.relative;ur.dirname=Yf?ur.win32.dirname:ur.posix.dirname;ur.basename=Yf?ur.win32.basename:ur.posix.basename;ur.extname=Yf?ur.win32.extname:ur.posix.extname;ur.format=Yf?ur.win32.format:ur.posix.format;ur.parse=Yf?ur.win32.parse:ur.posix.parse;ur.toNamespacedPath=Yf?ur.win32.toNamespacedPath:ur.posix.toNamespacedPath;ur.sep=Yf?ur.win32.sep:ur.posix.sep;ur.delimiter=Yf?ur.win32.delimiter:ur.posix.delimiter});var Bit=Q(lD=>{"use strict";d();Object.defineProperty(lD,"__esModule",{value:!0});lD.URI=void 0;lD.isUriComponents=vnr;lD.uriToFsPath=Cee;var wit=Tit(),Aee=sxe(),mnr=/^\w[\w\d+.-]*$/,hnr=/^\//,gnr=/^\/\//;function Anr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!mnr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!hnr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(gnr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Anr,"_validateUri");function ynr(t,e){return!t&&!e?"file":t}s(ynr,"_schemeFix");function Cnr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Qg&&(e=Qg+e):e=Qg;break}return e}s(Cnr,"_referenceResolution");var ms="",Qg="/",Enr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,yee=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||ms,this.authority=e.authority||ms,this.path=e.path||ms,this.query=e.query||ms,this.fragment=e.fragment||ms):(this.scheme=ynr(e,a),this.authority=r||ms,this.path=Cnr(this.scheme,n||ms),this.query=i||ms,this.fragment=o||ms,Anr(this,a))}get fsPath(){return Cee(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=ms),n===void 0?n=this.authority:n===null&&(n=ms),i===void 0?i=this.path:i===null&&(i=ms),o===void 0?o=this.query:o===null&&(o=ms),a===void 0?a=this.fragment:a===null&&(a=ms),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new yT(r,n,i,o,a)}static parse(e,r=!1){let n=Enr.exec(e);return n?new yT(n[2]||ms,gee(n[4]||ms),gee(n[5]||ms),gee(n[7]||ms),gee(n[9]||ms),r):new yT(ms,ms,ms,ms,ms)}static file(e){let r=ms;if(Aee.isWindows&&(e=e.replace(/\\/g,Qg)),e[0]===Qg&&e[1]===Qg){let n=e.indexOf(Qg,2);n===-1?(r=e.substring(2),e=Qg):(r=e.substring(2,n),e=e.substring(n)||Qg)}return new yT("file",r,e,ms,ms)}static from(e,r){return new yT(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Aee.isWindows&&e.scheme==="file"?n=t.file(wit.win32.join(Cee(e,!0),...r)).path:n=wit.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return lxe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new yT(e);return r._formatted=e.external??null,r._fsPath=e._sep===Rit?e.fsPath??null:null,r}}else return e}};lD.URI=yee;function vnr(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(vnr,"isUriComponents");var Rit=Aee.isWindows?1:void 0,yT=class extends yee{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=Cee(this,!1)),this._fsPath}toString(e=!1){return e?lxe(this,!0):(this._formatted||(this._formatted=lxe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Rit),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},kit={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function _it(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=kit[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(_it,"encodeURIComponentFast");function xnr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=kit[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(xnr,"encodeURIComponentMinimal");function Cee(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,Aee.isWindows&&(r=r.replace(/\//g,"\\")),r}s(Cee,"uriToFsPath");function lxe(t,e){let r=e?xnr:_it,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Qg,n+=Qg),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:_it(l,!1,!1)),n}s(lxe,"_asFormatted");function Pit(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+Pit(t.substr(3)):t}}s(Pit,"decodeURIComponentGraceful");var Sit=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function gee(t){return t.match(Sit)?t.replace(Sit,e=>Pit(e)):t}s(gee,"percentDecode")});var fxe=Q(CT=>{"use strict";d();Object.defineProperty(CT,"__esModule",{value:!0});CT.PromptReference=CT.ChatResponseReferencePartStatusKind=CT.PromptMetadata=void 0;var ZO=Bit(),uxe=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};CT.PromptMetadata=uxe;var Dit;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(Dit||(CT.ChatResponseReferencePartStatusKind=Dit={}));var dxe=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?ZO.URI.from(n):{uri:ZO.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?ZO.URI.from(e.iconPath):"light"in e.iconPath?{light:ZO.URI.from(e.iconPath.light),dark:ZO.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};CT.PromptReference=dxe});var vxe=Q(dD=>{"use strict";d();Object.defineProperty(dD,"__esModule",{value:!0});dD.PromptRenderer=dD.MetadataMap=void 0;var bnr=Qve(),e7=Gve(),uD=dT(),hc=rxe(),Exe=fxe(),Nit;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(Nit||(dD.MetadataMap=Nit={}));var mxe=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new vee(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[l,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=Oit(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let f=this.createElement(u),p;f instanceof hc.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(f);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:f,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([l],[u])=>u-l).map(([l,u])=>u),c=s(l=>{let u=0;for(let f=l+1;f<a.length;f++)for(let{element:p}of a[f]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[l,u]of a.entries()){let f=c(l),p=0;for(let{element:E}of u)p+=E.props.flexBasis??1;let m=0,h=u.map(E=>{if(E.tokenLimit===void 0)return!1;let x=E.element.props.flexBasis??1,b=x/p;return Math.floor(e.remainingTokenBudget*b)<E.tokenLimit?!1:(p-=x,m+=E.tokenLimit,!0)}),g=u.map((E,x)=>{let b=(E.element.props.flexBasis??1)/p;return{tokenBudget:h[x]?E.tokenLimit:Math.floor((e.remainingTokenBudget-m)*b),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:uD.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-f),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:f,elements:u.map((E,x)=>({id:E.element.node.id,tokenBudget:g[x].tokenBudget}))}),await Promise.all(u.map(async({element:E,promptElementInstance:x},b)=>{let _=await Mit(E,()=>x.prepare?.(g[b],n,i));E.node.setState(_)}));let y=await Promise.all(u.map(async({element:E,promptElementInstance:x},b)=>{let _=g[b];return await Mit(E,()=>x.render(E.node.getState(),_,n,i))}));for(let[E,{element:x,promptElementInstance:b}]of u.entries()){let _=g[E],k=y[E];if(!k)continue;let P=await this._processPromptRenderPiece(new cR(_.tokenBudget,this._endpoint),x,b,k,n,i);b instanceof hc.Expandable&&this._growables.push({initialConsume:P,elem:x.node}),e.consume(P)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let c=Fit(i),l=new cR(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await Inr(this._tokenizer,r,n,c);return l.consume(u),await this._handlePromptChildren(r,c,l,o,a),l.consumed}async renderElementJSON(e){return await this._processPromptPieces(new cR(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,uD.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new cR(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],c=await n.tokenCount(this._tokenizer),l=[...n.allMetadata()],u=new Set,f=l.map(m=>{if(!(m instanceof hC))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(xee),p=i.map(m=>{if(!(m instanceof hC)||l.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(xee);return{metadata:{get:s(m=>l.find(h=>h instanceof m),"get"),getAll:s(m=>l.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:c,references:f,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let c=o.length-1;c>=0;c--){let l=o[c];if(l.limit>e)continue;let u=n.findById(l.id);if(!u)continue;let f=await u.tokenCount(this._tokenizer);if(f<l.limit&&!await this._grow(u,f,l.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>l.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>l.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof hc.Expandable))throw new Error("unreachable: expected growable");let c=new vee(null,0,o.elem.id),l=new cR(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(l,{node:c,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:l.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:uD.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),f=c.materialize();if(!e.replaceNode(o.elem.id,f))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===hc.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let c of r){if(c.kind==="literal"){e.node.appendStringChild(c.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(c.kind==="intrinsic"){this._handleIntrinsic(e.node,c.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...c.props},Eee(c.children));continue}let l=e.node.createChild();a.push({node:l,ctor:c.ctor,props:c.props,children:c.children,path:[...e.path,c.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new hC(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let c of i){if(c.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(c.kind==="literal"&&o.push(c.value),c.kind==="intrinsic")if(c.name==="br")o.push(`
`);else if(c.name==="references")for(let l of c.props.value)a.push(new hC(l));else this._handleIntrinsic(e,c.name,c.props,Eee(c.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};dD.PromptRenderer=mxe;async function Inr(t,e,r,n){let i=0;if((0,hc.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,uD.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:uD.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(Inr,"computeTokensConsumedByLiterals");function Fit(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new Axe(String(t))):Tnr(t)?Eee(t.children,e):wnr(t)?Eee(t,e):typeof t.ctor=="string"?e.push(new hxe(t.ctor,t.props,t.children)):e.push(new gxe(t.ctor,t.props,t.children)),e)}s(Fit,"flattenAndReduce");function Eee(t,e=[]){for(let r of t)Fit(r,e);return e}s(Eee,"flattenAndReduceArr");var hxe=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},gxe=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},Axe=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},cR=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},vee=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new hC(Exe.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return t7.fromJSON(i,a,o);default:}}).filter(xee),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new hc.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,hc.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new hc.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new hc.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof hc.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof hc.Chunk&&(this._objFlags|=2),this._obj instanceof hc.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new t7(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new t7(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(xee),props:{},references:this._metadata.filter(r=>r instanceof hC).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=pxe(this._obj.props,bnr.jsonRetainedProps)),this._obj instanceof hc.BaseChatMessage)e.ctor=1,Object.assign(e.props,pxe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof hc.Image)return{...e,ctor:3,props:{...e.props,...pxe(this._obj.props,["src","detail"])}};this._obj instanceof hc.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof hc.Image)return new e7.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof hc.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new e7.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof hc.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof hc.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new e7.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof hc.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof hc.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new yxe({type:uD.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},yxe=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new e7.MaterializedChatMessageBreakpoint(e,this.part)}},t7=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new hC(Exe.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new e7.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof hC).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function Tnr(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(Tnr,"isFragmentCtor");function xee(t){return t!==void 0}s(xee,"isDefined");var Cxe=class extends Exe.PromptMetadata{static{s(this,"InternalMetadata")}},hC=class extends Cxe{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function wnr(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(wnr,"isIterable");function pxe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(pxe,"pickProps");function Oit(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(Oit,"atPath");var Lit=new WeakSet;async function Mit(t,e){try{return await e()}catch(r){throw r instanceof Error&&!Lit.has(r)&&r.constructor.name!=="CancellationError"&&(Lit.add(r),r.message+=` (at tsx element ${Oit(t.path)})`),r}}s(Mit,"annotateError")});var Qit=Q(bee=>{"use strict";d();Object.defineProperty(bee,"__esModule",{value:!0});bee.VSCodeTokenizer=void 0;var xxe=dT(),bxe=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=xxe.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==xxe.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===xxe.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};bee.VSCodeTokenizer=bxe});var Uit=Q(fD=>{"use strict";d();Object.defineProperty(fD,"__esModule",{value:!0});fD.tracerCss=fD.tracerSrc=void 0;fD.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';fD.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var jit=Q(Tee=>{"use strict";d();Object.defineProperty(Tee,"__esModule",{value:!0});Tee.HTMLTracer=void 0;var qit=Uit(),lR=Gve(),_nr=dT(),Ixe=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return Txe.create({epochs:this.epochs,traceData:Wit(this.traceData)})}serveRouter(e){return new Iee({baseAddress:e,epochs:this.epochs,traceData:Wit(this.traceData)})}};Tee.HTMLTracer=Ixe;var Iee=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${qit.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Hit(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${qit.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),c=await Hit(i.tokenizer,a),l=JSON.stringify(c);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(l)),n.end(l)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},Txe=class t extends Iee{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,c)=>{try{o.route(a,c)||(c.statusCode=404,c.end("Not Found"))}catch(l){c.statusCode=500,c.end(String(l))}}),i=await new Promise((a,c)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",c)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Hit(t,e){return{container:await Git(t,e.container,!1),removed:e.removed,budget:e.budget}}s(Hit,"serializeRenderData");async function Git(t,e,r){let n={metadata:e.metadata.map(Rnr),priority:e.priority};if(e instanceof lR.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof lR.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof lR.MaterializedChatMessageOpaque||e instanceof lR.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>Git(t,o,r||e instanceof lR.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof lR.GenericMaterializedContainer)return{...i,type:0};if(e instanceof lR.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:_nr.Raw.ChatRole.display(e.role),text:o}}}Snr(e)}s(Git,"serializeMaterialized");function Snr(t){throw new Error("unreachable")}s(Snr,"assertNever");function Rnr(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(Rnr,"serializeMetadata");var Wit=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var $it=Q(Vit=>{"use strict";d();Object.defineProperty(Vit,"__esModule",{value:!0})});var Yit=Q(zit=>{"use strict";d();Object.defineProperty(zit,"__esModule",{value:!0})});var Jit=Q(Kit=>{"use strict";d();Object.defineProperty(Kit,"__esModule",{value:!0})});var Og=Q(Ks=>{"use strict";d();var knr=Ks&&Ks.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uR=Ks&&Ks.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&knr(e,t,r)};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.contentType=Ks.PromptRenderer=Ks.MetadataMap=Ks.PromptElement=Ks.JSONTree=void 0;Ks.renderPrompt=Dnr;Ks.renderElementJSON=Nnr;var wxe=dT(),Xit=vxe(),Pnr=Qit();uR(jit(),Ks);Ks.JSONTree=Qve();uR(dT(),Ks);uR(rxe(),Ks);uR(fxe(),Ks);uR($it(),Ks);uR(Yit(),Ks);uR(Jit(),Ks);var Bnr=Vve();Object.defineProperty(Ks,"PromptElement",{enumerable:!0,get:s(function(){return Bnr.PromptElement},"get")});var Zit=vxe();Object.defineProperty(Ks,"MetadataMap",{enumerable:!0,get:s(function(){return Zit.MetadataMap},"get")});Object.defineProperty(Ks,"PromptRenderer",{enumerable:!0,get:s(function(){return Zit.PromptRenderer},"get")});async function Dnr(t,e,r,n,i,o,a=wxe.OutputMode.VSCode){let c="countTokens"in n?new Pnr.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,l=new Xit.PromptRenderer(r,t,e,c),u=await l.render(i,o),f=l.getUsedContext();return{...u,usedContext:f}}s(Dnr,"renderPrompt");Ks.contentType="application/vnd.codechat.prompt+json.1";function Nnr(t,e,r,n){return new Xit.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:wxe.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===wxe.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s(Nnr,"renderElementJSON")});var mp=Q(R7=>{"use strict";d();Object.defineProperty(R7,"__esModule",{value:!0});R7.dedent=void 0;function Xst(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(c,l){var u=l.match(/\n([\t ]+|(?!\s).)/g);return u?c.concat(u.map(function(f){var p,m;return(m=(p=f.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):c},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(c){return c.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(c,l){var u=a.match(/(?:^|\n)( *)$/),f=u?u[1]:"",p=c;typeof c=="string"&&c.includes(`
`)&&(p=String(c).split(`
`).map(function(m,h){return h===0?m:""+f+m}).join(`
`)),a+=p+n[l+1]}),a}s(Xst,"dedent");R7.dedent=Xst;R7.default=Xst});var sat=Q(zbe=>{"use strict";d();Object.defineProperty(zbe,"__esModule",{value:!0});zbe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var fat=Q(Kbe=>{"use strict";d();Object.defineProperty(Kbe,"__esModule",{value:!0});var aat=require("worker_threads"),Ror=require("v8"),kor=require("os"),cat=sat(),Vte="ready",lat="spawning",Por="busy",$te="off",uat=kor.cpus().length,dat=process.version.replace("v","").split("."),Bor=parseInt(dat[0]),Dor=parseInt(dat[1]),Ybe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=uat,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new aat.Worker(cat.workerFile,{eval:!0});e.status=lat,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=Vte,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=$te,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:l})=>l===$te).forEach(l=>this.resurrect(l)),this.taskQueue.length===0)return;let e;for(let l=0;l<this.workers.length;l++)if(this.workers[l].status===Vte){e=this.workers[l];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=Por;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:c}=r;try{let l="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}l+=`let ${m} = ${h}
`}let u=Ror.serialize(o.data),f=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${l}
        const dataParsed = JSON.parse('${f}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,c(h)}),n.once("error",m=>{e.status=$te,c(m),this.tick()}),n.postMessage(p)}catch(l){this.free(n),c(l)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=Vte,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:uat,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let c=new aat.Worker(cat.workerFile,{eval:!0});this.workers.push({status:lat,worker:c}),c.once("online",(l=>()=>{process.nextTick(()=>{this.workers[l].status=Vte,this.workers[l].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),c.once("error",(l=>u=>{this.workers[l].status=$te,this.workers[l].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(Bor>=12&&Dor>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};Kbe.default=new Ybe});var zte=Q(wR=>{"use strict";d();var Nor=wR&&wR.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wR,"__esModule",{value:!0});var k7=Nor(fat()),Lor=`job needs a function.
Try with:
> job(() => {...}, config)`,Mor=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function For(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(Lor));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(Mor));k7.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(For,"job");wR.job=For;wR.stop=k7.default.teardown.bind(k7.default);wR.start=k7.default.setup.bind(k7.default)});var Rat=Q(_R=>{"use strict";d();var _C=_R&&_R.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},sIe=_R&&_R.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},av,DT;Object.defineProperty(_R,"__esModule",{value:!0});var aIe=class{static{s(this,"AwaitLock")}constructor(){av.set(this,!1),DT.set(this,new Set)}get acquired(){return _C(this,av,"f")}acquireAsync({timeout:e}={}){if(!_C(this,av,"f"))return sIe(this,av,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{_C(this,DT,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),_C(this,DT,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{_C(this,DT,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return _C(this,av,"f")?!1:(sIe(this,av,!0,"f"),!0)}release(){if(!_C(this,av,"f"))throw new Error("Cannot release an unacquired lock");if(_C(this,DT,"f").size>0){let[e]=_C(this,DT,"f");_C(this,DT,"f").delete(e),e()}else sIe(this,av,!1,"f")}};_R.default=aIe;av=new WeakMap,DT=new WeakMap});var WTe=Q((mVi,qut)=>{d();var rQ=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ufr=typeof AbortController=="function",wne=ufr?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new Out}abort(){this.signal.dispatchEvent("abort")}},dfr=typeof AbortSignal=="function",ffr=typeof wne.AbortSignal=="function",Out=dfr?AbortSignal:ffr?wne.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},qTe=new Set,OTe=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;_ne(r)&&HTe(r,`${t} option`,`options.${e}`,s8)},"deprecatedOption"),QTe=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(_ne(r)){let{prototype:n}=s8,{get:i}=Object.getOwnPropertyDescriptor(n,t);HTe(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),pfr=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(_ne(r)){let{prototype:n}=s8,{get:i}=Object.getOwnPropertyDescriptor(n,t);HTe(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),Qut=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),_ne=s(t=>!qTe.has(t),"shouldWarn"),HTe=s((t,e,r,n)=>{qTe.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;Qut(i,"DeprecationWarning",t,n)},"warn"),MR=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),Uut=s(t=>MR(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?o8:null:null,"getUintArray"),o8=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},UTe=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=Uut(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},s8=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:l,dispose:u,disposeAfter:f,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:E,noDeleteOnFetchRejection:x,noDeleteOnStaleGet:b}=e,{length:_,maxAge:k,stale:P}=e instanceof t?{}:e;if(r!==0&&!MR(r))throw new TypeError("max option must be a nonnegative integer");let N=r?Uut(r):Array;if(!N)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=E,!this.fetchMethod&&E!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new N(r),this.prev=new N(r),this.head=0,this.tail=0,this.free=new UTe(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof f=="function"?(this.disposeAfter=f,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!x,this.maxSize!==0){if(!MR(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!P,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=MR(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||k||0,this.ttl){if(!MR(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let M="LRU_CACHE_UNBOUNDED";_ne(M)&&(qTe.add(M),Qut("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",M,t))}P&&OTe("stale","allowStale"),k&&OTe("maxAge","ttl"),_&&OTe("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new o8(this.max),this.starts=new o8(this.max),this.setItemTTL=(n,i,o=rQ.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?rQ.now():0};let e=0,r=s(()=>{let n=rQ.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new o8(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!MR(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!MR(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return QTe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let c=rQ.now()-this.starts[r];a.start=Math.floor(Date.now()-c)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=rQ.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,c),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),l=!1;else{let f=this.valList[u];r!==f&&(this.isBackgroundFetch(f)?f.__abortController.abort():o||(this.dispose(f,e,"set"),this.disposeAfter&&this.disposed.push([f,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new wne,c={signal:a.signal,options:n,context:i},l=s(m=>(a.signal.aborted||this.set(e,m,c.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),f=s(m=>m(this.fetchMethod(e,o,c)),"pcall"),p=new Promise(f).then(l,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,c.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:f},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),y;let E=this.backgroundFetch(e,g,h,p);return r&&E.__staleWhileFetching!==void 0?E.__staleWhileFetching:E.__returned=E}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],c=this.isBackgroundFetch(a);return this.isStale(o)?c?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):c?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return QTe("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return QTe("reset","clear"),this.clear}get length(){return pfr("length","size"),this.size}static get AbortController(){return wne}static get AbortSignal(){return Out}};qut.exports=s8});var VTe=Q((AVi,Hut)=>{"use strict";d();var nQ=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},GTe=class extends nQ{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},jTe=class extends nQ{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};Hut.exports={FetchBaseError:nQ,FetchError:GTe,AbortError:jTe}});var pv=Q((EVi,Gut)=>{"use strict";d();var{constants:{MAX_LENGTH:mfr}}=require("buffer"),{pipeline:Sne,PassThrough:hfr}=require("stream"),{promisify:gfr}=require("util"),{createGunzip:Afr,createInflate:yfr,createBrotliDecompress:Cfr,constants:{Z_SYNC_FLUSH:Wut}}=require("zlib"),Efr=oy()("helix-fetch:utils"),vfr=gfr(Sne),xfr=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),bfr=s((t,e,r,n)=>{if(!xfr(t,e))return r;let i=s(o=>{o&&(Efr(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return Sne(r,Afr({flush:Wut,finishFlush:Wut}),i);case"deflate":case"x-deflate":return Sne(r,yfr(),i);case"br":return Sne(r,Cfr(),i);default:return r}},"decodeStream"),Ifr=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),Rne=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?Tfr(t,e):wfr(t,e);default:return 0}},"calcSize"),Tfr=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:Rne(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),wfr=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=Rne(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=Rne(t[i],e)}),r},"calcObjectSize"),_fr=s(t=>Rne(t,new WeakSet),"sizeof"),Sfr=s(async t=>{let e=new hfr,r=0,n=[];return e.on("data",i=>{if(r+i.length>mfr)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await vfr(t,e),Buffer.concat(n,r)},"streamToBuffer");Gut.exports={decodeStream:bfr,isPlainObject:Ifr,sizeof:_fr,streamToBuffer:Sfr}});var Pne=Q((bVi,zut)=>{"use strict";d();var{PassThrough:jut,Readable:mv}=require("stream"),{types:{isAnyArrayBuffer:$ut}}=require("util"),{FetchError:Rfr,FetchBaseError:kfr}=VTe(),{streamToBuffer:Pfr}=pv(),Bfr=Buffer.alloc(0),ih=Symbol("Body internals"),Dfr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Vut=s(async t=>{if(t[ih].disturbed)throw new TypeError("Already read");if(t[ih].error)throw new TypeError(`Stream had error: ${t[ih].error.message}`);t[ih].disturbed=!0;let{stream:e}=t[ih];return e===null?Bfr:Pfr(e)},"consume"),kne=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=mv.from(e.toString()):e instanceof mv?r=e:Buffer.isBuffer(e)?r=mv.from(e):$ut(e)?r=mv.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=mv.from(e):r=mv.from(String(e)),this[ih]={stream:r,disturbed:!1,error:null},e instanceof mv&&r.on("error",n=>{let i=n instanceof kfr?n:new Rfr(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[ih].error=i})}get body(){return this[ih].stream}get bodyUsed(){return this[ih].disturbed}async buffer(){return Vut(this)}async arrayBuffer(){return Dfr(await this.buffer())}async text(){return(await Vut(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(kne.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var Nfr=s(t=>{if(t[ih].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[ih],r=e;if(e instanceof mv){r=new jut;let n=new jut;e.pipe(r),e.pipe(n),t[ih].stream=n}return r},"cloneStream"),Lfr=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||$ut(t)||t instanceof mv?null:"text/plain; charset=utf-8","guessContentType");zut.exports={Body:kne,cloneStream:Nfr,guessContentType:Lfr}});var a8=Q((wVi,Xut)=>{"use strict";d();var{validateHeaderName:Yut,validateHeaderValue:Kut}=require("http"),{isPlainObject:Mfr}=pv(),hv=Symbol("Headers internals"),iQ=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof Yut=="function")Yut(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),Jut=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof Kut=="function")Kut(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),Bne=class t{static{s(this,"Headers")}constructor(e={}){if(this[hv]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(Mfr(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[hv].map.set(iQ(e),Jut(r,e))}has(e){return this[hv].map.has(iQ(e))}get(e){let r=this[hv].map.get(iQ(e));return r===void 0?null:r}append(e,r){let n=iQ(e),i=Jut(r,e),o=this[hv].map.get(n);this[hv].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[hv].map.delete(iQ(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[hv].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[hv].map)}};Object.defineProperties(Bne.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));Xut.exports={Headers:Bne}});var $Te=Q((RVi,Zut)=>{"use strict";d();var{EventEmitter:Ffr}=require("events"),eA=Symbol("AbortSignal internals"),c8=class{static{s(this,"AbortSignal")}constructor(){this[eA]={eventEmitter:new Ffr,onabort:null,aborted:!1}}get aborted(){return this[eA].aborted}get onabort(){return this[eA].onabort}set onabort(e){this[eA].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[eA].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[eA].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[eA][n]=="function"&&this[n](r),this[eA].eventEmitter.emit(e,r)}fire(){this[eA].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(c8.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Nne=class extends c8{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[eA].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[eA].timerId)}};Object.defineProperties(Nne.prototype,{clear:{enumerable:!0}});var Dne=Symbol("AbortController internals"),Lne=class{static{s(this,"AbortController")}constructor(){this[Dne]={signal:new c8}}get signal(){return this[Dne].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Dne].signal.aborted||this[Dne].signal.fire()}};Object.defineProperties(Lne.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});Zut.exports={AbortController:Lne,AbortSignal:c8,TimeoutSignal:Nne}});var oQ=Q((BVi,rdt)=>{"use strict";d();var{randomBytes:Ofr}=require("crypto"),{Readable:Qfr}=require("stream"),YTe=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),Ufr=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),edt=s(t=>`--${t}--\r
\r
`,"getFooter"),tdt=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,YTe(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*qfr(t,e){for(let[r,n]of t)yield tdt(e,r,n),YTe(n)?yield*n.stream():yield n,yield`\r
`;yield edt(e)}s(qfr,"formDataIterator");var Hfr=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(tdt(e,n,i)),r+=YTe(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(edt(e)),r},"getFormDataLength"),zTe=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=Ofr(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=Hfr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return Qfr.from(qfr(this.fd,this.boundary))}};rdt.exports={isFormData:Ufr,FormDataSerializer:zTe}});var idt=Q((MVi,ndt)=>{"use strict";d();var{AbortSignal:LVi}=$Te(),{Body:Wfr,cloneStream:Gfr,guessContentType:jfr}=Pne(),{Headers:Vfr}=a8(),{isPlainObject:$fr}=pv(),{isFormData:zfr,FormDataSerializer:Yfr}=oQ(),Kfr=20,HT=Symbol("Request internals"),Mne=class t extends Wfr{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?Gfr(n):null),c=new Vfr(r.headers||n&&n.headers||{});if(zfr(a)&&!c.has("content-type")){let p=new Yfr(a);a=p.stream(),c.set("content-type",p.contentType()),!c.has("transfer-encoding")&&!c.has("content-length")&&c.set("content-length",p.length())}if(!c.has("content-type"))if($fr(a))a=JSON.stringify(a),c.set("content-type","application/json");else{let p=jfr(a);p&&c.set("content-type",p)}super(a);let l=n?n.signal:null;"signal"in r&&(l=r.signal);let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let f=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(f))throw new TypeError(`'${f}' is not a valid cache option`);this[HT]={init:{...r},method:o,redirect:u,cache:f,headers:c,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=Kfr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[HT].method}get url(){return this[HT].parsedURL.toString()}get headers(){return this[HT].headers}get redirect(){return this[HT].redirect}get cache(){return this[HT].cache}get signal(){return this[HT].signal}clone(){return new t(this)}get init(){return this[HT].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Mne.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});ndt.exports={Request:Mne}});var KTe=Q((QVi,odt)=>{"use strict";d();var{Body:Jfr,cloneStream:Xfr,guessContentType:Zfr}=Pne(),{Headers:e0r}=a8(),{isPlainObject:t0r}=pv(),{isFormData:r0r,FormDataSerializer:n0r}=oQ(),tA=Symbol("Response internals"),Fne=class t extends Jfr{static{s(this,"Response")}constructor(e=null,r={}){let n=new e0r(r.headers),i=e;if(r0r(i)&&!n.has("content-type")){let o=new n0r(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(t0r(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=Zfr(i);o&&n.set("content-type",o)}super(i),this[tA]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[tA].url||""}get status(){return this[tA].status}get statusText(){return this[tA].statusText}get ok(){return this[tA].status>=200&&this[tA].status<300}get redirected(){return this[tA].counter>0}get headers(){return this[tA].headers}get httpVersion(){return this[tA].httpVersion}get decoded(){return this[tA].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(Xfr(this),{...this[tA]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Fne.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});odt.exports={Response:Fne}});var adt=Q((WVi,sdt)=>{"use strict";d();var i0r=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),o0r=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),s0r=new Set([500,502,503,504]),a0r={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},c0r={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function FR(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(FR,"toNumberOrZero");function l0r(t){return t?s0r.has(t.status):!0}s(l0r,"isErrorResponse");function JTe(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(JTe,"parseCacheControl");function u0r(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(u0r,"formatCacheControl");sdt.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:c}={}){if(c){this._fromObject(c);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=JTe(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=JTe(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":u0r(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&o0r.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||i0r.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=JTe(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)a0r[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return FR(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return FR(this._rescc["s-maxage"])}if(this._rescc["max-age"])return FR(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+FR(this._rescc["stale-if-error"]),n=e+FR(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+FR(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+FR(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&l0r(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!c0r[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var ddt=Q((VVi,udt)=>{"use strict";d();var d0r=adt(),{Headers:f0r}=a8(),cdt=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),ldt=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),XTe=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new d0r(cdt(e),ldt(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(cdt(e))}responseHeaders(e){return new f0r(this.policy.responseHeaders(ldt(e)))}timeToLive(){return this.policy.timeToLive()}};udt.exports=XTe});var mdt=Q((YVi,pdt)=>{"use strict";d();var{Readable:p0r}=require("stream"),{Headers:fdt}=a8(),{Response:m0r}=KTe(),WT=Symbol("CacheableResponse internals"),h0r=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),ZTe=class t extends m0r{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new fdt(r.headers);this[WT]={headers:n,bufferedBody:e}}get headers(){return this[WT].headers}set headers(e){if(e instanceof fdt)this[WT].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return p0r.from(this[WT].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[WT].bufferedBody}async arrayBuffer(){return h0r(this[WT].bufferedBody)}async text(){return this[WT].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c}=this;return new t(this[WT].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c})}get[Symbol.toStringTag](){return this.constructor.name}},g0r=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l}=t;return new ZTe(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l})},"cacheableResponse");pdt.exports={cacheableResponse:g0r}});var One=Q((XVi,hdt)=>{"use strict";d();var ewe=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};hdt.exports={RequestAbortedError:ewe}});var Edt=Q((t$i,Cdt)=>{"use strict";d();var Adt=require("http"),ydt=require("https"),{Readable:A0r}=require("stream"),gv=oy()("helix-fetch:h1"),{RequestAbortedError:gdt}=One(),{decodeStream:y0r}=pv(),C0r=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new ydt.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new Adt.Agent(n),r.httpAgent):void 0},"getAgent"),E0r=s(t=>{t.h1={}},"setupContext"),v0r=s(async({h1:t})=>{t.httpAgent&&(gv("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(gv("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),x0r=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l}=t,u=e?y0r(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),b0r=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?ydt:Adt,i=C0r(t,e.protocol),o={...r,agent:i},{socket:a,body:c}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((l,u)=>u==="createConnection"&&!a.inUse?(f,p)=>{gv(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:l[u],"get")}):o.createConnection=(l,u)=>{gv(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((l,u)=>{gv(`${o.method} ${e.href}`);let f,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(gv(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new gdt),f&&f.abort()},"onAbortSignal");if(p){if(p.aborted){u(new gdt);return}p.addEventListener("abort",m)}f=n(e,o),f.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(gv(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),l(x0r(h,o.decode,u))}),f.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(gv(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),f.aborted||(gv(`${o.method} ${e.href} failed with: ${h.message}`),f.abort(),u(h))}),c instanceof A0r?c.pipe(f):(c&&f.write(c),f.end())})},"h1Request");Cdt.exports={request:b0r,setupContext:E0r,resetContext:v0r}});var Idt=Q((i$i,bdt)=>{"use strict";d();var{connect:I0r,constants:T0r}=require("http2"),{Readable:w0r}=require("stream"),Xs=oy()("helix-fetch:h2"),{RequestAbortedError:vdt}=One(),{decodeStream:_0r}=pv(),{NGHTTP2_CANCEL:sQ}=T0r,S0r=5*60*1e3,R0r=5e3,k0r=s(t=>{t.h2={sessionCache:{}}},"setupContext"),P0r=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),Xs(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),xdt=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?_0r(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),B0r=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:c,pushedStreamIdleTimeout:l=R0r}}}=t,u=i[":path"],f=`${e}${u}`;Xs(`received PUSH_PROMISE: ${f}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(f,i,s(()=>{n.close(sQ)},"rejectPush")),n.on("push",(p,m)=>{Xs(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(l,()=>{Xs(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(sQ)}),c&&c(f,i,xdt(p,n,r))}),n.on("aborted",()=>{Xs(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{Xs(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{Xs(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),D0r=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,c=`${i}${o}${a}`,{options:{h2:l={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:f=S0r,pushPromiseHandler:p,pushHandler:m}=l,h={...r},{method:g,headers:y,socket:E,body:x,decode:b}=h;return E&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let P=u[n];if(!P||P.closed||P.destroyed){let K=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),G={...l,rejectUnauthorized:K};E&&!E.inUse&&(G.createConnection=()=>(Xs(`reusing socket #${E.id} (${E.servername})`),E.inUse=!0,E)),P=I0r(n,{...G,settings:{enablePush:!!(p||m)}}),P.setMaxListeners(1e3),P.setTimeout(f,()=>{Xs(`closing session ${n} after ${f} ms of inactivity`),P.close()}),P.once("connect",()=>{Xs(`session ${n} established`),Xs(`caching session ${n}`),u[n]=P}),P.on("localSettings",le=>{Xs(`session ${n} localSettings: ${JSON.stringify(le)}`)}),P.on("remoteSettings",le=>{Xs(`session ${n} remoteSettings: ${JSON.stringify(le)}`)}),P.once("close",()=>{Xs(`session ${n} closed`),u[n]===P&&(Xs(`discarding cached session ${n}`),delete u[n])}),P.once("error",le=>{Xs(`session ${n} encountered error: ${le}`),u[n]===P&&(Xs(`discarding cached session ${n}`),delete u[n])}),P.on("frameError",(le,ie,V)=>{Xs(`session ${n} encountered frameError: type: ${le}, code: ${ie}, id: ${V}`)}),P.once("goaway",(le,ie,V)=>{Xs(`session ${n} received GOAWAY frame: errorCode: ${le}, lastStreamID: ${ie}, opaqueData: ${V?V.toString():void 0}`)}),P.on("stream",(le,ie,V)=>{B0r(t,n,b,le,ie,V)})}else E&&E.id!==P.socket.id&&!E.inUse&&(Xs(`discarding redundant socket used for ALPN: #${E.id} ${E.servername}`),E.destroy());Xs(`${g} ${e.host}${c}`);let N,{signal:M}=h,J=s(()=>{M.removeEventListener("abort",J),k(new vdt),N&&N.close(sQ)},"onAbortSignal");if(M){if(M.aborted){k(new vdt);return}M.addEventListener("abort",J)}let se=s(K=>{Xs(`session ${n} encountered error during ${h.method} ${e.href}: ${K}`),k(K)},"onSessionError");P.once("error",se),N=P.request({":method":g,":path":c,...y}),N.once("response",K=>{P.off("error",se),M&&M.removeEventListener("abort",J),_(xdt(K,N,h.decode,k))}),N.once("error",K=>{P.off("error",se),M&&M.removeEventListener("abort",J),N.rstCode!==sQ&&(Xs(`${h.method} ${e.href} failed with: ${K.message}`),N.close(sQ),k(K))}),N.once("frameError",(K,G,q)=>{P.off("error",se),Xs(`encountered frameError during ${h.method} ${e.href}: type: ${K}, code: ${G}, id: ${q}`)}),N.on("push",(K,G)=>{Xs(`received 'push' event: headers: ${JSON.stringify(K)}, flags: ${G}`)}),x instanceof w0r?x.pipe(N):(x&&N.write(x),N.end())})},"request");bdt.exports={request:D0r,setupContext:k0r,resetContext:P0r}});var wdt=Q((a$i,Tdt)=>{"use strict";d();var{EventEmitter:N0r}=require("events"),L0r=s(()=>{let t={},e=new N0r;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");Tdt.exports=L0r});var _dt=Q((u$i,M0r)=>{M0r.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var Bdt=Q((d$i,Pdt)=>{"use strict";d();var{Readable:F0r}=require("stream"),O0r=require("tls"),{types:{isAnyArrayBuffer:Q0r}}=require("util"),U0r=WTe(),twe=oy()("helix-fetch:core"),{RequestAbortedError:Qne}=One(),rwe=Edt(),Une=Idt(),q0r=wdt(),{isPlainObject:H0r}=pv(),{isFormData:W0r,FormDataSerializer:G0r}=oQ(),{version:j0r}=_dt(),nwe="h2",iwe="h2c",owe="http/1.0",OR="http/1.1",V0r=100,$0r=60*60*1e3,z0r=[nwe,OR,owe],Y0r=`helix-fetch/${j0r}`,K0r={method:"GET",compress:!0,decode:!0},Sdt=0,Rdt=q0r(),kdt=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new Qne;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new Qne);return}i.addEventListener("abort",a)}let c=+t.port||443,l=s(u=>{i&&i.removeEventListener("abort",a),u instanceof Qne||(twe(`connecting to ${t.hostname}:${c} failed with: ${u.message}`),n(u))},"onError");o=O0r.connect(c,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",l),Sdt+=1,o.id=Sdt,o.secureConnecting=!1,twe(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),"connectTLS"),J0r=s(async(t,e)=>{let r=await Rdt.acquire(t.origin);try{return r||(r=await kdt(t,e)),r}finally{Rdt.release(t.origin,r)}},"connect"),X0r=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=OR,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=iwe,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:c={}}}=t,l=!(o===!1||a.rejectUnauthorized===!1||c.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(u.ca=t.options.ca);let f=await J0r(e,u);return i=f.alpnProtocol,i||(i=OR),t.alpnCache.set(n,i),{protocol:i,socket:f}},"determineProtocol"),Z0r=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),epr=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},c=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=c,u.servername=a.host;let f=await kdt(e,u);return{protocol:f.alpnProtocol||OR,socket:f}}return{protocol:c.alpnProtocol||OR,socket:c}},"getProtocolAndSocketFromFactory"),tpr=s(async(t,e,r)=>{let n=new URL(e),i={...K0r,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=Z0r(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(W0r(i.body)){let u=new G0r(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":H0r(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):Q0r(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof F0r||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:c,socket:l=null}=t.socketFactory?await epr(t.socketFactory,n,i,t.alpnProtocols):await X0r(t,n,a);switch(twe(`${n.host} -> ${c}`),c){case nwe:try{return await Une.request(t,n,l?{...i,socket:l}:i)}catch(u){let{code:f,message:p}=u;throw f==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case iwe:return Une.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case owe:case OR:return rwe.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${c}`)}},"request"),rpr=s(async t=>(t.alpnCache.clear(),Promise.all([rwe.resetContext(t),Une.resetContext(t)])),"resetContext"),npr=s(t=>{let{options:{alpnProtocols:e=z0r,alpnCacheTTL:r=$0r,alpnCacheSize:n=V0r,userAgent:i=Y0r,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new U0r({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,rwe.setupContext(t),Une.setupContext(t)},"setupContext");Pdt.exports={request:tpr,setupContext:npr,resetContext:rpr,RequestAbortedError:Qne,ALPN_HTTP2:nwe,ALPN_HTTP2C:iwe,ALPN_HTTP1_1:OR,ALPN_HTTP1_0:owe}});var Ndt=Q((m$i,Ddt)=>{"use strict";d();var ipr=oy()("helix-fetch:core"),{request:opr,setupContext:spr,resetContext:apr,RequestAbortedError:cpr,ALPN_HTTP2:lpr,ALPN_HTTP2C:upr,ALPN_HTTP1_1:dpr,ALPN_HTTP1_0:fpr}=Bdt(),swe=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},spr(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:cpr,ALPN_HTTP2:lpr,ALPN_HTTP2C:upr,ALPN_HTTP1_1:dpr,ALPN_HTTP1_0:fpr}}async request(e,r){return opr(this,e,r)}setCA(e){this.options.ca=e}async reset(){return ipr("resetting context"),apr(this)}};Ddt.exports=new swe().api()});var Qdt=Q((A$i,Odt)=>{"use strict";d();var{EventEmitter:ppr}=require("events"),{Readable:aQ}=require("stream"),awe=oy()("helix-fetch"),mpr=WTe(),{Body:hpr}=Pne(),{Headers:dwe}=a8(),{Request:QR}=idt(),{Response:lwe}=KTe(),{FetchBaseError:gpr,FetchError:cQ,AbortError:qne}=VTe(),{AbortController:Apr,AbortSignal:ypr,TimeoutSignal:Cpr}=$Te(),Epr=ddt(),{cacheableResponse:vpr}=mdt(),{sizeof:xpr}=pv(),{isFormData:bpr}=oQ(),{context:Ipr,RequestAbortedError:Tpr}=Ndt(),Ldt=["GET","HEAD"],wpr=500,_pr=100*1024*1024,cwe="push",Mdt=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof QR&&typeof r>"u"?e:new QR(e,r),{method:o,body:a,signal:c,compress:l,decode:u,follow:f,redirect:p,init:{body:m}}=i,h;if(c&&c.aborted){let P=new qne("The operation was aborted.");throw i.init.body instanceof aQ&&i.init.body.destroy(P),P}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof aQ)&&!bpr(m)?m:a,compress:l,decode:u,follow:f,redirect:p,signal:c})}catch(P){throw m instanceof aQ&&m.destroy(P),P instanceof TypeError?P:P instanceof Tpr?new qne("The operation was aborted."):new cQ(P.message,"system",P)}let g=s(()=>{c.removeEventListener("abort",g);let P=new qne("The operation was aborted.");i.init.body instanceof aQ&&i.init.body.destroy(P),h.readable.emit("error",P)},"abortHandler");c&&c.addEventListener("abort",g);let{statusCode:y,statusText:E,httpVersion:x,headers:b,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:P}=b,N=P==null?null:new URL(P,i.url);switch(i.redirect){case"manual":break;case"error":throw c&&c.removeEventListener("abort",g),new cQ(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw c&&c.removeEventListener("abort",g),new cQ(`maximum redirect reached at: ${i.url}`,"max-redirect");let M={headers:new dwe(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof aQ)throw c&&c.removeEventListener("abort",g),new cQ("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(M.method="GET",M.body=void 0,M.headers.delete("content-length")),c&&c.removeEventListener("abort",g),Mdt(t,new QR(N,M))}default:}}return c&&(_.once("end",()=>{c.removeEventListener("abort",g)}),_.once("error",()=>{c.removeEventListener("abort",g)})),new lwe(_,{url:i.url,status:y,statusText:E,headers:b,httpVersion:x,decoded:k,counter:i.counter})},"fetch"),Fdt=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!Ldt.includes(e.method))return r;let n=new Epr(e,r,{shared:!1});if(n.storable()){let i=await vpr(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),Spr=s(async(t,e,r)=>{let n=new QR(e,r);if(t.options.maxCacheSize!==0&&Ldt.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:c}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){c.headers=new dwe(a.responseHeaders(c));let l=c.clone();return l.fromCache=!0,l}}let o=await Mdt(t,n);return n.cache!=="no-store"?Fdt(t,n,o):o},"cachingFetch"),Rpr=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),kpr=s(t=>new Cpr(t),"timeoutSignal"),uwe=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:_pr,i=wpr;n===0&&(n=1,i=1);let o=s(({response:c},l)=>xpr(c),"sizeCalculation");this.cache=new mpr({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new ppr,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(p=>p.startsWith(":")).forEach(p=>delete f[p]),this.pushPromiseHandler(c,f,u)},this.options.h2.pushHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(x=>x.startsWith(":")).forEach(x=>delete f[x]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:E}=u;this.pushHandler(c,f,new lwe(y,{url:c,status:p,statusText:m,headers:g,httpVersion:h,decoded:E}))}),this.context=Ipr(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:hpr,Headers:dwe,Request:QR,Response:lwe,AbortController:Apr,AbortSignal:ypr,FetchBaseError:gpr,FetchError:cQ,AbortError:qne,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:Rpr,timeoutSignal:kpr,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return Spr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(cwe,e)}offPush(e){return this.eventEmitter.off(cwe,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){awe(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new QR(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(awe(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){awe(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await Fdt(this,new QR(e,{headers:r}),n);this.eventEmitter.emit(cwe,e,i)}};Odt.exports=new uwe().api()});var qdt=Q((E$i,Udt)=>{"use strict";d();Udt.exports=Qdt()});var B0t=Q((pao,P0t)=>{d();P0t.exports=k0t;k0t.sync=Qgr;var S0t=require("fs");function Ogr(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(Ogr,"checkPathExt");function R0t(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:Ogr(e,r)}s(R0t,"checkStat");function k0t(t,e,r){S0t.stat(t,function(n,i){r(n,n?!1:R0t(i,t,e))})}s(k0t,"isexe");function Qgr(t,e){return R0t(S0t.statSync(t),t,e)}s(Qgr,"sync")});var F0t=Q((gao,M0t)=>{d();M0t.exports=N0t;N0t.sync=Ugr;var D0t=require("fs");function N0t(t,e,r){D0t.stat(t,function(n,i){r(n,n?!1:L0t(i,e))})}s(N0t,"isexe");function Ugr(t,e){return L0t(D0t.statSync(t),e)}s(Ugr,"sync");function L0t(t,e){return t.isFile()&&qgr(t,e)}s(L0t,"checkStat");function qgr(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),l=parseInt("010",8),u=parseInt("001",8),f=c|l,p=r&u||r&l&&i===a||r&c&&n===o||r&f&&o===0;return p}s(qgr,"checkMode")});var Q0t=Q((Eao,O0t)=>{d();var Cao=require("fs"),Vie;process.platform==="win32"||global.TESTING_WINDOWS?Vie=B0t():Vie=F0t();O0t.exports=c_e;c_e.sync=Hgr;function c_e(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){c_e(t,e||{},function(o,a){o?i(o):n(a)})})}Vie(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(c_e,"isexe");function Hgr(t,e){try{return Vie.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(Hgr,"sync")});var V0t=Q((bao,j0t)=>{d();var _8=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",U0t=require("path"),Wgr=_8?";":":",q0t=Q0t(),H0t=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),W0t=s((t,e)=>{let r=e.colon||Wgr,n=t.match(/\//)||_8&&t.match(/\\/)?[""]:[..._8?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=_8?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=_8?i.split(r):[""];return _8&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),G0t=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=W0t(t,e),a=[],c=s(u=>new Promise((f,p)=>{if(u===n.length)return e.all&&a.length?f(a):p(H0t(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=U0t.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;f(l(y,u,0))}),"step"),l=s((u,f,p)=>new Promise((m,h)=>{if(p===i.length)return m(c(f+1));let g=i[p];q0t(u+g,{pathExt:o},(y,E)=>{if(!y&&E)if(e.all)a.push(u+g);else return m(u+g);return m(l(u,f,p+1))})}),"subStep");return r?c(0).then(u=>r(null,u),r):c(0)},"which"),Ggr=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=W0t(t,e),o=[];for(let a=0;a<r.length;a++){let c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=U0t.join(l,t),f=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=f+n[p];try{if(q0t.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw H0t(t)},"whichSync");j0t.exports=G0t;G0t.sync=Ggr});var z0t=Q((wao,l_e)=>{"use strict";d();var $0t=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");l_e.exports=$0t;l_e.exports.default=$0t});var X0t=Q((Rao,J0t)=>{"use strict";d();var Y0t=require("path"),jgr=V0t(),Vgr=z0t();function K0t(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=jgr.sync(t.command,{path:r[Vgr({env:r})],pathExt:e?Y0t.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=Y0t.resolve(i?t.options.cwd:"",a)),a}s(K0t,"resolveCommandAttempt");function $gr(t){return K0t(t)||K0t(t,!0)}s($gr,"resolveCommand");J0t.exports=$gr});var Z0t=Q((Bao,d_e)=>{"use strict";d();var u_e=/([()\][%!^"`<>&|;, *?])/g;function zgr(t){return t=t.replace(u_e,"^$1"),t}s(zgr,"escapeCommand");function Ygr(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(u_e,"^$1"),e&&(t=t.replace(u_e,"^$1")),t}s(Ygr,"escapeArgument");d_e.exports.command=zgr;d_e.exports.argument=Ygr});var tpt=Q((Lao,ept)=>{"use strict";d();ept.exports=/^#!(.*)/});var npt=Q((Fao,rpt)=>{"use strict";d();var Kgr=tpt();rpt.exports=(t="")=>{let e=t.match(Kgr);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var opt=Q((Qao,ipt)=>{"use strict";d();var f_e=require("fs"),Jgr=npt();function Xgr(t){let r=Buffer.alloc(150),n;try{n=f_e.openSync(t,"r"),f_e.readSync(n,r,0,150,0),f_e.closeSync(n)}catch{}return Jgr(r.toString())}s(Xgr,"readShebang");ipt.exports=Xgr});var lpt=Q((Hao,cpt)=>{"use strict";d();var Zgr=require("path"),spt=X0t(),apt=Z0t(),eAr=opt(),tAr=process.platform==="win32",rAr=/\.(?:com|exe)$/i,nAr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function iAr(t){t.file=spt(t);let e=t.file&&eAr(t.file);return e?(t.args.unshift(t.file),t.command=e,spt(t)):t.file}s(iAr,"detectShebang");function oAr(t){if(!tAr)return t;let e=iAr(t),r=!rAr.test(e);if(t.options.forceShell||r){let n=nAr.test(e);t.command=Zgr.normalize(t.command),t.command=apt.command(t.command),t.args=t.args.map(o=>apt.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(oAr,"parseNonShell");function sAr(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:oAr(n)}s(sAr,"parse");cpt.exports=sAr});var fpt=Q((jao,dpt)=>{"use strict";d();var p_e=process.platform==="win32";function m_e(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(m_e,"notFoundError");function aAr(t,e){if(!p_e)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=upt(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(aAr,"hookChildProcess");function upt(t,e){return p_e&&t===1&&!e.file?m_e(e.original,"spawn"):null}s(upt,"verifyENOENT");function cAr(t,e){return p_e&&t===1&&!e.file?m_e(e.original,"spawnSync"):null}s(cAr,"verifyENOENTSync");dpt.exports={hookChildProcess:aAr,verifyENOENT:upt,verifyENOENTSync:cAr,notFoundError:m_e}});var hpt=Q((zao,S8)=>{"use strict";d();var ppt=require("child_process"),h_e=lpt(),g_e=fpt();function mpt(t,e,r){let n=h_e(t,e,r),i=ppt.spawn(n.command,n.args,n.options);return g_e.hookChildProcess(i,n),i}s(mpt,"spawn");function lAr(t,e,r){let n=h_e(t,e,r),i=ppt.spawnSync(n.command,n.args,n.options);return i.error=i.error||g_e.verifyENOENTSync(i.status,n),i}s(lAr,"spawnSync");S8.exports=mpt;S8.exports.spawn=mpt;S8.exports.sync=lAr;S8.exports._parse=h_e;S8.exports._enoent=g_e});var IAr={};ra(IAr,{getTokenizer:()=>zo,getTokenizerAsync:()=>BOe,main:()=>Dpt});module.exports=nht(IAr);d();d();i2e().install();d();d();var i6="github.copilot",o2e="github-enterprise";d();d();d();d();d();d();var Ps=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};d();d();var Mp=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return yq(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};d();var Fp="X-Copilot-RelatedPluginVersion-",o6=(H=>(H.Market="X-MSEdge-Market",H.CorpNet="X-FD-Corpnet",H.Build="X-VSCode-Build",H.ApplicationVersion="X-VSCode-AppVersion",H.TargetPopulation="X-VSCode-TargetPopulation",H.ClientId="X-MSEdge-ClientId",H.ExtensionName="X-VSCode-ExtensionName",H.ExtensionVersion="X-VSCode-ExtensionVersion",H.ExtensionRelease="X-VSCode-ExtensionRelease",H.Language="X-VSCode-Language",H.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",H.CopilotEngine="X-Copilot-Engine",H.CopilotOverrideEngine="X-Copilot-OverrideEngine",H.CopilotRepository="X-Copilot-Repository",H.CopilotFileType="X-Copilot-FileType",H.CopilotUserKind="X-Copilot-UserKind",H.CopilotDogfood="X-Copilot-Dogfood",H.CopilotCustomModel="X-Copilot-CustomModel",H.CopilotOrgs="X-Copilot-Orgs",H.CopilotCustomModelNames="X-Copilot-CustomModelNames",H.CopilotTrackingId="X-Copilot-CopilotTrackingId",H.CopilotClientVersion="X-Copilot-ClientVersion",H.CopilotRelatedPluginVersionCppTools=Fp+"msvscodecpptools",H.CopilotRelatedPluginVersionCMakeTools=Fp+"msvscodecmaketools",H.CopilotRelatedPluginVersionMakefileTools=Fp+"msvscodemakefiletools",H.CopilotRelatedPluginVersionCSharpDevKit=Fp+"msdotnettoolscsdevkit",H.CopilotRelatedPluginVersionPython=Fp+"mspythonpython",H.CopilotRelatedPluginVersionPylance=Fp+"mspythonvscodepylance",H.CopilotRelatedPluginVersionJavaPack=Fp+"vscjavavscodejavapack",H.CopilotRelatedPluginVersionTypescript=Fp+"vscodetypescriptlanguagefeatures",H.CopilotRelatedPluginVersionTypescriptNext=Fp+"msvscodevscodetypescriptnext",H.CopilotRelatedPluginVersionCSharp=Fp+"msdotnettoolscsharp",H))(o6||{});var Hht={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},t_=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=Hht[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};d();var ai=class{static{s(this,"Fetcher")}getImplementation(){return this}},s6=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function Du(t){return!t||typeof t!="object"?!1:t instanceof s6||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Du,"isAbortError");var kk=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},UA=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},Wht=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function a6(t,e=!0){return t instanceof Error?e&&"cause"in t&&a6(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof kk||t instanceof UA||t?.message?.startsWith("net::")||Wht.has(t.code??""):!1}s(a6,"isNetworkError");var qx=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new kk(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new kk(`Response body truncated: actualLength=${o}`,"Truncated"):new kk(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};function r_(t,e,r,n,i,o,a,c,l){let u={...c,Authorization:`Bearer ${r}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(gs).sessionId,"VScode-MachineId":t.get(gs).machineId,...Rh(t),"X-GitHub-Api-Version":qA};n&&(u["OpenAI-Intent"]=n);let f={method:"POST",headers:u,json:o,timeout:l},p=t.get(ai);if(a){let h=new AbortController;a.onCancellationRequested(()=>{Dt(t,"networking.cancelRequest",dn.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),f.signal=h.signal}return p.fetch(e,f).catch(h=>{if(Ght(h))return Dt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,f));throw h})}s(r_,"postRequest");function Ght(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(Ght,"isInterruptedNetworkError");d();d();var Kl=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ia(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,c=r.enterprise_list,l=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=c?.toString(),this.sku=l,this.optedIn=n,this.ftFlag=i)})}};var nH=Ne(Gx()),iH=Ne(require("os"));var jht=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function Vht(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(jht),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(Vht,"buildExceptionDetail");function Cae(t,e){let r=t.get(rn),n=r.getEditorInfo(),i=t.get(Kl),o={"#editor":n.devName??n.name,"#editor_version":HA({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":HA(r.getEditorPluginInfo()),"#session_id":t.get(gs).sessionId,"#machine_id":t.get(gs).machineId,"#architecture":iH.arch(),"#os_platform":iH.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(Cae,"buildContext");function mRe(t,e){let r=t.get(lo),n=t.get(rn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:Cae(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let c=0,l=e;for(;l instanceof Error&&c<10;){let f=Vht(l);o.exception_detail.unshift(f),a.unshift([l,f]),c+=1,l=l.cause}let u=[];for(let[f,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${f.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,nH.SHA256)(nH.enc.Utf16.parse(u.join(`
`))).toString()),o}s(mRe,"buildPayload");d();var l6=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};d();d();var gRe=Ne(Gx());var Fr=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},n_=class extends Fr{constructor(r,n=2*60*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},sH=class extends Fr{static{s(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}};var WA=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Fr}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};d();var Op=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:yRe(r,n),verboseLogging:zht(r,n),testMode:e,simulation:$ht(n)})}};function kh(t){return t.get(Op).flags.testMode}s(kh,"isRunningInTest");function Pk(t){return kh(t)}s(Pk,"shouldFailForDebugPurposes");function u6(t){return t.get(Op).flags.debug}s(u6,"isDebugEnabled");function ARe(t){return t.get(Op).flags.verboseLogging}s(ARe,"isVerboseLoggingEnabled");function yRe(t,e){return t.includes("--debug")||Eae(e,"DEBUG")}s(yRe,"determineDebugFlag");function $ht(t){return Eae(t,"SIMULATION")}s($ht,"determineSimulationFlag");function aH(t){return t.get(Op).flags.simulation}s(aH,"isRunningInSimulation");function zht(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||Eae(e,"VERBOSE")||yRe(t,e)}s(zht,"determineVerboseLoggingEnabled");function Eae(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(Eae,"determineEnvFlagEnabled");d();var Xa=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};d();var vRe=require("os"),xRe=Ne(require("path"));function d6(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(d6,"redactPaths");var Yht=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),Kht=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function xae(t){if(Yht.has(t))return t;for(let e of Kht)if(e.test(t))return t;return d6(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(xae,"redactMessage");function cH(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(cH,"escapeForRegExp");var Jht=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+cH((0,vRe.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function vae(t){return t.replace(Jht,"~")}s(vae,"redactHomeDir");var bRe="[\\\\/]?([^:)]*)(?=:\\d)",CRe=new RegExp(cH(xRe.sep),"g"),ERe=new RegExp(cH(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+bRe,"gi");function bae(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let c of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(c+`
`)){a=o.slice(c.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let c of a)if(ERe.test(c))i.stack+=`
${d6(c.replace(ERe,(l,u)=>"./"+u.replace(CRe,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(c))i.stack+=`
${d6(c)}`;else{let l=!1;for(let{prefix:u,path:f}of n){let p=new RegExp(cH(f.replace(/[\\/]$/,""))+bRe,"gi");if(p.test(c)){i.stack+=`
${d6(c.replace(p,(m,h)=>u+h.replace(CRe,"/")))}`,l=!0;break}}if(l)continue;r?i.stack+=`
${vae(c)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=vae(o));return t.cause instanceof Error&&(i.cause=bae(t.cause,e,r,n)),i}s(bae,"cloneError");function IRe(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(IRe,"errorMessageWithoutPath");function TRe(t,e){return bae(t,s(function(n){return vae(IRe(n))},"prepareMessage"),!0,e)}s(TRe,"prepareErrorForRestrictedTelemetry");function wRe(t,e,r=!1){return bae(t,s(function(i){if(r)return xae(IRe(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=d6(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(wRe,"redactError");d();d();var Nu={};ra(Nu,{HasPropertyKey:()=>lH,IsArray:()=>Za,IsAsyncIterator:()=>Iae,IsBigInt:()=>f6,IsBoolean:()=>h1,IsDate:()=>i_,IsFunction:()=>Tae,IsIterator:()=>wae,IsNull:()=>_ae,IsNumber:()=>p0,IsObject:()=>Wo,IsRegExp:()=>p6,IsString:()=>as,IsSymbol:()=>Sae,IsUint8Array:()=>g1,IsUndefined:()=>ec});d();function lH(t,e){return e in t}s(lH,"HasPropertyKey");function Iae(t){return Wo(t)&&!Za(t)&&!g1(t)&&Symbol.asyncIterator in t}s(Iae,"IsAsyncIterator");function Za(t){return Array.isArray(t)}s(Za,"IsArray");function f6(t){return typeof t=="bigint"}s(f6,"IsBigInt");function h1(t){return typeof t=="boolean"}s(h1,"IsBoolean");function i_(t){return t instanceof globalThis.Date}s(i_,"IsDate");function Tae(t){return typeof t=="function"}s(Tae,"IsFunction");function wae(t){return Wo(t)&&!Za(t)&&!g1(t)&&Symbol.iterator in t}s(wae,"IsIterator");function _ae(t){return t===null}s(_ae,"IsNull");function p0(t){return typeof t=="number"}s(p0,"IsNumber");function Wo(t){return typeof t=="object"&&t!==null}s(Wo,"IsObject");function p6(t){return t instanceof globalThis.RegExp}s(p6,"IsRegExp");function as(t){return typeof t=="string"}s(as,"IsString");function Sae(t){return typeof t=="symbol"}s(Sae,"IsSymbol");function g1(t){return t instanceof globalThis.Uint8Array}s(g1,"IsUint8Array");function ec(t){return t===void 0}s(ec,"IsUndefined");function Xht(t){return t.map(e=>uH(e))}s(Xht,"ArrayType");function Zht(t){return new Date(t.getTime())}s(Zht,"DateType");function egt(t){return new Uint8Array(t)}s(egt,"Uint8ArrayType");function tgt(t){return new RegExp(t.source,t.flags)}s(tgt,"RegExpType");function rgt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=uH(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=uH(t[r]);return e}s(rgt,"ObjectType");function uH(t){return Za(t)?Xht(t):i_(t)?Zht(t):g1(t)?egt(t):p6(t)?tgt(t):Wo(t)?rgt(t):t}s(uH,"Visit");function Bs(t){return uH(t)}s(Bs,"Clone");function Bk(t,e){return e===void 0?Bs(t):Bs({...e,...t})}s(Bk,"CloneType");d();d();d();function dH(t){return Ei(t)&&globalThis.Symbol.asyncIterator in t}s(dH,"IsAsyncIterator");function fH(t){return Ei(t)&&globalThis.Symbol.iterator in t}s(fH,"IsIterator");function Rae(t){return Ei(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(Rae,"IsStandardObject");function pH(t){return t instanceof globalThis.Promise}s(pH,"IsPromise");function Ad(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(Ad,"IsDate");function _Re(t){return t instanceof globalThis.Map}s(_Re,"IsMap");function SRe(t){return t instanceof globalThis.Set}s(SRe,"IsSet");function Qp(t){return globalThis.ArrayBuffer.isView(t)}s(Qp,"IsTypedArray");function Dk(t){return t instanceof globalThis.Uint8Array}s(Dk,"IsUint8Array");function xn(t,e){return e in t}s(xn,"HasPropertyKey");function Ei(t){return t!==null&&typeof t=="object"}s(Ei,"IsObject");function bn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(bn,"IsArray");function Ds(t){return t===void 0}s(Ds,"IsUndefined");function A1(t){return t===null}s(A1,"IsNull");function GA(t){return typeof t=="boolean"}s(GA,"IsBoolean");function Gr(t){return typeof t=="number"}s(Gr,"IsNumber");function mH(t){return globalThis.Number.isInteger(t)}s(mH,"IsInteger");function Jl(t){return typeof t=="bigint"}s(Jl,"IsBigInt");function ro(t){return typeof t=="string"}s(ro,"IsString");function jx(t){return typeof t=="function"}s(jx,"IsFunction");function y1(t){return typeof t=="symbol"}s(y1,"IsSymbol");function m0(t){return Jl(t)||GA(t)||A1(t)||Gr(t)||ro(t)||y1(t)||Ds(t)}s(m0,"IsValueType");var As;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,c){return t.ExactOptionalPropertyTypes?c in a:a[c]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let c=Ei(a);return t.AllowArrayObject?c:c&&!bn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?Gr(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let c=Ds(a);return t.AllowNullVoid?c||a===null:c}s(o,"IsVoidLike"),t.IsVoidLike=o})(As||(As={}));d();function ngt(t){return globalThis.Object.freeze(t).map(e=>m6(e))}s(ngt,"ImmutableArray");function igt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=m6(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=m6(t[r]);return globalThis.Object.freeze(e)}s(igt,"ImmutableObject");function m6(t){return Za(t)?ngt(t):i_(t)?t:g1(t)?t:p6(t)?t:Wo(t)?igt(t):t}s(m6,"Immutable");function it(t,e){let r=e!==void 0?{...e,...t}:t;switch(As.InstanceMode){case"freeze":return m6(r);case"clone":return Bs(r);default:return r}}s(it,"CreateType");d();var In=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};d();d();d();var oa=Symbol.for("TypeBox.Transform"),Ph=Symbol.for("TypeBox.Readonly"),Xl=Symbol.for("TypeBox.Optional"),Up=Symbol.for("TypeBox.Hint"),et=Symbol.for("TypeBox.Kind");function Nk(t){return Wo(t)&&t[Ph]==="Readonly"}s(Nk,"IsReadonly");function af(t){return Wo(t)&&t[Xl]==="Optional"}s(af,"IsOptional");function kae(t){return $i(t,"Any")}s(kae,"IsAny");function Pae(t){return $i(t,"Argument")}s(Pae,"IsArgument");function Bh(t){return $i(t,"Array")}s(Bh,"IsArray");function o_(t){return $i(t,"AsyncIterator")}s(o_,"IsAsyncIterator");function s_(t){return $i(t,"BigInt")}s(s_,"IsBigInt");function C1(t){return $i(t,"Boolean")}s(C1,"IsBoolean");function Dh(t){return $i(t,"Computed")}s(Dh,"IsComputed");function Nh(t){return $i(t,"Constructor")}s(Nh,"IsConstructor");function ogt(t){return $i(t,"Date")}s(ogt,"IsDate");function Lh(t){return $i(t,"Function")}s(Lh,"IsFunction");function Mh(t){return $i(t,"Integer")}s(Mh,"IsInteger");function xa(t){return $i(t,"Intersect")}s(xa,"IsIntersect");function a_(t){return $i(t,"Iterator")}s(a_,"IsIterator");function $i(t,e){return Wo(t)&&et in t&&t[et]===e}s($i,"IsKindOf");function hH(t){return h1(t)||p0(t)||as(t)}s(hH,"IsLiteralValue");function h0(t){return $i(t,"Literal")}s(h0,"IsLiteral");function g0(t){return $i(t,"MappedKey")}s(g0,"IsMappedKey");function Ns(t){return $i(t,"MappedResult")}s(Ns,"IsMappedResult");function Vx(t){return $i(t,"Never")}s(Vx,"IsNever");function sgt(t){return $i(t,"Not")}s(sgt,"IsNot");function h6(t){return $i(t,"Null")}s(h6,"IsNull");function Fh(t){return $i(t,"Number")}s(Fh,"IsNumber");function tc(t){return $i(t,"Object")}s(tc,"IsObject");function c_(t){return $i(t,"Promise")}s(c_,"IsPromise");function l_(t){return $i(t,"Record")}s(l_,"IsRecord");function Da(t){return $i(t,"Ref")}s(Da,"IsRef");function Bae(t){return $i(t,"RegExp")}s(Bae,"IsRegExp");function E1(t){return $i(t,"String")}s(E1,"IsString");function g6(t){return $i(t,"Symbol")}s(g6,"IsSymbol");function A0(t){return $i(t,"TemplateLiteral")}s(A0,"IsTemplateLiteral");function agt(t){return $i(t,"This")}s(agt,"IsThis");function Io(t){return Wo(t)&&oa in t}s(Io,"IsTransform");function y0(t){return $i(t,"Tuple")}s(y0,"IsTuple");function v1(t){return $i(t,"Undefined")}s(v1,"IsUndefined");function no(t){return $i(t,"Union")}s(no,"IsUnion");function cgt(t){return $i(t,"Uint8Array")}s(cgt,"IsUint8Array");function lgt(t){return $i(t,"Unknown")}s(lgt,"IsUnknown");function ugt(t){return $i(t,"Unsafe")}s(ugt,"IsUnsafe");function dgt(t){return $i(t,"Void")}s(dgt,"IsVoid");function $x(t){return Wo(t)&&et in t&&as(t[et])}s($x,"IsKind");function sa(t){return kae(t)||Pae(t)||Bh(t)||C1(t)||s_(t)||o_(t)||Dh(t)||Nh(t)||ogt(t)||Lh(t)||Mh(t)||xa(t)||a_(t)||h0(t)||g0(t)||Ns(t)||Vx(t)||sgt(t)||h6(t)||Fh(t)||tc(t)||c_(t)||l_(t)||Da(t)||Bae(t)||E1(t)||g6(t)||A0(t)||agt(t)||y0(t)||v1(t)||no(t)||cgt(t)||lgt(t)||ugt(t)||dgt(t)||$x(t)}s(sa,"IsSchema");var Be={};ra(Be,{IsAny:()=>BRe,IsArgument:()=>DRe,IsArray:()=>NRe,IsAsyncIterator:()=>LRe,IsBigInt:()=>MRe,IsBoolean:()=>FRe,IsComputed:()=>ORe,IsConstructor:()=>QRe,IsDate:()=>URe,IsFunction:()=>qRe,IsImport:()=>Agt,IsInteger:()=>HRe,IsIntersect:()=>WRe,IsIterator:()=>GRe,IsKind:()=>g5e,IsKindOf:()=>ki,IsLiteral:()=>y6,IsLiteralBoolean:()=>ygt,IsLiteralNumber:()=>VRe,IsLiteralString:()=>jRe,IsLiteralValue:()=>$Re,IsMappedKey:()=>zRe,IsMappedResult:()=>YRe,IsNever:()=>KRe,IsNot:()=>JRe,IsNull:()=>XRe,IsNumber:()=>ZRe,IsObject:()=>e5e,IsOptional:()=>ggt,IsPromise:()=>t5e,IsProperties:()=>gH,IsReadonly:()=>hgt,IsRecord:()=>r5e,IsRecursive:()=>Cgt,IsRef:()=>n5e,IsRegExp:()=>i5e,IsSchema:()=>Ls,IsString:()=>o5e,IsSymbol:()=>s5e,IsTemplateLiteral:()=>a5e,IsThis:()=>c5e,IsTransform:()=>l5e,IsTuple:()=>u5e,IsUint8Array:()=>f5e,IsUndefined:()=>d5e,IsUnion:()=>Mae,IsUnionLiteral:()=>Egt,IsUnknown:()=>p5e,IsUnsafe:()=>m5e,IsVoid:()=>h5e,TypeGuardUnknownTypeError:()=>Dae});d();var Dae=class extends In{static{s(this,"TypeGuardUnknownTypeError")}},fgt=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function RRe(t){try{return new RegExp(t),!0}catch{return!1}}s(RRe,"IsPattern");function Nae(t){if(!as(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(Nae,"IsControlCharacterFree");function kRe(t){return Lae(t)||Ls(t)}s(kRe,"IsAdditionalProperties");function A6(t){return ec(t)||f6(t)}s(A6,"IsOptionalBigInt");function cs(t){return ec(t)||p0(t)}s(cs,"IsOptionalNumber");function Lae(t){return ec(t)||h1(t)}s(Lae,"IsOptionalBoolean");function Go(t){return ec(t)||as(t)}s(Go,"IsOptionalString");function pgt(t){return ec(t)||as(t)&&Nae(t)&&RRe(t)}s(pgt,"IsOptionalPattern");function mgt(t){return ec(t)||as(t)&&Nae(t)}s(mgt,"IsOptionalFormat");function PRe(t){return ec(t)||Ls(t)}s(PRe,"IsOptionalSchema");function hgt(t){return Wo(t)&&t[Ph]==="Readonly"}s(hgt,"IsReadonly");function ggt(t){return Wo(t)&&t[Xl]==="Optional"}s(ggt,"IsOptional");function BRe(t){return ki(t,"Any")&&Go(t.$id)}s(BRe,"IsAny");function DRe(t){return ki(t,"Argument")&&p0(t.index)}s(DRe,"IsArgument");function NRe(t){return ki(t,"Array")&&t.type==="array"&&Go(t.$id)&&Ls(t.items)&&cs(t.minItems)&&cs(t.maxItems)&&Lae(t.uniqueItems)&&PRe(t.contains)&&cs(t.minContains)&&cs(t.maxContains)}s(NRe,"IsArray");function LRe(t){return ki(t,"AsyncIterator")&&t.type==="AsyncIterator"&&Go(t.$id)&&Ls(t.items)}s(LRe,"IsAsyncIterator");function MRe(t){return ki(t,"BigInt")&&t.type==="bigint"&&Go(t.$id)&&A6(t.exclusiveMaximum)&&A6(t.exclusiveMinimum)&&A6(t.maximum)&&A6(t.minimum)&&A6(t.multipleOf)}s(MRe,"IsBigInt");function FRe(t){return ki(t,"Boolean")&&t.type==="boolean"&&Go(t.$id)}s(FRe,"IsBoolean");function ORe(t){return ki(t,"Computed")&&as(t.target)&&Za(t.parameters)&&t.parameters.every(e=>Ls(e))}s(ORe,"IsComputed");function QRe(t){return ki(t,"Constructor")&&t.type==="Constructor"&&Go(t.$id)&&Za(t.parameters)&&t.parameters.every(e=>Ls(e))&&Ls(t.returns)}s(QRe,"IsConstructor");function URe(t){return ki(t,"Date")&&t.type==="Date"&&Go(t.$id)&&cs(t.exclusiveMaximumTimestamp)&&cs(t.exclusiveMinimumTimestamp)&&cs(t.maximumTimestamp)&&cs(t.minimumTimestamp)&&cs(t.multipleOfTimestamp)}s(URe,"IsDate");function qRe(t){return ki(t,"Function")&&t.type==="Function"&&Go(t.$id)&&Za(t.parameters)&&t.parameters.every(e=>Ls(e))&&Ls(t.returns)}s(qRe,"IsFunction");function Agt(t){return ki(t,"Import")&&lH(t,"$defs")&&Wo(t.$defs)&&gH(t.$defs)&&lH(t,"$ref")&&as(t.$ref)&&t.$ref in t.$defs}s(Agt,"IsImport");function HRe(t){return ki(t,"Integer")&&t.type==="integer"&&Go(t.$id)&&cs(t.exclusiveMaximum)&&cs(t.exclusiveMinimum)&&cs(t.maximum)&&cs(t.minimum)&&cs(t.multipleOf)}s(HRe,"IsInteger");function gH(t){return Wo(t)&&Object.entries(t).every(([e,r])=>Nae(e)&&Ls(r))}s(gH,"IsProperties");function WRe(t){return ki(t,"Intersect")&&!(as(t.type)&&t.type!=="object")&&Za(t.allOf)&&t.allOf.every(e=>Ls(e)&&!l5e(e))&&Go(t.type)&&(Lae(t.unevaluatedProperties)||PRe(t.unevaluatedProperties))&&Go(t.$id)}s(WRe,"IsIntersect");function GRe(t){return ki(t,"Iterator")&&t.type==="Iterator"&&Go(t.$id)&&Ls(t.items)}s(GRe,"IsIterator");function ki(t,e){return Wo(t)&&et in t&&t[et]===e}s(ki,"IsKindOf");function jRe(t){return y6(t)&&as(t.const)}s(jRe,"IsLiteralString");function VRe(t){return y6(t)&&p0(t.const)}s(VRe,"IsLiteralNumber");function ygt(t){return y6(t)&&h1(t.const)}s(ygt,"IsLiteralBoolean");function y6(t){return ki(t,"Literal")&&Go(t.$id)&&$Re(t.const)}s(y6,"IsLiteral");function $Re(t){return h1(t)||p0(t)||as(t)}s($Re,"IsLiteralValue");function zRe(t){return ki(t,"MappedKey")&&Za(t.keys)&&t.keys.every(e=>p0(e)||as(e))}s(zRe,"IsMappedKey");function YRe(t){return ki(t,"MappedResult")&&gH(t.properties)}s(YRe,"IsMappedResult");function KRe(t){return ki(t,"Never")&&Wo(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(KRe,"IsNever");function JRe(t){return ki(t,"Not")&&Ls(t.not)}s(JRe,"IsNot");function XRe(t){return ki(t,"Null")&&t.type==="null"&&Go(t.$id)}s(XRe,"IsNull");function ZRe(t){return ki(t,"Number")&&t.type==="number"&&Go(t.$id)&&cs(t.exclusiveMaximum)&&cs(t.exclusiveMinimum)&&cs(t.maximum)&&cs(t.minimum)&&cs(t.multipleOf)}s(ZRe,"IsNumber");function e5e(t){return ki(t,"Object")&&t.type==="object"&&Go(t.$id)&&gH(t.properties)&&kRe(t.additionalProperties)&&cs(t.minProperties)&&cs(t.maxProperties)}s(e5e,"IsObject");function t5e(t){return ki(t,"Promise")&&t.type==="Promise"&&Go(t.$id)&&Ls(t.item)}s(t5e,"IsPromise");function r5e(t){return ki(t,"Record")&&t.type==="object"&&Go(t.$id)&&kRe(t.additionalProperties)&&Wo(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&RRe(r[0])&&Wo(e.patternProperties)&&Ls(e.patternProperties[r[0]])})(t)}s(r5e,"IsRecord");function Cgt(t){return Wo(t)&&Up in t&&t[Up]==="Recursive"}s(Cgt,"IsRecursive");function n5e(t){return ki(t,"Ref")&&Go(t.$id)&&as(t.$ref)}s(n5e,"IsRef");function i5e(t){return ki(t,"RegExp")&&Go(t.$id)&&as(t.source)&&as(t.flags)&&cs(t.maxLength)&&cs(t.minLength)}s(i5e,"IsRegExp");function o5e(t){return ki(t,"String")&&t.type==="string"&&Go(t.$id)&&cs(t.minLength)&&cs(t.maxLength)&&pgt(t.pattern)&&mgt(t.format)}s(o5e,"IsString");function s5e(t){return ki(t,"Symbol")&&t.type==="symbol"&&Go(t.$id)}s(s5e,"IsSymbol");function a5e(t){return ki(t,"TemplateLiteral")&&t.type==="string"&&as(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(a5e,"IsTemplateLiteral");function c5e(t){return ki(t,"This")&&Go(t.$id)&&as(t.$ref)}s(c5e,"IsThis");function l5e(t){return Wo(t)&&oa in t}s(l5e,"IsTransform");function u5e(t){return ki(t,"Tuple")&&t.type==="array"&&Go(t.$id)&&p0(t.minItems)&&p0(t.maxItems)&&t.minItems===t.maxItems&&(ec(t.items)&&ec(t.additionalItems)&&t.minItems===0||Za(t.items)&&t.items.every(e=>Ls(e)))}s(u5e,"IsTuple");function d5e(t){return ki(t,"Undefined")&&t.type==="undefined"&&Go(t.$id)}s(d5e,"IsUndefined");function Egt(t){return Mae(t)&&t.anyOf.every(e=>jRe(e)||VRe(e))}s(Egt,"IsUnionLiteral");function Mae(t){return ki(t,"Union")&&Go(t.$id)&&Wo(t)&&Za(t.anyOf)&&t.anyOf.every(e=>Ls(e))}s(Mae,"IsUnion");function f5e(t){return ki(t,"Uint8Array")&&t.type==="Uint8Array"&&Go(t.$id)&&cs(t.minByteLength)&&cs(t.maxByteLength)}s(f5e,"IsUint8Array");function p5e(t){return ki(t,"Unknown")&&Go(t.$id)}s(p5e,"IsUnknown");function m5e(t){return ki(t,"Unsafe")}s(m5e,"IsUnsafe");function h5e(t){return ki(t,"Void")&&t.type==="void"&&Go(t.$id)}s(h5e,"IsVoid");function g5e(t){return Wo(t)&&et in t&&as(t[et])&&!fgt.includes(t[et])}s(g5e,"IsKind");function Ls(t){return Wo(t)&&(BRe(t)||DRe(t)||NRe(t)||FRe(t)||MRe(t)||LRe(t)||ORe(t)||QRe(t)||URe(t)||qRe(t)||HRe(t)||WRe(t)||GRe(t)||y6(t)||zRe(t)||YRe(t)||KRe(t)||JRe(t)||XRe(t)||ZRe(t)||e5e(t)||t5e(t)||r5e(t)||n5e(t)||i5e(t)||o5e(t)||s5e(t)||a5e(t)||c5e(t)||u5e(t)||d5e(t)||Mae(t)||f5e(t)||p5e(t)||m5e(t)||h5e(t)||g5e(t))}s(Ls,"IsSchema");d();var Fae="(true|false)",C6="(0|[1-9][0-9]*)",Oae="(.*)",vgt="(?!.*)",oEr=`^${Fae}$`,jA=`^${C6}$`,VA=`^${Oae}$`,A5e=`^${vgt}$`;d();var Oh={};ra(Oh,{Clear:()=>bgt,Delete:()=>Igt,Entries:()=>xgt,Get:()=>_gt,Has:()=>Tgt,Set:()=>wgt});d();var Lk=new Map;function xgt(){return new Map(Lk)}s(xgt,"Entries");function bgt(){return Lk.clear()}s(bgt,"Clear");function Igt(t){return Lk.delete(t)}s(Igt,"Delete");function Tgt(t){return Lk.has(t)}s(Tgt,"Has");function wgt(t,e){Lk.set(t,e)}s(wgt,"Set");function _gt(t){return Lk.get(t)}s(_gt,"Get");var yd={};ra(yd,{Clear:()=>Rgt,Delete:()=>kgt,Entries:()=>Sgt,Get:()=>Dgt,Has:()=>Pgt,Set:()=>Bgt});d();var Mk=new Map;function Sgt(){return new Map(Mk)}s(Sgt,"Entries");function Rgt(){return Mk.clear()}s(Rgt,"Clear");function kgt(t){return Mk.delete(t)}s(kgt,"Delete");function Pgt(t){return Mk.has(t)}s(Pgt,"Has");function Bgt(t,e){Mk.set(t,e)}s(Bgt,"Set");function Dgt(t){return Mk.get(t)}s(Dgt,"Get");d();function y5e(t,e){return t.includes(e)}s(y5e,"SetIncludes");function C5e(t){return[...new Set(t)]}s(C5e,"SetDistinct");function Ngt(t,e){return t.filter(r=>e.includes(r))}s(Ngt,"SetIntersect");function Lgt(t,e){return t.reduce((r,n)=>Ngt(r,n),e)}s(Lgt,"SetIntersectManyResolve");function E5e(t){return t.length===1?t[0]:t.length>1?Lgt(t.slice(1),t[0]):[]}s(E5e,"SetIntersectMany");function v5e(t){let e=[];for(let r of t)e.push(...r);return e}s(v5e,"SetUnionMany");d();function zx(t){return it({[et]:"Any"},t)}s(zx,"Any");d();function Fk(t,e){return it({[et]:"Array",type:"array",items:t},e)}s(Fk,"Array");d();function x5e(t){return it({[et]:"Argument",index:t})}s(x5e,"Argument");d();function Ok(t,e){return it({[et]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(Ok,"AsyncIterator");d();d();function ys(t,e,r){return it({[et]:"Computed",target:t,parameters:e},r)}s(ys,"Computed");d();d();function Mgt(t,e){let{[e]:r,...n}=t;return n}s(Mgt,"DiscardKey");function ba(t,e){return e.reduce((r,n)=>Mgt(r,n),t)}s(ba,"Discard");d();function pi(t){return it({[et]:"Never",not:{}},t)}s(pi,"Never");d();d();function uo(t){return it({[et]:"MappedResult",properties:t})}s(uo,"MappedResult");d();d();function Qk(t,e,r){return it({[et]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(Qk,"Constructor");d();function $A(t,e,r){return it({[et]:"Function",type:"Function",parameters:t,returns:e},r)}s($A,"Function");d();d();d();d();function E6(t,e){return it({[et]:"Union",anyOf:t},e)}s(E6,"UnionCreate");function Fgt(t){return t.some(e=>af(e))}s(Fgt,"IsUnionOptional");function b5e(t){return t.map(e=>af(e)?Ogt(e):e)}s(b5e,"RemoveOptionalFromRest");function Ogt(t){return ba(t,[Xl])}s(Ogt,"RemoveOptionalFromType");function Qgt(t,e){return Fgt(t)?Lu(E6(b5e(t),e)):E6(b5e(t),e)}s(Qgt,"ResolveUnion");function zA(t,e){return t.length===1?it(t[0],e):t.length===0?pi(e):Qgt(t,e)}s(zA,"UnionEvaluated");d();function To(t,e){return t.length===0?pi(e):t.length===1?it(t[0],e):E6(t,e)}s(To,"Union");d();d();d();var AH=class extends In{static{s(this,"TemplateLiteralParserError")}};function Ugt(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(Ugt,"Unescape");function Qae(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(Qae,"IsNonEscaped");function b1(t,e){return Qae(t,e,"(")}s(b1,"IsOpenParen");function v6(t,e){return Qae(t,e,")")}s(v6,"IsCloseParen");function I5e(t,e){return Qae(t,e,"|")}s(I5e,"IsSeparator");function qgt(t){if(!(b1(t,0)&&v6(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(b1(t,r)&&(e+=1),v6(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(qgt,"IsGroup");function Hgt(t){return t.slice(1,t.length-1)}s(Hgt,"InGroup");function Wgt(t){let e=0;for(let r=0;r<t.length;r++)if(b1(t,r)&&(e+=1),v6(t,r)&&(e-=1),I5e(t,r)&&e===0)return!0;return!1}s(Wgt,"IsPrecedenceOr");function Ggt(t){for(let e=0;e<t.length;e++)if(b1(t,e))return!0;return!1}s(Ggt,"IsPrecedenceAnd");function jgt(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(b1(t,o)&&(e+=1),v6(t,o)&&(e-=1),I5e(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(Uk(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(Uk(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(jgt,"Or");function Vgt(t){function e(i,o){if(!b1(i,o))throw new AH("TemplateLiteralParser: Index must point to open parens");let a=0;for(let c=o;c<i.length;c++)if(b1(i,c)&&(a+=1),v6(i,c)&&(a-=1),a===0)return[o,c];throw new AH("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(b1(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(b1(t,i)){let[o,a]=e(t,i),c=t.slice(o,a+1);n.push(Uk(c)),i=a}else{let[o,a]=r(t,i),c=t.slice(o,a);c.length>0&&n.push(Uk(c)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(Vgt,"And");function Uk(t){return qgt(t)?Uk(Hgt(t)):Wgt(t)?jgt(t):Ggt(t)?Vgt(t):{type:"const",const:Ugt(t)}}s(Uk,"TemplateLiteralParse");function qk(t){return Uk(t.slice(1,t.length-1))}s(qk,"TemplateLiteralParseExact");var Uae=class extends In{static{s(this,"TemplateLiteralFiniteError")}};function $gt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s($gt,"IsNumberExpression");function zgt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(zgt,"IsBooleanExpression");function Ygt(t){return t.type==="const"&&t.const===".*"}s(Ygt,"IsStringExpression");function u_(t){return $gt(t)||Ygt(t)?!1:zgt(t)?!0:t.type==="and"?t.expr.every(e=>u_(e)):t.type==="or"?t.expr.every(e=>u_(e)):t.type==="const"?!0:(()=>{throw new Uae("Unknown expression type")})()}s(u_,"IsTemplateLiteralExpressionFinite");function yH(t){let e=qk(t.pattern);return u_(e)}s(yH,"IsTemplateLiteralFinite");d();var qae=class extends In{static{s(this,"TemplateLiteralGenerateError")}};function*T5e(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of T5e(t.slice(1)))yield`${e}${r}`}s(T5e,"GenerateReduce");function*Kgt(t){return yield*T5e(t.expr.map(e=>[...x6(e)]))}s(Kgt,"GenerateAnd");function*Jgt(t){for(let e of t.expr)yield*x6(e)}s(Jgt,"GenerateOr");function*Xgt(t){return yield t.const}s(Xgt,"GenerateConst");function*x6(t){return t.type==="and"?yield*Kgt(t):t.type==="or"?yield*Jgt(t):t.type==="const"?yield*Xgt(t):(()=>{throw new qae("Unknown expression")})()}s(x6,"TemplateLiteralExpressionGenerate");function Hk(t){let e=qk(t.pattern);return u_(e)?[...x6(e)]:[]}s(Hk,"TemplateLiteralGenerate");d();d();function zi(t,e){return it({[et]:"Literal",const:t,type:typeof t},e)}s(zi,"Literal");d();function CH(t){return it({[et]:"Boolean",type:"boolean"},t)}s(CH,"Boolean");d();function Wk(t){return it({[et]:"BigInt",type:"bigint"},t)}s(Wk,"BigInt");d();function qp(t){return it({[et]:"Number",type:"number"},t)}s(qp,"Number");d();function Cd(t){return it({[et]:"String",type:"string"},t)}s(Cd,"String");function*Zgt(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield CH():e==="number"?yield qp():e==="bigint"?yield Wk():e==="string"?yield Cd():yield(()=>{let r=e.split("|").map(n=>zi(n.trim()));return r.length===0?pi():r.length===1?r[0]:zA(r)})()}s(Zgt,"FromUnion");function*eAt(t){if(t[1]!=="{"){let e=zi("$"),r=Hae(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=Zgt(t.slice(2,e)),n=Hae(t.slice(e+1));return yield*[...r,...n]}yield zi(t)}s(eAt,"FromTerminal");function*Hae(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=zi(t.slice(0,e)),n=eAt(t.slice(e));return yield*[r,...n]}yield zi(t)}s(Hae,"FromSyntax");function w5e(t){return[...Hae(t)]}s(w5e,"TemplateLiteralSyntax");d();var Wae=class extends In{static{s(this,"TemplateLiteralPatternError")}};function tAt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(tAt,"Escape");function _5e(t,e){return A0(t)?t.pattern.slice(1,t.pattern.length-1):no(t)?`(${t.anyOf.map(r=>_5e(r,e)).join("|")})`:Fh(t)?`${e}${C6}`:Mh(t)?`${e}${C6}`:s_(t)?`${e}${C6}`:E1(t)?`${e}${Oae}`:h0(t)?`${e}${tAt(t.const.toString())}`:C1(t)?`${e}${Fae}`:(()=>{throw new Wae(`Unexpected Kind '${t[et]}'`)})()}s(_5e,"Visit");function Gae(t){return`^${t.map(e=>_5e(e,"")).join("")}$`}s(Gae,"TemplateLiteralPattern");d();function d_(t){let r=Hk(t).map(n=>zi(n));return zA(r)}s(d_,"TemplateLiteralToUnion");d();function EH(t,e){let r=as(t)?Gae(w5e(t)):Gae(t);return it({[et]:"TemplateLiteral",type:"string",pattern:r},e)}s(EH,"TemplateLiteral");function rAt(t){return Hk(t).map(r=>r.toString())}s(rAt,"FromTemplateLiteral");function nAt(t){let e=[];for(let r of t)e.push(...cf(r));return e}s(nAt,"FromUnion");function iAt(t){return[t.toString()]}s(iAt,"FromLiteral");function cf(t){return[...new Set(A0(t)?rAt(t):no(t)?nAt(t.anyOf):h0(t)?iAt(t.const):Fh(t)?["[number]"]:Mh(t)?["[number]"]:[])]}s(cf,"IndexPropertyKeys");d();function oAt(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=Yx(t,cf(e[i]),r);return n}s(oAt,"FromProperties");function sAt(t,e,r){return oAt(t,e.properties,r)}s(sAt,"FromMappedResult");function S5e(t,e,r){let n=sAt(t,e,r);return uo(n)}s(S5e,"IndexFromMappedResult");function k5e(t,e){return t.map(r=>P5e(r,e))}s(k5e,"FromRest");function aAt(t){return t.filter(e=>!Vx(e))}s(aAt,"FromIntersectRest");function cAt(t,e){return vH(aAt(k5e(t,e)))}s(cAt,"FromIntersect");function lAt(t){return t.some(e=>Vx(e))?[]:t}s(lAt,"FromUnionRest");function uAt(t,e){return zA(lAt(k5e(t,e)))}s(uAt,"FromUnion");function dAt(t,e){return e in t?t[e]:e==="[number]"?zA(t):pi()}s(dAt,"FromTuple");function fAt(t,e){return e==="[number]"?t:pi()}s(fAt,"FromArray");function pAt(t,e){return e in t?t[e]:pi()}s(pAt,"FromProperty");function P5e(t,e){return xa(t)?cAt(t.allOf,e):no(t)?uAt(t.anyOf,e):y0(t)?dAt(t.items??[],e):Bh(t)?fAt(t.items,e):tc(t)?pAt(t.properties,e):pi()}s(P5e,"IndexFromPropertyKey");function b6(t,e){return e.map(r=>P5e(t,r))}s(b6,"IndexFromPropertyKeys");function R5e(t,e){return zA(b6(t,e))}s(R5e,"FromSchema");function Yx(t,e,r){if(Da(t)||Da(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!sa(t)||!sa(e))throw new In(n);return ys("Index",[t,e])}return Ns(e)?S5e(t,e,r):g0(e)?B5e(t,e,r):it(sa(e)?R5e(t,cf(e)):R5e(t,e),r)}s(Yx,"Index");function mAt(t,e,r){return{[e]:Yx(t,[e],Bs(r))}}s(mAt,"MappedIndexPropertyKey");function hAt(t,e,r){return e.reduce((n,i)=>({...n,...mAt(t,i,r)}),{})}s(hAt,"MappedIndexPropertyKeys");function gAt(t,e,r){return hAt(t,e.keys,r)}s(gAt,"MappedIndexProperties");function B5e(t,e,r){let n=gAt(t,e,r);return uo(n)}s(B5e,"IndexFromMappedKey");d();function Gk(t,e){return it({[et]:"Iterator",type:"Iterator",items:t},e)}s(Gk,"Iterator");d();function AAt(t){let e=[];for(let r in t)af(t[r])||e.push(r);return e}s(AAt,"RequiredKeys");function yAt(t,e){let r=AAt(t),n=r.length>0?{[et]:"Object",type:"object",properties:t,required:r}:{[et]:"Object",type:"object",properties:t};return it(n,e)}s(yAt,"_Object");var wo=yAt;d();function xH(t,e){return it({[et]:"Promise",type:"Promise",item:t},e)}s(xH,"Promise");d();d();function CAt(t){return it(ba(t,[Ph]))}s(CAt,"RemoveReadonly");function EAt(t){return it({...t,[Ph]:"Readonly"})}s(EAt,"AddReadonly");function vAt(t,e){return e===!1?CAt(t):EAt(t)}s(vAt,"ReadonlyWithFlag");function lf(t,e){let r=e??!0;return Ns(t)?D5e(t,r):vAt(t,r)}s(lf,"Readonly");function xAt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=lf(t[n],e);return r}s(xAt,"FromProperties");function bAt(t,e){return xAt(t.properties,e)}s(bAt,"FromMappedResult");function D5e(t,e){let r=bAt(t,e);return uo(r)}s(D5e,"ReadonlyFromMappedResult");d();function Hp(t,e){return it(t.length>0?{[et]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[et]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(Hp,"Tuple");function N5e(t,e){return t in e?Wp(t,e[t]):uo(e)}s(N5e,"FromMappedResult");function IAt(t){return{[t]:zi(t)}}s(IAt,"MappedKeyToKnownMappedResultProperties");function TAt(t){let e={};for(let r of t)e[r]=zi(r);return e}s(TAt,"MappedKeyToUnknownMappedResultProperties");function wAt(t,e){return y5e(e,t)?IAt(t):TAt(e)}s(wAt,"MappedKeyToMappedResultProperties");function _At(t,e){let r=wAt(t,e);return N5e(t,r)}s(_At,"FromMappedKey");function I6(t,e){return e.map(r=>Wp(t,r))}s(I6,"FromRest");function SAt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=Wp(t,e[n]);return r}s(SAt,"FromProperties");function Wp(t,e){let r={...e};return af(e)?Lu(Wp(t,ba(e,[Xl]))):Nk(e)?lf(Wp(t,ba(e,[Ph]))):Ns(e)?N5e(t,e.properties):g0(e)?_At(t,e.keys):Nh(e)?Qk(I6(t,e.parameters),Wp(t,e.returns),r):Lh(e)?$A(I6(t,e.parameters),Wp(t,e.returns),r):o_(e)?Ok(Wp(t,e.items),r):a_(e)?Gk(Wp(t,e.items),r):xa(e)?Mu(I6(t,e.allOf),r):no(e)?To(I6(t,e.anyOf),r):y0(e)?Hp(I6(t,e.items??[]),r):tc(e)?wo(SAt(t,e.properties),r):Bh(e)?Fk(Wp(t,e.items),r):c_(e)?xH(Wp(t,e.item),r):e}s(Wp,"FromSchemaType");function RAt(t,e){let r={};for(let n of t)r[n]=Wp(n,e);return r}s(RAt,"MappedFunctionReturnType");function L5e(t,e,r){let n=sa(t)?cf(t):t,i=e({[et]:"MappedKey",keys:n}),o=RAt(n,i);return wo(o,r)}s(L5e,"Mapped");d();function kAt(t){return it(ba(t,[Xl]))}s(kAt,"RemoveOptional");function PAt(t){return it({...t,[Xl]:"Optional"})}s(PAt,"AddOptional");function BAt(t,e){return e===!1?kAt(t):PAt(t)}s(BAt,"OptionalWithFlag");function Lu(t,e){let r=e??!0;return Ns(t)?M5e(t,r):BAt(t,r)}s(Lu,"Optional");function DAt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Lu(t[n],e);return r}s(DAt,"FromProperties");function NAt(t,e){return DAt(t.properties,e)}s(NAt,"FromMappedResult");function M5e(t,e){let r=NAt(t,e);return uo(r)}s(M5e,"OptionalFromMappedResult");d();function T6(t,e={}){let r=t.every(i=>tc(i)),n=sa(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return it(e.unevaluatedProperties===!1||sa(e.unevaluatedProperties)||r?{...n,[et]:"Intersect",type:"object",allOf:t}:{...n,[et]:"Intersect",allOf:t},e)}s(T6,"IntersectCreate");function LAt(t){return t.every(e=>af(e))}s(LAt,"IsIntersectOptional");function MAt(t){return ba(t,[Xl])}s(MAt,"RemoveOptionalFromType");function F5e(t){return t.map(e=>af(e)?MAt(e):e)}s(F5e,"RemoveOptionalFromRest");function FAt(t,e){return LAt(t)?Lu(T6(F5e(t),e)):T6(F5e(t),e)}s(FAt,"ResolveIntersect");function vH(t,e={}){if(t.length===1)return it(t[0],e);if(t.length===0)return pi(e);if(t.some(r=>Io(r)))throw new Error("Cannot intersect transform types");return FAt(t,e)}s(vH,"IntersectEvaluated");d();function Mu(t,e){if(t.length===1)return it(t[0],e);if(t.length===0)return pi(e);if(t.some(r=>Io(r)))throw new Error("Cannot intersect transform types");return T6(t,e)}s(Mu,"Intersect");d();function Gp(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new In("Ref: $ref must be a string");return it({[et]:"Ref",$ref:e},r)}s(Gp,"Ref");function OAt(t,e){return ys("Awaited",[ys(t,e)])}s(OAt,"FromComputed");function QAt(t){return ys("Awaited",[Gp(t)])}s(QAt,"FromRef");function UAt(t){return Mu(O5e(t))}s(UAt,"FromIntersect");function qAt(t){return To(O5e(t))}s(qAt,"FromUnion");function HAt(t){return jk(t)}s(HAt,"FromPromise");function O5e(t){return t.map(e=>jk(e))}s(O5e,"FromRest");function jk(t,e){return it(Dh(t)?OAt(t.target,t.parameters):xa(t)?UAt(t.allOf):no(t)?qAt(t.anyOf):c_(t)?HAt(t.item):Da(t)?QAt(t.$ref):t,e)}s(jk,"Awaited");d();d();d();d();function Q5e(t){let e=[];for(let r of t)e.push(uf(r));return e}s(Q5e,"FromRest");function WAt(t){let e=Q5e(t);return v5e(e)}s(WAt,"FromIntersect");function GAt(t){let e=Q5e(t);return E5e(e)}s(GAt,"FromUnion");function jAt(t){return t.map((e,r)=>r.toString())}s(jAt,"FromTuple");function VAt(t){return["[number]"]}s(VAt,"FromArray");function $At(t){return globalThis.Object.getOwnPropertyNames(t)}s($At,"FromProperties");function zAt(t){return jae?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(zAt,"FromPatternProperties");function uf(t){return xa(t)?WAt(t.allOf):no(t)?GAt(t.anyOf):y0(t)?jAt(t.items??[]):Bh(t)?VAt(t.items):tc(t)?$At(t.properties):l_(t)?zAt(t.patternProperties):[]}s(uf,"KeyOfPropertyKeys");var jae=!1;function I1(t){jae=!0;let e=uf(t);return jae=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(I1,"KeyOfPattern");function YAt(t,e){return ys("KeyOf",[ys(t,e)])}s(YAt,"FromComputed");function KAt(t){return ys("KeyOf",[Gp(t)])}s(KAt,"FromRef");function JAt(t,e){let r=uf(t),n=XAt(r),i=zA(n);return it(i,e)}s(JAt,"KeyOfFromType");function XAt(t){return t.map(e=>e==="[number]"?qp():zi(e))}s(XAt,"KeyOfPropertyKeysToRest");function Vk(t,e){return Dh(t)?YAt(t.target,t.parameters):Da(t)?KAt(t.$ref):Ns(t)?U5e(t,e):JAt(t,e)}s(Vk,"KeyOf");function ZAt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Vk(t[n],Bs(e));return r}s(ZAt,"FromProperties");function eyt(t,e){return ZAt(t.properties,e)}s(eyt,"FromMappedResult");function U5e(t,e){let r=eyt(t,e);return uo(r)}s(U5e,"KeyOfFromMappedResult");d();function bH(t){let e=uf(t),r=b6(t,e);return e.map((n,i)=>[e[i],r[i]])}s(bH,"KeyOfPropertyEntries");function tyt(t){let e=[];for(let r of t)e.push(...uf(r));return C5e(e)}s(tyt,"CompositeKeys");function ryt(t){return t.filter(e=>!Vx(e))}s(ryt,"FilterNever");function nyt(t,e){let r=[];for(let n of t)r.push(...b6(n,[e]));return ryt(r)}s(nyt,"CompositeProperty");function iyt(t,e){let r={};for(let n of e)r[n]=vH(nyt(t,n));return r}s(iyt,"CompositeProperties");function q5e(t,e){let r=tyt(t),n=iyt(t,r);return wo(n,e)}s(q5e,"Composite");d();d();function IH(t){return it({[et]:"Date",type:"Date"},t)}s(IH,"Date");d();function TH(t){return it({[et]:"Null",type:"null"},t)}s(TH,"Null");d();function wH(t){return it({[et]:"Symbol",type:"symbol"},t)}s(wH,"Symbol");d();function _H(t){return it({[et]:"Undefined",type:"undefined"},t)}s(_H,"Undefined");d();function SH(t){return it({[et]:"Uint8Array",type:"Uint8Array"},t)}s(SH,"Uint8Array");d();function Qh(t){return it({[et]:"Unknown"},t)}s(Qh,"Unknown");function oyt(t){return t.map(e=>Vae(e,!1))}s(oyt,"FromArray");function syt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=lf(Vae(t[r],!1));return e}s(syt,"FromProperties");function RH(t,e){return e===!0?t:lf(t)}s(RH,"ConditionalReadonly");function Vae(t,e){return Iae(t)?RH(zx(),e):wae(t)?RH(zx(),e):Za(t)?lf(Hp(oyt(t))):g1(t)?SH():i_(t)?IH():Wo(t)?RH(wo(syt(t)),e):Tae(t)?RH($A([],Qh()),e):ec(t)?_H():_ae(t)?TH():Sae(t)?wH():f6(t)?Wk():p0(t)?zi(t):h1(t)?zi(t):as(t)?zi(t):wo({})}s(Vae,"FromValue");function H5e(t,e){return it(Vae(t,!0),e)}s(H5e,"Const");d();function W5e(t,e){return Nh(t)?Hp(t.parameters,e):pi(e)}s(W5e,"ConstructorParameters");d();function G5e(t,e){if(ec(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>zi(o));return To(i,{...e,[Up]:"Enum"})}s(G5e,"Enum");d();d();d();var zae=class extends In{static{s(this,"ExtendsResolverError")}},ot;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(ot||(ot={}));function jp(t){return t===ot.False?t:ot.True}s(jp,"IntoBooleanResult");function $k(t){throw new zae(t)}s($k,"Throw");function xc(t){return Be.IsNever(t)||Be.IsIntersect(t)||Be.IsUnion(t)||Be.IsUnknown(t)||Be.IsAny(t)}s(xc,"IsStructuralRight");function bc(t,e){return Be.IsNever(e)?J5e(t,e):Be.IsIntersect(e)?kH(t,e):Be.IsUnion(e)?Xae(t,e):Be.IsUnknown(e)?tke(t,e):Be.IsAny(e)?Jae(t,e):$k("StructuralRight")}s(bc,"StructuralRight");function Jae(t,e){return ot.True}s(Jae,"FromAnyRight");function ayt(t,e){return Be.IsIntersect(e)?kH(t,e):Be.IsUnion(e)&&e.anyOf.some(r=>Be.IsAny(r)||Be.IsUnknown(r))?ot.True:Be.IsUnion(e)?ot.Union:Be.IsUnknown(e)||Be.IsAny(e)?ot.True:ot.Union}s(ayt,"FromAny");function cyt(t,e){return Be.IsUnknown(t)?ot.False:Be.IsAny(t)?ot.Union:Be.IsNever(t)?ot.True:ot.False}s(cyt,"FromArrayRight");function lyt(t,e){return Be.IsObject(e)&&PH(e)?ot.True:xc(e)?bc(t,e):Be.IsArray(e)?jp(jo(t.items,e.items)):ot.False}s(lyt,"FromArray");function uyt(t,e){return xc(e)?bc(t,e):Be.IsAsyncIterator(e)?jp(jo(t.items,e.items)):ot.False}s(uyt,"FromAsyncIterator");function dyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsBigInt(e)?ot.True:ot.False}s(dyt,"FromBigInt");function Y5e(t,e){return Be.IsLiteralBoolean(t)||Be.IsBoolean(t)?ot.True:ot.False}s(Y5e,"FromBooleanRight");function fyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsBoolean(e)?ot.True:ot.False}s(fyt,"FromBoolean");function pyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsConstructor(e)?t.parameters.length>e.parameters.length?ot.False:t.parameters.every((r,n)=>jp(jo(e.parameters[n],r))===ot.True)?jp(jo(t.returns,e.returns)):ot.False:ot.False}s(pyt,"FromConstructor");function myt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsDate(e)?ot.True:ot.False}s(myt,"FromDate");function hyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsFunction(e)?t.parameters.length>e.parameters.length?ot.False:t.parameters.every((r,n)=>jp(jo(e.parameters[n],r))===ot.True)?jp(jo(t.returns,e.returns)):ot.False:ot.False}s(hyt,"FromFunction");function K5e(t,e){return Be.IsLiteral(t)&&Nu.IsNumber(t.const)||Be.IsNumber(t)||Be.IsInteger(t)?ot.True:ot.False}s(K5e,"FromIntegerRight");function gyt(t,e){return Be.IsInteger(e)||Be.IsNumber(e)?ot.True:xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):ot.False}s(gyt,"FromInteger");function kH(t,e){return e.allOf.every(r=>jo(t,r)===ot.True)?ot.True:ot.False}s(kH,"FromIntersectRight");function Ayt(t,e){return t.allOf.some(r=>jo(r,e)===ot.True)?ot.True:ot.False}s(Ayt,"FromIntersect");function yyt(t,e){return xc(e)?bc(t,e):Be.IsIterator(e)?jp(jo(t.items,e.items)):ot.False}s(yyt,"FromIterator");function Cyt(t,e){return Be.IsLiteral(e)&&e.const===t.const?ot.True:xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsString(e)?eke(t,e):Be.IsNumber(e)?X5e(t,e):Be.IsInteger(e)?K5e(t,e):Be.IsBoolean(e)?Y5e(t,e):ot.False}s(Cyt,"FromLiteral");function J5e(t,e){return ot.False}s(J5e,"FromNeverRight");function Eyt(t,e){return ot.True}s(Eyt,"FromNever");function j5e(t){let[e,r]=[t,0];for(;Be.IsNot(e);)e=e.not,r+=1;return r%2===0?e:Qh()}s(j5e,"UnwrapTNot");function vyt(t,e){return Be.IsNot(t)?jo(j5e(t),e):Be.IsNot(e)?jo(t,j5e(e)):$k("Invalid fallthrough for Not")}s(vyt,"FromNot");function xyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsNull(e)?ot.True:ot.False}s(xyt,"FromNull");function X5e(t,e){return Be.IsLiteralNumber(t)||Be.IsNumber(t)||Be.IsInteger(t)?ot.True:ot.False}s(X5e,"FromNumberRight");function byt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsInteger(e)||Be.IsNumber(e)?ot.True:ot.False}s(byt,"FromNumber");function df(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(df,"IsObjectPropertyCount");function V5e(t){return PH(t)}s(V5e,"IsObjectStringLike");function $5e(t){return df(t,0)||df(t,1)&&"description"in t.properties&&Be.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Be.IsString(t.properties.description.anyOf[0])&&Be.IsUndefined(t.properties.description.anyOf[1])||Be.IsString(t.properties.description.anyOf[1])&&Be.IsUndefined(t.properties.description.anyOf[0]))}s($5e,"IsObjectSymbolLike");function $ae(t){return df(t,0)}s($ae,"IsObjectNumberLike");function z5e(t){return df(t,0)}s(z5e,"IsObjectBooleanLike");function Iyt(t){return df(t,0)}s(Iyt,"IsObjectBigIntLike");function Tyt(t){return df(t,0)}s(Tyt,"IsObjectDateLike");function wyt(t){return PH(t)}s(wyt,"IsObjectUint8ArrayLike");function _yt(t){let e=qp();return df(t,0)||df(t,1)&&"length"in t.properties&&jp(jo(t.properties.length,e))===ot.True}s(_yt,"IsObjectFunctionLike");function Syt(t){return df(t,0)}s(Syt,"IsObjectConstructorLike");function PH(t){let e=qp();return df(t,0)||df(t,1)&&"length"in t.properties&&jp(jo(t.properties.length,e))===ot.True}s(PH,"IsObjectArrayLike");function Ryt(t){let e=$A([zx()],zx());return df(t,0)||df(t,1)&&"then"in t.properties&&jp(jo(t.properties.then,e))===ot.True}s(Ryt,"IsObjectPromiseLike");function Z5e(t,e){return jo(t,e)===ot.False||Be.IsOptional(t)&&!Be.IsOptional(e)?ot.False:ot.True}s(Z5e,"Property");function Fu(t,e){return Be.IsUnknown(t)?ot.False:Be.IsAny(t)?ot.Union:Be.IsNever(t)||Be.IsLiteralString(t)&&V5e(e)||Be.IsLiteralNumber(t)&&$ae(e)||Be.IsLiteralBoolean(t)&&z5e(e)||Be.IsSymbol(t)&&$5e(e)||Be.IsBigInt(t)&&Iyt(e)||Be.IsString(t)&&V5e(e)||Be.IsSymbol(t)&&$5e(e)||Be.IsNumber(t)&&$ae(e)||Be.IsInteger(t)&&$ae(e)||Be.IsBoolean(t)&&z5e(e)||Be.IsUint8Array(t)&&wyt(e)||Be.IsDate(t)&&Tyt(e)||Be.IsConstructor(t)&&Syt(e)||Be.IsFunction(t)&&_yt(e)?ot.True:Be.IsRecord(t)&&Be.IsString(Yae(t))?e[Up]==="Record"?ot.True:ot.False:Be.IsRecord(t)&&Be.IsNumber(Yae(t))?df(e,0)?ot.True:ot.False:ot.False}s(Fu,"FromObjectRight");function kyt(t,e){return xc(e)?bc(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Be.IsOptional(e.properties[r]))return ot.False;if(Be.IsOptional(e.properties[r]))return ot.True;if(Z5e(t.properties[r],e.properties[r])===ot.False)return ot.False}return ot.True})():ot.False}s(kyt,"FromObject");function Pyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)&&Ryt(e)?ot.True:Be.IsPromise(e)?jp(jo(t.item,e.item)):ot.False}s(Pyt,"FromPromise");function Yae(t){return jA in t.patternProperties?qp():VA in t.patternProperties?Cd():$k("Unknown record key pattern")}s(Yae,"RecordKey");function Kae(t){return jA in t.patternProperties?t.patternProperties[jA]:VA in t.patternProperties?t.patternProperties[VA]:$k("Unable to get record value schema")}s(Kae,"RecordValue");function Vp(t,e){let[r,n]=[Yae(e),Kae(e)];return Be.IsLiteralString(t)&&Be.IsNumber(r)&&jp(jo(t,n))===ot.True?ot.True:Be.IsUint8Array(t)&&Be.IsNumber(r)||Be.IsString(t)&&Be.IsNumber(r)||Be.IsArray(t)&&Be.IsNumber(r)?jo(t,n):Be.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(Z5e(n,t.properties[i])===ot.False)return ot.False;return ot.True})():ot.False}s(Vp,"FromRecordRight");function Byt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?jo(Kae(t),Kae(e)):ot.False}s(Byt,"FromRecord");function Dyt(t,e){let r=Be.IsRegExp(t)?Cd():t,n=Be.IsRegExp(e)?Cd():e;return jo(r,n)}s(Dyt,"FromRegExp");function eke(t,e){return Be.IsLiteral(t)&&Nu.IsString(t.const)||Be.IsString(t)?ot.True:ot.False}s(eke,"FromStringRight");function Nyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsString(e)?ot.True:ot.False}s(Nyt,"FromString");function Lyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsSymbol(e)?ot.True:ot.False}s(Lyt,"FromSymbol");function Myt(t,e){return Be.IsTemplateLiteral(t)?jo(d_(t),e):Be.IsTemplateLiteral(e)?jo(t,d_(e)):$k("Invalid fallthrough for TemplateLiteral")}s(Myt,"FromTemplateLiteral");function Fyt(t,e){return Be.IsArray(e)&&t.items!==void 0&&t.items.every(r=>jo(r,e.items)===ot.True)}s(Fyt,"IsArrayOfTuple");function Oyt(t,e){return Be.IsNever(t)?ot.True:Be.IsUnknown(t)?ot.False:Be.IsAny(t)?ot.Union:ot.False}s(Oyt,"FromTupleRight");function Qyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)&&PH(e)||Be.IsArray(e)&&Fyt(t,e)?ot.True:Be.IsTuple(e)?Nu.IsUndefined(t.items)&&!Nu.IsUndefined(e.items)||!Nu.IsUndefined(t.items)&&Nu.IsUndefined(e.items)?ot.False:Nu.IsUndefined(t.items)&&!Nu.IsUndefined(e.items)||t.items.every((r,n)=>jo(r,e.items[n])===ot.True)?ot.True:ot.False:ot.False}s(Qyt,"FromTuple");function Uyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsUint8Array(e)?ot.True:ot.False}s(Uyt,"FromUint8Array");function qyt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Fu(t,e):Be.IsRecord(e)?Vp(t,e):Be.IsVoid(e)?Gyt(t,e):Be.IsUndefined(e)?ot.True:ot.False}s(qyt,"FromUndefined");function Xae(t,e){return e.anyOf.some(r=>jo(t,r)===ot.True)?ot.True:ot.False}s(Xae,"FromUnionRight");function Hyt(t,e){return t.anyOf.every(r=>jo(r,e)===ot.True)?ot.True:ot.False}s(Hyt,"FromUnion");function tke(t,e){return ot.True}s(tke,"FromUnknownRight");function Wyt(t,e){return Be.IsNever(e)?J5e(t,e):Be.IsIntersect(e)?kH(t,e):Be.IsUnion(e)?Xae(t,e):Be.IsAny(e)?Jae(t,e):Be.IsString(e)?eke(t,e):Be.IsNumber(e)?X5e(t,e):Be.IsInteger(e)?K5e(t,e):Be.IsBoolean(e)?Y5e(t,e):Be.IsArray(e)?cyt(t,e):Be.IsTuple(e)?Oyt(t,e):Be.IsObject(e)?Fu(t,e):Be.IsUnknown(e)?ot.True:ot.False}s(Wyt,"FromUnknown");function Gyt(t,e){return Be.IsUndefined(t)||Be.IsUndefined(t)?ot.True:ot.False}s(Gyt,"FromVoidRight");function jyt(t,e){return Be.IsIntersect(e)?kH(t,e):Be.IsUnion(e)?Xae(t,e):Be.IsUnknown(e)?tke(t,e):Be.IsAny(e)?Jae(t,e):Be.IsObject(e)?Fu(t,e):Be.IsVoid(e)?ot.True:ot.False}s(jyt,"FromVoid");function jo(t,e){return Be.IsTemplateLiteral(t)||Be.IsTemplateLiteral(e)?Myt(t,e):Be.IsRegExp(t)||Be.IsRegExp(e)?Dyt(t,e):Be.IsNot(t)||Be.IsNot(e)?vyt(t,e):Be.IsAny(t)?ayt(t,e):Be.IsArray(t)?lyt(t,e):Be.IsBigInt(t)?dyt(t,e):Be.IsBoolean(t)?fyt(t,e):Be.IsAsyncIterator(t)?uyt(t,e):Be.IsConstructor(t)?pyt(t,e):Be.IsDate(t)?myt(t,e):Be.IsFunction(t)?hyt(t,e):Be.IsInteger(t)?gyt(t,e):Be.IsIntersect(t)?Ayt(t,e):Be.IsIterator(t)?yyt(t,e):Be.IsLiteral(t)?Cyt(t,e):Be.IsNever(t)?Eyt(t,e):Be.IsNull(t)?xyt(t,e):Be.IsNumber(t)?byt(t,e):Be.IsObject(t)?kyt(t,e):Be.IsRecord(t)?Byt(t,e):Be.IsString(t)?Nyt(t,e):Be.IsSymbol(t)?Lyt(t,e):Be.IsTuple(t)?Qyt(t,e):Be.IsPromise(t)?Pyt(t,e):Be.IsUint8Array(t)?Uyt(t,e):Be.IsUndefined(t)?qyt(t,e):Be.IsUnion(t)?Hyt(t,e):Be.IsUnknown(t)?Wyt(t,e):Be.IsVoid(t)?jyt(t,e):$k(`Unknown left type operand '${t[et]}'`)}s(jo,"Visit");function Kx(t,e){return jo(t,e)}s(Kx,"ExtendsCheck");d();d();d();function Vyt(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=zk(t[a],e,r,n,Bs(i));return o}s(Vyt,"FromProperties");function $yt(t,e,r,n,i){return Vyt(t.properties,e,r,n,i)}s($yt,"FromMappedResult");function rke(t,e,r,n,i){let o=$yt(t,e,r,n,i);return uo(o)}s(rke,"ExtendsFromMappedResult");function zyt(t,e,r,n){let i=Kx(t,e);return i===ot.Union?To([r,n]):i===ot.True?r:n}s(zyt,"ExtendsResolve");function zk(t,e,r,n,i){return Ns(t)?rke(t,e,r,n,i):g0(t)?it(nke(t,e,r,n,i)):it(zyt(t,e,r,n),i)}s(zk,"Extends");function Yyt(t,e,r,n,i){return{[t]:zk(zi(t),e,r,n,Bs(i))}}s(Yyt,"FromPropertyKey");function Kyt(t,e,r,n,i){return t.reduce((o,a)=>({...o,...Yyt(a,e,r,n,i)}),{})}s(Kyt,"FromPropertyKeys");function Jyt(t,e,r,n,i){return Kyt(t.keys,e,r,n,i)}s(Jyt,"FromMappedKey");function nke(t,e,r,n,i){let o=Jyt(t,e,r,n,i);return uo(o)}s(nke,"ExtendsFromMappedKey");d();function Xyt(t){return t.allOf.every(e=>T1(e))}s(Xyt,"Intersect");function Zyt(t){return t.anyOf.some(e=>T1(e))}s(Zyt,"Union");function eCt(t){return!T1(t.not)}s(eCt,"Not");function T1(t){return t[et]==="Intersect"?Xyt(t):t[et]==="Union"?Zyt(t):t[et]==="Not"?eCt(t):t[et]==="Undefined"}s(T1,"ExtendsUndefinedCheck");d();function ike(t,e){return Yk(d_(t),e)}s(ike,"ExcludeFromTemplateLiteral");function tCt(t,e){let r=t.filter(n=>Kx(n,e)===ot.False);return r.length===1?r[0]:To(r)}s(tCt,"ExcludeRest");function Yk(t,e,r={}){return A0(t)?it(ike(t,e),r):Ns(t)?it(oke(t,e),r):it(no(t)?tCt(t.anyOf,e):Kx(t,e)!==ot.False?pi():t,r)}s(Yk,"Exclude");function rCt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Yk(t[n],e);return r}s(rCt,"FromProperties");function nCt(t,e){return rCt(t.properties,e)}s(nCt,"FromMappedResult");function oke(t,e){let r=nCt(t,e);return uo(r)}s(oke,"ExcludeFromMappedResult");d();d();d();function ske(t,e){return Kk(d_(t),e)}s(ske,"ExtractFromTemplateLiteral");function iCt(t,e){let r=t.filter(n=>Kx(n,e)!==ot.False);return r.length===1?r[0]:To(r)}s(iCt,"ExtractRest");function Kk(t,e,r){return A0(t)?it(ske(t,e),r):Ns(t)?it(ake(t,e),r):it(no(t)?iCt(t.anyOf,e):Kx(t,e)!==ot.False?t:pi(),r)}s(Kk,"Extract");function oCt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Kk(t[n],e);return r}s(oCt,"FromProperties");function sCt(t,e){return oCt(t.properties,e)}s(sCt,"FromMappedResult");function ake(t,e){let r=sCt(t,e);return uo(r)}s(ake,"ExtractFromMappedResult");d();function cke(t,e){return Nh(t)?it(t.returns,e):pi(e)}s(cke,"InstanceType");d();d();function BH(t){return lf(Lu(t))}s(BH,"ReadonlyOptional");d();function f_(t,e,r){return it({[et]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(f_,"RecordCreateFromPattern");function Zae(t,e,r){let n={};for(let i of t)n[i]=e;return wo(n,{...r,[Up]:"Record"})}s(Zae,"RecordCreateFromKeys");function aCt(t,e,r){return yH(t)?Zae(cf(t),e,r):f_(t.pattern,e,r)}s(aCt,"FromTemplateLiteralKey");function cCt(t,e,r){return Zae(cf(To(t)),e,r)}s(cCt,"FromUnionKey");function lCt(t,e,r){return Zae([t.toString()],e,r)}s(lCt,"FromLiteralKey");function uCt(t,e,r){return f_(t.source,e,r)}s(uCt,"FromRegExpKey");function dCt(t,e,r){let n=ec(t.pattern)?VA:t.pattern;return f_(n,e,r)}s(dCt,"FromStringKey");function fCt(t,e,r){return f_(VA,e,r)}s(fCt,"FromAnyKey");function pCt(t,e,r){return f_(A5e,e,r)}s(pCt,"FromNeverKey");function mCt(t,e,r){return wo({true:e,false:e},r)}s(mCt,"FromBooleanKey");function hCt(t,e,r){return f_(jA,e,r)}s(hCt,"FromIntegerKey");function gCt(t,e,r){return f_(jA,e,r)}s(gCt,"FromNumberKey");function DH(t,e,r={}){return no(t)?cCt(t.anyOf,e,r):A0(t)?aCt(t,e,r):h0(t)?lCt(t.const,e,r):C1(t)?mCt(t,e,r):Mh(t)?hCt(t,e,r):Fh(t)?gCt(t,e,r):Bae(t)?uCt(t,e,r):E1(t)?dCt(t,e,r):kae(t)?fCt(t,e,r):Vx(t)?pCt(t,e,r):pi(r)}s(DH,"Record");function NH(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(NH,"RecordPattern");function lke(t){let e=NH(t);return e===VA?Cd():e===jA?qp():Cd({pattern:e})}s(lke,"RecordKey");function LH(t){return t.patternProperties[NH(t)]}s(LH,"RecordValue");function ACt(t,e){return e.parameters=w6(t,e.parameters),e.returns=Uh(t,e.returns),e}s(ACt,"FromConstructor");function yCt(t,e){return e.parameters=w6(t,e.parameters),e.returns=Uh(t,e.returns),e}s(yCt,"FromFunction");function CCt(t,e){return e.allOf=w6(t,e.allOf),e}s(CCt,"FromIntersect");function ECt(t,e){return e.anyOf=w6(t,e.anyOf),e}s(ECt,"FromUnion");function vCt(t,e){return ec(e.items)||(e.items=w6(t,e.items)),e}s(vCt,"FromTuple");function xCt(t,e){return e.items=Uh(t,e.items),e}s(xCt,"FromArray");function bCt(t,e){return e.items=Uh(t,e.items),e}s(bCt,"FromAsyncIterator");function ICt(t,e){return e.items=Uh(t,e.items),e}s(ICt,"FromIterator");function TCt(t,e){return e.item=Uh(t,e.item),e}s(TCt,"FromPromise");function wCt(t,e){let r=kCt(t,e.properties);return{...e,...wo(r)}}s(wCt,"FromObject");function _Ct(t,e){let r=Uh(t,lke(e)),n=Uh(t,LH(e)),i=DH(r,n);return{...e,...i}}s(_Ct,"FromRecord");function SCt(t,e){return e.index in t?t[e.index]:Qh()}s(SCt,"FromArgument");function RCt(t,e){let r=Nk(e),n=af(e),i=Uh(t,e);return r&&n?BH(i):r&&!n?lf(i):!r&&n?Lu(i):i}s(RCt,"FromProperty");function kCt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:RCt(t,e[n])}),{})}s(kCt,"FromProperties");function w6(t,e){return e.map(r=>Uh(t,r))}s(w6,"FromTypes");function Uh(t,e){return Nh(e)?ACt(t,e):Lh(e)?yCt(t,e):xa(e)?CCt(t,e):no(e)?ECt(t,e):y0(e)?vCt(t,e):Bh(e)?xCt(t,e):o_(e)?bCt(t,e):a_(e)?ICt(t,e):c_(e)?TCt(t,e):tc(e)?wCt(t,e):l_(e)?_Ct(t,e):Pae(e)?SCt(t,e):e}s(Uh,"FromType");function uke(t,e){return Uh(e,Bk(t))}s(uke,"Instantiate");d();function dke(t){return it({[et]:"Integer",type:"integer"},t)}s(dke,"Integer");d();d();d();function PCt(t,e,r){return{[t]:qh(zi(t),e,Bs(r))}}s(PCt,"MappedIntrinsicPropertyKey");function BCt(t,e,r){return t.reduce((i,o)=>({...i,...PCt(o,e,r)}),{})}s(BCt,"MappedIntrinsicPropertyKeys");function DCt(t,e,r){return BCt(t.keys,e,r)}s(DCt,"MappedIntrinsicProperties");function fke(t,e,r){let n=DCt(t,e,r);return uo(n)}s(fke,"IntrinsicFromMappedKey");function NCt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(NCt,"ApplyUncapitalize");function LCt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(LCt,"ApplyCapitalize");function MCt(t){return t.toUpperCase()}s(MCt,"ApplyUppercase");function FCt(t){return t.toLowerCase()}s(FCt,"ApplyLowercase");function OCt(t,e,r){let n=qk(t.pattern);if(!u_(n))return{...t,pattern:pke(t.pattern,e)};let a=[...x6(n)].map(u=>zi(u)),c=mke(a,e),l=To(c);return EH([l],r)}s(OCt,"FromTemplateLiteral");function pke(t,e){return typeof t=="string"?e==="Uncapitalize"?NCt(t):e==="Capitalize"?LCt(t):e==="Uppercase"?MCt(t):e==="Lowercase"?FCt(t):t:t.toString()}s(pke,"FromLiteralValue");function mke(t,e){return t.map(r=>qh(r,e))}s(mke,"FromRest");function qh(t,e,r={}){return g0(t)?fke(t,e,r):A0(t)?OCt(t,e,r):no(t)?To(mke(t.anyOf,e),r):h0(t)?zi(pke(t.const,e),r):it(t,r)}s(qh,"Intrinsic");function hke(t,e={}){return qh(t,"Capitalize",e)}s(hke,"Capitalize");d();function gke(t,e={}){return qh(t,"Lowercase",e)}s(gke,"Lowercase");d();function Ake(t,e={}){return qh(t,"Uncapitalize",e)}s(Ake,"Uncapitalize");d();function yke(t,e={}){return qh(t,"Uppercase",e)}s(yke,"Uppercase");d();d();d();d();d();function QCt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Jx(t[i],e,Bs(r));return n}s(QCt,"FromProperties");function UCt(t,e,r){return QCt(t.properties,e,r)}s(UCt,"FromMappedResult");function Cke(t,e,r){let n=UCt(t,e,r);return uo(n)}s(Cke,"OmitFromMappedResult");function qCt(t,e){return t.map(r=>ece(r,e))}s(qCt,"FromIntersect");function HCt(t,e){return t.map(r=>ece(r,e))}s(HCt,"FromUnion");function WCt(t,e){let{[e]:r,...n}=t;return n}s(WCt,"FromProperty");function GCt(t,e){return e.reduce((r,n)=>WCt(r,n),t)}s(GCt,"FromProperties");function jCt(t,e){let r=ba(t,[oa,"$id","required","properties"]),n=GCt(t.properties,e);return wo(n,r)}s(jCt,"FromObject");function VCt(t){let e=t.reduce((r,n)=>hH(n)?[...r,zi(n)]:r,[]);return To(e)}s(VCt,"UnionFromPropertyKeys");function ece(t,e){return xa(t)?Mu(qCt(t.allOf,e)):no(t)?To(HCt(t.anyOf,e)):tc(t)?jCt(t,e):wo({})}s(ece,"OmitResolve");function Jx(t,e,r){let n=Za(e)?VCt(e):e,i=sa(e)?cf(e):e,o=Da(t),a=Da(e);return Ns(t)?Cke(t,i,r):g0(e)?Eke(t,e,r):o&&a?ys("Omit",[t,n],r):!o&&a?ys("Omit",[t,n],r):o&&!a?ys("Omit",[t,n],r):it({...ece(t,i),...r})}s(Jx,"Omit");function $Ct(t,e,r){return{[e]:Jx(t,[e],Bs(r))}}s($Ct,"FromPropertyKey");function zCt(t,e,r){return e.reduce((n,i)=>({...n,...$Ct(t,i,r)}),{})}s(zCt,"FromPropertyKeys");function YCt(t,e,r){return zCt(t,e.keys,r)}s(YCt,"FromMappedKey");function Eke(t,e,r){let n=YCt(t,e,r);return uo(n)}s(Eke,"OmitFromMappedKey");d();d();d();function KCt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Xx(t[i],e,Bs(r));return n}s(KCt,"FromProperties");function JCt(t,e,r){return KCt(t.properties,e,r)}s(JCt,"FromMappedResult");function vke(t,e,r){let n=JCt(t,e,r);return uo(n)}s(vke,"PickFromMappedResult");function XCt(t,e){return t.map(r=>tce(r,e))}s(XCt,"FromIntersect");function ZCt(t,e){return t.map(r=>tce(r,e))}s(ZCt,"FromUnion");function e1t(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(e1t,"FromProperties");function t1t(t,e){let r=ba(t,[oa,"$id","required","properties"]),n=e1t(t.properties,e);return wo(n,r)}s(t1t,"FromObject");function r1t(t){let e=t.reduce((r,n)=>hH(n)?[...r,zi(n)]:r,[]);return To(e)}s(r1t,"UnionFromPropertyKeys");function tce(t,e){return xa(t)?Mu(XCt(t.allOf,e)):no(t)?To(ZCt(t.anyOf,e)):tc(t)?t1t(t,e):wo({})}s(tce,"PickResolve");function Xx(t,e,r){let n=Za(e)?r1t(e):e,i=sa(e)?cf(e):e,o=Da(t),a=Da(e);return Ns(t)?vke(t,i,r):g0(e)?xke(t,e,r):o&&a?ys("Pick",[t,n],r):!o&&a?ys("Pick",[t,n],r):o&&!a?ys("Pick",[t,n],r):it({...tce(t,i),...r})}s(Xx,"Pick");function n1t(t,e,r){return{[e]:Xx(t,[e],Bs(r))}}s(n1t,"FromPropertyKey");function i1t(t,e,r){return e.reduce((n,i)=>({...n,...n1t(t,i,r)}),{})}s(i1t,"FromPropertyKeys");function o1t(t,e,r){return i1t(t,e.keys,r)}s(o1t,"FromMappedKey");function xke(t,e,r){let n=o1t(t,e,r);return uo(n)}s(xke,"PickFromMappedKey");d();d();function s1t(t,e){return ys("Partial",[ys(t,e)])}s(s1t,"FromComputed");function a1t(t){return ys("Partial",[Gp(t)])}s(a1t,"FromRef");function c1t(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Lu(t[r]);return e}s(c1t,"FromProperties");function l1t(t){let e=ba(t,[oa,"$id","required","properties"]),r=c1t(t.properties);return wo(r,e)}s(l1t,"FromObject");function bke(t){return t.map(e=>Ike(e))}s(bke,"FromRest");function Ike(t){return Dh(t)?s1t(t.target,t.parameters):Da(t)?a1t(t.$ref):xa(t)?Mu(bke(t.allOf)):no(t)?To(bke(t.anyOf)):tc(t)?l1t(t):s_(t)||C1(t)||Mh(t)||h0(t)||h6(t)||Fh(t)||E1(t)||g6(t)||v1(t)?t:wo({})}s(Ike,"PartialResolve");function Jk(t,e){return Ns(t)?Tke(t,e):it({...Ike(t),...e})}s(Jk,"Partial");function u1t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Jk(t[n],Bs(e));return r}s(u1t,"FromProperties");function d1t(t,e){return u1t(t.properties,e)}s(d1t,"FromMappedResult");function Tke(t,e){let r=d1t(t,e);return uo(r)}s(Tke,"PartialFromMappedResult");d();d();function f1t(t,e){return ys("Required",[ys(t,e)])}s(f1t,"FromComputed");function p1t(t){return ys("Required",[Gp(t)])}s(p1t,"FromRef");function m1t(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=ba(t[r],[Xl]);return e}s(m1t,"FromProperties");function h1t(t){let e=ba(t,[oa,"$id","required","properties"]),r=m1t(t.properties);return wo(r,e)}s(h1t,"FromObject");function wke(t){return t.map(e=>_ke(e))}s(wke,"FromRest");function _ke(t){return Dh(t)?f1t(t.target,t.parameters):Da(t)?p1t(t.$ref):xa(t)?Mu(wke(t.allOf)):no(t)?To(wke(t.anyOf)):tc(t)?h1t(t):s_(t)||C1(t)||Mh(t)||h0(t)||h6(t)||Fh(t)||E1(t)||g6(t)||v1(t)?t:wo({})}s(_ke,"RequiredResolve");function Xk(t,e){return Ns(t)?Ske(t,e):it({..._ke(t),...e})}s(Xk,"Required");function g1t(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Xk(t[n],e);return r}s(g1t,"FromProperties");function A1t(t,e){return g1t(t.properties,e)}s(A1t,"FromMappedResult");function Ske(t,e){let r=A1t(t,e);return uo(r)}s(Ske,"RequiredFromMappedResult");function y1t(t,e){return e.map(r=>Da(r)?rce(t,r.$ref):C0(t,r))}s(y1t,"DereferenceParameters");function rce(t,e){return e in t?Da(t[e])?rce(t,t[e].$ref):C0(t,t[e]):pi()}s(rce,"Dereference");function C1t(t){return jk(t[0])}s(C1t,"FromAwaited");function E1t(t){return Yx(t[0],t[1])}s(E1t,"FromIndex");function v1t(t){return Vk(t[0])}s(v1t,"FromKeyOf");function x1t(t){return Jk(t[0])}s(x1t,"FromPartial");function b1t(t){return Jx(t[0],t[1])}s(b1t,"FromOmit");function I1t(t){return Xx(t[0],t[1])}s(I1t,"FromPick");function T1t(t){return Xk(t[0])}s(T1t,"FromRequired");function w1t(t,e,r){let n=y1t(t,r);return e==="Awaited"?C1t(n):e==="Index"?E1t(n):e==="KeyOf"?v1t(n):e==="Partial"?x1t(n):e==="Omit"?b1t(n):e==="Pick"?I1t(n):e==="Required"?T1t(n):pi()}s(w1t,"FromComputed");function _1t(t,e){return Fk(C0(t,e))}s(_1t,"FromArray");function S1t(t,e){return Ok(C0(t,e))}s(S1t,"FromAsyncIterator");function R1t(t,e,r){return Qk(_6(t,e),C0(t,r))}s(R1t,"FromConstructor");function k1t(t,e,r){return $A(_6(t,e),C0(t,r))}s(k1t,"FromFunction");function P1t(t,e){return Mu(_6(t,e))}s(P1t,"FromIntersect");function B1t(t,e){return Gk(C0(t,e))}s(B1t,"FromIterator");function D1t(t,e){return wo(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:C0(t,e[n])}),{}))}s(D1t,"FromObject");function N1t(t,e){let[r,n]=[C0(t,LH(e)),NH(e)],i=Bk(e);return i.patternProperties[n]=r,i}s(N1t,"FromRecord");function L1t(t,e){return Da(e)?{...rce(t,e.$ref),[oa]:e[oa]}:e}s(L1t,"FromTransform");function M1t(t,e){return Hp(_6(t,e))}s(M1t,"FromTuple");function F1t(t,e){return To(_6(t,e))}s(F1t,"FromUnion");function _6(t,e){return e.map(r=>C0(t,r))}s(_6,"FromTypes");function C0(t,e){return af(e)?it(C0(t,ba(e,[Xl])),e):Nk(e)?it(C0(t,ba(e,[Ph])),e):Io(e)?it(L1t(t,e),e):Bh(e)?it(_1t(t,e.items),e):o_(e)?it(S1t(t,e.items),e):Dh(e)?it(w1t(t,e.target,e.parameters)):Nh(e)?it(R1t(t,e.parameters,e.returns),e):Lh(e)?it(k1t(t,e.parameters,e.returns),e):xa(e)?it(P1t(t,e.allOf),e):a_(e)?it(B1t(t,e.items),e):tc(e)?it(D1t(t,e.properties),e):l_(e)?it(N1t(t,e)):y0(e)?it(M1t(t,e.items||[]),e):no(e)?it(F1t(t,e.anyOf),e):e}s(C0,"FromType");function O1t(t,e){return e in t?C0(t,t[e]):pi()}s(O1t,"ComputeType");function Rke(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:O1t(t,r)}),{})}s(Rke,"ComputeModuleProperties");var nce=class{static{s(this,"TModule")}constructor(e){let r=Rke(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:it(this.$defs[e],r)};return it({[et]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function kke(t){return new nce(t)}s(kke,"Module");d();function Pke(t,e){return it({[et]:"Not",not:t},e)}s(Pke,"Not");d();function Bke(t,e){return Lh(t)?Hp(t.parameters,e):pi()}s(Bke,"Parameters");d();var Q1t=0;function Dke(t,e={}){ec(e.$id)&&(e.$id=`T${Q1t++}`);let r=Bk(t({[et]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,it({[Up]:"Recursive",...r},e)}s(Dke,"Recursive");d();function Nke(t,e){let r=as(t)?new globalThis.RegExp(t):t;return it({[et]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(Nke,"RegExp");d();function U1t(t){return xa(t)?t.allOf:no(t)?t.anyOf:y0(t)?t.items??[]:[]}s(U1t,"RestResolve");function Lke(t){return U1t(t)}s(Lke,"Rest");d();function Mke(t,e){return Lh(t)?it(t.returns,e):pi(e)}s(Mke,"ReturnType");d();var ice=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new oce(this.schema,e)}},oce=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[oa].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[oa].Decode(a)),"Decode")};return{...r,[oa]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[oa]:n}}Encode(e){return Io(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function Fke(t){return new ice(t)}s(Fke,"Transform");d();function Oke(t={}){return it({[et]:t[et]??"Unsafe"},t)}s(Oke,"Unsafe");d();function Qke(t){return it({[et]:"Void",type:"void"},t)}s(Qke,"Void");d();var sce={};ra(sce,{Any:()=>zx,Argument:()=>x5e,Array:()=>Fk,AsyncIterator:()=>Ok,Awaited:()=>jk,BigInt:()=>Wk,Boolean:()=>CH,Capitalize:()=>hke,Composite:()=>q5e,Const:()=>H5e,Constructor:()=>Qk,ConstructorParameters:()=>W5e,Date:()=>IH,Enum:()=>G5e,Exclude:()=>Yk,Extends:()=>zk,Extract:()=>Kk,Function:()=>$A,Index:()=>Yx,InstanceType:()=>cke,Instantiate:()=>uke,Integer:()=>dke,Intersect:()=>Mu,Iterator:()=>Gk,KeyOf:()=>Vk,Literal:()=>zi,Lowercase:()=>gke,Mapped:()=>L5e,Module:()=>kke,Never:()=>pi,Not:()=>Pke,Null:()=>TH,Number:()=>qp,Object:()=>wo,Omit:()=>Jx,Optional:()=>Lu,Parameters:()=>Bke,Partial:()=>Jk,Pick:()=>Xx,Promise:()=>xH,Readonly:()=>lf,ReadonlyOptional:()=>BH,Record:()=>DH,Recursive:()=>Dke,Ref:()=>Gp,RegExp:()=>Nke,Required:()=>Xk,Rest:()=>Lke,ReturnType:()=>Mke,String:()=>Cd,Symbol:()=>wH,TemplateLiteral:()=>EH,Transform:()=>Fke,Tuple:()=>Hp,Uint8Array:()=>SH,Uncapitalize:()=>Ake,Undefined:()=>_H,Union:()=>To,Unknown:()=>Qh,Unsafe:()=>Oke,Uppercase:()=>yke,Void:()=>Qke});d();var I=sce;d();d();function q1t(t){switch(t.errorType){case Xe.ArrayContains:return"Expected array to contain at least one matching value";case Xe.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Xe.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Xe.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Xe.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Xe.ArrayUniqueItems:return"Expected array elements to be unique";case Xe.Array:return"Expected array";case Xe.AsyncIterator:return"Expected AsyncIterator";case Xe.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Xe.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Xe.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Xe.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Xe.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Xe.BigInt:return"Expected bigint";case Xe.Boolean:return"Expected boolean";case Xe.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Xe.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Xe.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Xe.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Xe.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Xe.Date:return"Expected Date";case Xe.Function:return"Expected function";case Xe.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Xe.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Xe.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Xe.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Xe.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Xe.Integer:return"Expected integer";case Xe.IntersectUnevaluatedProperties:return"Unexpected property";case Xe.Intersect:return"Expected all values to match";case Xe.Iterator:return"Expected Iterator";case Xe.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Xe.Never:return"Never";case Xe.Not:return"Value should not match";case Xe.Null:return"Expected null";case Xe.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Xe.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Xe.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Xe.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Xe.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Xe.Number:return"Expected number";case Xe.Object:return"Expected object";case Xe.ObjectAdditionalProperties:return"Unexpected property";case Xe.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Xe.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Xe.ObjectRequiredProperty:return"Expected required property";case Xe.Promise:return"Expected Promise";case Xe.RegExp:return"Expected string to match regular expression";case Xe.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Xe.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Xe.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Xe.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Xe.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Xe.String:return"Expected string";case Xe.Symbol:return"Expected symbol";case Xe.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Xe.Tuple:return"Expected tuple";case Xe.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Xe.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Xe.Uint8Array:return"Expected Uint8Array";case Xe.Undefined:return"Expected undefined";case Xe.Union:return"Expected union value";case Xe.Void:return"Expected void";case Xe.Kind:return`Expected kind '${t.schema[et]}'`;default:return"Unknown error type"}}s(q1t,"DefaultErrorFunction");var H1t=q1t;function Uke(){return H1t}s(Uke,"GetErrorFunction");d();var ace=class extends In{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function W1t(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new ace(t);return fo(r,e)}s(W1t,"Resolve");function Al(t,e){return!ro(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(Al,"Pushref");function fo(t,e){return t[et]==="This"||t[et]==="Ref"?W1t(t,e):t}s(fo,"Deref");d();var cce=class extends In{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},E0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(E0||(E0={}));var Zk=BigInt("14695981039346656037"),[G1t,j1t]=[BigInt("1099511628211"),BigInt("18446744073709551616")],V1t=Array.from({length:256}).map((t,e)=>BigInt(e)),qke=new Float64Array(1),Hke=new DataView(qke.buffer),Wke=new Uint8Array(qke.buffer);function*$1t(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s($1t,"NumberToBytes");function z1t(t){Ou(E0.Array);for(let e of t)e4(e)}s(z1t,"ArrayType");function Y1t(t){Ou(E0.Boolean),Ou(t?1:0)}s(Y1t,"BooleanType");function K1t(t){Ou(E0.BigInt),Hke.setBigInt64(0,t);for(let e of Wke)Ou(e)}s(K1t,"BigIntType");function J1t(t){Ou(E0.Date),e4(t.getTime())}s(J1t,"DateType");function X1t(t){Ou(E0.Null)}s(X1t,"NullType");function Z1t(t){Ou(E0.Number),Hke.setFloat64(0,t);for(let e of Wke)Ou(e)}s(Z1t,"NumberType");function eEt(t){Ou(E0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())e4(e),e4(t[e])}s(eEt,"ObjectType");function tEt(t){Ou(E0.String);for(let e=0;e<t.length;e++)for(let r of $1t(t.charCodeAt(e)))Ou(r)}s(tEt,"StringType");function rEt(t){Ou(E0.Symbol),e4(t.description)}s(rEt,"SymbolType");function nEt(t){Ou(E0.Uint8Array);for(let e=0;e<t.length;e++)Ou(t[e])}s(nEt,"Uint8ArrayType");function iEt(t){return Ou(E0.Undefined)}s(iEt,"UndefinedType");function e4(t){if(bn(t))return z1t(t);if(GA(t))return Y1t(t);if(Jl(t))return K1t(t);if(Ad(t))return J1t(t);if(A1(t))return X1t(t);if(Gr(t))return Z1t(t);if(Ei(t))return eEt(t);if(ro(t))return tEt(t);if(y1(t))return rEt(t);if(Dk(t))return nEt(t);if(Ds(t))return iEt(t);throw new cce(t)}s(e4,"Visit");function Ou(t){Zk=Zk^V1t[t],Zk=Zk*G1t%j1t}s(Ou,"FNV1A64");function Zx(t){return Zk=BigInt("14695981039346656037"),e4(t),Zk}s(Zx,"Hash");d();var lce=class extends In{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function oEt(t){return t[et]==="Any"||t[et]==="Unknown"}s(oEt,"IsAnyOrUnknown");function Mi(t){return t!==void 0}s(Mi,"IsDefined");function sEt(t,e,r){return!0}s(sEt,"FromAny");function aEt(t,e,r){return!0}s(aEt,"FromArgument");function cEt(t,e,r){if(!bn(r)||Mi(t.minItems)&&!(r.length>=t.minItems)||Mi(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>yl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let c=Zx(a);if(o.has(c))return!1;o.add(c)}return!0}())return!1;if(!(Mi(t.contains)||Gr(t.minContains)||Gr(t.maxContains)))return!0;let n=Mi(t.contains)?t.contains:pi(),i=r.reduce((o,a)=>yl(n,e,a)?o+1:o,0);return!(i===0||Gr(t.minContains)&&i<t.minContains||Gr(t.maxContains)&&i>t.maxContains)}s(cEt,"FromArray");function lEt(t,e,r){return dH(r)}s(lEt,"FromAsyncIterator");function uEt(t,e,r){return!(!Jl(r)||Mi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Mi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Mi(t.maximum)&&!(r<=t.maximum)||Mi(t.minimum)&&!(r>=t.minimum)||Mi(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(uEt,"FromBigInt");function dEt(t,e,r){return GA(r)}s(dEt,"FromBoolean");function fEt(t,e,r){return yl(t.returns,e,r.prototype)}s(fEt,"FromConstructor");function pEt(t,e,r){return!(!Ad(r)||Mi(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Mi(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Mi(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Mi(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Mi(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(pEt,"FromDate");function mEt(t,e,r){return jx(r)}s(mEt,"FromFunction");function hEt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return yl(i,[...e,...n],r)}s(hEt,"FromImport");function gEt(t,e,r){return!(!mH(r)||Mi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Mi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Mi(t.maximum)&&!(r<=t.maximum)||Mi(t.minimum)&&!(r>=t.minimum)||Mi(t.multipleOf)&&r%t.multipleOf!==0)}s(gEt,"FromInteger");function AEt(t,e,r){let n=t.allOf.every(i=>yl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(I1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(sa(t.unevaluatedProperties)){let i=new RegExp(I1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||yl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(AEt,"FromIntersect");function yEt(t,e,r){return fH(r)}s(yEt,"FromIterator");function CEt(t,e,r){return r===t.const}s(CEt,"FromLiteral");function EEt(t,e,r){return!1}s(EEt,"FromNever");function vEt(t,e,r){return!yl(t.not,e,r)}s(vEt,"FromNot");function xEt(t,e,r){return A1(r)}s(xEt,"FromNull");function bEt(t,e,r){return!(!As.IsNumberLike(r)||Mi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Mi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Mi(t.minimum)&&!(r>=t.minimum)||Mi(t.maximum)&&!(r<=t.maximum)||Mi(t.multipleOf)&&r%t.multipleOf!==0)}s(bEt,"FromNumber");function IEt(t,e,r){if(!As.IsObjectLike(r)||Mi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Mi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!yl(o,e,r[i])||(T1(o)||oEt(o))&&!(i in r))return!1}else if(As.IsExactOptionalProperty(r,i)&&!yl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||yl(t.additionalProperties,e,r[o])):!0}s(IEt,"FromObject");function TEt(t,e,r){return pH(r)}s(TEt,"FromPromise");function wEt(t,e,r){if(!As.IsRecordLike(r)||Mi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Mi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,f])=>o.test(u)?yl(i,e,f):!0),c=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,f])=>o.test(u)?!0:yl(t.additionalProperties,e,f)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&c&&l}s(wEt,"FromRecord");function _Et(t,e,r){return yl(fo(t,e),e,r)}s(_Et,"FromRef");function SEt(t,e,r){let n=new RegExp(t.source,t.flags);return Mi(t.minLength)&&!(r.length>=t.minLength)||Mi(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(SEt,"FromRegExp");function REt(t,e,r){return!ro(r)||Mi(t.minLength)&&!(r.length>=t.minLength)||Mi(t.maxLength)&&!(r.length<=t.maxLength)||Mi(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Mi(t.format)?Oh.Has(t.format)?Oh.Get(t.format)(r):!1:!0}s(REt,"FromString");function kEt(t,e,r){return y1(r)}s(kEt,"FromSymbol");function PEt(t,e,r){return ro(r)&&new RegExp(t.pattern).test(r)}s(PEt,"FromTemplateLiteral");function BEt(t,e,r){return yl(fo(t,e),e,r)}s(BEt,"FromThis");function DEt(t,e,r){if(!bn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!yl(t.items[n],e,r[n]))return!1;return!0}s(DEt,"FromTuple");function NEt(t,e,r){return Ds(r)}s(NEt,"FromUndefined");function LEt(t,e,r){return t.anyOf.some(n=>yl(n,e,r))}s(LEt,"FromUnion");function MEt(t,e,r){return!(!Dk(r)||Mi(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Mi(t.minByteLength)&&!(r.length>=t.minByteLength))}s(MEt,"FromUint8Array");function FEt(t,e,r){return!0}s(FEt,"FromUnknown");function OEt(t,e,r){return As.IsVoidLike(r)}s(OEt,"FromVoid");function QEt(t,e,r){return yd.Has(t[et])?yd.Get(t[et])(t,r):!1}s(QEt,"FromKind");function yl(t,e,r){let n=Mi(t.$id)?Al(t,e):e,i=t;switch(i[et]){case"Any":return sEt(i,n,r);case"Argument":return aEt(i,n,r);case"Array":return cEt(i,n,r);case"AsyncIterator":return lEt(i,n,r);case"BigInt":return uEt(i,n,r);case"Boolean":return dEt(i,n,r);case"Constructor":return fEt(i,n,r);case"Date":return pEt(i,n,r);case"Function":return mEt(i,n,r);case"Import":return hEt(i,n,r);case"Integer":return gEt(i,n,r);case"Intersect":return AEt(i,n,r);case"Iterator":return yEt(i,n,r);case"Literal":return CEt(i,n,r);case"Never":return EEt(i,n,r);case"Not":return vEt(i,n,r);case"Null":return xEt(i,n,r);case"Number":return bEt(i,n,r);case"Object":return IEt(i,n,r);case"Promise":return TEt(i,n,r);case"Record":return wEt(i,n,r);case"Ref":return _Et(i,n,r);case"RegExp":return SEt(i,n,r);case"String":return REt(i,n,r);case"Symbol":return kEt(i,n,r);case"TemplateLiteral":return PEt(i,n,r);case"This":return BEt(i,n,r);case"Tuple":return DEt(i,n,r);case"Undefined":return NEt(i,n,r);case"Union":return LEt(i,n,r);case"Uint8Array":return MEt(i,n,r);case"Unknown":return FEt(i,n,r);case"Void":return OEt(i,n,r);default:if(!yd.Has(i[et]))throw new lce(i);return QEt(i,n,r)}}s(yl,"Visit");function Ii(...t){return t.length===3?yl(t[0],t[1],t[2]):yl(t[0],[],t[1])}s(Ii,"Check");var Xe;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Xe||(Xe={}));var uce=class extends In{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function w1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(w1,"EscapeKey");function Fi(t){return t!==void 0}s(Fi,"IsDefined");var eb=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function tr(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:Uke()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(tr,"Create");function*UEt(t,e,r,n){}s(UEt,"FromAny");function*qEt(t,e,r,n){}s(qEt,"FromArgument");function*HEt(t,e,r,n){if(!bn(n))return yield tr(Xe.Array,t,r,n);Fi(t.minItems)&&!(n.length>=t.minItems)&&(yield tr(Xe.ArrayMinItems,t,r,n)),Fi(t.maxItems)&&!(n.length<=t.maxItems)&&(yield tr(Xe.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*Cl(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let c of n){let l=Zx(c);if(a.has(l))return!1;a.add(l)}return!0}()&&(yield tr(Xe.ArrayUniqueItems,t,r,n)),!(Fi(t.contains)||Fi(t.minContains)||Fi(t.maxContains)))return;let i=Fi(t.contains)?t.contains:pi(),o=n.reduce((a,c,l)=>Cl(i,e,`${r}${l}`,c).next().done===!0?a+1:a,0);o===0&&(yield tr(Xe.ArrayContains,t,r,n)),Gr(t.minContains)&&o<t.minContains&&(yield tr(Xe.ArrayMinContains,t,r,n)),Gr(t.maxContains)&&o>t.maxContains&&(yield tr(Xe.ArrayMaxContains,t,r,n))}s(HEt,"FromArray");function*WEt(t,e,r,n){dH(n)||(yield tr(Xe.AsyncIterator,t,r,n))}s(WEt,"FromAsyncIterator");function*GEt(t,e,r,n){if(!Jl(n))return yield tr(Xe.BigInt,t,r,n);Fi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield tr(Xe.BigIntExclusiveMaximum,t,r,n)),Fi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield tr(Xe.BigIntExclusiveMinimum,t,r,n)),Fi(t.maximum)&&!(n<=t.maximum)&&(yield tr(Xe.BigIntMaximum,t,r,n)),Fi(t.minimum)&&!(n>=t.minimum)&&(yield tr(Xe.BigIntMinimum,t,r,n)),Fi(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield tr(Xe.BigIntMultipleOf,t,r,n))}s(GEt,"FromBigInt");function*jEt(t,e,r,n){GA(n)||(yield tr(Xe.Boolean,t,r,n))}s(jEt,"FromBoolean");function*VEt(t,e,r,n){yield*Cl(t.returns,e,r,n.prototype)}s(VEt,"FromConstructor");function*$Et(t,e,r,n){if(!Ad(n))return yield tr(Xe.Date,t,r,n);Fi(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield tr(Xe.DateExclusiveMaximumTimestamp,t,r,n)),Fi(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield tr(Xe.DateExclusiveMinimumTimestamp,t,r,n)),Fi(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield tr(Xe.DateMaximumTimestamp,t,r,n)),Fi(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield tr(Xe.DateMinimumTimestamp,t,r,n)),Fi(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield tr(Xe.DateMultipleOfTimestamp,t,r,n))}s($Et,"FromDate");function*zEt(t,e,r,n){jx(n)||(yield tr(Xe.Function,t,r,n))}s(zEt,"FromFunction");function*YEt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Cl(o,[...e,...i],r,n)}s(YEt,"FromImport");function*KEt(t,e,r,n){if(!mH(n))return yield tr(Xe.Integer,t,r,n);Fi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield tr(Xe.IntegerExclusiveMaximum,t,r,n)),Fi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield tr(Xe.IntegerExclusiveMinimum,t,r,n)),Fi(t.maximum)&&!(n<=t.maximum)&&(yield tr(Xe.IntegerMaximum,t,r,n)),Fi(t.minimum)&&!(n>=t.minimum)&&(yield tr(Xe.IntegerMinimum,t,r,n)),Fi(t.multipleOf)&&n%t.multipleOf!==0&&(yield tr(Xe.IntegerMultipleOf,t,r,n))}s(KEt,"FromInteger");function*JEt(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of Cl(o,e,r,n))i=!0,yield a;if(i)return yield tr(Xe.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(I1(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield tr(Xe.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(I1(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let c=Cl(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();c.done||(yield c.value)}}}s(JEt,"FromIntersect");function*XEt(t,e,r,n){fH(n)||(yield tr(Xe.Iterator,t,r,n))}s(XEt,"FromIterator");function*ZEt(t,e,r,n){n!==t.const&&(yield tr(Xe.Literal,t,r,n))}s(ZEt,"FromLiteral");function*evt(t,e,r,n){yield tr(Xe.Never,t,r,n)}s(evt,"FromNever");function*tvt(t,e,r,n){Cl(t.not,e,r,n).next().done===!0&&(yield tr(Xe.Not,t,r,n))}s(tvt,"FromNot");function*rvt(t,e,r,n){A1(n)||(yield tr(Xe.Null,t,r,n))}s(rvt,"FromNull");function*nvt(t,e,r,n){if(!As.IsNumberLike(n))return yield tr(Xe.Number,t,r,n);Fi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield tr(Xe.NumberExclusiveMaximum,t,r,n)),Fi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield tr(Xe.NumberExclusiveMinimum,t,r,n)),Fi(t.maximum)&&!(n<=t.maximum)&&(yield tr(Xe.NumberMaximum,t,r,n)),Fi(t.minimum)&&!(n>=t.minimum)&&(yield tr(Xe.NumberMinimum,t,r,n)),Fi(t.multipleOf)&&n%t.multipleOf!==0&&(yield tr(Xe.NumberMultipleOf,t,r,n))}s(nvt,"FromNumber");function*ivt(t,e,r,n){if(!As.IsObjectLike(n))return yield tr(Xe.Object,t,r,n);Fi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield tr(Xe.ObjectMinProperties,t,r,n)),Fi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield tr(Xe.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let c of i)a.includes(c)||(yield tr(Xe.ObjectRequiredProperty,t.properties[c],`${r}/${w1(c)}`,void 0));if(t.additionalProperties===!1)for(let c of a)o.includes(c)||(yield tr(Xe.ObjectAdditionalProperties,t,`${r}/${w1(c)}`,n[c]));if(typeof t.additionalProperties=="object")for(let c of a)o.includes(c)||(yield*Cl(t.additionalProperties,e,`${r}/${w1(c)}`,n[c]));for(let c of o){let l=t.properties[c];t.required&&t.required.includes(c)?(yield*Cl(l,e,`${r}/${w1(c)}`,n[c]),T1(t)&&!(c in n)&&(yield tr(Xe.ObjectRequiredProperty,l,`${r}/${w1(c)}`,void 0))):As.IsExactOptionalProperty(n,c)&&(yield*Cl(l,e,`${r}/${w1(c)}`,n[c]))}}s(ivt,"FromObject");function*ovt(t,e,r,n){pH(n)||(yield tr(Xe.Promise,t,r,n))}s(ovt,"FromPromise");function*svt(t,e,r,n){if(!As.IsRecordLike(n))return yield tr(Xe.Object,t,r,n);Fi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield tr(Xe.ObjectMinProperties,t,r,n)),Fi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield tr(Xe.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[c,l]of Object.entries(n))a.test(c)&&(yield*Cl(o,e,`${r}/${w1(c)}`,l));if(typeof t.additionalProperties=="object")for(let[c,l]of Object.entries(n))a.test(c)||(yield*Cl(t.additionalProperties,e,`${r}/${w1(c)}`,l));if(t.additionalProperties===!1){for(let[c,l]of Object.entries(n))if(!a.test(c))return yield tr(Xe.ObjectAdditionalProperties,t,`${r}/${w1(c)}`,l)}}s(svt,"FromRecord");function*avt(t,e,r,n){yield*Cl(fo(t,e),e,r,n)}s(avt,"FromRef");function*cvt(t,e,r,n){if(!ro(n))return yield tr(Xe.String,t,r,n);if(Fi(t.minLength)&&!(n.length>=t.minLength)&&(yield tr(Xe.StringMinLength,t,r,n)),Fi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield tr(Xe.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield tr(Xe.RegExp,t,r,n)}s(cvt,"FromRegExp");function*lvt(t,e,r,n){if(!ro(n))return yield tr(Xe.String,t,r,n);Fi(t.minLength)&&!(n.length>=t.minLength)&&(yield tr(Xe.StringMinLength,t,r,n)),Fi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield tr(Xe.StringMaxLength,t,r,n)),ro(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield tr(Xe.StringPattern,t,r,n))),ro(t.format)&&(Oh.Has(t.format)?Oh.Get(t.format)(n)||(yield tr(Xe.StringFormat,t,r,n)):yield tr(Xe.StringFormatUnknown,t,r,n))}s(lvt,"FromString");function*uvt(t,e,r,n){y1(n)||(yield tr(Xe.Symbol,t,r,n))}s(uvt,"FromSymbol");function*dvt(t,e,r,n){if(!ro(n))return yield tr(Xe.String,t,r,n);new RegExp(t.pattern).test(n)||(yield tr(Xe.StringPattern,t,r,n))}s(dvt,"FromTemplateLiteral");function*fvt(t,e,r,n){yield*Cl(fo(t,e),e,r,n)}s(fvt,"FromThis");function*pvt(t,e,r,n){if(!bn(n))return yield tr(Xe.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield tr(Xe.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield tr(Xe.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*Cl(t.items[i],e,`${r}/${i}`,n[i])}s(pvt,"FromTuple");function*mvt(t,e,r,n){Ds(n)||(yield tr(Xe.Undefined,t,r,n))}s(mvt,"FromUndefined");function*hvt(t,e,r,n){if(Ii(t,e,n))return;let i=t.anyOf.map(o=>new eb(Cl(o,e,r,n)));yield tr(Xe.Union,t,r,n,i)}s(hvt,"FromUnion");function*gvt(t,e,r,n){if(!Dk(n))return yield tr(Xe.Uint8Array,t,r,n);Fi(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield tr(Xe.Uint8ArrayMaxByteLength,t,r,n)),Fi(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield tr(Xe.Uint8ArrayMinByteLength,t,r,n))}s(gvt,"FromUint8Array");function*Avt(t,e,r,n){}s(Avt,"FromUnknown");function*yvt(t,e,r,n){As.IsVoidLike(n)||(yield tr(Xe.Void,t,r,n))}s(yvt,"FromVoid");function*Cvt(t,e,r,n){yd.Get(t[et])(t,n)||(yield tr(Xe.Kind,t,r,n))}s(Cvt,"FromKind");function*Cl(t,e,r,n){let i=Fi(t.$id)?[...e,t]:e,o=t;switch(o[et]){case"Any":return yield*UEt(o,i,r,n);case"Argument":return yield*qEt(o,i,r,n);case"Array":return yield*HEt(o,i,r,n);case"AsyncIterator":return yield*WEt(o,i,r,n);case"BigInt":return yield*GEt(o,i,r,n);case"Boolean":return yield*jEt(o,i,r,n);case"Constructor":return yield*VEt(o,i,r,n);case"Date":return yield*$Et(o,i,r,n);case"Function":return yield*zEt(o,i,r,n);case"Import":return yield*YEt(o,i,r,n);case"Integer":return yield*KEt(o,i,r,n);case"Intersect":return yield*JEt(o,i,r,n);case"Iterator":return yield*XEt(o,i,r,n);case"Literal":return yield*ZEt(o,i,r,n);case"Never":return yield*evt(o,i,r,n);case"Not":return yield*tvt(o,i,r,n);case"Null":return yield*rvt(o,i,r,n);case"Number":return yield*nvt(o,i,r,n);case"Object":return yield*ivt(o,i,r,n);case"Promise":return yield*ovt(o,i,r,n);case"Record":return yield*svt(o,i,r,n);case"Ref":return yield*avt(o,i,r,n);case"RegExp":return yield*cvt(o,i,r,n);case"String":return yield*lvt(o,i,r,n);case"Symbol":return yield*uvt(o,i,r,n);case"TemplateLiteral":return yield*dvt(o,i,r,n);case"This":return yield*fvt(o,i,r,n);case"Tuple":return yield*pvt(o,i,r,n);case"Undefined":return yield*mvt(o,i,r,n);case"Union":return yield*hvt(o,i,r,n);case"Uint8Array":return yield*gvt(o,i,r,n);case"Unknown":return yield*Avt(o,i,r,n);case"Void":return yield*yvt(o,i,r,n);default:if(!yd.Has(o[et]))throw new uce(t);return yield*Cvt(o,i,r,n)}}s(Cl,"Visit");function YA(...t){let e=t.length===3?Cl(t[0],t[1],"",t[2]):Cl(t[0],[],"",t[1]);return new eb(e)}s(YA,"Errors");d();d();var t4=class extends In{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},dce=class extends In{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function aa(t,e,r){try{return Io(t)?t[oa].Decode(r):r}catch(n){throw new dce(t,e,r,n)}}s(aa,"Default");function Evt(t,e,r,n){return bn(n)?aa(t,r,n.map((i,o)=>Hh(t.items,e,`${r}/${o}`,i))):aa(t,r,n)}s(Evt,"FromArray");function vvt(t,e,r,n){if(!Ei(n)||m0(n))return aa(t,r,n);let i=bH(t),o=i.map(f=>f[0]),a={...n};for(let[f,p]of i)f in a&&(a[f]=Hh(p,e,`${r}/${f}`,a[f]));if(!Io(t.unevaluatedProperties))return aa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.unevaluatedProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=aa(l,`${r}/${f}`,u[f]));return aa(t,r,u)}s(vvt,"FromIntersect");function xvt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=Hh(o,[...e,...i],r,n);return aa(t,r,a)}s(xvt,"FromImport");function bvt(t,e,r,n){return aa(t,r,Hh(t.not,e,r,n))}s(bvt,"FromNot");function Ivt(t,e,r,n){if(!Ei(n))return aa(t,r,n);let i=uf(t),o={...n};for(let u of i)xn(o,u)&&(Ds(o[u])&&(!v1(t.properties[u])||As.IsExactOptionalProperty(o,u))||(o[u]=Hh(t.properties[u],e,`${r}/${u}`,o[u])));if(!sa(t.additionalProperties))return aa(t,r,o);let a=Object.getOwnPropertyNames(o),c=t.additionalProperties,l={...o};for(let u of a)i.includes(u)||(l[u]=aa(c,`${r}/${u}`,l[u]));return aa(t,r,l)}s(Ivt,"FromObject");function Tvt(t,e,r,n){if(!Ei(n))return aa(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let f of Object.getOwnPropertyNames(n))o.test(f)&&(a[f]=Hh(t.patternProperties[i],e,`${r}/${f}`,a[f]));if(!sa(t.additionalProperties))return aa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.test(f)||(u[f]=aa(l,`${r}/${f}`,u[f]));return aa(t,r,u)}s(Tvt,"FromRecord");function wvt(t,e,r,n){let i=fo(t,e);return aa(t,r,Hh(i,e,r,n))}s(wvt,"FromRef");function _vt(t,e,r,n){let i=fo(t,e);return aa(t,r,Hh(i,e,r,n))}s(_vt,"FromThis");function Svt(t,e,r,n){return bn(n)&&bn(t.items)?aa(t,r,t.items.map((i,o)=>Hh(i,e,`${r}/${o}`,n[o]))):aa(t,r,n)}s(Svt,"FromTuple");function Rvt(t,e,r,n){for(let i of t.anyOf){if(!Ii(i,e,n))continue;let o=Hh(i,e,r,n);return aa(t,r,o)}return aa(t,r,n)}s(Rvt,"FromUnion");function Hh(t,e,r,n){let i=Al(t,e),o=t;switch(t[et]){case"Array":return Evt(o,i,r,n);case"Import":return xvt(o,i,r,n);case"Intersect":return vvt(o,i,r,n);case"Not":return bvt(o,i,r,n);case"Object":return Ivt(o,i,r,n);case"Record":return Tvt(o,i,r,n);case"Ref":return wvt(o,i,r,n);case"Symbol":return aa(o,r,n);case"This":return _vt(o,i,r,n);case"Tuple":return Svt(o,i,r,n);case"Union":return Rvt(o,i,r,n);default:return aa(o,r,n)}}s(Hh,"Visit");function r4(t,e,r){return Hh(t,e,"",r)}s(r4,"TransformDecode");d();var n4=class extends In{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},fce=class extends In{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function Zl(t,e,r){try{return Io(t)?t[oa].Encode(r):r}catch(n){throw new fce(t,e,r,n)}}s(Zl,"Default");function kvt(t,e,r,n){let i=Zl(t,r,n);return bn(i)?i.map((o,a)=>Wh(t.items,e,`${r}/${a}`,o)):i}s(kvt,"FromArray");function Pvt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=Zl(t,r,n);return Wh(o,[...e,...i],r,a)}s(Pvt,"FromImport");function Bvt(t,e,r,n){let i=Zl(t,r,n);if(!Ei(n)||m0(n))return i;let o=bH(t),a=o.map(p=>p[0]),c={...i};for(let[p,m]of o)p in c&&(c[p]=Wh(m,e,`${r}/${p}`,c[p]));if(!Io(t.unevaluatedProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,f={...c};for(let p of l)a.includes(p)||(f[p]=Zl(u,`${r}/${p}`,f[p]));return f}s(Bvt,"FromIntersect");function Dvt(t,e,r,n){return Zl(t.not,r,Zl(t,r,n))}s(Dvt,"FromNot");function Nvt(t,e,r,n){let i=Zl(t,r,n);if(!Ei(i))return i;let o=uf(t),a={...i};for(let f of o)xn(a,f)&&(Ds(a[f])&&(!v1(t.properties[f])||As.IsExactOptionalProperty(a,f))||(a[f]=Wh(t.properties[f],e,`${r}/${f}`,a[f])));if(!sa(t.additionalProperties))return a;let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=Zl(l,`${r}/${f}`,u[f]));return u}s(Nvt,"FromObject");function Lvt(t,e,r,n){let i=Zl(t,r,n);if(!Ei(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),c={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(c[p]=Wh(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!sa(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,f={...c};for(let p of l)a.test(p)||(f[p]=Zl(u,`${r}/${p}`,f[p]));return f}s(Lvt,"FromRecord");function Mvt(t,e,r,n){let i=fo(t,e),o=Wh(i,e,r,n);return Zl(t,r,o)}s(Mvt,"FromRef");function Fvt(t,e,r,n){let i=fo(t,e),o=Wh(i,e,r,n);return Zl(t,r,o)}s(Fvt,"FromThis");function Ovt(t,e,r,n){let i=Zl(t,r,n);return bn(t.items)?t.items.map((o,a)=>Wh(o,e,`${r}/${a}`,i[a])):[]}s(Ovt,"FromTuple");function Qvt(t,e,r,n){for(let i of t.anyOf){if(!Ii(i,e,n))continue;let o=Wh(i,e,r,n);return Zl(t,r,o)}for(let i of t.anyOf){let o=Wh(i,e,r,n);if(Ii(t,e,o))return Zl(t,r,o)}return Zl(t,r,n)}s(Qvt,"FromUnion");function Wh(t,e,r,n){let i=Al(t,e),o=t;switch(t[et]){case"Array":return kvt(o,i,r,n);case"Import":return Pvt(o,i,r,n);case"Intersect":return Bvt(o,i,r,n);case"Not":return Dvt(o,i,r,n);case"Object":return Nvt(o,i,r,n);case"Record":return Lvt(o,i,r,n);case"Ref":return Mvt(o,i,r,n);case"This":return Fvt(o,i,r,n);case"Tuple":return Ovt(o,i,r,n);case"Union":return Qvt(o,i,r,n);default:return Zl(o,r,n)}}s(Wh,"Visit");function i4(t,e,r){return Wh(t,e,"",r)}s(i4,"TransformEncode");d();function Uvt(t,e){return Io(t)||zc(t.items,e)}s(Uvt,"FromArray");function qvt(t,e){return Io(t)||zc(t.items,e)}s(qvt,"FromAsyncIterator");function Hvt(t,e){return Io(t)||zc(t.returns,e)||t.parameters.some(r=>zc(r,e))}s(Hvt,"FromConstructor");function Wvt(t,e){return Io(t)||zc(t.returns,e)||t.parameters.some(r=>zc(r,e))}s(Wvt,"FromFunction");function Gvt(t,e){return Io(t)||Io(t.unevaluatedProperties)||t.allOf.some(r=>zc(r,e))}s(Gvt,"FromIntersect");function jvt(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return Io(t)||zc(n,[...r,...e])}s(jvt,"FromImport");function Vvt(t,e){return Io(t)||zc(t.items,e)}s(Vvt,"FromIterator");function $vt(t,e){return Io(t)||zc(t.not,e)}s($vt,"FromNot");function zvt(t,e){return Io(t)||Object.values(t.properties).some(r=>zc(r,e))||sa(t.additionalProperties)&&zc(t.additionalProperties,e)}s(zvt,"FromObject");function Yvt(t,e){return Io(t)||zc(t.item,e)}s(Yvt,"FromPromise");function Kvt(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return Io(t)||zc(n,e)||sa(t.additionalProperties)&&Io(t.additionalProperties)}s(Kvt,"FromRecord");function Jvt(t,e){return Io(t)?!0:zc(fo(t,e),e)}s(Jvt,"FromRef");function Xvt(t,e){return Io(t)?!0:zc(fo(t,e),e)}s(Xvt,"FromThis");function Zvt(t,e){return Io(t)||!Ds(t.items)&&t.items.some(r=>zc(r,e))}s(Zvt,"FromTuple");function ext(t,e){return Io(t)||t.anyOf.some(r=>zc(r,e))}s(ext,"FromUnion");function zc(t,e){let r=Al(t,e),n=t;if(t.$id&&pce.has(t.$id))return!1;switch(t.$id&&pce.add(t.$id),t[et]){case"Array":return Uvt(n,r);case"AsyncIterator":return qvt(n,r);case"Constructor":return Hvt(n,r);case"Function":return Wvt(n,r);case"Import":return jvt(n,r);case"Intersect":return Gvt(n,r);case"Iterator":return Vvt(n,r);case"Not":return $vt(n,r);case"Object":return zvt(n,r);case"Promise":return Yvt(n,r);case"Record":return Kvt(n,r);case"Ref":return Jvt(n,r);case"This":return Xvt(n,r);case"Tuple":return Zvt(n,r);case"Union":return ext(n,r);default:return Io(t)}}s(zc,"Visit");var pce=new Set;function _1(t,e){return pce.clear(),zc(t,e)}s(_1,"HasTransform");var mce=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=_1(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return YA(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new t4(this.schema,e,this.Errors(e).First());return this.hasTransform?r4(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?i4(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new n4(this.schema,e,this.Errors(e).First());return r}},S1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(S1||(S1={}));var MH;(function(t){function e(o){return o.length===0?!1:S1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let c=o.charCodeAt(a);if(!(S1.IsAlpha(c)||S1.IsNumeric(c)||S1.DollarSign(c)||S1.IsUnderscore(c)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(MH||(MH={}));var hce;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);S1.IsNumeric(o)||S1.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(hce||(hce={}));var gce;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(gce||(gce={}));var Ace=class extends In{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},FH=class extends In{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},p_;(function(t){function e(a,c,l){return As.ExactOptionalPropertyTypes?`('${c}' in ${a} ? ${l} : true)`:`(${MH.Encode(a,c)} !== undefined ? ${l} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return As.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return As.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return As.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return As.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(p_||(p_={}));var Ms;(function(t){function e(de){return de[et]==="Any"||de[et]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(de,Ue,ye){yield"true"}s(r,"FromAny");function*n(de,Ue,ye){yield"true"}s(n,"FromArgument");function*i(de,Ue,ye){yield`Array.isArray(${ye})`;let[nt,te]=[Fe("value","any"),Fe("acc","number")];Gr(de.maxItems)&&(yield`${ye}.length <= ${de.maxItems}`),Gr(de.minItems)&&(yield`${ye}.length >= ${de.minItems}`);let oe=he(de.items,Ue,"value");if(yield`${ye}.every((${nt}) => ${oe})`,Ls(de.contains)||Gr(de.minContains)||Gr(de.maxContains)){let We=Ls(de.contains)?de.contains:pi(),De=he(We,Ue,"value"),xe=Gr(de.minContains)?[`(count >= ${de.minContains})`]:[],Ye=Gr(de.maxContains)?[`(count <= ${de.maxContains})`]:[],st=`const count = value.reduce((${te}, ${nt}) => ${De} ? acc + 1 : acc, 0)`,yt=["(count > 0)",...xe,...Ye].join(" && ");yield`((${nt}) => { ${st}; return ${yt}})(${ye})`}de.uniqueItems===!0&&(yield`((${nt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(de,Ue,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(de,Ue,ye){yield`(typeof ${ye} === 'bigint')`,Jl(de.exclusiveMaximum)&&(yield`${ye} < BigInt(${de.exclusiveMaximum})`),Jl(de.exclusiveMinimum)&&(yield`${ye} > BigInt(${de.exclusiveMinimum})`),Jl(de.maximum)&&(yield`${ye} <= BigInt(${de.maximum})`),Jl(de.minimum)&&(yield`${ye} >= BigInt(${de.minimum})`),Jl(de.multipleOf)&&(yield`(${ye} % BigInt(${de.multipleOf})) === 0`)}s(a,"FromBigInt");function*c(de,Ue,ye){yield`(typeof ${ye} === 'boolean')`}s(c,"FromBoolean");function*l(de,Ue,ye){yield*ne(de.returns,Ue,`${ye}.prototype`)}s(l,"FromConstructor");function*u(de,Ue,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,Gr(de.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${de.exclusiveMaximumTimestamp}`),Gr(de.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${de.exclusiveMinimumTimestamp}`),Gr(de.maximumTimestamp)&&(yield`${ye}.getTime() <= ${de.maximumTimestamp}`),Gr(de.minimumTimestamp)&&(yield`${ye}.getTime() >= ${de.minimumTimestamp}`),Gr(de.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${de.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*f(de,Ue,ye){yield`(typeof ${ye} === 'function')`}s(f,"FromFunction");function*p(de,Ue,ye){let nt=globalThis.Object.getOwnPropertyNames(de.$defs).reduce((te,oe)=>[...te,de.$defs[oe]],[]);yield*ne(Gp(de.$ref),[...Ue,...nt],ye)}s(p,"FromImport");function*m(de,Ue,ye){yield`Number.isInteger(${ye})`,Gr(de.exclusiveMaximum)&&(yield`${ye} < ${de.exclusiveMaximum}`),Gr(de.exclusiveMinimum)&&(yield`${ye} > ${de.exclusiveMinimum}`),Gr(de.maximum)&&(yield`${ye} <= ${de.maximum}`),Gr(de.minimum)&&(yield`${ye} >= ${de.minimum}`),Gr(de.multipleOf)&&(yield`(${ye} % ${de.multipleOf}) === 0`)}s(m,"FromInteger");function*h(de,Ue,ye){let nt=de.allOf.map(te=>he(te,Ue,ye)).join(" && ");if(de.unevaluatedProperties===!1){let te=ke(`${new RegExp(I1(de))};`),oe=`Object.getOwnPropertyNames(${ye}).every(key => ${te}.test(key))`;yield`(${nt} && ${oe})`}else if(Ls(de.unevaluatedProperties)){let te=ke(`${new RegExp(I1(de))};`),oe=`Object.getOwnPropertyNames(${ye}).every(key => ${te}.test(key) || ${he(de.unevaluatedProperties,Ue,`${ye}[key]`)})`;yield`(${nt} && ${oe})`}else yield`(${nt})`}s(h,"FromIntersect");function*g(de,Ue,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(de,Ue,ye){typeof de.const=="number"||typeof de.const=="boolean"?yield`(${ye} === ${de.const})`:yield`(${ye} === '${gce.Escape(de.const)}')`}s(y,"FromLiteral");function*E(de,Ue,ye){yield"false"}s(E,"FromNever");function*x(de,Ue,ye){yield`(!${he(de.not,Ue,ye)})`}s(x,"FromNot");function*b(de,Ue,ye){yield`(${ye} === null)`}s(b,"FromNull");function*_(de,Ue,ye){yield p_.IsNumberLike(ye),Gr(de.exclusiveMaximum)&&(yield`${ye} < ${de.exclusiveMaximum}`),Gr(de.exclusiveMinimum)&&(yield`${ye} > ${de.exclusiveMinimum}`),Gr(de.maximum)&&(yield`${ye} <= ${de.maximum}`),Gr(de.minimum)&&(yield`${ye} >= ${de.minimum}`),Gr(de.multipleOf)&&(yield`(${ye} % ${de.multipleOf}) === 0`)}s(_,"FromNumber");function*k(de,Ue,ye){yield p_.IsObjectLike(ye),Gr(de.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${de.minProperties}`),Gr(de.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${de.maxProperties}`);let nt=Object.getOwnPropertyNames(de.properties);for(let te of nt){let oe=MH.Encode(ye,te),We=de.properties[te];if(de.required&&de.required.includes(te))yield*ne(We,Ue,oe),(T1(We)||e(We))&&(yield`('${te}' in ${ye})`);else{let De=he(We,Ue,oe);yield p_.IsExactOptionalProperty(ye,te,De)}}if(de.additionalProperties===!1)if(de.required&&de.required.length===nt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${nt.length}`;else{let te=`[${nt.map(oe=>`'${oe}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${te}.includes(key))`}if(typeof de.additionalProperties=="object"){let te=he(de.additionalProperties,Ue,`${ye}[key]`),oe=`[${nt.map(We=>`'${We}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${oe}.includes(key) || ${te}))`}}s(k,"FromObject");function*P(de,Ue,ye){yield`${ye} instanceof Promise`}s(P,"FromPromise");function*N(de,Ue,ye){yield p_.IsRecordLike(ye),Gr(de.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${de.minProperties}`),Gr(de.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${de.maxProperties}`);let[nt,te]=Object.entries(de.patternProperties)[0],oe=ke(`${new RegExp(nt)}`),We=he(te,Ue,"value"),De=Ls(de.additionalProperties)?he(de.additionalProperties,Ue,ye):de.additionalProperties===!1?"false":"true",xe=`(${oe}.test(key) ? ${We} : ${De})`;yield`(Object.entries(${ye}).every(([key, value]) => ${xe}))`}s(N,"FromRecord");function*M(de,Ue,ye){let nt=fo(de,Ue);if(me.functions.has(de.$ref))return yield`${Qe(de.$ref)}(${ye})`;yield*ne(nt,Ue,ye)}s(M,"FromRef");function*J(de,Ue,ye){let nt=ke(`${new RegExp(de.source,de.flags)};`);yield`(typeof ${ye} === 'string')`,Gr(de.maxLength)&&(yield`${ye}.length <= ${de.maxLength}`),Gr(de.minLength)&&(yield`${ye}.length >= ${de.minLength}`),yield`${nt}.test(${ye})`}s(J,"FromRegExp");function*se(de,Ue,ye){yield`(typeof ${ye} === 'string')`,Gr(de.maxLength)&&(yield`${ye}.length <= ${de.maxLength}`),Gr(de.minLength)&&(yield`${ye}.length >= ${de.minLength}`),de.pattern!==void 0&&(yield`${ke(`${new RegExp(de.pattern)};`)}.test(${ye})`),de.format!==void 0&&(yield`format('${de.format}', ${ye})`)}s(se,"FromString");function*K(de,Ue,ye){yield`(typeof ${ye} === 'symbol')`}s(K,"FromSymbol");function*G(de,Ue,ye){yield`(typeof ${ye} === 'string')`,yield`${ke(`${new RegExp(de.pattern)};`)}.test(${ye})`}s(G,"FromTemplateLiteral");function*q(de,Ue,ye){yield`${Qe(de.$ref)}(${ye})`}s(q,"FromThis");function*le(de,Ue,ye){if(yield`Array.isArray(${ye})`,de.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${de.maxItems})`;for(let nt=0;nt<de.items.length;nt++)yield`${he(de.items[nt],Ue,`${ye}[${nt}]`)}`}s(le,"FromTuple");function*ie(de,Ue,ye){yield`${ye} === undefined`}s(ie,"FromUndefined");function*V(de,Ue,ye){yield`(${de.anyOf.map(te=>he(te,Ue,ye)).join(" || ")})`}s(V,"FromUnion");function*H(de,Ue,ye){yield`${ye} instanceof Uint8Array`,Gr(de.maxByteLength)&&(yield`(${ye}.length <= ${de.maxByteLength})`),Gr(de.minByteLength)&&(yield`(${ye}.length >= ${de.minByteLength})`)}s(H,"FromUint8Array");function*z(de,Ue,ye){yield"true"}s(z,"FromUnknown");function*X(de,Ue,ye){yield p_.IsVoidLike(ye)}s(X,"FromVoid");function*ue(de,Ue,ye){let nt=me.instances.size;me.instances.set(nt,de),yield`kind('${de[et]}', ${nt}, ${ye})`}s(ue,"FromKind");function*ne(de,Ue,ye,nt=!0){let te=ro(de.$id)?[...Ue,de]:Ue,oe=de;if(nt&&ro(de.$id)){let We=Qe(de.$id);if(me.functions.has(We))return yield`${We}(${ye})`;{me.functions.set(We,"<deferred>");let De=tt(We,de,Ue,"value",!1);return me.functions.set(We,De),yield`${We}(${ye})`}}switch(oe[et]){case"Any":return yield*r(oe,te,ye);case"Argument":return yield*n(oe,te,ye);case"Array":return yield*i(oe,te,ye);case"AsyncIterator":return yield*o(oe,te,ye);case"BigInt":return yield*a(oe,te,ye);case"Boolean":return yield*c(oe,te,ye);case"Constructor":return yield*l(oe,te,ye);case"Date":return yield*u(oe,te,ye);case"Function":return yield*f(oe,te,ye);case"Import":return yield*p(oe,te,ye);case"Integer":return yield*m(oe,te,ye);case"Intersect":return yield*h(oe,te,ye);case"Iterator":return yield*g(oe,te,ye);case"Literal":return yield*y(oe,te,ye);case"Never":return yield*E(oe,te,ye);case"Not":return yield*x(oe,te,ye);case"Null":return yield*b(oe,te,ye);case"Number":return yield*_(oe,te,ye);case"Object":return yield*k(oe,te,ye);case"Promise":return yield*P(oe,te,ye);case"Record":return yield*N(oe,te,ye);case"Ref":return yield*M(oe,te,ye);case"RegExp":return yield*J(oe,te,ye);case"String":return yield*se(oe,te,ye);case"Symbol":return yield*K(oe,te,ye);case"TemplateLiteral":return yield*G(oe,te,ye);case"This":return yield*q(oe,te,ye);case"Tuple":return yield*le(oe,te,ye);case"Undefined":return yield*ie(oe,te,ye);case"Union":return yield*V(oe,te,ye);case"Uint8Array":return yield*H(oe,te,ye);case"Unknown":return yield*z(oe,te,ye);case"Void":return yield*X(oe,te,ye);default:if(!yd.Has(oe[et]))throw new Ace(de);return yield*ue(oe,te,ye)}}s(ne,"Visit");let me={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function he(de,Ue,ye,nt=!0){return`(${[...ne(de,Ue,ye,nt)].join(" && ")})`}s(he,"CreateExpression");function Qe(de){return`check_${hce.Encode(de)}`}s(Qe,"CreateFunctionName");function ke(de){let Ue=`local_${me.variables.size}`;return me.variables.set(Ue,`const ${Ue} = ${de}`),Ue}s(ke,"CreateVariable");function tt(de,Ue,ye,nt,te=!0){let[oe,We]=[`
`,st=>"".padStart(st," ")],De=Fe("value","any"),xe=ht("boolean"),Ye=[...ne(Ue,ye,nt,te)].map(st=>`${We(4)}${st}`).join(` &&${oe}`);return`function ${de}(${De})${xe} {${oe}${We(2)}return (${oe}${Ye}${oe}${We(2)})
}`}s(tt,"CreateFunction");function Fe(de,Ue){let ye=me.language==="typescript"?`: ${Ue}`:"";return`${de}${ye}`}s(Fe,"CreateParameter");function ht(de){return me.language==="typescript"?`: ${de}`:""}s(ht,"CreateReturns");function St(de,Ue,ye){let nt=tt("check",de,Ue,"value"),te=Fe("value","any"),oe=ht("boolean"),We=[...me.functions.values()],De=[...me.variables.values()],xe=ro(de.$id)?`return function check(${te})${oe} {
  return ${Qe(de.$id)}(value)
}`:`return ${nt}`;return[...De,...We,xe].join(`
`)}s(St,"Build");function vt(...de){let Ue={language:"javascript"},[ye,nt,te]=de.length===2&&bn(de[1])?[de[0],de[1],Ue]:de.length===2&&!bn(de[1])?[de[0],[],de[1]]:de.length===3?[de[0],de[1],de[2]]:de.length===1?[de[0],[],Ue]:[null,[],Ue];if(me.language=te.language,me.variables.clear(),me.functions.clear(),me.instances.clear(),!Ls(ye))throw new FH(ye);for(let oe of nt)if(!Ls(oe))throw new FH(oe);return St(ye,nt,te)}s(vt,"Code"),t.Code=vt;function It(de,Ue=[]){let ye=vt(de,Ue,{language:"javascript"}),nt=globalThis.Function("kind","format","hash",ye),te=new Map(me.instances);function oe(Ye,st,yt){if(!yd.Has(Ye)||!te.has(st))return!1;let qt=yd.Get(Ye),dr=te.get(st);return qt(dr,yt)}s(oe,"typeRegistryFunction");function We(Ye,st){return Oh.Has(Ye)?Oh.Get(Ye)(st):!1}s(We,"formatRegistryFunction");function De(Ye){return Zx(Ye)}s(De,"hashFunction");let xe=nt(oe,We,De);return new mce(de,Ue,xe,ye)}s(It,"Compile"),t.Compile=It})(Ms||(Ms={}));var wW=Ne(Gx());d();d();var eu=[];for(let t=0;t<256;++t)eu.push((t+256).toString(16).slice(1));function Gke(t,e=0){return(eu[t[e+0]]+eu[t[e+1]]+eu[t[e+2]]+eu[t[e+3]]+"-"+eu[t[e+4]]+eu[t[e+5]]+"-"+eu[t[e+6]]+eu[t[e+7]]+"-"+eu[t[e+8]]+eu[t[e+9]]+"-"+eu[t[e+10]]+eu[t[e+11]]+eu[t[e+12]]+eu[t[e+13]]+eu[t[e+14]]+eu[t[e+15]]).toLowerCase()}s(Gke,"unsafeStringify");d();var jke=require("crypto");var QH=new Uint8Array(256),OH=QH.length;function yce(){return OH>QH.length-16&&((0,jke.randomFillSync)(QH),OH=0),QH.slice(OH,OH+=16)}s(yce,"rng");d();d();var Vke=require("crypto"),Cce={randomUUID:Vke.randomUUID};function txt(t,e,r){if(Cce.randomUUID&&!e&&!t)return Cce.randomUUID();t=t||{};let n=t.random??t.rng?.()??yce();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Gke(n)}s(txt,"v4");var cr=txt;var _W=Ne(mi());function I4(t){return t===1}s(I4,"isRestricted");var obt=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],F6=8192,sbt=21;var vl=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return I4(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(w4(e))return this.reporterRestricted;if(Pk(e))return new l6}getFTReporter(e){if(xBe(e))return this.reporterFT;if(Pk(e))return new l6}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},abt=I.Object({},{additionalProperties:I.String()}),cbt=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),lbt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function ubt(t){return lbt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(ubt,"isOomError");function dbt(t){return a6(t)?"network":ubt(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(dbt,"getErrorType");var dn=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=Ms.Compile(abt)}static{this.validateTelemetryMeasurements=Ms.Compile(cbt)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},la())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=la())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Bt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=HA(e.get(rn).getEditorInfo()),this.properties.editor_plugin_version=HA(e.get(rn).getEditorPluginInfo());let r=e.get(gs);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${E_(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(rn);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=HA(n.getEditorInfo());let i=e.get(ai);this.properties.fetcher=i.name;let o=e.get(ru).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=_Be(e);r["copilot.build"]=SBe(e),r["copilot.buildType"]=ey(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(I4(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>F6){let a=0,c=0;for(;o>0&&c<sbt;){c+=1;let l=n;c>1&&(l=n+"_"+(c<10?"0":"")+c);let u=a+F6;o<F6&&(u=a+o),r[l]=i.slice(a,u),o-=F6,a+=F6}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=mbt(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(Pk(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return C_(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),I4(r)&&C_(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,bBe(e))}},ZA=class t extends dn{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new t_({}),exp:Mp.createEmptyConfig()})}};function O6(t,e,r,n){t.get(vl).getReporter(t,e)?.sendTelemetryEvent(r,dn.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(O6,"sendTelemetryEvent");function fbt(t,e,r,n){t.get(vl).getReporter(t,e)?.sendTelemetryErrorEvent(r,dn.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(fbt,"sendTelemetryErrorEvent");function pbt(t,e,r,n){t.get(vl).getFTReporter(t)?.sendTelemetryEvent(r,dn.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(pbt,"sendFTTelemetryEvent");function T4(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(T4,"telemetrizePromptLength");function la(){return performance.now()}s(la,"now");function mbt(t){return Math.floor(t/1e3)}s(mbt,"nowSeconds");function w4(t){return t.get(Kl).optedIn}s(w4,"shouldSendRestricted");function xBe(t){return t.get(Kl).ftFlag!==""}s(xBe,"shouldSendFinetuningTelemetry");function Dt(t,e,r,n){return t.get(Xa).register(hbt(t,e,la(),r?.extendedBy(),n))}s(Dt,"telemetry");async function hbt(t,e,r,n,i=0){let o=n||dn.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!I4(i)||w4(t))&&O6(t,i,e,o),I4(i)&&obt.includes(e)&&xBe(t)&&pbt(t,i,e,o)}s(hbt,"_telemetry");function yq(t,e){return t.get(Xa).register(gbt(t,e,la()))}s(yq,"telemetryExpProblem");async function gbt(t,e,r){let n="expProblem",i=dn.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),O6(t,0,n,i)}s(gbt,"_telemetryExpProblem");function zle(t,e,r,n){return t.get(Xa).register(Abt(t,e,r,n))}s(zle,"telemetryRaw");async function Abt(t,e,r,n){let i={...r,...bBe(t)};O6(t,0,e,{properties:i,measurements:n})}s(Abt,"_telemetryRaw");function bBe(t){let e=t.get(rn),r={unique_id:cr(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:HA(e.getEditorInfo())},n=t.get(Kl);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(bBe,"createRequiredProperties");var $le=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,wW.SHA256)(wW.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function rc(t,e,r,n,i){return t.get(Xa).register(IBe(t,e,la(),r,{...n},i))}s(rc,"telemetryException");async function IBe(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Du(a)||a instanceof Ps||a instanceof _W.ConnectionError||a instanceof _W.ResponseError)return}else{if(a=new $le(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let c=t.get(rn).getEditorInfo(),l;c.root&&(l=[{prefix:`${c.name}:`,path:c.root}]);let u=w4(t),f=wRe(a,l,u),p=dbt(a),m=p==="exception",h=dn.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:f.stack||f.toString(),message:f.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=xae(y.value):y.value="[redacted]");if(o??=mRe(t,f),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=TRe(a,l),E=dn.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(E.properties.errno=o.rollup_id),await E.makeReadyForSending(t,1,"IncludeExp",r),E.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=E.properties.unique_id,O6(t,1,`error.${p}`,E)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(WA).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),O6(t,0,`error.${p}`,h)}s(IBe,"_telemetryException");function Hu(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await IBe(t,a,la(),r,n)}},"wrapped");return(...o)=>t.get(Xa).register(i(...o))}s(Hu,"telemetryCatch");function C_(t,e,r,n){return t.get(Xa).register(ybt(t,e,la(),r?.extendedBy(),n))}s(C_,"telemetryError");async function ybt(t,e,r,n,i=0){if(I4(i)&&!w4(t))return;let o=n||dn.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),fbt(t,i,e,o)}s(ybt,"_telemetryError");function TBe(t,e,r,n,i){let o=dn.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,c]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(c)??"unset";return o.extendWithRequestId(n),Dt(t,"engine.completion",o,1)}s(TBe,"logEngineCompletion");function wBe(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Dt(t,"engine.prompt",i,1)}s(wBe,"logEnginePrompt");d();d();var RBe=Ne(mi()),kBe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),Yle;(r=>(r.method="github/didChangeAuth",r.type=new RBe.ProtocolNotificationType(r.method)))(Yle||={});d();var PBe=Ne(mi()),Kle;(r=>(r.method="copilot/ipCodeCitation",r.type=new PBe.NotificationType(r.method)))(Kle||={});d();var BBe=Ne(mi()),SW;(r=>(r.method="context/update",r.type=new BBe.ProtocolRequestType(r.method)))(SW||={});d();d();var ub="Cancelled";d();var fn=Ne(mi()),Q6=I.String(),gf=I.Object({uri:Q6}),v_=I.Intersect([gf,I.Object({version:I.Optional(I.Integer())})]),iNr=I.Required(v_),xl=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),nc=I.Object({start:xl,end:xl}),Jle=I.Union([I.Integer(),I.String()]),oNr=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});d();var DBe=Ne(mi()),Xle;(r=>(r.method="textDocument/didFocus",r.type=new DBe.ProtocolNotificationType(r.method)))(Xle||={});d();var Cbt=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean()}),Ebt=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),NBe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),LBe=I.Object({editorInfo:I.Optional(NBe),editorPluginInfo:I.Optional(NBe),relatedPluginInfo:I.Optional(I.Array(Ebt)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(Cbt)),githubAppId:I.Optional(I.String())});d();var U6=Ne(mi());var RW=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(RW||{}),vbt=I.Enum(RW),xbt=I.Object({triggerKind:vbt,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:nc,tooltipSignature:I.Optional(I.String())}))}),MBe=I.Object({textDocument:v_,position:xl,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:xbt,data:I.Optional(I.Unknown())}),Zle;(r=>(r.method="textDocument/inlineCompletion",r.type=new U6.ProtocolRequestType(r.method)))(Zle||={});var FBe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),OBe=I.Object({item:FBe}),eue;(r=>(r.method="textDocument/didShowCompletion",r.type=new U6.ProtocolNotificationType(r.method)))(eue||={});var QBe=I.Object({item:FBe,acceptedLength:I.Integer({minimum:1})}),tue;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new U6.ProtocolNotificationType(r.method)))(tue||={});d();var UBe=Ne(mi()),rue;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new UBe.ProtocolRequestType(r.method)))(rue||={});d();var qBe=Ne(mi()),HBe=I.Object({textDocument:v_,position:xl}),bbt=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),WBe=I.Object({item:bbt}),nue;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new qBe.ProtocolNotificationType(r.method)))(nue||={});d();var kW=Ne(mi());var GBe=I.Object({textDocument:v_,position:xl,partialResultToken:I.Optional(Jle),workDoneToken:I.Optional(Jle)}),PW;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new kW.ProtocolRequestType(n.method),n.partialResult=new kW.ProgressType))(PW||={});d();var jBe=Ne(mi()),iue;(r=>(r.method="copilot/related",r.type=new jBe.ProtocolRequestType(r.method)))(iue||={});d();var VBe=Ne(mi()),oue;(r=>(r.method="statusNotification",r.type=new VBe.ProtocolNotificationType(r.method)))(oue||={});var $Be=Ne(require("events"));var Vh=class{static{s(this,"CopilotTokenNotifier")}#e=new $Be.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=Hu(e,n,`event.${r}`);return this.#e.on(r,i),fn.Disposable.create(()=>this.#e.off(r,i))}};function ia(t,e){return t.get(Vh).on(t,"CopilotToken",e)}s(ia,"onCopilotToken");function q6(t,e){return t.get(Vh).emitToken(e)}s(q6,"emitCopilotToken");function zBe(t){return t.get(Vh).lastToken}s(zBe,"getLastCopilotToken");d();var BW=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};d();function sue(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(sue,"findKnownOrg");function YBe(t){let e=t.organization_list??[];return sue(e)??""}s(YBe,"getUserKind");d();d();var x_=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(x_||{}),Tc=class{static{s(this,"LogTarget")}},ty=class{static{s(this,"TelemetryLogSender")}},wt=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(Tc).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(ty).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(ty).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},pn=new wt("default");d();var wc=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){return this.showWarningMessage(r,...n)}};d();var nu=class{static{s(this,"UrlOpener")}};var Ibt=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],KBe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",JBe="https://gh.io/copilot-network-errors",Ed=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&Ibt.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new wt("certificates").error(e,`${KBe} Please visit ${JBe} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(wc).showWarningMessage(KBe,n).then(i=>{if(i?.title===n.title)return e.get(nu).open(JBe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};d();d();function DW(){return typeof process>"u"}s(DW,"isWeb");var aue=class extends UA{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Yp(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...DW()?{}:Rh(t),...n.headers}};let i=await t.get(ai).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new UA(i);if(!i.headers.get("x-github-request-id"))throw new aue(i);return i}s(Yp,"apiFetch");d();d();var eDe=require("os"),NW=require("path");d();var XBe;(()=>{"use strict";var t={975:G=>{function q(V){if(typeof V!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(V))}s(q,"e");function le(V,H){for(var z,X="",ue=0,ne=-1,me=0,he=0;he<=V.length;++he){if(he<V.length)z=V.charCodeAt(he);else{if(z===47)break;z=47}if(z===47){if(!(ne===he-1||me===1))if(ne!==he-1&&me===2){if(X.length<2||ue!==2||X.charCodeAt(X.length-1)!==46||X.charCodeAt(X.length-2)!==46){if(X.length>2){var Qe=X.lastIndexOf("/");if(Qe!==X.length-1){Qe===-1?(X="",ue=0):ue=(X=X.slice(0,Qe)).length-1-X.lastIndexOf("/"),ne=he,me=0;continue}}else if(X.length===2||X.length===1){X="",ue=0,ne=he,me=0;continue}}H&&(X.length>0?X+="/..":X="..",ue=2)}else X.length>0?X+="/"+V.slice(ne+1,he):X=V.slice(ne+1,he),ue=he-ne-1;ne=he,me=0}else z===46&&me!==-1?++me:me=-1}return X}s(le,"r");var ie={resolve:s(function(){for(var V,H="",z=!1,X=arguments.length-1;X>=-1&&!z;X--){var ue;X>=0?ue=arguments[X]:(V===void 0&&(V=process.cwd()),ue=V),q(ue),ue.length!==0&&(H=ue+"/"+H,z=ue.charCodeAt(0)===47)}return H=le(H,!z),z?H.length>0?"/"+H:"/":H.length>0?H:"."},"resolve"),normalize:s(function(V){if(q(V),V.length===0)return".";var H=V.charCodeAt(0)===47,z=V.charCodeAt(V.length-1)===47;return(V=le(V,!H)).length!==0||H||(V="."),V.length>0&&z&&(V+="/"),H?"/"+V:V},"normalize"),isAbsolute:s(function(V){return q(V),V.length>0&&V.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var V,H=0;H<arguments.length;++H){var z=arguments[H];q(z),z.length>0&&(V===void 0?V=z:V+="/"+z)}return V===void 0?".":ie.normalize(V)},"join"),relative:s(function(V,H){if(q(V),q(H),V===H||(V=ie.resolve(V))===(H=ie.resolve(H)))return"";for(var z=1;z<V.length&&V.charCodeAt(z)===47;++z);for(var X=V.length,ue=X-z,ne=1;ne<H.length&&H.charCodeAt(ne)===47;++ne);for(var me=H.length-ne,he=ue<me?ue:me,Qe=-1,ke=0;ke<=he;++ke){if(ke===he){if(me>he){if(H.charCodeAt(ne+ke)===47)return H.slice(ne+ke+1);if(ke===0)return H.slice(ne+ke)}else ue>he&&(V.charCodeAt(z+ke)===47?Qe=ke:ke===0&&(Qe=0));break}var tt=V.charCodeAt(z+ke);if(tt!==H.charCodeAt(ne+ke))break;tt===47&&(Qe=ke)}var Fe="";for(ke=z+Qe+1;ke<=X;++ke)ke!==X&&V.charCodeAt(ke)!==47||(Fe.length===0?Fe+="..":Fe+="/..");return Fe.length>0?Fe+H.slice(ne+Qe):(ne+=Qe,H.charCodeAt(ne)===47&&++ne,H.slice(ne))},"relative"),_makeLong:s(function(V){return V},"_makeLong"),dirname:s(function(V){if(q(V),V.length===0)return".";for(var H=V.charCodeAt(0),z=H===47,X=-1,ue=!0,ne=V.length-1;ne>=1;--ne)if((H=V.charCodeAt(ne))===47){if(!ue){X=ne;break}}else ue=!1;return X===-1?z?"/":".":z&&X===1?"//":V.slice(0,X)},"dirname"),basename:s(function(V,H){if(H!==void 0&&typeof H!="string")throw new TypeError('"ext" argument must be a string');q(V);var z,X=0,ue=-1,ne=!0;if(H!==void 0&&H.length>0&&H.length<=V.length){if(H.length===V.length&&H===V)return"";var me=H.length-1,he=-1;for(z=V.length-1;z>=0;--z){var Qe=V.charCodeAt(z);if(Qe===47){if(!ne){X=z+1;break}}else he===-1&&(ne=!1,he=z+1),me>=0&&(Qe===H.charCodeAt(me)?--me==-1&&(ue=z):(me=-1,ue=he))}return X===ue?ue=he:ue===-1&&(ue=V.length),V.slice(X,ue)}for(z=V.length-1;z>=0;--z)if(V.charCodeAt(z)===47){if(!ne){X=z+1;break}}else ue===-1&&(ne=!1,ue=z+1);return ue===-1?"":V.slice(X,ue)},"basename"),extname:s(function(V){q(V);for(var H=-1,z=0,X=-1,ue=!0,ne=0,me=V.length-1;me>=0;--me){var he=V.charCodeAt(me);if(he!==47)X===-1&&(ue=!1,X=me+1),he===46?H===-1?H=me:ne!==1&&(ne=1):H!==-1&&(ne=-1);else if(!ue){z=me+1;break}}return H===-1||X===-1||ne===0||ne===1&&H===X-1&&H===z+1?"":V.slice(H,X)},"extname"),format:s(function(V){if(V===null||typeof V!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof V);return function(H,z){var X=z.dir||z.root,ue=z.base||(z.name||"")+(z.ext||"");return X?X===z.root?X+ue:X+"/"+ue:ue}(0,V)},"format"),parse:s(function(V){q(V);var H={root:"",dir:"",base:"",ext:"",name:""};if(V.length===0)return H;var z,X=V.charCodeAt(0),ue=X===47;ue?(H.root="/",z=1):z=0;for(var ne=-1,me=0,he=-1,Qe=!0,ke=V.length-1,tt=0;ke>=z;--ke)if((X=V.charCodeAt(ke))!==47)he===-1&&(Qe=!1,he=ke+1),X===46?ne===-1?ne=ke:tt!==1&&(tt=1):ne!==-1&&(tt=-1);else if(!Qe){me=ke+1;break}return ne===-1||he===-1||tt===0||tt===1&&ne===he-1&&ne===me+1?he!==-1&&(H.base=H.name=me===0&&ue?V.slice(1,he):V.slice(me,he)):(me===0&&ue?(H.name=V.slice(1,ne),H.base=V.slice(1,he)):(H.name=V.slice(me,ne),H.base=V.slice(me,he)),H.ext=V.slice(ne,he)),me>0?H.dir=V.slice(0,me-1):ue&&(H.dir="/"),H},"parse"),sep:"/",delimiter:":",win32:null,posix:null};ie.posix=ie,G.exports=ie}},e={};function r(G){var q=e[G];if(q!==void 0)return q.exports;var le=e[G]={exports:{}};return t[G](le,le.exports,r),le.exports}s(r,"r"),r.d=(G,q)=>{for(var le in q)r.o(q,le)&&!r.o(G,le)&&Object.defineProperty(G,le,{enumerable:!0,get:q[le]})},r.o=(G,q)=>Object.prototype.hasOwnProperty.call(G,q),r.r=G=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>K,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;function l(G,q){if(!G.scheme&&q)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${G.authority}", path: "${G.path}", query: "${G.query}", fragment: "${G.fragment}"}`);if(G.scheme&&!o.test(G.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(G.path){if(G.authority){if(!a.test(G.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(G.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(l,"a");let u="",f="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(q){return q instanceof m||!!q&&typeof q.authority=="string"&&typeof q.fragment=="string"&&typeof q.path=="string"&&typeof q.query=="string"&&typeof q.scheme=="string"&&typeof q.fsPath=="string"&&typeof q.with=="function"&&typeof q.toString=="function"}scheme;authority;path;query;fragment;constructor(q,le,ie,V,H,z=!1){typeof q=="object"?(this.scheme=q.scheme||u,this.authority=q.authority||u,this.path=q.path||u,this.query=q.query||u,this.fragment=q.fragment||u):(this.scheme=function(X,ue){return X||ue?X:"file"}(q,z),this.authority=le||u,this.path=function(X,ue){switch(X){case"https":case"http":case"file":ue?ue[0]!==f&&(ue=f+ue):ue=f}return ue}(this.scheme,ie||u),this.query=V||u,this.fragment=H||u,l(this,z))}get fsPath(){return b(this,!1)}with(q){if(!q)return this;let{scheme:le,authority:ie,path:V,query:H,fragment:z}=q;return le===void 0?le=this.scheme:le===null&&(le=u),ie===void 0?ie=this.authority:ie===null&&(ie=u),V===void 0?V=this.path:V===null&&(V=u),H===void 0?H=this.query:H===null&&(H=u),z===void 0?z=this.fragment:z===null&&(z=u),le===this.scheme&&ie===this.authority&&V===this.path&&H===this.query&&z===this.fragment?this:new g(le,ie,V,H,z)}static parse(q,le=!1){let ie=p.exec(q);return ie?new g(ie[2]||u,N(ie[4]||u),N(ie[5]||u),N(ie[7]||u),N(ie[9]||u),le):new g(u,u,u,u,u)}static file(q){let le=u;if(i&&(q=q.replace(/\\/g,f)),q[0]===f&&q[1]===f){let ie=q.indexOf(f,2);ie===-1?(le=q.substring(2),q=f):(le=q.substring(2,ie),q=q.substring(ie)||f)}return new g("file",le,q,u,u)}static from(q){let le=new g(q.scheme,q.authority,q.path,q.query,q.fragment);return l(le,!0),le}toString(q=!1){return _(this,q)}toJSON(){return this}static revive(q){if(q){if(q instanceof m)return q;{let le=new g(q);return le._formatted=q.external,le._fsPath=q._sep===h?q.fsPath:null,le}}return q}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(q=!1){return q?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let q={$mid:1};return this._fsPath&&(q.fsPath=this._fsPath,q._sep=h),this._formatted&&(q.external=this._formatted),this.path&&(q.path=this.path),this.scheme&&(q.scheme=this.scheme),this.authority&&(q.authority=this.authority),this.query&&(q.query=this.query),this.fragment&&(q.fragment=this.fragment),q}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function E(G,q,le){let ie,V=-1;for(let H=0;H<G.length;H++){let z=G.charCodeAt(H);if(z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===45||z===46||z===95||z===126||q&&z===47||le&&z===91||le&&z===93||le&&z===58)V!==-1&&(ie+=encodeURIComponent(G.substring(V,H)),V=-1),ie!==void 0&&(ie+=G.charAt(H));else{ie===void 0&&(ie=G.substr(0,H));let X=y[z];X!==void 0?(V!==-1&&(ie+=encodeURIComponent(G.substring(V,H)),V=-1),ie+=X):V===-1&&(V=H)}}return V!==-1&&(ie+=encodeURIComponent(G.substring(V))),ie!==void 0?ie:G}s(E,"m");function x(G){let q;for(let le=0;le<G.length;le++){let ie=G.charCodeAt(le);ie===35||ie===63?(q===void 0&&(q=G.substr(0,le)),q+=y[ie]):q!==void 0&&(q+=G[le])}return q!==void 0?q:G}s(x,"y");function b(G,q){let le;return le=G.authority&&G.path.length>1&&G.scheme==="file"?`//${G.authority}${G.path}`:G.path.charCodeAt(0)===47&&(G.path.charCodeAt(1)>=65&&G.path.charCodeAt(1)<=90||G.path.charCodeAt(1)>=97&&G.path.charCodeAt(1)<=122)&&G.path.charCodeAt(2)===58?q?G.path.substr(1):G.path[1].toLowerCase()+G.path.substr(2):G.path,i&&(le=le.replace(/\//g,"\\")),le}s(b,"v");function _(G,q){let le=q?x:E,ie="",{scheme:V,authority:H,path:z,query:X,fragment:ue}=G;if(V&&(ie+=V,ie+=":"),(H||V==="file")&&(ie+=f,ie+=f),H){let ne=H.indexOf("@");if(ne!==-1){let me=H.substr(0,ne);H=H.substr(ne+1),ne=me.lastIndexOf(":"),ne===-1?ie+=le(me,!1,!1):(ie+=le(me.substr(0,ne),!1,!1),ie+=":",ie+=le(me.substr(ne+1),!1,!0)),ie+="@"}H=H.toLowerCase(),ne=H.lastIndexOf(":"),ne===-1?ie+=le(H,!1,!0):(ie+=le(H.substr(0,ne),!1,!0),ie+=H.substr(ne))}if(z){if(z.length>=3&&z.charCodeAt(0)===47&&z.charCodeAt(2)===58){let ne=z.charCodeAt(1);ne>=65&&ne<=90&&(z=`/${String.fromCharCode(ne+32)}:${z.substr(3)}`)}else if(z.length>=2&&z.charCodeAt(1)===58){let ne=z.charCodeAt(0);ne>=65&&ne<=90&&(z=`${String.fromCharCode(ne+32)}:${z.substr(2)}`)}ie+=le(z,!0,!1)}return X&&(ie+="?",ie+=le(X,!1,!1)),ue&&(ie+="#",ie+=q?ue:E(ue,!1,!1)),ie}s(_,"b");function k(G){try{return decodeURIComponent(G)}catch{return G.length>3?G.substr(0,3)+k(G.substr(3)):G}}s(k,"C");let P=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(G){return G.match(P)?G.replace(P,q=>k(q)):G}s(N,"w");var M=r(975);let J=M.posix||M,se="/";var K;(function(G){G.joinPath=function(q,...le){return q.with({path:J.join(q.path,...le)})},G.resolvePath=function(q,...le){let ie=q.path,V=!1;ie[0]!==se&&(ie=se+ie,V=!0);let H=J.resolve(ie,...le);return V&&H[0]===se&&!q.authority&&(H=H.substring(1)),q.with({path:H})},G.dirname=function(q){if(q.path.length===0||q.path===se)return q;let le=J.dirname(q.path);return le.length===1&&le.charCodeAt(0)===46&&(le=""),q.with({path:le})},G.basename=function(q){return J.basename(q.path)},G.extname=function(q){return J.extname(q.path)}})(K||(K={})),XBe=n})();var{URI:db,Utils:H6}=XBe;function tDe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+tDe(t.substring(3)):t}}s(tDe,"decodeURIComponentGraceful");var ZBe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function cue(t){return t.match(ZBe)?t.replace(ZBe,e=>tDe(e)):t}s(cue,"percentDecode");function Yc(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return db.file(t).toString()}s(Yc,"makeFsUri");function b_(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?db.parse(e[1]+e[2],!0):db.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(b_,"parseUri");function rDe(t){return b_(t),t}s(rDe,"validateUri");function Kc(t){try{return b_(t).toString()}catch{return t}}s(Kc,"normalizeUri");var nDe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function La(t){let e=b_(t);if(!nDe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,eDe.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,NW.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(La,"fsPath");function Os(t){try{return La(t)}catch{return}}s(Os,"getFsPath");function iDe(t){let e=Os(t);if(e)return db.file(e).toString()}s(iDe,"getFsUri");function I_(t,...e){let r,n=Os(t);return n?r=Yc((0,NW.resolve)(n,...e)):r=H6.resolvePath(b_(t),...e.map(i=>oDe(i))).toString(),typeof t=="string"?r:{uri:r}}s(I_,"resolveFilePath");function $o(t,...e){let r=H6.joinPath(b_(t),...e.map(oDe)).toString();return typeof t=="string"?r:{uri:r}}s($o,"joinPath");function oDe(t){return Tbt(t)?t.replaceAll("\\","/"):t}s(oDe,"pathToURIPath");function Tbt(t){return/^[^/\\]*\\/.test(t)}s(Tbt,"isWinPath");function Oi(t){return cue((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Oi,"basename");function b0(t){let e=H6.dirname(b_(t)),r;return nDe.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(b0,"dirname");function sDe(t){return H6.extname(b_(t))}s(sDe,"extname");var vd=class{static{s(this,"NetworkConfiguration")}};function LW(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!uue(t)&&r.protocol==="http:")return r.href}catch{}}s(LW,"ensurePermittedUrl");var T_={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function lue(t,e,r){if(r&&kh(t)){for(let n of r){let i=vi(t,n);if(i)return i}return}for(let n of e){let i=vi(t,n);if(i)return i}}s(lue,"urlConfigOverride");function wbt(t,e){switch(e){case"api":return lue(t,[Rt.DebugOverrideCapiUrl,Rt.DebugOverrideCapiUrlLegacy],[Rt.DebugTestOverrideCapiUrl,Rt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return lue(t,[Rt.DebugOverrideProxyUrl,Rt.DebugOverrideProxyUrlLegacy],[Rt.DebugTestOverrideProxyUrl,Rt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!uue(t))return lue(t,[Rt.DebugSnippyOverrideUrl])}}s(wbt,"getEndpointOverrideUrl");function fb(t,e,r,...n){let i=wbt(t,r)??e.endpoints[r];return $o(i,...n)}s(fb,"getEndpointUrl");function MW(t){return zBe(t)?.endpoints??T_}s(MW,"getLastKnownEndpoints");function aDe(t,e){if(e&&!LW(t,e)){t.get(wc).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(vd).setConfiguredUrls(t,{serverUrl:e})}s(aDe,"updateServerUrl");var I0=new wt("auth"),uDe=60;function pb(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}s(pb,"fillGitHubUrls");function cDe(){return Math.floor(Date.now()/1e3)}s(cDe,"nowSeconds");async function FW(t,e){let r=dn.createAndMarkAsIssued({},{});Dt(t,"auth.new_login");let n=await _bt(t,e),i=await n.json(),o=i.user_notification;if(lDe(t,o,e),n.status===401){let f="Failed to get copilot token due to 401 status. Please sign out and try again.";return I0.info(t,f),C_(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:f,envelope:i}}if(!n.ok||!i.token){I0.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),C_(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let f=i.error_details;return f?.notification_id!=="not_signed_up"&&lDe(t,f,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...f}}let a=i.expires_at;i.expires_at=cDe()+i.refresh_in+uDe;let c=await due(t,e),l;c.ok&&(l=await c.json());let u=new w_(i,l);return q6(t,u),Dt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:cDe()})),{kind:"success",copilotToken:u}}s(FW,"authFromGitHubSession");async function _bt(t,e){let r={"X-GitHub-Api-Version":"2024-12-15"},n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Yp(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Ed).notifyUser(t,i),i}}s(_bt,"fetchCopilotToken");async function due(t,e){let r={"X-GitHub-Api-Version":qA},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Yp(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Ed).notifyUser(t,i),i}}s(due,"fetchCopilotUserInfo");function lDe(t,e,r){e&&t.get(wc).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(rn).getEditorPluginInfo(),c=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(nu).open(c)}e.notification_id&&o&&await Sbt(t,e.notification_id,r)}).catch(n=>{I0.exception(t,n,"copilotToken.notification")})}s(lDe,"notifyUser");async function Sbt(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await Yp(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&I0.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(Sbt,"sendNotificationResultToGitHub");var w_=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new BW(r)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??T_}needsRefresh(){return(this.envelope.expires_at-uDe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return sue(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,c]=o.split("=");r.set(a,c)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};d();d();var W6="apps",fue="hosts",__=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,i=await this.persistenceManager.read(W6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!i?(n=$h,i=await this.persistenceManager.read(W6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(bl).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:n,authAuthority:r};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(fue,e);if(r)return{...r,githubAppId:$h}}async saveAuthRecord(e){await this.persistenceManager.update(W6,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===$h&&await this.persistenceManager.delete(fue,r),await this.persistenceManager.delete(W6,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(W6,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:$h})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(fue)}authRecordKey(e,r){let n=r.githubAppId??e.get(bl).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};d();d();var hDe=Ne(fDe()),gDe=Ne(mDe()),T0=Ne(require("os"));var _4=class{constructor(e,r,n,i,o=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(ai).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{pn.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new gDe.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[hDe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=Rbt(e),this.commonProperties=kbt(e),this.#e=ia(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function Rbt(t){let e={},r=t.get(gs);e["ai.session.id"]=r.sessionId;let n=t.get(Kl);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${T0.type()} ${T0.release()}`,e["ai.device.osArchitecture"]=T0.arch(),e["ai.device.osPlatform"]=T0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(lo).getVersion(),e}s(Rbt,"getTags");function kbt(t){let e={};e.common_os=T0.platform(),e.common_platformversion=T0.release(),e.common_arch=T0.arch(),e.common_cpu=Array.from(new Set(T0.cpus().map(n=>n.model))).join();let r=t.get(gs);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(kbt,"getCommonProperties");var Pbt="7d7048df-6dd0-4048-bb23-b716c1461f8f",Bbt="3fdd7f28-937a-48c8-9a21-ba337db23bd1",Dbt="f0000000-0000-0000-0000-000000000000";function ADe(t){return new URL(t).hostname==="github.com"?T_.telemetry:t.replace("://","://copilot-telemetry-service.")}s(ADe,"getEndpointForServerUrl");var Af=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=ADe(this.serverUrl);this.shuttingDown=new Set;ia(e,n=>this.updateServiceEndpoints(n.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let i=r.get(vl);i.setReporter(new _4(r,this.namespace,n,Pbt)),i.setRestrictedReporter(new _4(r,this.namespace,n,Bbt)),i.setFTReporter(new _4(r,this.namespace,n,Dbt,!0))}}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(vl).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=ADe(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};var Dn=class{constructor(e,r){this.ctx=e;this.env=r;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;get _copilotTokenManager(){return this.ctx.get(jr)}get authPersistence(){return this.ctx.get(__)}getConfiguredUrls(){return this.ctx.get(vd).getConfiguredUrls()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(n,e?.freshSignIn??!1),user:n.login})}async getTokenWithSignUpLimited(e,r){try{await this._copilotTokenManager.getToken()}catch(n){if(n instanceof Kp)return r&&n.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e)?this.getTokenWithSignUpLimited(e,!1):n.result.reason==="HTTP401"?"NotSignedIn":n.result.reason;throw n}return"OK"}async getSession({authAuthority:e}={}){let r=Nbt(this.env)??this.#e;if(r!==null){if(r){let n={...r,...pb(r)};if(!e||e===new URL(n.serverUrl).hostname)return n}return await this.getPersistedSession()}}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:e?.authAuthority||this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&ey(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}async signUpLimited(e){let r="copilot_internal/subscribe_limited_user";try{return(await(await Yp(this.ctx,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":qA},body:JSON.stringify({restricted_telemetry:this.ctx.get(Af).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(n){return I0.exception(this.ctx,n,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:r,githubAppId:n,serverUrl:i}){let o=new URL(i||this.getConfiguredUrls().serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e,user:r,githubAppId:n,authAuthority:o}),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,r=!0){this.#e=e,r&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord({authAuthority:this.getAuthAuthority()}),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function Nbt(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(Nbt,"getSessionFromEnv");d();var po=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},UW=class extends po{static{s(this,"NoOpStatusReporter")}didChange(){}};var jr=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},Kp=class extends Ps{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},qW=class extends jr{constructor(r,n=!1){super(n);this.ctx=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let r=await this.getGitHubSession();if(!r)throw new Kp({reason:"NotSignedIn"});if(!r.accessToken)throw new Kp({reason:"HTTP401"});let n=await FW(this.ctx,r);if(n.kind==="failure"){if(n.message)throw new Kp(n);let i=new Error(`Unexpected error getting Copilot token: ${n.reason}`);throw i.code=`CopilotToken.${n.reason}`,i}return n.copilotToken}async getToken(){if(!this.primed){let r=new Error("Token requested before initialization");if(yDe(this.ctx))throw r;I0.exception(this.ctx,r,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.fetchCopilotToken().then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(po).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(po);if(n instanceof Kp)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(r){r!==void 0?(Dt(this.ctx,"auth.reset_token_"+r),I0.debug(this.ctx,`Resetting copilot token on HTTP error ${r}`)):I0.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},S4=class extends qW{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(Dn).getSession()}};d();var ry=class{static{s(this,"Clock")}now(){return new Date}};d();var zh=class{static{s(this,"ExpConfigMaker")}},G6=class extends zh{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(ai),a=Object.keys(i).length===0?this.defaultFilters:i,c=new URL("telemetry",n.telemetry).href,l;try{l=await o.fetch(c,{method:"GET",headers:a,timeout:5e3})}catch(m){return Mp.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!l.ok)return Mp.createFallbackConfig(r,`ExP responded with ${l.status}`);let u;try{u=await l.json()}catch(m){if(m instanceof SyntaxError)return rc(r,m,"fetchExperiments"),Mp.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let f=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(f.Parameters).map(([m,h])=>m+(h?"":"cf"));return new Mp(f.Parameters,u.AssignmentContext,p.join(";"))}},HW=class extends zh{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(Mp.createEmptyConfig())}};d();d();var WW=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},pue=class extends WW{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},CDe=s(t=>new pue(t),"DEFAULT_GRANULARITY"),GW=class extends WW{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let c of o)n.push(this.prefix+a+c);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var EDe="X-Copilot-ClientTimeBucket",jW=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=CDe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new GW(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(EDe,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(EDe,o))}}};d();d();d();d();d();d();d();var VW="4.10.2",j6="04b07795-8ddb-461a-bbee-02f9e1bf7b46",vDe="common",P1;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(P1||(P1={}));var V6=P1.AzurePublicCloud,xDe="login.microsoftonline.com",bDe=["*"],IDe="cae",TDe="nocae",wDe="msal.cache";var mue;var _De;function Lbt(t){var e,r,n,i,o,a,c;let l={cache:{},broker:{isEnabled:(r=(e=t.brokerOptions)===null||e===void 0?void 0:e.enabled)!==null&&r!==void 0?r:!1,enableMsaPassthrough:(i=(n=t.brokerOptions)===null||n===void 0?void 0:n.legacyEnableMsaPassthrough)!==null&&i!==void 0?i:!1,parentWindowHandle:(o=t.brokerOptions)===null||o===void 0?void 0:o.parentWindowHandle}};if(!((a=t.tokenCachePersistenceOptions)===null||a===void 0)&&a.enabled){if(mue===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let u=t.tokenCachePersistenceOptions.name||wDe;l.cache.cachePlugin=mue(Object.assign({name:`${u}.${TDe}`},t.tokenCachePersistenceOptions)),l.cache.cachePluginCae=mue(Object.assign({name:`${u}.${IDe}`},t.tokenCachePersistenceOptions))}if(!((c=t.brokerOptions)===null||c===void 0)&&c.enabled){if(_De===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(createNativeBrokerPlugin())` before using `enableBroker`."].join(" "));l.broker.nativeBrokerPlugin=_De.broker}return l}s(Lbt,"generatePluginConfiguration");var SDe={generatePluginConfiguration:Lbt};d();d();d();d();d();var RDe=require("node:os"),kDe=Ne(require("node:util"),1),PDe=Ne(require("node:process"),1);function BDe(t,...e){PDe.stderr.write(`${kDe.default.format(t,...e)}${RDe.EOL}`)}s(BDe,"log");var DDe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,NDe,hue=[],gue=[],$W=[];DDe&&Aue(DDe);var LDe=Object.assign(t=>MDe(t),{enable:Aue,enabled:yue,disable:Mbt,log:BDe});function Aue(t){NDe=t,hue=[],gue=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?gue.push(new RegExp(`^${n.substr(1)}$`)):hue.push(new RegExp(`^${n}$`));for(let n of $W)n.enabled=yue(n.namespace)}s(Aue,"enable");function yue(t){if(t.endsWith("*"))return!0;for(let e of gue)if(e.test(t))return!1;for(let e of hue)if(e.test(t))return!0;return!1}s(yue,"enabled");function Mbt(){let t=NDe||"";return Aue(""),t}s(Mbt,"disable");function MDe(t){let e=Object.assign(r,{enabled:yue(t),destroy:Fbt,log:LDe.log,namespace:t,extend:Obt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),$W.push(e),e}s(MDe,"createDebugger");function Fbt(){let t=$W.indexOf(this);return t>=0?($W.splice(t,1),!0):!1}s(Fbt,"destroy");function Obt(t){let e=MDe(`${this.namespace}:${t}`);return e.log=this.log,e}s(Obt,"extend");var R4=LDe;var ODe=new Set,zW=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,KW,Cue=R4("azure");Cue.log=(...t)=>{R4.log(...t)};var Eue=["verbose","info","warning","error"];zW&&(qDe(zW)?Qbt(zW):console.error(`AZURE_LOG_LEVEL set to unknown log level '${zW}'; logging is not enabled. Acceptable values: ${Eue.join(", ")}.`));function Qbt(t){if(t&&!qDe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${Eue.join(",")}`);KW=t;let e=[];for(let r of ODe)UDe(r)&&e.push(r.namespace);R4.enable(e.join(","))}s(Qbt,"setLogLevel");function JW(){return KW}s(JW,"getLogLevel");var FDe={verbose:400,info:300,warning:200,error:100};function mb(t){let e=Cue.extend(t);return QDe(Cue,e),{error:YW(e,"error"),warning:YW(e,"warning"),info:YW(e,"info"),verbose:YW(e,"verbose")}}s(mb,"createClientLogger");function QDe(t,e){e.log=(...r)=>{t.log(...r)}}s(QDe,"patchLogMethod");function YW(t,e){let r=Object.assign(t.extend(e),{level:e});if(QDe(t,r),UDe(r)){let n=R4.disable();R4.enable(n+","+r.namespace)}return ODe.add(r),r}s(YW,"createLogger");function UDe(t){return!!(KW&&FDe[t.level]<=FDe[KW])}s(UDe,"shouldEnable");function qDe(t){return Eue.includes(t)}s(qDe,"isAzureLogLevel");var w0=mb("identity");function XW(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}s(XW,"processEnvVars");function Jc(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}s(Jc,"formatSuccess");function Ro(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}s(Ro,"formatError");function HDe(t,e,r=w0){let n=e?`${e.fullTitle} ${t}`:t;function i(l){r.info(`${n} =>`,l)}s(i,"info");function o(l){r.warning(`${n} =>`,l)}s(o,"warning");function a(l){r.verbose(`${n} =>`,l)}s(a,"verbose");function c(l){r.error(`${n} =>`,l)}return s(c,"error"),{title:t,fullTitle:n,info:i,warning:o,verbose:a,error:c}}s(HDe,"credentialLoggerInstance");function ii(t,e=w0){let r=HDe(t,void 0,e);return Object.assign(Object.assign({},r),{parent:e,getToken:HDe("=> getToken()",r,e)})}s(ii,"credentialLogger");d();d();d();function Ubt(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}s(Ubt,"isErrorResponse");var GDe="CredentialUnavailableError",Vr=class extends Error{static{s(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=GDe}},ZW="AuthenticationError",hb=class extends Error{static{s(this,"AuthenticationError")}constructor(e,r,n){let i={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(Ubt(r))i=WDe(r);else if(typeof r=="string")try{let o=JSON.parse(r);i=WDe(o)}catch{e===400?i={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:i={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else i={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${i.error} Status code: ${e}
More details:
${i.errorDescription},`,n),this.statusCode=e,this.errorResponse=i,this.name=ZW}},jDe="AggregateAuthenticationError",$6=class extends Error{static{s(this,"AggregateAuthenticationError")}constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=jDe}};function WDe(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}s(WDe,"convertOAuthErrorResponseToErrorResponse");var Yh=class extends Error{static{s(this,"AuthenticationRequiredError")}constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};function qbt(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}s(qbt,"createConfigurationErrorMessage");function _c(t,e,r=[],n){var i;let o;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?o=t:o=(i=e?.tenantId)!==null&&i!==void 0?i:t,t&&o!==t&&!r.includes("*")&&!r.some(a=>a.localeCompare(o)===0)){let a=qbt(o);throw n?.info(a),new Vr(a)}return o}s(_c,"processMultiTenantRequest");function iu(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(Ro("",r)),r}}s(iu,"checkTenantId");function eG(t,e,r){return e?(iu(t,e),e):(r||(r=j6),r!==j6?"common":"organizations")}s(eG,"resolveTenantId");function Xc(t){return!t||t.length===0?[]:t.includes("*")?bDe:t}s(Xc,"resolveAdditionallyAllowedTenantIds");d();d();d();d();d();var z6="$",k4="_";d();function Wbt(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}s(Wbt,"isPrimitiveBody");function Gbt(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}s(Gbt,"handleNullableResponseAndWrappableBody");function vue(t,e){var r,n;let i=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:t.parsedBody});let o=e&&e.bodyMapper,a=!!o?.nullable,c=o?.type.name;if(c==="Stream")return Object.assign(Object.assign({},i),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let l=c==="Composite"&&o.type.modelProperties||{},u=Object.keys(l).some(f=>l[f].serializedName==="");if(c==="Sequence"||u){let f=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let p of Object.keys(l))l[p].serializedName&&(f[p]=(n=t.parsedBody)===null||n===void 0?void 0:n[p]);if(i)for(let p of Object.keys(i))f[p]=i[p];return a&&!t.parsedBody&&!i&&Object.getOwnPropertyNames(l).length===0?null:f}return Gbt({body:t.parsedBody,headers:i,hasNullableType:a,shouldWrapBody:Wbt(t.parsedBody,c)})}s(vue,"flattenResponse");var ny={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};d();d();d();d();d();var iy=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};d();d();d();var VDe=require("node:os"),$De=Ne(require("node:util"),1),zDe=Ne(require("node:process"),1);function YDe(t,...e){zDe.stderr.write(`${$De.default.format(t,...e)}${VDe.EOL}`)}s(YDe,"log");var KDe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,JDe,xue=[],bue=[],tG=[];KDe&&Iue(KDe);var XDe=Object.assign(t=>ZDe(t),{enable:Iue,enabled:Tue,disable:jbt,log:YDe});function Iue(t){JDe=t,xue=[],bue=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?bue.push(new RegExp(`^${n.substr(1)}$`)):xue.push(new RegExp(`^${n}$`));for(let n of tG)n.enabled=Tue(n.namespace)}s(Iue,"enable");function Tue(t){if(t.endsWith("*"))return!0;for(let e of bue)if(e.test(t))return!1;for(let e of xue)if(e.test(t))return!0;return!1}s(Tue,"enabled");function jbt(){let t=JDe||"";return Iue(""),t}s(jbt,"disable");function ZDe(t){let e=Object.assign(r,{enabled:Tue(t),destroy:Vbt,log:XDe.log,namespace:t,extend:$bt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),tG.push(e),e}s(ZDe,"createDebugger");function Vbt(){let t=tG.indexOf(this);return t>=0?(tG.splice(t,1),!0):!1}s(Vbt,"destroy");function $bt(t){let e=ZDe(`${this.namespace}:${t}`);return e.log=this.log,e}s($bt,"extend");var P4=XDe;var wue=["verbose","info","warning","error"],e8e={verbose:400,info:300,warning:200,error:100};function t8e(t,e){e.log=(...r)=>{t.log(...r)}}s(t8e,"patchLogMethod");function r8e(t){return wue.includes(t)}s(r8e,"isTypeSpecRuntimeLogLevel");function zbt(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,i=P4(t.namespace);i.log=(...f)=>{P4.log(...f)};function o(f){if(f&&!r8e(f))throw new Error(`Unknown log level '${f}'. Acceptable values: ${wue.join(",")}`);n=f;let p=[];for(let m of e)a(m)&&p.push(m.namespace);P4.enable(p.join(","))}s(o,"contextSetLogLevel"),r&&(r8e(r)?o(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${wue.join(", ")}.`));function a(f){return!!(n&&e8e[f.level]<=e8e[n])}s(a,"shouldEnable");function c(f,p){let m=Object.assign(f.extend(p),{level:p});if(t8e(f,m),a(m)){let h=P4.disable();P4.enable(h+","+m.namespace)}return e.add(m),m}s(c,"createLogger");function l(){return n}s(l,"contextGetLogLevel");function u(f){let p=i.extend(f);return t8e(i,p),{error:c(p,"error"),warning:c(p,"warning"),info:c(p,"info"),verbose:c(p,"verbose")}}return s(u,"contextCreateClientLogger"),{setLogLevel:o,getLogLevel:l,createClientLogger:u,logger:i}}s(zbt,"createLoggerContext");var n8e=zbt({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),Ybt=n8e.logger;function Y6(t){return n8e.createClientLogger(t)}s(Y6,"createClientLogger");d();function rG(t){return t.toLowerCase()}s(rG,"normalizeName");function*Kbt(t){for(let e of t.values())yield[e.name,e.value]}s(Kbt,"headerIterator");var _ue=class{static{s(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(rG(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(rG(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(rG(e))}delete(e){this._headersMap.delete(rG(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return Kbt(this._headersMap)}};function _0(t){return new _ue(t)}s(_0,"createHttpHeaders");d();d();d();d();var i8e=require("node:crypto");var Sue,Jbt=typeof((Sue=globalThis?.crypto)===null||Sue===void 0?void 0:Sue.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):i8e.randomUUID;function B4(){return Jbt()}s(B4,"randomUUID");var Rue=class{static{s(this,"PipelineRequestImpl")}constructor(e){var r,n,i,o,a,c,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:_0(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||B4(),this.allowInsecureConnection=(c=e.allowInsecureConnection)!==null&&c!==void 0?c:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function nG(t){return new Rue(t)}s(nG,"createPipelineRequest");d();var o8e=new Set(["Deserialize","Serialize","Retry","Sign"]),kue=class t{static{s(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!o8e.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!o8e.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,a)=>c=>a.sendRequest(c,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(g){return{name:g,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}s(n,"createPhase");let i=n("Serialize"),o=n("None"),a=n("Deserialize"),c=n("Retry"),l=n("Sign"),u=[i,o,a,c,l];function f(g){return g==="Retry"?c:g==="Serialize"?i:g==="Deserialize"?a:g==="Sign"?l:o}s(f,"getPhase");for(let g of this._policies){let y=g.policy,E=g.options,x=y.name;if(r.has(x))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:y,dependsOn:new Set,dependants:new Set};E.afterPhase&&(b.afterPhase=f(E.afterPhase),b.afterPhase.hasAfterPolicies=!0),r.set(x,b),f(E.phase).policies.add(b)}for(let g of this._policies){let{policy:y,options:E}=g,x=y.name,b=r.get(x);if(!b)throw new Error(`Missing node for policy ${x}`);if(E.afterPolicies)for(let _ of E.afterPolicies){let k=r.get(_);k&&(b.dependsOn.add(k),k.dependants.add(b))}if(E.beforePolicies)for(let _ of E.beforePolicies){let k=r.get(_);k&&(k.dependsOn.add(b),b.dependants.add(k))}}function p(g){g.hasRun=!0;for(let y of g.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let E of y.dependants)E.dependsOn.delete(y);r.delete(y.policy.name),g.policies.delete(y)}}s(p,"walkPhase");function m(){for(let g of u){if(p(g),g.policies.size>0&&g!==o){o.hasRun||p(o);return}g.hasAfterPolicies&&p(o)}}s(m,"walkPhases");let h=0;for(;r.size>0;){h++;let g=e.length;if(m(),e.length<=g&&h>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function iG(){return kue.create()}s(iG,"createEmptyPipeline");d();d();d();function D4(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(D4,"isObject");function S_(t){if(D4(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}s(S_,"isError");d();var s8e=require("node:util"),a8e=s8e.inspect.custom;d();var Pue="REDACTED",Xbt=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],Zbt=["api-version"],Kh=class{static{s(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=Xbt.concat(e),r=Zbt.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||D4(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,Pue);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=Pue;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=Pue;return r}};var eIt=new Kh,ou=class t extends Error{static{s(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,a8e,{value:s(()=>`RestError: ${this.message} 
 ${eIt.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};ou.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";ou.PARSE_ERROR="PARSE_ERROR";function oG(t){return t instanceof ou?!0:S_(t)&&t.name==="RestError"}s(oG,"isRestError");d();function yf(t,e){return Buffer.from(t,e)}s(yf,"stringToUint8Array");d();d();var N4=Ne(require("node:http"),1),L4=Ne(require("node:https"),1),aG=Ne(require("node:zlib"),1),l8e=require("node:stream");d();var Jp=Y6("ts-http-runtime");var tIt={};function K6(t){return t&&typeof t.pipe=="function"}s(K6,"isReadableStream");function c8e(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=s(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}s(c8e,"isStreamComplete");function u8e(t){return t&&typeof t.byteLength=="number"}s(u8e,"isArrayBuffer");var sG=class extends l8e.Transform{static{s(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},Bue=class{static{s(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new iy("The operation was aborted. Request has already been canceled.");a=s(m=>{m.type==="abort"&&o.abort()},"abortListener"),e.abortSignal.addEventListener("abort",a)}let c;e.timeout>0&&(c=setTimeout(()=>{let m=new Kh;Jp.info(`request to '${m.sanitizeUrl(e.url)}' timed out. canceling...`),o.abort()},e.timeout));let l=e.headers.get("Accept-Encoding"),u=l?.includes("gzip")||l?.includes("deflate"),f=typeof e.body=="function"?e.body():e.body;if(f&&!e.headers.has("Content-Length")){let m=oIt(f);m!==null&&e.headers.set("Content-Length",m)}let p;try{if(f&&e.onUploadProgress){let x=e.onUploadProgress,b=new sG(x);b.on("error",_=>{Jp.error("Error in upload progress",_)}),K6(f)?f.pipe(b):b.end(f),f=b}let m=await this.makeRequest(e,o,f);c!==void 0&&clearTimeout(c);let h=rIt(m),y={status:(r=m.statusCode)!==null&&r!==void 0?r:0,headers:h,request:e};if(e.method==="HEAD")return m.resume(),y;p=u?nIt(m,h):m;let E=e.onDownloadProgress;if(E){let x=new sG(E);x.on("error",b=>{Jp.error("Error in download progress",b)}),p.pipe(x),p=x}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(y.status)?y.readableStreamBody=p:y.bodyAsText=await iIt(p),y}finally{if(e.abortSignal&&a){let m=Promise.resolve();K6(f)&&(m=c8e(f));let h=Promise.resolve();K6(p)&&(h=c8e(p)),Promise.all([m,h]).then(()=>{var g;a&&((g=e.abortSignal)===null||g===void 0||g.removeEventListener("abort",a))}).catch(g=>{Jp.warning("Error when cleaning up abortListener on httpRequest",g)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),a=o.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c=(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,a),l=Object.assign({agent:c,hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((u,f)=>{let p=a?N4.request(l,u):L4.request(l,u);p.once("error",m=>{var h;f(new ou(m.message,{code:(h=m.code)!==null&&h!==void 0?h:ou.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let m=new iy("The operation was aborted. Rejecting from abort signal callback while making request.");p.destroy(m),f(m)}),n&&K6(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):u8e(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(Jp.error("Unrecognized body type",n),f(new ou("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?N4.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new N4.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return L4.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:tIt,a=this.cachedHttpsAgents.get(o);return a&&a.options.keepAlive===!i||(Jp.info("No cached TLS Agent exist, creating a new Agent"),a=new L4.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,a)),a}}};function rIt(t){let e=_0();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}s(rIt,"getResponseHeaders");function nIt(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=aG.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=aG.createInflate();return t.pipe(n),n}return t}s(nIt,"getDecodedResponseStream");function iIt(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new ou(`Error reading response as text: ${i.message}`,{code:ou.PARSE_ERROR}))})})}s(iIt,"streamToText");function oIt(t){return t?Buffer.isBuffer(t)?t.length:K6(t)?null:u8e(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}s(oIt,"getBodyLength");function d8e(){return new Bue}s(d8e,"createNodeHttpClient");function cG(){return d8e()}s(cG,"createDefaultHttpClient");d();d();d();d();var Due="logPolicy";function lG(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:Jp.info,n=new Kh({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:Due,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let a=await o(i);return r(`Response status code: ${a.status}`),r(`Headers: ${n.sanitize(a.headers)}`),a}}}s(lG,"logPolicy");d();var Nue="redirectPolicy",f8e=["GET","HEAD"];function uG(t={}){let{maxRetries:e=20}=t;return{name:Nue,async sendRequest(r,n){let i=await n(r);return p8e(n,i,e)}}}s(uG,"redirectPolicy");async function p8e(t,e,r,n=0){let{request:i,status:o,headers:a}=e,c=a.get("location");if(c&&(o===300||o===301&&f8e.includes(i.method)||o===302&&f8e.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(c,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return p8e(t,u,r,n+1)}return e}s(p8e,"handleRedirect");d();d();d();function m8e(){return"User-Agent"}s(m8e,"getHeaderName");d();function h8e(){return m8e()}s(h8e,"getUserAgentHeaderName");var lOr=h8e();d();var Lue="decompressResponsePolicy";function dG(){return{name:Lue,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}s(dG,"decompressResponsePolicy");d();d();d();d();function J6(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}s(J6,"getRandomIntegerInclusive");function X6(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+J6(0,n/2)}}s(X6,"calculateRetryDelay");d();d();var sIt="The operation was aborted.";function g8e(t,e,r){return new Promise((n,i)=>{let o,a,c=s(()=>i(new iy(r?.abortErrorMsg?r?.abortErrorMsg:sIt)),"rejectOnAbort"),l=s(()=>{r?.abortSignal&&a&&r.abortSignal.removeEventListener("abort",a)},"removeListeners");if(a=s(()=>(o&&clearTimeout(o),l(),c()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return c();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",a)})}s(g8e,"delay");function A8e(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}s(A8e,"parseHeaderValueAsNumber");var Mue="Retry-After",aIt=["retry-after-ms","x-ms-retry-after-ms",Mue];function y8e(t){if(t&&[429,503].includes(t.status))try{for(let i of aIt){let o=A8e(t,i);if(o===0||o)return o*(i===Mue?1e3:1)}let e=t.headers.get(Mue);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}s(y8e,"getRetryAfterInMs");function C8e(t){return Number.isFinite(y8e(t))}s(C8e,"isThrottlingRetryResponse");function Fue(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=y8e(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}s(Fue,"throttlingRetryStrategy");var cIt=1e3,lIt=1e3*64;function fG(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:cIt,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:lIt;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=dIt(c),u=l&&t.ignoreSystemErrors,f=uIt(a),p=f&&t.ignoreHttpStatusCodes;return a&&(C8e(a)||!f)||p||u?{skipStrategy:!0}:c&&!l&&!f?{errorToThrow:c}:X6(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}s(fG,"exponentialRetryStrategy");function uIt(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}s(uIt,"isExponentialRetryResponse");function dIt(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}s(dIt,"isSystemError");d();var fIt=Y6("ts-http-runtime retryPolicy"),pIt="retryPolicy";function gb(t,e={maxRetries:3}){let r=e.logger||fIt;return{name:pIt,async sendRequest(n,i){var o,a;let c,l,u=-1;e:for(;;){u+=1,c=void 0,l=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),c=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(f){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),l=f,!f||l.name!=="RestError")throw f;c=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new iy;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let f of t){let p=f.logger||r;p.info(`Retry ${u}: Processing retry strategy ${f.name}.`);let m=f.retry({retryCount:u,response:c,responseError:l});if(m.skipStrategy){p.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:h,retryAfterInMs:g,redirectTo:y}=m;if(h)throw p.error(`Retry ${u}: Retry strategy ${f.name} throws error:`,h),h;if(g||g===0){p.info(`Retry ${u}: Retry strategy ${f.name} retries after ${g}`),await g8e(g,void 0,{abortSignal:n.abortSignal});continue e}if(y){p.info(`Retry ${u}: Retry strategy ${f.name} redirects to ${y}`),n.url=y;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(c)return r.info("None of the retry strategies could work with the received response. Returning it."),c}}}}s(gb,"retryPolicy");var Oue="defaultRetryPolicy";function pG(t={}){var e;return{name:Oue,sendRequest:gb([Fue(),fG(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}s(pG,"defaultRetryPolicy");d();d();var Que,Uue,que,Hue,E8e=typeof window<"u"&&typeof window.document<"u",v8e=typeof self=="object"&&typeof self?.importScripts=="function"&&(((Que=self.constructor)===null||Que===void 0?void 0:Que.name)==="DedicatedWorkerGlobalScope"||((Uue=self.constructor)===null||Uue===void 0?void 0:Uue.name)==="ServiceWorkerGlobalScope"||((que=self.constructor)===null||que===void 0?void 0:que.name)==="SharedWorkerGlobalScope"),x8e=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",b8e=typeof Bun<"u"&&typeof Bun.version<"u",Ab=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((Hue=globalThis.process.versions)===null||Hue===void 0)&&Hue.node);var I8e=typeof navigator<"u"&&navigator?.product==="ReactNative";var Wue="formDataPolicy";function mIt(t){var e;let r={};for(let[n,i]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(i);return r}s(mIt,"formDataToFormDataMap");function mG(){return{name:Wue,async sendRequest(t,e){if(Ab&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=mIt(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=hIt(t.formData):await gIt(t.formData,t),t.formData=void 0}return e(t)}}}s(mG,"formDataPolicy");function hIt(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}s(hIt,"wwwFormUrlEncode");async function gIt(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[i,o]of Object.entries(t))for(let a of Array.isArray(o)?o:[o])if(typeof a=="string")n.push({headers:_0({"Content-Disposition":`form-data; name="${i}"`}),body:yf(a,"utf-8")});else{if(a==null||typeof a!="object")throw new Error(`Unexpected value for key ${i}: ${a}. Value should be serialized to string first.`);{let c=a.name||"blob",l=_0();l.set("Content-Disposition",`form-data; name="${i}"; filename="${c}"`),l.set("Content-Type",a.type||"application/octet-stream"),n.push({headers:l,body:a})}}e.multipartBody={parts:n}}s(gIt,"prepareFormData");d();var Z8e=Ne(V8e(),1),eNe=Ne(Y8e(),1);var hTt="HTTPS_PROXY",gTt="HTTP_PROXY",ATt="ALL_PROXY",yTt="NO_PROXY",Xue="proxyPolicy",K8e=[],tNe=!1,CTt=new Map;function xG(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}s(xG,"getEnvironmentValue");function ETt(){if(!process)return;let t=xG(hTt),e=xG(ATt),r=xG(gTt);return t||e||r}s(ETt,"loadEnvironmentProxyValue");function vTt(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}s(vTt,"isBypassed");function xTt(){let t=xG(yTt);return tNe=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}s(xTt,"loadNoProxy");function bTt(){let t=ETt();return t?new URL(t):void 0}s(bTt,"getDefaultProxySettingsInternal");function J8e(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}s(J8e,"getUrlFromProxySettings");function X8e(t,e,r){if(t.agent)return;let i=new URL(t.url).protocol!=="https:";t.tlsSettings&&Jp.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let o=t.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new eNe.HttpProxyAgent(r,{headers:o})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new Z8e.HttpsProxyAgent(r,{headers:o})),t.agent=e.httpsProxyAgent)}s(X8e,"setProxyAgentOnRequest");function bG(t,e){tNe||K8e.push(...xTt());let r=t?J8e(t):bTt(),n={};return{name:Xue,async sendRequest(i,o){var a;return!i.proxySettings&&r&&!vTt(i.url,(a=e?.customNoProxyList)!==null&&a!==void 0?a:K8e,e?.customNoProxyList?void 0:CTt)?X8e(i,n,r):i.proxySettings&&X8e(i,n,J8e(i.proxySettings)),o(i)}}}s(bG,"proxyPolicy");d();var Zue="agentPolicy";function IG(t){return{name:Zue,sendRequest:s(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}s(IG,"agentPolicy");d();var ede="tlsPolicy";function TG(t){return{name:ede,sendRequest:s(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}s(TG,"tlsPolicy");d();d();function wG(t){return typeof t.stream=="function"}s(wG,"isBlob");d();d();function rNe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:s(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}s(rNe,"__values");function ay(t){return this instanceof ay?(this.v=t,this):new ay(t)}s(ay,"__await");function tde(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(g){return Promise.resolve(g).then(h,p)}}function c(h,g){n[h]&&(i[h]=function(y){return new Promise(function(E,x){o.push([h,y,E,x])>1||l(h,y)})},g&&(i[h]=g(i[h])))}function l(h,g){try{u(n[h](g))}catch(y){m(o[0][3],y)}}function u(h){h.value instanceof ay?Promise.resolve(h.value.v).then(f,p):m(o[0][2],h)}function f(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}s(tde,"__asyncGenerator");function nNe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof rNe=="function"?rNe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},a)}}s(nNe,"__asyncValues");var _G=require("stream");function iNe(){return tde(this,arguments,s(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield ay(e.read());if(r)return yield ay(void 0);yield yield ay(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}s(iNe,"streamAsyncIterator");function ITt(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=iNe.bind(t)),t.values||(t.values=iNe.bind(t))}s(ITt,"makeAsyncIterable");function oNe(t){return t instanceof ReadableStream?(ITt(t),_G.Readable.fromWeb(t)):t}s(oNe,"ensureNodeStream");function TTt(t){return t instanceof Uint8Array?_G.Readable.from(Buffer.from(t)):wG(t)?oNe(t.stream()):oNe(t)}s(TTt,"toStream");async function sNe(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(TTt);return _G.Readable.from(function(){return tde(this,arguments,function*(){var r,n,i,o;for(let u of e)try{for(var a=!0,c=(n=void 0,nNe(u)),l;l=yield ay(c.next()),r=l.done,!r;a=!0)o=l.value,a=!1,yield yield ay(o)}catch(f){n={error:f}}finally{try{!a&&!r&&(i=c.return)&&(yield ay(i.call(c)))}finally{if(n)throw n.error}}})}())}}s(sNe,"concat");function wTt(){return`----AzSDKFormBoundary${B4()}`}s(wTt,"generateBoundary");function _Tt(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}s(_Tt,"encodeHeaders");function STt(t){return t instanceof Uint8Array?t.byteLength:wG(t)?t.size===-1?void 0:t.size:void 0}s(STt,"getLength");function RTt(t){let e=0;for(let r of t){let n=STt(r);if(n===void 0)return;e+=n}return e}s(RTt,"getTotalLength");async function kTt(t,e,r){let n=[yf(`--${r}`,"utf-8"),...e.flatMap(o=>[yf(`\r
`,"utf-8"),yf(_Tt(o.headers),"utf-8"),yf(`\r
`,"utf-8"),o.body,yf(`\r
--${r}`,"utf-8")]),yf(`--\r
\r
`,"utf-8")],i=RTt(n);i&&t.headers.set("Content-Length",i),t.body=await sNe(n)}s(kTt,"buildRequestBody");var e9="multipartPolicy",PTt=70,BTt=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function DTt(t){if(t.length>PTt)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!BTt.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}s(DTt,"assertValidBoundary");function SG(){return{name:e9,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,i=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",o=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!o)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,a,c]=o;if(c&&n&&c!==n)throw new Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);return n??(n=c),n?DTt(n):n=wTt(),t.headers.set("Content-Type",`${a}; boundary=${n}`),await kTt(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}s(SG,"multipartPolicy");d();d();d();d();d();d();d();d();d();d();d();d();function RG(){return iG()}s(RG,"createEmptyPipeline");d();d();d();var cy=mb("core-rest-pipeline");d();d();d();d();function ide(t={}){return lG(Object.assign({logger:cy.info},t))}s(ide,"logPolicy");d();function ode(t={}){return uG(t)}s(ode,"redirectPolicy");d();d();d();var q4=Ne(require("node:os"),1),kG=Ne(require("node:process"),1);function aNe(){return"User-Agent"}s(aNe,"getHeaderName");async function cNe(t){if(kG&&kG.versions){let e=kG.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${q4.arch()}-${q4.type()}-${q4.release()})`)}s(cNe,"setPlatformSpecificData");d();var PG="1.22.0";function HTt(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}s(HTt,"getUserAgentString");function lNe(){return aNe()}s(lNe,"getUserAgentHeaderName");async function BG(t){let e=new Map;e.set("core-rest-pipeline",PG),await cNe(e);let r=HTt(e);return t?`${t} ${r}`:r}s(BG,"getUserAgentValue");var uNe=lNe(),dNe="userAgentPolicy";function sde(t={}){let e=BG(t.userAgentPrefix);return{name:dNe,async sendRequest(r,n){return r.headers.has(uNe)||r.headers.set(uNe,await e),n(r)}}}s(sde,"userAgentPolicy");d();d();d();d();d();d();d();d();d();var P_=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function ade(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:i}=e??{};return new Promise((o,a)=>{function c(){a(new P_(i??"The operation was aborted."))}s(c,"rejectOnAbort");function l(){n?.removeEventListener("abort",u)}s(l,"removeListeners");function u(){r?.(),l(),c()}if(s(u,"onAbort"),n?.aborted)return c();try{t(f=>{l(),o(f)},f=>{l(),a(f)})}catch(f){a(f)}n?.addEventListener("abort",u)})}s(ade,"createAbortablePromise");d();var $Tt="The delay was aborted.";function cde(t,e){let r,{abortSignal:n,abortErrorMsg:i}=e??{};return ade(o=>{r=setTimeout(o,t)},{cleanupBeforeAbort:s(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:i??$Tt})}s(cde,"delay");d();function H4(t){if(S_(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}s(H4,"getErrorMessage");d();function fNe(t,e){return X6(t,e)}s(fNe,"calculateRetryDelay");function DG(t){return S_(t)}s(DG,"isError");var NG=Ab,W4=Ab;var pNe=Symbol("rawContent");function lde(t){return typeof t[pNe]=="function"}s(lde,"hasRawContent");function mNe(t){return lde(t)?t[pNe]():t}s(mNe,"getRawContent");var LG=e9;function ude(){let t=SG();return{name:LG,sendRequest:s(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)lde(n.body)&&(n.body=mNe(n.body));return t.sendRequest(e,r)},"sendRequest")}}s(ude,"multipartPolicy");d();function dde(){return dG()}s(dde,"decompressResponsePolicy");d();function fde(t={}){return pG(t)}s(fde,"defaultRetryPolicy");d();function pde(){return mG()}s(pde,"formDataPolicy");d();function mde(t,e){return bG(t,e)}s(mde,"proxyPolicy");d();var hNe="setClientRequestIdPolicy";function hde(t="x-ms-client-request-id"){return{name:hNe,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}s(hde,"setClientRequestIdPolicy");d();function gde(t){return IG(t)}s(gde,"agentPolicy");d();function Ade(t){return TG(t)}s(Ade,"tlsPolicy");d();d();d();d();var G4={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function gNe(t={}){let e=new yde(t.parentContext);return t.span&&(e=e.setValue(G4.span,t.span)),t.namespace&&(e=e.setValue(G4.namespace,t.namespace)),e}s(gNe,"createTracingContext");var yde=class t{static{s(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};d();var yNe=Ne(ANe(),1),FG=yNe.state;function zTt(){return{end:s(()=>{},"end"),isRecording:s(()=>!1,"isRecording"),recordException:s(()=>{},"recordException"),setAttribute:s(()=>{},"setAttribute"),setStatus:s(()=>{},"setStatus"),addEvent:s(()=>{},"addEvent")}}s(zTt,"createDefaultTracingSpan");function YTt(){return{createRequestHeaders:s(()=>({}),"createRequestHeaders"),parseTraceparentHeader:s(()=>{},"parseTraceparentHeader"),startSpan:s((t,e)=>({span:zTt(),tracingContext:gNe({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}s(YTt,"createDefaultInstrumenter");function t9(){return FG.instrumenterImplementation||(FG.instrumenterImplementation=YTt()),FG.instrumenterImplementation}s(t9,"getInstrumenter");d();function r9(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,f,p){var m;let h=t9().startSpan(u,Object.assign(Object.assign({},p),{packageName:r,packageVersion:n,tracingContext:(m=f?.tracingOptions)===null||m===void 0?void 0:m.tracingContext})),g=h.tracingContext,y=h.span;g.getValue(G4.namespace)||(g=g.setValue(G4.namespace,e)),y.setAttribute("az.namespace",g.getValue(G4.namespace));let E=Object.assign({},f,{tracingOptions:Object.assign(Object.assign({},f?.tracingOptions),{tracingContext:g})});return{span:y,updatedOptions:E}}s(i,"startSpan");async function o(u,f,p,m){let{span:h,updatedOptions:g}=i(u,f,m);try{let y=await a(g.tracingOptions.tracingContext,()=>Promise.resolve(p(g,h)));return h.setStatus({status:"success"}),y}catch(y){throw h.setStatus({status:"error",error:y}),y}finally{h.end()}}s(o,"withSpan");function a(u,f,...p){return t9().withContext(u,f,...p)}s(a,"withContext");function c(u){return t9().parseTraceparentHeader(u)}s(c,"parseTraceparentHeader");function l(u){return t9().createRequestHeaders(u)}return s(l,"createRequestHeaders"),{startSpan:i,withSpan:o,withContext:a,parseTraceparentHeader:c,createRequestHeaders:l}}s(r9,"createTracingClient");d();var j4=ou;function n9(t){return oG(t)}s(n9,"isRestError");var CNe="tracingPolicy";function Cde(t={}){let e=BG(t.userAgentPrefix),r=new Kh({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=KTt();return{name:CNe,async sendRequest(i,o){var a;if(!n)return o(i);let c=await e,l={"http.url":r.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":c,requestId:i.requestId};c&&(l["http.user_agent"]=c);let{span:u,tracingContext:f}=(a=JTt(n,i,l))!==null&&a!==void 0?a:{};if(!u||!f)return o(i);try{let p=await n.withContext(f,o,i);return ZTt(u,p),p}catch(p){throw XTt(u,p),p}}}}s(Cde,"tracingPolicy");function KTt(){try{return r9({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:PG})}catch(t){cy.warning(`Error when creating the TracingClient: ${H4(t)}`);return}}s(KTt,"tryCreateTracingClient");function JTt(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[a,c]of Object.entries(o))e.headers.set(a,c);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){cy.warning(`Skipping creating a tracing span due to an error: ${H4(n)}`);return}}s(JTt,"tryCreateSpan");function XTt(t,e){try{t.setStatus({status:"error",error:DG(e)?e:void 0}),n9(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){cy.warning(`Skipping tracing span processing due to an error: ${H4(r)}`)}}s(XTt,"tryProcessError");function ZTt(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){cy.warning(`Skipping tracing span processing due to an error: ${H4(r)}`)}}s(ZTt,"tryProcessResponse");d();d();function OG(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",i),r=!1)}s(n,"cleanup");function i(){e.abort(t.reason),n()}return s(i,"listener"),t.addEventListener("abort",i),{abortSignal:e.signal,cleanup:n}}s(OG,"wrapAbortSignalLike");var ewt="wrapAbortSignalLikePolicy";function ENe(){return{name:ewt,sendRequest:s(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=OG(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}s(ENe,"wrapAbortSignalLikePolicy");function Ede(t){var e;let r=RG();return W4&&(t.agent&&r.addPolicy(gde(t.agent)),t.tlsOptions&&r.addPolicy(Ade(t.tlsOptions)),r.addPolicy(mde(t.proxyOptions)),r.addPolicy(dde())),r.addPolicy(ENe()),r.addPolicy(pde(),{beforePolicies:[LG]}),r.addPolicy(sde(t.userAgentOptions)),r.addPolicy(hde((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(ude(),{afterPhase:"Deserialize"}),r.addPolicy(fde(t.retryOptions),{phase:"Retry"}),r.addPolicy(Cde(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),W4&&r.addPolicy(ode(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(ide(t.loggingOptions),{afterPhase:"Sign"}),r}s(Ede,"createPipelineFromOptions");d();function vde(){let t=cG();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?OG(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}s(vde,"createDefaultHttpClient");d();function Cb(t){return _0(t)}s(Cb,"createHttpHeaders");d();function Jh(t){return nG(t)}s(Jh,"createPipelineRequest");d();d();d();d();var rwt=mb("core-rest-pipeline retryPolicy");function xde(t,e={maxRetries:3}){return gb(t,Object.assign({logger:rwt},e))}s(xde,"retryPolicy");d();d();var nwt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function iwt(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}s(n,"tryGetAccessToken");let i=await n();for(;i===null;)await cde(e),i=await n();return i}s(iwt,"beginRefresh");function bde(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},nwt),e),a={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return a.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(l,u){var f;return a.isRefreshing||(r=iwt(s(()=>t.getToken(l,u),"tryGetAccessToken"),o.retryIntervalInMs,(f=n?.expiresOnTimestamp)!==null&&f!==void 0?f:Date.now()).then(m=>(r=null,n=m,i=u.tenantId,n)).catch(m=>{throw r=null,n=null,i=void 0,m})),r}return s(c,"refresh"),async(l,u)=>{let f=!!u.claims,p=i!==u.tenantId;return f&&(n=null),p||f||a.mustRefresh?c(l,u):(a.shouldRefresh&&c(l,u),n)}}s(bde,"createTokenCycler");var INe="bearerTokenAuthenticationPolicy";async function QG(t,e){try{return[await e(t),void 0]}catch(r){if(n9(r)&&r.response)return[r.response,r];throw r}}s(QG,"trySendRequest");async function owt(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}s(owt,"defaultAuthorizeRequest");function vNe(t){return t.status===401&&t.headers.has("WWW-Authenticate")}s(vNe,"isChallengeResponse");async function xNe(t,e){var r;let{scopes:n}=t,i=await t.getAccessToken(n,{enableCae:!0,claims:e});return i?(t.request.headers.set("Authorization",`${(r=i.tokenType)!==null&&r!==void 0?r:"Bearer"} ${i.token}`),!0):!1}s(xNe,"authorizeRequestOnCaeChallenge");function UG(t){var e,r,n;let{credential:i,scopes:o,challengeCallbacks:a}=t,c=t.logger||cy,l={authorizeRequest:(r=(e=a?.authorizeRequest)===null||e===void 0?void 0:e.bind(a))!==null&&r!==void 0?r:owt,authorizeRequestOnChallenge:(n=a?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(a)},u=i?bde(i):()=>Promise.resolve(null);return{name:INe,async sendRequest(f,p){if(!f.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(o)?o:[o],request:f,getAccessToken:u,logger:c});let m,h,g;if([m,h]=await QG(f,p),vNe(m)){let y=bNe(m.headers.get("WWW-Authenticate"));if(y){let E;try{E=atob(y)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),m}g=await xNe({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},E),g&&([m,h]=await QG(f,p))}else if(l.authorizeRequestOnChallenge&&(g=await l.authorizeRequestOnChallenge({scopes:Array.isArray(o)?o:[o],request:f,response:m,getAccessToken:u,logger:c}),g&&([m,h]=await QG(f,p)),vNe(m)&&(y=bNe(m.headers.get("WWW-Authenticate")),y))){let E;try{E=atob(y)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),m}g=await xNe({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},E),g&&([m,h]=await QG(f,p))}}if(h)throw h;return m}}}s(UG,"bearerTokenAuthenticationPolicy");function swt(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],i;for(;(i=e.exec(t))!==null;){let o=i[1],a=i[2],c={},l;for(;(l=r.exec(a))!==null;)c[l[1]]=l[2];n.push({scheme:o,params:c})}return n}s(swt,"parseChallenges");function bNe(t){var e;return t?(e=swt(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}s(bNe,"getCaeChallengeClaims");d();d();d();d();d();d();var wNe=Ne(TNe(),1),Ide=wNe.state;function Eb(t,e,r){let n=e.parameterPath,i=e.mapper,o;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)o=i.defaultValue;else{let a=_Ne(t,n);!a.propertyFound&&r&&(a=_Ne(r,n));let c=!1;a.propertyFound||(c=i.required||n[0]==="options"&&n.length===2),o=c?i.defaultValue:a.propertyValue}}else{i.required&&(o={});for(let a in n){let c=i.type.modelProperties[a],l=n[a],u=Eb(t,{parameterPath:l,mapper:c},r);u!==void 0&&(o||(o={}),o[a]=u)}}return o}s(Eb,"getOperationArgumentValueFromParameter");function _Ne(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(t&&i in t)t=t[i];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}s(_Ne,"getPropertyFromParameterPath");var SNe=Symbol.for("@azure/core-client original request");function awt(t){return SNe in t}s(awt,"hasOriginalRequest");function B1(t){if(awt(t))return B1(t[SNe]);let e=Ide.operationRequestMap.get(t);return e||(e={},Ide.operationRequestMap.set(t,e)),e}s(B1,"getOperationRequestInfo");var cwt=["application/json","text/json"],lwt=["application/xml","application/atom+xml"],RNe="deserializationPolicy";function Tde(t={}){var e,r,n,i,o,a,c;let l=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:cwt,u=(i=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:lwt,f=t.parseXML,p=t.serializerOptions,m={xml:{rootName:(o=p?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=p?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=p?.xml.xmlCharKey)!==null&&c!==void 0?c:k4}};return{name:RNe,async sendRequest(h,g){let y=await g(h);return fwt(l,u,y,m,f)}}}s(Tde,"deserializationPolicy");function uwt(t){let e,r=t.request,n=B1(r),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,t):e=i.responses[t.status]),e}s(uwt,"getOperationResponseMap");function dwt(t){let e=t.request,r=B1(e),n=r?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(t),i}s(dwt,"shouldDeserializeResponse");async function fwt(t,e,r,n,i){let o=await hwt(t,e,r,n,i);if(!dwt(o))return o;let a=B1(o.request),c=a?.operationSpec;if(!c||!c.responses)return o;let l=uwt(o),{error:u,shouldReturnResponse:f}=mwt(o,c,l,n);if(u)throw u;if(f)return o;if(l){if(l.bodyMapper){let p=o.parsedBody;c.isXML&&l.bodyMapper.type.name===ny.Sequence&&(p=typeof p=="object"?p[l.bodyMapper.xmlElementName]:[]);try{o.parsedBody=c.serializer.deserialize(l.bodyMapper,p,"operationRes.parsedBody",n)}catch(m){throw new j4(`Error ${m} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else c.httpMethod==="HEAD"&&(o.parsedBody=r.status>=200&&r.status<300);l.headersMapper&&(o.parsedHeaders=c.serializer.deserialize(l.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}s(fwt,"deserializeResponseBody");function pwt(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}s(pwt,"isOperationSpecEmpty");function mwt(t,e,r,n){var i;let o=200<=t.status&&t.status<300;if(pwt(e)?o:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let c=r??e.responses.default,l=!((i=t.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,u=new j4(l,{statusCode:t.status,request:t.request,response:t});if(!c)throw u;let f=c.bodyMapper,p=c.headersMapper;try{if(t.parsedBody){let m=t.parsedBody,h;if(f){let y=m;if(e.isXML&&f.type.name===ny.Sequence){y=[];let E=f.xmlElementName;typeof m=="object"&&E&&(y=m[E])}h=e.serializer.deserialize(f,y,"error.response.parsedBody",n)}let g=m.error||h||m;u.code=g.code,g.message&&(u.message=g.message),f&&(u.response.parsedBody=h)}t.headers&&p&&(u.response.parsedHeaders=e.serializer.deserialize(p,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(m){u.message=`Error "${m.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:u,shouldReturnResponse:!1}}s(mwt,"handleErrorResponse");async function hwt(t,e,r,n,i){var o;if(!(!((o=r.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(r.status))&&r.bodyAsText){let a=r.bodyAsText,c=r.headers.get("Content-Type")||"",l=c?c.split(";").map(u=>u.toLowerCase()):[];try{if(l.length===0||l.some(u=>t.indexOf(u)!==-1))return r.parsedBody=JSON.parse(a),r;if(l.some(u=>e.indexOf(u)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let u=await i(a,n.xml);return r.parsedBody=u,r}}catch(u){let f=`Error "${u}" occurred while parsing the response body - ${r.bodyAsText}.`,p=u.code||j4.PARSE_ERROR;throw new j4(f,{code:p,statusCode:r.status,request:r.request,response:r})}}return r}s(hwt,"parse");d();d();function kNe(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===ny.Stream&&e.add(Number(r))}return e}s(kNe,"getStreamingResponseStatusCodes");function ly(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}s(ly,"getPathStringFromParameter");var PNe="serializationPolicy";function wde(t={}){let e=t.stringifyXML;return{name:PNe,async sendRequest(r,n){let i=B1(r),o=i?.operationSpec,a=i?.operationArguments;return o&&a&&(gwt(r,a,o),Awt(r,a,o,e)),n(r)}}}s(wde,"serializationPolicy");function gwt(t,e,r){var n,i;if(r.headerParameters)for(let a of r.headerParameters){let c=Eb(e,a);if(c!=null||a.mapper.required){c=r.serializer.serialize(a.mapper,c,ly(a));let l=a.mapper.headerCollectionPrefix;if(l)for(let u of Object.keys(c))t.headers.set(l+u,c[u]);else t.headers.set(a.mapper.serializedName||ly(a),c)}}let o=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(o)for(let a of Object.keys(o))t.headers.set(a,o[a])}s(gwt,"serializeHeaders");function Awt(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var i,o,a,c,l;let u=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,f={xml:{rootName:(o=u?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=u?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=u?.xml.xmlCharKey)!==null&&c!==void 0?c:k4}},p=f.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=Eb(e,r.requestBody);let m=r.requestBody.mapper,{required:h,serializedName:g,xmlName:y,xmlElementName:E,xmlNamespace:x,xmlNamespacePrefix:b,nullable:_}=m,k=m.type.name;try{if(t.body!==void 0&&t.body!==null||_&&t.body===null||h){let P=ly(r.requestBody);t.body=r.serializer.serialize(m,t.body,P,f);let N=k===ny.Stream;if(r.isXML){let M=b?`xmlns:${b}`:"xmlns",J=ywt(x,M,k,t.body,f);k===ny.Sequence?t.body=n(Cwt(J,E||y||g,M,x),{rootName:y||g,xmlCharKey:p}):N||(t.body=n(J,{rootName:y||g,xmlCharKey:p}))}else{if(k===ny.String&&(!((l=r.contentType)===null||l===void 0)&&l.match("text/plain")||r.mediaType==="text"))return;N||(t.body=JSON.stringify(t.body))}}}catch(P){throw new Error(`Error "${P.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let m of r.formDataParameters){let h=Eb(e,m);if(h!=null){let g=m.mapper.serializedName||ly(m);t.formData[g]=r.serializer.serialize(m.mapper,h,ly(m),f)}}}}s(Awt,"serializeRequestBody");function ywt(t,e,r,n,i){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let o={};return o[i.xml.xmlCharKey]=n,o[z6]={[e]:t},o}return n}s(ywt,"getXmlValueWithNamespace");function Cwt(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let i={[e]:t};return i[z6]={[r]:n},i}s(Cwt,"prepareXMLRootList");function _de(t={}){let e=Ede(t??{});return t.credentialOptions&&e.addPolicy(UG({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(wde(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(Tde(t.deserializationOptions),{phase:"Deserialize"}),e}s(_de,"createClientPipeline");d();var Sde;function BNe(){return Sde||(Sde=vde()),Sde}s(BNe,"getCachedDefaultHttpClient");d();var Ewt={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function NNe(t,e,r,n){let i=vwt(e,r,n),o=!1,a=DNe(t,i);if(e.path){let u=DNe(e.path,i);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),xwt(u)?(a=u,o=!0):a=bwt(a,u)}let{queryParams:c,sequenceParams:l}=Iwt(e,r,n);return a=wwt(a,c,l,o),a}s(NNe,"getRequestUrl");function DNe(t,e){let r=t;for(let[n,i]of e)r=r.split(n).join(i);return r}s(DNe,"replaceAll");function vwt(t,e,r){var n;let i=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let o of t.urlParameters){let a=Eb(e,o,r),c=ly(o);a=t.serializer.serialize(o.mapper,a,c),o.skipEncoding||(a=encodeURIComponent(a)),i.set(`{${o.mapper.serializedName||c}}`,a)}return i}s(vwt,"calculateUrlReplacements");function xwt(t){return t.includes("://")}s(xwt,"isAbsoluteUrl");function bwt(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let o=e.substring(0,i),a=e.substring(i+1);n=n+o,a&&(r.search=r.search?`${r.search}&${a}`:a)}else n=n+e;return r.pathname=n,r.toString()}s(bwt,"appendPath");function Iwt(t,e,r){var n;let i=new Map,o=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let a of t.queryParameters){a.mapper.type.name==="Sequence"&&a.mapper.serializedName&&o.add(a.mapper.serializedName);let c=Eb(e,a,r);if(c!=null||a.mapper.required){c=t.serializer.serialize(a.mapper,c,ly(a));let l=a.collectionFormat?Ewt[a.collectionFormat]:"";if(Array.isArray(c)&&(c=c.map(u=>u??"")),a.collectionFormat==="Multi"&&c.length===0)continue;Array.isArray(c)&&(a.collectionFormat==="SSV"||a.collectionFormat==="TSV")&&(c=c.join(l)),a.skipEncoding||(Array.isArray(c)?c=c.map(u=>encodeURIComponent(u)):c=encodeURIComponent(c)),Array.isArray(c)&&(a.collectionFormat==="CSV"||a.collectionFormat==="Pipes")&&(c=c.join(l)),i.set(a.mapper.serializedName||ly(a),c)}}return{queryParams:i,sequenceParams:o}}s(Iwt,"calculateQueryParameters");function Twt(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[i,o]=n.split("=",2),a=e.get(i);a?Array.isArray(a)?a.push(o):e.set(i,[a,o]):e.set(i,o)}return e}s(Twt,"simpleParseQueryParams");function wwt(t,e,r,n=!1){if(e.size===0)return t;let i=new URL(t),o=Twt(i.search);for(let[c,l]of e){let u=o.get(c);if(Array.isArray(u))if(Array.isArray(l)){u.push(...l);let f=new Set(u);o.set(c,Array.from(f))}else u.push(l);else u?(Array.isArray(l)?l.unshift(u):r.has(c)&&o.set(c,[u,l]),n||o.set(c,l)):o.set(c,l)}let a=[];for(let[c,l]of o)if(typeof l=="string")a.push(`${c}=${l}`);else if(Array.isArray(l))for(let u of l)a.push(`${c}=${u}`);else a.push(`${c}=${l}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}s(wwt,"appendQueryParams");d();var Rde=mb("core-client");var i9=class{static{s(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&Rde.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||BNe(),this.pipeline=e.pipeline||_wt(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:o}of e.additionalPolicies){let a=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:a})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=NNe(n,r,e,this),o=Jh({url:i});o.method=r.httpMethod;let a=B1(o);a.operationSpec=r,a.operationArguments=e;let c=r.contentType||this._requestContentType;c&&r.requestBody&&o.headers.set("Content-Type",c);let l=e.options;if(l){let u=l.requestOptions;u&&(u.timeout&&(o.timeout=u.timeout),u.onUploadProgress&&(o.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(o.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(a.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(o.allowInsecureConnection=!0)),l.abortSignal&&(o.abortSignal=l.abortSignal),l.tracingOptions&&(o.tracingOptions=l.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),o.streamResponseStatusCodes===void 0&&(o.streamResponseStatusCodes=kNe(r));try{let u=await this.sendRequest(o),f=vue(u,r.responses[u.status]);return l?.onResponse&&l.onResponse(u,f),f}catch(u){if(typeof u=="object"&&u?.response){let f=u.response,p=vue(f,r.responses[u.statusCode]||r.responses.default);u.details=p,l?.onResponse&&l.onResponse(f,p,u)}throw u}}};function _wt(t){let e=Swt(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return _de(Object.assign(Object.assign({},t),{credentialOptions:r}))}s(_wt,"createDefaultPipeline");function Swt(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}s(Swt,"getCredentialScopes");d();d();d();function LNe(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}s(LNe,"getIdentityTokenEndpointSuffix");d();var es=r9({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:VW});d();var MNe="/.default",FNe="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function o9(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(MNe)?e.substr(0,e.lastIndexOf(MNe)):e}s(o9,"mapScopesToResource");function ONe(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}s(ONe,"parseExpirationTimestamp");function QNe(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}s(QNe,"parseRefreshTimestamp");var s9="noCorrelationId";function Rwt(t){let e=t?.authorityHost;return NG&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??V6}s(Rwt,"getIdentityClientAuthorityHost");var D1=class extends i9{static{s(this,"IdentityClient")}constructor(e){var r,n;let i=`azsdk-js-identity/${VW}`,o=!((r=e?.userAgentOptions)===null||r===void 0)&&r.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${i}`:`${i}`,a=Rwt(e);if(!a.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},e),{userAgentOptions:{userAgentPrefix:o},baseUri:a})),this.allowInsecureConnection=!1,this.authorityHost=a,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=(n=e?.loggingOptions)===null||n===void 0?void 0:n.allowLoggingAccountIdentifiers,this.tokenCredentialOptions=Object.assign({},e),e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){w0.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let i={accessToken:{token:n.access_token,expiresOnTimestamp:ONe(n),refreshAfterTimestamp:QNe(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return w0.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}else{let n=new hb(r.status,r.bodyAsText);throw w0.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,i,o,a={}){if(i===void 0)return null;w0.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let c={grant_type:"refresh_token",client_id:r,refresh_token:i,scope:n};o!==void 0&&(c.client_secret=o);let l=new URLSearchParams(c);return es.withSpan("IdentityClient.refreshAccessToken",a,async u=>{try{let f=LNe(e),p=Jh({url:`${this.authorityHost}/${e}/${f}`,method:"POST",body:l.toString(),abortSignal:a.abortSignal,headers:Cb({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:u.tracingOptions}),m=await this.sendTokenRequest(p);return w0.info(`IdentityClient: refreshed token for client ID: ${r}`),m}catch(f){if(f.name===ZW&&f.errorResponse.error==="interaction_required")return w0.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw w0.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${f}`),f}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let i=r.signal.onabort;return r.signal.onabort=(...o)=>{this.abortControllers.set(e,void 0),i&&i.apply(r.signal,o)},r.signal}abortRequests(e){let r=e||s9,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(s9)||[]];if(n.length){for(let i of n)i.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){var r;let n=(r=e?.body)===null||r===void 0?void 0:r.split("&").map(i=>i.split("=")).find(([i])=>i==="client-request-id");return n&&n.length&&n[1]||s9}async sendGetRequestAsync(e,r){let n=Jh({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:Cb(r?.headers),abortSignal:this.generateAbortSignal(s9)}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,r){let n=Jh({url:e,method:"POST",body:r?.body,headers:Cb(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let i=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!i)return;let o=i.split(".")[1],{appid:a,upn:c,tid:l,oid:u}=JSON.parse(Buffer.from(o,"base64").toString("utf8"));w0.info(`[Authenticated account] Client ID: ${a}. Tenant ID: ${l}. User Principal Name: ${c||r}. Object ID (user): ${u}`)}catch(n){w0.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};var cYr=ii("VisualStudioCodeCredential");var lYr={AzureCloud:P1.AzurePublicCloud,AzureChina:P1.AzureChina,AzureGermanCloud:P1.AzureGermany,AzureUSGovernment:P1.AzureGovernment};d();d();var L0={};ra(L0,{AuthError:()=>Jn,AuthErrorCodes:()=>Y4,AuthErrorMessage:()=>Pde,AzureCloudInstance:()=>Q1,ClientApplication:()=>qb,ClientAssertion:()=>$1,ClientAuthError:()=>Sb,ClientAuthErrorCodes:()=>ts,ClientAuthErrorMessage:()=>Dde,ClientConfigurationError:()=>tP,ClientConfigurationErrorCodes:()=>eP,ClientConfigurationErrorMessage:()=>Ode,ClientCredentialClient:()=>Hb,ConfidentialClientApplication:()=>vP,CryptoProvider:()=>gy,DeviceCodeClient:()=>yP,DistributedCachePlugin:()=>mV,InteractionRequiredAuthError:()=>B0,InteractionRequiredAuthErrorCodes:()=>dj,InteractionRequiredAuthErrorMessage:()=>Gfe,LogLevel:()=>Ta,Logger:()=>k0,ManagedIdentityApplication:()=>xP,ManagedIdentitySourceNames:()=>jn,OnBehalfOfClient:()=>EP,PromptValue:()=>xb,ProtocolMode:()=>Wu,PublicClientApplication:()=>CP,ResponseMode:()=>uy,ServerError:()=>Td,TokenCache:()=>lP,TokenCacheContext:()=>D0,UsernamePasswordClient:()=>AP,internals:()=>jfe,version:()=>tg});d();var jfe={};ra(jfe,{Deserializer:()=>j1,Serializer:()=>vb});d();d();var vb=class{static{s(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(o=>JSON.stringify(o))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};d();d();d();d();d();d();d();d();d();var Je={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Kn={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Ef=[Je.OPENID_SCOPE,Je.PROFILE_SCOPE,Je.OFFLINE_ACCESS_SCOPE],kde=[...Ef,Je.EMAIL_SCOPE],Es={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var vf={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},B_={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},xb={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},HG={PLAIN:"plain",S256:"S256"},V4={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var uy={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},xf={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},D_={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Ma={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},mo={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var a9="appmetadata",UNe="client_info",N1="1",$4={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},xd={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Zc={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Yi={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},dy={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},c9={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},l9={username:"username",password:"password"},N_={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},WG={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ls={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var z4=300,au={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var Y4={};ra(Y4,{postRequestFailed:()=>d9,unexpectedError:()=>u9});d();var u9="unexpected_error",d9="post_request_failed";var GG={[u9]:"Unexpected error in authentication.",[d9]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},Pde={unexpectedError:{code:u9,desc:GG[u9]},postRequestFailed:{code:d9,desc:GG[d9]}},Jn=class t extends Error{static{s(this,"AuthError")}constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||Je.EMPTY_STRING,this.errorMessage=r||Je.EMPTY_STRING,this.subError=n||Je.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function Bde(t,e){return new Jn(t,e?`${GG[t]} ${e}`:GG[t])}s(Bde,"createAuthError");var ts={};ra(ts,{authTimeNotFound:()=>L1,authorizationCodeMissingFromServerResponse:()=>Y_,bindingKeyNotRemoved:()=>x9,cannotAppendScopeSet:()=>V_,cannotRemoveEmptyScope:()=>j_,clientInfoDecodingError:()=>bb,clientInfoEmptyError:()=>L_,deviceCodeExpired:()=>h9,deviceCodePollingCancelled:()=>m9,deviceCodeUnknownError:()=>g9,emptyInputScopeSet:()=>wb,endSessionEndpointNotSupported:()=>K_,endpointResolutionError:()=>bd,hashNotDeserialized:()=>Q_,invalidAssertion:()=>C9,invalidCacheEnvironment:()=>F1,invalidCacheRecord:()=>$_,invalidClientCredential:()=>E9,invalidState:()=>Xh,keyIdMissing:()=>J_,maxAgeTranspired:()=>H_,methodNotImplemented:()=>Ti,missingTenantIdError:()=>T9,multipleMatchingAccounts:()=>p9,multipleMatchingAppMetadata:()=>W_,multipleMatchingTokens:()=>f9,nestedAppAuthBridgeDisabled:()=>w9,networkError:()=>F_,noAccountFound:()=>A9,noAccountInSilentRequest:()=>M1,noCryptoObject:()=>_b,noNetworkConnectivity:()=>b9,nonceMismatch:()=>q_,nullOrEmptyToken:()=>M_,openIdConfigError:()=>O_,requestCannotBeMade:()=>G_,stateMismatch:()=>U_,stateNotFound:()=>Tb,tokenClaimsCnfRequiredForSignedJwt:()=>z_,tokenParsingError:()=>Ib,tokenRefreshRequired:()=>O1,unexpectedCredentialType:()=>y9,userCanceled:()=>I9,userTimeoutReached:()=>v9});d();var bb="client_info_decoding_error",L_="client_info_empty_error",Ib="token_parsing_error",M_="null_or_empty_token",bd="endpoints_resolution_error",F_="network_error",O_="openid_config_error",Q_="hash_not_deserialized",Xh="invalid_state",U_="state_mismatch",Tb="state_not_found",q_="nonce_mismatch",L1="auth_time_not_found",H_="max_age_transpired",f9="multiple_matching_tokens",p9="multiple_matching_accounts",W_="multiple_matching_appMetadata",G_="request_cannot_be_made",j_="cannot_remove_empty_scope",V_="cannot_append_scopeset",wb="empty_input_scopeset",m9="device_code_polling_cancelled",h9="device_code_expired",g9="device_code_unknown_error",M1="no_account_in_silent_request",$_="invalid_cache_record",F1="invalid_cache_environment",A9="no_account_found",_b="no_crypto_object",y9="unexpected_credential_type",C9="invalid_assertion",E9="invalid_client_credential",O1="token_refresh_required",v9="user_timeout_reached",z_="token_claims_cnf_required_for_signedjwt",Y_="authorization_code_missing_from_server_response",x9="binding_key_not_removed",K_="end_session_endpoint_not_supported",J_="key_id_missing",b9="no_network_connectivity",I9="user_canceled",T9="missing_tenant_id_error",Ti="method_not_implemented",w9="nested_app_auth_bridge_disabled";var Xn={[bb]:"The client info could not be parsed/decoded correctly",[L_]:"The client info was empty",[Ib]:"Token cannot be parsed",[M_]:"The token is null or empty",[bd]:"Endpoints cannot be resolved",[F_]:"Network request failed",[O_]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Q_]:"The hash parameters could not be deserialized",[Xh]:"State was not the expected format",[U_]:"State mismatch error",[Tb]:"State not found",[q_]:"Nonce mismatch error",[L1]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[H_]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[f9]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[p9]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[W_]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[G_]:"Token request cannot be made without authorization code or refresh token.",[j_]:"Cannot remove null or empty scope from ScopeSet",[V_]:"Cannot append ScopeSet",[wb]:"Empty input ScopeSet cannot be processed",[m9]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[h9]:"Device code is expired.",[g9]:"Device code stopped polling for unknown reasons.",[M1]:"Please pass an account object, silent flow is not supported without account information",[$_]:"Cache record object was null or undefined.",[F1]:"Invalid environment when attempting to create cache entry",[A9]:"No account found in cache for given key.",[_b]:"No crypto object detected.",[y9]:"Unexpected credential type.",[C9]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[E9]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[O1]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[v9]:"User defined timeout for device code polling reached",[z_]:"Cannot generate a POP jwt if the token_claims are not populated",[Y_]:"Server response does not contain an authorization code to proceed",[x9]:"Could not remove the credential's binding key from storage.",[K_]:"The provided authority does not support logout",[J_]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[b9]:"No network connectivity. Check your internet connection.",[I9]:"User cancelled the flow.",[T9]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Ti]:"This method has not been implemented",[w9]:"The nested app auth bridge is disabled"},Dde={clientInfoDecodingError:{code:bb,desc:Xn[bb]},clientInfoEmptyError:{code:L_,desc:Xn[L_]},tokenParsingError:{code:Ib,desc:Xn[Ib]},nullOrEmptyToken:{code:M_,desc:Xn[M_]},endpointResolutionError:{code:bd,desc:Xn[bd]},networkError:{code:F_,desc:Xn[F_]},unableToGetOpenidConfigError:{code:O_,desc:Xn[O_]},hashNotDeserialized:{code:Q_,desc:Xn[Q_]},invalidStateError:{code:Xh,desc:Xn[Xh]},stateMismatchError:{code:U_,desc:Xn[U_]},stateNotFoundError:{code:Tb,desc:Xn[Tb]},nonceMismatchError:{code:q_,desc:Xn[q_]},authTimeNotFoundError:{code:L1,desc:Xn[L1]},maxAgeTranspired:{code:H_,desc:Xn[H_]},multipleMatchingTokens:{code:f9,desc:Xn[f9]},multipleMatchingAccounts:{code:p9,desc:Xn[p9]},multipleMatchingAppMetadata:{code:W_,desc:Xn[W_]},tokenRequestCannotBeMade:{code:G_,desc:Xn[G_]},removeEmptyScopeError:{code:j_,desc:Xn[j_]},appendScopeSetError:{code:V_,desc:Xn[V_]},emptyInputScopeSetError:{code:wb,desc:Xn[wb]},DeviceCodePollingCancelled:{code:m9,desc:Xn[m9]},DeviceCodeExpired:{code:h9,desc:Xn[h9]},DeviceCodeUnknownError:{code:g9,desc:Xn[g9]},NoAccountInSilentRequest:{code:M1,desc:Xn[M1]},invalidCacheRecord:{code:$_,desc:Xn[$_]},invalidCacheEnvironment:{code:F1,desc:Xn[F1]},noAccountFound:{code:A9,desc:Xn[A9]},noCryptoObj:{code:_b,desc:Xn[_b]},unexpectedCredentialType:{code:y9,desc:Xn[y9]},invalidAssertion:{code:C9,desc:Xn[C9]},invalidClientCredential:{code:E9,desc:Xn[E9]},tokenRefreshRequired:{code:O1,desc:Xn[O1]},userTimeoutReached:{code:v9,desc:Xn[v9]},tokenClaimsRequired:{code:z_,desc:Xn[z_]},noAuthorizationCodeFromServer:{code:Y_,desc:Xn[Y_]},bindingKeyNotRemovedError:{code:x9,desc:Xn[x9]},logoutNotSupported:{code:K_,desc:Xn[K_]},keyIdMissing:{code:J_,desc:Xn[J_]},noNetworkConnectivity:{code:b9,desc:Xn[b9]},userCanceledError:{code:I9,desc:Xn[I9]},missingTenantIdError:{code:T9,desc:Xn[T9]},nestedAppAuthBridgeDisabled:{code:w9,desc:Xn[w9]}},Sb=class t extends Jn{static{s(this,"ClientAuthError")}constructor(e,r){super(e,r?`${Xn[e]}: ${r}`:Xn[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function mt(t,e){return new Sb(t,e)}s(mt,"createClientAuthError");var K4={createNewGuid:s(()=>{throw mt(Ti)},"createNewGuid"),base64Decode:s(()=>{throw mt(Ti)},"base64Decode"),base64Encode:s(()=>{throw mt(Ti)},"base64Encode"),base64UrlEncode:s(()=>{throw mt(Ti)},"base64UrlEncode"),encodeKid:s(()=>{throw mt(Ti)},"encodeKid"),async getPublicKeyThumbprint(){throw mt(Ti)},async removeTokenBindingKey(){throw mt(Ti)},async clearKeystore(){throw mt(Ti)},async signJwt(){throw mt(Ti)},async hashString(){throw mt(Ti)}};d();var Ta;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Ta||(Ta={}));var k0=class t{static{s(this,"Logger")}constructor(e,r,n){this.level=Ta.Info;let i=s(()=>{},"defaultLoggerCallback"),o=e||t.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||i,this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level=typeof o.logLevel=="number"?o.logLevel:Ta.Info,this.correlationId=o.correlationId||Je.EMPTY_STRING,this.packageName=r||Je.EMPTY_STRING,this.packageVersion=n||Je.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ta.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let o=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Ta[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,o,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Ta.Error,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Ta.Error,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Ta.Warning,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Ta.Warning,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Ta.Info,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Ta.Info,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Ta.Verbose,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Ta.Verbose,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Ta.Trace,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Ta.Trace,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};d();var jG="@azure/msal-common",J4="15.8.1";d();var Q1={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};d();var el={};ra(el,{createAccessTokenEntity:()=>Mde,createIdTokenEntity:()=>Lde,createRefreshTokenEntity:()=>Fde,generateAppMetadataKey:()=>Hwt,generateAuthorityMetadataExpiresAt:()=>zG,generateCredentialKey:()=>R9,isAccessTokenEntity:()=>Bwt,isAppMetadataEntity:()=>Wwt,isAuthorityMetadataEntity:()=>Gwt,isAuthorityMetadataExpired:()=>YG,isCredentialEntity:()=>$G,isIdTokenEntity:()=>Dwt,isRefreshTokenEntity:()=>Nwt,isServerTelemetryEntity:()=>Uwt,isThrottlingEntity:()=>qwt,updateAuthorityEndpointMetadata:()=>Z4,updateCloudDiscoveryMetadata:()=>k9});d();var VG={};ra(VG,{checkMaxAge:()=>_9,extractTokenClaims:()=>U1,getJWSPayload:()=>qNe});d();function U1(t,e){let r=qNe(t);try{let n=e(r);return JSON.parse(n)}catch{throw mt(Ib)}}s(U1,"extractTokenClaims");function qNe(t){if(!t)throw mt(M_);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw mt(Ib);return r[2]}s(qNe,"getJWSPayload");function _9(t,e){if(e===0||Date.now()-3e5>t+e)throw mt(H_)}s(_9,"checkMaxAge");var Qs={};ra(Qs,{delay:()=>Pwt,isTokenExpired:()=>X4,nowSeconds:()=>P0,toDateFromSeconds:()=>S9,toSecondsFromDate:()=>kwt,wasClockTurnedBack:()=>Nde});d();function P0(){return Math.round(new Date().getTime()/1e3)}s(P0,"nowSeconds");function kwt(t){return t.getTime()/1e3}s(kwt,"toSecondsFromDate");function S9(t){return t?new Date(Number(t)*1e3):new Date}s(S9,"toDateFromSeconds");function X4(t,e){let r=Number(t)||0;return P0()+e>r}s(X4,"isTokenExpired");function Nde(t){return Number(t)>P0()}s(Nde,"wasClockTurnedBack");function Pwt(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}s(Pwt,"delay");function R9(t){return[Lwt(t),Mwt(t),Fwt(t),Owt(t),Qwt(t)].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(R9,"generateCredentialKey");function Lde(t,e,r,n,i){return{credentialType:mo.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i}}s(Lde,"createIdTokenEntity");function Mde(t,e,r,n,i,o,a,c,l,u,f,p,m,h,g){let y={homeAccountId:t,credentialType:mo.ACCESS_TOKEN,secret:r,cachedAt:P0().toString(),expiresOn:a.toString(),extendedExpiresOn:c.toString(),environment:e,clientId:n,realm:i,target:o,tokenType:f||Yi.BEARER};if(p&&(y.userAssertionHash=p),u&&(y.refreshOn=u.toString()),h&&(y.requestedClaims=h,y.requestedClaimsHash=g),y.tokenType?.toLowerCase()!==Yi.BEARER.toLowerCase())switch(y.credentialType=mo.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case Yi.POP:let E=U1(r,l);if(!E?.cnf?.kid)throw mt(z_);y.keyId=E.cnf.kid;break;case Yi.SSH:y.keyId=m}return y}s(Mde,"createAccessTokenEntity");function Fde(t,e,r,n,i,o,a){let c={credentialType:mo.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return o&&(c.userAssertionHash=o),i&&(c.familyId=i),a&&(c.expiresOn=a.toString()),c}s(Fde,"createRefreshTokenEntity");function $G(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}s($G,"isCredentialEntity");function Bwt(t){return t?$G(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===mo.ACCESS_TOKEN||t.credentialType===mo.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}s(Bwt,"isAccessTokenEntity");function Dwt(t){return t?$G(t)&&t.hasOwnProperty("realm")&&t.credentialType===mo.ID_TOKEN:!1}s(Dwt,"isIdTokenEntity");function Nwt(t){return t?$G(t)&&t.credentialType===mo.REFRESH_TOKEN:!1}s(Nwt,"isRefreshTokenEntity");function Lwt(t){return[t.homeAccountId,t.environment].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(Lwt,"generateAccountId");function Mwt(t){let e=t.credentialType===mo.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(Mwt,"generateCredentialId");function Fwt(t){return(t.target||"").toLowerCase()}s(Fwt,"generateTarget");function Owt(t){return(t.requestedClaimsHash||"").toLowerCase()}s(Owt,"generateClaimsHash");function Qwt(t){return t.tokenType&&t.tokenType.toLowerCase()!==Yi.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}s(Qwt,"generateScheme");function Uwt(t,e){let r=t.indexOf(Zc.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}s(Uwt,"isServerTelemetryEntity");function qwt(t,e){let r=!1;t&&(r=t.indexOf(dy.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}s(qwt,"isThrottlingEntity");function Hwt({environment:t,clientId:e}){return[a9,t,e].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(Hwt,"generateAppMetadataKey");function Wwt(t,e){return e?t.indexOf(a9)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}s(Wwt,"isAppMetadataEntity");function Gwt(t,e){return e?t.indexOf($4.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}s(Gwt,"isAuthorityMetadataEntity");function zG(){return P0()+$4.REFRESH_TIME_SECONDS}s(zG,"generateAuthorityMetadataExpiresAt");function Z4(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}s(Z4,"updateAuthorityEndpointMetadata");function k9(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}s(k9,"updateCloudDiscoveryMetadata");function YG(t){return t.expiresAt<=P0()}s(YG,"isAuthorityMetadataExpired");d();d();var eP={};ra(eP,{authorityMismatch:()=>O9,authorityUriInsecure:()=>Z_,cannotAllowPlatformBroker:()=>F9,cannotSetOIDCOptions:()=>M9,claimsRequestParsingError:()=>P9,emptyInputScopesError:()=>tS,invalidAuthenticationHeader:()=>L9,invalidAuthorityMetadata:()=>oS,invalidClaims:()=>Rb,invalidCloudDiscoveryMetadata:()=>kb,invalidCodeChallengeMethod:()=>B9,logoutRequestEmpty:()=>nS,missingNonceAuthenticationHeader:()=>N9,missingSshJwk:()=>q1,missingSshKid:()=>D9,pkceParamsMissing:()=>iS,redirectUriEmpty:()=>X_,tokenRequestEmpty:()=>rS,untrustedAuthority:()=>sS,urlEmptyError:()=>eS,urlParseError:()=>fy});d();var X_="redirect_uri_empty",P9="claims_request_parsing_error",Z_="authority_uri_insecure",fy="url_parse_error",eS="empty_url_error",tS="empty_input_scopes_error",Rb="invalid_claims",rS="token_request_empty",nS="logout_request_empty",B9="invalid_code_challenge_method",iS="pkce_params_missing",kb="invalid_cloud_discovery_metadata",oS="invalid_authority_metadata",sS="untrusted_authority",q1="missing_ssh_jwk",D9="missing_ssh_kid",N9="missing_nonce_authentication_header",L9="invalid_authentication_header",M9="cannot_set_OIDCOptions",F9="cannot_allow_platform_broker",O9="authority_mismatch";var Fa={[X_]:"A redirect URI is required for all calls, and none has been set.",[P9]:"Could not parse the given claims request object.",[Z_]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[fy]:"URL could not be parsed into appropriate segments.",[eS]:"URL was empty or null.",[tS]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Rb]:"Given claims parameter must be a stringified JSON object.",[rS]:"Token request was empty and not found in cache.",[nS]:"The logout request was null or undefined.",[B9]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[iS]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[kb]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[oS]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[sS]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[q1]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[D9]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[N9]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[L9]:"Invalid authentication header provided",[M9]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[F9]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[O9]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Ode={redirectUriNotSet:{code:X_,desc:Fa[X_]},claimsRequestParsingError:{code:P9,desc:Fa[P9]},authorityUriInsecure:{code:Z_,desc:Fa[Z_]},urlParseError:{code:fy,desc:Fa[fy]},urlEmptyError:{code:eS,desc:Fa[eS]},emptyScopesError:{code:tS,desc:Fa[tS]},invalidClaimsRequest:{code:Rb,desc:Fa[Rb]},tokenRequestEmptyError:{code:rS,desc:Fa[rS]},logoutRequestEmptyError:{code:nS,desc:Fa[nS]},invalidCodeChallengeMethod:{code:B9,desc:Fa[B9]},invalidCodeChallengeParams:{code:iS,desc:Fa[iS]},invalidCloudDiscoveryMetadata:{code:kb,desc:Fa[kb]},invalidAuthorityMetadata:{code:oS,desc:Fa[oS]},untrustedAuthority:{code:sS,desc:Fa[sS]},missingSshJwk:{code:q1,desc:Fa[q1]},missingSshKid:{code:D9,desc:Fa[D9]},missingNonceAuthenticationHeader:{code:N9,desc:Fa[N9]},invalidAuthenticationHeader:{code:L9,desc:Fa[L9]},cannotSetOIDCOptions:{code:M9,desc:Fa[M9]},cannotAllowPlatformBroker:{code:F9,desc:Fa[F9]},authorityMismatch:{code:O9,desc:Fa[O9]}},tP=class t extends Jn{static{s(this,"ClientConfigurationError")}constructor(e){super(e,Fa[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function rs(t){return new tP(t)}s(rs,"createClientConfigurationError");d();var ua=class{static{s(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s(o=>decodeURIComponent(o.replace(/\+/g," ")),"decode");return n.forEach(o=>{if(o.trim()){let[a,c]=o.split(/=(.+)/g,2);a&&c&&(r[i(a)]=i(c))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var Sc=class t{static{s(this,"ScopeSet")}constructor(e){let r=e?ua.trimArrayEntries([...e]):[],n=r?ua.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw rs(tS);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||Je.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(Je.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return kde.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw mt(V_)}}removeScope(e){if(!e)throw mt(j_);this.scopes.delete(e.trim())}removeOIDCScopes(){kde.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw mt(wb);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw mt(wb);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):Je.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};d();d();function rP(t,e){if(!t)throw mt(L_);try{let r=e(t);return JSON.parse(r)}catch{throw mt(bb)}}s(rP,"buildClientInfo");function py(t){if(!t)throw mt(bb);let e=t.split(Ma.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Je.EMPTY_STRING:e[1]}}s(py,"buildClientInfoFromHomeAccountId");d();function HNe(t,e){return!!t&&!!e&&t===e.split(".")[1]}s(HNe,"tenantIdMatchesHomeTenant");function Q9(t,e,r,n){if(n){let{oid:i,sub:o,tid:a,name:c,tfp:l,acr:u}=n,f=a||l||u||"";return{tenantId:f,localAccountId:i||o||"",name:c,isHomeTenant:HNe(f,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:HNe(r,t)}}s(Q9,"buildTenantProfile");function KG(t,e,r,n){let i=t;if(e){let{isHomeTenant:o,...a}=e;i={...t,...a}}if(r){let{isHomeTenant:o,...a}=Q9(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...a,idTokenClaims:r,idToken:n},i}return i}s(KG,"updateAccountTenantProfileData");d();var tm={Default:0,Adfs:1,Dsts:2,Ciam:3};d();function JG(t){return t&&(t.tid||t.tfp||t.acr)||null}s(JG,"getTenantIdFromIdTokenClaims");d();var Wu={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var cu=class t{static{s(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let i=new t;r.authorityType===tm.Adfs?i.authorityType=D_.ADFS_ACCOUNT_TYPE:r.protocolMode===Wu.OIDC?i.authorityType=D_.GENERIC_ACCOUNT_TYPE:i.authorityType=D_.MSSTS_ACCOUNT_TYPE;let o;e.clientInfo&&n&&(o=rP(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let a=e.environment||r&&r.getPreferredCache();if(!a)throw mt(F1);i.environment=a,i.realm=o?.utid||JG(e.idTokenClaims)||"",i.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let c=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=c||l||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let u=Q9(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[u]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||D_.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,r,n,i,o){if(!(r===tm.Adfs||r===tm.Dsts)){if(e)try{let a=rP(e,i.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let o=e.idTokenClaims||{},a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}};d();d();var lu={};ra(lu,{getDeserializedResponse:()=>Qde,mapToQueryString:()=>my,stripLeadingHashOrQuery:()=>WNe});d();function WNe(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}s(WNe,"stripLeadingHashOrQuery");function Qde(t){if(!t||t.indexOf("=")<0)return null;try{let e=WNe(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw mt(Q_)}return null}s(Qde,"getDeserializedResponse");function my(t,e=!0,r){let n=new Array;return t.forEach((i,o)=>{!e&&r&&o in r?n.push(`${o}=${i}`):n.push(`${o}=${encodeURIComponent(i)}`)}),n.join("&")}s(my,"mapToQueryString");var wi=class t{static{s(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw rs(eS);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return ua.endsWith(r,"?")?r=r.slice(0,-1):ua.endsWith(r,"?/")&&(r=r.slice(0,-2)),ua.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw rs(fy)}if(!e.HostNameAndPort||!e.PathSegments)throw rs(fy);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw rs(Z_)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===vf.COMMON||n[0]===vf.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw rs(fy);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(o=>o&&o.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw rs(fy);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===Je.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Qde(e)}};var jNe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Ude=jNe.endpointMetadata,qde=jNe.instanceDiscoveryMetadata,Hde=new Set;qde.metadata.forEach(t=>{t.aliases.forEach(e=>{Hde.add(e)})});function VNe(t,e){let r,n=t.canonicalAuthority;if(n){let i=new wi(n).getUrlComponents().HostNameAndPort;r=GNe(i,t.cloudDiscoveryMetadata?.metadata,xd.CONFIG,e)||GNe(i,qde.metadata,xd.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}s(VNe,"getAliasesFromStaticSources");function GNe(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=U9(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}s(GNe,"getAliasesFromMetadata");function $Ne(t){return U9(qde.metadata,t)}s($Ne,"getCloudDiscoveryMetadataFromHardcodedValues");function U9(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}s(U9,"getCloudDiscoveryMetadataFromNetworkResponse");d();d();var Wde="cache_quota_exceeded",XG="cache_error_unknown";var Gde={[Wde]:"Exceeded cache storage capacity.",[XG]:"Unexpected error occurred when using cache storage."},q9=class t extends Jn{static{s(this,"CacheError")}constructor(e,r){let n=r||(Gde[e]?Gde[e]:Gde[XG]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function zNe(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new q9(Wde):new q9(t.name,t.message):new q9(XG)}s(zNe,"createCacheError");var Pb=class{static{s(this,"CacheManager")}constructor(e,r,n,i,o){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(jG,J4),this.staticAuthorityOptions=o,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,o){let a=null,c;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;let l=this.getIdToken(e,i,r,n.tenantId);return l&&(c=U1(l.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(c,o))?null:(a=KG(e,n,c,l?.secret),a)}getTenantProfilesFromAccountEntity(e,r,n,i){let o=e.getAccountInfo(),a=o.tenantProfiles||new Map,c=this.getTokenKeys();if(n){let u=a.get(n);if(u)a=new Map([[n,u]]);else return[]}let l=[];return a.forEach(u=>{let f=this.getTenantedAccountInfoByFilter(o,c,u,r,i);f&&l.push(f)}),l}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw mt($_);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof Jn?i:zNe(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=Sc.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,n,!1))return;let c=this.getAccessTokenCredential(a,r);c&&this.credentialMatchesFilter(c,n)&&Sc.fromString(c.target).intersectingScopeSets(o)&&this.removeAccessToken(a,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let a=this.getAccount(o,r);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;let c={localAccountId:e?.localAccountId,name:e?.name},l=a.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,c));l&&l.length===0||i.push(a)}),i}isAccountKey(e,r,n){return!(e.split(Ma.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(Ma.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(mo.ID_TOKEN.toLowerCase())===-1&&r.indexOf(mo.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(mo.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(mo.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(mo.REFRESH_TOKEN.toLowerCase())>-1){let n=`${mo.REFRESH_TOKEN}${Ma.CACHE_KEY_SEPARATOR}${this.clientId}${Ma.CACHE_KEY_SEPARATOR}`,i=`${mo.REFRESH_TOKEN}${Ma.CACHE_KEY_SEPARATOR}${N1}${Ma.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(i.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===mo.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===Yi.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let o=this.getAppMetadata(i);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(n[i]=o))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let o=this.getAuthorityMetadata(i);o&&o.aliases.indexOf(e)!==-1&&(n=o)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),i=e.generateAccountId();n.idToken.forEach(o=>{o.indexOf(i)===0&&this.removeIdToken(o,r)}),n.accessToken.forEach(o=>{o.indexOf(i)===0&&this.removeAccessToken(o,r)}),n.refreshToken.forEach(o=>{o.indexOf(i)===0&&this.removeRefreshToken(o,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==mo.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==Yi.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=cu.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getIdToken called");let a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:mo.ID_TOKEN,clientId:this.clientId,realm:i},c=this.getIdTokensByFilter(a,r,n),l=c.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let u=c;if(!i){let f=new Map;c.forEach((m,h)=>{m.realm===e.tenantId&&f.set(h,m)});let p=f.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),c.values().next().value;if(p===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),f.values().next().value;u=f}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((f,p)=>{this.removeIdToken(p,r)}),o&&r&&o.addFields({multiMatchedID:c.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),c.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return i.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;let c=this.getIdTokenCredential(a,r);c&&this.credentialMatchesFilter(c,e)&&o.set(a,c)}),o}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let o=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);let a=Sc.createSearchScopes(r.scopes),c=r.authenticationScheme||Yi.BEARER,l=c&&c.toLowerCase()!==Yi.BEARER.toLowerCase()?mo.ACCESS_TOKEN_WITH_AUTH_SCHEME:mo.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},f=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];f.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,u,!0)){let g=this.getAccessTokenCredential(h,o);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});let m=p.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),p.forEach(h=>{this.removeAccessToken(R9(h),o)}),this.performanceClient.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),p[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let o=r.target.asArray();for(let a=0;a<o.length;a++){if(n&&!i.includes(o[a].toLowerCase()))return!1;if(!n&&i.includes(o[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&i.push(a)}),i}getRefreshToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let a=r?N1:void 0,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:mo.REFRESH_TOKEN,clientId:this.clientId,familyId:a},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,u=[];l.forEach(p=>{if(this.refreshTokenKeyMatchesFilter(p,c)){let m=this.getRefreshTokenCredential(p,n);m&&this.credentialMatchesFilter(m,c)&&u.push(m)}});let f=u.length;return f<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(f>1&&o&&n&&o.addFields({multiMatchedRT:f},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(a=>n[a]),o=i.length;if(o<1)return null;if(o>1)throw mt(W_);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===N1)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=VNe(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==mo.ACCESS_TOKEN&&e.credentialType!==mo.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Sc.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(a9)!==-1}isAuthorityMetadata(e){return e.indexOf($4.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${$4.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},H9=class extends Pb{static{s(this,"DefaultStorageClass")}async setAccount(){throw mt(Ti)}getAccount(){throw mt(Ti)}async setIdTokenCredential(){throw mt(Ti)}getIdTokenCredential(){throw mt(Ti)}async setAccessTokenCredential(){throw mt(Ti)}getAccessTokenCredential(){throw mt(Ti)}async setRefreshTokenCredential(){throw mt(Ti)}getRefreshTokenCredential(){throw mt(Ti)}setAppMetadata(){throw mt(Ti)}getAppMetadata(){throw mt(Ti)}setServerTelemetry(){throw mt(Ti)}getServerTelemetry(){throw mt(Ti)}setAuthorityMetadata(){throw mt(Ti)}getAuthorityMetadata(){throw mt(Ti)}getAuthorityMetadataKeys(){throw mt(Ti)}setThrottlingCache(){throw mt(Ti)}getThrottlingCache(){throw mt(Ti)}removeItem(){throw mt(Ti)}getKeys(){throw mt(Ti)}getAccountKeys(){throw mt(Ti)}getTokenKeys(){throw mt(Ti)}};d();d();var Ve={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},UJr=new Map([[Ve.AcquireTokenByCode,"ATByCode"],[Ve.AcquireTokenByRefreshToken,"ATByRT"],[Ve.AcquireTokenSilent,"ATS"],[Ve.AcquireTokenSilentAsync,"ATSAsync"],[Ve.AcquireTokenPopup,"ATPopup"],[Ve.AcquireTokenRedirect,"ATRedirect"],[Ve.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Ve.CryptoOptsSignJwt,"CryptoSignJwt"],[Ve.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Ve.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Ve.SilentRefreshClientAcquireToken,"SltRClientAT"],[Ve.SsoSilent,"SsoSlt"],[Ve.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Ve.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Ve.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Ve.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Ve.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Ve.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Ve.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Ve.BrokerHandhshake,"BrokerHandshake"],[Ve.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Ve.AcquireTokenByBroker,"ATByBroker"],[Ve.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Ve.RefreshTokenClientAcquireToken,"RTClientAT"],[Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Ve.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Ve.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Ve.AcquireTokenFromCache,"ATFromCache"],[Ve.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Ve.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Ve.AcquireTokenBySilentIframe,"ATBySltIframe"],[Ve.InitializeBaseRequest,"InitBaseReq"],[Ve.InitializeSilentRequest,"InitSltReq"],[Ve.InitializeClientApplication,"InitClientApplication"],[Ve.InitializeCache,"InitCache"],[Ve.ImportExistingCache,"importCache"],[Ve.SetUserData,"setUserData"],[Ve.LocalStorageUpdated,"localStorageUpdated"],[Ve.SilentIframeClientTokenHelper,"SIClientTHelper"],[Ve.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Ve.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Ve.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Ve.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Ve.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Ve.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Ve.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Ve.GetAuthCodeUrl,"GetAuthCodeUrl"],[Ve.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Ve.HandleCodeResponse,"HandleCodeResp"],[Ve.HandleResponseEar,"HandleRespEar"],[Ve.HandleResponseCode,"HandleRespCode"],[Ve.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Ve.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Ve.AuthClientAcquireToken,"AuthClientAT"],[Ve.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Ve.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Ve.PopTokenGenerateCnf,"PopTGenCnf"],[Ve.PopTokenGenerateKid,"PopTGenKid"],[Ve.HandleServerTokenResponse,"HandleServerTRes"],[Ve.DeserializeResponse,"DeserializeRes"],[Ve.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Ve.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Ve.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Ve.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Ve.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Ve.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Ve.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Ve.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Ve.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Ve.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Ve.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Ve.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Ve.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Ve.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Ve.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Ve.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Ve.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Ve.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Ve.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Ve.NativeGenerateAuthResult,"NtvGenAuthRes"],[Ve.RemoveHiddenIframe,"RemoveHiddenIframe"],[Ve.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Ve.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Ve.GeneratePkceCodes,"GenPkceCodes"],[Ve.GenerateCodeVerifier,"GenCodeVerifier"],[Ve.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Ve.Sha256Digest,"Sha256Digest"],[Ve.GetRandomValues,"GetRandomValues"],[Ve.GenerateHKDF,"genHKDF"],[Ve.GenerateBaseKey,"genBaseKey"],[Ve.Base64Decode,"b64Decode"],[Ve.UrlEncodeArr,"urlEncArr"],[Ve.Encrypt,"encrypt"],[Ve.Decrypt,"decrypt"],[Ve.GenerateEarKey,"genEarKey"],[Ve.DecryptEarResponse,"decryptEarResp"]]),YNe={NotStarted:0,InProgress:1,Completed:2};var ZG=class{static{s(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},aS=class{static{s(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:s(()=>null,"end"),discard:s(()=>{},"discard"),add:s(()=>{},"add"),increment:s(()=>{},"increment"),event:{eventId:this.generateId(),status:YNe.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new ZG}}startPerformanceMeasurement(){return new ZG}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var jwt={tokenRenewalOffsetSeconds:z4,preventCorsPreflight:!1},Vwt={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ta.Info,correlationId:Je.EMPTY_STRING},$wt={claimsBasedCachingEnabled:!1},zwt={async sendGetRequestAsync(){throw mt(Ti)},async sendPostRequestAsync(){throw mt(Ti)}},Ywt={sku:Je.SKU,version:J4,cpu:Je.EMPTY_STRING,os:Je.EMPTY_STRING},Kwt={clientSecret:Je.EMPTY_STRING,clientAssertion:void 0},Jwt={azureCloudInstance:Q1.None,tenant:`${Je.DEFAULT_COMMON_TENANT}`},Xwt={application:{appName:"",appVersion:""}};function KNe({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:f,persistencePlugin:p,serializableCache:m}){let h={...Vwt,...r};return{authOptions:Zwt(t),systemOptions:{...jwt,...e},loggerOptions:h,cacheOptions:{...$wt,...n},storageInterface:i||new H9(t.clientId,K4,new k0(h),new aS),networkInterface:o||zwt,cryptoInterface:a||K4,clientCredentials:c||Kwt,libraryInfo:{...Ywt,...l},telemetry:{...Xwt,...u},serverTelemetryManager:f||null,persistencePlugin:p||null,serializableCache:m||null}}s(KNe,"buildClientConfiguration");function Zwt(t){return{clientCapabilities:[],azureCloudOptions:Jwt,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}s(Zwt,"buildAuthOptions");function ej(t){return t.authOptions.authority.options.protocolMode===Wu.OIDC}s(ej,"isOidcProtocolMode");d();var Id={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var rr={};ra(rr,{addApplicationTelemetry:()=>j9,addAuthorizationCode:()=>Lfe,addBrokerParameters:()=>G1,addCcsOid:()=>H1,addCcsUpn:()=>Bb,addClaims:()=>pS,addClientAssertion:()=>z9,addClientAssertionType:()=>Y9,addClientCapabilitiesToClaims:()=>JNe,addClientId:()=>dS,addClientInfo:()=>hS,addClientSecret:()=>$9,addCodeChallengeParams:()=>m_t,addCodeVerifier:()=>Ffe,addCorrelationId:()=>mS,addDeviceCode:()=>h_t,addDomainHint:()=>Bfe,addEARParameters:()=>E_t,addExtraQueryParameters:()=>W1,addGrantType:()=>K9,addIdTokenHint:()=>Pfe,addInstanceAware:()=>J9,addLibraryInfo:()=>G9,addLoginHint:()=>iP,addLogoutHint:()=>Ofe,addNativeBroker:()=>p_t,addNonce:()=>Nfe,addOboAssertion:()=>g_t,addPassword:()=>C_t,addPopToken:()=>X9,addPostLogoutRedirectUri:()=>kfe,addPrompt:()=>Dfe,addRedirectUri:()=>fS,addRefreshToken:()=>Mfe,addRequestTokenUse:()=>A_t,addResponseMode:()=>Rfe,addResponseType:()=>f_t,addScopes:()=>uS,addServerTelemetry:()=>eL,addSid:()=>sj,addSshJwk:()=>Z9,addState:()=>V9,addThrottling:()=>tL,addUsername:()=>y_t,instrumentBrokerParams:()=>lS});d();var cS={};ra(cS,{ACCESS_TOKEN:()=>r_t,BROKER_CLIENT_ID:()=>W9,BROKER_REDIRECT_URI:()=>oj,CCS_HEADER:()=>u_t,CLAIMS:()=>zde,CLIENT_ASSERTION:()=>yfe,CLIENT_ASSERTION_TYPE:()=>Cfe,CLIENT_ID:()=>hy,CLIENT_INFO:()=>a_t,CLIENT_REQUEST_ID:()=>ife,CLIENT_SECRET:()=>Afe,CODE:()=>efe,CODE_CHALLENGE:()=>tfe,CODE_CHALLENGE_METHOD:()=>rfe,CODE_VERIFIER:()=>nfe,DEVICE_CODE:()=>gfe,DOMAIN_HINT:()=>wfe,EAR_JWE_CRYPTO:()=>Sfe,EAR_JWK:()=>_fe,ERROR:()=>e_t,ERROR_DESCRIPTION:()=>t_t,EXPIRES_IN:()=>i_t,FOCI:()=>l_t,GRANT_TYPE:()=>$de,ID_TOKEN:()=>n_t,ID_TOKEN_HINT:()=>hfe,INSTANCE_AWARE:()=>nP,LOGIN_HINT:()=>Tfe,LOGOUT_HINT:()=>bfe,NATIVE_BROKER:()=>xfe,NONCE:()=>Xde,OBO_ASSERTION:()=>Efe,ON_BEHALF_OF:()=>c_t,POST_LOGOUT_URI:()=>mfe,PROMPT:()=>Zde,REDIRECT_URI:()=>tj,REFRESH_TOKEN:()=>Kde,REFRESH_TOKEN_EXPIRES_IN:()=>o_t,REQUESTED_TOKEN_USE:()=>vfe,REQ_CNF:()=>nj,RESPONSE_MODE:()=>Vde,RESPONSE_TYPE:()=>jde,RETURN_SPA_CODE:()=>ij,SCOPE:()=>Yde,SESSION_STATE:()=>s_t,SID:()=>Ife,STATE:()=>Jde,TOKEN_TYPE:()=>rj,X_APP_NAME:()=>ffe,X_APP_VER:()=>pfe,X_CLIENT_CPU:()=>cfe,X_CLIENT_CURR_TELEM:()=>lfe,X_CLIENT_EXTRA_SKU:()=>d_t,X_CLIENT_LAST_TELEM:()=>ufe,X_CLIENT_OS:()=>afe,X_CLIENT_SKU:()=>ofe,X_CLIENT_VER:()=>sfe,X_MS_LIB_CAPABILITY:()=>dfe});d();var hy="client_id",tj="redirect_uri",jde="response_type",Vde="response_mode",$de="grant_type",zde="claims",Yde="scope",e_t="error",t_t="error_description",r_t="access_token",n_t="id_token",Kde="refresh_token",i_t="expires_in",o_t="refresh_token_expires_in",Jde="state",Xde="nonce",Zde="prompt",s_t="session_state",a_t="client_info",efe="code",tfe="code_challenge",rfe="code_challenge_method",nfe="code_verifier",ife="client-request-id",ofe="x-client-SKU",sfe="x-client-VER",afe="x-client-OS",cfe="x-client-CPU",lfe="x-client-current-telemetry",ufe="x-client-last-telemetry",dfe="x-ms-lib-capability",ffe="x-app-name",pfe="x-app-ver",mfe="post_logout_redirect_uri",hfe="id_token_hint",gfe="device_code",Afe="client_secret",yfe="client_assertion",Cfe="client_assertion_type",rj="token_type",nj="req_cnf",Efe="assertion",vfe="requested_token_use",c_t="on_behalf_of",l_t="foci",u_t="X-AnchorMailbox",ij="return_spa_code",xfe="nativebroker",bfe="logout_hint",Ife="sid",Tfe="login_hint",wfe="domain_hint",d_t="x-client-xtra-sku",W9="brk_client_id",oj="brk_redirect_uri",nP="instance_aware",_fe="ear_jwk",Sfe="ear_jwe_crypto";function lS(t,e,r){if(!e)return;let n=t.get(hy);n&&t.has(W9)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(tj)},e)}s(lS,"instrumentBrokerParams");function f_t(t,e){t.set(jde,e)}s(f_t,"addResponseType");function Rfe(t,e){t.set(Vde,e||uy.QUERY)}s(Rfe,"addResponseMode");function p_t(t){t.set(xfe,"1")}s(p_t,"addNativeBroker");function uS(t,e,r=!0,n=Ef){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],o=new Sc(i);t.set(Yde,o.printScopes())}s(uS,"addScopes");function dS(t,e){t.set(hy,e)}s(dS,"addClientId");function fS(t,e){t.set(tj,e)}s(fS,"addRedirectUri");function kfe(t,e){t.set(mfe,e)}s(kfe,"addPostLogoutRedirectUri");function Pfe(t,e){t.set(hfe,e)}s(Pfe,"addIdTokenHint");function Bfe(t,e){t.set(wfe,e)}s(Bfe,"addDomainHint");function iP(t,e){t.set(Tfe,e)}s(iP,"addLoginHint");function Bb(t,e){t.set(Es.CCS_HEADER,`UPN:${e}`)}s(Bb,"addCcsUpn");function H1(t,e){t.set(Es.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}s(H1,"addCcsOid");function sj(t,e){t.set(Ife,e)}s(sj,"addSid");function pS(t,e,r){let n=JNe(e,r);try{JSON.parse(n)}catch{throw rs(Rb)}t.set(zde,n)}s(pS,"addClaims");function mS(t,e){t.set(ife,e)}s(mS,"addCorrelationId");function G9(t,e){t.set(ofe,e.sku),t.set(sfe,e.version),e.os&&t.set(afe,e.os),e.cpu&&t.set(cfe,e.cpu)}s(G9,"addLibraryInfo");function j9(t,e){e?.appName&&t.set(ffe,e.appName),e?.appVersion&&t.set(pfe,e.appVersion)}s(j9,"addApplicationTelemetry");function Dfe(t,e){t.set(Zde,e)}s(Dfe,"addPrompt");function V9(t,e){e&&t.set(Jde,e)}s(V9,"addState");function Nfe(t,e){t.set(Xde,e)}s(Nfe,"addNonce");function m_t(t,e,r){if(e&&r)t.set(tfe,e),t.set(rfe,r);else throw rs(iS)}s(m_t,"addCodeChallengeParams");function Lfe(t,e){t.set(efe,e)}s(Lfe,"addAuthorizationCode");function h_t(t,e){t.set(gfe,e)}s(h_t,"addDeviceCode");function Mfe(t,e){t.set(Kde,e)}s(Mfe,"addRefreshToken");function Ffe(t,e){t.set(nfe,e)}s(Ffe,"addCodeVerifier");function $9(t,e){t.set(Afe,e)}s($9,"addClientSecret");function z9(t,e){e&&t.set(yfe,e)}s(z9,"addClientAssertion");function Y9(t,e){e&&t.set(Cfe,e)}s(Y9,"addClientAssertionType");function g_t(t,e){t.set(Efe,e)}s(g_t,"addOboAssertion");function A_t(t,e){t.set(vfe,e)}s(A_t,"addRequestTokenUse");function K9(t,e){t.set($de,e)}s(K9,"addGrantType");function hS(t){t.set(UNe,"1")}s(hS,"addClientInfo");function J9(t){t.has(nP)||t.set(nP,"true")}s(J9,"addInstanceAware");function W1(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}s(W1,"addExtraQueryParameters");function JNe(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw rs(Rb)}return e&&e.length>0&&(r.hasOwnProperty(B_.ACCESS_TOKEN)||(r[B_.ACCESS_TOKEN]={}),r[B_.ACCESS_TOKEN][B_.XMS_CC]={values:e}),JSON.stringify(r)}s(JNe,"addClientCapabilitiesToClaims");function y_t(t,e){t.set(l9.username,e)}s(y_t,"addUsername");function C_t(t,e){t.set(l9.password,e)}s(C_t,"addPassword");function X9(t,e){e&&(t.set(rj,Yi.POP),t.set(nj,e))}s(X9,"addPopToken");function Z9(t,e){e&&(t.set(rj,Yi.SSH),t.set(nj,e))}s(Z9,"addSshJwk");function eL(t,e){t.set(lfe,e.generateCurrentRequestHeaderValue()),t.set(ufe,e.generateLastRequestHeaderValue())}s(eL,"addServerTelemetry");function tL(t){t.set(dfe,dy.X_MS_LIB_CAPABILITY_VALUE)}s(tL,"addThrottling");function Ofe(t,e){t.set(bfe,e)}s(Ofe,"addLogoutHint");function G1(t,e,r){t.has(W9)||t.set(W9,e),t.has(oj)||t.set(oj,r)}s(G1,"addBrokerParameters");function E_t(t,e){t.set(_fe,encodeURIComponent(e)),t.set(Sfe,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}s(E_t,"addEARParameters");var cj={};ra(cj,{createDiscoveredInstance:()=>Ufe});d();d();d();function XNe(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}s(XNe,"isOpenIdConfigResponse");d();function ZNe(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}s(ZNe,"isCloudInstanceDiscoveryResponse");d();function e6e(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}s(e6e,"isCloudInstanceDiscoveryErrorResponse");d();d();var t6e=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}try{let c=t(...o);return a?.end({success:!0}),r.trace(`Returning result from ${e}`),c}catch(c){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c}},"invoke"),Ki=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}return n?.setPreQueueTime(e,i),t(...o).then(c=>(r.trace(`Returning result from ${e}`),a?.end({success:!0}),c)).catch(c=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c})},"invokeAsync");var rL=class t{static{s(this,"RegionDiscovery")}constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Ve.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=N_.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let o=await Ki(this.getRegionFromIMDS.bind(this),Ve.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Je.IMDS_VERSION,i);if(o.status===Kn.SUCCESS&&(n=o.body,r.region_source=N_.IMDS),o.status===Kn.BAD_REQUEST){let a=await Ki(this.getCurrentVersion.bind(this),Ve.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=N_.FAILED_AUTO_DETECTION,null;let c=await Ki(this.getRegionFromIMDS.bind(this),Ve.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===Kn.SUCCESS&&(n=c.body,r.region_source=N_.IMDS)}}catch{return r.region_source=N_.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=N_.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Ve.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Je.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,Je.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Ve.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${Je.IMDS_ENDPOINT}?format=json`,e);return r.status===Kn.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};rL.IMDS_OPTIONS={headers:{Metadata:"true"}};var Zh=class t{static{s(this,"Authority")}constructor(e,r,n,i,o,a,c,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=c,this.correlationId=a,this.managedIdentity=l||!1,this.regionDiscovery=new rL(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Je.CIAM_AUTH_URL))return tm.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case Je.ADFS:return tm.Adfs;case Je.DSTS:return tm.Dsts}return tm.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new wi(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw mt(bd)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw mt(bd)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw mt(bd)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw mt(K_);return this.replacePath(this.metadata.end_session_endpoint)}else throw mt(bd)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw mt(bd)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw mt(bd)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===tm.Default&&this.protocolMode!==Wu.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new wi(this.metadata.canonical_authority).getUrlComponents(),o=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((c,l)=>{let u=o[l];if(l===0&&this.canReplaceTenant(i)){let f=new wi(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==f&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${f}`),u=f)}c!==u&&(r=r.replace(`/${u}/`,`/${c}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===tm.Adfs||this.protocolMode===Wu.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Ve.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await Ki(this.updateCloudDiscoveryMetadata.bind(this),Ve.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await Ki(this.updateEndpointMetadata.bind(this),Ve.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:zG(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==xd.CACHE&&n?.source!==xd.CACHE&&(e.expiresAt=zG(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Ve.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===xd.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await Ki(this.updateMetadataWithRegionalInformation.bind(this),Ve.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);Z4(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await Ki(this.getEndpointMetadataFromNetwork.bind(this),Ve.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await Ki(this.updateMetadataWithRegionalInformation.bind(this),Ve.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),Z4(e,n,!0),xd.NETWORK;throw mt(O_,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),Z4(e,r,!1),{source:xd.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return Z4(e,i,!1),{source:xd.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=YG(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:xd.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new wi(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw rs(oS)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ve.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return XNe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Ude?Ude[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Ve.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==Je.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=WG.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await Ki(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ve.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=WG.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=WG.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Ve.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await Ki(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Ve.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return k9(e,n,!0),xd.NETWORK;throw rs(sS)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Je.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Je.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Je.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),k9(e,r,!1),xd.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=$Ne(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),k9(e,i,!1),xd.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=YG(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),xd.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===tm.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=U9(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),rs(kb)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ve.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${Je.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),o,a;if(ZNe(i.body))o=i.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(e6e(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),o=i.body,o.error===Je.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=U9(a,this.hostnameAndPort)}catch(i){if(i instanceof Jn)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let o=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&wi.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==Q1.None){let i=r.tenant?r.tenant:Je.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Je.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw mt(bd)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Hde.has(e)}static isPublicCloudAuthority(e){return Je.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new wi(e);i.validateAsUri();let o=i.getUrlComponents(),a=`${r}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${r}.${Je.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let c=wi.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:a}).urlString;return n?`${c}?${n}`:c}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new wi(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(Je.CIAM_AUTH_URL)){let o=i.HostNameAndPort.split(".")[0];r=`${r}${o}${Je.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};Zh.reservedTenantDomains=new Set(["{tenant}","{tenantid}",vf.COMMON,vf.CONSUMERS,vf.ORGANIZATIONS]);function r6e(t){let n=new wi(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case vf.COMMON:case vf.ORGANIZATIONS:case vf.CONSUMERS:return;default:return n}}s(r6e,"getTenantFromAuthorityString");function aj(t){return t.endsWith(Je.FORWARD_SLASH)?t:`${t}${Je.FORWARD_SLASH}`}s(aj,"formatAuthorityUri");function Qfe(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw rs(kb)}return{canonicalAuthority:t.authority?aj(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}s(Qfe,"buildStaticAuthorityOptions");async function Ufe(t,e,r,n,i,o,a){a?.addQueueMeasurement(Ve.AuthorityFactoryCreateDiscoveredInstance,o);let c=Zh.transformCIAMAuthority(aj(t)),l=new Zh(c,e,r,n,i,o,a);try{return await Ki(l.resolveEndpointsAsync.bind(l),Ve.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch{throw mt(bd)}}s(Ufe,"createDiscoveredInstance");d();d();var Td=class t extends Jn{static{s(this,"ServerError")}constructor(e,r,n,i,o){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=o,Object.setPrototypeOf(this,t.prototype)}};d();function oP(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}s(oP,"getRequestThumbprint");var nL=class t{static{s(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${dy.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,n);return}throw new Td(o.errorCodes?.join(" ")||Je.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let o={throttleTime:t.calculateThrottleTime(parseInt(n.headers[Es.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),o,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Es.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||dy.DEFAULT_THROTTLE_TIME_SECONDS),n+dy.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let o=oP(r,n,i),a=this.generateThrottlingStorageKey(o);e.removeItem(a,n.correlationId)}};d();var lj=class t extends Jn{static{s(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var uu=class{static{s(this,"BaseClient")}constructor(e,r){this.config=KNe(e),this.logger=new k0(this.config.loggerOptions,jG,J4),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[Es.CONTENT_TYPE]=Je.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Id.HOME_ACCOUNT_ID:try{let n=py(e.credential);r[Es.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Id.UPN:r[Es.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,o,a){a&&this.performanceClient?.addQueueMeasurement(a,o);let c=await this.sendPostRequest(i,e,{body:r,headers:n},o);return this.config.serverTelemetryManager&&c.status<500&&c.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),c}async sendPostRequest(e,r,n,i){nL.preProcess(this.cacheManager,e,i);let o;try{o=await Ki(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Ve.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let a=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:a[Es.X_MS_HTTP_VERSION]||"",requestId:a[Es.X_MS_REQUEST_ID]||""},i)}catch(a){if(a instanceof lj){let c=a.responseHeaders;throw c&&this.performanceClient?.addFields({httpVerToken:c[Es.X_MS_HTTP_VERSION]||"",requestId:c[Es.X_MS_REQUEST_ID]||"",contentTypeHeader:c[Es.CONTENT_TYPE]||void 0,contentLengthHeader:c[Es.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},i),a.error}throw a instanceof Jn?a:mt(F_)}return nL.postProcess(this.cacheManager,e,o,i),o}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Ve.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await Ufe(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&G1(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&W1(r,e.tokenQueryParameters),mS(r,e.correlationId),lS(r,e.correlationId,this.performanceClient),my(r)}};d();d();var dj={};ra(dj,{badToken:()=>Nb,consentRequired:()=>Hfe,interactionRequired:()=>qfe,loginRequired:()=>Wfe,nativeAccountUnavailable:()=>iL,noTokensFound:()=>Db,refreshTokenExpired:()=>oL,uxNotAllowed:()=>uj});d();var Db="no_tokens_found",iL="native_account_unavailable",oL="refresh_token_expired",uj="ux_not_allowed",qfe="interaction_required",Hfe="consent_required",Wfe="login_required",Nb="bad_token";var n6e=[qfe,Hfe,Wfe,Nb,uj],v_t=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],fj={[Db]:"No refresh token found in the cache. Please sign-in.",[iL]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[oL]:"Refresh token has expired.",[Nb]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[uj]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},Gfe={noTokensFoundError:{code:Db,desc:fj[Db]},native_account_unavailable:{code:iL,desc:fj[iL]},bad_token:{code:Nb,desc:fj[Nb]}},B0=class t extends Jn{static{s(this,"InteractionRequiredAuthError")}constructor(e,r,n,i,o,a,c,l){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||Je.EMPTY_STRING,this.traceId=o||Je.EMPTY_STRING,this.correlationId=a||Je.EMPTY_STRING,this.claims=c||Je.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function pj(t,e,r){let n=!!t&&n6e.indexOf(t)>-1,i=!!r&&v_t.indexOf(r)>-1,o=!!e&&n6e.some(a=>e.indexOf(a)>-1);return n||o||i}s(pj,"isInteractionRequiredError");function mj(t){return new B0(t,fj[t])}s(mj,"createInteractionRequiredAuthError");d();var hj=class t{static{s(this,"ProtocolUtils")}static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${Je.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw mt(_b);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw mt(_b);if(!r)throw mt(Xh);try{let n=r.split(Je.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(Je.RESOURCE_DELIM):Je.EMPTY_STRING,a=e.base64Decode(i),c=JSON.parse(a);return{userRequestState:o||Je.EMPTY_STRING,libraryState:c}}catch{throw mt(Xh)}}};d();var x_t={SW:"sw"},Lb=class{static{s(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Ve.PopTokenGenerateCnf,e.correlationId);let n=await Ki(this.generateKid.bind(this),Ve.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Ve.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:x_t.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:o,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=n,p=(a?new wi(a):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:P0(),m:o?.toUpperCase(),u:p?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:p?.AbsolutePath,q:p?.QueryString?[[],p.QueryString]:void 0,client_claims:c||void 0,...i},r,u,n.correlationId)}};d();var D0=class{static{s(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var ic=class t{static{s(this,"ResponseHandler")}constructor(e,r,n,i,o,a,c){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a,this.performanceClient=c}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||Je.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Je.NOT_AVAILABLE} - Description: ${e.error_description||Je.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Je.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Je.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,o=new Td(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=Kn.SERVER_ERROR_RANGE_START&&e.status<=Kn.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(r&&e.status&&e.status>=Kn.CLIENT_ERROR_RANGE_START&&e.status<=Kn.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw pj(e.error,e.error_description,e.suberror)?new B0(e.error,e.error_description,e.suberror,e.timestamp||Je.EMPTY_STRING,e.trace_id||Je.EMPTY_STRING,e.correlation_id||Je.EMPTY_STRING,e.claims||Je.EMPTY_STRING,i):o}}async handleServerTokenResponse(e,r,n,i,o,a,c,l,u){this.performanceClient?.addQueueMeasurement(Ve.HandleServerTokenResponse,e.correlation_id);let f;if(e.id_token){if(f=U1(e.id_token||Je.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&f.nonce!==o.nonce)throw mt(q_);if(i.maxAge||i.maxAge===0){let g=f.auth_time;if(!g)throw mt(L1);_9(g,i.maxAge)}}this.homeAccountIdentifier=cu.generateHomeAccountId(e.client_info||Je.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,f);let p;o&&o.state&&(p=hj.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let m=this.generateCacheRecord(e,r,n,i,f,a,o),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new D0(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),c&&!l&&m.account){let g=m.account.generateAccountKey();if(!this.cacheStorage.getAccount(g,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,void 0,u)}await this.cacheStorage.saveCacheRecord(m,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,e,u)}generateCacheRecord(e,r,n,i,o,a,c){let l=r.getPreferredCache();if(!l)throw mt(F1);let u=JG(o),f,p;e.id_token&&o&&(f=Lde(this.homeAccountIdentifier,l,e.id_token,this.clientId,u||""),p=i6e(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,o,e.client_info,l,u,c,void 0,this.logger));let m=null;if(e.access_token){let y=e.scope?Sc.fromString(e.scope):new Sc(i.scopes||[]),E=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,x=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,b=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,_=n+E,k=_+x,P=b&&b>0?n+b:void 0;m=Mde(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||r.tenant||"",y.printScopes(),_,k,this.cryptoObj.base64Decode,P,e.token_type,a,e.key_id,i.claims,i.requestedClaimsHash)}let h=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){let E=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=n+E}h=Fde(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,a,y)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:l,familyId:e.foci}),{account:p,idToken:f,accessToken:m,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,r,n,i,o,a,c,l,u){let f=Je.EMPTY_STRING,p=[],m=null,h,g,y=Je.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===Yi.POP&&!o.popKid){let _=new Lb(e),{secret:k,keyId:P}=n.accessToken;if(!P)throw mt(J_);f=await _.signPopToken(k,P,o)}else f=n.accessToken.secret;p=Sc.fromString(n.accessToken.target).asArray(),m=S9(n.accessToken.expiresOn),h=S9(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=S9(n.accessToken.refreshOn))}n.appMetadata&&(y=n.appMetadata.familyId===N1?N1:"");let E=a?.oid||a?.sub||"",x=a?.tid||"";l?.spa_accountid&&n.account&&(n.account.nativeAccountId=l?.spa_accountid);let b=n.account?KG(n.account.getAccountInfo(),void 0,a,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:E,tenantId:x,scopes:p,account:b,idToken:n?.idToken?.secret||"",idTokenClaims:a||{},accessToken:f,fromCache:i,expiresOn:m,extExpiresOn:h,refreshOn:g,correlationId:o.correlationId,requestId:u||Je.EMPTY_STRING,familyId:y,tokenType:n.accessToken?.tokenType||Je.EMPTY_STRING,state:c?c.userRequestState:Je.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||Je.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||Je.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}}};function i6e(t,e,r,n,i,o,a,c,l,u,f,p){p?.verbose("setCachedAccount called");let h=t.getAccountKeys().find(b=>b.startsWith(r)),g=null;h&&(g=t.getAccount(h,i));let y=g||cu.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:c,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:f},e,n),E=y.tenantProfiles||[],x=l||y.realm;if(x&&!E.find(b=>b.tenantId===x)){let b=Q9(r,y.localAccountId,x,o);E.push(b)}return y.tenantProfiles=E,y}s(i6e,"buildAccountToCache");d();async function wd(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}s(wd,"getClientAssertion");var sL=class extends uu{static{s(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Ve.AuthClientAcquireToken,e.correlationId),!e.code)throw mt(G_);let n=P0(),i=await Ki(this.executeTokenRequest.bind(this),Ve.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=i.headers?.[Es.X_MS_REQUEST_ID],a=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(i.body),Ki(a.handleServerTokenResponse.bind(a),Ve.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw rs(nS);let r=this.createLogoutUrlQueryString(e);return wi.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ve.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=wi.appendQueryString(e.tokenEndpoint,n),o=await Ki(this.createTokenRequestBody.bind(this),Ve.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),a;if(r.clientInfo)try{let u=rP(r.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${u.uid}${Ma.CLIENT_INFO_SEPARATOR}${u.utid}`,type:Id.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}let c=this.createTokenRequestHeaders(a||r.ccsCredential),l=oP(this.config.authOptions.clientId,r);return Ki(this.executePostToTokenEndpoint.bind(this),Ve.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,o,c,l,r.correlationId,Ve.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ve.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(dS(r,e.embeddedClientId||e.tokenBodyParameters?.[hy]||this.config.authOptions.clientId),this.includeRedirectUri)fS(r,e.redirectUri);else if(!e.redirectUri)throw rs(X_);if(uS(r,e.scopes,!0,this.oidcDefaultScopes),Lfe(r,e.code),G9(r,this.config.libraryInfo),j9(r,this.config.telemetry.application),tL(r),this.serverTelemetryManager&&!ej(this.config)&&eL(r,this.serverTelemetryManager),e.codeVerifier&&Ffe(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&$9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;z9(r,await wd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Y9(r,i.assertionType)}if(K9(r,xf.AUTHORIZATION_CODE_GRANT),hS(r),e.authenticationScheme===Yi.POP){let i=new Lb(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await Ki(i.generateCnf.bind(i),Ve.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,X9(r,o)}else if(e.authenticationScheme===Yi.SSH)if(e.sshJwk)Z9(r,e.sshJwk);else throw rs(q1);(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pS(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=rP(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${Ma.CLIENT_INFO_SEPARATOR}${i.utid}`,type:Id.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case Id.HOME_ACCOUNT_ID:try{let i=py(n.credential);H1(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Id.UPN:Bb(r,n.credential);break}return e.embeddedClientId&&G1(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&W1(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[ij])&&W1(r,{[ij]:"1"}),lS(r,e.correlationId,this.performanceClient),my(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&kfe(r,e.postLogoutRedirectUri),e.correlationId&&mS(r,e.correlationId),e.idTokenHint&&Pfe(r,e.idTokenHint),e.state&&V9(r,e.state),e.logoutHint&&Ofe(r,e.logoutHint),e.extraQueryParameters&&W1(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&J9(r),my(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};d();var b_t=300,gS=class extends uu{static{s(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientAcquireToken,e.correlationId);let r=P0(),n=await Ki(this.executeTokenRequest.bind(this),Ve.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[Es.X_MS_REQUEST_ID],o=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),Ki(o.handleServerTokenResponse.bind(o),Ve.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw rs(rS);if(this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw mt(M1);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Ki(this.acquireTokenWithCachedRefreshToken.bind(this),Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof B0&&n.errorCode===Db,o=n instanceof Td&&n.errorCode===c9.INVALID_GRANT_ERROR&&n.subError===c9.CLIENT_MISMATCH_ERROR;if(i||o)return Ki(this.acquireTokenWithCachedRefreshToken.bind(this),Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return Ki(this.acquireTokenWithCachedRefreshToken.bind(this),Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=t6e(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ve.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw mj(Db);if(n.expiresOn&&X4(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||b_t))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),mj(oL);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||Yi.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Id.HOME_ACCOUNT_ID}};try{return await Ki(this.acquireToken.bind(this),Ve.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(o){if(o instanceof B0&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),o.subError===Nb)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=R9(n);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw o}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=wi.appendQueryString(r.tokenEndpoint,n),o=await Ki(this.createTokenRequestBody.bind(this),Ve.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),c=oP(this.config.authOptions.clientId,e);return Ki(this.executePostToTokenEndpoint.bind(this),Ve.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,o,a,c,e.correlationId,Ve.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(dS(r,e.embeddedClientId||e.tokenBodyParameters?.[hy]||this.config.authOptions.clientId),e.redirectUri&&fS(r,e.redirectUri),uS(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),K9(r,xf.REFRESH_TOKEN_GRANT),hS(r),G9(r,this.config.libraryInfo),j9(r,this.config.telemetry.application),tL(r),this.serverTelemetryManager&&!ej(this.config)&&eL(r,this.serverTelemetryManager),Mfe(r,e.refreshToken),this.config.clientCredentials.clientSecret&&$9(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;z9(r,await wd(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Y9(r,n.assertionType)}if(e.authenticationScheme===Yi.POP){let n=new Lb(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await Ki(n.generateCnf.bind(n),Ve.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,X9(r,i)}else if(e.authenticationScheme===Yi.SSH)if(e.sshJwk)Z9(r,e.sshJwk);else throw rs(q1);if((!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&pS(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Id.HOME_ACCOUNT_ID:try{let n=py(e.ccsCredential.credential);H1(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Id.UPN:Bb(r,e.ccsCredential.credential);break}return e.embeddedClientId&&G1(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&W1(r,e.tokenBodyParameters),lS(r,e.correlationId,this.performanceClient),my(r)}};d();var aL=class extends uu{static{s(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ve.SilentFlowClientAcquireCachedToken,e.correlationId);let r=ls.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ua.isEmptyObj(e.claims))throw this.setCacheOutcome(ls.FORCE_REFRESH_OR_CLAIMS,e.correlationId),mt(O1);if(!e.account)throw mt(M1);let n=e.account.tenantId||r6e(e.authority),i=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,i,n);if(o){if(Nde(o.cachedAt)||X4(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ls.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),mt(O1);o.refreshOn&&X4(o.refreshOn,0)&&(r=ls.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(ls.NO_CACHED_ACCESS_TOKEN,e.correlationId),mt(O1);let a=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Ki(this.generateResultFromCacheRecord.bind(this),Ve.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(c,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==ls.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Ve.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=U1(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw mt(L1);_9(i,r.maxAge)}return ic.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var cL={};ra(cL,{getAuthorizationCodePayload:()=>w_t,getAuthorizeUrl:()=>T_t,getStandardAuthorizeRequestParameters:()=>I_t,validateAuthorizationResponse:()=>o6e});d();function I_t(t,e,r,n){let i=e.correlationId,o=new Map;dS(o,e.embeddedClientId||e.extraQueryParameters?.[hy]||t.clientId);let a=[...e.scopes||[],...e.extraScopesToConsent||[]];if(uS(o,a,!0,t.authority.options.OIDCOptions?.defaultScopes),fS(o,e.redirectUri),mS(o,i),Rfe(o,e.responseMode),hS(o),e.prompt&&(Dfe(o,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(Bfe(o,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==xb.SELECT_ACCOUNT)if(e.sid&&e.prompt===xb.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),sj(o,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let c=S_t(e.account),l=R_t(e.account);if(l&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),iP(o,l),n?.addFields({loginHintFromClaim:!0},i);try{let u=py(e.account.homeAccountId);H1(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(c&&e.prompt===xb.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),sj(o,c),n?.addFields({sidFromClaim:!0},i);try{let u=py(e.account.homeAccountId);H1(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),iP(o,e.loginHint),Bb(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),iP(o,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let u=py(e.account.homeAccountId);H1(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),iP(o,e.loginHint),Bb(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Nfe(o,e.nonce),e.state&&V9(o,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&pS(o,e.claims,t.clientCapabilities),e.embeddedClientId&&G1(o,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(nP))&&J9(o),o}s(I_t,"getStandardAuthorizeRequestParameters");function T_t(t,e,r,n){let i=my(e,r,n);return wi.appendQueryString(t.authorizationEndpoint,i)}s(T_t,"getAuthorizeUrl");function w_t(t,e){if(o6e(t,e),!t.code)throw mt(Y_);return t}s(w_t,"getAuthorizationCodePayload");function o6e(t,e){if(!t.state||!e)throw t.state?mt(Tb,"Cached State"):mt(Tb,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw mt(Xh,t.state)}try{n=decodeURIComponent(e)}catch{throw mt(Xh,t.state)}if(r!==n)throw mt(U_);if(t.error||t.error_description||t.suberror){let i=__t(t);throw pj(t.error,t.error_description,t.suberror)?new B0(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new Td(t.error||"",t.error_description,t.suberror,i)}}s(o6e,"validateAuthorizationResponse");function __t(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}s(__t,"parseServerErrorNo");function S_t(t){return t.idTokenClaims?.sid||null}s(S_t,"extractAccountSid");function R_t(t){return t.idTokenClaims?.login_hint||null}s(R_t,"extractLoginHint");d();var s6e=",",a6e="|";function k_t(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=t,a=new Map([[0,[r,n]],[2,[i,o]]]),c=[];if(e?.length){if(c=e.split(s6e),c.length<4)return e}else c=Array.from({length:4},()=>a6e);return a.forEach((l,u)=>{l.length===2&&l[0]?.length&&l[1]?.length&&P_t({skuArr:c,index:u,skuName:l[0],skuVersion:l[1]})}),c.join(s6e)}s(k_t,"makeExtraSkuString");function P_t(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(a6e))}s(P_t,"setSku");var AS=class t{static{s(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=ls.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Je.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Je.EMPTY_STRING,this.telemetryCacheKey=Zc.CACHE_KEY+Ma.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Zc.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(Zc.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),a=[e,o].join(Zc.VALUE_SEPARATOR);return[Zc.SCHEMA_VERSION,a,i].join(Zc.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(Zc.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(Zc.VALUE_SEPARATOR),o=e.errors.length,a=r<o?Zc.OVERFLOW_TRUE:Zc.OVERFLOW_FALSE,c=[o,a].join(Zc.VALUE_SEPARATOR);return[Zc.SCHEMA_VERSION,e.cacheHits,n,i,c].join(Zc.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=Zc.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Jn?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(Zc.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,o=e.errors.length;for(r=0;r<o;r++){let a=e.failedRequests[2*r]||Je.EMPTY_STRING,c=e.failedRequests[2*r+1]||Je.EMPTY_STRING,l=e.errors[r]||Je.EMPTY_STRING;if(i+=a.toString().length+c.toString().length+l.length+3,i<Zc.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||Je.EMPTY_STRING),e.push(this.regionSource||Je.EMPTY_STRING),e.push(this.regionOutcome||Je.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return k_t(e)}};var j1=class{static{s(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(c=>JSON.parse(c))},a=new cu;Pb.toObject(a,o),r[n]=a}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};r[n]=o}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};r[n]=o}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};r[n]=o}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};d();d();var c6e="system_assigned_managed_identity",F_t="managed_identity",Vfe=`https://login.microsoftonline.com/${F_t}/`,bf={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},Rc={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},Nn={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},jn={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},wa={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},Us={GET:"get",POST:"post"},gj={SUCCESS_RANGE_START:Kn.SUCCESS_RANGE_START,SUCCESS_RANGE_END:Kn.SUCCESS_RANGE_END,SERVER_ERROR:Kn.SERVER_ERROR},l6e="REGION_NAME",u6e="MSAL_FORCE_REGION",d6e=32,f6e={SHA256:"sha256"},Aj={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},tl={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},V1={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},rm={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},yj={INTERVAL_MS:100,TIMEOUT_MS:5e3},p6e=4096;d();d();d();d();var sP=class{static{s(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var Cj=Ne(require("http"),1),$fe=Ne(require("https"),1);var aP=class{static{s(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?m6e(e,this.proxyUrl,Us.GET,r,this.customAgentOptions,n):h6e(e,Us.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?m6e(e,this.proxyUrl,Us.POST,r,this.customAgentOptions):h6e(e,Us.POST,r,this.customAgentOptions)}},m6e=s((t,e,r,n,i,o)=>{let a=new URL(t),c=new URL(e),l=n?.headers||{},u={host:c.hostname,port:c.port,method:"CONNECT",path:a.hostname,headers:l};i&&Object.keys(i).length&&(u.agent=new Cj.default.Agent(i));let f="";if(r===Us.POST){let m=n?.body||"";f=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${m.length}\r
\r
${m}`}else o&&(u.timeout=o);let p=`${r.toUpperCase()} ${a.href} HTTP/1.1\r
Host: ${a.host}\r
Connection: close\r
`+f+`\r
`;return new Promise((m,h)=>{let g=Cj.default.request(u);o&&g.on("timeout",()=>{g.destroy(),h(new Error("Request time out"))}),g.end(),g.on("connect",(y,E)=>{let x=y?.statusCode||gj.SERVER_ERROR;(x<gj.SUCCESS_RANGE_START||x>gj.SUCCESS_RANGE_END)&&(g.destroy(),E.destroy(),h(new Error(`Error connecting to proxy. Http status code: ${y.statusCode}. Http status message: ${y?.statusMessage||"Unknown"}`))),E.write(p);let b=[];E.on("data",_=>{b.push(_)}),E.on("end",()=>{let k=Buffer.concat([...b]).toString().split(`\r
`),P=parseInt(k[0].split(" ")[1]),N=k[0].split(" ").slice(2).join(" "),M=k[k.length-1],J=k.slice(1,k.length-2),se=new Map;J.forEach(le=>{let ie=le.split(new RegExp(/:\s(.*)/s)),V=ie[0],H=ie[1];try{let z=JSON.parse(H);z&&typeof z=="object"&&(H=z)}catch{}se.set(V,H)});let G=Object.fromEntries(se),q=sP.getNetworkResponse(G,g6e(P,N,G,M),P);(P<Kn.SUCCESS_RANGE_START||P>Kn.SUCCESS_RANGE_END)&&q.body.error!==tl.AUTHORIZATION_PENDING&&g.destroy(),m(q)}),E.on("error",_=>{g.destroy(),E.destroy(),h(new Error(_.toString()))})}),g.on("error",y=>{g.destroy(),h(new Error(y.toString()))})})},"networkRequestViaProxy"),h6e=s((t,e,r,n,i)=>{let o=e===Us.POST,a=r?.body||"",c=new URL(t),l=r?.headers||{},u={method:e,headers:l,...sP.urlToHttpOptions(c)};return n&&Object.keys(n).length&&(u.agent=new $fe.default.Agent(n)),o?u.headers={...u.headers,"Content-Length":a.length}:i&&(u.timeout=i),new Promise((f,p)=>{let m;u.protocol==="http:"?m=Cj.default.request(u):m=$fe.default.request(u),o&&m.write(a),i&&m.on("timeout",()=>{m.destroy(),p(new Error("Request time out"))}),m.end(),m.on("response",h=>{let g=h.headers,y=h.statusCode,E=h.statusMessage,x=[];h.on("data",b=>{x.push(b)}),h.on("end",()=>{let b=Buffer.concat([...x]).toString(),_=g,k=sP.getNetworkResponse(_,g6e(y,E,_,b),y);(y<Kn.SUCCESS_RANGE_START||y>Kn.SUCCESS_RANGE_END)&&k.body.error!==tl.AUTHORIZATION_PENDING&&m.destroy(),f(k)})}),m.on("error",h=>{m.destroy(),p(new Error(h.toString()))})})},"networkRequestViaHttps"),g6e=s((t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let a,c;t>=Kn.CLIENT_ERROR_RANGE_START&&t<=Kn.CLIENT_ERROR_RANGE_END?(a="client_error",c="A client"):t>=Kn.SERVER_ERROR_RANGE_START&&t<=Kn.SERVER_ERROR_RANGE_END?(a="server_error",c="A server"):(a="unknown_error",c="An unknown"),i={error:a,error_description:`${c} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},"parseBody");d();d();d();var Ej="invalid_file_extension",vj="invalid_file_path",Mb="invalid_managed_identity_id_type",xj="invalid_secret",A6e="missing_client_id",y6e="network_unavailable",bj="platform_not_supported",Ij="unable_to_create_azure_arc",Tj="unable_to_create_cloud_shell",wj="unable_to_create_source",lL="unable_to_read_secret_file",C6e="user_assigned_not_available_at_runtime",_j="www_authenticate_header_missing",Sj="www_authenticate_header_unsupported_format",yS={[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Nn.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Nn.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Nn.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var O_t={[Ej]:"The file path in the WWW-Authenticate header does not contain a .key file.",[vj]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[Mb]:"More than one ManagedIdentityIdType was provided.",[xj]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[bj]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[A6e]:"A ManagedIdentityId id was not provided.",[yS.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[yS.IDENTITY_ENDPOINT]:`The Managed Identity's '${Nn.IDENTITY_ENDPOINT}' environment variable is malformed.`,[yS.IMDS_ENDPOINT]:`The Managed Identity's '${Nn.IMDS_ENDPOINT}' environment variable is malformed.`,[yS.MSI_ENDPOINT]:`The Managed Identity's '${Nn.MSI_ENDPOINT}' environment variable is malformed.`,[y6e]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[Ij]:"Azure Arc Managed Identities can only be system assigned.",[Tj]:"Cloud Shell Managed Identities can only be system assigned.",[wj]:"Unable to create a Managed Identity source based on environment variables.",[lL]:"Unable to read the secret file.",[C6e]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[_j]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[Sj]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},zfe=class t extends Jn{static{s(this,"ManagedIdentityError")}constructor(e){super(e,O_t[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function oc(t){return new zfe(t)}s(oc,"createManagedIdentityError");var Rj=class{static{s(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,i=e?.userAssignedObjectId;if(r){if(n||i)throw oc(Mb);this.id=r,this.idType=wa.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||i)throw oc(Mb);this.id=n,this.idType=wa.USER_ASSIGNED_RESOURCE_ID}else if(i){if(r||n)throw oc(Mb);this.id=i,this.idType=wa.USER_ASSIGNED_OBJECT_ID}else this.id=c6e,this.idType=wa.SYSTEM_ASSIGNED}};d();var Tl={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},If=class t extends Jn{static{s(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(Tl.invalidLoopbackAddressType.code,`${Tl.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(Tl.unableToLoadRedirectUri.code,`${Tl.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(Tl.noAuthCodeInResponse.code,`${Tl.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(Tl.noLoopbackServerExists.code,`${Tl.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(Tl.loopbackServerAlreadyExists.code,`${Tl.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(Tl.loopbackServerTimeout.code,`${Tl.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(Tl.stateNotFoundError.code,Tl.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(Tl.thumbprintMissing.code,Tl.thumbprintMissing.desc)}};var Q_t={clientId:Je.EMPTY_STRING,authority:Je.DEFAULT_AUTHORITY,clientSecret:Je.EMPTY_STRING,clientAssertion:Je.EMPTY_STRING,clientCertificate:{thumbprint:Je.EMPTY_STRING,thumbprintSha256:Je.EMPTY_STRING,privateKey:Je.EMPTY_STRING,x5c:Je.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:Je.EMPTY_STRING,authorityMetadata:Je.EMPTY_STRING,clientCapabilities:[],protocolMode:Wu.AAD,azureCloudOptions:{azureCloudInstance:Q1.None,tenant:Je.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},U_t={claimsBasedCachingEnabled:!1},Yfe={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ta.Info},q_t={loggerOptions:Yfe,networkClient:new aP,proxyUrl:Je.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},H_t={application:{appName:Je.EMPTY_STRING,appVersion:Je.EMPTY_STRING}};function E6e({auth:t,broker:e,cache:r,system:n,telemetry:i}){let o={...q_t,networkClient:new aP(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||Yfe,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw If.createStateNotFoundError();return{auth:{...Q_t,...t},broker:{...e},cache:{...U_t,...r},system:{...o,...n},telemetry:{...H_t,...i}}}s(E6e,"buildAppConfiguration");function v6e({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new Rj(e),i=r?.loggerOptions||Yfe,o;return r?.networkClient?o=r.networkClient:o=new aP(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:i,networkClient:o},disableInternalRetries:r?.disableInternalRetries||!1}}s(v6e,"buildManagedIdentityConfiguration");d();d();d();d();var x6e=Ne(require("crypto"));var Pj=new Uint8Array(256),kj=Pj.length;function Kfe(){return kj>Pj.length-16&&(x6e.default.randomFillSync(Pj),kj=0),Pj.slice(kj,kj+=16)}s(Kfe,"rng");d();d();d();var b6e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function W_t(t){return typeof t=="string"&&b6e.test(t)}s(W_t,"validate");var I6e=W_t;var du=[];for(let t=0;t<256;++t)du.push((t+256).toString(16).substr(1));function G_t(t,e=0){let r=(du[t[e+0]]+du[t[e+1]]+du[t[e+2]]+du[t[e+3]]+"-"+du[t[e+4]]+du[t[e+5]]+"-"+du[t[e+6]]+du[t[e+7]]+"-"+du[t[e+8]]+du[t[e+9]]+"-"+du[t[e+10]]+du[t[e+11]]+du[t[e+12]]+du[t[e+13]]+du[t[e+14]]+du[t[e+15]]).toLowerCase();if(!I6e(r))throw TypeError("Stringified UUID is invalid");return r}s(G_t,"stringify");var T6e=G_t;d();function j_t(t,e,r){t=t||{};let n=t.random||(t.rng||Kfe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return T6e(n)}s(j_t,"v4");var Jfe=j_t;var cP=class{static{s(this,"GuidGenerator")}generateGuid(){return Jfe()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};d();var N0=class t{static{s(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(au.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,Je.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,au.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};d();d();var w6e=Ne(require("crypto"),1);var Fb=class{static{s(this,"HashUtils")}sha256(e){return w6e.default.createHash(f6e.SHA256).update(e).digest()}};var _6e=Ne(require("crypto"),1);var Bj=class{static{s(this,"PkceGenerator")}constructor(){this.hashUtils=new Fb}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%Aj.CV_CHARSET.length;for(;e.length<=d6e;){let i=_6e.default.randomBytes(1)[0];if(i>=r)continue;let o=i%Aj.CV_CHARSET.length;e.push(Aj.CV_CHARSET[o])}let n=e.join(Je.EMPTY_STRING);return N0.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return N0.base64EncodeUrl(this.hashUtils.sha256(e).toString(au.BASE64),au.BASE64)}};var gy=class{static{s(this,"CryptoProvider")}constructor(){this.pkceGenerator=new Bj,this.guidGenerator=new cP,this.hashUtils=new Fb}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return N0.base64Encode(e)}base64Decode(e){return N0.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return N0.base64EncodeUrl(this.hashUtils.sha256(e).toString(au.BASE64),au.BASE64)}};d();d();var Ob=class extends Pb{static{s(this,"NodeStorage")}constructor(e,r,n,i){super(r,n,e,new aS,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof cu)r.accounts[n]=i;else if(el.isIdTokenEntity(i))r.idTokens[n]=i;else if(el.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(el.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(el.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new cu,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return el.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=el.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return el.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=el.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return el.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=el.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return el.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=el.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&el.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&el.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&el.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return j1.deserializeAllCache(j1.deserializeJSONBlob(e))}static generateJsonCache(e){return vb.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=el.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};d();var uL={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},lP=class{static{s(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=vb.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=j1.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=Ob.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new gy().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new D0(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new D0(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(cu.generateAccountCacheKey(e),r||new cP().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new D0(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let o=i!==null,a=typeof i=="object",c=!Array.isArray(i),l=typeof e[n]<"u"&&e[n]!==null;o&&a&&c&&l?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,c=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:c}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...uL.Account,...e.Account},IdToken:{...uL.IdToken,...e.IdToken},AccessToken:{...uL.AccessToken,...e.AccessToken},RefreshToken:{...uL.RefreshToken,...e.RefreshToken},AppMetadata:{...uL.AppMetadata,...e.AppMetadata}}}};d();var iFe=Ne(nFe(),1);var $1=class t{static{s(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw mt(ts.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=Qs.nowSeconds();this.expirationTime=i+600;let a={alg:this.useSha256?rm.PSS_256:rm.RSA_256},c=this.useSha256?rm.X5T_256:rm.X5T;Object.assign(a,{[c]:N0.base64EncodeUrl(this.thumbprint,au.HEX)}),this.publicCertificate&&Object.assign(a,{[rm.X5C]:this.publicCertificate});let l={[rm.AUDIENCE]:this.jwtAudience,[rm.EXPIRATION_TIME]:this.expirationTime,[rm.ISSUER]:this.issuer,[rm.SUBJECT]:this.issuer,[rm.NOT_BEFORE]:i,[rm.JWT_ID]:e.createNewGuid()};return this.jwt=iFe.default.sign(l,this.privateKey,{header:a}),this.jwt}isExpired(){return this.expirationTime<Qs.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,Je.EMPTY_STRING));return n}};d();var sV="@azure/msal-node",tg="3.6.3";d();var AP=class extends uu{static{s(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=Qs.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=wi.appendQueryString(e.tokenEndpoint,n),o=await this.createTokenRequestBody(r),a=this.createTokenRequestHeaders({credential:r.username,type:Id.UPN}),c={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,o,a,c,r.correlationId)}async createTokenRequestBody(e){let r=new Map;rr.addClientId(r,this.config.authOptions.clientId),rr.addUsername(r,e.username),rr.addPassword(r,e.password),rr.addScopes(r,e.scopes),rr.addResponseType(r,V4.IDTOKEN_TOKEN),rr.addGrantType(r,xf.RESOURCE_OWNER_PASSWORD_GRANT),rr.addClientInfo(r),rr.addLibraryInfo(r,this.config.libraryInfo),rr.addApplicationTelemetry(r,this.config.telemetry.application),rr.addThrottling(r),this.serverTelemetryManager&&rr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();rr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&rr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(rr.addClientAssertion(r,await wd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rr.addClientAssertionType(r,i.assertionType)),(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&rr.addCcsUpn(r,e.username),lu.mapToQueryString(r)}};d();function oFe(t,e,r,n){let i=cL.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return rr.addLibraryInfo(i,{sku:tl.MSAL_SKU,version:tg,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==Wu.OIDC&&rr.addApplicationTelemetry(i,t.telemetry.application),rr.addResponseType(i,V4.CODE),r.codeChallenge&&r.codeChallengeMethod&&rr.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),rr.addExtraQueryParameters(i,r.extraQueryParameters||{}),cL.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}s(oFe,"getAuthCodeRequestUrl");var qb=class{static{s(this,"ClientApplication")}constructor(e){this.config=E6e(e),this.cryptoProvider=new gy,this.logger=new k0(this.config.system.loggerOptions,sV,tg),this.storage=new Ob(this.logger,this.config.auth.clientId,this.cryptoProvider,Qfe(this.config.auth)),this.tokenCache=new lP(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||uy.QUERY,authenticationScheme:Yi.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return oFe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:Yi.BEARER},i=this.initializeServerTelemetryManager(V1.acquireTokenByCode,n.correlationId);try{let o=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),a=await this.buildOauthClientConfiguration(o,n.correlationId,n.redirectUri,i),c=new sL(a);return this.logger.verbose("Auth code client created",n.correlationId),await c.acquireToken(n,r)}catch(o){throw o instanceof Jn&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:Yi.BEARER},n=this.initializeServerTelemetryManager(V1.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new gS(o);return this.logger.verbose("Refresh token client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof Jn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(V1.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new aL(o);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,a,o)}catch(c){if(c instanceof Sb&&c.errorCode===ts.tokenRefreshRequired)return new gS(o).acquireTokenByRefreshToken(r);throw c}}catch(i){throw i instanceof Jn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,o]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...Ef]});if(o===ls.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let a=new gS(n);try{await a.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(V1.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new AP(o);return this.logger.verbose("Username password client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof Jn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw If.createStateNotFoundError();if(e!==r)throw mt(ts.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:tl.MSAL_SKU,version:tg,cpu:process.arch||Je.EMPTY_STRING,os:process.platform||Je.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=$1.fromAssertion(await wd(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:tl.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===Yi.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=Yi.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!ua.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...Ef],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new AS(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let o=Zh.generateAuthority(e,i||this.config.auth.azureCloudOptions),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return cj.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a,this.logger,r)}clearCache(){this.storage.clear()}};d();var sFe=Ne(require("http"),1);var aV=class{static{s(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw If.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=sFe.default.createServer((o,a)=>{let c=o.url;if(c){if(c===Je.FORWARD_SLASH){a.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{a.end(r||"Error occurred loading redirectUrl"),i(If.createUnableToLoadRedirectUrlError());return}let l=this.getRedirectUri(),u=new URL(c,l),f=lu.getDeserializedResponse(u.search)||{};f.code&&(a.writeHead(Kn.REDIRECT,{location:l}),a.end()),f.error&&a.end(r||`Error occurred: ${f.error}`),n(f)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw If.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),If.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${tl.HTTP_PROTOCOL}${tl.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};d();var yP=class extends uu{static{s(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=Qs.nowSeconds(),i=await this.acquireTokenWithDeviceCode(e,r),o=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i),o.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=wi.appendQueryString(this.authority.deviceCodeEndpoint,r),i=this.createQueryString(e),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,o,a,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&rr.addExtraQueryParameters(r,e.extraQueryParameters),lu.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,i,o){let{body:{user_code:a,device_code:c,verification_uri:l,expires_in:u,interval:f,message:p}}=await this.sendPostRequest(i,e,{body:r,headers:n},o);return{userCode:a,deviceCode:c,verificationUri:l,expiresIn:u,interval:f,message:p}}createQueryString(e){let r=new Map;return rr.addScopes(r,e.scopes),rr.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&rr.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),lu.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),mt(ts.deviceCodePollingCancelled);if(r&&r<e&&Qs.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),mt(ts.userTimeoutReached);if(Qs.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),mt(ts.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),i=wi.appendQueryString(this.authority.tokenEndpoint,n),o=this.createTokenRequestBody(e,r),a=this.createTokenRequestHeaders(),c=e.timeout?Qs.nowSeconds()+e.timeout:void 0,l=Qs.nowSeconds()+r.expiresIn,u=r.interval*1e3;for(;this.continuePolling(l,c,e.cancel);){let f={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},p=await this.executePostToTokenEndpoint(i,o,a,f,e.correlationId);if(p.body&&p.body.error)if(p.body.error===Je.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await Qs.delay(u);else throw this.logger.info("Unexpected error in polling from the server"),Bde(Y4.postRequestFailed,p.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),p.body}throw this.logger.error("Polling stopped for unknown reasons."),mt(ts.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;rr.addScopes(n,e.scopes),rr.addClientId(n,this.config.authOptions.clientId),rr.addGrantType(n,xf.DEVICE_CODE_GRANT),rr.addDeviceCode(n,r.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return rr.addCorrelationId(n,i),rr.addClientInfo(n),rr.addLibraryInfo(n,this.config.libraryInfo),rr.addApplicationTelemetry(n,this.config.telemetry.application),rr.addThrottling(n),this.serverTelemetryManager&&rr.addServerTelemetry(n,this.serverTelemetryManager),(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),lu.mapToQueryString(n)}};var CP=class extends qb{static{s(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=AS.makeExtraSkuString({libraryName:tl.MSAL_SKU,libraryVersion:tg})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(V1.acquireTokenByDeviceCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new yP(o);return this.logger.verbose("Device code client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof Jn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:i,errorTemplate:o,windowHandle:a,loopbackClient:c,...l}=e;if(this.nativeBrokerPlugin){let g={...l,clientId:this.config.auth.clientId,scopes:e.scopes||Ef,redirectUri:`${tl.HTTP_PROTOCOL}${tl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...l.extraQueryParameters,...l.tokenQueryParameters,[cS.X_CLIENT_EXTRA_SKU]:this.skus},accountId:l.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(g,a)}let{verifier:u,challenge:f}=await this.cryptoProvider.generatePkceCodes(),p=c||new aV,m={},h=null;try{let g=p.listenForAuthCode(i,o).then(k=>{m=k}).catch(k=>{h=k}),y=await this.waitForRedirectUri(p),E={...l,correlationId:r,scopes:e.scopes||Ef,redirectUri:y,responseMode:uy.QUERY,codeChallenge:f,codeChallengeMethod:HG.S256},x=await this.getAuthCodeUrl(E);if(await n(x),await g,h)throw h;if(m.error)throw new Td(m.error,m.error_description,m.suberror);if(!m.code)throw If.createNoAuthCodeInResponseError();let b=m.client_info,_={code:m.code,codeVerifier:u,clientInfo:b||Je.EMPTY_STRING,...E};return await this.acquireTokenByCode(_)}finally{p.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||Ef,redirectUri:`${tl.HTTP_PROTOCOL}${tl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[cS.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let i=0,o=setInterval(()=>{if(yj.TIMEOUT_MS/yj.INTERVAL_MS<i){clearInterval(o),n(If.createLoopbackServerTimeoutError());return}try{let a=e.getRedirectUri();clearInterval(o),r(a);return}catch(a){if(a instanceof Jn&&a.errorCode===Tl.noLoopbackServerExists.code){i++;return}clearInterval(o),n(a);return}},yj.INTERVAL_MS)})}};d();d();var Hb=class extends uu{static{s(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===ls.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,o,a){let c=r,l=r,u=ls.NOT_APPLICABLE,f;c.serializableCache&&c.persistencePlugin&&(f=new D0(c.serializableCache,!1),await c.persistencePlugin.beforeCacheAccess(f));let p=this.readAccessTokenFromCache(i,l.managedIdentityId?.id||c.authOptions.clientId,new Sc(e.scopes||[]),o,e.correlationId);return c.serializableCache&&c.persistencePlugin&&f&&await c.persistencePlugin.afterCacheAccess(f),p?Qs.isTokenExpired(p.expiresOn,c.systemOptions?.tokenRenewalOffsetSeconds||z4)?(a?.setCacheOutcome(ls.CACHED_ACCESS_TOKEN_EXPIRED),[null,ls.CACHED_ACCESS_TOKEN_EXPIRED]):(p.refreshOn&&Qs.isTokenExpired(p.refreshOn.toString(),0)&&(u=ls.PROACTIVELY_REFRESHED,a?.setCacheOutcome(ls.PROACTIVELY_REFRESHED)),[await ic.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:p,refreshToken:null,appMetadata:null},!0,e),u]):(a?.setCacheOutcome(ls.NO_CACHED_ACCESS_TOKEN),[null,ls.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,o){let a={homeAccountId:Je.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:mo.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:Sc.createSearchScopes(n.asArray())},c=i.getAccessTokensByFilter(a,o);if(c.length<1)return null;if(c.length>1)throw mt(ts.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let i,o;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let l={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};o=Qs.nowSeconds();let u=await this.appTokenProvider(l);i={access_token:u.accessToken,expires_in:u.expiresInSeconds,refresh_in:u.refreshInSeconds,token_type:Yi.BEARER}}else{let l=this.createTokenQueryParameters(e),u=wi.appendQueryString(r.tokenEndpoint,l),f=await this.createTokenRequestBody(e),p=this.createTokenRequestHeaders(),m={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),o=Qs.nowSeconds();let h=await this.executePostToTokenEndpoint(u,f,p,m,e.correlationId);i=h.body,i.status=h.status}let a=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(i,n),await a.handleServerTokenResponse(i,this.authority,o,e)}async createTokenRequestBody(e){let r=new Map;rr.addClientId(r,this.config.authOptions.clientId),rr.addScopes(r,e.scopes,!1),rr.addGrantType(r,xf.CLIENT_CREDENTIALS_GRANT),rr.addLibraryInfo(r,this.config.libraryInfo),rr.addApplicationTelemetry(r,this.config.telemetry.application),rr.addThrottling(r),this.serverTelemetryManager&&rr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();rr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&rr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(rr.addClientAssertion(r,await wd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rr.addClientAssertionType(r,i.assertionType)),(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),lu.mapToQueryString(r)}};d();var EP=class extends uu{static{s(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new Sc(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(Qs.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(ls.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),mt(ts.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(ls.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),mt(ts.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,o=null;if(n){i=VG.extractTokenClaims(n.secret,N0.base64Decode);let a=i.oid||i.sub,c={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:Je.EMPTY_STRING,localAccountId:a||Je.EMPTY_STRING};o=this.cacheManager.readAccountFromCache(c,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),ic.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:o,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:mo.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||Yi.BEARER,o={credentialType:n&&n.toLowerCase()!==Yi.BEARER.toLowerCase()?mo.ACCESS_TOKEN_WITH_AUTH_SCHEME:mo.ACCESS_TOKEN,clientId:e,target:Sc.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},a=this.cacheManager.getAccessTokensByFilter(o,r.correlationId),c=a.length;if(c<1)return null;if(c>1)throw mt(ts.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),o=wi.appendQueryString(r.tokenEndpoint,i),a=await this.createTokenRequestBody(e),c=this.createTokenRequestHeaders(),l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},u=Qs.nowSeconds(),f=await this.executePostToTokenEndpoint(o,a,c,l,e.correlationId),p=new ic(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return p.validateTokenResponse(f.body),await p.handleServerTokenResponse(f.body,this.authority,u,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;rr.addClientId(r,this.config.authOptions.clientId),rr.addScopes(r,e.scopes),rr.addGrantType(r,xf.JWT_BEARER),rr.addClientInfo(r),rr.addLibraryInfo(r,this.config.libraryInfo),rr.addApplicationTelemetry(r,this.config.telemetry.application),rr.addThrottling(r),this.serverTelemetryManager&&rr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();rr.addCorrelationId(r,n),rr.addRequestTokenUse(r,cS.ON_BEHALF_OF),rr.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&rr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(rr.addClientAssertion(r,await wd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rr.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),lu.mapToQueryString(r)}};var vP=class extends qb{static{s(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw mt(ts.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?$1.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):$1.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw mt(ts.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await wd(e.clientAssertion,this.config.auth.clientId),assertionType:tl.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(m=>!Ef.includes(m))},o={...e,...i,clientAssertion:r},c=new wi(o.authority).getUrlComponents().PathSegments[0];if(Object.values(vf).includes(c))throw mt(ts.missingTenantIdError);let l=process.env[u6e],u;o.azureRegion!=="DisableMsalForceRegion"&&(!o.azureRegion&&l?u=l:u=o.azureRegion);let f={azureRegion:u,environmentRegion:process.env[l6e]},p=this.initializeServerTelemetryManager(V1.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let m=await this.createAuthority(o.authority,o.correlationId,f,e.azureCloudOptions),h=await this.buildOauthClientConfiguration(m,o.correlationId,"",p),g=new Hb(h,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await g.acquireToken(o)}catch(m){throw m instanceof Jn&&m.setCorrelationId(o.correlationId),p.cacheFailedRequest(m),m}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),o=new EP(i);return this.logger.verbose("On behalf of client created",r.correlationId),await o.acquireToken(r)}catch(n){throw n instanceof Jn&&n.setCorrelationId(r.correlationId),n}}};d();d();d();d();d();function aFe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}s(aFe,"isIso8601");d();var cV=class{static{s(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===Us.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let o=0;for(;await this.retryPolicy.pauseForRetry(i.status,o,this.logger,i.headers[Es.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),o++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(Us.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(Us.POST,e,r)}};var vS={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},Rd=class{static{s(this,"BaseManagedIdentitySource")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(aFe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-Qs.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let o=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[Rc.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let h=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${h}`),o.queryParameters[Rc.XMS_CC]=h}let a=o.headers;a[Es.CONTENT_TYPE]=Je.URL_FORM_CONTENT_TYPE;let c={headers:a};Object.keys(o.bodyParameters).length&&(c.body=o.computeParametersBodyString());let l=this.disableInternalRetries?this.networkClient:new cV(this.networkClient,o.retryPolicy,this.logger),u=Qs.nowSeconds(),f;try{o.httpMethod===Us.POST?f=await l.sendPostRequestAsync(o.computeUri(),c):f=await l.sendGetRequestAsync(o.computeUri(),c)}catch(h){throw h instanceof Jn?h:mt(ts.networkError)}let p=new ic(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),m=await this.getServerTokenResponseAsync(f,l,o,c);return p.validateTokenResponse(m,i),p.handleServerTokenResponse(m,n,u,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case wa.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?vS.MANAGED_IDENTITY_CLIENT_ID_2017:vS.MANAGED_IDENTITY_CLIENT_ID;case wa.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?vS.MANAGED_IDENTITY_RESOURCE_ID_IMDS:vS.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case wa.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),vS.MANAGED_IDENTITY_OBJECT_ID;default:throw oc(Mb)}}};Rd.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new wi(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),oc(yS[t])}};d();d();d();var lV=class{static{s(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var j4t=3,V4t=1e3,$4t=[Kn.NOT_FOUND,Kn.REQUEST_TIMEOUT,Kn.TOO_MANY_REQUESTS,Kn.SERVER_ERROR,Kn.SERVICE_UNAVAILABLE,Kn.GATEWAY_TIMEOUT],uV=class t{static{s(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new lV}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return V4t}async pauseForRetry(e,r,n,i){if($4t.includes(e)&&r<j4t){let o=this.linearRetryStrategy.calculateDelay(i,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(a=>setTimeout(a,o)),!0}return!1}};var wf=class{static{s(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new uV}computeUri(){let e=new Map;this.queryParameters&&rr.addExtraQueryParameters(e,this.queryParameters);let r=lu.mapToQueryString(e);return wi.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&rr.addExtraQueryParameters(e,this.bodyParameters),lu.mapToQueryString(e)}};var z4t="2019-08-01",xL=class t extends Rd{static{s(this,"AppService")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[Nn.IDENTITY_ENDPOINT],r=process.env[Nn.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${jn.APP_SERVICE} managed identity is unavailable because one or both of the '${Nn.IDENTITY_HEADER}' and '${Nn.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Nn.IDENTITY_ENDPOINT,a,jn.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${jn.APP_SERVICE} managed identity. Endpoint URI: ${l}. Creating ${jn.APP_SERVICE} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new wf(Us.GET,this.identityEndpoint);return n.headers[bf.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Rc.API_VERSION]=z4t,n.queryParameters[Rc.RESOURCE]=e,r.idType!==wa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var z1=require("fs"),dFe=Ne(require("path"),1);var Y4t="2019-11-01",cFe="http://127.0.0.1:40342/metadata/identity/oauth2/token",lFe="N/A: himds executable exists",uFe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},K4t={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},bL=class t extends Rd{static{s(this,"AzureArc")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static getEnvironmentVariables(){let e=process.env[Nn.IDENTITY_ENDPOINT],r=process.env[Nn.IMDS_ENDPOINT];if(!e||!r){let n=K4t[process.platform];try{(0,z1.accessSync)(n,z1.constants.F_OK|z1.constants.R_OK),e=cFe,r=lFe}catch{}}return[e,r]}static tryCreate(e,r,n,i,o,a){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${jn.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Nn.IDENTITY_ENDPOINT}' and '${Nn.IMDS_ENDPOINT}' are not defined. ${jn.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(l===lFe)e.info(`[Managed Identity] ${jn.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${jn.AZURE_ARC} endpoint: ${cFe}. Creating ${jn.AZURE_ARC} managed identity.`);else{let u=t.getValidatedEnvVariableUrlString(Nn.IDENTITY_ENDPOINT,c,jn.AZURE_ARC,e);u.endsWith("/")&&u.slice(0,-1),t.getValidatedEnvVariableUrlString(Nn.IMDS_ENDPOINT,l,jn.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${jn.AZURE_ARC} managed identity. Endpoint URI: ${u}. Creating ${jn.AZURE_ARC} managed identity.`)}if(a.idType!==wa.SYSTEM_ASSIGNED)throw oc(Ij);return new t(e,r,n,i,o,c)}createRequest(e){let r=new wf(Us.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[bf.METADATA_HEADER_NAME]="true",r.queryParameters[Rc.API_VERSION]=Y4t,r.queryParameters[Rc.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,i){let o;if(e.status===Kn.UNAUTHORIZED){let a=e.headers["www-authenticate"];if(!a)throw oc(_j);if(!a.includes("Basic realm="))throw oc(Sj);let c=a.split("Basic realm=")[1];if(!uFe.hasOwnProperty(process.platform))throw oc(bj);let l=uFe[process.platform],u=dFe.default.basename(c);if(!u.endsWith(".key"))throw oc(Ej);if(l+u!==c)throw oc(vj);let f;try{f=await(0,z1.statSync)(c).size}catch{throw oc(lL)}if(f>p6e)throw oc(xj);let p;try{p=(0,z1.readFileSync)(c,au.UTF8)}catch{throw oc(lL)}let m=`Basic ${p}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[bf.AUTHORIZATION_HEADER_NAME]=m;try{o=await r.sendGetRequestAsync(n.computeUri(),i)}catch(h){throw h instanceof Jn?h:mt(ts.networkError)}}return this.getServerTokenResponse(o||e)}};d();var IL=class t extends Rd{static{s(this,"CloudShell")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.msiEndpoint=a}static getEnvironmentVariables(){return[process.env[Nn.MSI_ENDPOINT]]}static tryCreate(e,r,n,i,o,a){let[c]=t.getEnvironmentVariables();if(!c)return e.info(`[Managed Identity] ${jn.CLOUD_SHELL} managed identity is unavailable because the '${Nn.MSI_ENDPOINT} environment variable is not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Nn.MSI_ENDPOINT,c,jn.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${jn.CLOUD_SHELL} managed identity. Endpoint URI: ${l}. Creating ${jn.CLOUD_SHELL} managed identity.`),a.idType!==wa.SYSTEM_ASSIGNED)throw oc(Tj);return new t(e,r,n,i,o,c)}createRequest(e){let r=new wf(Us.POST,this.msiEndpoint);return r.headers[bf.METADATA_HEADER_NAME]="true",r.bodyParameters[Rc.RESOURCE]=e,r}};d();d();d();var dV=class{static{s(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var J4t=[Kn.NOT_FOUND,Kn.REQUEST_TIMEOUT,Kn.GONE,Kn.TOO_MANY_REQUESTS],X4t=3,Z4t=7,ePt=1e3,tPt=4e3,rPt=2e3,nPt=10*1e3,fV=class t{static{s(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new dV(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return ePt}static get MAX_EXPONENTIAL_BACKOFF_MS(){return tPt}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return rPt}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return nPt}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===Kn.GONE?Z4t:X4t),(J4t.includes(e)||e>=Kn.SERVER_ERROR_RANGE_START&&e<=Kn.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let i=e===Kn.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${i}ms (retry attempt: ${r+1})`),await new Promise(o=>setTimeout(o,i)),!0}return!1}};var fFe="/metadata/identity/oauth2/token",iPt=`http://169.254.169.254${fFe}`,oPt="2018-02-01",pV=class t extends Rd{static{s(this,"Imds")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static tryCreate(e,r,n,i,o){let a;return process.env[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${jn.IMDS} returned endpoint: ${process.env[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),a=t.getValidatedEnvVariableUrlString(Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${fFe}`,jn.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${jn.IMDS}, using the default endpoint.`),a=iPt),new t(e,r,n,i,o,a)}createRequest(e,r){let n=new wf(Us.GET,this.identityEndpoint);return n.headers[bf.METADATA_HEADER_NAME]="true",n.queryParameters[Rc.API_VERSION]=oPt,n.queryParameters[Rc.RESOURCE]=e,r.idType!==wa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new fV,n}};d();var sPt="2019-07-01-preview",TL=class t extends Rd{static{s(this,"ServiceFabric")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[Nn.IDENTITY_ENDPOINT],r=process.env[Nn.IDENTITY_HEADER],n=process.env[Nn.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,i,o,a){let[c,l,u]=t.getEnvironmentVariables();if(!c||!l||!u)return e.info(`[Managed Identity] ${jn.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Nn.IDENTITY_HEADER}', '${Nn.IDENTITY_ENDPOINT}' or '${Nn.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let f=t.getValidatedEnvVariableUrlString(Nn.IDENTITY_ENDPOINT,c,jn.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${jn.SERVICE_FABRIC} managed identity. Endpoint URI: ${f}. Creating ${jn.SERVICE_FABRIC} managed identity.`),a.idType!==wa.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${jn.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,i,o,c,l)}createRequest(e,r){let n=new wf(Us.GET,this.identityEndpoint);return n.headers[bf.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Rc.API_VERSION]=sPt,n.queryParameters[Rc.RESOURCE]=e,r.idType!==wa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var aPt="2017-09-01",cPt=`Only client id is supported for user-assigned managed identity in ${jn.MACHINE_LEARNING}.`,wL=class t extends Rd{static{s(this,"MachineLearning")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.msiEndpoint=a,this.secret=c}static getEnvironmentVariables(){let e=process.env[Nn.MSI_ENDPOINT],r=process.env[Nn.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${jn.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${Nn.MSI_ENDPOINT}' and '${Nn.MSI_SECRET}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Nn.MSI_ENDPOINT,a,jn.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${jn.MACHINE_LEARNING} managed identity. Endpoint URI: ${l}. Creating ${jn.MACHINE_LEARNING} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new wf(Us.GET,this.msiEndpoint);if(n.headers[bf.METADATA_HEADER_NAME]="true",n.headers[bf.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[Rc.API_VERSION]=aPt,n.queryParameters[Rc.RESOURCE]=e,r.idType===wa.SYSTEM_ASSIGNED)n.queryParameters[vS.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[Nn.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===wa.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(cPt);return n}};var _L=class t{static{s(this,"ManagedIdentityClient")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async sendManagedIdentityTokenRequest(e,r,n,i){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,i)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(TL.getEnvironmentVariables())?jn.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(xL.getEnvironmentVariables())?jn.APP_SERVICE:this.allEnvironmentVariablesAreDefined(wL.getEnvironmentVariables())?jn.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(IL.getEnvironmentVariables())?jn.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(bL.getEnvironmentVariables())?jn.AZURE_ARC:jn.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,i,o,a){let c=TL.tryCreate(e,r,n,i,o,a)||xL.tryCreate(e,r,n,i,o)||wL.tryCreate(e,r,n,i,o)||IL.tryCreate(e,r,n,i,o,a)||bL.tryCreate(e,r,n,i,o,a)||pV.tryCreate(e,r,n,i,o);if(!c)throw oc(wj);return c}};var lPt=[jn.SERVICE_FABRIC],xP=class t{static{s(this,"ManagedIdentityApplication")}constructor(e){this.config=v6e(e||{}),this.logger=new k0(this.config.system.loggerOptions,sV,tg);let r={canonicalAuthority:Je.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new Ob(this.logger,this.config.managedIdentityId.id,K4,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new gy;let n={protocolMode:Wu.AAD,knownAuthorities:[Vfe],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new Zh(Vfe,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new Hb({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new _L(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new Fb}async acquireToken(e){if(!e.resource)throw rs(eP.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,i]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let o=this.managedIdentityClient.getManagedIdentitySource();if(n&&lPt.includes(o)){let a=this.hashUtils.sha256(n.accessToken).toString(au.HEX);r.revokedTokenSha256Hash=a}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(i===ls.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,i){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,i)}getManagedIdentitySource(){return _L.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};d();var mV=class{static{s(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(o=>cu.isAccountEntity(o)),i;if(n.length>0){let o=n[0];i=await this.partitionManager.extractKey(o)}else i=await this.partitionManager.getKey();await this.client.set(i,e.tokenCache.serialize())}}};d();d();var SL=ii("IdentityUtils"),uPt="1.0";function bP(t,e,r){let n=s(i=>(SL.getToken.info(i),new Yh({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:i})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}s(bP,"ensureValidMsalToken");function Q0e(t){let e=t?.authorityHost;return!e&&W4&&(e=process.env.AZURE_AUTHORITY_HOST),e??V6}s(Q0e,"getAuthorityHost");function U0e(t,e){return e||(e=V6),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}s(U0e,"getAuthority");function pFe(t,e,r){return t==="adfs"&&e||r?[e]:[]}s(pFe,"getKnownAuthorities");var hV=s((t,e=NG?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case L0.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case L0.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case L0.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case L0.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function gV(t){switch(t){case"error":return L0.LogLevel.Error;case"info":return L0.LogLevel.Info;case"verbose":return L0.LogLevel.Verbose;case"warning":return L0.LogLevel.Warning;default:return L0.LogLevel.Info}}s(gV,"getMSALLogLevel");function xS(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return SL.info(Ro(t,e.message)),new Vr(e.message);case"device_code_polling_cancelled":return new P_("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":SL.info(Ro(t,`Authentication returned errorCode ${n.errorCode}`));break;default:SL.info(Ro(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(SL.info(Ro(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new Yh({scopes:t,getTokenOptions:r,message:e.message})}s(xS,"handleMsalError");function mFe(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}s(mFe,"publicToMsal");function hFe(t,e){var r;return{authority:(r=e.environment)!==null&&r!==void 0?r:xDe,homeAccountId:e.homeAccountId,tenantId:e.tenantId||vDe,username:e.username,clientId:t,version:uPt}}s(hFe,"msalToPublic");d();var dPt=1e3*64;function gFe(t){return xde([{name:"imdsRetryPolicy",retry:s(({retryCount:e,response:r})=>r?.status!==404?{skipStrategy:!0}:fNe(e,{retryDelayInMs:t.startDelayInMs,maxRetryDelayInMs:dPt}),"retry")}],{maxRetries:t.maxRetries})}s(gFe,"imdsRetryPolicy");d();var Y1="ManagedIdentityCredential - IMDS",bS=ii(Y1),fPt="http://169.254.169.254",pPt="/metadata/identity/oauth2/token";function mPt(t){var e;if(!o9(t))throw new Error(`${Y1}: Multiple scopes are not supported.`);let n=new URL(pPt,(e=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)!==null&&e!==void 0?e:fPt),i={Accept:"application/json"};return{url:`${n}`,method:"GET",headers:Cb(i)}}s(mPt,"prepareInvalidRequestOptions");var AFe={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,i=o9(e);if(!i)return bS.info(`${Y1}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let o=mPt(i);return es.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async a=>{var c,l;o.tracingOptions=a.tracingOptions;let u=Jh(o);u.timeout=((c=a.requestOptions)===null||c===void 0?void 0:c.timeout)||1e3,u.allowInsecureConnection=!0;let f;try{bS.info(`${Y1}: Pinging the Azure IMDS endpoint`),f=await r.sendRequest(u)}catch(p){return DG(p)&&bS.verbose(`${Y1}: Caught error ${p.name}: ${p.message}`),bS.info(`${Y1}: The Azure IMDS endpoint is unavailable`),!1}return f.status===403&&!((l=f.bodyAsText)===null||l===void 0)&&l.includes("unreachable")?(bS.info(`${Y1}: The Azure IMDS endpoint is unavailable`),bS.info(`${Y1}: ${f.bodyAsText}`),!1):(bS.info(`${Y1}: The Azure IMDS endpoint is available`),!0)})}};d();d();d();d();d();var q0e;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(q0e||(q0e={}));function AV(t){var e,r;let n=t;return n===void 0&&((r=(e=globalThis.process)===null||e===void 0?void 0:e.env)===null||r===void 0?void 0:r.AZURE_REGIONAL_AUTHORITY_NAME)!==void 0&&(n=process.env.AZURE_REGIONAL_AUTHORITY_NAME),n===q0e.AutoDiscoverRegion?"AUTO_DISCOVER":n}s(AV,"calculateRegionalAuthority");var _f=ii("MsalClient");function RPt(t,e,r={}){var n,i,o;let a=eG((n=r.logger)!==null&&n!==void 0?n:_f,e,t),c=U0e(a,Q0e(r)),l=new D1(Object.assign(Object.assign({},r.tokenCredentialOptions),{authorityHost:c,loggingOptions:r.loggingOptions}));return{auth:{clientId:t,authority:c,knownAuthorities:pFe(a,c,r.disableInstanceDiscovery)},system:{networkClient:l,loggerOptions:{loggerCallback:hV((i=r.logger)!==null&&i!==void 0?i:_f),logLevel:gV(JW()),piiLoggingEnabled:(o=r.loggingOptions)===null||o===void 0?void 0:o.enableUnsafeSupportLogging}}}}s(RPt,"generateMsalConfiguration");function sm(t,e,r={}){var n;let i={msalConfig:RPt(t,e,r),cachedAccount:r.authenticationRecord?mFe(r.authenticationRecord):null,pluginConfiguration:SDe.generatePluginConfiguration(r),logger:(n=r.logger)!==null&&n!==void 0?n:_f},o=new Map;async function a(P={}){let N=P.enableCae?"CAE":"default",M=o.get(N);if(M)return i.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),M;i.logger.getToken.info(`Creating new PublicClientApplication with CAE ${P.enableCae?"enabled":"disabled"}.`);let J=P.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=P.enableCae?["cp1"]:void 0,M=new CP(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await J}})),o.set(N,M),M}s(a,"getPublicApp");let c=new Map;async function l(P={}){let N=P.enableCae?"CAE":"default",M=c.get(N);if(M)return i.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),M;i.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${P.enableCae?"enabled":"disabled"}.`);let J=P.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=P.enableCae?["cp1"]:void 0,M=new vP(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await J}})),c.set(N,M),M}s(l,"getConfidentialApp");async function u(P,N,M={}){if(i.cachedAccount===null)throw i.logger.getToken.info("No cached account found in local state."),new Yh({scopes:N});M.claims&&(i.cachedClaims=M.claims);let J={account:i.cachedAccount,scopes:N,claims:i.cachedClaims};i.pluginConfiguration.broker.isEnabled&&(J.tokenQueryParameters||(J.tokenQueryParameters={}),i.pluginConfiguration.broker.enableMsaPassthrough&&(J.tokenQueryParameters.msal_request_type="consumer_passthrough")),M.proofOfPossessionOptions&&(J.shrNonce=M.proofOfPossessionOptions.nonce,J.authenticationScheme="pop",J.resourceRequestMethod=M.proofOfPossessionOptions.resourceRequestMethod,J.resourceRequestUri=M.proofOfPossessionOptions.resourceRequestUrl),i.logger.getToken.info("Attempting to acquire token silently");try{return await P.acquireTokenSilent(J)}catch(se){throw xS(N,se,M)}}s(u,"getTokenSilent");function f(P){return P?.tenantId?U0e(P.tenantId,Q0e(r)):i.msalConfig.auth.authority}s(f,"calculateRequestAuthority");async function p(P,N,M,J){var se,K;let G=null;try{G=await u(P,N,M)}catch(q){if(q.name!=="AuthenticationRequiredError")throw q;if(M.disableAutomaticAuthentication)throw new Yh({scopes:N,getTokenOptions:M,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(G===null)try{G=await J()}catch(q){throw xS(N,q,M)}return bP(N,G,M),i.cachedAccount=(se=G?.account)!==null&&se!==void 0?se:null,i.logger.getToken.info(Jc(N)),{token:G.accessToken,expiresOnTimestamp:G.expiresOn.getTime(),refreshAfterTimestamp:(K=G.refreshOn)===null||K===void 0?void 0:K.getTime(),tokenType:G.tokenType}}s(p,"withSilentAuthentication");async function m(P,N,M={}){var J;i.logger.getToken.info("Attempting to acquire token using client secret"),i.msalConfig.auth.clientSecret=N;let se=await l(M);try{let K=await se.acquireTokenByClientCredential({scopes:P,authority:f(M),azureRegion:AV(),claims:M?.claims});return bP(P,K,M),i.logger.getToken.info(Jc(P)),{token:K.accessToken,expiresOnTimestamp:K.expiresOn.getTime(),refreshAfterTimestamp:(J=K.refreshOn)===null||J===void 0?void 0:J.getTime(),tokenType:K.tokenType}}catch(K){throw xS(P,K,M)}}s(m,"getTokenByClientSecret");async function h(P,N,M={}){var J;i.logger.getToken.info("Attempting to acquire token using client assertion"),i.msalConfig.auth.clientAssertion=N;let se=await l(M);try{let K=await se.acquireTokenByClientCredential({scopes:P,authority:f(M),azureRegion:AV(),claims:M?.claims,clientAssertion:N});return bP(P,K,M),i.logger.getToken.info(Jc(P)),{token:K.accessToken,expiresOnTimestamp:K.expiresOn.getTime(),refreshAfterTimestamp:(J=K.refreshOn)===null||J===void 0?void 0:J.getTime(),tokenType:K.tokenType}}catch(K){throw xS(P,K,M)}}s(h,"getTokenByClientAssertion");async function g(P,N,M={}){var J;i.logger.getToken.info("Attempting to acquire token using client certificate"),i.msalConfig.auth.clientCertificate=N;let se=await l(M);try{let K=await se.acquireTokenByClientCredential({scopes:P,authority:f(M),azureRegion:AV(),claims:M?.claims});return bP(P,K,M),i.logger.getToken.info(Jc(P)),{token:K.accessToken,expiresOnTimestamp:K.expiresOn.getTime(),refreshAfterTimestamp:(J=K.refreshOn)===null||J===void 0?void 0:J.getTime(),tokenType:K.tokenType}}catch(K){throw xS(P,K,M)}}s(g,"getTokenByClientCertificate");async function y(P,N,M={}){i.logger.getToken.info("Attempting to acquire token using device code");let J=await a(M);return p(J,P,M,()=>{var se,K;let G={scopes:P,cancel:(K=(se=M?.abortSignal)===null||se===void 0?void 0:se.aborted)!==null&&K!==void 0?K:!1,deviceCodeCallback:N,authority:f(M),claims:M?.claims},q=J.acquireTokenByDeviceCode(G);return M.abortSignal&&M.abortSignal.addEventListener("abort",()=>{G.cancel=!0}),q})}s(y,"getTokenByDeviceCode");async function E(P,N,M,J={}){i.logger.getToken.info("Attempting to acquire token using username and password");let se=await a(J);return p(se,P,J,()=>{let K={scopes:P,username:N,password:M,authority:f(J),claims:J?.claims};return se.acquireTokenByUsernamePassword(K)})}s(E,"getTokenByUsernamePassword");function x(){if(i.cachedAccount)return hFe(t,i.cachedAccount)}s(x,"getActiveAccount");async function b(P,N,M,J,se={}){i.logger.getToken.info("Attempting to acquire token using authorization code");let K;return J?(i.msalConfig.auth.clientSecret=J,K=await l(se)):K=await a(se),p(K,P,se,()=>K.acquireTokenByCode({scopes:P,redirectUri:N,code:M,authority:f(se),claims:se?.claims}))}s(b,"getTokenByAuthorizationCode");async function _(P,N,M,J={}){var se;_f.getToken.info("Attempting to acquire token on behalf of another user"),typeof M=="string"?(_f.getToken.info("Using client secret for on behalf of flow"),i.msalConfig.auth.clientSecret=M):typeof M=="function"?(_f.getToken.info("Using client assertion callback for on behalf of flow"),i.msalConfig.auth.clientAssertion=M):(_f.getToken.info("Using client certificate for on behalf of flow"),i.msalConfig.auth.clientCertificate=M);let K=await l(J);try{let G=await K.acquireTokenOnBehalfOf({scopes:P,authority:f(J),claims:J.claims,oboAssertion:N});return bP(P,G,J),_f.getToken.info(Jc(P)),{token:G.accessToken,expiresOnTimestamp:G.expiresOn.getTime(),refreshAfterTimestamp:(se=G.refreshOn)===null||se===void 0?void 0:se.getTime(),tokenType:G.tokenType}}catch(G){throw xS(P,G,J)}}s(_,"getTokenOnBehalfOf");async function k(P,N={}){_f.getToken.info("Attempting to acquire token interactively");let M=await a(N);async function J(K){var G;_f.verbose("Authentication will resume through the broker");let q=se();i.pluginConfiguration.broker.parentWindowHandle?q.windowHandle=Buffer.from(i.pluginConfiguration.broker.parentWindowHandle):_f.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),i.pluginConfiguration.broker.enableMsaPassthrough&&(((G=q.tokenQueryParameters)!==null&&G!==void 0?G:q.tokenQueryParameters={}).msal_request_type="consumer_passthrough"),K?(q.prompt="none",_f.verbose("Attempting broker authentication using the default broker account")):_f.verbose("Attempting broker authentication without the default broker account"),N.proofOfPossessionOptions&&(q.shrNonce=N.proofOfPossessionOptions.nonce,q.authenticationScheme="pop",q.resourceRequestMethod=N.proofOfPossessionOptions.resourceRequestMethod,q.resourceRequestUri=N.proofOfPossessionOptions.resourceRequestUrl);try{return await M.acquireTokenInteractive(q)}catch(le){if(_f.verbose(`Failed to authenticate through the broker: ${le.message}`),K)return J(!1);throw le}}s(J,"getBrokeredToken");function se(){var K,G;return{openBrowser:s(async q=>{await(await Promise.resolve().then(()=>(EV(),$Fe))).default(q,{wait:!0,newInstance:!0})},"openBrowser"),scopes:P,authority:f(N),claims:N?.claims,loginHint:N?.loginHint,errorTemplate:(K=N?.browserCustomizationOptions)===null||K===void 0?void 0:K.errorMessage,successTemplate:(G=N?.browserCustomizationOptions)===null||G===void 0?void 0:G.successMessage,prompt:N?.loginHint?"login":"select_account"}}return s(se,"createBaseInteractiveRequest"),p(M,P,N,async()=>{var K;let G=se();return i.pluginConfiguration.broker.isEnabled?J((K=i.pluginConfiguration.broker.useDefaultBrokerAccount)!==null&&K!==void 0?K:!1):(N.proofOfPossessionOptions&&(G.shrNonce=N.proofOfPossessionOptions.nonce,G.authenticationScheme="pop",G.resourceRequestMethod=N.proofOfPossessionOptions.resourceRequestMethod,G.resourceRequestUri=N.proofOfPossessionOptions.resourceRequestUrl),M.acquireTokenInteractive(G))})}return s(k,"getTokenByInteractiveRequest"),{getActiveAccount:x,getTokenByClientSecret:m,getTokenByClientAssertion:h,getTokenByClientCertificate:g,getTokenByDeviceCode:y,getTokenByUsernamePassword:E,getTokenByAuthorizationCode:b,getTokenOnBehalfOf:_,getTokenByInteractiveRequest:k}}s(sm,"createMsalClient");var zFe=ii("ClientAssertionCredential"),_P=class{static{s(this,"ClientAssertionCredential")}constructor(e,r,n,i={}){if(!e)throw new Vr("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new Vr("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new Vr("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=Xc(i?.additionallyAllowedTenants),this.options=i,this.getAssertion=n,this.msalClient=sm(r,e,Object.assign(Object.assign({},i),{logger:zFe,tokenCredentialOptions:this.options}))}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,zFe);let i=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(i,this.getAssertion,n)})}};var YFe=require("node:fs/promises");var _S="WorkloadIdentityCredential",kPt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],BL=ii(_S),K1=class{static{s(this,"WorkloadIdentityCredential")}constructor(e){this.azureFederatedTokenFileContent=void 0,this.cacheDate=void 0;let r=XW(kPt).assigned.join(", ");BL.info(`Found the following environment variables: ${r}`);let n=e??{},i=n.tenantId||process.env.AZURE_TENANT_ID,o=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,i&&iu(BL,i),!o)throw new Vr(`${_S}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!i)throw new Vr(`${_S}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new Vr(`${_S}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);BL.info(`Invoking ClientAssertionCredential with tenant ID: ${i}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new _P(i,o,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${_S}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw BL.info(n),new Vr(n)}return BL.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new Vr(`${_S}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,YFe.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new Vr(`${_S}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var KFe="ManagedIdentityCredential - Token Exchange",PPt=ii(KFe),ipe={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||PPt.info(`${KFe}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,i={};return new K1(Object.assign(Object.assign({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE},i),{disableInstanceDiscovery:!0})).getToken(r,e)}};var M0=ii("ManagedIdentityCredential"),Wb=class{static{s(this,"ManagedIdentityCredential")}constructor(e,r){var n,i;this.msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};let o;typeof e=="string"?(this.clientId=e,o=r??{}):(this.clientId=e?.clientId,o=e??{}),this.resourceId=o?.resourceId,this.objectId=o?.objectId;let a=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(l=>l.value);if(a.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);o.allowInsecureConnection=!0,((n=o.retryOptions)===null||n===void 0?void 0:n.maxRetries)!==void 0&&(this.msiRetryConfig.maxRetries=o.retryOptions.maxRetries),this.identityClient=new D1(Object.assign(Object.assign({},o),{additionalPolicies:[{policy:gFe(this.msiRetryConfig),position:"perCall"}]})),this.managedIdentityApp=new xP({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:gV(JW()),piiLoggingEnabled:(i=o.loggingOptions)===null||i===void 0?void 0:i.enableUnsafeSupportLogging,loggerCallback:hV(M0)}}}),this.isAvailableIdentityClient=new D1(Object.assign(Object.assign({},o),{retryOptions:{maxRetries:0}}));let c=this.managedIdentityApp.getManagedIdentitySource();if(c==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw M0.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Vr("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(c==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw M0.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new Vr(`ManagedIdentityCredential: ${FNe}`);if(M0.info(`Using ${c} managed identity.`),a.length===1){let{key:l,value:u}=a[0];M0.info(`${c} with ${l}: ${u}`)}}async getToken(e,r={}){M0.getToken.info("Using the MSAL provider for Managed Identity.");let n=o9(e);if(!n)throw new Vr(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return es.withSpan("ManagedIdentityCredential.getToken",r,async()=>{var i;try{let o=await ipe.isAvailable(this.clientId),a=this.managedIdentityApp.getManagedIdentitySource(),c=a==="DefaultToImds"||a==="Imds";if(M0.getToken.info(`MSAL Identity source: ${a}`),o){M0.getToken.info("Using the token exchange managed identity.");let u=await ipe.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(u===null)throw new Vr("Attempted to use the token exchange managed identity, but received a null response.");return u}else if(c&&(M0.getToken.info("Using the IMDS endpoint to probe for availability."),!await AFe.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new Vr("Attempted to use the IMDS endpoint, but it is not available.");M0.getToken.info("Calling into MSAL for managed identity token.");let l=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,l,r),M0.getToken.info(Jc(e)),{expiresOnTimestamp:l.expiresOn.getTime(),token:l.accessToken,refreshAfterTimestamp:(i=l.refreshOn)===null||i===void 0?void 0:i.getTime(),tokenType:"Bearer"}}catch(o){throw M0.getToken.error(Ro(e,o)),o.name==="AuthenticationRequiredError"?o:BPt(o)?new Vr(`ManagedIdentityCredential: Network unreachable. Message: ${o.message}`,{cause:o}):new Vr(`ManagedIdentityCredential: Authentication failed. Message ${o.message}`,{cause:o})}})}ensureValidMsalToken(e,r,n){let i=s(o=>(M0.getToken.info(o),new Yh({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:o})),"createError");if(!r)throw i("No response.");if(!r.expiresOn)throw i('Response had no "expiresOn" property.');if(!r.accessToken)throw i('Response had no "accessToken" property.')}};function BPt(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}s(BPt,"isNetworkError");d();d();function Gb(t){return Array.isArray(t)?t:[t]}s(Gb,"ensureScopes");function SP(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(Ro(t,r)),r}}s(SP,"ensureValidScopeForDevTimeCreds");function vV(t){return t.replace(/\/.default$/,"")}s(vV,"getScopeResource");var JFe=Ne(require("child_process"),1);d();function ope(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(Ro("",r)),r}}s(ope,"checkSubscription");var am=ii("AzureCliCredential"),XFe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(am.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let i=[],o=[];return e&&(i=["--tenant",e]),r&&(o=["--subscription",`"${r}"`]),new Promise((a,c)=>{try{JFe.default.execFile("az",["account","get-access-token","--output","json","--resource",t,...i,...o],{cwd:XFe.getSafeWorkingDir(),shell:!0,timeout:n},(l,u,f)=>{a({stdout:u,stderr:f,error:l})})}catch(l){c(l)}})}},DL=class{static{s(this,"AzureCliCredential")}constructor(e){e?.tenantId&&(iu(am,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(ope(am,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=Xc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=_c(this.tenantId,r,this.additionallyAllowedTenantIds);n&&iu(am,n),this.subscription&&ope(am,this.subscription);let i=typeof e=="string"?e:e[0];return am.getToken.info(`Using the scope ${i}`),es.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{SP(i,am);let u=vV(i),f=await XFe.getAzureCliAccessToken(u,n,this.subscription,this.timeout),p=(o=f.stderr)===null||o===void 0?void 0:o.match("(.*)az login --scope(.*)"),m=((a=f.stderr)===null||a===void 0?void 0:a.match("(.*)az login(.*)"))&&!p;if(((c=f.stderr)===null||c===void 0?void 0:c.match("az:(.*)not found"))||((l=f.stderr)===null||l===void 0?void 0:l.startsWith("'az' is not recognized"))){let g=new Vr("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw am.getToken.info(Ro(e,g)),g}if(m){let g=new Vr("Please run 'az login' from a command prompt to authenticate before using this credential.");throw am.getToken.info(Ro(e,g)),g}try{let g=f.stdout,y=this.parseRawResponse(g);return am.getToken.info(Jc(e)),y}catch(g){throw f.stderr?new Vr(f.stderr):g}}catch(u){let f=u.name==="CredentialUnavailableError"?u:new Vr(u.message||"Unknown error while trying to retrieve the access token");throw am.getToken.info(Ro(e,f)),f}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,i=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(i))return am.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i,tokenType:"Bearer"};if(i=new Date(r.expiresOn).getTime(),isNaN(i))throw new Vr(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:i,tokenType:"Bearer"}}};d();var ZFe=Ne(require("child_process"),1);var J1=ii("AzureDeveloperCliCredential"),eOe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(J1.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((i,o)=>{try{ZFe.default.execFile("azd",["auth","token","--output","json",...t.reduce((a,c)=>a.concat("--scope",c),[]),...n],{cwd:eOe.getSafeWorkingDir(),timeout:r},(a,c,l)=>{i({stdout:c,stderr:l,error:a})})}catch(a){o(a)}})}},NL=class{static{s(this,"AzureDeveloperCliCredential")}constructor(e){e?.tenantId&&(iu(J1,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Xc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=_c(this.tenantId,r,this.additionallyAllowedTenantIds);n&&iu(J1,n);let i;return typeof e=="string"?i=[e]:i=e,J1.getToken.info(`Using the scopes ${e}`),es.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{i.forEach(m=>{SP(m,J1)});let u=await eOe.getAzdAccessToken(i,n,this.timeout),f=((o=u.stderr)===null||o===void 0?void 0:o.match("not logged in, run `azd login` to login"))||((a=u.stderr)===null||a===void 0?void 0:a.match("not logged in, run `azd auth login` to login"));if(((c=u.stderr)===null||c===void 0?void 0:c.match("azd:(.*)not found"))||((l=u.stderr)===null||l===void 0?void 0:l.startsWith("'azd' is not recognized"))||u.error&&u.error.code==="ENOENT"){let m=new Vr("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw J1.getToken.info(Ro(e,m)),m}if(f){let m=new Vr("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw J1.getToken.info(Ro(e,m)),m}try{let m=JSON.parse(u.stdout);return J1.getToken.info(Jc(e)),{token:m.token,expiresOnTimestamp:new Date(m.expiresOn).getTime(),tokenType:"Bearer"}}catch(m){throw u.stderr?new Vr(u.stderr):m}}catch(u){let f=u.name==="CredentialUnavailableError"?u:new Vr(u.message||"Unknown error while trying to retrieve the access token");throw J1.getToken.info(Ro(e,f)),f}})}};d();d();var tOe=Ne(require("child_process"),1),rOe={execFile(t,e,r){return new Promise((n,i)=>{tOe.execFile(t,e,r,(o,a,c)=>{Buffer.isBuffer(a)&&(a=a.toString("utf8")),Buffer.isBuffer(c)&&(c=c.toString("utf8")),c||o?i(c?new Error(c):o):n(a)})})}};var X1=ii("AzurePowerShellCredential"),iOe=process.platform==="win32";function oOe(t){return iOe?`${t}.exe`:t}s(oOe,"formatCommand");async function nOe(t,e){let r=[];for(let n of t){let[i,...o]=n,a=await rOe.execFile(i,o,{encoding:"utf8",timeout:e});r.push(a)}return r}s(nOe,"runCommands");var sOe={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},spe={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},DPt=s(t=>t.message.match(`(.*)${sOe.login}(.*)`),"isLoginError"),NPt=s(t=>t.message.match(sOe.installed),"isNotInstalledError"),ape=[oOe("pwsh")];iOe&&ape.push(oOe("powershell"));var LL=class{static{s(this,"AzurePowerShellCredential")}constructor(e){e?.tenantId&&(iu(X1,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Xc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let i of[...ape]){try{await nOe([[i,"/?"]],n)}catch{ape.shift();continue}let a=(await nOe([[i,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return LPt(a)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=_c(this.tenantId,r,this.additionallyAllowedTenantIds),i=typeof e=="string"?e:e[0];n&&iu(X1,n);try{SP(i,X1),X1.getToken.info(`Using the scope ${i}`);let o=vV(i),a=await this.getAzurePowerShellAccessToken(o,n,this.timeout);return X1.getToken.info(Jc(e)),{token:a.Token,expiresOnTimestamp:new Date(a.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(o){if(NPt(o)){let c=new Vr(spe.installed);throw X1.getToken.info(Ro(i,c)),c}else if(DPt(o)){let c=new Vr(spe.login);throw X1.getToken.info(Ro(i,c)),c}let a=new Vr(`${o}. ${spe.troubleshoot}`);throw X1.getToken.info(Ro(i,a)),a}})}};async function LPt(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let i of r)try{let o=JSON.parse(i);if(o?.Token)return n=n.replace(i,""),n&&X1.getToken.warning(n),o}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}s(LPt,"parseJsonToken");d();var cpe=ii("ChainedTokenCredential"),ML=class{static{s(this,"ChainedTokenCredential")}constructor(...e){this._sources=[],this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,i,o=[];return es.withSpan("ChainedTokenCredential.getToken",r,async a=>{for(let c=0;c<this._sources.length&&n===null;c++)try{n=await this._sources[c].getToken(e,a),i=this._sources[c]}catch(l){if(l.name==="CredentialUnavailableError"||l.name==="AuthenticationRequiredError")o.push(l);else throw cpe.getToken.info(Ro(e,l)),l}if(!n&&o.length>0){let c=new $6(o,"ChainedTokenCredential authentication failed.");throw cpe.getToken.info(Ro(e,c)),c}if(cpe.getToken.info(`Result for ${i.constructor.name}: ${Jc(e)}`),n===null)throw new Vr("Failed to retrieve a valid token");return{token:n,successfulCredential:i}})}};d();d();var OL=require("node:crypto");var cOe=require("node:fs/promises");var FL="ClientCertificateCredential",aOe=ii(FL),QL=class{static{s(this,"ClientCertificateCredential")}constructor(e,r,n,i={}){if(!e||!r)throw new Error(`${FL}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=Xc(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration=Object.assign({},typeof n=="string"?{certificatePath:n}:n);let o=this.certificateConfiguration.certificate,a=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(o||a))throw new Error(`${FL}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o&&a)throw new Error(`${FL}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=sm(r,e,Object.assign(Object.assign({},i),{logger:aOe,tokenCredentialOptions:i}))}async getToken(e,r={}){return es.withSpan(`${FL}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,aOe);let i=Array.isArray(e)?e:[e],o=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(i,o,n)})}async buildClientCertificate(){var e;let r=await MPt(this.certificateConfiguration,(e=this.sendCertificateChain)!==null&&e!==void 0?e:!1),n;return this.certificateConfiguration.certificatePassword!==void 0?n=(0,OL.createPrivateKey)({key:r.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():n=r.certificateContents,{thumbprint:r.thumbprint,thumbprintSha256:r.thumbprintSha256,privateKey:n,x5c:r.x5c}}};async function MPt(t,e){let r=t.certificate,n=t.certificatePath,i=r||await(0,cOe.readFile)(n,"utf8"),o=e?i:void 0,a=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,c=[],l;do l=a.exec(i),l&&c.push(l[3]);while(l);if(c.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let u=(0,OL.createHash)("sha1").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase(),f=(0,OL.createHash)("sha256").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprintSha256:f,thumbprint:u,x5c:o}}s(MPt,"parseCertificate");d();var lOe=ii("ClientSecretCredential"),UL=class{static{s(this,"ClientSecretCredential")}constructor(e,r,n,i={}){if(!e)throw new Vr("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new Vr("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new Vr("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=Xc(i?.additionallyAllowedTenants),this.msalClient=sm(r,e,Object.assign(Object.assign({},i),{logger:lOe,tokenCredentialOptions:i}))}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,lOe);let i=Gb(e);return this.msalClient.getTokenByClientSecret(i,this.clientSecret,n)})}};d();var FPt=ii("UsernamePasswordCredential"),qL=class{static{s(this,"UsernamePasswordCredential")}constructor(e,r,n,i,o={}){if(!e)throw new Vr("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new Vr("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new Vr("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!i)throw new Vr("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=Xc(o?.additionallyAllowedTenants),this.username=n,this.password=i,this.msalClient=sm(r,this.tenantId,Object.assign(Object.assign({},o),{tokenCredentialOptions:o??{}}))}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,FPt);let i=Gb(e);return this.msalClient.getTokenByUsernamePassword(i,this.username,this.password,n)})}};var OPt=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function QPt(){var t;return((t=process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS)!==null&&t!==void 0?t:"").split(";")}s(QPt,"getAdditionallyAllowedTenants");var xV="EnvironmentCredential",Z1=ii(xV);function UPt(){var t;let e=((t=process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN)!==null&&t!==void 0?t:"").toLowerCase(),r=e==="true"||e==="1";return Z1.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${r}`),r}s(UPt,"getSendCertificateChain");var HL=class{static{s(this,"EnvironmentCredential")}constructor(e){this._credential=void 0;let r=XW(OPt).assigned.join(", ");Z1.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET,a=QPt(),c=UPt(),l=Object.assign(Object.assign({},e),{additionallyAllowedTenantIds:a,sendCertificateChain:c});if(n&&iu(Z1,n),n&&i&&o){Z1.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new UL(n,i,o,l);return}let u=process.env.AZURE_CLIENT_CERTIFICATE_PATH,f=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&i&&u){Z1.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${u}`),this._credential=new QL(n,i,{certificatePath:u,certificatePassword:f},l);return}let p=process.env.AZURE_USERNAME,m=process.env.AZURE_PASSWORD;n&&i&&p&&m&&(Z1.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${p}`),Z1.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new qL(n,i,p,m,l))}async getToken(e,r={}){return es.withSpan(`${xV}.getToken`,r,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return Z1.getToken.info(Jc(e)),i}catch(i){let o=new hb(400,{error:`${xV} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw Z1.getToken.info(Ro(e,o)),o}throw new Vr(`${xV} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};var lpe=ii("DefaultAzureCredential");function qPt(t={}){var e,r,n,i;(e=t.retryOptions)!==null&&e!==void 0||(t.retryOptions={maxRetries:5,retryDelayInMs:800});let o=(r=t?.managedIdentityClientId)!==null&&r!==void 0?r:process.env.AZURE_CLIENT_ID,a=(n=t?.workloadIdentityClientId)!==null&&n!==void 0?n:o,c=t?.managedIdentityResourceId,l=process.env.AZURE_FEDERATED_TOKEN_FILE,u=(i=t?.tenantId)!==null&&i!==void 0?i:process.env.AZURE_TENANT_ID;if(c){let f=Object.assign(Object.assign({},t),{resourceId:c});return new Wb(f)}if(l&&a){let f=Object.assign(Object.assign({},t),{tenantId:u});return new Wb(a,f)}if(o){let f=Object.assign(Object.assign({},t),{clientId:o});return new Wb(f)}return new Wb(t)}s(qPt,"createDefaultManagedIdentityCredential");function HPt(t){var e,r,n;let i=(e=t?.managedIdentityClientId)!==null&&e!==void 0?e:process.env.AZURE_CLIENT_ID,o=(r=t?.workloadIdentityClientId)!==null&&r!==void 0?r:i,a=process.env.AZURE_FEDERATED_TOKEN_FILE,c=(n=t?.tenantId)!==null&&n!==void 0?n:process.env.AZURE_TENANT_ID;if(a&&o){let l=Object.assign(Object.assign({},t),{tenantId:c,clientId:o,tokenFilePath:a});return new K1(l)}if(c){let l=Object.assign(Object.assign({},t),{tenantId:c});return new K1(l)}return new K1(t)}s(HPt,"createDefaultWorkloadIdentityCredential");function WPt(t={}){let e=t.processTimeoutInMs;return new NL(Object.assign({processTimeoutInMs:e},t))}s(WPt,"createDefaultAzureDeveloperCliCredential");function GPt(t={}){let e=t.processTimeoutInMs;return new DL(Object.assign({processTimeoutInMs:e},t))}s(GPt,"createDefaultAzureCliCredential");function jPt(t={}){let e=t.processTimeoutInMs;return new LL(Object.assign({processTimeoutInMs:e},t))}s(jPt,"createDefaultAzurePowershellCredential");function VPt(t={}){return new HL(t)}s(VPt,"createEnvironmentCredential");var upe=class{static{s(this,"UnavailableDefaultCredential")}constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return lpe.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},RP=class extends ML{static{s(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[GPt,jPt,WPt],i=[VPt,HPt,qPt],o=[];if(r)switch(r){case"dev":o=n;break;case"prod":o=i;break;default:{let c=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev'.`;throw lpe.warning(c),new Error(c)}}else o=[...i,...n];let a=o.map(c=>{try{return c(e)}catch(l){return lpe.warning(`Skipped ${c.name} because of an error creating the credential: ${l}`),new upe(c.name,l.message)}});super(...a)}};d();var ihn=ii("InteractiveBrowserCredential");d();var mhn=ii("DeviceCodeCredential");d();var $Pt="AzurePipelinesCredential",Ihn=ii($Pt);d();var Nhn=ii("AuthorizationCodeCredential");d();var zPt="OnBehalfOfCredential",Ghn=ii(zPt);d();function YPt(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(YPt,"getIntegrationId");function jb(t){let e={...Rh(t),"X-GitHub-Api-Version":qA},r=YPt(t.get(rn));return r&&(e["Copilot-Integration-Id"]=r),process.env.MSBENCH_MODE==="true"&&(e["ces-proxy-target"]=T_.api,e["Copilot-Integration-Id"]="autodev-test"),e}s(jb,"getCapiHeaders");function bV(t,e,...r){if(dpe()){let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return fb(t,e,"api",...r)}s(bV,"getCapiUrl");async function SS(t,e){let r=await t.get(jr).getToken(),n=bV(t,r,e),i=r.token;dpe()&&(i=await dOe());let o={Authorization:`Bearer ${i}`,...jb(t)};return await t.get(ai).fetch(new URL(n).href,{method:"GET",headers:o})}s(SS,"fetchCapiUrl");async function uOe(t,e,r){let n=await t.get(jr).getToken(),i=bV(t,n,e),o=n.token;dpe()&&(o=await dOe());let a={Authorization:`Bearer ${o}`,...jb(t)};return await t.get(ai).fetch(new URL(i).href,{method:"POST",headers:a,body:r})}s(uOe,"postCapiUrl");function dpe(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}s(dpe,"isMsBenchModeEnabled");async function dOe(){let e=await new RP().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}s(dOe,"getMsBenchToken");d();var fOe=10*60*1e3,mn={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},pOe=new Set([mn.O1Ga,mn.O3Mini,mn.O1Mini,mn.Gemini20Pro,mn.Gemini20Flash]);function cm(t){switch(t){case"edits":case"user":case"inline":return[mn.Gpt4o,mn.Gpt4turbo,mn.Gpt4,mn.O1Mini,mn.O1Ga,mn.Claude35Sonnet,mn.O3Mini,mn.Gemini20Flash,mn.Claude37Sonnet,mn.Claude37SonnetThought,mn.Gpt45,mn.Gpt41,mn.CopilotBase];case"meta":case"suggestions":case"synonyms":return[mn.Gpt4oMini,mn.Gpt4o,mn.Gpt35turbo,mn.Gpt41,mn.CopilotBase];case"gitCommit":return[mn.Gpt4oMini,mn.Gpt4o,mn.Gpt4,mn.Gpt41,mn.CopilotBase];case"codeReview":return[mn.Gpt4,mn.Gpt4o,mn.Gpt41,mn.CopilotBase];case"nesStubs":return[mn.Gpt4oMini,mn.Gpt4o,mn.Gpt41,mn.CopilotBase]}}s(cm,"getSupportedModelFamiliesForPrompt");var wV={textEmbedding3Small:"text-embedding-3-small"},KPt=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),JPt=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:KPt,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),mOe=I.Object({data:I.Array(JPt)}),kd=class{static{s(this,"ModelMetadataProvider")}},IV=class extends kd{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;ia(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await SS(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){pn.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw pn.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new UA(r)}await this.processModels(r)}async fetchModel(r){let n=await SS(this.ctx,`/models/${r}`);if(!n.ok){pn.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await uOe(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){pn.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>fOe}},TV=class extends kd{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Bt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let c of a){let l=await this.fetchModel(c.trim());l!==void 0&&(l.isExperimental=!0,o.push(l))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<fOe)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};d();function hOe(t){let e=vi(t,Rt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(hOe,"getUserSelectedModelConfiguration");d();d();d();var kP=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};d();var gOe=Ne(require("node:fs/promises")),_V=Ne(require("node:path"));async function SV(t){return await gOe.readFile(fpe(t))}s(SV,"readFile");function fpe(t){return _V.default.resolve(_V.default.extname(__filename)!==".ts"?__dirname:_V.default.resolve(__dirname,"../../dist"),t)}s(fpe,"locateFile");var PP=Ne(kOe());var NV=new Map;function zo(t="o200k_base"){let e=NV.get(t);return e!==void 0||(e=NV.get("o200k_base"),e!==void 0)?e:new LV}s(zo,"getTokenizer");async function BOe(t="o200k_base"){return await RS,zo(t)}s(BOe,"getTokenizerAsync");async function p3t(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await SV(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(p3t,"parseTikTokenNoIndex");var bpe=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,PP.createTokenizer)(await p3t(`resources/${e}.tiktoken.noindex`),(0,PP.getSpecialTokensByEncoder)(e),(0,PP.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new kP("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(-r),{text:this.detokenize(c),tokens:c})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(0,r),{text:this.detokenize(c),tokens:c})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},Ipe=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},m3t={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},xpe=4,LV=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let i=0;i<r.length;i++)n=n*Math.pow(10,xpe)+r.charCodeAt(i);return n})}detokenize(e){return e.map(r=>{let n=[],i=r.toString();for(;i.length>0;){let o=i.slice(-xpe),a=String.fromCharCode(parseInt(o));n.unshift(a),i=i.slice(0,-xpe)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?m3t[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}};async function POe(t){try{let e=await bpe.create(t);NV.set(t,e)}catch{}}s(POe,"setTokenizer");var RS=(async()=>{NV.set("mock",new Ipe),await Promise.all([POe("cl100k_base"),POe("o200k_base")])})();d();d();var h3t=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},NOe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Tpe,MV,LOe,wpe=class extends In{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),Tpe.add(this),MV.set(this,void 0),h3t(this,MV,e,"f"),this.error=r}Errors(){return new eb(NOe(this,Tpe,"m",LOe).call(this))}};MV=new WeakMap,Tpe=new WeakSet,LOe=s(function*(){this.error&&(yield this.error),yield*NOe(this,MV,"f")},"_AssertError_Iterator");function DOe(t,e,r){if(!Ii(t,e,r))throw new wpe(YA(t,e,r))}s(DOe,"AssertValue");function FV(...t){return t.length===3?DOe(t[0],t[1],t[2]):DOe(t[0],[],t[1])}s(FV,"Assert");d();d();d();function g3t(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=ho(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=ho(t[r]);return e}s(g3t,"FromObject");function A3t(t){return t.map(e=>ho(e))}s(A3t,"FromArray");function y3t(t){return t.slice()}s(y3t,"FromTypedArray");function C3t(t){return new Map(ho([...t.entries()]))}s(C3t,"FromMap");function E3t(t){return new Set(ho([...t.entries()]))}s(E3t,"FromSet");function v3t(t){return new Date(t.toISOString())}s(v3t,"FromDate");function ho(t){if(bn(t))return A3t(t);if(Ad(t))return v3t(t);if(Qp(t))return y3t(t);if(_Re(t))return C3t(t);if(SRe(t))return E3t(t);if(Ei(t))return g3t(t);if(m0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(ho,"Clone");var F0=class extends In{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function go(t){return jx(t)?t():ho(t)}s(go,"FromDefault");function x3t(t,e){return xn(t,"default")?go(t.default):{}}s(x3t,"FromAny");function b3t(t,e){return{}}s(b3t,"FromArgument");function I3t(t,e){if(t.uniqueItems===!0&&!xn(t,"default"))throw new F0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!xn(t,"default"))throw new F0(t,"Array with the contains constraint requires a default value");return"default"in t?go(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>Sf(t.items,e)):[]}s(I3t,"FromArray");function T3t(t,e){return xn(t,"default")?go(t.default):async function*(){}()}s(T3t,"FromAsyncIterator");function w3t(t,e){return xn(t,"default")?go(t.default):BigInt(0)}s(w3t,"FromBigInt");function _3t(t,e){return xn(t,"default")?go(t.default):!1}s(_3t,"FromBoolean");function S3t(t,e){if(xn(t,"default"))return go(t.default);{let r=Sf(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(S3t,"FromConstructor");function R3t(t,e){return xn(t,"default")?go(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(R3t,"FromDate");function k3t(t,e){return xn(t,"default")?go(t.default):()=>Sf(t.returns,e)}s(k3t,"FromFunction");function P3t(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return Sf(n,[...e,...r])}s(P3t,"FromImport");function B3t(t,e){return xn(t,"default")?go(t.default):t.minimum!==void 0?t.minimum:0}s(B3t,"FromInteger");function D3t(t,e){if(xn(t,"default"))return go(t.default);{let r=t.allOf.reduce((n,i)=>{let o=Sf(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!Ii(t,e,r))throw new F0(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(D3t,"FromIntersect");function N3t(t,e){return xn(t,"default")?go(t.default):function*(){}()}s(N3t,"FromIterator");function L3t(t,e){return xn(t,"default")?go(t.default):t.const}s(L3t,"FromLiteral");function M3t(t,e){if(xn(t,"default"))return go(t.default);throw new F0(t,"Never types cannot be created. Consider using a default value.")}s(M3t,"FromNever");function F3t(t,e){if(xn(t,"default"))return go(t.default);throw new F0(t,"Not types must have a default value")}s(F3t,"FromNot");function O3t(t,e){return xn(t,"default")?go(t.default):null}s(O3t,"FromNull");function Q3t(t,e){return xn(t,"default")?go(t.default):t.minimum!==void 0?t.minimum:0}s(Q3t,"FromNumber");function U3t(t,e){if(xn(t,"default"))return go(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=Sf(o,e));return n}}s(U3t,"FromObject");function q3t(t,e){return xn(t,"default")?go(t.default):Promise.resolve(Sf(t.item,e))}s(q3t,"FromPromise");function H3t(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(xn(t,"default"))return go(t.default);if(r===VA||r===jA)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=Sf(n,e);return o}}s(H3t,"FromRecord");function W3t(t,e){return xn(t,"default")?go(t.default):Sf(fo(t,e),e)}s(W3t,"FromRef");function G3t(t,e){if(xn(t,"default"))return go(t.default);throw new F0(t,"RegExp types cannot be created. Consider using a default value.")}s(G3t,"FromRegExp");function j3t(t,e){if(t.pattern!==void 0){if(xn(t,"default"))return go(t.default);throw new F0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(xn(t,"default"))return go(t.default);throw new F0(t,"String types with formats must specify a default value")}else return xn(t,"default")?go(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(j3t,"FromString");function V3t(t,e){return xn(t,"default")?go(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(V3t,"FromSymbol");function $3t(t,e){if(xn(t,"default"))return go(t.default);if(!yH(t))throw new F0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return Hk(t)[0]}s($3t,"FromTemplateLiteral");function z3t(t,e){if(MOe++>rBt)throw new F0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return xn(t,"default")?go(t.default):Sf(fo(t,e),e)}s(z3t,"FromThis");function Y3t(t,e){return xn(t,"default")?go(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>Sf(t.items[n],e))}s(Y3t,"FromTuple");function K3t(t,e){if(xn(t,"default"))return go(t.default)}s(K3t,"FromUndefined");function J3t(t,e){if(xn(t,"default"))return go(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return Sf(t.anyOf[0],e)}s(J3t,"FromUnion");function X3t(t,e){return xn(t,"default")?go(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(X3t,"FromUint8Array");function Z3t(t,e){return xn(t,"default")?go(t.default):{}}s(Z3t,"FromUnknown");function eBt(t,e){if(xn(t,"default"))return go(t.default)}s(eBt,"FromVoid");function tBt(t,e){if(xn(t,"default"))return go(t.default);throw new Error("User defined types must specify a default value")}s(tBt,"FromKind");function Sf(t,e){let r=Al(t,e),n=t;switch(n[et]){case"Any":return x3t(n,r);case"Argument":return b3t(n,r);case"Array":return I3t(n,r);case"AsyncIterator":return T3t(n,r);case"BigInt":return w3t(n,r);case"Boolean":return _3t(n,r);case"Constructor":return S3t(n,r);case"Date":return R3t(n,r);case"Function":return k3t(n,r);case"Import":return P3t(n,r);case"Integer":return B3t(n,r);case"Intersect":return D3t(n,r);case"Iterator":return N3t(n,r);case"Literal":return L3t(n,r);case"Never":return M3t(n,r);case"Not":return F3t(n,r);case"Null":return O3t(n,r);case"Number":return Q3t(n,r);case"Object":return U3t(n,r);case"Promise":return q3t(n,r);case"Record":return H3t(n,r);case"Ref":return W3t(n,r);case"RegExp":return G3t(n,r);case"String":return j3t(n,r);case"Symbol":return V3t(n,r);case"TemplateLiteral":return $3t(n,r);case"This":return z3t(n,r);case"Tuple":return Y3t(n,r);case"Undefined":return K3t(n,r);case"Union":return J3t(n,r);case"Uint8Array":return X3t(n,r);case"Unknown":return Z3t(n,r);case"Void":return eBt(n,r);default:if(!yd.Has(n[et]))throw new F0(n,"Unknown type");return tBt(n,r)}}s(Sf,"Visit");var rBt=512,MOe=0;function lm(...t){return MOe=0,t.length===2?Sf(t[0],t[1]):Sf(t[0],[])}s(lm,"Create");var OV=class extends In{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function nBt(t,e,r){if(t[et]==="Object"&&typeof r=="object"&&!A1(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,c]=[1/o.length,o.length];return o.reduce((l,[u,f])=>{let p=f[et]==="Literal"&&f.const===r[u]?c:0,m=Ii(f,e,r[u])?a:0,h=i.includes(u)?a:0;return l+(p+m+h)},0)}else return Ii(t,e,r)?1:0}s(nBt,"ScoreUnion");function iBt(t,e,r){let n=t.anyOf.map(a=>fo(a,e)),[i,o]=[n[0],0];for(let a of n){let c=nBt(a,e,r);c>o&&(i=a,o=c)}return i}s(iBt,"SelectUnion");function oBt(t,e,r){if("default"in t)return typeof r=="function"?t.default:ho(t.default);{let n=iBt(t,e,r);return GL(n,e,r)}}s(oBt,"CastUnion");function sBt(t,e,r){return Ii(t,e,r)?ho(r):lm(t,e)}s(sBt,"DefaultClone");function aBt(t,e,r){return Ii(t,e,r)?r:lm(t,e)}s(aBt,"Default");function cBt(t,e,r){if(Ii(t,e,r))return ho(r);let n=bn(r)?ho(r):lm(t,e),i=Gr(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(Gr(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(l=>rg(t.items,e,l));if(t.uniqueItems!==!0)return a;let c=[...new Set(a)];if(!Ii(t,e,c))throw new OV(t,"Array cast produced invalid data due to uniqueItems constraint");return c}s(cBt,"FromArray");function lBt(t,e,r){if(Ii(t,e,r))return lm(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=rg(a,e,r.prototype[o]));return i}s(lBt,"FromConstructor");function uBt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return rg(i,[...e,...n],r)}s(uBt,"FromImport");function dBt(t,e,r){let n=lm(t,e),i=Ei(n)&&Ei(r)?{...n,...r}:r;return Ii(t,e,i)?i:lm(t,e)}s(dBt,"FromIntersect");function fBt(t,e,r){throw new OV(t,"Never types cannot be cast")}s(fBt,"FromNever");function pBt(t,e,r){if(Ii(t,e,r))return r;if(r===null||typeof r!="object")return lm(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=rg(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=rg(t.additionalProperties,e,r[a]))}return i}s(pBt,"FromObject");function mBt(t,e,r){if(Ii(t,e,r))return ho(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return lm(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,c]of Object.entries(r))o[a]=rg(i,e,c);return o}s(mBt,"FromRecord");function hBt(t,e,r){return rg(fo(t,e),e,r)}s(hBt,"FromRef");function gBt(t,e,r){return rg(fo(t,e),e,r)}s(gBt,"FromThis");function ABt(t,e,r){return Ii(t,e,r)?ho(r):bn(r)?t.items===void 0?[]:t.items.map((n,i)=>rg(n,e,r[i])):lm(t,e)}s(ABt,"FromTuple");function yBt(t,e,r){return Ii(t,e,r)?ho(r):oBt(t,e,r)}s(yBt,"FromUnion");function rg(t,e,r){let n=ro(t.$id)?Al(t,e):e,i=t;switch(t[et]){case"Array":return cBt(i,n,r);case"Constructor":return lBt(i,n,r);case"Import":return uBt(i,n,r);case"Intersect":return dBt(i,n,r);case"Never":return fBt(i,n,r);case"Object":return pBt(i,n,r);case"Record":return mBt(i,n,r);case"Ref":return hBt(i,n,r);case"This":return gBt(i,n,r);case"Tuple":return ABt(i,n,r);case"Union":return yBt(i,n,r);case"Date":case"Symbol":case"Uint8Array":return sBt(t,e,r);default:return aBt(i,n,r)}}s(rg,"Visit");function GL(...t){return t.length===3?rg(t[0],t[1],t[2]):rg(t[0],[],t[1])}s(GL,"Cast");d();function CBt(t){return $x(t)&&t[et]!=="Unsafe"}s(CBt,"IsCheckable");function EBt(t,e,r){return bn(r)?r.map(n=>Rf(t.items,e,n)):r}s(EBt,"FromArray");function vBt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Rf(i,[...e,...n],r)}s(vBt,"FromImport");function xBt(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(c=>Rf(c,e,ho(r))).reduce((c,l)=>Ei(l)?{...c,...l}:l,{});if(!Ei(r)||!Ei(o)||!$x(n))return o;let a=uf(t);for(let c of Object.getOwnPropertyNames(r))a.includes(c)||Ii(n,e,r[c])&&(o[c]=Rf(n,e,r[c]));return o}s(xBt,"FromIntersect");function bBt(t,e,r){if(!Ei(r)||bn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(xn(t.properties,i)){r[i]=Rf(t.properties[i],e,r[i]);continue}if($x(n)&&Ii(n,e,r[i])){r[i]=Rf(n,e,r[i]);continue}delete r[i]}return r}s(bBt,"FromObject");function IBt(t,e,r){if(!Ei(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of i){if(c.test(l)){r[l]=Rf(a,e,r[l]);continue}if($x(n)&&Ii(n,e,r[l])){r[l]=Rf(n,e,r[l]);continue}delete r[l]}return r}s(IBt,"FromRecord");function TBt(t,e,r){return Rf(fo(t,e),e,r)}s(TBt,"FromRef");function wBt(t,e,r){return Rf(fo(t,e),e,r)}s(wBt,"FromThis");function _Bt(t,e,r){if(!bn(r))return r;if(Ds(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=Rf(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(_Bt,"FromTuple");function SBt(t,e,r){for(let n of t.anyOf)if(CBt(n)&&Ii(n,e,r))return Rf(n,e,r);return r}s(SBt,"FromUnion");function Rf(t,e,r){let n=ro(t.$id)?Al(t,e):e,i=t;switch(i[et]){case"Array":return EBt(i,n,r);case"Import":return vBt(i,n,r);case"Intersect":return xBt(i,n,r);case"Object":return bBt(i,n,r);case"Record":return IBt(i,n,r);case"Ref":return TBt(i,n,r);case"This":return wBt(i,n,r);case"Tuple":return _Bt(i,n,r);case"Union":return SBt(i,n,r);default:return r}}s(Rf,"Visit");function QV(...t){return t.length===3?Rf(t[0],t[1],t[2]):Rf(t[0],[],t[1])}s(QV,"Clean");d();function UV(t){return ro(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(UV,"IsStringNumeric");function RBt(t){return Jl(t)||GA(t)||Gr(t)}s(RBt,"IsValueToString");function jL(t){return t===!0||Gr(t)&&t===1||Jl(t)&&t===BigInt("1")||ro(t)&&(t.toLowerCase()==="true"||t==="1")}s(jL,"IsValueTrue");function VL(t){return t===!1||Gr(t)&&(t===0||Object.is(t,-0))||Jl(t)&&t===BigInt("0")||ro(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(VL,"IsValueFalse");function kBt(t){return ro(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(kBt,"IsTimeStringWithTimeZone");function PBt(t){return ro(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(PBt,"IsTimeStringWithoutTimeZone");function BBt(t){return ro(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(BBt,"IsDateTimeStringWithTimeZone");function DBt(t){return ro(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(DBt,"IsDateTimeStringWithoutTimeZone");function NBt(t){return ro(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(NBt,"IsDateString");function LBt(t,e){let r=OOe(t);return r===e?r:t}s(LBt,"TryConvertLiteralString");function MBt(t,e){let r=QOe(t);return r===e?r:t}s(MBt,"TryConvertLiteralNumber");function FBt(t,e){let r=FOe(t);return r===e?r:t}s(FBt,"TryConvertLiteralBoolean");function OBt(t,e){return ro(t.const)?LBt(e,t.const):Gr(t.const)?MBt(e,t.const):GA(t.const)?FBt(e,t.const):e}s(OBt,"TryConvertLiteral");function FOe(t){return jL(t)?!0:VL(t)?!1:t}s(FOe,"TryConvertBoolean");function QBt(t){let e=s(r=>r.split(".")[0],"truncateInteger");return UV(t)?BigInt(e(t)):Gr(t)?BigInt(Math.trunc(t)):VL(t)?BigInt(0):jL(t)?BigInt(1):t}s(QBt,"TryConvertBigInt");function OOe(t){return y1(t)&&t.description!==void 0?t.description.toString():RBt(t)?t.toString():t}s(OOe,"TryConvertString");function QOe(t){return UV(t)?parseFloat(t):jL(t)?1:VL(t)?0:t}s(QOe,"TryConvertNumber");function UBt(t){return UV(t)?parseInt(t):Gr(t)?Math.trunc(t):jL(t)?1:VL(t)?0:t}s(UBt,"TryConvertInteger");function qBt(t){return ro(t)&&t.toLowerCase()==="null"?null:t}s(qBt,"TryConvertNull");function HBt(t){return ro(t)&&t==="undefined"?void 0:t}s(HBt,"TryConvertUndefined");function WBt(t){return Ad(t)?t:Gr(t)?new Date(t):jL(t)?new Date(1):VL(t)?new Date(0):UV(t)?new Date(parseInt(t)):PBt(t)?new Date(`1970-01-01T${t}.000Z`):kBt(t)?new Date(`1970-01-01T${t}`):DBt(t)?new Date(`${t}.000Z`):BBt(t)?new Date(t):NBt(t)?new Date(`${t}T00:00:00.000Z`):t}s(WBt,"TryConvertDate");function GBt(t,e,r){return(bn(r)?r:[r]).map(i=>ng(t.items,e,i))}s(GBt,"FromArray");function jBt(t,e,r){return QBt(r)}s(jBt,"FromBigInt");function VBt(t,e,r){return FOe(r)}s(VBt,"FromBoolean");function $Bt(t,e,r){return WBt(r)}s($Bt,"FromDate");function zBt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return ng(i,[...e,...n],r)}s(zBt,"FromImport");function YBt(t,e,r){return UBt(r)}s(YBt,"FromInteger");function KBt(t,e,r){return t.allOf.reduce((n,i)=>ng(i,e,n),r)}s(KBt,"FromIntersect");function JBt(t,e,r){return OBt(t,r)}s(JBt,"FromLiteral");function XBt(t,e,r){return qBt(r)}s(XBt,"FromNull");function ZBt(t,e,r){return QOe(r)}s(ZBt,"FromNumber");function eDt(t,e,r){if(!Ei(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))xn(r,n)&&(r[n]=ng(t.properties[n],e,r[n]));return r}s(eDt,"FromObject");function tDt(t,e,r){if(!Ei(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,c]of Object.entries(r))r[a]=ng(o,e,c);return r}s(tDt,"FromRecord");function rDt(t,e,r){return ng(fo(t,e),e,r)}s(rDt,"FromRef");function nDt(t,e,r){return OOe(r)}s(nDt,"FromString");function iDt(t,e,r){return ro(r)||Gr(r)?Symbol(r):r}s(iDt,"FromSymbol");function oDt(t,e,r){return ng(fo(t,e),e,r)}s(oDt,"FromThis");function sDt(t,e,r){return bn(r)&&!Ds(t.items)?r.map((i,o)=>o<t.items.length?ng(t.items[o],e,i):i):r}s(sDt,"FromTuple");function aDt(t,e,r){return HBt(r)}s(aDt,"FromUndefined");function cDt(t,e,r){for(let n of t.anyOf){let i=ng(n,e,ho(r));if(Ii(n,e,i))return i}return r}s(cDt,"FromUnion");function ng(t,e,r){let n=Al(t,e),i=t;switch(t[et]){case"Array":return GBt(i,n,r);case"BigInt":return jBt(i,n,r);case"Boolean":return VBt(i,n,r);case"Date":return $Bt(i,n,r);case"Import":return zBt(i,n,r);case"Integer":return YBt(i,n,r);case"Intersect":return KBt(i,n,r);case"Literal":return JBt(i,n,r);case"Null":return XBt(i,n,r);case"Number":return ZBt(i,n,r);case"Object":return eDt(i,n,r);case"Record":return tDt(i,n,r);case"Ref":return rDt(i,n,r);case"String":return nDt(i,n,r);case"Symbol":return iDt(i,n,r);case"This":return oDt(i,n,r);case"Tuple":return sDt(i,n,r);case"Undefined":return aDt(i,n,r);case"Union":return cDt(i,n,r);default:return r}}s(ng,"Visit");function qV(...t){return t.length===3?ng(t[0],t[1],t[2]):ng(t[0],[],t[1])}s(qV,"Convert");d();function UOe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!Ii(e,r,n))throw new t4(e,n,YA(e,r,n).First());return _1(e,r)?r4(e,r,n):n}s(UOe,"Decode");d();function eE(t,e){let r=xn(t,"default")?t.default:void 0,n=jx(r)?r():ho(r);return Ds(e)?n:Ei(e)&&Ei(n)?Object.assign(n,e):e}s(eE,"ValueOrDefault");function _pe(t){return $x(t)&&"default"in t}s(_pe,"HasDefaultProperty");function lDt(t,e,r){if(bn(r)){for(let i=0;i<r.length;i++)r[i]=Bd(t.items,e,r[i]);return r}let n=eE(t,r);if(!bn(n))return n;for(let i=0;i<n.length;i++)n[i]=Bd(t.items,e,n[i]);return n}s(lDt,"FromArray");function uDt(t,e,r){return Ad(r)?r:eE(t,r)}s(uDt,"FromDate");function dDt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Bd(i,[...e,...n],r)}s(dDt,"FromImport");function fDt(t,e,r){let n=eE(t,r);return t.allOf.reduce((i,o)=>{let a=Bd(o,e,n);return Ei(a)?{...i,...a}:a},{})}s(fDt,"FromIntersect");function pDt(t,e,r){let n=eE(t,r);if(!Ei(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=Bd(t.properties[o],e,n[o]);Ds(a)||(n[o]=Bd(t.properties[o],e,n[o]))}if(!_pe(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=Bd(t.additionalProperties,e,n[o]));return n}s(pDt,"FromObject");function mDt(t,e,r){let n=eE(t,r);if(!Ei(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of Object.getOwnPropertyNames(n))c.test(l)&&_pe(a)&&(n[l]=Bd(a,e,n[l]));if(!_pe(i))return n;for(let l of Object.getOwnPropertyNames(n))c.test(l)||(n[l]=Bd(i,e,n[l]));return n}s(mDt,"FromRecord");function hDt(t,e,r){return Bd(fo(t,e),e,eE(t,r))}s(hDt,"FromRef");function gDt(t,e,r){return Bd(fo(t,e),e,r)}s(gDt,"FromThis");function ADt(t,e,r){let n=eE(t,r);if(!bn(n)||Ds(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=Bd(i[a],e,n[a]));return n}s(ADt,"FromTuple");function yDt(t,e,r){let n=eE(t,r);for(let i of t.anyOf){let o=Bd(i,e,ho(n));if(Ii(i,e,o))return o}return n}s(yDt,"FromUnion");function Bd(t,e,r){let n=Al(t,e),i=t;switch(i[et]){case"Array":return lDt(i,n,r);case"Date":return uDt(i,n,r);case"Import":return dDt(i,n,r);case"Intersect":return fDt(i,n,r);case"Object":return pDt(i,n,r);case"Record":return mDt(i,n,r);case"Ref":return hDt(i,n,r);case"This":return gDt(i,n,r);case"Tuple":return ADt(i,n,r);case"Union":return yDt(i,n,r);default:return eE(i,r)}}s(Bd,"Visit");function HV(...t){return t.length===3?Bd(t[0],t[1],t[2]):Bd(t[0],[],t[1])}s(HV,"Default");d();d();var ig={};ra(ig,{Delete:()=>EDt,Format:()=>$L,Get:()=>xDt,Has:()=>vDt,Set:()=>CDt,ValuePointerRootDeleteError:()=>GV,ValuePointerRootSetError:()=>WV});d();var WV=class extends In{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},GV=class extends In{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function qOe(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(qOe,"Escape");function*$L(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield qOe(t.slice(e,r))),e=n+1):r=n;yield qOe(t.slice(e))}s($L,"Format");function CDt(t,e,r){if(e==="")throw new WV(t,e,r);let[n,i,o]=[null,t,""];for(let a of $L(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(CDt,"Set");function EDt(t,e){if(e==="")throw new GV(t,e);let[r,n,i]=[null,t,""];for(let o of $L(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(EDt,"Delete");function vDt(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of $L(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s(vDt,"Has");function xDt(t,e){if(e==="")return t;let r=t;for(let n of $L(e)){if(r[n]===void 0)return;r=r[n]}return r}s(xDt,"Get");d();function bDt(t,e){if(!Ei(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>kS(t[i],e[i]))}s(bDt,"ObjectType");function IDt(t,e){return Ad(e)&&t.getTime()===e.getTime()}s(IDt,"DateType");function TDt(t,e){return!bn(e)||t.length!==e.length?!1:t.every((r,n)=>kS(r,e[n]))}s(TDt,"ArrayType");function wDt(t,e){return!Qp(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>kS(r,e[n]))}s(wDt,"TypedArrayType");function _Dt(t,e){return t===e}s(_Dt,"ValueType");function kS(t,e){if(Ad(t))return IDt(t,e);if(Qp(t))return wDt(t,e);if(bn(t))return TDt(t,e);if(Ei(t))return bDt(t,e);if(m0(t))return _Dt(t,e);throw new Error("ValueEquals: Unable to compare value")}s(kS,"Equal");var SDt=wo({type:zi("insert"),path:Cd(),value:Qh()}),RDt=wo({type:zi("update"),path:Cd(),value:Qh()}),kDt=wo({type:zi("delete"),path:Cd()}),WOe=To([SDt,RDt,kDt]),jV=class extends In{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function VV(t,e){return{type:"update",path:t,value:e}}s(VV,"CreateUpdate");function GOe(t,e){return{type:"insert",path:t,value:e}}s(GOe,"CreateInsert");function jOe(t){return{type:"delete",path:t}}s(jOe,"CreateDelete");function HOe(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new jV(t,"Cannot diff objects with symbols")}s(HOe,"AssertDiffable");function*PDt(t,e,r){if(HOe(e),HOe(r),!Rae(r))return yield VV(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)xn(e,o)||(yield GOe(`${t}/${o}`,r[o]));for(let o of n)xn(r,o)&&(kS(e,r)||(yield*$V(`${t}/${o}`,e[o],r[o])));for(let o of n)xn(r,o)||(yield jOe(`${t}/${o}`))}s(PDt,"ObjectType");function*BDt(t,e,r){if(!bn(r))return yield VV(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*$V(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield GOe(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield jOe(`${t}/${n}`))}s(BDt,"ArrayType");function*DDt(t,e,r){if(!Qp(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield VV(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*$V(`${t}/${n}`,e[n],r[n])}s(DDt,"TypedArrayType");function*NDt(t,e,r){e!==r&&(yield VV(t,r))}s(NDt,"ValueType");function*$V(t,e,r){if(Rae(e))return yield*PDt(t,e,r);if(bn(e))return yield*BDt(t,e,r);if(Qp(e))return yield*DDt(t,e,r);if(m0(e))return yield*NDt(t,e,r);throw new jV(e,"Unable to diff value")}s($V,"Visit");function VOe(t,e){return[...$V("",t,e)]}s(VOe,"Diff");function LDt(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(LDt,"IsRootUpdate");function MDt(t){return t.length===0}s(MDt,"IsIdentity");function $Oe(t,e){if(LDt(e))return ho(e[0].value);if(MDt(e))return ho(t);let r=ho(t);for(let n of e)switch(n.type){case"insert":{ig.Set(r,n.path,n.value);break}case"update":{ig.Set(r,n.path,n.value);break}case"delete":{ig.Delete(r,n.path);break}}return r}s($Oe,"Patch");d();function zOe(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=_1(e,r)?i4(e,r,n):n;if(!Ii(e,r,i))throw new n4(e,i,YA(e,r,i).First());return i}s(zOe,"Encode");d();function zV(t){return Ei(t)&&!bn(t)}s(zV,"IsStandardObject");var YV=class extends In{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function FDt(t,e,r,n){if(!zV(r))ig.Set(t,e,ho(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)Spe(t,`${e}/${a}`,r[a],n[a])}}s(FDt,"ObjectType");function ODt(t,e,r,n){if(!bn(r))ig.Set(t,e,ho(n));else{for(let i=0;i<n.length;i++)Spe(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(ODt,"ArrayType");function QDt(t,e,r,n){if(Qp(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else ig.Set(t,e,ho(n))}s(QDt,"TypedArrayType");function UDt(t,e,r,n){r!==n&&ig.Set(t,e,n)}s(UDt,"ValueType");function Spe(t,e,r,n){if(bn(n))return ODt(t,e,r,n);if(Qp(n))return QDt(t,e,r,n);if(zV(n))return FDt(t,e,r,n);if(m0(n))return UDt(t,e,r,n)}s(Spe,"Visit");function YOe(t){return Qp(t)||m0(t)}s(YOe,"IsNonMutableValue");function qDt(t,e){return zV(t)&&bn(e)||bn(t)&&zV(e)}s(qDt,"IsMismatchedValue");function KOe(t,e){if(YOe(t)||YOe(e))throw new YV("Only object and array types can be mutated at the root level");if(qDt(t,e))throw new YV("Cannot assign due type mismatch of assignable values");Spe(t,"",t,e)}s(KOe,"Mutate");d();var KV=class extends In{static{s(this,"ParseError")}constructor(e){super(e)}},Rpe;(function(t){let e=new Map([["Assert",(o,a,c)=>(FV(o,a,c),c)],["Cast",(o,a,c)=>GL(o,a,c)],["Clean",(o,a,c)=>QV(o,a,c)],["Clone",(o,a,c)=>ho(c)],["Convert",(o,a,c)=>qV(o,a,c)],["Decode",(o,a,c)=>_1(o,a)?r4(o,a,c):c],["Default",(o,a,c)=>HV(o,a,c)],["Encode",(o,a,c)=>_1(o,a)?i4(o,a,c):c]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(Rpe||(Rpe={}));var JOe=["Clone","Clean","Default","Convert","Assert","Decode"];function HDt(t,e,r,n){return t.reduce((i,o)=>{let a=Rpe.Get(o);if(Ds(a))throw new KV(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(HDt,"ParseValue");function XOe(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?bn(t[0])?[t[0],t[1],[],t[2]]:[JOe,t[0],t[1],t[2]]:t.length===2?[JOe,t[0],[],t[1]]:(()=>{throw new KV("Invalid Arguments")})();return HDt(e,r,n,i)}s(XOe,"Parse");d();var $b={};ra($b,{Assert:()=>FV,Cast:()=>GL,Check:()=>Ii,Clean:()=>QV,Clone:()=>ho,Convert:()=>qV,Create:()=>lm,Decode:()=>UOe,Default:()=>HV,Diff:()=>VOe,Edit:()=>WOe,Encode:()=>zOe,Equal:()=>kS,Errors:()=>YA,Hash:()=>Zx,Mutate:()=>KOe,Parse:()=>XOe,Patch:()=>$Oe,ValueErrorIterator:()=>eb});d();var WDt="gpt-4o-copilot",um=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&ia(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return WDt}parseModelsResponse(e){try{return $b.Parse(mOe,e)}catch(r){pn.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch()}async fetch(){let e=await SS(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(pn.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=hOe(this._ctx);if(n){let c=this.getGenericCompletionModels().map(l=>l.modelId);c.includes(n)||(c.length>0&&pn.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${c.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=vi(this._ctx,Rt.DebugOverrideEngine)||vi(this._ctx,Rt.DebugOverrideEngineLegacy);if(i)return new zb(i,"override");let o=e?this._ctx.get(Bt).customEngine(e):"",a=e?this._ctx.get(Bt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new zb(o,"exp"):new zb(n,"modelpicker"):o?new zb(o,"exp"):this.customModels.length>0?new zb(this.customModels[0],"custommodel"):new zb(r,"default")}},zb=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function Yb(t,e=void 0){let r=t.get(um),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(Yb,"getEngineRequestInfo");d();d();var ko=class{static{s(this,"FileSystem")}};var g7e=Ne(h7e());function A7e(t){return t!==void 0&&t!==0}s(A7e,"isRepoInfo");function y7e(t){if(t===void 0||t===0)return"";let e=tE(t);if(e==="github/github")return e;let r=h8t(t)?.toLowerCase();return r!==void 0?r:""}s(y7e,"getDogFood");function tE(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(tE,"tryGetGitHubNWO");function h8t(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(h8t,"tryGetADONWO");function Kb(t,e){let r=b0(e);return g8t(t,r)}s(Kb,"extractRepoInfoInBackground");var g8t=E8t(A8t,1e4);async function A8t(t,e){let r=iDe(e);if(!r)return;let n=await y8t(t,r);if(!n)return;let i=t.get(ko),o=$o(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let c=C8t(a)??"",l=Dpe(c),u={uri:n};return l===void 0?{baseFolder:u,url:c,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:c,...l}}s(A8t,"extractRepoInfo");function Dpe(t){let e;try{if(e=(0,g7e.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(Dpe,"parseRepoUrl");async function y8t(t,e){let r=e+"_add_to_make_longer",n=t.get(ko);for(;e!=="file:///"&&e.length<r.length;){let i=$o(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=b0(e)}}s(y8t,"getRepoBaseUri");function C8t(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,c=!1;for(let l of t.split(`
`))if(c&&o!==void 0){if(o+=l,l.endsWith("\\"))o=o.substring(0,o.length-1);else if(c=!1,a==="origin")return o}else{let u=l.match(e)??l.match(r);if(u)a=u[1];else if(l.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let f=l.match(n);if(f){if(o=f[1],o.endsWith("\\"))o=o.substring(0,o.length-1),c=!0;else if(a==="origin")return o}}}}return o}s(C8t,"getRepoUrlFromConfigText");var Bpe=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function E8t(t,e){let r=new Fr(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),c=r.get(a);if(c)return c.result;if(n.has(a))return 0;let l=t(i,...o);return n.add(a),l.then(u=>{r.set(a,new Bpe(u)),n.delete(a)}),0}}s(E8t,"computeInBackgroundAndMemoize");d();var zL=500,C7e=8192-zL,E7e=4,JV=10,v7e=15,v8t={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function YL(t){return t=t.toLowerCase(),v8t[t]??t}s(YL,"normalizeLanguageId");var Npe=class{constructor(e){this.ctx=e;this.cache=new Fr(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new Lpe(()=>this.ctx.get(zh).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},Lpe=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function b8t(t){return"uri"in t}s(b8t,"isCompletionsFiltersInfo");var Bt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new Npe(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=dn.createAndMarkAsIssued(),n=void 0){if(r instanceof ZA)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&b8t(e)?Kb(this.ctx,e.uri):void 0,o=tE(i)??"",a=y7e(i)??"",c=e?.languageId??"",l=Yb(this.ctx).modelId;n??=await this.ctx.get(jr).getToken();let u=YBe(n),f=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":c,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":l,"X-Copilot-CustomModel":f,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},E=this.getGranularityDirectory(),x=this.makeFilterSettings(y),b=E.extendFilters(x),_=await this.getExpConfig(b.newFilterSettings,g);E.update(x,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=E.extendFilters(x),P=k.newFilterSettings,N=await this.getExpConfig(P,g),M=new Promise(J=>setTimeout(J,t.upcomingDynamicFilterCheckDelayMs));for(let J of k.otherFilterSettingsToPrefetch)M=M.then(async()=>{await new Promise(se=>setTimeout(se,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(J,g)});return this.prepareForUpcomingFilters(P,g),new ZA(r.properties,r.measurements,r.issuedTime,{filters:P,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(gs).machineId;this.granularityDirectory=new jW(e,this.ctx.get(ry))}return this.granularityDirectory}makeFilterSettings(e){return new t_({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return Mp.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new t_({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=MW(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??v7e}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??JV}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??C7e+zL}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}enableSpeculativeRequestsShown(e){return e.filtersAndExp.exp.variables.copilotspeculativerequestsshown??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};d();d();var ZV=Ne(XV());var Fpe={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function O0(t){return t in Fpe&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(O0,"isSupportedLanguageId");function e$(t){if(!(t in Fpe))throw new Error(`Unrecognized language: ${t}`);return Fpe[t]}s(e$,"languageIdToWasmLanguage");var Mpe=new Map;async function I8t(t){let e;try{e=await SV(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new kP(`Could not load tree-sitter-${t}.wasm`,r):r}return ZV.default.Language.load(e)}s(I8t,"loadWasmLanguage");function Qpe(t){let e=e$(t);if(!Mpe.has(e)){let r=I8t(e);Mpe.set(e,r)}return Mpe.get(e)}s(Qpe,"getLanguage");var Ope=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function rE(t,e){await ZV.default.init({locateFile:s(o=>fpe(o),"locateFile")});let r;try{r=new ZV.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Ope(`Could not init Parse for language <${t}>`,o):o}let n=await Qpe(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(rE,"parseTreeSitter");function x7e(t){switch(e$(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(x7e,"getBlockCloseToken");function T8t(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(T8t,"innerQuery");var w8t=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function b7e(t){return T8t([w8t],t).length==1}s(b7e,"queryPythonIsDocstring");var vy=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),c=n?`
${r}${a}+- `:"";return i+this.description+c}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},ju=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return KL.languageIds.has(e)||JL.languageIds.has(e)||XL.languageIds.has(e)||ZL.languageIds.has(e)||eM.languageIds.has(e)||tM.languageIds.has(e)||rM.languageIds.has(e)||nM.languageIds.has(e)}static create(e,r,n,i){if(KL.languageIds.has(e))return new KL(e,r,n,i);if(JL.languageIds.has(e))return new JL(e,r,n,i);if(XL.languageIds.has(e))return new XL(e,r,n,i);if(tM.languageIds.has(e))return new tM(e,r,n,i);if(ZL.languageIds.has(e))return new ZL(e,r,n,i);if(eM.languageIds.has(e))return new eM(e,r,n,i);if(rM.languageIds.has(e))return new rM(e,r,n,i);if(nM.languageIds.has(e))return new nM(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await rE(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},Upe=class t extends vy{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},KL=class extends ju{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new Upe(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},qpe=class t extends vy{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},JL=class extends ju{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new qpe(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},Hpe=class t extends vy{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},XL=class extends ju{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new Hpe(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Wpe=class t extends vy{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},ZL=class extends ju{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Wpe(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},Gpe=class t extends vy{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},eM=class extends ju{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new Gpe(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},jpe=class t extends vy{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},tM=class extends ju{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new jpe(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},Vpe=class t extends vy{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},rM=class extends ju{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new Vpe(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},$pe=class t extends vy{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},nM=class extends ju{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new $pe(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};d();function _8t(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(_8t,"getProxyFromEnvironment");function S8t(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(S8t,"getRejectUnauthorizedFromEnvironment");var I7e=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function T7e(t){let e=_8t(t),r=iM({proxy:e,proxyStrictSSL:S8t(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(T7e,"getHttpSettingsFromEnvironment");function iM(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:i,pathname:o,search:a,hash:c}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${o}${a}${c}`,proxyAuthorization:t.proxyAuthorization||R8t(n,i)}}catch{return{...t,proxy:""}}}s(iM,"normalizeHttpSettings");function R8t(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(R8t,"getAuth");var _7e=Ne(require("events"));var zpe={};ra(zpe,{activationEvents:()=>Y8t,badges:()=>z8t,browser:()=>K8t,bugs:()=>U8t,build:()=>N8t,buildType:()=>L8t,categories:()=>V8t,contributes:()=>Ype,default:()=>nNt,dependencies:()=>tNt,description:()=>B8t,devDependencies:()=>eNt,displayName:()=>P8t,enabledApiProposals:()=>X8t,engines:()=>j8t,extensionPack:()=>G8t,homepage:()=>O8t,icon:()=>H8t,keywords:()=>$8t,license:()=>Q8t,main:()=>J8t,name:()=>k8t,overrides:()=>rNt,preview:()=>F8t,pricing:()=>W8t,publisher:()=>M8t,qna:()=>q8t,scripts:()=>Z8t,version:()=>D8t});var k8t="copilot",P8t="GitHub Copilot",B8t="Your AI pair programmer",D8t="1.345.0",N8t="1682",L8t="prod",M8t="GitHub",F8t=!1,O8t="https://github.com/features/copilot?editor=vscode",Q8t="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",U8t={url:"https://github.com/microsoft/vscode/issues"},q8t="https://github.com/github-community/community/discussions/categories/copilot",H8t="assets/Copilot-App-Icon.png",W8t="Trial",G8t=["GitHub.copilot-chat","GitHub.copilot"],j8t={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},V8t=["AI","Chat","Programming Languages","Machine Learning"],$8t=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],z8t=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],Y8t=["onStartupFinished"],K8t="./dist/web",J8t="./dist/extension",X8t=["inlineCompletionsAdditions"],Ype={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}]},Z8t={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},eNt={"@azure/identity":"^4.10.1","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.5.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.4.1",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},tNt={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},rNt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},nNt={name:k8t,displayName:P8t,description:B8t,version:D8t,build:N8t,buildType:L8t,publisher:M8t,preview:F8t,homepage:O8t,license:Q8t,bugs:U8t,qna:q8t,icon:H8t,pricing:W8t,extensionPack:G8t,engines:j8t,categories:V8t,keywords:$8t,badges:z8t,activationEvents:Y8t,browser:K8t,main:J8t,enabledApiProposals:X8t,contributes:Ype,scripts:Z8t,devDependencies:eNt,dependencies:tNt,overrides:rNt};var Rt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",EnableSpeculativeRequestsShown:"internal.enableSpeculativeRequestsShown",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",CompletionsDebounce:"internal.completionsDebounce",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function S7e(t){return["server","parsingandserver"].includes(t)}s(S7e,"shouldDoServerTrimming");var og=class{static{s(this,"BlockModeConfig")}},DP=class extends og{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Bt).overrideBlockMode(n);if(i)return w7e(i,r);let o=e.get(Bt).enableProgressiveReveal(n);return vi(e,Rt.AlwaysRequestMultiline)??o?w7e("moremultiline",r):r=="ruby"?"parsing":O0(r)?"parsingandserver":"server"}};function iNt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(iNt,"blockModeRequiresTreeSitter");function w7e(t,e){return t==="moremultiline"&&ju.isSupported(e)?t:iNt(t)&&!O0(e)?"server":t}s(w7e,"toApplicableBlockMode");var ru=class{static{s(this,"ConfigProvider")}},NP=class extends ru{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return sNt(e)}getOptionalConfig(e){return aNt(e)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}onDidChangeHttpSettings(e){return{dispose:s(()=>{},"dispose")}}},BS=class extends ru{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.emitter=new _7e.default;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){n!==void 0?this.overrides.set(r,n):this.overrides.delete(r)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=iM(r);this.httpSettings=n,this.emitter.emit("didChangeHttpSettings",this.getHttpSettings())}onDidChangeHttpSettings(r){return this.emitter.on("didChangeHttpSettings",r),{dispose:s(()=>{this.emitter.off("didChangeHttpSettings",r)},"dispose")}}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[Rt.ShowEditorCompletions,Rt.EnableAutoCompletions,Rt.DelayCompletions,Rt.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function oNt(t){return t?.type==="object"&&"properties"in t}s(oNt,"isContributesObject");function R7e(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(R7e,"getConfigKeyRecursively");function sNt(t){if(BP.has(t))return BP.get(t);throw new Error(`Missing config default value: ${i6}.${t}`)}s(sNt,"getConfigDefaultForKey");function aNt(t){return BP.get(t)}s(aNt,"getOptionalConfigDefaultForKey");var BP=new Map([[Rt.DebugOverrideCppHeadersEnableSwitch,!1],[Rt.RelatedFilesVSCodeCSharp,!1],[Rt.RelatedFilesVSCodeTypeScript,!1],[Rt.RelatedFilesVSCode,!1],[Rt.IncludeNeighboringFiles,!1],[Rt.ExcludeRelatedFiles,!1],[Rt.ContextProviders,[]],[Rt.DebugUseEditorFetcher,null],[Rt.DebugUseElectronFetcher,null],[Rt.DebugOverrideLogLevels,{}],[Rt.DebugSnippyOverrideUrl,""],[Rt.FetchStrategy,"auto"],[Rt.UseSubsetMatching,null],[Rt.ContextProviderTimeBudget,void 0],[Rt.DebugOverrideCapiUrl,""],[Rt.DebugTestOverrideCapiUrl,""],[Rt.DebugOverrideProxyUrl,""],[Rt.DebugTestOverrideProxyUrl,""],[Rt.DebugOverrideEngine,""],[Rt.EnableSpeculativeRequests,void 0],[Rt.EnableSpeculativeRequestsShown,void 0],[Rt.AlwaysRequestMultiline,void 0],[Rt.ModelAlwaysTerminatesSingleline,void 0],[Rt.TrimCompletionsAggressively,void 0],[Rt.CompletionsDebounce,void 0],[Rt.NESXTab,void 0],[Rt.UseWorkspaceContextCoordinator,void 0],[Rt.CompletionsDelay,void 0],[Rt.UseSplitContextPrompt,void 0],[Rt.UseCompletionsComparisonPanel,!1],[Rt.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[Rt.ComparisonPanelRandomizedMode,!1],[Rt.ShowEditorCompletions,void 0],[Rt.EnableAutoCompletions,void 0],[Rt.DelayCompletions,void 0],[Rt.FilterCompletions,void 0]]);for(let t of Object.values(Rt)){let e=Ype.configuration[0],r=[],n=`${i6}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(oNt(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(BP.has(t))throw new Error(`Duplicate config default value ${i6}.${t}`);BP.set(t,i.default)}}if(!BP.has(t))throw new Error(`Missing config default value ${i6}.${t}`)}function vi(t,e){return t.get(ru).getConfig(e)}s(vi,"getConfig");function _Be(t){return t.get(ru).dumpForTelemetry()}s(_Be,"dumpForTelemetry");var lo=class{constructor(){this.packageJson=zpe}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function uue(t){return t.get(lo).isProduction()}s(uue,"isProduction");function yDe(t){return t.get(lo).getBuildType()==="dev"}s(yDe,"isDevBuild");function ey(t){return t.get(lo).getBuildType()}s(ey,"getBuildType");function SBe(t){return t.get(lo).getBuild()}s(SBe,"getBuild");function E_(t){return t.get(lo).getVersion()}s(E_,"getVersion");var gs=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function HA({name:t,version:e}){return`${t}/${e}`}s(HA,"formatNameAndVersion");var rn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},qA="2025-05-01";function Rh(t){let e=t.get(rn);return{"Editor-Version":HA(e.getEditorInfo()),"Editor-Plugin-Version":HA(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":E_(t)}}s(Rh,"editorVersionHeaders");var $h="Iv1.b507a08c87ecfe98",bl=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??$h}};d();var Jb=require("fs"),k7e=require("os"),P7e=Ne(require("path")),LP=require("process");var fu=class{static{s(this,"PersistenceManager")}},Kpe=class extends fu{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await Jb.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a=await this.readJsonObject(r);a[n]=i,await Jb.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(r,n){let i=`${this.directory}/${r}.json`;try{let o=await this.readJsonObject(r);delete o[n];let a=JSON.stringify(o)+`
`;a===`{}
`?await Jb.promises.rm(i):await Jb.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(r){let n=`${this.directory}/${r}.json`;try{await Jb.promises.rm(n)}catch{}}async listSettings(){try{return(await Jb.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await Jb.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function Jpe(){return LP.env.XDG_CONFIG_HOME&&P7e.isAbsolute(LP.env.XDG_CONFIG_HOME)?LP.env.XDG_CONFIG_HOME+"/github-copilot":(0,k7e.platform)()==="win32"?LP.env.USERPROFILE+"\\AppData\\Local\\github-copilot":LP.env.HOME+"/.config/github-copilot"}s(Jpe,"getXdgConfigPath");function B7e(){return new Kpe(Jpe())}s(B7e,"makeXdgPersistenceManager");d();d();d();var DS={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};d();d();var D7e=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],N7e={".php":[".blade"]},NS=Object.keys(DS).flatMap(t=>DS[t].extensions);var Xpe=Ne(require("node:path"));var FP=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},oM=class{static{s(this,"LanguageDetection")}},Zpe=new Map,MP=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(DS)){for(let n of e)Zpe.set(n,[...Zpe.get(n)??[],t]);for(let n of r??[])MP.set(n,[...MP.get(n)??[],t])}var eme=class extends oM{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Oi(e.uri),n=Xpe.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new FP(o.languageId,o.isGuess,a):new FP(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(D7e.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=Xpe.extname(n).toLowerCase();if(i.length>0&&NS.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=N7e[e];return!n||n.includes(r)}detectLanguageId(e,r){if(MP.has(e))return{languageId:MP.get(e)[0],isGuess:!1};let n=Zpe.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),MP.has(e))return{languageId:MP.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},tme=class extends oM{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new FP("cpp",n.isGuess,n.fileExtension):n}},rme=class extends oM{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new FP(r.languageId,!0,""):this.delegate.detectLanguage(r)}},cNt=new tme(new rme(new eme));function OP({uri:t,languageId:e}){let r=cNt.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(OP,"detectLanguage");d();d();d();d();function nE(t){if(t.isCancellationRequested)throw new t$}s(nE,"throwIfCancellationRequested");function n$(t){return t instanceof t$?!0:t instanceof Error&&t.name===nme&&t.message===nme}s(n$,"isCancellationError");var t$=class extends Error{static{s(this,"CancellationError")}constructor(){super(nme),this.name=this.message}},nme="Canceled",r$=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function LS(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(LS,"isTypeDefinition");var xs=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=M7e(e,e.length,i),L7e(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=M7e(e,e.length,++i),L7e(n,r)):i++;return n.join("")}};function L7e(t,e){for(let r=0;r<e;r++)t.push(" ")}s(L7e,"appendIndent");function M7e(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(M7e,"consumeIndent");var dm=class{constructor(e,r,n,i,o,a,c,l,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=c;this.kind=l;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Bc=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await rE(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new r$,a=[];for(let c of i.matches){let l=this.createSymbolRange(o,e,r,c.captures);l&&a.push(l)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=null,g=null;for(let x=0;x<i.length;x++){let b=i[x].name;b==="name"?(u=i[x].node.startIndex,f=i[x].node.endIndex):b==="reference"?(u=i[x].node.startIndex,f=i[x].node.endIndex,c=i[x].node.startIndex,l=i[x].node.endIndex,h=b):b==="body"?(p=i[x].node.startIndex,m=i[x].node.endIndex):b==="comment"?(o=o===0?i[x].node.startIndex:Math.min(o,i[x].node.startIndex),a=Math.max(a,i[x].node.endIndex)):b==="receiver"?g=xs.fromBounds(i[x].node.startIndex,i[x].node.endIndex).getText(n):(c=i[x].node.startIndex,l=i[x].node.endIndex,h=b)}h==="definition.module.filescoped"&&(m=n.length,l=m);let y=xs.fromBounds(c,l),E=c>0||l>0||u>0||f>0?new dm(r,"","",xs.fromBounds(o,a),xs.fromBounds(u,f),xs.fromBounds(p,m),y,t.kindFromString(h),0):null;if(E){t.updateScopesForSymbol(e,E);let x=E.nameRange.getText(n),b=this.createNameFromScopes(n,e.toArray());return b=g?`${g}.${b}`:b,new dm(r,b,x.substring(x.lastIndexOf(".")+1),E.commentRange,E.nameRange,E.bodyRange,E.extentRange,E.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var i$=class extends Bc{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,lNt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},o$=class extends Bc{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,dNt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,fNt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},s$=class extends Bc{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,uNt),i=new Set;try{n.matches.forEach(o=>{let a,c,l;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?c=u:u.name==="import"&&(l=u);if(a&&l){let u=this.cleanQuotedString(a.node.text),f=a.node.startIndex+1,p=a.node.endIndex-1,m=c?new xs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new xs(f,p-f),h=new xs(l.node.startIndex,l.node.endIndex-l.node.startIndex),g=xs.empty,y=xs.empty,E=u.substring(u.lastIndexOf("/")+1);i.add(new dm(e,u,E,g,m,y,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},lNt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,uNt=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,dNt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,fNt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;d();var c$=class extends Bc{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,pNt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},l$=class extends Bc{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,hNt)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,gNt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},u$=class extends Bc{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,mNt)).filter(i=>i.kind===0)}},pNt=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,mNt=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,hNt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,gNt=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;d();var ANt=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),d$=class extends Bc{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,yNt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},f$=class extends Bc{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,CNt)).filter(i=>!ANt.has(i.unqualifiedName))}};var yNt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,CNt=`
(call_expression function: (_) @name) @reference
`;d();var ENt=new Set(["int","str","float","bool","list","dict","tuple","set"]),p$=class extends Bc{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,vNt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},m$=class extends Bc{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,xNt)).filter(i=>!ENt.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,INt),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},h$=class extends Bc{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,bNt),i=new Set;try{n.matches.forEach(o=>{let a,c,l,u;for(let f of o.captures)f.name==="import.name"?a=f:f.name==="import.module"?l=f:f.name==="alias"?c=f:f.name==="import"&&(u=f);if(l&&u){let f=a||l,p=c?new xs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new xs(f.node.startIndex,u.node.endIndex-f.node.endIndex),m=new xs(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=xs.empty,g=xs.empty,y=f.node.text,E=y.split(".").pop()||y,x;a?x=`${l.node.text}.${a.node.text}`:x=l.node.text,i.add(new dm(e,x,E,h,p,g,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},vNt=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,xNt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,bNt=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,INt=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;d();var TNt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),QP=class extends Bc{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,wNt)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},UP=class extends Bc{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,_Nt)).filter(i=>!TNt.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}};var wNt=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,_Nt=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;d();var SNt=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),g$=class extends QP{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,RNt),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},A$=class extends UP{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,kNt),super.extractReferences(e,r)]);return[...n.filter(o=>!SNt.has(o.unqualifiedName)),...i]}},RNt=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,kNt=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var sM=[{symbolExtractor:new c$,referenceExtractor:new l$,importExtractor:new u$,languageId:"java"},{symbolExtractor:new i$,referenceExtractor:new o$,importExtractor:new s$,languageId:"go"},{symbolExtractor:new p$,referenceExtractor:new m$,importExtractor:new h$,languageId:"python"},{symbolExtractor:new QP,referenceExtractor:new UP,languageId:"typescript"},{symbolExtractor:new g$,referenceExtractor:new A$,languageId:"typescriptreact"},{symbolExtractor:new d$,referenceExtractor:new f$,languageId:"javascript"}];function F7e(t){let e=OP({uri:t});if(e&&sM.some(r=>e===r.languageId))return e}s(F7e,"getSupportedLanguageIdForMultiLanguageProvider");var O7e=new Map(sM.map(t=>[t.languageId,t.referenceExtractor])),y$=new Map(sM.map(t=>[t.languageId,t.symbolExtractor])),Q7e=new Map(sM.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),ime=sM.map(t=>DS[t.languageId].extensions).flat();d();d();d();d();d();d();d();d();d();function ome(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(ome,"virtualNode");function U7e(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(U7e,"lineNode");function sme(t){return{type:"blank",lineNumber:t,subs:[]}}s(sme,"blankNode");function C$(t){return{type:"top",indentation:-1,subs:t??[]}}s(C$,"topNode");function pu(t){return t.type==="blank"}s(pu,"isBlank");function MS(t){return t.type==="line"}s(MS,"isLine");function OS(t){return t.type==="virtual"}s(OS,"isVirtual");d();function q7e(t,e){return Vu(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(q7e,"clearLabelsIf");function QS(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>QS(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>QS(r,e)),label:t.label?e(t.label):void 0}}}s(QS,"mapLabels");function Vu(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(Vu,"visitTree");function ame(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),Vu(t,o,n),i}s(ame,"foldTree");function E$(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(c=>c!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:C$()}s(E$,"rebuildTree");d();function BNt(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[f,p]=o(u+1,r[u]);return[U7e(r[u],u,n[u],f),p]}s(i,"parseNode");function o(u,f){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>f);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(sme(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,c]=o(0,-1),l=c;for(;l<n.length&&n[l]==="";)a.push(sme(l)),l+=1;if(l<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${n.length}`);return C$(a)}s(BNt,"parseRaw");function aM(t,e){function r(n){if(MS(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),Vu(t,r,"bottomUp")}s(aM,"labelLines");function v$(t){function e(r){if(OS(r)&&r.label===void 0){let n=r.subs.filter(i=>!pu(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),Vu(t,e,"bottomUp")}s(v$,"labelVirtualInherited");function cM(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(cM,"buildLabelRules");function cme(t){let r=E$(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let c=n.subs[a],l=n.subs[a-1];if(c.label==="opener"&&l!==void 0&&MS(l))l.subs.push(c),c.subs.forEach(u=>l.subs.push(u)),c.subs=[];else if(c.label==="closer"&&o!==void 0&&(MS(c)||OS(c))&&c.indentation>=o.indentation){let u=i.length-1;for(;u>0&&pu(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),c.subs.length>0){let f=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,f),m=o.subs.slice(f),h=m.length>0?[ome(c.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,c]}else o.subs.push(c)}else i.push(c),pu(c)||(o=c)}return n.subs=i,n},"rebuilder"));return q7e(t,n=>n==="newVirtual"),r}s(cme,"combineClosersAndOpeners");function H7e(t,e=pu,r){return E$(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],c,l=!1;function u(f=!1){if(c!==void 0&&(o.length>0||!f)){let p=ome(c,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let f=0;f<i.subs.length;f++){let p=i.subs[f],m=e(p);!m&&l&&(u(),a=[]),l=m,a.push(p),pu(p)||(c=c??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(H7e,"groupBlocks");function US(t){return E$(t,s(function(r){return OS(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&OS(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(US,"flattenVirtual");var DNt={opener:/^[[({]/,closer:/^[\])}]/},NNt=cM(DNt),W7e={};function lme(t,e){W7e[t]=e}s(lme,"registerLanguageSpecificParser");function qS(t,e){let r=BNt(t),n=W7e[e??""];return n?n(r):(aM(r,NNt),cme(r))}s(qS,"parseTree");var LNt={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},MNt=cM(LNt);function G7e(t){let e=t;return aM(e,MNt),e=cme(e),e=US(e),v$(e),Vu(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!pu(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(G7e,"processJava");d();var FNt={heading:/^# /,subheading:/^## /,subsubheading:/### /},ONt=cM(FNt);function j7e(t){let e=t;if(aM(e,ONt),pu(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||pu(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=H7e(e),e=US(e),v$(e),e}s(j7e,"processMarkdown");d();function V7e(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(V7e,"deparseLine");lme("markdown",j7e);lme("java",G7e);var QNt={worthUp:.9,worthSibling:.88,worthDown:.8};function ume(t,e,r=zo(),n=QNt){let i=QS(t,o=>o?1:void 0);return Vu(i,o=>{if(pu(o))return;let a=o.subs.reduce((c,l)=>Math.max(c,l.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),Vu(i,o=>{if(pu(o))return;let a=o.subs.map(u=>u.label??0),c=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(c=c.map((f,p)=>Math.max(f,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let l=o.label;l!==void 0&&(c=c.map(u=>Math.max(u,n.worthDown*l))),o.subs.forEach((u,f)=>u.label=c[f])},"topDown"),UNt(i,e,r)}s(ume,"fromTreeWithFocussedLines");function UNt(t,e,r=zo()){let n=ame(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[V7e(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Nt(n,e,r)}s(UNt,"fromTreeWithValuedLines");function Q0(t,e=!0,r=!0,n,i=zo()){let o=typeof t=="string"?qS(t):qS(t.source,t.languageId);US(o);let a=QS(o,c=>e&&c!=="closer");return Vu(a,c=>{c.label===void 0&&(c.label=e&&c.label!==!1)},"topDown"),e&&Vu(a,c=>{if(c.label){let l=!1;for(let u of[...c.subs].reverse())u.label&&!l?l=!0:u.label=!1}else for(let l of c.subs)l.label=!1;c.subs.length>0&&(c.label=!1)},"topDown"),r&&Vu(a,c=>{c.label||=(MS(c)||pu(c))&&c.lineNumber==0},"topDown"),ume(a,n,i)}s(Q0,"elidableTextForSourceCode");d();var lM=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>zo().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Nt=class t{constructor(e,r,n=zo()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,c=Array.isArray(o)?o[0]:o;typeof c=="string"?c.split(`
`).forEach(l=>i.push(new lM(l,a,n.tokenLength(l+`
`),"strict",this.metadata))):c instanceof t?c.lines.forEach(l=>i.push(l.copy().adjustValue(a))):"source"in c&&"languageId"in c&&Q0(c).lines.forEach(l=>i.push(l.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>zo().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:c,totalCost:l,priorityQueue:u}=HNt(this.lines,i);if(l<=e)return dme(c);WNt(u,a);let f=l;for(;f>e&&u.length>0;){let m=u.shift().originalIndex,h=c[m];if(h.markedForRemoval)continue;let g=n?GNt(c,m):"",y=$7e(g,r,o,h);c[m]=y,f-=h.cost,f+=y.cost;let E=m+1;if(E<c.length){let b=c[E];x$(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}let x=m-1;if(x>=0){let b=c[x];x$(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}}if(f>e)return dme([$7e("",r,o)]);let p=c.filter(m=>!m.markedForRemoval);for(let m=p.length-1;m>0;m--)x$(p[m],r)&&x$(p[m-1],r)&&p.splice(m,1);return dme(p)}};function qNt(t){return t?.text.match(/^\s*/)?.[0]??""}s(qNt,"getIndentation");function x$(t,e){return t?.text.trim()===e.trim()}s(x$,"isEllipsis");function dme(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(dme,"produceElidedText");function HNt(t,e){let r=0,n=[];return{lines:t.map((o,a)=>{let c=o.copy();return e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:a,value:c.value}),c}),totalCost:r,priorityQueue:n}}s(HNt,"initializeElisionContext");function WNt(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(WNt,"sortPriorityQueue");function GNt(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=qNt(i);break}}return r}s(GNt,"getClosestIndentation");function $7e(t,e,r,n){let i=t+e;return new lM(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s($7e,"getNewEllipsis");d();d();function sg(){}s(sg,"Diff");sg.prototype={diff:s(function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function c(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(c,"done"),e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var l=r.length,u=e.length,f=1,p=l+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(n=i.timeout)!==null&&n!==void 0?n:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],r,e,0,i);if(g[0].oldPos+1>=u&&y+1>=l)return c(z7e(a,g[0].lastComponent,r,e,a.useLongestToken));var E=-1/0,x=1/0;function b(){for(var k=Math.max(E,-f);k<=Math.min(x,f);k+=2){var P=void 0,N=g[k-1],M=g[k+1];N&&(g[k-1]=void 0);var J=!1;if(M){var se=M.oldPos-k;J=M&&0<=se&&se<l}var K=N&&N.oldPos+1<u;if(!J&&!K){g[k]=void 0;continue}if(!K||J&&N.oldPos<M.oldPos?P=a.addToPath(M,!0,!1,0,i):P=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(P,r,e,k,i),P.oldPos+1>=u&&y+1>=l)return c(z7e(a,P.lastComponent,r,e,a.useLongestToken));g[k]=P,P.oldPos+1>=u&&(x=Math.min(x,k-1)),y+1>=l&&(E=Math.max(E,k+1))}f++}if(s(b,"execEditLength"),o)s(function k(){setTimeout(function(){if(f>p||Date.now()>h)return o();b()||k()},0)},"exec")();else for(;f<=p&&Date.now()<=h;){var _=b();if(_)return _}},"diff"),addToPath:s(function(e,r,n,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===r&&a.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:r,removed:n,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,r,n,i,o){for(var a=r.length,c=n.length,l=e.oldPos,u=l-i,f=0;u+1<a&&l+1<c&&this.equals(n[l+1],r[u+1],o);)u++,l++,f++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return f&&!o.oneChangePerToken&&(e.lastComponent={count:f,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,u},"extractCommon"),equals:s(function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function z7e(t,e,r,n,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var c=0,l=o.length,u=0,f=0;c<l;c++){var p=o[c];if(p.removed)p.value=t.join(n.slice(f,f+p.count)),f+=p.count;else{if(!p.added&&i){var m=r.slice(u,u+p.count);m=m.map(function(h,g){var y=n[f+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(r.slice(u,u+p.count));u+=p.count,p.added||(f+=p.count)}}return o}s(z7e,"buildValues");var cIn=new sg;function Y7e(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}s(Y7e,"longestCommonPrefix");function K7e(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}s(K7e,"longestCommonSuffix");function fme(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}s(fme,"replacePrefix");function pme(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}s(pme,"replaceSuffix");function uM(t,e){return fme(t,e,"")}s(uM,"removePrefix");function b$(t,e){return pme(t,e,"")}s(b$,"removeSuffix");function J7e(t,e){return e.slice(0,jNt(t,e))}s(J7e,"maximumOverlap");function jNt(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),o=0;i[0]=0;for(var a=1;a<n;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var c=r;c<t.length;c++){for(;o>0&&t[c]!=e[o];)o=i[o];t[c]==e[o]&&o++}return o}s(jNt,"overlapCount");var I$="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",VNt=new RegExp("[".concat(I$,"]+|\\s+|[^").concat(I$,"]"),"ug"),T$=new sg;T$.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};T$.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else r=t.match(VNt)||[];var n=[],i=null;return r.forEach(function(o){/\s/.test(o)?i==null?n.push(o):n.push(n.pop()+o):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+o):n.push(i+o):n.push(o),i=o}),n};T$.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};T$.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(o){o.added?n=o:o.removed?i=o:((n||i)&&X7e(r,i,n,o),r=o,n=null,i=null)}),(n||i)&&X7e(r,i,n,null),t};function X7e(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=r.value.match(/^\s*/)[0],c=r.value.match(/\s*$/)[0];if(t){var l=Y7e(i,a);t.value=pme(t.value,a,l),e.value=uM(e.value,l),r.value=uM(r.value,l)}if(n){var u=K7e(o,c);n.value=fme(n.value,c,u),e.value=b$(e.value,u),r.value=b$(r.value,u)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var f=n.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=Y7e(f,p);e.value=uM(e.value,h);var g=K7e(uM(f,h),m);e.value=b$(e.value,g),n.value=fme(n.value,f,g),t.value=pme(t.value,f,f.slice(0,f.length-g.length))}else if(n){var y=n.value.match(/^\s*/)[0],E=e.value.match(/\s*$/)[0],x=J7e(E,y);e.value=b$(e.value,x)}else if(t){var b=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=J7e(b,_);e.value=uM(e.value,k)}}s(X7e,"dedupeWhitespaceInChangeObjects");var $Nt=new sg;$Nt.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(I$,"]+|[^\\S\\n\\r]+|[^").concat(I$,"]"),"ug");return t.match(e)||[]};var Ame=new sg;Ame.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var o=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=o:r.push(o)}return r};Ame.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),sg.prototype.equals.call(this,t,e,r)};var zNt=new sg;zNt.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var YNt=new sg;YNt.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function mme(t){"@babel/helpers - typeof";return mme=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mme(t)}s(mme,"_typeof");var dM=new sg;dM.useLongestToken=!0;dM.tokenize=Ame.tokenize;dM.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(o,a){return typeof a>"u"?r:a}:n;return typeof t=="string"?t:JSON.stringify(hme(t,null,null,i),i,"  ")};dM.equals=function(t,e,r){return sg.prototype.equals.call(dM,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function hme(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return r[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),r.push(a),o=0;o<t.length;o+=1)a[o]=hme(t[o],e,r,n,i);return e.pop(),r.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),mme(t)==="object"&&t!==null){e.push(t),a={},r.push(a);var c=[],l;for(l in t)Object.prototype.hasOwnProperty.call(t,l)&&c.push(l);for(c.sort(),o=0;o<c.length;o+=1)l=c[o],a[l]=hme(t[l],e,r,n,l);e.pop(),r.pop()}else a=t;return a}s(hme,"canonicalize");var gme=new sg;gme.tokenize=function(t){return t.slice()};gme.join=gme.removeEmpty=function(t){return t};var Z7e=require("fs");async function eQe(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let c=e,l=e/Math.min(4,o.size),u=[],f=Array.from(o.keys());f.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of f){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,E)=>y+E.node.extentRange.length,0);for(let y of m){if(c<=5)return u;nE(i);let E=y.node.extentRange.length/g,x=Math.min(c,E*l),b=(await JNt([y])).elide(x).getText();c-=n.tokenLength(b),u.push({uri:h,value:b})}}return u}s(eQe,"symbolRangesToCodeSnippets");async function JNt(t){if(t.length===0)return new Nt([]);let e=t[0].node.fileName,r=[],n="";try{let i=Os(e);i&&(n=(await Z7e.promises.readFile(i)).toString())}catch{}for(let i of t)tQe(i,n).forEach(o=>r.push(o));return new Nt(r)}s(JNt,"sameFileSymbolRangeToElidableText");function tQe(t,e){let n=[],i=t.node,o=e.substring(yme(e,i.commentRange.start),i.commentRange.end);n.push([Cme(o),1-3e-4]);let a=yme(e,i.bodyRange.start),c=yme(e,i.extentRange.start),l=i.bodyRange.length===0?e.substring(c,i.extentRange.end):e.substring(i.commentRange.length===0?c:i.commentRange.end,a);if(LS(i.kind)&&(l="BEGIN "+l.trimStart()),n.push([Cme(l),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...tQe(u,e));else{let u=1-(LS(t.node.kind)?3e-4:4e-4),f=e.substring(a,i.bodyRange.end);n.push([Cme(f),u])}return LS(i.kind)&&n.push(["END "+l.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(tQe,"prepareForElidableText");function yme(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(yme,"shiftLeftToNearestLineEndingOrAlphanumeric");function Cme(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(Cme,"trimLineEndingsAndTrailingWhitespace");var Eme=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},Xb=class extends Eme{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let c=this.referenceExtractors.get(i);if(!c)return[];nE(a);let l=await c.extractReferences(e,r);nE(a);let u=Array.from(l);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let f=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>LS(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),f.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return f}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),c=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),l=s(p=>c(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=l(p),h=u.get(m)??[];u.set(m,[...h,p])}let f=[];for(let p of i){let m=u.get(c(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(f.length+m.length>r.mlcpMaxContextItems){f.push(...m.slice(0,r.mlcpMaxContextItems-f.length));break}f.push(...m)}}return f}async makeSymbolRangeNodeFromDefinition(e,r){if(nE(r),LS(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),c=Math.abs(r.extentRange.start-n);return a-c}},w$=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new Xb(e,r,!0,!0)),this.strategies.set("java",new Xb(e,r,!0,!0)),this.strategies.set("python",new Xb(e,r,!0,!1)),this.strategies.set("typescript",new Xb(e,r,!0,!0)),this.strategies.set("typescriptreact",new Xb(e,r,!0,!0)),this.strategies.set("javascript",new Xb(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,c){let l=await this.getContextAtPositionAsync(e,r,n,i,o,c);nE(c);let u=zo();return eQe(l,a,e,u,c)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};d();d();d();d();var HS={Id:"id"},U0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Ji={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};d();d();var _$=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new vme(HS.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},fM=class t extends _${constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${U0.FilePath}');`]);this.fields=[new hM(U0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new kf(U0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},pM=class t extends _${constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Ji.DocumentId}', '${Ji.ExtentStart}', '${Ji.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Ji.UnqualifiedName}');`],`FOREIGN KEY(${Ji.DocumentId}) REFERENCES Document(${HS.Id}) ON DELETE CASCADE`);this.fields=[new kf(Ji.DocumentId),new hM(Ji.FullyQualifiedName,{notNull:!0}),new hM(Ji.UnqualifiedName,{notNull:!0}),new kf(Ji.CommentStart,{notNull:!0}),new kf(Ji.CommentLength,{notNull:!0}),new kf(Ji.NameStart,{notNull:!0}),new kf(Ji.NameLength,{notNull:!0}),new kf(Ji.BodyStart,{notNull:!0}),new kf(Ji.BodyLength,{notNull:!0}),new kf(Ji.ExtentStart,{notNull:!0}),new kf(Ji.ExtentLength,{notNull:!0}),new kf(Ji.SymbolKind,{notNull:!0}),new kf(Ji.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},mM=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},hM=class extends mM{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},kf=class extends mM{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},vme=class extends mM{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var S$=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,c=>{c?a(c):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(c=>Object.values(c)).flat(),function(c){c?o(c):i(this)})})}async getAllRows(){let e=await this.init;return e?fm(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return fm(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${HS.Id} = ?`,[e])}},iE=class t extends S${static{s(this,"DocumentTable")}static{this.tableName=fM.tableName}createQueryGenerator(){return new fM}async updateTimestamp(e,r){let n=await this.init;n&&await fm(n,`UPDATE ${t.tableName} SET ${U0.LastWriteTimeUtc} = ? WHERE ${U0.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await fm(r,`DELETE FROM ${t.tableName} WHERE ${U0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?fm(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${U0.FilePath} = ?`,[e]):[]}},Dc=class t extends S${static{s(this,"SymbolTable")}static{this.tableName=pM.tableName}createQueryGenerator(){return new pM}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return fm(r,`DELETE FROM ${t.tableName} WHERE ${Ji.DocumentId} = ?`,[e])}};async function fm(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(fm,"runPromisifiedDBQuery");var P$=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${iE.tableName} ON ${Dc.tableName}.${Ji.DocumentId} = ${iE.tableName}.${HS.Id}`;this.db=this.initDb(e),this.documentTable=new iE(this.db),this.symbolTable=new Dc(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Ne(pQe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,c=>{c?o(c):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await fm(n,"pragma journal_mode=wal",[]),await fm(n,"pragma synchronous=normal",[]),await fm(n,"pragma optimize=0x10002",[]),await fm(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${Ji.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Ji.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${Ji.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${Ji.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${iE.tableName}.${U0.FilePath} = ? AND ${Dc.tableName}.${Ji.ExtentStart} <= ? AND (${Dc.tableName}.${Ji.ExtentStart} + ${Dc.tableName}.${Ji.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${iE.tableName}.${U0.FilePath} = ? AND ${Dc.tableName}.${Ji.ExtentStart} >= ? AND (${Dc.tableName}.${Ji.ExtentStart} + ${Dc.tableName}.${Ji.ExtentLength}) <= ?`,`ORDER BY ${Dc.tableName}.${Ji.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${iE.tableName}.${U0.FilePath} = ? AND ${Dc.tableName}.${Ji.FullyQualifiedName} LIKE ?`,`ORDER BY ${Dc.tableName}.${Ji.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,fm(n,e,r)):[]}};var B$=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new P$(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return WP(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let c=e.slice(a,a+500);a+=500;let l=await this.database.querySymbolsUsingUnqualifiedNames(c,r);i.push(...l),nE(n)}return WP(i)}async getDefinitionsAsync(e){return WP(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return WP(n)}async findSymbolsContainedByRangeAsync(e,r,n){return WP(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return WP(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function WP(t){return t.map(e=>new dm(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new xs(e.commentStart,e.commentLength),new xs(e.nameStart,e.nameLength),new xs(e.bodyStart,e.bodyLength),new xs(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(WP,"symbolsToSymbolRanges");var N$=Ne(require("fs/promises"));var D$=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new B$(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=Os(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await N$.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let c=this.symbolExtractors.get(r);if(!c)return;let l=(await N$.readFile(n)).toString(),u=await c.extractSymbols(e,l),f=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let m=await p.extractSymbols(e,l);f=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,f)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};d();function _me(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>i6t(r))}s(_me,"isIndexWorkerData");var AM=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},Zb=class extends AM{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},L$=class extends AM{constructor(r){super($u.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},$u={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},M$=class extends Zb{constructor(r,n,i){super(r,$u.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},F$=class extends Zb{constructor(r,n){super(r,$u.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},O$=class extends Zb{constructor(r,n,i){super(r,$u.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},Q$=class extends Zb{constructor(r,n){super(r,$u.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},U$=class extends Zb{constructor(r,n,i,o,a,c){super(r,$u.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=c}static{s(this,"GetContextRequest")}},q$=class extends Zb{static{s(this,"ExitRequest")}constructor(e){super(e,$u.Exit)}},ag=class extends AM{constructor(r,n,i){super($u.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function i6t(t){return"databaseFilePath"in t&&"rootPath"in t}s(i6t,"isIndexableWorkspaceFolder");var mQe=Ne(mi()),eI=require("worker_threads");var H$=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new D$(e,y$,Q7e,r),this.contextRetreival=new w$(this.index.reader,O7e)}},Sme=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=La(i.rootPath);this.indices.set(o,new H$(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new mQe.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case $u.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case $u.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case $u.Cancel:n.get(e.id)?.cancel(),o=new ag(e.id,void 0,void 0);break;case $u.Exit:o=await this.dispatchExit(e,r,i.token);break;case $u.CreateIndex:o=await t.dispatchCreateIndex(e,r,i.token);break;case $u.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case $u.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new ag(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=La(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new ag(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=La(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new ag(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=La(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,c;return o?c=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new ag(e.id,a,c)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new ag(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,r,n){let i=La(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new H$(e.databaseFilePath)),new ag(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=La(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new ag(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function hQe(){return _me(eI.workerData)}s(hQe,"isIndexWorker");function gQe(){let t=eI.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!_me(eI.workerData))throw new Error("Worker data must provide a valid database path.");let e=eI.workerData.cwd;process.cwd=()=>e,new Sme(t,eI.workerData.indexWorkspaceRoots,eI.workerData.params)}s(gQe,"runIndexWorker");d();var yM=Ne(require("util"));function AQe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(ey(t)==="dev")return t.get(Tc).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",yM.format(...i)))},e.dir=(n,i)=>r(4,yM.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(yM.format(...n));i.name="Trace",e.log(i)},e}s(AQe,"createConsole");var xv=Ne(require("fs/promises")),Ppt=Ne(require("os")),PQ=Ne(require("path")),ah=Ne(lg()),Bpt=require("worker_threads");d();d();var wz=require("assert");d();d();var A9t={right:x9t,center:b9t},y9t=0,Cz=1,C9t=2,Ez=3,ehe=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&q0.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),q0.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=q0.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,c)=>{let{width:l}=e[c],u=this.negatePadding(e[c]),f=a;if(u>q0.stringWidth(a)&&(f+=" ".repeat(u-q0.stringWidth(a))),e[c].align&&e[c].align!=="left"&&this.wrap){let m=A9t[e[c].align];f=m(f,u),q0.stringWidth(f)<u&&(f+=" ".repeat((l||0)-q0.stringWidth(f)-1))}let p=e[c].padding||[0,0,0,0];p[Ez]&&(o+=" ".repeat(p[Ez])),o+=dUe(e[c],f,"| "),o+=f,o+=dUe(e[c],f," |"),p[Cz]&&(o+=" ".repeat(p[Cz])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=q0.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=q0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[y9t]||0).fill("")),i.push(...new Array(o.padding[C9t]||0).fill(""))),i.forEach((c,l)=>{r[l]||r.push([]);let u=r[l];for(let f=0;f<a;f++)u[f]===void 0&&u.push("");u.push(c)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[Ez]||0)+(e.padding[Cz]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||q0.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,c)=>a===void 0?Math.max(o,E9t(e[c])):a)}};function dUe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(dUe,"addBorder");function E9t(t){let e=t.padding||[],r=1+(e[Ez]||0)+(e[Cz]||0);return t.border?r+4:r}s(E9t,"_minWidth");function v9t(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(v9t,"getWindowWidth");function x9t(t,e){t=t.trim();let r=q0.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(x9t,"alignRight");function b9t(t,e){t=t.trim();let r=q0.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(b9t,"alignCenter");var q0;function fUe(t,e){return q0=e,new ehe({width:t?.width||v9t(),wrap:t?.wrap})}s(fUe,"cliui");d();var pUe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function the(t){return t.replace(pUe,"")}s(the,"stripAnsi");function mUe(t,e){let[r,n]=t.match(pUe)||["",""];t=the(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(mUe,"wrap");function rhe(t){return fUe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:the,wrap:mUe})}s(rhe,"ui");d();var $P=require("path"),vz=require("fs");function nhe(t,e){let r=(0,$P.resolve)(".",t),n;for((0,vz.statSync)(r).isDirectory()||(r=(0,$P.dirname)(r));;){if(n=e(r,(0,vz.readdirSync)(r)),n)return(0,$P.resolve)(r,n);if(r=(0,$P.dirname)(n=r),n===r)break}}s(nhe,"default");var kUe=require("util"),PUe=require("fs"),BUe=require("url");d();var CUe=require("util"),Tz=require("path");d();function VS(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(VS,"camelCase");function xz(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(xz,"decamelize");function bz(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(bz,"looksLikeNumber");d();d();function hUe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(hUe,"tokenizeArgString");d();var ym;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(ym||(ym={}));var oE,Iz=class{static{s(this,"YargsParser")}constructor(e){oE=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=hUe(e),o=typeof e=="string",a=I9t(Object.assign(Object.create(null),n.alias)),c=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),l=Object.assign(Object.create(null),n.default),u=n.configObjects||[],f=n.envPrefix,p=c["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=n.__||oE.format,E={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},x=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,b=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(te){let oe=typeof te=="object"?te.key:te,We=Object.keys(te).map(function(De){return{boolean:"bools",string:"strings",number:"numbers"}[De]}).filter(Boolean).pop();We&&(E[We][oe]=!0),E.arrays[oe]=!0,E.keys.push(oe)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(te){E.bools[te]=!0,E.keys.push(te)}),[].concat(n.string||[]).filter(Boolean).forEach(function(te){E.strings[te]=!0,E.keys.push(te)}),[].concat(n.number||[]).filter(Boolean).forEach(function(te){E.numbers[te]=!0,E.keys.push(te)}),[].concat(n.count||[]).filter(Boolean).forEach(function(te){E.counts[te]=!0,E.keys.push(te)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(te){E.normalize[te]=!0,E.keys.push(te)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([te,oe])=>{typeof oe=="number"&&(E.nargs[te]=oe,E.keys.push(te))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([te,oe])=>{typeof oe=="function"&&(E.coercions[te]=oe,E.keys.push(te))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(te){E.configs[te]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([te,oe])=>{(typeof oe=="boolean"||typeof oe=="function")&&(E.configs[te]=oe)})),Qe(n.key,a,n.default,E.arrays),Object.keys(l).forEach(function(te){(E.aliases[te]||[]).forEach(function(oe){l[oe]=l[te]})});let _=null;nt();let k=[],P=Object.assign(Object.create(null),{_:[]}),N={};for(let te=0;te<i.length;te++){let oe=i[te],We=oe.replace(/^-{3,}/,"---"),De,xe,Ye,st,yt,qt;if(oe!=="--"&&/^-/.test(oe)&&St(oe))M(oe);else if(We.match(/^---+(=|$)/)){M(oe);continue}else if(oe.match(/^--.+=/)||!c["short-option-groups"]&&oe.match(/^-.+=/))st=oe.match(/^--?([^=]+)=([\s\S]*)$/),st!==null&&Array.isArray(st)&&st.length>=3&&(ke(st[1],E.arrays)?te=se(te,st[1],i,st[2]):ke(st[1],E.nargs)!==!1?te=J(te,st[1],i,st[2]):K(st[1],st[2],!0));else if(oe.match(b)&&c["boolean-negation"])st=oe.match(b),st!==null&&Array.isArray(st)&&st.length>=2&&(xe=st[1],K(xe,ke(xe,E.arrays)?[!1]:!1));else if(oe.match(/^--.+/)||!c["short-option-groups"]&&oe.match(/^-[^-]+/))st=oe.match(/^--?(.+)/),st!==null&&Array.isArray(st)&&st.length>=2&&(xe=st[1],ke(xe,E.arrays)?te=se(te,xe,i):ke(xe,E.nargs)!==!1?te=J(te,xe,i):(yt=i[te+1],yt!==void 0&&(!yt.match(/^-/)||yt.match(x))&&!ke(xe,E.bools)&&!ke(xe,E.counts)||/^(true|false)$/.test(yt)?(K(xe,yt),te++):K(xe,It(xe))));else if(oe.match(/^-.\..+=/))st=oe.match(/^-([^=]+)=([\s\S]*)$/),st!==null&&Array.isArray(st)&&st.length>=3&&K(st[1],st[2]);else if(oe.match(/^-.\..+/)&&!oe.match(x))yt=i[te+1],st=oe.match(/^-(.\..+)/),st!==null&&Array.isArray(st)&&st.length>=2&&(xe=st[1],yt!==void 0&&!yt.match(/^-/)&&!ke(xe,E.bools)&&!ke(xe,E.counts)?(K(xe,yt),te++):K(xe,It(xe)));else if(oe.match(/^-[^-]+/)&&!oe.match(x)){Ye=oe.slice(1,-1).split(""),De=!1;for(let dr=0;dr<Ye.length;dr++){if(yt=oe.slice(dr+2),Ye[dr+1]&&Ye[dr+1]==="="){qt=oe.slice(dr+3),xe=Ye[dr],ke(xe,E.arrays)?te=se(te,xe,i,qt):ke(xe,E.nargs)!==!1?te=J(te,xe,i,qt):K(xe,qt),De=!0;break}if(yt==="-"){K(Ye[dr],yt);continue}if(/[A-Za-z]/.test(Ye[dr])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(yt)&&ke(yt,E.bools)===!1){K(Ye[dr],yt),De=!0;break}if(Ye[dr+1]&&Ye[dr+1].match(/\W/)){K(Ye[dr],yt),De=!0;break}else K(Ye[dr],It(Ye[dr]))}xe=oe.slice(-1)[0],!De&&xe!=="-"&&(ke(xe,E.arrays)?te=se(te,xe,i):ke(xe,E.nargs)!==!1?te=J(te,xe,i):(yt=i[te+1],yt!==void 0&&(!/^(-|--)[^-]/.test(yt)||yt.match(x))&&!ke(xe,E.bools)&&!ke(xe,E.counts)||/^(true|false)$/.test(yt)?(K(xe,yt),te++):K(xe,It(xe))))}else if(oe.match(/^-[0-9]$/)&&oe.match(x)&&ke(oe.slice(1),E.bools))xe=oe.slice(1),K(xe,It(xe));else if(oe==="--"){k=i.slice(te+1);break}else if(c["halt-at-non-option"]){k=i.slice(te);break}else M(oe)}z(P,!0),z(P,!1),ie(P),H(),ne(P,E.aliases,l,!0),X(P),c["set-placeholder-key"]&&ue(P),Object.keys(E.counts).forEach(function(te){me(P,te.split("."))||K(te,0)}),p&&k.length&&(P[m]=[]),k.forEach(function(te){P[m].push(te)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(P).filter(te=>te!=="--"&&te.includes("-")).forEach(te=>{delete P[te]}),c["strip-aliased"]&&[].concat(...Object.keys(a).map(te=>a[te])).forEach(te=>{c["camel-case-expansion"]&&te.includes("-")&&delete P[te.split(".").map(oe=>VS(oe)).join(".")],delete P[te]});function M(te){let oe=le("_",te);(typeof oe=="string"||typeof oe=="number")&&P._.push(oe)}s(M,"pushPositional");function J(te,oe,We,De){let xe,Ye=ke(oe,E.nargs);if(Ye=typeof Ye!="number"||isNaN(Ye)?1:Ye,Ye===0)return ye(De)||(_=Error(y("Argument unexpected for: %s",oe))),K(oe,It(oe)),te;let st=ye(De)?0:1;if(c["nargs-eats-options"])We.length-(te+1)+st<Ye&&(_=Error(y("Not enough arguments following: %s",oe))),st=Ye;else{for(xe=te+1;xe<We.length&&(!We[xe].match(/^-[^0-9]/)||We[xe].match(x)||St(We[xe]));xe++)st++;st<Ye&&(_=Error(y("Not enough arguments following: %s",oe)))}let yt=Math.min(st,Ye);for(!ye(De)&&yt>0&&(K(oe,De),yt--),xe=te+1;xe<yt+te+1;xe++)K(oe,We[xe]);return te+yt}s(J,"eatNargs");function se(te,oe,We,De){let xe=[],Ye=De||We[te+1],st=ke(oe,E.nargs);if(ke(oe,E.bools)&&!/^(true|false)$/.test(Ye))xe.push(!0);else if(ye(Ye)||ye(De)&&/^-/.test(Ye)&&!x.test(Ye)&&!St(Ye)){if(l[oe]!==void 0){let yt=l[oe];xe=Array.isArray(yt)?yt:[yt]}}else{ye(De)||xe.push(q(oe,De,!0));for(let yt=te+1;yt<We.length&&!(!c["greedy-arrays"]&&xe.length>0||st&&typeof st=="number"&&xe.length>=st||(Ye=We[yt],/^-/.test(Ye)&&!x.test(Ye)&&!St(Ye)));yt++)te=yt,xe.push(q(oe,Ye,o))}return typeof st=="number"&&(st&&xe.length<st||isNaN(st)&&xe.length===0)&&(_=Error(y("Not enough arguments following: %s",oe))),K(oe,xe),te}s(se,"eatArray");function K(te,oe,We=o){if(/-/.test(te)&&c["camel-case-expansion"]){let Ye=te.split(".").map(function(st){return VS(st)}).join(".");G(te,Ye)}let De=q(te,oe,We),xe=te.split(".");he(P,xe,De),E.aliases[te]&&E.aliases[te].forEach(function(Ye){let st=Ye.split(".");he(P,st,De)}),xe.length>1&&c["dot-notation"]&&(E.aliases[xe[0]]||[]).forEach(function(Ye){let st=Ye.split("."),yt=[].concat(xe);yt.shift(),st=st.concat(yt),(E.aliases[te]||[]).includes(st.join("."))||he(P,st,De)}),ke(te,E.normalize)&&!ke(te,E.arrays)&&[te].concat(E.aliases[te]||[]).forEach(function(st){Object.defineProperty(N,st,{enumerable:!0,get(){return oe},set(yt){oe=typeof yt=="string"?oE.normalize(yt):yt}})})}s(K,"setArg");function G(te,oe){E.aliases[te]&&E.aliases[te].length||(E.aliases[te]=[oe],h[oe]=!0),E.aliases[oe]&&E.aliases[oe].length||G(oe,te)}s(G,"addNewAlias");function q(te,oe,We){We&&(oe=T9t(oe)),(ke(te,E.bools)||ke(te,E.counts))&&typeof oe=="string"&&(oe=oe==="true");let De=Array.isArray(oe)?oe.map(function(xe){return le(te,xe)}):le(te,oe);return ke(te,E.counts)&&(ye(De)||typeof De=="boolean")&&(De=ihe()),ke(te,E.normalize)&&ke(te,E.arrays)&&(Array.isArray(oe)?De=oe.map(xe=>oE.normalize(xe)):De=oE.normalize(oe)),De}s(q,"processValue");function le(te,oe){return!c["parse-positional-numbers"]&&te==="_"||!ke(te,E.strings)&&!ke(te,E.bools)&&!Array.isArray(oe)&&(bz(oe)&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${oe}`)))||!ye(oe)&&ke(te,E.numbers))&&(oe=Number(oe)),oe}s(le,"maybeCoerceNumber");function ie(te){let oe=Object.create(null);ne(oe,E.aliases,l),Object.keys(E.configs).forEach(function(We){let De=te[We]||oe[We];if(De)try{let xe=null,Ye=oE.resolve(oE.cwd(),De),st=E.configs[We];if(typeof st=="function"){try{xe=st(Ye)}catch(yt){xe=yt}if(xe instanceof Error){_=xe;return}}else xe=oE.require(Ye);V(xe)}catch(xe){xe.name==="PermissionDenied"?_=xe:te[We]&&(_=Error(y("Invalid JSON config file: %s",De)))}})}s(ie,"setConfig");function V(te,oe){Object.keys(te).forEach(function(We){let De=te[We],xe=oe?oe+"."+We:We;typeof De=="object"&&De!==null&&!Array.isArray(De)&&c["dot-notation"]?V(De,xe):(!me(P,xe.split("."))||ke(xe,E.arrays)&&c["combine-arrays"])&&K(xe,De)})}s(V,"setConfigObject");function H(){typeof u<"u"&&u.forEach(function(te){V(te)})}s(H,"setConfigObjects");function z(te,oe){if(typeof f>"u")return;let We=typeof f=="string"?f:"",De=oE.env();Object.keys(De).forEach(function(xe){if(We===""||xe.lastIndexOf(We,0)===0){let Ye=xe.split("__").map(function(st,yt){return yt===0&&(st=st.substring(We.length)),VS(st)});(oe&&E.configs[Ye.join(".")]||!oe)&&!me(te,Ye)&&K(Ye.join("."),De[xe])}})}s(z,"applyEnvVars");function X(te){let oe,We=new Set;Object.keys(te).forEach(function(De){if(!We.has(De)&&(oe=ke(De,E.coercions),typeof oe=="function"))try{let xe=le(De,oe(te[De]));[].concat(E.aliases[De]||[],De).forEach(Ye=>{We.add(Ye),te[Ye]=xe})}catch(xe){_=xe}})}s(X,"applyCoercions");function ue(te){return E.keys.forEach(oe=>{~oe.indexOf(".")||typeof te[oe]>"u"&&(te[oe]=void 0)}),te}s(ue,"setPlaceholderKeys");function ne(te,oe,We,De=!1){Object.keys(We).forEach(function(xe){me(te,xe.split("."))||(he(te,xe.split("."),We[xe]),De&&(g[xe]=!0),(oe[xe]||[]).forEach(function(Ye){me(te,Ye.split("."))||he(te,Ye.split("."),We[xe])}))})}s(ne,"applyDefaultsAndAliases");function me(te,oe){let We=te;c["dot-notation"]||(oe=[oe.join(".")]),oe.slice(0,-1).forEach(function(xe){We=We[xe]||{}});let De=oe[oe.length-1];return typeof We!="object"?!1:De in We}s(me,"hasKey");function he(te,oe,We){let De=te;c["dot-notation"]||(oe=[oe.join(".")]),oe.slice(0,-1).forEach(function(qt){qt=gUe(qt),typeof De=="object"&&De[qt]===void 0&&(De[qt]={}),typeof De[qt]!="object"||Array.isArray(De[qt])?(Array.isArray(De[qt])?De[qt].push({}):De[qt]=[De[qt],{}],De=De[qt][De[qt].length-1]):De=De[qt]});let xe=gUe(oe[oe.length-1]),Ye=ke(oe.join("."),E.arrays),st=Array.isArray(We),yt=c["duplicate-arguments-array"];!yt&&ke(xe,E.nargs)&&(yt=!0,(!ye(De[xe])&&E.nargs[xe]===1||Array.isArray(De[xe])&&De[xe].length===E.nargs[xe])&&(De[xe]=void 0)),We===ihe()?De[xe]=ihe(De[xe]):Array.isArray(De[xe])?yt&&Ye&&st?De[xe]=c["flatten-duplicate-arrays"]?De[xe].concat(We):(Array.isArray(De[xe][0])?De[xe]:[De[xe]]).concat([We]):!yt&&!!Ye==!!st?De[xe]=We:De[xe]=De[xe].concat([We]):De[xe]===void 0&&Ye?De[xe]=st?We:[We]:yt&&!(De[xe]===void 0||ke(xe,E.counts)||ke(xe,E.bools))?De[xe]=[De[xe],We]:De[xe]=We}s(he,"setKey");function Qe(...te){te.forEach(function(oe){Object.keys(oe||{}).forEach(function(We){E.aliases[We]||(E.aliases[We]=[].concat(a[We]||[]),E.aliases[We].concat(We).forEach(function(De){if(/-/.test(De)&&c["camel-case-expansion"]){let xe=VS(De);xe!==We&&E.aliases[We].indexOf(xe)===-1&&(E.aliases[We].push(xe),h[xe]=!0)}}),E.aliases[We].concat(We).forEach(function(De){if(De.length>1&&/[A-Z]/.test(De)&&c["camel-case-expansion"]){let xe=xz(De,"-");xe!==We&&E.aliases[We].indexOf(xe)===-1&&(E.aliases[We].push(xe),h[xe]=!0)}}),E.aliases[We].forEach(function(De){E.aliases[De]=[We].concat(E.aliases[We].filter(function(xe){return De!==xe}))}))})})}s(Qe,"extendAliases");function ke(te,oe){let We=[].concat(E.aliases[te]||[],te),De=Object.keys(oe),xe=We.find(Ye=>De.includes(Ye));return xe?oe[xe]:!1}s(ke,"checkAllAliases");function tt(te){let oe=Object.keys(E);return[].concat(oe.map(De=>E[De])).some(function(De){return Array.isArray(De)?De.includes(te):De[te]})}s(tt,"hasAnyFlag");function Fe(te,...oe){return[].concat(...oe).some(function(De){let xe=te.match(De);return xe&&tt(xe[1])})}s(Fe,"hasFlagsMatching");function ht(te){if(te.match(x)||!te.match(/^-[^-]+/))return!1;let oe=!0,We,De=te.slice(1).split("");for(let xe=0;xe<De.length;xe++){if(We=te.slice(xe+2),!tt(De[xe])){oe=!1;break}if(De[xe+1]&&De[xe+1]==="="||We==="-"||/[A-Za-z]/.test(De[xe])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(We)||De[xe+1]&&De[xe+1].match(/\W/))break}return oe}s(ht,"hasAllShortFlags");function St(te){return c["unknown-options-as-args"]&&vt(te)}s(St,"isUnknownOptionAsArg");function vt(te){return te=te.replace(/^-{3,}/,"--"),te.match(x)||ht(te)?!1:!Fe(te,/^-+([^=]+?)=[\s\S]*$/,b,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(vt,"isUnknownOption");function It(te){return!ke(te,E.bools)&&!ke(te,E.counts)&&`${te}`in l?l[te]:de(Ue(te))}s(It,"defaultValue");function de(te){return{[ym.BOOLEAN]:!0,[ym.STRING]:"",[ym.NUMBER]:void 0,[ym.ARRAY]:[]}[te]}s(de,"defaultForType");function Ue(te){let oe=ym.BOOLEAN;return ke(te,E.strings)?oe=ym.STRING:ke(te,E.numbers)?oe=ym.NUMBER:ke(te,E.bools)?oe=ym.BOOLEAN:ke(te,E.arrays)&&(oe=ym.ARRAY),oe}s(Ue,"guessType");function ye(te){return te===void 0}s(ye,"isUndefined");function nt(){Object.keys(E.counts).find(te=>ke(te,E.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",te)),!0):ke(te,E.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",te)),!0):!1)}return s(nt,"checkConfiguration"),{aliases:Object.assign({},E.aliases),argv:Object.assign(N,P),configuration:c,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function I9t(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(c){return e[o].indexOf(c)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,c,l){return l.indexOf(a)===c});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(I9t,"combineAliases");function ihe(t){return t!==void 0?t+1:1}s(ihe,"increment");function gUe(t){return t==="__proto__"?"___proto___":t}s(gUe,"sanitizeKey");function T9t(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(T9t,"stripQuotes");var EUe=require("fs");var ohe,she,ahe,AUe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,yUe=(she=(ohe=process==null?void 0:process.versions)===null||ohe===void 0?void 0:ohe.node)!==null&&she!==void 0?she:(ahe=process==null?void 0:process.version)===null||ahe===void 0?void 0:ahe.slice(1);if(yUe&&Number(yUe.match(/^([^.]+)/)[1])<AUe)throw Error(`yargs parser supports a minimum Node.js version of ${AUe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var w9t=process?process.env:{},vUe=new Iz({cwd:process.cwd,env:s(()=>w9t,"env"),format:CUe.format,normalize:Tz.normalize,resolve:Tz.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,EUe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),TM=s(function(e,r){return vUe.parse(e.slice(),r).argv},"Parser");TM.detailed=function(t,e){return vUe.parse(t.slice(),e)};TM.camelCase=VS;TM.decamelize=xz;TM.looksLikeNumber=bz;var xUe=TM;var dg=require("path");d();function _9t(){return S9t()?0:1}s(_9t,"getProcessArgvBinIndex");function S9t(){return R9t()&&!process.defaultApp}s(S9t,"isBundledElectronApp");function R9t(){return!!process.versions.electron}s(R9t,"isElectronApp");function bUe(){return process.argv[_9t()]}s(bUe,"getProcessArgvBin");d();var Hs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};d();d();var zP=require("fs"),IUe=require("util"),TUe=require("path");var wUe={fs:{readFileSync:zP.readFileSync,writeFile:zP.writeFile},format:IUe.format,resolve:TUe.resolve,exists:s(t=>{try{return(0,zP.statSync)(t).isFile()}catch{return!1}},"exists")};d();var ug,che=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),ug.format.apply(ug.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let c=[a];return~a.indexOf("%d")&&c.push(i),ug.format.apply(ug.format,c.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),c=JSON.stringify(this.cache[i],null,2);ug.fs.writeFile(a,c,"utf-8",function(l){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(l)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{ug.fs.readFileSync&&(e=JSON.parse(ug.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=ug.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=ug.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return ug.exists(e)}};function _Ue(t,e){ug=e;let r=new che(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(_Ue,"y18n");var k9t=s(t=>_Ue(t,wUe),"y18n"),SUe=k9t;var P9t="require is not supported by ESM",RUe="loading a directory of commands is not supported yet for ESM",wM;try{wM=(0,BUe.fileURLToPath)(importMetaUrlShim)}catch{wM=process.cwd()}var B9t=wM.substring(0,wM.lastIndexOf("node_modules")),DUe={assert:{notStrictEqual:wz.notStrictEqual,strictEqual:wz.strictEqual},cliui:rhe,findUp:nhe,getEnv:s(t=>process.env[t],"getEnv"),inspect:kUe.inspect,getCallerFile:s(()=>{throw new Hs(RUe)},"getCallerFile"),getProcessArgvBin:bUe,mainFilename:B9t||process.cwd(),Parser:xUe,path:{basename:dg.basename,dirname:dg.dirname,extname:dg.extname,relative:dg.relative,resolve:dg.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:PUe.readFileSync,require:s(()=>{throw new Hs(P9t)},"require"),requireDirectory:s(()=>{throw new Hs(RUe)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:SUe({directory:(0,dg.resolve)(wM,"../../../locales"),updateFiles:!1})};d();d();d();function Nd(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(Nd,"assertNotStrictEqual");function lhe(t,e){e.assert.strictEqual(typeof t,"string")}s(lhe,"assertSingleKey");function YP(t){return Object.keys(t)}s(YP,"objectKeys");d();function Ws(t){return!!t&&!!t.then&&typeof t.then=="function"}s(Ws,"isPromise");d();d();d();function iI(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,c)=>{let l=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&c===r.length-1&&(l=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:l}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:l})}),o}s(iI,"parseCommand");var D9t=["first","second","third","fourth","fifth","sixth"];function xr(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[iI(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,c]=n(),l=[].slice.call(a);for(;l.length&&l[l.length-1]===void 0;)l.pop();let u=c||l.length;if(u<o.demanded.length)throw new Hs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${l.length}.`);let f=o.demanded.length+o.optional.length;if(u>f)throw new Hs(`Too many arguments provided. Expected max ${f} but received ${u}.`);o.demanded.forEach(p=>{let m=l.shift(),h=NUe(m);p.cmd.filter(y=>y===h||y==="*").length===0&&LUe(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(l.length===0)return;let m=l.shift(),h=NUe(m);p.cmd.filter(y=>y===h||y==="*").length===0&&LUe(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(xr,"argsert");function NUe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(NUe,"guessType");function LUe(t,e,r){throw new Hs(`Invalid ${D9t[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(LUe,"argumentTypeError");var _z=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(xr("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function MUe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(MUe,"commandMiddlewareFactory");function $S(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(Ws(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,c])=>Object.assign(a,c));{let a=o(i,e);return Ws(a)?a.then(c=>Object.assign(i,c)):Object.assign(i,a)}},t)}s($S,"applyMiddleware");d();function zS(t,e,r=n=>{throw n}){try{let n=N9t(t)?t():t;return Ws(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(zS,"maybeAsyncResult");function N9t(t){return typeof t=="function"}s(N9t,"isFunction");d();function uhe(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(uhe,"whichModule");var KP=/(^\*)|(^\$0)/,dhe=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,c,l)=>{let u=o(a,c,l);if(u){if(this.requireCache.has(c))return u;this.requireCache.add(c),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let c=[],l=MUe(o);if(i=i||(()=>{}),Array.isArray(e))if(L9t(e))[e,...c]=e;else for(let u of e)this.addHandler(u);else if(F9t(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(FUe(n)){this.addHandler([e].concat(c),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=iI(e);c=c.map(m=>iI(m).cmd);let f=!1,p=[u.cmd].concat(c).filter(m=>KP.test(m)?(f=!0,!1):!0);p.length===0&&f&&p.push("$0"),f&&(u.cmd=p[0],c=p.slice(1),e=e.replace(KP,u.cmd)),c.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,f,c,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:l,deprecated:a,demanded:u.demanded,optional:u.optional},f&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let c=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,l=r.getInternalMethods().getContext(),u=l.commands.slice(),f=!e;e&&(l.commands.push(e),l.fullCommands.push(c.original));let p=this.applyBuilderUpdateUsageAndParse(f,c,r,n.aliases,u,i,o,a);return Ws(p)?p.then(m=>this.applyMiddlewareAndGetResult(f,c,m.innerArgv,l,o,m.aliases,r)):this.applyMiddlewareAndGetResult(f,c,p.innerArgv,l,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,c,l){let u=r.builder,f=n;if(Sz(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),l);if(Ws(p))return p.then(m=>(f=QUe(m)?m:n,this.parseAndUpdateUsage(e,r,f,o,a,c)))}else M9t(u)&&(n.getInternalMethods().getUsageInstance().freeze(),f=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{f.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,f,o,a,c)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let c=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return Ws(c)?c.then(l=>({aliases:n.parsed.aliases,innerArgv:l})):{aliases:n.parsed.aliases,innerArgv:c}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=KP.test(r.original)?r.original.replace(KP,"").trim():r.original,i=e.filter(o=>!KP.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,c,l){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,l,a.parsed.error,e);n=zS(n,f=>(u(f),f))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=$S(n,a,c,!1),n=zS(n,f=>{let p=r.handler(f);return Ws(p)?p.then(()=>f):f}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),Ws(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(f=>{try{a.getInternalMethods().getUsageInstance().fail(null,f)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,c){let l={};if(o)return n;c.getInternalMethods().getHasOutput()||(l=this.populatePositionals(r,n,i,c));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),f=$S(n,c,u,!0);return Ws(f)?f.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,c,u,l)):this.handleValidationAndGetResult(e,r,f,i,a,c,u,l)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),c={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let l=o.shift();this.populatePositional(l,r,c)}for(;a.length;){let l=a.shift();this.populatePositional(l,r,c)}return r._=n.commands.concat(r._.map(l=>""+l)),this.postProcessPositionals(r,c,this.cmdToParseOptions(e.original),i),c}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=iI(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(f=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(f)})}),!a.length)return;let c=Object.assign({},o.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:c}));if(l.error)i.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let u=Object.keys(r);Object.keys(r).forEach(f=>{u.push(...l.aliases[f])}),Object.keys(l.argv).forEach(f=>{u.includes(f)&&(r[f]||(r[f]=l.argv[f]),!this.isInConfigs(i,f)&&!this.isDefaulted(i,f)&&Object.prototype.hasOwnProperty.call(e,f)&&Object.prototype.hasOwnProperty.call(l.argv,f)&&(Array.isArray(e[f])||Array.isArray(l.argv[f]))?e[f]=[].concat(e[f],l.argv[f]):e[f]=l.argv[f])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=KP.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(Sz(r))return r(e,!0);FUe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=uhe(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;Nd(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();Nd(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function OUe(t,e,r,n){return new dhe(t,e,r,n)}s(OUe,"command");function FUe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(FUe,"isCommandBuilderDefinition");function L9t(t){return t.every(e=>typeof e=="string")}s(L9t,"isCommandAndAliases");function Sz(t){return typeof t=="function"}s(Sz,"isCommandBuilderCallback");function M9t(t){return typeof t=="object"}s(M9t,"isCommandBuilderOptionDefinitions");function F9t(t){return typeof t=="object"&&!Array.isArray(t)}s(F9t,"isCommandHandlerDefinition");d();d();function oI(t={},e=()=>!0){let r={};return YP(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(oI,"objFilter");d();function sI(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(sI,"setBlocking");function O9t(t){return typeof t=="boolean"}s(O9t,"isBoolean");function qUe(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(q){i.push(q)},"failFn");let o=null,a=null,c=!0;n.showHelpOnFail=s(function(q=!0,le){let[ie,V]=typeof q=="string"?[!0,q]:[q,le];return t.getInternalMethods().isGlobalContext()&&(a=V),o=V,c=ie,n},"showHelpOnFailFn");let l=!1;n.fail=s(function(q,le){let ie=t.getInternalMethods().getLoggerInstance();if(i.length)for(let V=i.length-1;V>=0;--V){let H=i[V];if(O9t(H)){if(le)throw le;if(q)throw Error(q)}else H(q,le,n)}else{if(t.getExitProcess()&&sI(!0),!l){l=!0,c&&(t.showHelp("error"),ie.error()),(q||le)&&ie.error(q||le);let V=o||a;V&&((q||le)&&ie.error(""),ie.error(V))}if(le=le||new Hs(q),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,le);throw le}},"fail");let u=[],f=!1;n.usage=(G,q)=>G===null?(f=!0,u=[],n):(f=!1,u.push([G,q||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>f,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(G,q)=>{p.push([G,q||""])};let m=[];n.command=s(function(q,le,ie,V,H=!1){ie&&(m=m.map(z=>(z[2]=!1,z))),m.push([q,le||"",ie,V,H])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(q,le){Array.isArray(q)?q.forEach(ie=>{n.describe(ie,le)}):typeof q=="object"?Object.keys(q).forEach(ie=>{n.describe(ie,q[ie])}):h[q]=le},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=G=>{g.push(G)};let y=!1,E;n.wrap=G=>{y=!0,E=G},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(E=J(),y=!0),E);let x="__yargsString__:";n.deferY18nLookup=G=>x+G,n.help=s(function(){if(k)return k;_();let q=t.customScriptName?t.$0:e.path.basename(t.$0),le=t.getDemandedOptions(),ie=t.getDemandedCommands(),V=t.getDeprecatedOptions(),H=t.getGroups(),z=t.getOptions(),X=[];X=X.concat(Object.keys(h)),X=X.concat(Object.keys(le)),X=X.concat(Object.keys(ie)),X=X.concat(Object.keys(z.default)),X=X.filter(N),X=Object.keys(X.reduce((Fe,ht)=>(ht!=="_"&&(Fe[ht]=!0),Fe),{}));let ue=n.getWrap(),ne=e.cliui({width:ue,wrap:!!ue});if(!f){if(u.length)u.forEach(Fe=>{ne.div({text:`${Fe[0].replace(/\$0/g,q)}`}),Fe[1]&&ne.div({text:`${Fe[1]}`,padding:[1,0,0,0]})}),ne.div();else if(m.length){let Fe=null;ie._?Fe=`${q} <${r("command")}>
`:Fe=`${q} [${r("command")}]
`,ne.div(`${Fe}`)}}if(m.length>1||m.length===1&&!m[0][2]){ne.div(r("Commands:"));let Fe=t.getInternalMethods().getContext(),ht=Fe.commands.length?`${Fe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((vt,It)=>vt[0].localeCompare(It[0])));let St=q?`${q} `:"";m.forEach(vt=>{let It=`${St}${ht}${vt[0].replace(/^\$0 ?/,"")}`;ne.span({text:It,padding:[0,2,0,2],width:b(m,ue,`${q}${ht}`)+4},{text:vt[1]});let de=[];vt[2]&&de.push(`[${r("default")}]`),vt[3]&&vt[3].length&&de.push(`[${r("aliases:")} ${vt[3].join(", ")}]`),vt[4]&&(typeof vt[4]=="string"?de.push(`[${r("deprecated: %s",vt[4])}]`):de.push(`[${r("deprecated")}]`)),de.length?ne.div({text:de.join(" "),padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}let me=(Object.keys(z.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);X=X.filter(Fe=>!t.parsed.newAliases[Fe]&&me.every(ht=>(z.alias[ht]||[]).indexOf(Fe)===-1));let he=r("Options:");H[he]||(H[he]=[]),P(X,z.alias,H,he);let Qe=s(Fe=>/^--/.test(Rz(Fe)),"isLongSwitch"),ke=Object.keys(H).filter(Fe=>H[Fe].length>0).map(Fe=>{let ht=H[Fe].filter(N).map(St=>{if(me.includes(St))return St;for(let vt=0,It;(It=me[vt])!==void 0;vt++)if((z.alias[It]||[]).includes(St))return It;return St});return{groupName:Fe,normalizedKeys:ht}}).filter(({normalizedKeys:Fe})=>Fe.length>0).map(({groupName:Fe,normalizedKeys:ht})=>{let St=ht.reduce((vt,It)=>(vt[It]=[It].concat(z.alias[It]||[]).map(de=>Fe===n.getPositionalGroupName()?de:(/^[0-9]$/.test(de)?z.boolean.includes(It)?"-":"--":de.length>1?"--":"-")+de).sort((de,Ue)=>Qe(de)===Qe(Ue)?0:Qe(de)?1:-1).join(", "),vt),{});return{groupName:Fe,normalizedKeys:ht,switches:St}});if(ke.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).some(({normalizedKeys:Fe,switches:ht})=>!Fe.every(St=>Qe(ht[St])))&&ke.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).forEach(({normalizedKeys:Fe,switches:ht})=>{Fe.forEach(St=>{Qe(ht[St])&&(ht[St]=Q9t(ht[St],4))})}),ke.forEach(({groupName:Fe,normalizedKeys:ht,switches:St})=>{ne.div(Fe),ht.forEach(vt=>{let It=St[vt],de=h[vt]||"",Ue=null;de.includes(x)&&(de=r(de.substring(x.length))),z.boolean.includes(vt)&&(Ue=`[${r("boolean")}]`),z.count.includes(vt)&&(Ue=`[${r("count")}]`),z.string.includes(vt)&&(Ue=`[${r("string")}]`),z.normalize.includes(vt)&&(Ue=`[${r("string")}]`),z.array.includes(vt)&&(Ue=`[${r("array")}]`),z.number.includes(vt)&&(Ue=`[${r("number")}]`);let ye=s(oe=>typeof oe=="string"?`[${r("deprecated: %s",oe)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),nt=[vt in V?ye(V[vt]):null,Ue,vt in le?`[${r("required")}]`:null,z.choices&&z.choices[vt]?`[${r("choices:")} ${n.stringifiedValues(z.choices[vt])}]`:null,M(z.default[vt],z.defaultDescription[vt])].filter(Boolean).join(" ");ne.span({text:Rz(It),padding:[0,2,0,2+UUe(It)],width:b(St,ue)+4},de);let te=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;nt&&!te?ne.div({text:nt,padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}),p.length&&(ne.div(r("Examples:")),p.forEach(Fe=>{Fe[0]=Fe[0].replace(/\$0/g,q)}),p.forEach(Fe=>{Fe[1]===""?ne.div({text:Fe[0],padding:[0,2,0,2]}):ne.div({text:Fe[0],padding:[0,2,0,2],width:b(p,ue)+4},{text:Fe[1]})}),ne.div()),g.length>0){let Fe=g.map(ht=>ht.replace(/\$0/g,q)).join(`
`);ne.div(`${Fe}
`)}return ne.toString().replace(/\s*$/,"")},"help");function b(G,q,le){let ie=0;return Array.isArray(G)||(G=Object.values(G).map(V=>[V])),G.forEach(V=>{ie=Math.max(e.stringWidth(le?`${le} ${Rz(V[0])}`:Rz(V[0]))+UUe(V[0]),ie)}),q&&(ie=Math.min(ie,parseInt((q*.5).toString(),10))),ie}s(b,"maxWidth");function _(){let G=t.getDemandedOptions(),q=t.getOptions();(Object.keys(q.alias)||[]).forEach(le=>{q.alias[le].forEach(ie=>{h[ie]&&n.describe(le,h[ie]),ie in G&&t.demandOption(le,G[ie]),q.boolean.includes(ie)&&t.boolean(le),q.count.includes(ie)&&t.count(le),q.string.includes(ie)&&t.string(le),q.normalize.includes(ie)&&t.normalize(le),q.array.includes(ie)&&t.array(le),q.number.includes(ie)&&t.number(le)})})}s(_,"normalizeAliases");let k;n.cacheHelpMessage=function(){k=this.help()},n.clearCachedHelpMessage=function(){k=void 0},n.hasCachedHelpMessage=function(){return!!k};function P(G,q,le,ie){let V=[],H=null;return Object.keys(le).forEach(z=>{V=V.concat(le[z])}),G.forEach(z=>{H=[z].concat(q[z]),H.some(X=>V.indexOf(X)!==-1)||le[ie].push(z)}),V}s(P,"addUngroupedKeys");function N(G){return t.getOptions().hiddenOptions.indexOf(G)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),n.showHelp=G=>{let q=t.getInternalMethods().getLoggerInstance();G||(G="error"),(typeof G=="function"?G:q[G])(n.help())},n.functionDescription=G=>["(",G.name?e.Parser.decamelize(G.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(q,le){let ie="",V=le||", ",H=[].concat(q);return!q||!H.length||H.forEach(z=>{ie.length&&(ie+=V),ie+=JSON.stringify(z)}),ie},"stringifiedValues");function M(G,q){let le=`[${r("default:")} `;if(G===void 0&&!q)return null;if(q)le+=q;else switch(typeof G){case"string":le+=`"${G}"`;break;case"object":le+=JSON.stringify(G);break;default:le+=G}return`${le}]`}s(M,"defaultString");function J(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(J,"windowWidth");let se=null;n.version=G=>{se=G},n.showVersion=G=>{let q=t.getInternalMethods().getLoggerInstance();G||(G="error"),(typeof G=="function"?G:q[G])(se)},n.reset=s(function(q){return o=null,l=!1,u=[],f=!1,g=[],p=[],m=[],h=oI(h,le=>!q[le]),n},"reset");let K=[];return n.freeze=s(function(){K.push({failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(q=!1){let le=K.pop();le&&(q?(h={...le.descriptions,...h},m=[...le.commands,...m],u=[...le.usages,...u],p=[...le.examples,...p],g=[...le.epilogs,...g]):{failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h}=le)},"unfreeze"),n}s(qUe,"usage");function fhe(t){return typeof t=="object"}s(fhe,"isIndentedText");function Q9t(t,e){return fhe(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(Q9t,"addIndentation");function UUe(t){return fhe(t)?t.indentation:0}s(UUe,"getIndentation");function Rz(t){return fhe(t)?t.text:t}s(Rz,"getText");d();d();var HUe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,WUe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var phe=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,c;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(c=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&c!==void 0?c:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let c=0,l=e.length;c<l;++c)if(o[e[c]]&&o[e[c]].builder){let u=o[e[c]].builder;if(Sz(u)){this.indexAfterLastReset=c+1;let f=this.yargs.getInternalMethods().reset();return u(f,!0),f.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=iI(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let c=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+c)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(c=>{let l=!!o.configuration["boolean-negation"]&&o.boolean.includes(c);!a.includes(c)&&!o.hiddenOptions.includes(c)&&!this.argsContainKey(r,c,l)&&this.completeOptionKey(c,e,i,l&&!!o.default[c])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),c=o[n._.length-a-1];if(!c)return;let l=this.yargs.getOptions().choices[c]||[];for(let u of l)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],c;for(let l of a)if(Object.prototype.hasOwnProperty.call(o.key,l)&&Array.isArray(o.choices[l])){c=o.choices[l];break}if(c)return c.filter(l=>!n||l.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,c,l;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(x=>{let b=h[x];return typeof b=="string"&&b.length>0}),y=g?h[g]:void 0,E=(l=(c=h[e])!==null&&c!==void 0?c:y)!==null&&l!==void 0?l:"";u=`${e.replace(/:/g,"\\:")}:${E.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let f=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!f(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(Nd(this.customCompletionFunction,null,this.shim),q9t(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return Ws(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return H9t(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return Ws(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?WUe:HUe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function GUe(t,e,r,n){return new phe(t,e,r,n)}s(GUe,"completion");function q9t(t){return t.length<3}s(q9t,"isSyncCompletionFunction");function H9t(t){return t.length>3}s(H9t,"isFallbackCompletionFunction");d();d();function jUe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(jUe,"levenshtein");var VUe=["$0","--","_"];function $Ue(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let E of Object.keys(h)){let x=h[E];x&&g.indexOf(x)<0&&g.push(x)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var E;let x=t.getInternalMethods().getCommandInstance().getCommands(),b=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!VUe.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&b.push(k)}),y&&(_.commands.length>0||x.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{x.includes(""+k)||b.push(""+k)}),y){let P=((E=t.getDemandedCommands()._)===null||E===void 0?void 0:E.max)||0,N=_.commands.length+P;N<p._.length&&p._.slice(N).forEach(M=>{M=String(M),!_.commands.includes(M)&&!b.includes(M)&&b.push(M)})}b.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",b.length,b.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(E=>{VUe.indexOf(E)===-1&&Object.prototype.hasOwnProperty.call(m.choices,E)&&[].concat(p[E]).forEach(x=>{m.choices[E].indexOf(x)===-1&&x!==void 0&&(h[E]=(h[E]||[]).concat(x))})});let g=Object.keys(h);if(!g.length)return;let y=n("Invalid values:");g.forEach(E=>{y+=`
  ${n("Argument: %s, Given: %s, Choices: %s",E,e.stringifiedValues(h[E]),e.stringifiedValues(m.choices[E]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){xr("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(Nd(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function c(f,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=f._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(f,p)):p=Object.prototype.hasOwnProperty.call(f,p),p}s(c,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let E=g,x=y;E=c(p,E),y=c(p,y),E&&!y&&m.push(` ${g} -> ${x}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let l={};o.conflicts=s(function(p,m){xr("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),l[p]||(l[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):l[p].push(m))},"conflicts"),o.getConflicting=()=>l,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{l[m]&&l[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(m=>{l[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((E,x)=>x.length-E.length);let g=null,y=1/0;for(let E=0,x;(x=m[E])!==void 0;E++){let b=jUe(p,x);b<=3&&b<y&&(y=b,g=x)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=oI(a,m=>!p[m]),l=oI(l,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:l})},"freeze"),o.unfreeze=s(function(){let p=u.pop();Nd(p,void 0,r),{implied:a,conflicting:l}=p},"unfreeze"),o}s($Ue,"validation");d();var mhe=[],_M;function kz(t,e,r,n){_M=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=G9t(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}W9t(a),mhe.push(a),i=o?JSON.parse(_M.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=kz(i,_M.path.dirname(a),r,_M)}return mhe=[],r?zUe(i,t):Object.assign({},i,t)}s(kz,"applyExtends");function W9t(t){if(mhe.indexOf(t)>-1)throw new Hs(`Circular extended configurations: '${t}'.`)}s(W9t,"checkForCircularExtends");function G9t(t,e){return _M.path.resolve(t,e)}s(G9t,"getPathToDefaultConfig");function zUe(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=zUe(t[i],e[i]):r[i]=e[i];return r}s(zUe,"mergeDeep");var _r=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},pe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},sc,YS,SM,Cm,H0,Pz,aI,KS,Bz,Em,Dz,vm,xy,W0,xm,Nz,JP,wl,Hr,Lz,Mz,G0,JS,XP,XS,cI,Fz,Un,ZS,e2,t2,Zn,Oz,by,Oa;function mqe(t){return(e=[],r=t.process.cwd(),n)=>{let i=new The(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(mqe,"YargsFactory");var YUe=Symbol("copyDoubleDash"),KUe=Symbol("copyDoubleDash"),hhe=Symbol("deleteFromParserHintObject"),JUe=Symbol("emitWarning"),XUe=Symbol("freeze"),ZUe=Symbol("getDollarZero"),r2=Symbol("getParserConfiguration"),eqe=Symbol("getUsageConfiguration"),ghe=Symbol("guessLocale"),tqe=Symbol("guessVersion"),rqe=Symbol("parsePositionalNumbers"),Ahe=Symbol("pkgUp"),lI=Symbol("populateParserHintArray"),ZP=Symbol("populateParserHintSingleValueDictionary"),yhe=Symbol("populateParserHintArrayDictionary"),Che=Symbol("populateParserHintDictionary"),Ehe=Symbol("sanitizeKey"),vhe=Symbol("setKey"),xhe=Symbol("unfreeze"),nqe=Symbol("validateAsync"),iqe=Symbol("getCommandInstance"),oqe=Symbol("getContext"),sqe=Symbol("getHasOutput"),aqe=Symbol("getLoggerInstance"),cqe=Symbol("getParseContext"),lqe=Symbol("getUsageInstance"),uqe=Symbol("getValidationInstance"),Qz=Symbol("hasParseCallback"),dqe=Symbol("isGlobalContext"),n2=Symbol("postProcess"),fqe=Symbol("rebase"),bhe=Symbol("reset"),RM=Symbol("runYargsParserAndExecuteCommands"),Ihe=Symbol("runValidation"),pqe=Symbol("setHasOutput"),i2=Symbol("kTrackManuallySetKeys"),The=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,sc.set(this,void 0),YS.set(this,void 0),SM.set(this,{commands:[],fullCommands:[]}),Cm.set(this,null),H0.set(this,null),Pz.set(this,"show-hidden"),aI.set(this,null),KS.set(this,!0),Bz.set(this,{}),Em.set(this,!0),Dz.set(this,[]),vm.set(this,void 0),xy.set(this,{}),W0.set(this,!1),xm.set(this,null),Nz.set(this,!0),JP.set(this,void 0),wl.set(this,""),Hr.set(this,void 0),Lz.set(this,void 0),Mz.set(this,{}),G0.set(this,null),JS.set(this,null),XP.set(this,{}),XS.set(this,{}),cI.set(this,void 0),Fz.set(this,!1),Un.set(this,void 0),ZS.set(this,!1),e2.set(this,!1),t2.set(this,!1),Zn.set(this,void 0),Oz.set(this,{}),by.set(this,null),Oa.set(this,void 0),_r(this,Un,i,"f"),_r(this,cI,e,"f"),_r(this,YS,r,"f"),_r(this,Lz,n,"f"),_r(this,vm,new _z(this),"f"),this.$0=this[ZUe](),this[bhe](),_r(this,sc,pe(this,sc,"f"),"f"),_r(this,Zn,pe(this,Zn,"f"),"f"),_r(this,Oa,pe(this,Oa,"f"),"f"),_r(this,Hr,pe(this,Hr,"f"),"f"),pe(this,Hr,"f").showHiddenOpt=pe(this,Pz,"f"),_r(this,JP,this[KUe](),"f")}addHelpOpt(e,r){let n="help";return xr("[string|boolean] [string]",[e,r],arguments.length),pe(this,xm,"f")&&(this[hhe](pe(this,xm,"f")),_r(this,xm,null,"f")),e===!1&&r===void 0?this:(_r(this,xm,typeof e=="string"?e:n,"f"),this.boolean(pe(this,xm,"f")),this.describe(pe(this,xm,"f"),r||pe(this,Zn,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(xr("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:pe(this,Pz,"f");return this.boolean(n),this.describe(n,r||pe(this,Zn,"f").deferY18nLookup("Show hidden options")),pe(this,Hr,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return xr("<object|string|array> [string|array]",[e,r],arguments.length),this[yhe](this.alias.bind(this),"alias",e,r),this}array(e){return xr("<array|string>",[e],arguments.length),this[lI]("array",e),this[i2](e),this}boolean(e){return xr("<array|string>",[e],arguments.length),this[lI]("boolean",e),this[i2](e),this}check(e,r){return xr("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>zS(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&pe(this,Zn,"f").fail(o.toString(),o):pe(this,Zn,"f").fail(pe(this,Un,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(pe(this,Zn,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return xr("<object|string|array> [string|array]",[e,r],arguments.length),this[yhe](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(xr("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new Hs("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new Hs("coerce callback must be provided");return pe(this,Hr,"f").key[e]=!0,pe(this,vm,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?zS(()=>(o=i.getAliases(),r(n[e])),c=>{n[e]=c;let l=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&l!==!0)for(let u of o[e])n[u]=c;return n},c=>{throw new Hs(c.message)}):n},e),this}conflicts(e,r){return xr("<string|object> [string|array]",[e,r],arguments.length),pe(this,Oa,"f").conflicts(e,r),this}config(e="config",r,n){return xr("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=kz(e,pe(this,YS,"f"),this[r2]()["deep-merge-config"]||!1,pe(this,Un,"f")),pe(this,Hr,"f").configObjects=(pe(this,Hr,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||pe(this,Zn,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{pe(this,Hr,"f").config[i]=n||!0}),this)}completion(e,r,n){return xr("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),_r(this,H0,e||pe(this,H0,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(pe(this,H0,"f"),r),n&&pe(this,Cm,"f").registerFunction(n),this}command(e,r,n,i,o,a){return xr("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),pe(this,sc,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){xr("<string> [object]",[e,r],arguments.length);let n=pe(this,Lz,"f")||pe(this,Un,"f").require;return pe(this,sc,"f").addDirectory(e,n,pe(this,Un,"f").getCallerFile(),r),this}count(e){return xr("<array|string>",[e],arguments.length),this[lI]("count",e),this[i2](e),this}default(e,r,n){return xr("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(lhe(e,pe(this,Un,"f")),pe(this,Hr,"f").defaultDescription[e]=n),typeof r=="function"&&(lhe(e,pe(this,Un,"f")),pe(this,Hr,"f").defaultDescription[e]||(pe(this,Hr,"f").defaultDescription[e]=pe(this,Zn,"f").functionDescription(r)),r=r.call()),this[ZP](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return xr("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),pe(this,Hr,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{Nd(n,!0,pe(this,Un,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(Nd(n,!0,pe(this,Un,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{Nd(n,!0,pe(this,Un,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return xr("<object|string|array> [string]",[e,r],arguments.length),this[ZP](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return xr("<string> [string|boolean]",[e,r],arguments.length),pe(this,Hr,"f").deprecatedOptions[e]=r,this}describe(e,r){return xr("<object|string|array> [string]",[e,r],arguments.length),this[vhe](e,!0),pe(this,Zn,"f").describe(e,r),this}detectLocale(e){return xr("<boolean>",[e],arguments.length),_r(this,KS,e,"f"),this}env(e){return xr("[string|boolean]",[e],arguments.length),e===!1?delete pe(this,Hr,"f").envPrefix:pe(this,Hr,"f").envPrefix=e||"",this}epilogue(e){return xr("<string>",[e],arguments.length),pe(this,Zn,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return xr("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):pe(this,Zn,"f").example(e,r),this}exit(e,r){_r(this,W0,!0,"f"),_r(this,aI,r,"f"),pe(this,Em,"f")&&pe(this,Un,"f").process.exit(e)}exitProcess(e=!0){return xr("[boolean]",[e],arguments.length),_r(this,Em,e,"f"),this}fail(e){if(xr("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new Hs("Invalid first argument. Expected function or boolean 'false'");return pe(this,Zn,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return xr("<array> [function]",[e,r],arguments.length),r?pe(this,Cm,"f").getCompletion(e,r):new Promise((n,i)=>{pe(this,Cm,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return xr([],0),pe(this,Hr,"f").demandedOptions}getDemandedCommands(){return xr([],0),pe(this,Hr,"f").demandedCommands}getDeprecatedOptions(){return xr([],0),pe(this,Hr,"f").deprecatedOptions}getDetectLocale(){return pe(this,KS,"f")}getExitProcess(){return pe(this,Em,"f")}getGroups(){return Object.assign({},pe(this,xy,"f"),pe(this,XS,"f"))}getHelp(){if(_r(this,W0,!0,"f"),!pe(this,Zn,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[RM](pe(this,cI,"f"),void 0,void 0,0,!0);if(Ws(r))return r.then(()=>pe(this,Zn,"f").help())}let e=pe(this,sc,"f").runDefaultBuilderOn(this);if(Ws(e))return e.then(()=>pe(this,Zn,"f").help())}return Promise.resolve(pe(this,Zn,"f").help())}getOptions(){return pe(this,Hr,"f")}getStrict(){return pe(this,ZS,"f")}getStrictCommands(){return pe(this,e2,"f")}getStrictOptions(){return pe(this,t2,"f")}global(e,r){return xr("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?pe(this,Hr,"f").local=pe(this,Hr,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{pe(this,Hr,"f").local.includes(n)||pe(this,Hr,"f").local.push(n)}),this}group(e,r){xr("<string|array> <string>",[e,r],arguments.length);let n=pe(this,XS,"f")[r]||pe(this,xy,"f")[r];pe(this,XS,"f")[r]&&delete pe(this,XS,"f")[r];let i={};return pe(this,xy,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return xr("<string>",[e],arguments.length),pe(this,Hr,"f").hiddenOptions.push(e),this}implies(e,r){return xr("<string|object> [number|string|array]",[e,r],arguments.length),pe(this,Oa,"f").implies(e,r),this}locale(e){return xr("[string]",[e],arguments.length),e===void 0?(this[ghe](),pe(this,Un,"f").y18n.getLocale()):(_r(this,KS,!1,"f"),pe(this,Un,"f").y18n.setLocale(e),this)}middleware(e,r,n){return pe(this,vm,"f").addMiddleware(e,!!r,n)}nargs(e,r){return xr("<string|object|array> [number]",[e,r],arguments.length),this[ZP](this.nargs.bind(this),"narg",e,r),this}normalize(e){return xr("<array|string>",[e],arguments.length),this[lI]("normalize",e),this}number(e){return xr("<array|string>",[e],arguments.length),this[lI]("number",e),this[i2](e),this}option(e,r){if(xr("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[i2](e),pe(this,by,"f")&&(e==="version"||r?.alias==="version")&&this[JUe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),pe(this,Hr,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(pe(this,Hr,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=pe(this,Zn,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){xr("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[XUe](),typeof e>"u"&&(e=pe(this,cI,"f")),typeof r=="object"&&(_r(this,JS,r,"f"),r=n),typeof r=="function"&&(_r(this,G0,r,"f"),r=!1),r||_r(this,cI,e,"f"),pe(this,G0,"f")&&_r(this,Em,!1,"f");let i=this[RM](e,!!r),o=this.parsed;return pe(this,Cm,"f").setParsed(this.parsed),Ws(i)?i.then(a=>(pe(this,G0,"f")&&pe(this,G0,"f").call(this,pe(this,aI,"f"),a,pe(this,wl,"f")),a)).catch(a=>{throw pe(this,G0,"f")&&pe(this,G0,"f")(a,this.parsed.argv,pe(this,wl,"f")),a}).finally(()=>{this[xhe](),this.parsed=o}):(pe(this,G0,"f")&&pe(this,G0,"f").call(this,pe(this,aI,"f"),i,pe(this,wl,"f")),this[xhe](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return Ws(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(Ws(i))throw new Hs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return xr("<object>",[e],arguments.length),_r(this,Mz,e,"f"),this}pkgConf(e,r){xr("<string> [string]",[e,r],arguments.length);let n=null,i=this[Ahe](r||pe(this,YS,"f"));return i[e]&&typeof i[e]=="object"&&(n=kz(i[e],r||pe(this,YS,"f"),this[r2]()["deep-merge-config"]||!1,pe(this,Un,"f")),pe(this,Hr,"f").configObjects=(pe(this,Hr,"f").configObjects||[]).concat(n)),this}positional(e,r){xr("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=oI(r,(a,c)=>a==="type"&&!["string","number","boolean"].includes(c)?!1:n.includes(a));let i=pe(this,SM,"f").fullCommands[pe(this,SM,"f").fullCommands.length-1],o=i?pe(this,sc,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return YP(o).forEach(a=>{let c=o[a];Array.isArray(c)?c.indexOf(e)!==-1&&(r[a]=!0):c[e]&&!(a in r)&&(r[a]=c[e])}),this.group(e,pe(this,Zn,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return xr("[boolean]",[e],arguments.length),_r(this,Fz,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return xr("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&pe(this,Hr,"f").narg[e]?this:(this[ZP](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return xr("[string] [string]",[e,r],arguments.length),e=e||this.$0,pe(this,JP,"f").log(pe(this,Cm,"f").generateCompletionScript(e,r||pe(this,H0,"f")||"completion")),this}showHelp(e){if(xr("[string|function]",[e],arguments.length),_r(this,W0,!0,"f"),!pe(this,Zn,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[RM](pe(this,cI,"f"),void 0,void 0,0,!0);if(Ws(n))return n.then(()=>{pe(this,Zn,"f").showHelp(e)}),this}let r=pe(this,sc,"f").runDefaultBuilderOn(this);if(Ws(r))return r.then(()=>{pe(this,Zn,"f").showHelp(e)}),this}return pe(this,Zn,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return xr("[boolean|string] [string]",[e,r],arguments.length),pe(this,Zn,"f").showHelpOnFail(e,r),this}showVersion(e){return xr("[string|function]",[e],arguments.length),pe(this,Zn,"f").showVersion(e),this}skipValidation(e){return xr("<array|string>",[e],arguments.length),this[lI]("skipValidation",e),this}strict(e){return xr("[boolean]",[e],arguments.length),_r(this,ZS,e!==!1,"f"),this}strictCommands(e){return xr("[boolean]",[e],arguments.length),_r(this,e2,e!==!1,"f"),this}strictOptions(e){return xr("[boolean]",[e],arguments.length),_r(this,t2,e!==!1,"f"),this}string(e){return xr("<array|string>",[e],arguments.length),this[lI]("string",e),this[i2](e),this}terminalWidth(){return xr([],0),pe(this,Un,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return xr("<object>",[e],arguments.length),_r(this,KS,!1,"f"),pe(this,Un,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(xr("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(Nd(e,null,pe(this,Un,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new Hs(".usage() description must start with $0 if being used as alias for .command()")}else return pe(this,Zn,"f").usage(e),this}usageConfiguration(e){return xr("<object>",[e],arguments.length),_r(this,Oz,e,"f"),this}version(e,r,n){let i="version";if(xr("[boolean|string] [string] [string]",[e,r,n],arguments.length),pe(this,by,"f")&&(this[hhe](pe(this,by,"f")),pe(this,Zn,"f").version(void 0),_r(this,by,null,"f")),arguments.length===0)n=this[tqe](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return _r(this,by,typeof e=="string"?e:i,"f"),r=r||pe(this,Zn,"f").deferY18nLookup("Show version number"),pe(this,Zn,"f").version(n||void 0),this.boolean(pe(this,by,"f")),this.describe(pe(this,by,"f"),r),this}wrap(e){return xr("<number|null|undefined>",[e],arguments.length),pe(this,Zn,"f").wrap(e),this}[(sc=new WeakMap,YS=new WeakMap,SM=new WeakMap,Cm=new WeakMap,H0=new WeakMap,Pz=new WeakMap,aI=new WeakMap,KS=new WeakMap,Bz=new WeakMap,Em=new WeakMap,Dz=new WeakMap,vm=new WeakMap,xy=new WeakMap,W0=new WeakMap,xm=new WeakMap,Nz=new WeakMap,JP=new WeakMap,wl=new WeakMap,Hr=new WeakMap,Lz=new WeakMap,Mz=new WeakMap,G0=new WeakMap,JS=new WeakMap,XP=new WeakMap,XS=new WeakMap,cI=new WeakMap,Fz=new WeakMap,Un=new WeakMap,ZS=new WeakMap,e2=new WeakMap,t2=new WeakMap,Zn=new WeakMap,Oz=new WeakMap,by=new WeakMap,Oa=new WeakMap,YUe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[KUe](){return{log:s((...e)=>{this[Qz]()||console.log(...e),_r(this,W0,!0,"f"),pe(this,wl,"f").length&&_r(this,wl,pe(this,wl,"f")+`
`,"f"),_r(this,wl,pe(this,wl,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[Qz]()||console.error(...e),_r(this,W0,!0,"f"),pe(this,wl,"f").length&&_r(this,wl,pe(this,wl,"f")+`
`,"f"),_r(this,wl,pe(this,wl,"f")+e.join(" "),"f")},"error")}}[hhe](e){YP(pe(this,Hr,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=pe(this,Hr,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete pe(this,Zn,"f").getDescriptions()[e]}[JUe](e,r,n){pe(this,Bz,"f")[n]||(pe(this,Un,"f").process.emitWarning(e,r),pe(this,Bz,"f")[n]=!0)}[XUe](){pe(this,Dz,"f").push({options:pe(this,Hr,"f"),configObjects:pe(this,Hr,"f").configObjects.slice(0),exitProcess:pe(this,Em,"f"),groups:pe(this,xy,"f"),strict:pe(this,ZS,"f"),strictCommands:pe(this,e2,"f"),strictOptions:pe(this,t2,"f"),completionCommand:pe(this,H0,"f"),output:pe(this,wl,"f"),exitError:pe(this,aI,"f"),hasOutput:pe(this,W0,"f"),parsed:this.parsed,parseFn:pe(this,G0,"f"),parseContext:pe(this,JS,"f")}),pe(this,Zn,"f").freeze(),pe(this,Oa,"f").freeze(),pe(this,sc,"f").freeze(),pe(this,vm,"f").freeze()}[ZUe](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(pe(this,Un,"f").process.argv()[0])?r=pe(this,Un,"f").process.argv().slice(1,2):r=pe(this,Un,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[fqe](pe(this,YS,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),pe(this,Un,"f").getEnv("_")&&pe(this,Un,"f").getProcessArgvBin()===pe(this,Un,"f").getEnv("_")&&(e=pe(this,Un,"f").getEnv("_").replace(`${pe(this,Un,"f").path.dirname(pe(this,Un,"f").process.execPath())}/`,"")),e}[r2](){return pe(this,Mz,"f")}[eqe](){return pe(this,Oz,"f")}[ghe](){if(!pe(this,KS,"f"))return;let e=pe(this,Un,"f").getEnv("LC_ALL")||pe(this,Un,"f").getEnv("LC_MESSAGES")||pe(this,Un,"f").getEnv("LANG")||pe(this,Un,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[tqe](){return this[Ahe]().version||"unknown"}[rqe](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)pe(this,Un,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[Ahe](e){let r=e||"*";if(pe(this,XP,"f")[r])return pe(this,XP,"f")[r];let n={};try{let i=e||pe(this,Un,"f").mainFilename;!e&&pe(this,Un,"f").path.extname(i)&&(i=pe(this,Un,"f").path.dirname(i));let o=pe(this,Un,"f").findUp(i,(a,c)=>{if(c.includes("package.json"))return"package.json"});Nd(o,void 0,pe(this,Un,"f")),n=JSON.parse(pe(this,Un,"f").readFileSync(o,"utf8"))}catch{}return pe(this,XP,"f")[r]=n||{},pe(this,XP,"f")[r]}[lI](e,r){r=[].concat(r),r.forEach(n=>{n=this[Ehe](n),pe(this,Hr,"f")[e].push(n)})}[ZP](e,r,n,i){this[Che](e,r,n,i,(o,a,c)=>{pe(this,Hr,"f")[o][a]=c})}[yhe](e,r,n,i){this[Che](e,r,n,i,(o,a,c)=>{pe(this,Hr,"f")[o][a]=(pe(this,Hr,"f")[o][a]||[]).concat(c)})}[Che](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of YP(n))e(a,n[a]);else o(r,this[Ehe](n),i)}[Ehe](e){return e==="__proto__"?"___proto___":e}[vhe](e,r){return this[ZP](this[vhe].bind(this),"key",e,r),this}[xhe](){var e,r,n,i,o,a,c,l,u,f,p,m;let h=pe(this,Dz,"f").pop();Nd(h,void 0,pe(this,Un,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,c=this,l=this,u=this,f=this,p=this,m=this,{options:{set value(y){_r(e,Hr,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){_r(r,Em,y,"f")}}.value,groups:{set value(y){_r(n,xy,y,"f")}}.value,output:{set value(y){_r(i,wl,y,"f")}}.value,exitError:{set value(y){_r(o,aI,y,"f")}}.value,hasOutput:{set value(y){_r(a,W0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){_r(c,ZS,y,"f")}}.value,strictCommands:{set value(y){_r(l,e2,y,"f")}}.value,strictOptions:{set value(y){_r(u,t2,y,"f")}}.value,completionCommand:{set value(y){_r(f,H0,y,"f")}}.value,parseFn:{set value(y){_r(p,G0,y,"f")}}.value,parseContext:{set value(y){_r(m,JS,y,"f")}}.value}=h,pe(this,Hr,"f").configObjects=g,pe(this,Zn,"f").unfreeze(),pe(this,Oa,"f").unfreeze(),pe(this,sc,"f").unfreeze(),pe(this,vm,"f").unfreeze()}[nqe](e,r){return zS(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[iqe].bind(this),getContext:this[oqe].bind(this),getHasOutput:this[sqe].bind(this),getLoggerInstance:this[aqe].bind(this),getParseContext:this[cqe].bind(this),getParserConfiguration:this[r2].bind(this),getUsageConfiguration:this[eqe].bind(this),getUsageInstance:this[lqe].bind(this),getValidationInstance:this[uqe].bind(this),hasParseCallback:this[Qz].bind(this),isGlobalContext:this[dqe].bind(this),postProcess:this[n2].bind(this),reset:this[bhe].bind(this),runValidation:this[Ihe].bind(this),runYargsParserAndExecuteCommands:this[RM].bind(this),setHasOutput:this[pqe].bind(this)}}[iqe](){return pe(this,sc,"f")}[oqe](){return pe(this,SM,"f")}[sqe](){return pe(this,W0,"f")}[aqe](){return pe(this,JP,"f")}[cqe](){return pe(this,JS,"f")||{}}[lqe](){return pe(this,Zn,"f")}[uqe](){return pe(this,Oa,"f")}[Qz](){return!!pe(this,G0,"f")}[dqe](){return pe(this,Nz,"f")}[n2](e,r,n,i){return n||Ws(e)||(r||(e=this[YUe](e)),(this[r2]()["parse-positional-numbers"]||this[r2]()["parse-positional-numbers"]===void 0)&&(e=this[rqe](e)),i&&(e=$S(e,this,pe(this,vm,"f").getMiddleware(),!1))),e}[bhe](e={}){_r(this,Hr,pe(this,Hr,"f")||{},"f");let r={};r.local=pe(this,Hr,"f").local||[],r.configObjects=pe(this,Hr,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(c=>{n[c]=!0})}),Object.assign(pe(this,XS,"f"),Object.keys(pe(this,xy,"f")).reduce((a,c)=>{let l=pe(this,xy,"f")[c].filter(u=>!(u in n));return l.length>0&&(a[c]=l),a},{})),_r(this,xy,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(pe(this,Hr,"f")[a]||[]).filter(c=>!n[c])}),o.forEach(a=>{r[a]=oI(pe(this,Hr,"f")[a],c=>!n[c])}),r.envPrefix=pe(this,Hr,"f").envPrefix,_r(this,Hr,r,"f"),_r(this,Zn,pe(this,Zn,"f")?pe(this,Zn,"f").reset(n):qUe(this,pe(this,Un,"f")),"f"),_r(this,Oa,pe(this,Oa,"f")?pe(this,Oa,"f").reset(n):$Ue(this,pe(this,Zn,"f"),pe(this,Un,"f")),"f"),_r(this,sc,pe(this,sc,"f")?pe(this,sc,"f").reset():OUe(pe(this,Zn,"f"),pe(this,Oa,"f"),pe(this,vm,"f"),pe(this,Un,"f")),"f"),pe(this,Cm,"f")||_r(this,Cm,GUe(this,pe(this,Zn,"f"),pe(this,sc,"f"),pe(this,Un,"f")),"f"),pe(this,vm,"f").reset(),_r(this,H0,null,"f"),_r(this,wl,"","f"),_r(this,aI,null,"f"),_r(this,W0,!1,"f"),this.parsed=!1,this}[fqe](e,r){return pe(this,Un,"f").path.relative(e,r)}[RM](e,r,n,i=0,o=!1){let a=!!n||o;e=e||pe(this,cI,"f"),pe(this,Hr,"f").__=pe(this,Un,"f").y18n.__,pe(this,Hr,"f").configuration=this[r2]();let c=!!pe(this,Hr,"f").configuration["populate--"],l=Object.assign({},pe(this,Hr,"f").configuration,{"populate--":!0}),u=pe(this,Un,"f").Parser.detailed(e,Object.assign({},pe(this,Hr,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),f=Object.assign(u.argv,pe(this,JS,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(f).forEach(y=>{y===pe(this,xm,"f")&&f[y]?h=!0:y===pe(this,by,"f")&&f[y]&&(g=!0)}),f.$0=this.$0,this.parsed=u,i===0&&pe(this,Zn,"f").clearCachedHelpMessage();try{if(this[ghe](),r)return this[n2](f,c,!!n,!1);pe(this,xm,"f")&&[pe(this,xm,"f")].concat(m[pe(this,xm,"f")]||[]).filter(_=>_.length>1).includes(""+f._[f._.length-1])&&(f._.pop(),h=!0),_r(this,Nz,!1,"f");let y=pe(this,sc,"f").getCommands(),E=pe(this,Cm,"f").completionKey in f,x=h||E||o;if(f._.length){if(y.length){let b;for(let _=i||0,k;f._[_]!==void 0;_++)if(k=String(f._[_]),y.includes(k)&&k!==pe(this,H0,"f")){let P=pe(this,sc,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[n2](P,c,!!n,!1)}else if(!b&&k!==pe(this,H0,"f")){b=k;break}!pe(this,sc,"f").hasDefaultCommand()&&pe(this,Fz,"f")&&b&&!x&&pe(this,Oa,"f").recommendCommands(b,y)}pe(this,H0,"f")&&f._.includes(pe(this,H0,"f"))&&!E&&(pe(this,Em,"f")&&sI(!0),this.showCompletionScript(),this.exit(0))}if(pe(this,sc,"f").hasDefaultCommand()&&!x){let b=pe(this,sc,"f").runCommand(null,this,u,0,o,h||g||o);return this[n2](b,c,!!n,!1)}if(E){pe(this,Em,"f")&&sI(!0),e=[].concat(e);let b=e.slice(e.indexOf(`--${pe(this,Cm,"f").completionKey}`)+1);return pe(this,Cm,"f").getCompletion(b,(_,k)=>{if(_)throw new Hs(_.message);(k||[]).forEach(P=>{pe(this,JP,"f").log(P)}),this.exit(0)}),this[n2](f,!c,!!n,!1)}if(pe(this,W0,"f")||(h?(pe(this,Em,"f")&&sI(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(pe(this,Em,"f")&&sI(!0),a=!0,pe(this,Zn,"f").showVersion("log"),this.exit(0))),!a&&pe(this,Hr,"f").skipValidation.length>0&&(a=Object.keys(f).some(b=>pe(this,Hr,"f").skipValidation.indexOf(b)>=0&&f[b]===!0)),!a){if(u.error)throw new Hs(u.error.message);if(!E){let b=this[Ihe](m,{},u.error);n||(p=$S(f,this,pe(this,vm,"f").getMiddleware(),!0)),p=this[nqe](b,p??f),Ws(p)&&!n&&(p=p.then(()=>$S(f,this,pe(this,vm,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof Hs)pe(this,Zn,"f").fail(y.message,y);else throw y}return this[n2](p??f,c,!!n,!0)}[Ihe](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new Hs(n.message);pe(this,Oa,"f").nonOptionCount(a),pe(this,Oa,"f").requiredArguments(a,o);let c=!1;pe(this,e2,"f")&&(c=pe(this,Oa,"f").unknownCommands(a)),pe(this,ZS,"f")&&!c?pe(this,Oa,"f").unknownArguments(a,e,r,!!i):pe(this,t2,"f")&&pe(this,Oa,"f").unknownArguments(a,e,{},!1,!1),pe(this,Oa,"f").limitedChoices(a),pe(this,Oa,"f").implications(a),pe(this,Oa,"f").conflicting(a)}}[pqe](){_r(this,W0,!0,"f")}[i2](e){if(typeof e=="string")pe(this,Hr,"f").key[e]=!0;else for(let r of e)pe(this,Hr,"f").key[r]=!0}};function QUe(t){return!!t&&typeof t.getInternalMethods=="function"}s(QUe,"isYargsInstance");var j9t=mqe(DUe),hqe=j9t;d();d();d();var gqe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function Aqe(t,e,r){let n=dn.createAndMarkAsIssued({authSource:e,authType:r});return Dt(t,gqe.NewGitHubLogin,n)}s(Aqe,"telemetryNewGitHubLogin");function yqe(t,e){let r=dn.createAndMarkAsIssued({authType:e});return Dt(t,gqe.GitHubLoginSuccess,r)}s(yqe,"telemetryGitHubLoginSuccess");var whe=class extends Ps{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function V9t(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...Rh(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(ai).fetch(o,n)}catch(a){throw a instanceof Error&&a6(a)?new Ps(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new Ps(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(V9t,"requestDeviceFlowStage1");async function $9t(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...Rh(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(ai).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new whe(a):new Ps(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s($9t,"requestDeviceFlowStage2");async function z9t(t,e){yqe(t,"deviceFlow");let n=await(await Yp(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new Ps(`Error retrieving user information: ${String(n.errors)}`);return n}s(z9t,"requestUserInfo");var o2=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,r,n){try{return await this.getTokenUnguarded(e,r,n)}catch(i){throw e.get(Ed).notifyUser(e,i),i}}async getTokenUnguarded(e,r,n){Aqe(e,"unknown","deviceFlow");let i=await V9t(e,r,n),o=(async()=>{let a=i.expires_in,c,l=i.interval;for(;a>0;){await new Promise(f=>setTimeout(f,1e3*l));let u=await $9t(e,i.device_code,r,n);if(a-=l,c=u.access_token,c){let f=await z9t(e,{...n,accessToken:c});return{...n,githubAppId:r,login:f.login,accessToken:c}}l=u.interval??l}throw new Ps("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};d();var j0=class{static{s(this,"CitationManager")}},Uz=class extends j0{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};d();d();d();var Y9t={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},us=class{constructor(){this.capabilities={...Y9t}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}}getCapabilities(){return this.capabilities}};d();d();d();d();function _he(t,e){let r=fg(t,e);return r===-1?void 0:t[r]}s(_he,"findLastMonotonous");function fg(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(fg,"findLastIdxMonotonous");function e3(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(e3,"findFirstIdxMonotonousOrArrLen");var Cqe=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=fg(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};d();var She=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?qz.isErrorNoTelemetry(e)?new qz(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},Eqe=new She;function s2(t){Eqe.onUnexpectedError(t)}s(s2,"onBugIndicatingError");function t3(t){K9t(t)||Eqe.onUnexpectedError(t)}s(t3,"onUnexpectedError");var Rhe="Canceled";function K9t(t){return t instanceof Iy?!0:t instanceof Error&&t.name===Rhe&&t.message===Rhe}s(K9t,"isCancellationError");var Iy=class extends Error{static{s(this,"CancellationError")}constructor(){super(Rhe),this.name=this.message}};function kM(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(kM,"illegalArgument");function vqe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(vqe,"illegalState");var qz=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},un=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function PM(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(PM,"equals");function*BM(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(BM,"groupAdjacentBy");function bqe(t){return t.filter(e=>!!e)}s(bqe,"coalesce");var Iqe;(c=>{function t(l){return l<0}c.isLessThan=t,s(t,"isLessThan");function e(l){return l<=0}c.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(l){return l>0}c.isGreaterThan=r,s(r,"isGreaterThan");function n(l){return l===0}c.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),c.greaterThan=1,c.lessThan=-1,c.neitherLessOrGreaterThan=0})(Iqe||={});function uI(t,e){return(r,n)=>e(t(r),t(n))}s(uI,"compareBy");var dI=s((t,e)=>t-e,"numberComparator");var Hz=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},xqe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||Iqe.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function Tqe(t,e){return t.reduce((r,n)=>r+e(n),0)}s(Tqe,"sumBy");d();function Rqe(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(Rqe,"groupBy");var _qe,Sqe,wqe=class{constructor(e,r){this.toKey=r;this._map=new Map;this[_qe]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(Sqe=Symbol.iterator,_qe=Symbol.toStringTag,Sqe)](){return this.values()}};d();function khe(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(khe,"createSingleCallFunction");d();var Phe;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}_.empty=r,s(r,"empty");function*n(k){yield k}_.single=n,s(n,"single");function i(k){return t(k)?k:n(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let P=k.length-1;P>=0;P--)yield k[P]}_.reverse=a,s(a,"reverse");function c(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=c,s(c,"isEmpty");function l(k){return k[Symbol.iterator]().next().value}_.first=l,s(l,"first");function u(k,P){let N=0;for(let M of k)if(P(M,N++))return!0;return!1}_.some=u,s(u,"some");function f(k,P){for(let N of k)if(P(N))return N}_.find=f,s(f,"find");function*p(k,P){for(let N of k)P(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,P){let N=0;for(let M of k)yield P(M,N++)}_.map=m,s(m,"map");function*h(k,P){let N=0;for(let M of k)yield*P(M,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let P of k)yield*P}_.concat=g,s(g,"concat");function y(k,P,N){let M=N;for(let J of k)M=P(M,J);return M}_.reduce=y,s(y,"reduce");function*E(k,P,N=k.length){for(P<-k.length&&(P=0),P<0&&(P+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);P<N;P++)yield k[P]}_.slice=E,s(E,"slice");function x(k,P=Number.POSITIVE_INFINITY){let N=[];if(P===0)return[N,k];let M=k[Symbol.iterator]();for(let J=0;J<P;J++){let se=M.next();if(se.done)return[N,_.empty()];N.push(se.value)}return[N,{[Symbol.iterator](){return M}}]}_.consume=x,s(x,"consume");async function b(k){let P=[];for await(let N of k)P.push(N);return Promise.resolve(P)}_.asyncToArray=b,s(b,"asyncToArray")})(Phe||={});d();var Bhe=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function X9t(t){return Array.isArray(t)}s(X9t,"isEntries");var Pqe,Wz=class t{constructor(e,r){this[Pqe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(X9t(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new Bhe(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(Pqe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},Bqe,kqe=class{constructor(e,r){this[Bqe]="ResourceSet";!e||typeof e=="function"?this._map=new Wz(e):(this._map=new Wz(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(Bqe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var Dqe,Dhe=class{constructor(){this[Dqe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(Dqe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},Nhe=class extends Dhe{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},Gz=class extends Nhe{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var jz=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var Z9t=!1,r3=null;var Nqe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,l).isSingleton);if(u.length===0)return;let f=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&f.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(l){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let f=l.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(f,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),f.reverse()}s(i,"getStackTracePath");let o=new jz;for(let l of n){let u=i(l);for(let f=0;f<=u.length;f++)o.add(u.slice(0,f).join(`
`),l)}n.sort(uI(l=>l.idx,dI));let a="",c=0;for(let l of n.slice(0,e)){c++;let u=i(l),f=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=Rqe([...g].map(E=>i(E)[p]),E=>E);delete y[u[p]];for(let[E,x]of Object.entries(y))f.unshift(`    - stacktraces of ${x.length} other leaks continue with ${E}`);f.unshift(m)}a+=`


==================== Leaking disposable ${c}/${n.length}: ${l.value.constructor.name} ====================
${f.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function eLt(t){r3=t}s(eLt,"setDisposableTracker");if(Z9t){let t="__is_disposable_tracked__";eLt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==ds.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==ds.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function n3(t){return r3?.trackDisposable(t),t}s(n3,"trackDisposable");function i3(t){r3?.markAsDisposed(t)}s(i3,"markAsDisposed");function Lhe(t,e){r3?.setParent(t,e)}s(Lhe,"setParentOfDisposable");function tLt(t,e){if(r3)for(let r of t)r3.setParent(r,e)}s(tLt,"setParentOfDisposables");function Lqe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(Lqe,"isDisposable");function Vz(t){if(Phe.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(Vz,"dispose");function Mqe(...t){let e=ac(()=>Vz(t));return tLt(t,e),e}s(Mqe,"combinedDisposable");function ac(t){let e=n3({dispose:khe(()=>{i3(e),t()})});return e}s(ac,"toDisposable");var mu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;n3(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(i3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Vz(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Lhe(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Lhe(e,null))}},ds=class{constructor(){this._store=new mu;n3(this),Lhe(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){i3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var bm=class extends ds{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ia(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",c=parseFloat(n.get("rem")||"0.0"),l=n.get("rst"),u;l?u=new Date(l):(u=new Date,u.setMonth(u.getMonth()+1));let f=Math.max(0,i*(1-c/100));this._quotaInfo={quota:i,used:f,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};d();var Fqe=Ne(require("events"));var $z="CompletionRequested",Ty=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new Fqe.default;notifyRequest(e,r,n,i,o){return this.#e.emit($z,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=Hu(this.ctx,e,`event.${$z}`);return this.#e.on($z,r),fn.Disposable.create(()=>this.#e.off($z,r))}};d();var Mhe=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},o3=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new Mhe(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};d();d();d();var zz=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=Uqe(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let c=Math.max(i.start.line,0),l=Math.max(i.end.line,0),u=this._lineOffsets,f=Oqe(n.text,!1,o);if(l-c===f.length)for(let m=0,h=f.length;m<h;m++)u[m+c+1]=f[m];else f.length<1e4?u.splice(c+1,l-c,...f):this._lineOffsets=u=u.slice(0,c+1).concat(f,u.slice(l+1));let p=n.text.length-(a-o);if(p!==0)for(let m=c+1+f.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Oqe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&Qqe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},fI;(function(t){function e(i,o,a,c){return new zz(i,o,a,c)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof zz)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),c=Fhe(o.map(rLt),(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),l=0,u=[];for(let f of c){let p=i.offsetAt(f.range.start);if(p<l)throw new Error("Overlapping edit");p>l&&u.push(a.substring(l,p)),f.newText.length&&u.push(f.newText),l=i.offsetAt(f.range.end)}return u.push(a.substr(l)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(fI||(fI={}));function Fhe(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);Fhe(n,e),Fhe(i,e);let o=0,a=0,c=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[c++]=n[o++]:t[c++]=i[a++];for(;o<n.length;)t[c++]=n[o++];for(;a<i.length;)t[c++]=i[a++];return t}s(Fhe,"mergeSort");function Oqe(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);Qqe(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(Oqe,"computeLineOffsets");function Qqe(t){return t===13||t===10}s(Qqe,"isEOL");function Uqe(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(Uqe,"getWellformedRange");function rLt(t){let e=Uqe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(rLt,"getWellformedEdit");d();var qqe;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(qqe||(qqe={}));var Ohe;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(Ohe||(Ohe={}));var Hqe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(Hqe||(Hqe={}));var Yz;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(Yz||(Yz={}));var Yu;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=Yz.MAX_VALUE),i===Number.MAX_VALUE&&(i=Yz.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.uinteger(i.line)&&$e.uinteger(i.character)}s(r,"is"),t.is=r})(Yu||(Yu={}));var bs;(function(t){function e(n,i,o,a){if($e.uinteger(n)&&$e.uinteger(i)&&$e.uinteger(o)&&$e.uinteger(a))return{start:Yu.create(n,i),end:Yu.create(o,a)};if(Yu.is(n)&&Yu.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Yu.is(i.start)&&Yu.is(i.end)}s(r,"is"),t.is=r})(bs||(bs={}));var Kz;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&bs.is(i.range)&&($e.string(i.uri)||$e.undefined(i.uri))}s(r,"is"),t.is=r})(Kz||(Kz={}));var Wqe;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&bs.is(i.targetRange)&&$e.string(i.targetUri)&&bs.is(i.targetSelectionRange)&&(bs.is(i.originSelectionRange)||$e.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(Wqe||(Wqe={}));var Qhe;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.numberRange(i.red,0,1)&&$e.numberRange(i.green,0,1)&&$e.numberRange(i.blue,0,1)&&$e.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(Qhe||(Qhe={}));var Gqe;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&bs.is(i.range)&&Qhe.is(i.color)}s(r,"is"),t.is=r})(Gqe||(Gqe={}));var jqe;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.string(i.label)&&($e.undefined(i.textEdit)||a3.is(i))&&($e.undefined(i.additionalTextEdits)||$e.typedArray(i.additionalTextEdits,a3.is))}s(r,"is"),t.is=r})(jqe||(jqe={}));var Vqe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Vqe||(Vqe={}));var $qe;(function(t){function e(n,i,o,a,c,l){let u={startLine:n,endLine:i};return $e.defined(o)&&(u.startCharacter=o),$e.defined(a)&&(u.endCharacter=a),$e.defined(c)&&(u.kind=c),$e.defined(l)&&(u.collapsedText=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.uinteger(i.startLine)&&$e.uinteger(i.startLine)&&($e.undefined(i.startCharacter)||$e.uinteger(i.startCharacter))&&($e.undefined(i.endCharacter)||$e.uinteger(i.endCharacter))&&($e.undefined(i.kind)||$e.string(i.kind))}s(r,"is"),t.is=r})($qe||($qe={}));var Uhe;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&Kz.is(i.location)&&$e.string(i.message)}s(r,"is"),t.is=r})(Uhe||(Uhe={}));var zqe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(zqe||(zqe={}));var Yqe;(function(t){t.Unnecessary=1,t.Deprecated=2})(Yqe||(Yqe={}));var Kqe;(function(t){function e(r){let n=r;return $e.objectLiteral(n)&&$e.string(n.href)}s(e,"is"),t.is=e})(Kqe||(Kqe={}));var Jz;(function(t){function e(n,i,o,a,c,l){let u={range:n,message:i};return $e.defined(o)&&(u.severity=o),$e.defined(a)&&(u.code=a),$e.defined(c)&&(u.source=c),$e.defined(l)&&(u.relatedInformation=l),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return $e.defined(o)&&bs.is(o.range)&&$e.string(o.message)&&($e.number(o.severity)||$e.undefined(o.severity))&&($e.integer(o.code)||$e.string(o.code)||$e.undefined(o.code))&&($e.undefined(o.codeDescription)||$e.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&($e.string(o.source)||$e.undefined(o.source))&&($e.undefined(o.relatedInformation)||$e.typedArray(o.relatedInformation,Uhe.is))}s(r,"is"),t.is=r})(Jz||(Jz={}));var s3;(function(t){function e(n,i,...o){let a={title:n,command:i};return $e.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.title)&&$e.string(i.command)}s(r,"is"),t.is=r})(s3||(s3={}));var a3;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return $e.objectLiteral(a)&&$e.string(a.newText)&&bs.is(a.range)}s(i,"is"),t.is=i})(a3||(a3={}));var qhe;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.string(i.label)&&($e.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&($e.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(qhe||(qhe={}));var c3;(function(t){function e(r){let n=r;return $e.string(n)}s(e,"is"),t.is=e})(c3||(c3={}));var Jqe;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function r(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return a3.is(a)&&(qhe.is(a.annotationId)||c3.is(a.annotationId))}s(i,"is"),t.is=i})(Jqe||(Jqe={}));var Hhe;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$he.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(Hhe||(Hhe={}));var Whe;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&$e.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||$e.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||$e.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||c3.is(i.annotationId))}s(r,"is"),t.is=r})(Whe||(Whe={}));var Ghe;(function(t){function e(n,i,o,a){let c={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&$e.string(i.oldUri)&&$e.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||$e.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||$e.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||c3.is(i.annotationId))}s(r,"is"),t.is=r})(Ghe||(Ghe={}));var jhe;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&$e.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||$e.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||$e.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||c3.is(i.annotationId))}s(r,"is"),t.is=r})(jhe||(jhe={}));var Vhe;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>$e.string(i.kind)?Whe.is(i)||Ghe.is(i)||jhe.is(i):Hhe.is(i)))}s(e,"is"),t.is=e})(Vhe||(Vhe={}));var Xqe;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)}s(r,"is"),t.is=r})(Xqe||(Xqe={}));var Zqe;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)&&$e.integer(i.version)}s(r,"is"),t.is=r})(Zqe||(Zqe={}));var $he;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)&&(i.version===null||$e.integer(i.version))}s(r,"is"),t.is=r})($he||($he={}));var eHe;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)&&$e.string(i.languageId)&&$e.integer(i.version)&&$e.string(i.text)}s(r,"is"),t.is=r})(eHe||(eHe={}));var zhe;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(zhe||(zhe={}));var DM;(function(t){function e(r){let n=r;return $e.objectLiteral(r)&&zhe.is(n.kind)&&$e.string(n.value)}s(e,"is"),t.is=e})(DM||(DM={}));var tHe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(tHe||(tHe={}));var rHe;(function(t){t.PlainText=1,t.Snippet=2})(rHe||(rHe={}));var nHe;(function(t){t.Deprecated=1})(nHe||(nHe={}));var iHe;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&$e.string(i.newText)&&bs.is(i.insert)&&bs.is(i.replace)}s(r,"is"),t.is=r})(iHe||(iHe={}));var oHe;(function(t){t.asIs=1,t.adjustIndentation=2})(oHe||(oHe={}));var sHe;(function(t){function e(r){let n=r;return n&&($e.string(n.detail)||n.detail===void 0)&&($e.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(sHe||(sHe={}));var aHe;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})(aHe||(aHe={}));var cHe;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})(cHe||(cHe={}));var Xz;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return $e.string(i)||$e.objectLiteral(i)&&$e.string(i.language)&&$e.string(i.value)}s(r,"is"),t.is=r})(Xz||(Xz={}));var lHe;(function(t){function e(r){let n=r;return!!n&&$e.objectLiteral(n)&&(DM.is(n.contents)||Xz.is(n.contents)||$e.typedArray(n.contents,Xz.is))&&(r.range===void 0||bs.is(r.range))}s(e,"is"),t.is=e})(lHe||(lHe={}));var uHe;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(uHe||(uHe={}));var dHe;(function(t){function e(r,n,...i){let o={label:r};return $e.defined(n)&&(o.documentation=n),$e.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(dHe||(dHe={}));var fHe;(function(t){t.Text=1,t.Read=2,t.Write=3})(fHe||(fHe={}));var pHe;(function(t){function e(r,n){let i={range:r};return $e.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(pHe||(pHe={}));var mHe;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(mHe||(mHe={}));var hHe;(function(t){t.Deprecated=1})(hHe||(hHe={}));var gHe;(function(t){function e(r,n,i,o,a){let c={name:r,kind:n,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(gHe||(gHe={}));var AHe;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(AHe||(AHe={}));var yHe;(function(t){function e(n,i,o,a,c,l){let u={name:n,detail:i,kind:o,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&$e.string(i.name)&&$e.number(i.kind)&&bs.is(i.range)&&bs.is(i.selectionRange)&&(i.detail===void 0||$e.string(i.detail))&&(i.deprecated===void 0||$e.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(yHe||(yHe={}));var CHe;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(CHe||(CHe={}));var Zz;(function(t){t.Invoked=1,t.Automatic=2})(Zz||(Zz={}));var EHe;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.typedArray(i.diagnostics,Jz.is)&&(i.only===void 0||$e.typedArray(i.only,$e.string))&&(i.triggerKind===void 0||i.triggerKind===Zz.Invoked||i.triggerKind===Zz.Automatic)}s(r,"is"),t.is=r})(EHe||(EHe={}));var vHe;(function(t){function e(n,i,o){let a={title:n},c=!0;return typeof i=="string"?(c=!1,a.kind=i):s3.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&$e.string(i.title)&&(i.diagnostics===void 0||$e.typedArray(i.diagnostics,Jz.is))&&(i.kind===void 0||$e.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||s3.is(i.command))&&(i.isPreferred===void 0||$e.boolean(i.isPreferred))&&(i.edit===void 0||Vhe.is(i.edit))}s(r,"is"),t.is=r})(vHe||(vHe={}));var xHe;(function(t){function e(n,i){let o={range:n};return $e.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&bs.is(i.range)&&($e.undefined(i.command)||s3.is(i.command))}s(r,"is"),t.is=r})(xHe||(xHe={}));var bHe;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.uinteger(i.tabSize)&&$e.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(bHe||(bHe={}));var IHe;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&bs.is(i.range)&&($e.undefined(i.target)||$e.string(i.target))}s(r,"is"),t.is=r})(IHe||(IHe={}));var THe;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&bs.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(THe||(THe={}));var wHe;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(wHe||(wHe={}));var _He;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(_He||(_He={}));var SHe;(function(t){function e(r){let n=r;return $e.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(SHe||(SHe={}));var RHe;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&bs.is(i.range)&&$e.string(i.text)}s(r,"is"),t.is=r})(RHe||(RHe={}));var kHe;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&bs.is(i.range)&&$e.boolean(i.caseSensitiveLookup)&&($e.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(kHe||(kHe={}));var PHe;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&bs.is(i.range)&&($e.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(PHe||(PHe={}));var BHe;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&bs.is(n.stoppedLocation)}s(r,"is"),t.is=r})(BHe||(BHe={}));var Yhe;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Yhe||(Yhe={}));var Khe;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&(i.tooltip===void 0||$e.string(i.tooltip)||DM.is(i.tooltip))&&(i.location===void 0||Kz.is(i.location))&&(i.command===void 0||s3.is(i.command))}s(r,"is"),t.is=r})(Khe||(Khe={}));var DHe;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Yu.is(i.position)&&($e.string(i.label)||$e.typedArray(i.label,Khe.is))&&(i.kind===void 0||Yhe.is(i.kind))&&i.textEdits===void 0||$e.typedArray(i.textEdits,a3.is)&&(i.tooltip===void 0||$e.string(i.tooltip)||DM.is(i.tooltip))&&(i.paddingLeft===void 0||$e.boolean(i.paddingLeft))&&(i.paddingRight===void 0||$e.boolean(i.paddingRight))}s(r,"is"),t.is=r})(DHe||(DHe={}));var NHe;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(NHe||(NHe={}));var LHe;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(LHe||(LHe={}));var MHe;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(MHe||(MHe={}));var FHe;(function(t){t.Invoked=0,t.Automatic=1})(FHe||(FHe={}));var OHe;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(OHe||(OHe={}));var QHe;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(QHe||(QHe={}));var UHe;(function(t){function e(r){let n=r;return $e.objectLiteral(n)&&Ohe.is(n.uri)&&$e.string(n.name)}s(e,"is"),t.is=e})(UHe||(UHe={}));var qHe;(function(t){function e(o,a,c,l){return new Jhe(o,a,c,l)}s(e,"create"),t.create=e;function r(o){let a=o;return!!($e.defined(a)&&$e.string(a.uri)&&($e.undefined(a.languageId)||$e.string(a.languageId))&&$e.uinteger(a.lineCount)&&$e.func(a.getText)&&$e.func(a.positionAt)&&$e.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let c=o.getText(),l=i(a,(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),u=c.length;for(let f=l.length-1;f>=0;f--){let p=l[f],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)c=c.substring(0,m)+p.newText+c.substring(h,c.length);else throw new Error("Overlapping edit");u=m}return c}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let c=o.length/2|0,l=o.slice(0,c),u=o.slice(c);i(l,a),i(u,a);let f=0,p=0,m=0;for(;f<l.length&&p<u.length;)a(l[f],u[p])<=0?o[m++]=l[f++]:o[m++]=u[p++];for(;f<l.length;)o[m++]=l[f++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(qHe||(qHe={}));var Jhe=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Yu.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return Yu.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},$e;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function c(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(c,"numberRange"),t.numberRange=c;function l(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(l,"integer"),t.integer=l;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function f(h){return e.call(h)==="[object Function]"}s(f,"func"),t.func=f;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})($e||($e={}));var ns=class{static{s(this,"LocationFactory")}static{this.range=bs.create.bind(bs)}static{this.position=Yu.create.bind(Yu)}},sE=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=fI.create(e.clientUri,e.clientLanguageId,n,e.getText());return fI.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=fI.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return fI.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=OP({uri:e,languageId:r})){return new t(Kc(e),fI.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=bs.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=bs.create(Yu.create(r,0),Yu.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};d();d();d();d();var NM={isBlocked:!1,reason:"VALID_FILE"},eY={isBlocked:!1,reason:"NO_MATCHING_POLICY"},HHe={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},a2={all:"all",repo:"repo"},pI=new wt("contentExclusion");d();d();var tY=class{static{s(this,"PolicyEvaluator")}};d();d();d();var WHe=new wt("repository"),c2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},pg=class{static{s(this,"GitConfigLoader")}},rY=class extends pg{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};d();var GHe=require("os");var nY=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return db.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=db.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,GHe.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var iY=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(pg).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new nY(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var nLt=100,Xhe=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},aE=class t{constructor(e){this.ctx=e;this.remoteResolver=new iY;this.cache=new Fr(nLt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=b0(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Xhe(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(ko),i=$o(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=$o(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=I_(r,o[1]),c=$o(a,"config");if(await this.tryStat(e,c)!==void 0)return c;let l=$o(a,"config.worktree");if(await this.tryStat(e,l)!==void 0)return l;let u=$o(a,"commondir");a=I_(a,(await e.readFileString(u)).trimEnd());let f=$o(a,"config");return await e.stat(f),f}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};d();var jHe=s((t,e)=>{if($b.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...$b.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");d();d();d();var sY=new WeakMap;function aY(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&sY.has(t))return sY.get(t);switch(sY.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=aY(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+aY(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+aY(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return sY.set(t,n),n}s(aY,"t");function cY(t){return aY(t,0)}s(cY,"r");var Zhe=new WeakMap;function VHe(t,e,r=cY(e)){let n,i,o=Zhe.get(t);o||(Zhe.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,f=0;function p(m){for(;u=n[f++];u.r(m));}s(p,"o"),Zhe.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[f++],f<=m.length;u instanceof Error?n[f-1].r(u):n[f-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let c=o[0].push(r)-1,l=o[2][c]={};return o[1][c]=e,l.p=new Promise(function(u,f){l.s=u,l.r=f})}s(VHe,"n");var $He=new WeakMap;function iLt(t,e,r,n=cY(r)){if(e||(e=$He.get(t)),e||$He.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=VHe(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(iLt,"n");function zHe(t,e){return function(r,n){return iLt(t,e,r,n)}}s(zHe,"o");d();var hWe=Ne(aWe(),1);d();var MM=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");d();d();var fLt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},FM=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),pLt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),cWe=s(t=>t.join(""),"rangesToString"),lWe=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,c=!1,l=!1,u=!1,f=r,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===r+1){u=!0,o++;continue}if(y==="]"&&a&&!l){f=o+1;break}if(a=!0,y==="\\"&&!l){l=!0,o++;continue}if(y==="["&&!l){for(let[E,[x,b,_]]of Object.entries(fLt))if(t.startsWith(E,o)){if(p)return["$.",!1,t.length-r,!0];o+=E.length,_?i.push(x):n.push(x),c=c||b;continue e}}if(l=!1,p){y>p?n.push(FM(p)+"-"+FM(y)):y===p&&n.push(FM(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(FM(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}n.push(FM(y)),o++}if(f<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let y=n[0].length===2?n[0].slice(-1):n[0];return[pLt(y),!1,f-r,!1]}let m="["+(u?"^":"")+cWe(n)+"]",h="["+(u?"":"^")+cWe(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,c,f-r,!0]},"parseClass");d();var mI=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var mLt=new Set(["!","?","+","*","@"]),uWe=s(t=>mLt.has(t),"isExtglobType"),hLt="(?!(?:^|/)\\.\\.?(?:$|/))",lY="(?!\\.)",gLt=new Set(["[","."]),ALt=new Set(["..","."]),yLt=new Set("().*{}+?[]^$\\!"),CLt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),rge="[^/]",dWe=rge+"*?",fWe=rge+"+?",l3=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,c=-1,l=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===c+1?(y==="^"||y==="!")&&(l=!0):y==="]"&&!(h===c+2&&l)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,c=h,l=!1,g+=y;continue}if(!i.noext&&uWe(y)&&e.charAt(h)==="("){r.push(g),g="";let E=new t(y,r);h=t.#u(e,E,h,i),r.push(E);continue}g+=y}return r.push(g),h}let u=n+1,f=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===c+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(u===c+2&&l)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,c=u,l=!1,m+=h;continue}if(uWe(h)&&e.charAt(u)==="("){f.push(m),m="";let g=new t(h,f);f.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){f.push(m),m="",p.push(f),f=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),f.push(m),m="",r.push(...p,f),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let c=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,c),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,y,E,x]=typeof h=="string"?t.#m(h,this.#t,l):h.toRegExpSource(e);return this.#t=this.#t||E,this.#i=this.#i||x,g}).join(""),f="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&ALt.has(this.#n[0]))){let g=gLt,y=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),E=!r&&!e&&g.has(u.charAt(0));f=y?hLt:E?lY:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[f+u+p,mI(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,mI(this.toString()),!1,!1]}let a=!n||e||r||!lY?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let c="";if(this.type==="!"&&this.#d)c=(this.isStart()&&!r?lY:"")+fWe;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?lY:"")+dWe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=i+o+l}return[c,mI(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let c=0;c<e.length;c++){let l=e.charAt(c);if(i){i=!1,o+=(yLt.has(l)?"\\":"")+l;continue}if(l==="\\"){c===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,f,p,m]=lWe(e,c);if(p){o+=u,a=a||f,c+=p-1,r=r||m;continue}}if(l==="*"){n&&e==="*"?o+=fWe:o+=dWe,r=!0;continue}if(l==="?"){o+=rge,r=!0;continue}o+=CLt(l)}return[o,mI(e),!!r,a]}};d();var nge=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var cc=s((t,e,r={})=>(MM(e),!r.nocomment&&e.charAt(0)==="#"?!1:new u3(e,r).match(t)),"minimatch"),ELt=/^\*+([^+@!?\*\[\(]*)$/,vLt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),xLt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),bLt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),ILt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),TLt=/^\*+\.\*+$/,wLt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),_Lt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),SLt=/^\.\*+$/,RLt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),kLt=/^\*+$/,PLt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),BLt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),DLt=/^\?+([^+@!?\*\[\(]*)?$/,NLt=s(([t,e=""])=>{let r=gWe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),LLt=s(([t,e=""])=>{let r=AWe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),MLt=s(([t,e=""])=>{let r=AWe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),FLt=s(([t,e=""])=>{let r=gWe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),gWe=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),AWe=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),yWe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",pWe={win32:{sep:"\\"},posix:{sep:"/"}},OLt=yWe==="win32"?pWe.win32.sep:pWe.posix.sep;cc.sep=OLt;var Tm=Symbol("globstar **");cc.GLOBSTAR=Tm;var QLt="[^/]",ULt=QLt+"*?",qLt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",HLt="(?:(?!(?:\\/|^)\\.).)*?",WLt=s((t,e={})=>r=>cc(r,t,e),"filter");cc.filter=WLt;var Im=s((t,e={})=>Object.assign({},t,e),"ext"),GLt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return cc;let e=cc;return Object.assign(s((n,i,o={})=>e(n,i,Im(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,Im(t,o))}static defaults(i){return e.defaults(Im(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,Im(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Im(t,o))}},unescape:s((n,i={})=>e.unescape(n,Im(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,Im(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,Im(t,i)),"filter"),defaults:s(n=>e.defaults(Im(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,Im(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,Im(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,Im(t,o)),"match"),sep:e.sep,GLOBSTAR:Tm})},"defaults");cc.defaults=GLt;var CWe=s((t,e={})=>(MM(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,hWe.default)(t)),"braceExpand");cc.braceExpand=CWe;var jLt=s((t,e={})=>new u3(t,e).makeRe(),"makeRe");cc.makeRe=jLt;var VLt=s((t,e,r={})=>{let n=new u3(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");cc.match=VLt;var mWe=/[?*]|[+@!]\(.*?\)|\[|\]/,$Lt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),u3=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){MM(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||yWe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!mWe.test(o[2]))&&!mWe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(f=>this.parse(f))];if(u)return[o[0],...o.slice(1).map(f=>this.parse(f))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let c=n[i+1],l=n[i+2],u=n[i+3];if(c!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let f=n.slice(0);f[i]="**",e.push(f),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let c=n[a];a===1&&c===""&&n[0]===""||(c==="."||c==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],c="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(c==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(c==="b")return!1;c="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),E=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),x=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),b=!x&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=E?3:y?0:void 0,k=b?3:x?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[P,N]=[e[_],r[k]];P.toLowerCase()===N.toLowerCase()&&(r[k]=P,k>_?r=r.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,c=0,l=e.length,u=r.length;a<l&&c<u;a++,c++){this.debug("matchOne loop");var f=r[c],p=e[a];if(this.debug(r,f,p),f===!1)return!1;if(f===Tm){this.debug("GLOBSTAR",[r,f,p]);var m=a,h=c+1;if(h===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<l;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,l,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===l))}let y;if(typeof f=="string"?(y=p===f,this.debug("string match",f,p,y)):(y=f.test(p),this.debug("pattern match",f,p,y)),!y)return!1}if(a===l&&c===u)return!0;if(a===l)return n;if(c===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return CWe(this.pattern,this.options)}parse(e){MM(e);let r=this.options;if(e==="**")return Tm;if(e==="")return"";let n,i=null;(n=e.match(kLt))?i=r.dot?BLt:PLt:(n=e.match(ELt))?i=(r.nocase?r.dot?ILt:bLt:r.dot?xLt:vLt)(n[1]):(n=e.match(DLt))?i=(r.nocase?r.dot?LLt:NLt:r.dot?MLt:FLt)(n):(n=e.match(TLt))?i=r.dot?_Lt:wLt:(n=e.match(SLt))&&(i=RLt);let o=l3.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?ULt:r.dot?qLt:HLt,i=new Set(r.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(f=>{if(f instanceof RegExp)for(let p of f.flags.split(""))i.add(p);return typeof f=="string"?$Lt(f):f===Tm?Tm:f._src});return u.forEach((f,p)=>{let m=u[p+1],h=u[p-1];f!==Tm||h===Tm||(h===void 0?m!==void 0&&m!==Tm?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==Tm&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=Tm))}),u.filter(f=>f!==Tm).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+c+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let c=i.length-2;!a&&c>=0;c--)a=i[c];for(let c=0;c<o.length;c++){let l=o[c],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return cc.defaults(e).Minimatch}};cc.AST=l3;cc.Minimatch=u3;cc.escape=nge;cc.unescape=mI;var ige="contentExclusion",uY=class extends tY{static{s(this,"CopilotContentExclusion")}#e;#t=new Fr(1e4);#i=new Fr(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=I_(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??a2.all);if(!i)return eY;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let c=this.evaluateTextBasedRules(e,i,r);if(c.isBlocked)return c}catch(n){return pI.exception(this.#e,n,`${ige}.evaluate`),HHe}return NM}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=NM,a,c=cue(e.replace(r,""));e:for(let l of n)for(let u of l.paths)if(cc(c,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=oge(l,"FILE_BLOCKED_PATH"),a=u;break e}return pI.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:c,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(c=>c.ifAnyMatch),o=r.filter(c=>c.ifNoneMatch);if(!n||i.length===0&&o.length===0)return NM;let a=this.evaluateFileContent(i,o,n);return pI.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>EWe(a)).some(a=>a.test(n)))return oge(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>EWe(a)).some(a=>a.test(n)))return oge(i,"FILE_BLOCKED_TEXT_BASED");return NM}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){rc(this.#e,e,`${ige}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=zHe(async e=>{let r=await this.#e.get(jr).getGitHubSession();if(!r)throw new Ps("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(a2.all);e.filter(u=>u!==a2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==a2.all).join(",")),i.searchParams.set("scope",o?a2.all:a2.repo);let c=await Yp(this.#e,r,i.href),l=await c.json();if(!c.ok){if(c.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:l.message}),new UA(c)}return this.#s("fetch.success"),jHe(JLt,l).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(aE).getRepo(b0(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Dt(this.#e,`${ige}.${e}`,dn.createAndMarkAsIssued(r,n))}};function EWe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(EWe,"stringToRegex");function oge(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(oge,"fileBlockedEvaluationResult");var zLt=I.Object({name:I.String(),type:I.String()}),YLt=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:zLt}),sge=I.Array(YLt),KLt=I.Object({rules:sge,last_updated_at:I.String(),scope:I.String()}),JLt=I.Array(KLt);var _l=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new uY(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let r=await this.ctx.get(br).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");this.ctx.get(br).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),ia(this.ctx,r=>{this.#e=r.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let i=[],o=s(async(l,u)=>{let f=Date.now(),p=await u.evaluate(e,r),m=Date.now();return i.push({key:l,result:p,elapsedMs:m-f}),p},"track"),c=(await Promise.all([o("contentExclusion.evaluate",this.#t)])).find(l=>l?.isBlocked)??{isBlocked:!1};try{for(let l of i)this.#i(l.key,e,l.result,l.elapsedMs)}catch(l){pI.error(this.ctx,"Error tracking telemetry",l)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(po).setInactive(r??"Copilot is disabled"):this.ctx.get(po).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===eY.reason)return pI.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let c={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},l={elapsedMs:i};return Dt(this.ctx,e,dn.createAndMarkAsIssued(c,l)),Dt(this.ctx,e,dn.createAndMarkAsIssued({...c,path:r},l),1),pI.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function cE(t,e,r){let n=await t.get(_l).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(cE,"isDocumentValid");var br=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await cE(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=Kc(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return cE(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(ko).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(ko).readFileString(e)}getWorkspaceFolder(e){let r=Kc(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(Kc(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=Kc(e.uri);for(let n of this.getWorkspaceFolders()){let i=Kc(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Oi(r)}};function Gs(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(Gs,"statusFromTextDocumentResult");var hn=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(br).getRelativePath(e)??Oi(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(br).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await cE(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:sE.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(ko).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(ko).stat(e)).size/1024/1024}};d();d();var Ld=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function wy(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(wy,"delay");d();var age=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},dY=class extends age{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var Bf=class{constructor(e){this.ctx=e;this.#e=new wt("AsyncCompletionManager");this.requests=new Fr(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(cge(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new dY;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(c=>{if(this.requests.delete(e),c.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,c.reason),a.error(c.reason);return}let l={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:c.value[0],result:c,state:0,allChoicesPromise:c.value[1]};this.requests.set(e,l),a.next(l),a.complete()}).catch(c=>{this.#e.error(this.ctx,`[${e}] Request errored with`,c),this.requests.delete(e),a.error(c)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Bt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(c=>setTimeout(()=>c(null),a))]).then(c=>{if(c===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return c}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new Ld,c=new Map,l=s(f=>()=>{let p=c.get(f);p!==void 0&&(p(),c.delete(f),!o&&c.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(f=>{if(cge(r,n,f)){if(f.state===0){let p=r.substring(f.prefix.length),{completionText:m}=f.choice;if(!m.startsWith(p)||m.length<=p.length){l(f.headerRequestId)();return}m=m.substring(p.length),f.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...f.choice,completionText:m},f.allChoicesPromise]),o=!0}}else this.cancelRequest(e,f),l(f.headerRequestId)()},"next");for(let[f,p]of this.requests)cge(r,n,p)?c.set(f,p.subject.subscribe({next:u,error:l(f),complete:l(f)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let f of c.values())f()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function cge(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(cge,"isCandidate");d();d();var QM=class{constructor(e){this.maxSize=e;this.root=new OM;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let c=o.slice(0,i.length),l=new OM;n.removeChild(o),n.addChild(c,l),l.addChild(o.slice(c.length),a),n=l,i=i.slice(c.length);break}if(i.length>0){let o=new OM;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],c=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(c,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},OM=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var mg=class{constructor(){this.cache=new QM(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new QM(100)}};d();d();d();var _y=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return ju.isSupported(e)}async withParsedStatementTree(e){var n=[];try{let r=$se(n,ju.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{zse(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var fY=class extends _y{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let c=[...this.completion.matchAll(/\n/g)],l=this.lineLimit+this.lookAhead;c.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=c[this.lineLimit-1].index),c.length>=l&&l>0&&(this.lookAheadOffset=c[l-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,c=r.nextSibling;for(;c&&c.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(c);)a=c,c=c.nextSibling;return c&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function vWe(t,e){var c=[];try{let r=t.getText();let n=t.offsetAt(e);let i=$se(c,ju.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(l){var u=l,f=!0}finally{zse(c,u,f)}}s(vWe,"getBlockPositionType");d();d();var lE={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};d();function xWe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?c=.036100405995889276:c=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?c=.03622542297472574:c=.05595579157301536:c=-.02234751038146796:t[8]>319.50000000000006?c=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?c=-.009306153573847916:c=.10058509567064988:c=-.0785668890966017:t[9]>28.500000000000004?c=-.04781977604130416:c=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?c=.02372493254975127:t[148]>1e-35?c=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?c=-.05000852203469597:c=.02922366846119705:t[23]>1e-35?c=-.0026335076988151292:c=-.03073993752935585:t[222]>1e-35?c=-.03867374428185713:t[32]>1e-35?c=-.07220729365053084:t[39]>1e-35?c=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?c=-.04836360271198036:t[8]>4968.500000000001?c=-.10873681915578029:t[149]>1e-35?c=-.11847484033769298:t[122]>1e-35?c=-.08916172460307559:t[82]>1e-35?c=-.06774726602152634:c=-.0033469147714351327:t[126]>1e-35?c=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?c=-.09002547031023511:c=.015475385187009489:t[25]>1e-35?c=-.08175501232759151:c=-.000429679055394914;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?l=.021942996005324917:l=.042349138084484074:t[308]>1e-35?l=.036507270845732874:l=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?l=.00210930790963475:t[31]>1e-35?l=.006825358293027163:t[9]>6.500000000000001?l=-.013772084269062394:t[308]>1e-35?l=-.008307929099892574:t[19]>1e-35?l=-.027706313312904487:l=-.04891108984170914:t[134]>1e-35?l=-.0605730733844732:t[25]>1e-35?l=-.05347926493253117:t[227]>1e-35?l=-.049415829249003666:t[32]>1e-35?l=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?l=-.00016302718260794637:l=-.10247095758122947:t[210]>1e-35?l=-.022149002072787024:t[95]>1e-35?l=.15222631630626304:l=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?l=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?l=-.045352728133789516:t[8]>683.5000000000001?l=.00474372227519902:l=.02635476098707525:t[92]>1e-35?l=.05659380819933452:t[105]>1e-35?l=.07431443210341222:t[186]>1e-35?l=.0915821133384904:l=-.016414750130401053:t[127]>1e-35?l=.011824693641866162:t[23]>1e-35?l=.0228468674288774:t[284]>1e-35?l=.06606936863302432:l=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let f;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?f=-.08436540015142402:t[8]>1861.5000000000002?f=-.01621425699342421:f=.01878613821895428:f=.031052879158242532:t[8]>319.50000000000006?f=-.031536619360997865:t[7]>3.5000000000000004?f=-.004510586962343298:f=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?f=.004757490541310808:t[9]>6.500000000000001?f=-.008842393772207996:t[31]>1e-35?f=.0010536183837006993:t[308]>1e-35?f=-.008145882815435419:t[2]>98.50000000000001?f=-.08404937622173021:t[276]>1e-35?f=.0020072791321856663:t[19]>1e-35?f=-.023031820639490178:f=-.04553314326377875:t[8]>2134.5000000000005?f=-.02244583113572251:t[134]>1e-35?f=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?f=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?f=-.00447733056482096:f=-.10191061664873849:f=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?f=-.07570059131536411:t[243]>1e-35?f=-.040983393346598646:t[3]>9.500000000000002?f=.014763759061483812:t[92]>1e-35?f=.05136368898963024:f=-.008162398981149495:t[127]>1e-35?f=.013999119696708346:t[23]>1e-35?t[20]>1e-35?f=.14138985500120907:f=.008668274102844162:t[284]>1e-35?f=.06356484011042893:f=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let E;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?E=.003325460510319164:E=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?E=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?E=.0697359767152808:t[230]>1e-35?E=.06513506845651572:E=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?E=.013616385013146277:E=.04171540100223404:E=-.04360396575094823:t[212]>1e-35?E=.025945477945627522:E=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?E=-.07856453318384411:E=-.014803893522351739:t[39]>1e-35?E=-.09185452630751932:t[149]>1e-35?E=-.07122426086157027:t[134]>1e-35?E=-.04231052091434186:t[227]>1e-35?E=-.029815824273994197:t[50]>1e-35?E=-.15736496271211153:t[222]>1e-35?E=-.02360285356956629:t[128]>1e-35?E=-.03922080193836443:t[136]>1e-35?E=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?E=-.0029736170756835783:E=-.06482902102259112:t[84]>1e-35?E=-.11340924635708383:t[94]>1e-35?E=-.03635703457792193:t[118]>1e-35?E=-.058181913914186034:t[126]>1e-35?E=-.062030576241517366:t[116]>1e-35?E=-.045086301850604006:t[25]>1e-35?E=-.031665223656767286:t[203]>1e-35?E=-.009444685731407691:E=.0112265153772187;let x;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?x=.022717227245241684:x=-.049700413274686266:x=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?x=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?x=-.12263724050601095:x=.0070743478891288035:t[288]>1e-35?x=-.050439138582109:x=.0255701593657891:x=-.005812703740580558:t[6]>49.50000000000001?x=-.008542694147899113:x=.035147383686665:x=-.0960461939274094:t[32]>1e-35?x=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?x=-.01800870272656664:x=-.07817304234604389:t[30]>1e-35?x=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?x=.08778416018479411:x=-.026563982720830256:x=-.05296139548112329:t[50]>1e-35?x=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?x=-.036572140520852024:t[183]>1e-35?x=-.10766853736801459:x=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?x=.09513215942486053:x=-.03641865277445567:t[10]>59.50000000000001?x=.03177172388687933:t[39]>1e-35?x=-.10234241303898953:t[243]>1e-35?x=-.02966738115984321:t[190]>1e-35?x=-.04312785336449181:t[118]>1e-35?x=-.05808521194081524:x=.006720381600740378;let b;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?b=-.046284053681928526:t[210]>1e-35?b=49778070699847876e-21:t[13]>1e-35?b=.03328070054739309:t[128]>1e-35?b=-.054790214922938896:t[126]>1e-35?b=-.08524792218532945:b=.014414055975542446:t[1]>38.50000000000001?b=-.07287851335872973:b=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?b=-.12459748864088374:b=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?b=.13044981041138526:t[9]>71.50000000000001?b=-.056068402282406865:t[9]>12.500000000000002?b=.038957722962512764:b=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?b=-.0852126122372075:t[225]>1e-35?b=.10082066771689505:t[1]>161.50000000000003?b=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?b=-.010835400874777133:b=.004607419973807752:b=-.016989075258564062:b=.009205417251698097:t[23]>1e-35?t[20]>1e-35?b=.10184317139657878:t[0]>5724.500000000001?b=-.1163666496650542:t[1]>106.50000000000001?b=.1303850608190687:t[129]>1e-35?b=.10745031509534769:b=.006166901738036226:t[31]>1e-35?b=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?b=.005004582564506611:b=-.10481581731668346:t[19]>1e-35?b=-.009850706427306281:b=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let P;t[131]>1e-35?P=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?P=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?P=-.022305242912035072:P=.024792895826340516:P=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?P=.2080083584805785:P=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?P=.060783227455868206:P=-.056904865557409035:P=-.03278952553107572:t[192]>1e-35?P=.13117402617043625:P=.01647119888257836:P=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?P=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?P=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?P=-.11083976837572328:t[146]>1e-35?P=-.03359294484446772:P=-.0042815953591236475:t[190]>1e-35?P=-.09264239592903775:t[10]>1e-35?P=.022282638485105657:P=-.0205994057928458:t[5]>4918.500000000001?P=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?P=.08935072241972036:P=-.03781647876237494:P=.0062655753179671515:t[31]>1e-35?P=.008603500300349887:t[230]>1e-35?P=.03350056932774173:t[23]>1e-35?t[241]>1e-35?P=.10277555508503314:P=.0017901817172993888:t[2]>98.50000000000001?P=-.05920081229672715:P=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let M;t[131]>1e-35?M=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?M=.07473600489975568:t[0]>93.50000000000001?M=-.021596848506011502:M=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?M=.10264284346448256:M=.031042487183181262:M=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?M=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?M=.006271403149804702:M=-.030013637555715046:t[0]>4449.500000000001?M=-.06556876058654929:M=.06437994816903034:t[32]>1e-35?M=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?M=-.09349726304052086:t[210]>1e-35?M=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?M=-.029188394315052574:M=.017219308333820193:M=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?M=-.04428555753857688:M=.0001456106867817353:t[5]>213.50000000000003?M=.01740292726636365:M=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?M=.03410288911259329:t[121]>1e-35?M=-.06056527462120627:t[8]>2592.5000000000005?M=.12166808844363577:t[191]>1e-35?M=.11669879218998758:M=-.001664858391716235:M=-.01262927450503166:M=-.04506589951879664:t[227]>1e-35?M=-.08548904959752329:M=.02156080776537726;let J;t[306]>1e-35?t[149]>1e-35?J=-.1389218965136736:J=-.032218642644416894:t[13]>1e-35?J=.006465035217331847:t[50]>1e-35?J=-.1381687930130022:t[179]>1e-35?J=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?J=-.03262719498763048:J=.023342916702125613:t[191]>1e-35?J=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?J=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?J=-.09989343595668776:J=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?J=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?J=-.09165257825246746:t[9]>32.50000000000001?J=.02484870392366004:J=-.008499493096971395:t[8]>24.500000000000004?J=.02459679192828244:J=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?J=.0015644546318714849:J=-.06579524865022705:J=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?J=.03331853632960164:J=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?J=-.019091477207111116:J=.037878468575478504:t[94]>1e-35?J=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?J=.16919658785098224:t[243]>1e-35?J=-.06580584936754524:J=.01567555159935563:t[129]>1e-35?J=.06721746994993226:t[10]>32.50000000000001?J=-.046394462507797975:J=-.006436180519584767;let se;t[131]>1e-35?se=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?se=.019122095523977856:t[298]>1e-35?se=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?se=-.026094309429557913:t[204]>1e-35?se=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?se=.012643810980689466:se=-.07884161741497837:se=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?se=.04493082949897325:se=.18046359750455776:t[7]>18.500000000000004?se=-.018667348656891496:se=.02584325784698236:se=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?se=.04749240016989375:se=-.0333334578246718:t[5]>3276.5000000000005?se=.11330554740098908:t[7]>94.50000000000001?se=.1296600395033268:se=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?se=-.13787130789142835:t[0]>1847.5000000000002?se=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?se=.028856848462727104:se=-.11197632885851168:se=.08169801342016791:t[1]>22.500000000000004?se=-.021052888644970163:se=.019048604298876753:t[7]>4.500000000000001?se=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?se=.03432638833359197:se=-.0036767863082454973:t[1]>48.50000000000001?se=.03087375270128195:t[2]>3.5000000000000004?se=-.04219917149740248:se=.018818493993207935;let K;t[306]>1e-35?K=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?K=-.09091897542577475:K=.04042943082645558:t[218]>1e-35?K=.056254985867151:K=-.053848117950183044:K=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?K=.021581808008986944:K=-.05639286496176611:K=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?K=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?K=.023885302967553288:K=.1617794086125622:t[212]>1e-35?K=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?K=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?K=.01894935813286188:K=-.06449356357429188:K=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?K=-.034718828212885515:K=.0898976288814321:t[1]>17.500000000000004?K=-.15440137451988326:K=-.03864183216821465:K=.009988507307006308:K=-.08540311947043305:t[50]>1e-35?K=-.13323659732101975:t[134]>1e-35?K=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?K=.08082476177379844:K=-.041665761903645876:t[179]>1e-35?K=-.12405023987936657:t[39]>1e-35?K=-.06247416524997478:t[138]>1e-35?K=-.10724031753676487:K=-.0005423122305122404;let G;t[308]>1e-35?G=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?G=.023223358334607133:G=-.04383410185346742:G=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?G=.023406489302867494:G=-.085521220804058:G=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?G=.028120059780969632:G=-.04211009474298743:t[294]>1e-35?G=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?G=-.0993035220737934:G=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?G=.029770210551187937:G=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?G=.06421359317599738:G=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?G=.024368404612215164:G=-.04045232374803373:t[131]>1e-35?G=.017372701982485795:t[120]>1e-35?G=.08812710275150198:t[18]>1e-35?t[90]>1e-35?G=.18451364351180236:t[7]>33.50000000000001?G=-.03850813130183531:t[195]>1e-35?G=.06966114053446336:t[3]>16.500000000000004?G=-.0012869181693341211:t[0]>4242.500000000001?G=-.054625548611291035:G=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?G=.006302103427145562:G=.13967622319898698:t[121]>1e-35?G=-.038798585213145644:t[5]>4544.500000000001?G=-.08050498033009466:G=-.002986974112681435;let q;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?q=-.03461119351456781:q=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?q=-.12404435523286539:q=-.0034376913880382956:q=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?q=.0037507103585310234:q=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?q=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?q=-.04832024079663151:t[37]>1e-35?q=-.037103393468366934:q=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?q=.032539071163832034:t[5]>1643.5000000000002?q=.036408625378035665:t[0]>1500.5000000000002?q=-.1346358322854993:q=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?q=-.1133991164577881:t[9]>52.50000000000001?q=-.024478640359723122:q=.03673777861098756:q=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?q=.002583438691776944:q=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?q=-.02141222346712401:q=.06392462314316179:t[4]>12.500000000000002?q=.08700122294434816:t[8]>267.50000000000006?q=.056923170082743224:q=-.07716309825583327:t[32]>1e-35?q=-.03961343943752142:q=.002674914122888783:t[1]>42.50000000000001?q=-.05217539654421676:t[145]>1e-35?q=.09553630282946368:q=-.009424791262477729;let le;t[183]>1e-35?le=-.05753337139158443:t[308]>1e-35?le=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?le=-.10477869875380448:le=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?le=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?le=-.04442302951713574:le=.00012409888451734224:le=-.092199119633697:t[225]>1e-35?le=.13773072450201831:t[0]>2882.5000000000005?le=.0028540012229920533:t[298]>1e-35?le=.07134486044361629:le=.014297412329837425:t[145]>1e-35?le=.05608385321902638:t[92]>1e-35?le=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?le=-.0039957800609801315:le=.0776927564241081:t[203]>1e-35?le=-.05502900859432093:t[105]>1e-35?le=.06062892720841595:le=-.009574839629252128:t[31]>1e-35?le=.009488858841144216:t[23]>1e-35?t[20]>1e-35?le=.08818126313644752:t[8]>161.50000000000003?le=.014353968957885408:le=-.022240738532827903:t[210]>1e-35?le=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?le=-.043902062079383485:le=-.014741559220396223:le=-.00934935734853194:t[6]>32.50000000000001?le=.1514593126307404:le=.010771222510801532:t[10]>22.500000000000004?le=.01412495209334078:le=-.08576940379502533;let ie;t[0]>384.50000000000006?t[84]>1e-35?ie=-.06647690967306838:t[2]>101.50000000000001?ie=-.024451334501552457:t[306]>1e-35?ie=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?ie=.0031858381443673127:ie=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?ie=-.08601340441214533:t[1]>29.500000000000004?ie=.10487598629539963:t[8]>597.5000000000001?ie=-.0786529133673238:ie=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?ie=-.04883600353740688:t[126]>1e-35?ie=-.03794042763348827:ie=-.003358871967539988:t[210]>1e-35?ie=.054991356498447566:t[6]>19.500000000000004?ie=-.007418396981635549:ie=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?ie=-.02143003429501711:ie=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?ie=-.006636355416244082:ie=-.06483095743431454:t[4]>21.500000000000004?ie=-.028975965946833545:ie=.022012264796522657:ie=-.06653648243193663:t[5]>4593.500000000001?ie=.01753551428088607:t[217]>1e-35?ie=-.028864824937700297:t[94]>1e-35?ie=-.04885192273020658:t[279]>1e-35?ie=.08105715462329498:t[121]>1e-35?ie=-.04576676034750651:ie=.004795141324949362:t[1]>42.50000000000001?ie=-.047446619702809195:t[145]>1e-35?ie=.08400495571952321:ie=-.00854528836489364;let V;t[294]>1e-35?V=-.042529778074638265:t[266]>1e-35?V=-.1180276669679798:t[134]>1e-35?V=-.026818144353279623:t[183]>1e-35?V=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?V=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?V=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?V=-.03049646619610203:t[1]>50.50000000000001?V=.20634590755061122:V=.06956378103625731:t[0]>3770.5000000000005?V=-.07946414366134913:t[19]>1e-35?V=.17083312065604694:t[2]>21.500000000000004?V=-.02327981978127724:V=.129717297518715:t[145]>1e-35?V=.006891245076133524:V=-.0789123467863741:t[3]>99.50000000000001?V=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?V=.06447639919732716:V=-.05457561977645972:t[306]>1e-35?V=-.029995903305383882:t[191]>1e-35?V=.030596508110850414:t[242]>1e-35?V=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?V=.09518584795377832:V=-.018197744600833596:t[13]>1e-35?V=.006751790086127549:t[148]>1e-35?V=.01904174573618417:t[99]>1e-35?V=.025287735102561926:t[4]>14.500000000000002?V=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?V=-.09467943982430241:t[243]>1e-35?V=-.02521824751996268:V=.005437570718352172:V=-.022476214821960674;let H;t[0]>384.50000000000006?t[84]>1e-35?H=-.06088131453064195:t[147]>1e-35?H=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?H=.04219361472548491:H=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?H=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?H=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?H=-.11431764534511478:H=.013549717238356157:H=-.020987333767091276:t[6]>2.5000000000000004?H=-.02914877855133127:H=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?H=-.10087072787978416:t[37]>1e-35?H=-.030467397753331196:t[229]>1e-35?H=-.1017559811057469:t[4]>20.500000000000004?H=-.00413177742240167:t[20]>1e-35?H=.05213315982685969:H=.0037921635866823133:t[8]>51.50000000000001?H=.07327913092421544:t[6]>49.50000000000001?H=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?H=.02744420891894289:H=.11288946357194463:H=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?H=-.012329314369909049:H=.026816658655600168:H=-.0872405354618811:H=.007872673500247845:t[1]>42.50000000000001?H=-.04309044198258254:t[145]>1e-35?H=.07572529147860785:t[7]>5.500000000000001?H=-.013837187093264945:t[1]>17.500000000000004?H=.04208698439539668:H=-.06284346769019863;let z;t[294]>1e-35?z=-.0384794324818203:t[266]>1e-35?z=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?z=.07432960094940501:z=-.035248735855751855:t[134]>1e-35?z=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?z=-.01706896375068821:z=.08212247914968074:t[2]>59.50000000000001?z=-.09546478958824225:t[6]>53.50000000000001?z=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?z=.02816463285971267:z=.15449139016588445:z=-.10199787406123524:z=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?z=-.13924786681478077:z=-.0072772442570213335:t[39]>1e-35?z=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?z=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?z=-.11174465335620831:z=.00013144040097180107:z=-.08493919336681105:t[42]>1e-35?z=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?z=-.015540659878839153:z=-.14442609417300142:t[21]>1e-35?z=-.025251979447574083:z=.0023698372645272847:t[18]>1e-35?z=.07269739695712212:t[8]>2592.5000000000005?z=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?z=-.01835130329646532:t[9]>45.50000000000001?z=.02023047454629885:z=.16469378262221102:z=-.042975030085836426;let X;t[8]>2915.5000000000005?t[297]>1e-35?X=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?X=-.01034964686484714:X=-.07357437440667927:X=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?X=-.09476398869062203:t[9]>72.50000000000001?X=-.0757383854264379:X=.02806542779508718:X=-.05147742568418084:X=.10212721564444344:X=.0518263760642861:X=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?X=-.10669213185972036:X=.027050434286384796:t[302]>1e-35?X=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?X=.06354599160071946:t[1]>67.50000000000001?X=.05317447949011187:X=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?X=-.09369289448773599:t[0]>2215.5000000000005?X=.04077965380363924:t[0]>807.5000000000001?X=-.0591771776458298:X=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?X=-.016323380219241672:X=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?X=.03720704290087811:X=-.008730548158766654:t[4]>80.50000000000001?X=-.05346644687473197:X=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?X=.019984510398089086:X=-.03917825025861855:t[9]>170.50000000000003?X=-.09759719821334525:X=-.0023586682752856298;let ue;t[183]>1e-35?t[17]>1e-35?ue=.030100940443356424:t[10]>1.5000000000000002?ue=-.10861112216742408:ue=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?ue=-.032062878390325456:ue=-.10808232631806887:t[8]>1641.5000000000002?ue=-.06147013392655731:t[4]>12.500000000000002?ue=.03324767551088266:t[145]>1e-35?ue=.028851633810612017:ue=-.054871239091792784:t[134]>1e-35?ue=-.023813968121342108:t[266]>1e-35?ue=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?ue=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?ue=-.025350325484720576:ue=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?ue=.056817276537534815:ue=-.07674158463557636:ue=-.06335553143454145:t[1]>56.50000000000001?ue=.16390494217299284:ue=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?ue=.041717597065890205:ue=-.10357913492269129:t[10]>29.500000000000004?ue=.1365512866715726:ue=.020600048310575665:ue=.09708785634773187:ue=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?ue=-.03146213719547347:ue=.11784024316238083:ue=-.050940520532045355:ue=-.047988344143075616:t[191]>1e-35?ue=.028764654731460032:ue=.0011911575567860023;let ne;t[294]>1e-35?t[10]>50.50000000000001?ne=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?ne=-.05103908560370243:ne=.05002066201169583:ne=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?ne=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?ne=.127983140816313:ne=-.05436534163636867:ne=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?ne=-.009504203657088933:t[8]>819.5000000000001?ne=.18689664822602375:ne=.03635576744011826:ne=-.029862411809998525:t[223]>1e-35?ne=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?ne=-.09405026597863717:t[0]>4153.500000000001?ne=.053577663326799765:ne=-.05062127873995668:ne=.06512222894425874:t[39]>1e-35?ne=-.04985311717827547:t[51]>1e-35?ne=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?ne=-.02860634573675884:ne=.08863753005590103:ne=.11158892111063744:t[0]>655.5000000000001?ne=-.031005736641654926:ne=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?ne=-.00843386136334982:ne=-.05273594615999777:ne=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?ne=-.015774115523598486:ne=.10147367091236065:ne=-.048307000563071016:ne=.002118376117677254;let me;t[8]>1014.5000000000001?t[9]>137.50000000000003?me=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?me=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?me=.07211107542565391:me=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?me=-.0751486415451188:t[1]>59.50000000000001?me=.13459005084554104:me=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?me=.06715575425741895:me=-.005895690393702183:t[8]>2915.5000000000005?me=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?me=-.00029068886245881074:me=.0613467393188786:t[148]>1e-35?me=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?me=.003887223773199377:me=-.08553893131979015:me=.025654192706396767:me=-.05651733979610658:me=-.02039913645229667:t[2]>7.500000000000001?me=-.1058450646728524:me=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?me=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?me=.1283258201586378:me=-.01718135372229775:me=-.07702452408491414:t[125]>1e-35?me=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?me=.04273051857848212:me=-.04533122948101463:t[2]>196.50000000000003?me=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?me=.0231032972703664:me=-.04807386814498683:me=.002729435991332102;let he;t[179]>1e-35?he=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?he=.026484626664041125:t[10]>1.5000000000000002?he=-.10187000872941615:he=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?he=.09574540795390041:he=-.06454986703691233:he=-.11411849349353141:t[266]>1e-35?he=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?he=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?he=-.04403391373512386:he=.1132928075412222:t[2]>47.50000000000001?he=-.09700191391838056:he=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?he=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?he=-.001668912999010927:he=-.02363511102970245:t[8]>58.50000000000001?he=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?he=.0911011436534449:t[1]>28.500000000000004?he=-.07192390493729035:he=.06913818091291246:he=-.012312625373699222:he=.06784496312307986:he=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?he=.0026564453057705273:he=-.025425772389361445:t[122]>1e-35?he=-.12046786388602149:t[0]>3183.5000000000005?he=.01162092842804907:t[91]>1e-35?he=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?he=-.0001647792543020228:he=-.023664538532907665:he=.01609078206180752;let Qe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Qe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Qe=-.017696526862422682:Qe=.1450050954613223:Qe=-.05406930069823832:Qe=-.08308700260259043:t[120]>1e-35?Qe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Qe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Qe=.038431826961746934:Qe=-.05937462906539856:t[9]>65.50000000000001?Qe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Qe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Qe=-.09579030954062734:Qe=.025064711572811746:Qe=.02579440518821548:Qe=.1044440128091862:Qe=-.058348633139536844:Qe=.07766788227934436:Qe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Qe=.07463684068207214:Qe=.18244269035484484:t[6]>39.50000000000001?Qe=-.06050050067471004:Qe=.05787759066913493:Qe=.010783225857972171:Qe=.1674891243602606:t[4]>9.500000000000002?Qe=-.004814132027475892:Qe=-.14543299413454813:Qe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Qe=-.07634466313617769:Qe=.0287825335169114:Qe=-.06894721943300268:Qe=-.00023988459059521937;let ke;t[131]>1e-35?t[1]>93.50000000000001?ke=-.05706887458825395:t[2]>1.5000000000000002?ke=.011446637886629108:ke=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?ke=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?ke=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?ke=.026278724448495064:ke=.17053138400480508:t[0]>4463.500000000001?ke=-.06482289890096041:ke=.03026516489536295:ke=-.031785170717683144:ke=.1312690622980455:t[13]>1e-35?ke=.14336922540461444:ke=.03523850945454039:ke=-.015407465968975714:t[39]>1e-35?ke=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?ke=-.0659975068798723:ke=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?ke=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?ke=.057409156184759516:ke=.2024322059866388:ke=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?ke=.010648654146284154:t[308]>1e-35?ke=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?ke=.12364025998551711:ke=-.02247495081065243:t[1]>22.500000000000004?ke=-.0726295464624251:ke=.03481895086048152:t[0]>4331.500000000001?ke=-.04775443357020673:ke=.07172377425057568:t[2]>89.50000000000001?ke=-.11782645274716962:ke=.00010092665257989378;let tt;t[147]>1e-35?tt=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?tt=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?tt=-.016101990375700172:t[0]>2579.5000000000005?tt=-.13045089661551845:tt=-.02874367814784938:tt=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?tt=.17084176915326055:tt=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?tt=.10591712319944074:tt=-.024082167264285:tt=.16497698867036126:tt=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?tt=-.021012910475524206:tt=-.13058422554298485:t[0]>1102.5000000000002?tt=.10955864175201457:tt=-.03566689354348996:t[1]>11.500000000000002?tt=-.02093884208606101:tt=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?tt=-.013861861436128482:tt=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?tt=.10163873449625677:tt=-.02779270277623805:t[1]>26.500000000000004?tt=-.08035058228527389:tt=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?tt=-.007028075523033826:tt=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?tt=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?tt=-.0032075580718124892:tt=-.04442829143298883:tt=-.06597073245775804:tt=.0015594090939337751;let Fe;t[223]>1e-35?t[8]>668.5000000000001?Fe=-.12803889879260094:Fe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Fe=.08967966612917375:t[1]>39.50000000000001?Fe=-.059791671514498074:Fe=.05648934961902822:t[2]>59.50000000000001?Fe=-.08633234097449628:t[6]>53.50000000000001?Fe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Fe=.025606129643140924:Fe=.13835395886271978:Fe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Fe=-.09975506556937946:t[10]>36.50000000000001?Fe=-.09427724661655643:t[10]>24.500000000000004?Fe=.07329330653410447:Fe=-.02271182965807972:Fe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Fe=-.05082091374050816:Fe=.1687114435254966:t[0]>2314.5000000000005?Fe=-.06422664016383926:Fe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Fe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Fe=-.1274167728754332:Fe=.01308079126447365:t[4]>73.50000000000001?Fe=.13854015371106546:t[4]>48.50000000000001?Fe=-.03684255740123261:t[6]>45.50000000000001?Fe=.10329912215813097:t[10]>77.50000000000001?Fe=-.08630788656925215:Fe=.031022006843800853:t[1]>25.500000000000004?Fe=-.08278381528048026:Fe=.06664374548141594:t[84]>1e-35?Fe=-.05624227409079396:Fe=.00012184182357340415;let ht;t[179]>1e-35?ht=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ht=-.07595415373151816:ht=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ht=.022822510448266862:ht=.17491569312933697:ht=-.058362287133533565:t[2]>2.5000000000000004?ht=-.03633895806364428:ht=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ht=-.07294848747514579:ht=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ht=-.07009535282685533:t[8]>2640.0000000000005?ht=-.051761240111316276:t[131]>1e-35?ht=-.06245774419231631:ht=.03495606662854905:ht=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ht=.0015036626973581122:ht=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ht=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ht=.022343994371919224:ht=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ht=.07724450228328664:t[0]>3853.5000000000005?ht=-.15671707454435677:t[10]>28.500000000000004?ht=-.10179090671841723:ht=.014878216919760927:ht=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ht=.14054154485273487:ht=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ht=-.08632985141410315:ht=.005524157938954954:ht=-.08802502622523681:ht=-.0004649168897260341;let St;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?St=-.007458687464321174:St=-.09444966249102484:t[1]>23.500000000000004?St=.08564129697360716:St=-.07105002902845851:St=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?St=-.10326216566705966:t[1]>26.500000000000004?St=.0050539832484585365:St=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?St=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?St=.05783632021087773:t[10]>17.500000000000004?St=-.06720598671764105:t[1]>47.50000000000001?St=.097495825172558:St=-.013372242800584872:St=-.06463226787713715:t[42]>1e-35?St=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?St=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?St=.11051270080118503:St=.027719462817590454:t[8]>597.5000000000001?St=-.08441503592016869:St=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?St=-.12190088985091102:St=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?St=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?St=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?St=.016585157185448045:St=-.11032043771149425:St=.01586986028570486:t[8]>388.50000000000006?St=-.10592413013261853:St=.04930703248769364:t[13]>1e-35?St=.003621937787920821:St=-.0013786331198611841;let vt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?vt=.009769895322846493:vt=-.10620052926943656:t[9]>19.500000000000004?vt=.03781202525403449:t[9]>14.500000000000002?vt=-.11485785321365344:t[9]>6.500000000000001?vt=.07677177833073881:t[0]>4342.500000000001?vt=-.07079285609687631:t[49]>1e-35?vt=.06156814809246001:vt=-.014788509042554625:vt=-.032659201618470655:t[5]>5207.500000000001?vt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?vt=-.03094160322187924:t[1]>29.500000000000004?vt=.09474646043921069:vt=.023445783928231618:vt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?vt=-.07164443768784848:t[1]>29.500000000000004?vt=.089473622509272:t[8]>597.5000000000001?vt=-.08155349903101317:vt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?vt=-.004003900679358653:t[190]>1e-35?vt=-.09236113461485262:t[8]>3198.5000000000005?vt=-.0124130160451179:vt=.018453070064009328:t[15]>1e-35?vt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?vt=-.0009580759587680961:vt=-.03227283036698222:vt=.01369287669536875:t[1]>50.50000000000001?vt=-.04213060332500437:t[35]>1e-35?vt=-.11508095777767471:t[190]>1e-35?vt=-.08611884672400155:t[297]>1e-35?vt=.05723551879433584:vt=-.004829340082311461;let It;t[183]>1e-35?It=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?It=-.11753465135886734:It=-.007515490299047085:It=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?It=-.12371142493530439:t[1]>36.50000000000001?It=.032189417575190435:It=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?It=-.0784518658439288:t[2]>54.50000000000001?It=.12477882322370665:It=.000313468482399738:It=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?It=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?It=.0353146070135579:It=-.06327619611098285:It=.02813577701641991:It=-.12354390728506215:t[34]>1e-35?It=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?It=-.01245803535276381:It=-.07169472553475001:t[1]>11.500000000000002?It=.12989984824561698:It=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?It=.010390226893521422:t[10]>14.500000000000002?It=.16790888126487719:It=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?It=-.043398307129729134:It=.09963544907820426:t[9]>30.500000000000004?It=-.13540713124984502:t[9]>17.500000000000004?It=.0509435850590757:It=-.04761897852404613:t[4]>78.50000000000001?It=.09197086656470652:It=.0006771050176682337;let de;t[122]>1e-35?t[6]>36.50000000000001?de=.05686884451670743:de=-.05334759543084309:t[266]>1e-35?de=-.08603579519816038:t[157]>1e-35?de=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?de=-.0499592651503952:t[0]>725.5000000000001?de=.11780353905132664:de=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?de=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?de=-.03190157229022304:de=.07985197845805492:de=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?de=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?de=-.027174047777029083:de=.057117284879796476:t[3]>43.50000000000001?de=-.0016147040913107311:de=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?de=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?de=-.01466076988151239:de=.13375695925484857:de=-.04885873081899647:t[0]>5566.500000000001?de=.11086813028591343:t[8]>992.5000000000001?de=-.07622304217072383:de=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?de=.03285858361708423:de=-.12354858211764992:de=.0672788301823281:t[15]>1e-35?de=.08658836986585006:de=-.02741484278509758:t[290]>1e-35?de=-.08161310335133287:t[135]>1e-35?de=-.04824156054814152:de=.0009156904299554183;let Ue;t[3]>7.500000000000001?Ue=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ue=.03642374718166293:Ue=.16379973756366603:Ue=-.03946685266127979:t[186]>1e-35?Ue=.07618896623420895:t[96]>1e-35?Ue=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Ue=-.022822371600847505:Ue=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Ue=.044416424920571296:Ue=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ue=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Ue=.1061937286809567:t[7]>54.50000000000001?Ue=.11487507743121311:t[8]>819.5000000000001?Ue=-.07181278009001418:t[10]>25.500000000000004?Ue=.13499019430369633:t[1]>31.500000000000004?Ue=.09032979489780704:Ue=-.12754166393372374:t[9]>37.50000000000001?Ue=-.05093963635361407:Ue=-.005026651151683848:t[9]>2.5000000000000004?Ue=.07619735785573735:Ue=.012363301341532136:t[26]>1e-35?Ue=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Ue=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Ue=-.10764172927882483:Ue=.01890760098464703:Ue=.06573095405846417:t[8]>634.5000000000001?Ue=-.00783575973273707:Ue=-.050612689680229306:t[1]>22.500000000000004?Ue=-.0016842490401359626:Ue=.0738227088444087:Ue=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let nt;t[189]>1e-35?t[0]>5269.500000000001?nt=-.103183298350443:t[2]>51.50000000000001?nt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?nt=-.05186168947388339:nt=.0496996365539082:t[10]>23.500000000000004?nt=.1404445738719:t[93]>1e-35?nt=.0027146310074558505:t[5]>3821.5000000000005?nt=.002153033152069652:t[4]>2.5000000000000004?nt=.007663539551317215:nt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?nt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?nt=-.021479467709980358:nt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?nt=.021660293256233334:nt=-.0927396152303864:nt=.0665074081601698:t[0]>1550.5000000000002?nt=.08972407105958534:nt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?nt=.06761927942466854:nt=-.015762168112653286:t[17]>1e-35?nt=.10311304131145381:nt=-.017672785252336027:nt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?nt=-.10638321435298535:nt=.0007073011744385905:t[18]>1e-35?nt=-.027056185501334325:t[145]>1e-35?nt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?nt=.09762140519655171:t[9]>110.50000000000001?nt=-.06581942957595835:t[6]>54.50000000000001?nt=.04959634035251596:nt=.0022616298654554207:nt=-.007437620924990854;let te;t[179]>1e-35?te=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?te=.1470294450403005:te=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?te=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?te=.07965955447707423:t[10]>10.500000000000002?te=-.09236156404262426:te=.03396273196231458:te=-.13246465021467432:te=.07092822261735353:te=-.08753829085942:te=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?te=.004705878789890202:te=.13775378964952867:te=-.04770928980587811:t[10]>29.500000000000004?te=.011221519891071544:t[0]>3853.5000000000005?te=.06365381191628273:te=.15506252245336827:t[1]>37.50000000000001?te=-.07254777021042061:te=.026514587757252385:t[308]>1e-35?te=.04115804816617256:t[10]>26.500000000000004?te=.02077721353011946:t[5]>3548.5000000000005?te=-.1280907116663952:te=-.021974774274438:t[306]>1e-35?te=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?te=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?te=-.005710865560475598:t[94]>1e-35?te=-.06751507982853555:te=.027250040757588703:t[9]>52.50000000000001?te=.07060357924595577:te=-.030297760713011795:te=-.0006005400085266517;let oe;t[113]>1e-35?oe=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?oe=-.06996356565314456:oe=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?oe=-.08317707559926495:t[21]>1e-35?oe=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?oe=-.010538203005984922:oe=.08454819465349446:t[9]>124.50000000000001?oe=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?oe=-.08542251249346582:t[9]>50.50000000000001?oe=-.023428882537657472:oe=.010042500833979073:oe=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?oe=.03006025206979096:t[9]>108.50000000000001?oe=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?oe=.04222035773042132:oe=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?oe=-.07209095448054853:oe=.028065954981903313:oe=.08714651929917122:oe=-.006678820669279169:t[10]>40.50000000000001?oe=.006982396294941626:oe=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?oe=-.09351114982645548:t[4]>3.5000000000000004?oe=-.004837550129223451:oe=-.08324141237464677:t[303]>1e-35?oe=.10703037493990825:t[9]>156.50000000000003?oe=-.10803018621648303:t[116]>1e-35?oe=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?oe=.10261721665006701:oe=.018994509090668264:oe=.0011244262442038839;let We;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?We=-.08404263465005328:t[0]>3682.5000000000005?We=.041259223920298876:t[1]>29.500000000000004?We=-.09541257493441671:We=.001482192721625409:We=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?We=-.08268996098437432:t[230]>1e-35?We=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?We=-913218977737457e-19:t[4]>10.500000000000002?We=-.056334165674005156:t[127]>1e-35?We=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?We=-.04231200150318989:t[10]>42.50000000000001?We=.10182973257894812:We=.015934763950068445:We=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?We=-.041117068322885315:We=.1167767830037126:We=.13611206992387337:t[10]>41.50000000000001?We=-.07120286010564107:We=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?We=-.07702290997669524:t[198]>1e-35?We=.08776558554437136:We=-.008290740324975692:t[2]>32.50000000000001?We=.07198457624219955:We=.005463113714361629:We=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?We=.03295785445437507:We=.15140250150674536:We=-.035613213948910254:t[186]>1e-35?We=.06849425535860769:t[96]>1e-35?We=.06028225812727254:We=-.007582543288662308;let De;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?De=.08396556264106572:De=-.0562516995099192:De=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?De=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?De=.0052017514017035915:De=-.11194119432743639:De=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?De=-.025692451287403446:De=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?De=-.11892250746801664:t[10]>22.500000000000004?De=.07548493166973796:De=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?De=.13750699058082427:t[18]>1e-35?De=.06535408879552801:De=-.054118179035040674:De=.1344282838979622:t[0]>3982.5000000000005?De=-.10409582202467015:t[19]>1e-35?De=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?De=.012705935670766466:De=.14149359442527545:De=-.047977876173706004:t[20]>1e-35?De=.057945228080337946:t[0]>3642.5000000000005?De=-.008726535792122467:De=-.08424769891378858:t[34]>1e-35?De=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?De=.01196849566739346:De=.1614642278429876:De=-.043022338150701625:t[3]>5.500000000000001?De=-.03907848255033881:De=.018280601026175593:De=.0006654540402589085;let xe;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?xe=-.01386103677247845:xe=.11386694333005128:t[4]>27.500000000000004?xe=-.021862617610091336:t[2]>31.500000000000004?xe=.0828858469030438:xe=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?xe=.11303635767048735:xe=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?xe=-.04238798044549342:xe=.022091190130494303:t[5]>5082.500000000001?xe=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?xe=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?xe=-.04291104140431434:t[17]>1e-35?xe=.11256797532342613:xe=-.017206916368289193:xe=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?xe=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?xe=.03581712466863222:xe=.14770264307668884:t[8]>73.50000000000001?xe=-.13093289429740068:xe=.042461737442702936:t[52]>1e-35?xe=.0501831919044939:xe=-.010450249720465756:xe=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?xe=.0005381332165438493:xe=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?xe=.04849637311285226:xe=-.036671377119808564:t[0]>421.50000000000006?xe=.00020968499911058945:xe=.11636422423182405:xe=-.12687837788222575:xe=.0012774367867215346;let Ye;t[120]>1e-35?Ye=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Ye=-.042799574885345304:Ye=.07412430171193245:Ye=-.11248270469336048:t[193]>1e-35?Ye=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?Ye=.028911612178122104:Ye=.12326369727728437:t[0]>4091.5000000000005?Ye=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ye=.1159839898100149:Ye=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?Ye=-.0216343737351583:Ye=-.1220272260878369:t[2]>18.500000000000004?Ye=.09152924475072398:t[8]>55.50000000000001?Ye=.039508716651005665:Ye=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?Ye=.06793009902674053:Ye=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?Ye=-.04391068849624096:Ye=.04009967593394672:t[8]>1085.5000000000002?Ye=-.024773826356034825:Ye=-.13919707884246582:Ye=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?Ye=-.11567917501901476:Ye=-.006813640337684114:t[3]>7.500000000000001?Ye=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?Ye=-.001754586408351048:Ye=-.055422422450722056:Ye=-.06090032532532226:t[0]>5269.500000000001?Ye=.11787981735983527:Ye=-.00198119768540783:Ye=.00210412924303036;let st;t[294]>1e-35?t[10]>50.50000000000001?st=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?st=-.06063239096209816:st=.03317022411417386:st=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?st=-.013608609329298802:st=.09078000157330264:t[99]>1e-35?st=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?st=-.07536137260189814:st=.006253266595455118:t[10]>28.500000000000004?st=-.006106041147592768:t[9]>156.50000000000003?st=-.11828932797811101:t[94]>1e-35?st=-.02566078479505714:t[303]>1e-35?st=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?st=-.08401252789168523:t[5]>4244.500000000001?st=.026372887658499107:t[1]>16.500000000000004?st=-.027836756345634026:st=.09205362097909099:st=.00934612788718244:t[203]>1e-35?st=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?st=-.09580979052540028:t[1]>50.50000000000001?st=-.06402211827281554:st=.08342858760095972:t[2]>36.50000000000001?st=.008114897658204584:t[92]>1e-35?st=.09541587072672864:st=-.022342147210555434:st=-.01660492519175128:st=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?st=.15846731118501817:st=.039498507912023195:t[245]>1e-35?st=.07008718676813333:st=.0019806389728814727;let yt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?yt=-.01192072916082109:yt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?yt=.06874032717466054:t[4]>40.50000000000001?yt=-.07752510020707537:t[1]>76.50000000000001?yt=-.09944032260703917:t[8]>1381.5000000000002?yt=-.054466635810800745:t[1]>32.50000000000001?yt=.05974084520839573:yt=-.0384718740755954:yt=-.11374190719134032:t[0]>2151.5000000000005?yt=-.13703645155803298:yt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?yt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?yt=.013539805885738608:yt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?yt=.09941880179344399:yt=-.01608127391210995:yt=.08025226531247417:t[9]>67.50000000000001?yt=.13525448212444113:t[6]>61.50000000000001?yt=-.05511099182158894:t[94]>1e-35?yt=-.06821509831783572:t[128]>1e-35?yt=.11361314817714643:yt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?yt=-.09954181329804547:t[197]>1e-35?yt=.10102833149755386:t[188]>1e-35?yt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?yt=-.03781554214742005:yt=.09927933385592314:yt=-.020006000056720083:yt=-.10520473615957895:yt=-.12006990846253787:yt=-.00026111570975317574;let qt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?qt=-.019188245509744628:qt=-.13354864350075848:t[0]>2461.5000000000005?qt=.051885477468354396:qt=-.0833581968852119:qt=.08233441701532287:qt=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?qt=.09926337893072812:qt=-.027753610497327715:t[0]>1972.5000000000002?qt=-.09780045823152517:qt=.032380915168504935:qt=.11502632261226381:t[17]>1e-35?qt=-.06094965899579662:t[10]>40.50000000000001?qt=-.07500475582440802:qt=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?qt=-.09584538995220808:qt=-.00908705814304442:qt=.03203281520813893:t[10]>49.50000000000001?qt=-.03146271513986384:t[2]>63.50000000000001?qt=.13172001315536286:t[224]>1e-35?qt=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?qt=.09521549382082259:qt=-.04414925613522197:t[0]>1847.5000000000002?qt=-.09118580379557353:qt=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?qt=.03525144509943896:qt=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?qt=-.04766112322938157:t[2]>10.500000000000002?qt=.0728516504357201:qt=-.05049625965272536:qt=-.10868663055825774:qt=.0005382613419948969;let dr;t[147]>1e-35?t[1]>53.50000000000001?dr=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?dr=-.030504020655417463:dr=.07102458639110094:dr=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?dr=.055304563442710876:t[1]>53.50000000000001?dr=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?dr=-.1568835288372895:dr=-.0279829124400056:dr=.04493843959601833:dr=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?dr=-.054133834303687026:t[9]>48.50000000000001?dr=.11263810289007213:t[9]>9.500000000000002?dr=-.02202034562838259:t[4]>45.50000000000001?dr=-.03410927569045158:dr=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?dr=-.029687297407295893:dr=.10673602850001934:t[4]>42.50000000000001?dr=.0036275562945108117:dr=-.0760789221330622:dr=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?dr=.08274426793676076:dr=-.07076234425516396:dr=.13890177606150175:dr=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?dr=-.09250637750836187:dr=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?dr=-.01897867921812603:dr=.04890781705365262:dr=-.11569892307597907:t[2]>106.50000000000001?dr=.09032697440623969:dr=.00047935919155035045;let Ft;t[115]>1e-35?Ft=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Ft=-.10131179514695865:t[8]>938.5000000000001?Ft=.10203729808015481:Ft=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Ft=.03574015165562999:Ft=-.07763042506449493:Ft=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Ft=.0665706259130275:Ft=-.06586817559309924:Ft=.11925564412287476:Ft=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Ft=.046017146627455346:Ft=-.08623321630086885:t[8]>1765.5000000000002?Ft=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Ft=.11143827902215087:Ft=-.01817808730473413:Ft=.16980985030210127:Ft=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Ft=.010168994879727824:Ft=-.09099594488792513:t[9]>1.5000000000000002?Ft=.0533459678147928:Ft=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Ft=-.062346959148773695:t[1]>47.50000000000001?Ft=-.0021578343835599316:t[2]>27.500000000000004?Ft=.19567373210166172:Ft=.07851555379116423:t[18]>1e-35?Ft=.03711549097804649:t[8]>359.50000000000006?Ft=.012492346746905587:t[4]>20.500000000000004?Ft=.047511695735697544:Ft=-.07999269063948773:Ft=6802045404471004e-20;let zr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?zr=.0011484728213539738:zr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?zr=-.09828874964938798:t[8]>1586.5000000000002?zr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?zr=.011938269926919522:zr=.17541983715953954:t[19]>1e-35?zr=.023002786011088672:zr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?zr=.06508934844183291:zr=-.10168553534835639:zr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?zr=.021140806225203937:zr=-.1167833342453639:t[2]>33.50000000000001?zr=.13163585734056618:zr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?zr=.06314479201263888:zr=-.09639088327091713:t[10]>29.500000000000004?zr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?zr=40577156464836036e-21:zr=.12322387121810757:zr=-.03697224045046014:t[1]>22.500000000000004?zr=.016474835887320276:zr=.16919298733903063:zr=.07633203630214054:zr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?zr=.14150493354700563:zr=-.01831155354975749:t[1]>28.500000000000004?zr=-.07952557178685365:t[10]>28.500000000000004?zr=.0665695554984927:zr=-.053640139319277094:zr=.0004754840665898665;let Zr;t[76]>1e-35?Zr=-.06814884255939921:t[179]>1e-35?Zr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Zr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Zr=.004193658608848433:Zr=-.1066968975983452:t[8]>302.50000000000006?Zr=.05476730110440451:Zr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Zr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Zr=.013555772109446666:Zr=-.09856116699770784:Zr=.0284329611813383:t[2]>52.50000000000001?Zr=.04008708444763762:t[9]>29.500000000000004?Zr=-.1289599546008197:Zr=-.018566534248335896:t[8]>747.5000000000001?Zr=.02236484980076122:Zr=.1148871655157582:t[8]>3084.0000000000005?Zr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Zr=.03164751204281298:Zr=.11752140436184891:t[9]>42.50000000000001?Zr=-.07180559595410106:t[22]>1e-35?Zr=.09325040416256854:Zr=-.016041122807939914:Zr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Zr=-.010718250133458515:Zr=.09818827994853763:Zr=.010180038981174032:Zr=-.039472162599295535:t[9]>170.50000000000003?Zr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Zr=-.08674788057474031:Zr=.02077653508548371:Zr=-.0003536561382007414;let Cn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?Cn=.018337297491457794:Cn=-.05926206443180149:Cn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?Cn=.10747078482128616:t[126]>1e-35?Cn=-.10550625192391357:t[7]>71.50000000000001?Cn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?Cn=.1317396472229434:Cn=-.025035791351328947:Cn=-.0728334305864372:t[8]>963.5000000000001?Cn=.023642201723096064:Cn=.183010326734258:t[128]>1e-35?Cn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?Cn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?Cn=-.1088876900335281:Cn=.02758317023002635:Cn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?Cn=-.01928020117446408:Cn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?Cn=.07893723375925096:Cn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?Cn=-.10301657587280551:Cn=.005787463140224318:Cn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?Cn=-.019296977889522397:Cn=-.07274529751752634:t[1]>30.500000000000004?Cn=-.050368901143148286:Cn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?Cn=.0015332402792773946:Cn=.09930153676749967:Cn=-.06370844564357069:Cn=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ft;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ft=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ft=.08513773825688947:ft=-.1184664832315282:ft=.05676963535893477:ft=.14263843210340613:ft=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ft=-.10669720555606924:ft=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ft=.0664744575868955:ft=-.08469256188890871:ft=-.026746678040592144:t[281]>1e-35?ft=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ft=.012131807587207655:ft=-.12776015795398743:ft=.04320472481083551:ft=.08390980661550446:t[10]>227.50000000000003?ft=-.09771783809101153:t[10]>130.50000000000003?ft=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ft=-.07610698254064358:t[8]>902.5000000000001?ft=-.03136381213599649:t[131]>1e-35?ft=.0704821739127936:t[224]>1e-35?ft=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ft=.10431473040024908:t[8]>841.5000000000001?ft=.07304745320500514:ft=-.038011541882439825:ft=-.01679746695007364:t[0]>3129.5000000000005?ft=.05589952587431965:t[210]>1e-35?ft=.06227198085800842:ft=-.0011341890997947812:t[8]>740.5000000000001?ft=.04817300084412584:ft=-.000577001010789238;let Et;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?Et=-.10504730480402079:t[5]>3341.5000000000005?Et=.11087894671081754:Et=-.0406668834674614:Et=.03308382165616109:t[8]>104.50000000000001?Et=-.10431436764549162:Et=.0073928337244891455:t[4]>34.50000000000001?Et=-.10571751512748416:Et=-.006081128814142983:t[13]>1e-35?Et=.1299673566095023:t[4]>60.50000000000001?Et=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?Et=.04857126072645073:Et=-.03431365358104773:t[4]>16.500000000000004?Et=.04101865986596709:Et=.16480274980378218:t[10]>26.500000000000004?Et=.03673978504199255:t[10]>9.500000000000002?Et=-.10996402743800027:t[308]>1e-35?Et=.0553693735082498:Et=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?Et=.010902983761213922:Et=.1325118659895645:Et=-.064362945508595:t[1]>66.50000000000001?Et=.033416767779331176:Et=-.054080316225040496:t[42]>1e-35?Et=-.07762364337810815:t[10]>1089.5000000000002?Et=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?Et=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?Et=.0220102041325908:Et=-.06516708740003069:Et=.012833498905748267:t[224]>1e-35?Et=-.007038418272997865:Et=.00037666304316290967;let Zt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Zt=.07554189644995735:Zt=-.052089349455904946:Zt=-.10148206848169845:t[113]>1e-35?Zt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Zt=.07172653627995676:Zt=-.07602959317610998:Zt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Zt=-.0399322883690891:Zt=.06523495517476098:Zt=-.10358715295743802:t[193]>1e-35?Zt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Zt=.015928764772252406:Zt=.1341513061552287:Zt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Zt=-.033592997607280156:Zt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Zt=-.08402551858097379:Zt=.017401984506038796:t[1]>25.500000000000004?Zt=.13337205393591278:Zt=-.01160208350090984:Zt=.06708317942315471:t[8]>227.50000000000003?Zt=-.08486943882418681:Zt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Zt=-.10496268177586783:Zt=-.020921489532370493:Zt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Zt=.11639296062157028:Zt=-.004275784356569115:t[32]>1e-35?Zt=-.07297384970166025:Zt=.006026841626381599:Zt=.002034611134960428;let Vt;t[248]>1e-35?Vt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Vt=-.06455513326540585:t[1]>29.500000000000004?Vt=.07718474591552532:t[4]>7.500000000000001?Vt=.040139336931404826:Vt=-.09685734690563386:Vt=.00015327283570347363:t[9]>88.50000000000001?Vt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Vt=-.04077257804338707:Vt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Vt=.03778141591008941:Vt=-.06459919920634845:Vt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Vt=.14063930759326346:t[0]>179.50000000000003?Vt=.07287482250668585:t[8]>1180.5000000000002?Vt=-.14419393112726253:t[10]>28.500000000000004?Vt=-.07993142770099469:t[17]>1e-35?Vt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Vt=.05527969663610186:Vt=-.10824385941441346:t[3]>11.500000000000002?Vt=.12358502961047915:Vt=-.017509147119622873:t[0]>74.50000000000001?Vt=-.014907705458730486:t[8]>95.50000000000001?Vt=-.02225118168342062:Vt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Vt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Vt=.04962819555610421:Vt=-.07213577821855309:Vt=.09139529824708481:t[19]>1e-35?Vt=.013439401088345224:Vt=-.049274647207292056:Vt=.10531673719686951;let Er;t[40]>1e-35?t[0]>1937.5000000000002?Er=-.06421671152073961:Er=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?Er=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?Er=-.03520420769287065:t[8]>1085.5000000000002?Er=-.019817352506127633:Er=.11444439424520964:Er=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?Er=-.010490117519863269:Er=.08104430117757461:t[121]>1e-35?t[243]>1e-35?Er=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?Er=.06619344145920268:t[0]>4091.5000000000005?Er=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?Er=.10016091391222309:Er=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?Er=-.019511460451434884:Er=-.11643672465055221:t[2]>18.500000000000004?Er=.07848228087333317:t[8]>55.50000000000001?Er=.032583027899956235:Er=-.11209832692153521:t[11]>1e-35?Er=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?Er=-.09996887746328006:t[9]>2.5000000000000004?Er=.02157682011863397:Er=-.05247727848991843:Er=.07409150201483244:t[1]>38.50000000000001?Er=-.11378466075449625:t[224]>1e-35?Er=-.10741749127732923:t[1]>26.500000000000004?Er=.07343136534146562:Er=-.07013573628594773:t[25]>1e-35?Er=-.04626669734164317:Er=.05518333197956482:Er=.00032434010867555516;let Ir;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?Ir=.026313251010808853:Ir=-.08997339150292381:Ir=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?Ir=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?Ir=.0905155504503746:t[8]>1049.5000000000002?Ir=-.062312558183394054:t[8]>719.5000000000001?Ir=.09583836191410239:t[0]>3719.5000000000005?Ir=-.0778097309430818:Ir=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?Ir=-.12920865648544927:t[0]>2699.5000000000005?Ir=-.07086587879041864:Ir=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?Ir=-.11377786322600797:Ir=-.009486325820117998:t[1]>55.50000000000001?Ir=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?Ir=-.07938291201004219:t[2]>36.50000000000001?Ir=.01520046732530246:Ir=.13649854049662832:Ir=-.07145015938528873:t[8]>407.50000000000006?Ir=-.00350257360822279:Ir=.11332047082193297:Ir=-.10060624458629897:Ir=.05429496612497562:t[8]>1446.5000000000002?Ir=.006073419197482838:Ir=-.08718676350883998:Ir=-.11532497988252638:Ir=.10766270463068293:t[34]>1e-35?Ir=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?Ir=-.0004109812623829506:Ir=.021601073497455662:Ir=-7343540098965853e-20;let zt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?zt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?zt=.05995640200798119:t[0]>3443.5000000000005?zt=-.14698883458733583:zt=-.030039164579240187:t[189]>1e-35?zt=-.06086763220538141:t[1]>86.50000000000001?zt=-.05096727866142538:t[4]>64.50000000000001?zt=.11240554253834577:t[4]>45.50000000000001?zt=-.030279760168394117:t[6]>45.50000000000001?zt=.10161088917815142:t[10]>77.50000000000001?zt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?zt=-.06672020005240323:zt=.08831457502630258:t[8]>2592.5000000000005?zt=-.052617701047376654:t[10]>29.500000000000004?zt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?zt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?zt=-.064099222705728:zt=.044332487521538365:t[0]>2882.5000000000005?zt=.031099546885005065:zt=.12938467051623853:t[0]>4221.500000000001?zt=-.0928676413498701:t[9]>30.500000000000004?zt=-.05781824812803708:zt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?zt=-.06648105454098469:zt=.05985487552383097:zt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?zt=.05282385499619401:t[1]>66.50000000000001?zt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?zt=.027885690791379255:zt=-.08407126408362446:zt=.014432924125571093:zt=-9903435845205118e-20;let ir;t[76]>1e-35?ir=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?ir=.013633653464240465:ir=-.10164319411983509:ir=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?ir=.00632864847804078:ir=-.08393000368134668:ir=.07870508617440916:t[284]>1e-35?ir=.1092302727710421:ir=-.0025505047582483234:t[248]>1e-35?ir=.07101822393621864:t[274]>1e-35?ir=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?ir=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?ir=.025081789181021243:ir=-.014813325803582618:t[9]>33.50000000000001?ir=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?ir=.11926990418060353:ir=.01852125513565268:ir=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?ir=-.1178464984373743:t[283]>1e-35?ir=.043370859226927405:t[5]>4320.500000000001?ir=-.01103141226366587:t[8]>1104.5000000000002?ir=-.023053423988095886:ir=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?ir=.000579145585864887:ir=.03389152834202143:t[128]>1e-35?ir=-.14527722052568462:t[210]>1e-35?ir=-.08915971541902741:t[7]>9.500000000000002?ir=-.03307314577076116:t[18]>1e-35?ir=-.05521712302023565:ir=.009315605032770029:ir=.0036332551852289933;let Xt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Xt=-.07583539600416284:t[188]>1e-35?Xt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Xt=-.011038193049597113:Xt=.08154028164397753:t[1]>85.50000000000001?Xt=.10259361975201933:Xt=.011640408330521594:Xt=-.00023319159023748508:t[92]>1e-35?Xt=.13771692859530546:Xt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Xt=.09967230141007705:t[30]>1e-35?Xt=-.08888529037551285:Xt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Xt=.08284665960761373:Xt=-.029292565021289504:t[7]>7.500000000000001?Xt=-.09945093355204493:Xt=-.008381393701708593:t[20]>1e-35?Xt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Xt=.07585582641438211:t[8]>284.50000000000006?Xt=-.029387993239886723:Xt=.07716738177321587:t[1]>18.500000000000004?Xt=.026745348497993746:Xt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Xt=.02337306890530338:Xt=-.10390355904767366:Xt=.07390521199638532:Xt=-.06788247515155237:Xt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Xt=-.06360325615644084:Xt=.04342192339836601:Xt=-.10598779152030145:Xt=.05253384605768211;let Sr;t[3]>7.500000000000001?t[157]>1e-35?Sr=-.07514182877923786:Sr=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Sr=.028692053800951845:Sr=.14081686716133598:Sr=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Sr=.0037139292567243084:Sr=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Sr=.01202688580305612:Sr=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Sr=.043935495082738626:Sr=-.05639305759669704:t[247]>1e-35?Sr=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Sr=.10331836202616368:Sr=.0006926658459781341:t[96]>1e-35?Sr=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Sr=-.0741403257305367:Sr=.022900127535540854:t[7]>3.5000000000000004?Sr=.038110741403836294:Sr=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Sr=-.09552842289807008:t[1]>27.500000000000004?Sr=.012505935885798007:Sr=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Sr=-.1046104767723845:Sr=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Sr=.023466328488582572:Sr=.11730925774586994:Sr=-.04771965631104874:Sr=.17059689880751394:Sr=-.08181850955999449:t[26]>1e-35?Sr=-.12727482696678769:Sr=-.014343123272734182;let Qr;t[147]>1e-35?t[1]>53.50000000000001?Qr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Qr=-.02763546051134888:Qr=.06423344777499343:Qr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Qr=.049825139823021586:t[7]>22.500000000000004?Qr=-.01131680751379858:t[0]>2579.5000000000005?Qr=-.10673674485369694:Qr=-.015387212937189957:Qr=.04347325151148724:t[179]>1e-35?Qr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Qr=.0650355590939066:Qr=-.0473332870892226:Qr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Qr=.11139543329789044:t[126]>1e-35?Qr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Qr=.06370903833231022:t[10]>29.500000000000004?Qr=.03415223859607161:t[10]>3.5000000000000004?Qr=-.07415518117873297:Qr=-.0014119203473324082:Qr=.12617652343819508:t[9]>41.50000000000001?Qr=-.10311145857176976:t[8]>2757.5000000000005?Qr=-.08106484219011428:t[7]>71.50000000000001?Qr=-.09783384432091176:t[1]>88.50000000000001?Qr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Qr=-.008884084501608536:Qr=.061339437777743616:Qr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Qr=.01526664064166223:Qr=.13534828515415498:Qr=-.06985484465894776:Qr=.0005758961943178744;let en;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?en=-.029152732370514342:en=.07173628916139178:t[1]>36.50000000000001?en=-.08859111297255318:en=.0018030071815630785:en=.13652461563759322:en=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?en=-.07145140450454163:t[21]>1e-35?en=-.07422841663493233:en=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?en=.11864240653986852:t[3]>33.50000000000001?en=-.08821209591953476:en=.05706392280054726:en=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?en=.01953613016837112:en=-.059781039130025006:t[148]>1e-35?en=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?en=.07207826841738371:t[202]>1e-35?en=.08163917539410503:en=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?en=-.06858280496900336:en=-.1781828899516648:en=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?en=.018232649414147116:en=-.04419781124222661:en=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?en=.11452368095776105:en=-.036496437259924026:en=-.040445338739465486:en=.0816572651001145:en=-.08968914517368663:en=.0002826343082585516;let $n;t[189]>1e-35?t[0]>5269.500000000001?$n=-.08839493050459957:t[10]>85.50000000000001?$n=.10046908365702462:t[8]>2592.5000000000005?$n=-.09632233975926387:t[8]>2000.5000000000002?$n=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?$n=.035504970430426296:t[1]>31.500000000000004?$n=-.1133764813142531:$n=-.01138280942244812:t[8]>1125.5000000000002?$n=.09800530246229806:$n=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?$n=.07316772160107896:$n=-.059095014819051765:$n=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?$n=-.09150209066166894:t[8]>3084.0000000000005?$n=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?$n=-.04449234460408263:$n=.05568837973347338:$n=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?$n=.12741077850267066:$n=.007372371864985329:t[2]>39.50000000000001?$n=.02295917234617787:$n=.14966532083907075:t[1]>39.50000000000001?$n=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?$n=-.02511861881285652:t[1]>27.500000000000004?$n=.08683660011672288:$n=.02956214835267301:t[9]>15.500000000000002?$n=-.016538805462996232:$n=.04352738094981517:$n=-.05561856645643868:t[9]>170.50000000000003?$n=-.07996752635874248:t[179]>1e-35?$n=-.09065975936933919:$n=-.00042817975060427177;let si;t[39]>1e-35?t[4]>25.500000000000004?si=.03443173196222934:si=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?si=-.0013415395759330318:si=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?si=.002297618040307216:si=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?si=-.015297257305397608:si=.09651828834062742:si=-.06636003334371929:t[10]>11.500000000000002?si=.17631616138309397:t[0]>1639.5000000000002?si=3804386478092585e-20:si=-.09099296398683193:si=-.06874415876172972:t[0]>2151.5000000000005?si=-.1311264883406766:si=.00809052010141122:t[253]>1e-35?si=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?si=.045038497754638605:si=-.07770167665661752:si=-.08596294280650517:si=.08538655727027213:si=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?si=.054627956617973275:t[1]>61.50000000000001?si=-.11994465088415499:t[4]>8.500000000000002?si=.06676200239406452:si=-.027503148069376867:t[8]>676.5000000000001?si=-.10363964928357075:t[4]>8.500000000000002?si=-.07589816227175682:si=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?si=.009093153189012338:si=-.06119765876605404:si=.0004668642103528348;let Hn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Hn=-.10100794502567233:Hn=.08000205636470442:Hn=-.11945419826856896:t[113]>1e-35?Hn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Hn=.1224302423880318:Hn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Hn=.0019277012166729114:t[1]>28.500000000000004?Hn=-.054445821715687494:Hn=.045645722976713245:t[30]>1e-35?Hn=.13402660155331655:Hn=.008921176001777645:Hn=-.058547426505451076:Hn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Hn=-.13526418192218206:Hn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Hn=.0007263224246135398:Hn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Hn=-.11575657261278308:Hn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Hn=-.01995960178292952:Hn=.11216586049153021:Hn=-.10050961087149474:Hn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Hn=.10303451081526649:Hn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Hn=-.043799548968209395:Hn=-.12451444314954115:t[4]>12.500000000000002?Hn=-.03838117361958468:Hn=.06504990789767144:t[57]>1e-35?Hn=.06890006938293915:Hn=.0003914274695562949;let ti;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?ti=.004271749009686975:ti=-.10523878297127605:ti=.04633982158107851:ti=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?ti=-.08655730561951676:t[8]>919.5000000000001?ti=-.0676453705610183:t[7]>18.500000000000004?ti=-.027787974193650575:ti=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?ti=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?ti=-.03473877164537313:t[8]>719.5000000000001?ti=.10471053866934404:ti=.008236107678382981:t[4]>57.50000000000001?ti=.09412219478825269:t[10]>66.50000000000001?ti=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?ti=-.040681323751002293:ti=.06374650297561021:ti=.12884615227401788:t[10]>5.500000000000001?ti=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?ti=-.05474068967150784:ti=.03744700650806603:ti=-.07846396348680855:t[1]>42.50000000000001?ti=.018972315810821302:ti=.10953621007604744:t[5]>4439.500000000001?ti=.010999776705494586:t[1]>40.50000000000001?ti=-.12394200059775967:t[10]>2.5000000000000004?ti=.013528093962849453:ti=-.09222088417048682:ti=-.12662967149701485:ti=.09327296405849603:t[3]>99.50000000000001?ti=-.013581954439986752:ti=.0005526498251862075;let cn;t[187]>1e-35?t[243]>1e-35?cn=-.08392792551692502:t[10]>68.50000000000001?cn=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?cn=-.0825306209711224:cn=.049559996084532945:cn=-.1064938580886302:cn=.03353240732240275:cn=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?cn=.16966001471529374:t[1]>57.50000000000001?cn=-.005772777673676247:cn=.09383677041525058:t[8]>747.5000000000001?cn=.054068175469351235:cn=-.049968216310277036:t[8]>753.5000000000001?cn=-.0679383555784074:t[4]>8.500000000000002?cn=-.059757341189735386:cn=.05701083682780414:cn=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?cn=.05820296128730006:cn=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?cn=.15340611616954566:cn=.04385036188666874:t[0]>4449.500000000001?cn=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?cn=.004840354641006495:cn=.09967827580276283:cn=.11605363537391578:t[9]>19.500000000000004?cn=-.0735831692725717:cn=.019973331823355176:t[306]>1e-35?t[149]>1e-35?cn=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?cn=-.02442182361342386:cn=.10334853004243093:cn=-.030431948680167104:cn=-956078595250818e-19;let ri;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?ri=-.040232505718244854:t[0]>3030.5000000000005?ri=.0634109586813073:ri=-.04043617034245621:ri=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?ri=-.007859096946435131:ri=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?ri=.05515771679628051:ri=-.04214471312668263:ri=-.09589322222261765:t[193]>1e-35?ri=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?ri=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?ri=-.08152604001147906:t[11]>1e-35?ri=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?ri=.13100930780107503:t[10]>25.500000000000004?ri=.05921074710011526:ri=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?ri=.0009447118243153454:ri=-.09820565036865991:ri=.057146909749745546:t[0]>2115.5000000000005?ri=-.12331216726611678:ri=.007281983677694285:t[2]>56.50000000000001?ri=.012310154675612615:ri=-.08873665774670461:t[6]>25.500000000000004?ri=.134708740821879:t[9]>5.500000000000001?ri=-.0805901581148979:t[224]>1e-35?ri=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?ri=.10842593386554122:t[2]>13.500000000000002?ri=.06466798320378395:ri=-.08578130788886655:ri=-.03590892078300114:ri=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let W;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?W=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?W=.020637047900190317:W=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?W=-.04632587527094407:W=.08603684785510396:W=-.05101401015448496:W=.025466432054358498:W=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?W=.020385355430046367:W=.12032592051335252:W=-.012387370292173013:t[2]>23.500000000000004?W=-.12568545484492677:W=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?W=.043528764484784536:W=.14352071657196003:W=-.009332833816977268:W=.11186782227735846:W=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?W=-.05649104643152564:W=.03884200719305747:t[42]>1e-35?W=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?W=-.04103416502526736:W=.04881823954656287:t[4]>15.500000000000002?W=.009342724662897898:t[0]>3969.5000000000005?W=-.025637309961309498:W=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?W=-.08185697075265091:t[0]>2215.5000000000005?W=.030063975892297354:t[0]>807.5000000000001?W=-.03924325550733229:W=.0415330999189793:W=-.00024374664461674863;let ge;t[3]>7.500000000000001?ge=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ge=.025798416259686565:ge=.13251610353146012:ge=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ge=-.11098564237775424:ge=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ge=.15347826616466054:t[3]>4.500000000000001?ge=.10379320730958941:ge=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ge=.03159791088468647:ge=-.10612873364104258:ge=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ge=-.02335760775001469:ge=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ge=-.011164334474672973:ge=-.06594044410501655:t[207]>1e-35?ge=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ge=-.01725821503981916:ge=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ge=-.04226531631656534:ge=-.14409800530171432:ge=-.03245576341206398:t[8]>4214.500000000001?ge=.0895409165534886:t[247]>1e-35?ge=-.06506383629143335:t[118]>1e-35?ge=-.07214270121257443:t[8]>546.5000000000001?ge=-.004385020865473831:ge=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ge=.046278501133958524:ge=-.030835570926968044:t[0]>493.50000000000006?ge=-.12794504651610425:ge=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let re;t[7]>17.500000000000004?t[115]>1e-35?re=.08741852531696623:t[167]>1e-35?re=.10078975495600809:re=-.0018324767784017562:t[290]>1e-35?re=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?re=.1379733311640402:re=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?re=-.09360083033774169:re=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?re=-.015599362579530679:t[0]>4593.500000000001?re=-.12029549262691491:re=-.018917032256501397:re=.04632831686576592:re=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?re=-.05894883236412263:re=.05213944998315824:re=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?re=.07577412405680808:re=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?re=-.0277076900736147:t[1]>65.50000000000001?re=-.023587471585763506:re=.10184896592433082:re=-.057699270527916825:re=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?re=.06566902102799584:t[10]>25.500000000000004?re=-.07033633753181047:re=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?re=-.08108035861059537:re=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?re=-.12431182772561139:re=.01886235886984271:re=.0025579594894418116;let O;t[8]>2915.5000000000005?t[101]>1e-35?O=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?O=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?O=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?O=.0687641681341721:t[10]>102.50000000000001?O=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?O=-.06762578396473291:t[10]>65.50000000000001?O=-.05226727783610509:t[282]>1e-35?O=.09911438410640917:t[19]>1e-35?O=.06915156336429933:O=-.006565637886508241:O=-.08344300251849307:O=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?O=.19428463865406298:O=.016073883020956765:t[13]>1e-35?O=.06864077097923665:O=-.01388867527034731:t[0]>1847.5000000000002?O=.004655280608161356:t[1]>40.50000000000001?O=.031406054057765996:O=.12798062439212832:O=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?O=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?O=-.0706095614785733:O=.04227164041372561:O=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?O=-.07139533369873902:O=.008952586782921625:O=.06086212582180936:O=-.0816938490403437:O=-.051224901945956025:O=-.10525399124186095:O=.000270924147208224;let Re;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?Re=.029186512383291244:t[7]>1.5000000000000002?Re=-.14984127276725573:t[1]>40.50000000000001?Re=.032757060730648144:Re=-.07675575422749602:t[6]>8.500000000000002?Re=.10599766037117893:Re=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?Re=-.051394622947855385:Re=.03237141302699347:Re=.12526173027943244:Re=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Re=-.07383912482657777:t[0]>5147.500000000001?Re=.07008813937042091:t[10]>38.50000000000001?Re=-.06779203808365307:Re=-.013782769999524498:Re=.0880038869117715:Re=-.12846294176070952:t[281]>1e-35?Re=-.06810806903850834:t[10]>227.50000000000003?Re=-.08937977001661111:t[10]>130.50000000000003?Re=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?Re=.011036530162093841:Re=-.11500797478569702:Re=.03702229366129399:Re=.07242026683784307:t[189]>1e-35?Re=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?Re=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?Re=-.02608892716555304:Re=.09609599320761308:t[9]>105.50000000000001?Re=-.06848127135991534:Re=.0023675721254089715:t[86]>1e-35?Re=-.11049635625500497:Re=-.004847764219432233;let ze;t[125]>1e-35?t[0]>3969.5000000000005?ze=-.09462233499115416:ze=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?ze=-.030700661288166148:ze=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?ze=.03149547314036763:ze=-.08166208257451366:t[0]>5850.500000000001?ze=-.10228136324773157:t[102]>1e-35?ze=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?ze=.01782894842128785:t[13]>1e-35?ze=.002680190260979968:ze=.1773965720476949:t[2]>72.50000000000001?ze=.09090831938627947:t[1]>59.50000000000001?ze=-.12297206702816128:t[0]>4977.500000000001?ze=.09899015653118268:ze=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?ze=-.0675900954187773:ze=.012336403425364092:ze=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?ze=-.02671721777458802:ze=-.09242452991958029:t[284]>1e-35?ze=-.08585691288582491:ze=.013332890564324447:t[4]>14.500000000000002?ze=-.005245022074799553:t[23]>1e-35?ze=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?ze=-.09289852307936758:t[116]>1e-35?ze=-.09686573010015055:t[8]>804.5000000000001?ze=.03812547148215318:ze=.005162744968176633:t[9]>43.50000000000001?ze=-.059246106396159376:ze=.050370113808135275:ze=.000794041852811028;let Gt;t[3]>7.500000000000001?Gt=.0004981426543104341:t[9]>114.50000000000001?Gt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?Gt=-.019061766497948867:Gt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?Gt=-.006044199577160493:Gt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?Gt=.11486607015912494:t[9]>16.500000000000004?Gt=-.08686820858087294:Gt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?Gt=-.022230207980026437:Gt=.1056683690528792:Gt=-.05859530800943035:Gt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?Gt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?Gt=-.05177544573528314:Gt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?Gt=.15159657923771555:Gt=-.0060542654587671055:t[9]>5.500000000000001?Gt=-.042808028205051786:t[1]>48.50000000000001?Gt=-.010449538258110742:Gt=.10026907521968294:Gt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?Gt=-.02272452389409874:Gt=-.11202691218244319:t[5]>1809.5000000000002?Gt=-.04460413584255906:Gt=.08196329474205256:t[10]>69.50000000000001?Gt=.10221481166238167:Gt=.0004063052701699382:t[243]>1e-35?Gt=-.07563941678849846:t[18]>1e-35?Gt=.02563513231103432:Gt=-.004740081147303786;let Pr;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Pr=.057446442918106:Pr=-.04404018270156349:Pr=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Pr=-.05930486238817954:t[1]>29.500000000000004?Pr=.06955866121256543:t[8]>597.5000000000001?Pr=-.06538593556505168:Pr=.06212512595497445:Pr=.00021102929959182257:t[9]>90.50000000000001?Pr=.0958061289119631:t[102]>1e-35?Pr=.07172059675638813:t[1]>47.50000000000001?Pr=-.03879798603977766:t[297]>1e-35?Pr=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?Pr=.003805910996312012:Pr=.09304295674749524:t[11]>1e-35?t[18]>1e-35?Pr=.11252376801858695:t[288]>1e-35?Pr=-.10293901912180432:Pr=.014669268837893872:t[1]>42.50000000000001?Pr=-.05988274123836837:t[145]>1e-35?Pr=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?Pr=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?Pr=-.03366718308159971:Pr=.11936550608549797:t[1]>31.500000000000004?Pr=-.07454716789539667:Pr=.027859650621164217:t[10]>10.500000000000002?Pr=-.11806374092321247:Pr=-.03506042229223101:Pr=-.0007080765837654515:t[10]>6.500000000000001?Pr=-.028077713664996503:t[2]>7.500000000000001?Pr=.15803724124216814:Pr=.0351381284833169:Pr=-.07877953381054767;let gr;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?gr=.14144941521975005:gr=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?gr=.10514088112381886:t[7]>18.500000000000004?gr=-.10370643555956745:gr=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?gr=-.0508129468802936:t[224]>1e-35?gr=-.037816066368733595:t[10]>43.50000000000001?gr=.07793408602607932:gr=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?gr=.036972453794202324:gr=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?gr=.09475302525132188:gr=-.03580104945898193:gr=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?gr=-.1282448778804823:gr=-.014395808269207212:gr=-.008940927190750592:gr=-.1459118815453748:t[0]>4897.500000000001?gr=-.09733068457286576:t[1]>57.50000000000001?gr=.06575271409540207:gr=-.019556422817450115:gr=-.10623959222984136:t[18]>1e-35?gr=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?gr=.008125645893104896:gr=-.11084368630465868:gr=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?gr=-.05854904579626861:t[4]>5.500000000000001?gr=.02985784951394175:gr=-.03247600140149334:gr=-.11152899295304973:gr=-.00035424577714215764;let An;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?An=-.06563670567578264:An=.067656954313663:An=-.10388217548685377:t[8]>2302.5000000000005?An=.07190621943790435:t[4]>67.50000000000001?An=.060020507643618604:t[4]>38.50000000000001?An=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?An=-.06568134366461277:t[8]>1075.5000000000002?An=-.004768057709758692:An=.11785959165999467:An=-.05080221682879267:An=.14814206127494542:An=-.07241946332311736:t[253]>1e-35?An=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?An=-.02471195342450034:An=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?An=-.10741850739482771:An=.010051635824944:An=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?An=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?An=-.08992396138178163:An=.010944365997007212:An=.06221307021813793:An=.1286024087559141:t[127]>1e-35?An=.06568148624531012:t[10]>40.50000000000001?An=-.07567979134643352:t[5]>5647.500000000001?An=.07594672895572069:An=-.018158016446439187:t[6]>55.50000000000001?An=.009293422430111872:t[4]>45.50000000000001?An=-.017749818406964022:t[2]>46.50000000000001?An=.01714136511113982:An=-724762291423549e-19;let En;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?En=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?En=.07084726276890757:En=-.11232323677722932:En=.04812773089510436:En=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?En=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?En=.0879462816013881:En=-.002966662093626573:t[306]>1e-35?En=-.04588085188342676:En=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?En=-.006600332774461143:En=.1272481351557754:En=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?En=.011884312066620044:En=.11678751052403374:t[4]>8.500000000000002?En=.03627129613273813:En=-.12132783497902287:En=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?En=-.06830131718398992:t[0]>5147.500000000001?En=.062360406249609306:t[4]>4.500000000000001?En=-.013162203864592055:En=-.07153029184927609:En=.07628618062271557:En=-.12085065687320373:t[190]>1e-35?En=-.045816889524231186:t[137]>1e-35?En=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?En=.025895337822752502:En=-.06503949350616421:t[10]>227.50000000000003?En=-.09989456525790491:t[10]>130.50000000000003?En=.08616651057030683:En=.0001234981796706021;let Tr;t[8]>1014.5000000000001?t[9]>137.50000000000003?Tr=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Tr=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Tr=-.141732381961068:Tr=-.0317152307496497:Tr=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Tr=.12191801556691254:Tr=-.0003444689085397977:Tr=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Tr=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Tr=-.05676033995381961:Tr=.10933961076803381:t[4]>26.500000000000004?Tr=-.11667582544549814:t[8]>1765.5000000000002?Tr=.032174455312047705:Tr=-.0755016390126608:t[293]>1e-35?Tr=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Tr=.026571311956824436:t[15]>1e-35?Tr=.06175459479851121:Tr=-.018778084411148754:t[9]>40.50000000000001?Tr=-.09420232889965811:Tr=-.004578248021263184:t[2]>1.5000000000000002?Tr=.005453714644971445:Tr=-.03907138175699279:Tr=-.055296364182154736:t[23]>1e-35?Tr=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Tr=-.09358146510580179:Tr=.060524657996178094:Tr=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Tr=-.12698331085931538:Tr=.006059605604079918:t[2]>196.50000000000003?Tr=-.09451315810804783:Tr=.0011390147031687425;let $t;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?$t=.05517359070460923:$t=-.04758751221404857:$t=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?$t=.1040436595565776:t[9]>21.500000000000004?$t=.04032250517675179:t[107]>1e-35?$t=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?$t=.1192453009230486:t[1]>51.50000000000001?$t=.0443376336292195:$t=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?$t=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?$t=-.08999822408398037:$t=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?$t=-.061850439226075:$t=.08849196353361093:$t=.10536348167793089:t[92]>1e-35?$t=.04894947712119185:t[9]>16.500000000000004?$t=.05900227903883853:t[9]>5.500000000000001?$t=-.11946594348916476:$t=-.03652096348071964:t[1]>41.50000000000001?$t=-.07411603110840567:$t=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?$t=.08493634342741495:t[11]>1e-35?$t=-.10899097825564363:$t=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?$t=.08356655906359918:t[7]>25.500000000000004?$t=-.09475076526194888:t[10]>5.500000000000001?$t=-.01999406228763778:$t=.06696212545889428:t[6]>20.500000000000004?$t=.14713592661393468:$t=.0459917279002218:$t=.00027445928493734093;let Wn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Wn=-.06904501553217077:Wn=.05696231672035904:Wn=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Wn=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Wn=-.011419256378538392:t[0]>3830.5000000000005?Wn=.140315841503076:Wn=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Wn=-.04027822909411164:Wn=.03176085103667189:Wn=.06779515865838849:t[4]>15.500000000000002?Wn=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Wn=.06124039747298539:Wn=-.04312732764434027:Wn=.09161522761808062:Wn=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Wn=.11211681010488772:t[13]>1e-35?Wn=.06725735814960367:Wn=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Wn=.11743605068905603:Wn=-.011309033539148687:Wn=-.07896094707523052:Wn=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Wn=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Wn=.02836295848998302:Wn=.12210680366745175:Wn=-.058302317470509096:t[5]>4144.500000000001?Wn=.06123341960495106:Wn=-.03840046906926525:Wn=-.05221474543453495:Wn=.03988215485860711:Wn=-.00033074684693083496;let Aa=XLt(e+r+n+i+o+a+c+l+u+f+p+m+h+g+y+E+x+b+_+k+P+N+M+J+se+K+G+q+le+ie+V+H+z+X+ue+ne+me+he+Qe+ke+tt+Fe+ht+St+vt+It+de+Ue+ye+nt+te+oe+We+De+xe+Ye+st+yt+qt+dr+Ft+zr+Zr+Cn+Ae+Ge+ft+Et+Zt+Vt+Er+Ir+zt+ir+Xt+Sr+Qr+en+$n+si+Hn+ti+cn+ri+_e+W+ge+ve+re+O+Re+ze+Gt+Pr+gr+An+En+Tr+$t+Wn);return[1-Aa,Aa]}s(xWe,"multilineModelPredict");function XLt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(XLt,"sigmoid");var ZLt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},bWe={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function IWe(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(c=>c.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(ZLt[r]??[]).some(c=>o.includes(c))}s(IWe,"hasComment");var pY=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=IWe(e,-2,r),this.rstripSecondToLastLineHasComment=IWe(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},lge=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new pY(e,n),this.suffixFeatures=new pY(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(bWe).length+1).fill(0);r[bWe[this.language]??0]=1;let n=new Array(Object.keys(lE).length+1).fill(0);n[lE[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(lE).length+1).fill(0);i[lE[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(lE).length+1).fill(0);o[lE[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(lE).length+1).fill(0);return a[lE[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function eMt(t,e){return new lge(t.prefix,t.suffix,e)}s(eMt,"constructMultilineFeatures");function TWe(t,e){let r=eMt(t,e).constructFeatures();return xWe(r)[1]}s(TWe,"requestMultilineScore");d();d();d();d();async function*uE(t,e){for await(let r of t)yield e(r)}s(uE,"asyncIterableMap");async function*wWe(t,e){for await(let r of t)await e(r)&&(yield r)}s(wWe,"asyncIterableFilter");async function*UM(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(UM,"asyncIterableMapFilter");async function*_We(...t){for(let e of t)yield*e}s(_We,"asyncIterableConcat");d();async function qM(t,e,r,n){let i=dn.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Bt).updateExPValuesAndAssignments(n,i)}s(qM,"createTelemetryWithExpWithId");function lc(t,{turn:e,conversation:r}={},n){return qM(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(lc,"createTelemetryWithExpWithTurn");function HM(t,e,r,n,i,o,a,c){let l=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:l.join(",")},f={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),c.length>0&&(u.skillResolutionsJson=JSON.stringify(tMt(c))),a=a.extendedBy(u,f),a}s(HM,"extendUserMessageTelemetryData");function tMt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(tMt,"mapSkillResolutionsForTelemetry");function SWe(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),mY(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(SWe,"createUserMessageTelemetryData");function RWe(t,e,r,n,i,o,a,c){let l=nMt(n);return mY(t,a,r,n,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:r,codeBlockLanguages:JSON.stringify({...l})},{messageCharLen:n.length,numCodeBlocks:l.length,numTokens:i},c).properties.messageId}s(RWe,"createModelMessageTelemetryData");function kWe(t,e,r,n,i,o,a){mY(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(kWe,"createOffTopicMessageTelemetryData");function PWe(t,e,r,n,i,o,a,c,l){let u=mY(t,c,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},l);return rMt(t,r,o,u.properties.messageId,u.properties.conversationId,a,l,c),u.properties.messageId}s(PWe,"createSuggestionMessageTelemetryData");var BWe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function DWe(t,e,r){let n=await lc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";Md(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(DWe,"telemetryIndexCodesearch");function mY(t,e,r,n,i,o,a){let c=a??dn.createAndMarkAsIssued(),l={messageText:n,...i};if(!("messageId"in i)&&!("messageId"in c.properties)){let m=cr();i.messageId=m,l.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=c.extendedBy(i,o),f=c.extendedBy(l),p=Sl(r);return Dt(t,`${p}.message`,u),Dt(t,`${p}.messageText`,f,1),u}s(mY,"telemetryMessage");function NWe(t,e,r,n){Md(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(NWe,"createSuggestionShownTelemetryData");function rMt(t,e,r,n,i,o,a,c){Md(t,c,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(rMt,"createSuggestionSelectedTelemetryData");function Md(t,e,r,n,i,o){let a=o??dn.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let c=a.extendedBy(r,n);return Dt(t,i,c),c}s(Md,"telemetryUserAction");function f3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Dt(t,"engine.messages",n,1)}s(f3,"logEngineMessages");function Sl(t){switch(t){case"agentPanel":return"copilotAgentConversation";case"editsPanel":return"copilotEditsPanel";case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}s(Sl,"telemetryPrefixForUiKind");function nMt(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}s(nMt,"getCodeBlocks");function LWe(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(LWe,"uiKindToIntent");function hI(t){return t==="inline"?"conversationInline":"conversationPanel"}s(hI,"conversationSourceToUiKind");function MWe(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};OWe(t,"round",i.extendedBy(o,a))}s(MWe,"createAgentRoundTelemetryData");function FWe(t,e,r,n,i,o,a,c){let l={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};OWe(t,"toolCall",c.extendedBy(l,u))}s(FWe,"createToolInvocationTelemetryData");function OWe(t,e,r){return Dt(t,`${Sl("agentPanel")}.${e}`,r)}s(OWe,"logAgenticEvent");function iMt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}s(iMt,"truncateContentIfNeeded");function QWe(t,e,r,n,i,o,a){let c=`${Sl(e)}.${a}`,l=o.extendedBy(r,n);Dt(t,c,l);let u={...r};i.currentFileContent!==void 0&&(u.completionTextJson=iMt(i.currentFileContent));let f=o.extendedBy(u,n);Dt(t,`${c}.restricted`,f,1)}s(QWe,"telemetryEditSurvivalTracking");d();d();function dE(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(dE,"toString");var V0=new wt("streamChoices"),uge=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new pge;this.tool_calls=[];this.function_call=new fge;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new dge),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function oMt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(oMt,"splitChunk");var dge=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},fge=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},pge=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},gI=class t{constructor(e,r,n,i,o,a,c){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=c;this.requestId=l2(this.response);this.stats=new mge;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let c=n.body();if(c===null)throw new Error("No response body available");return typeof c.setEncoding=="function"?c.setEncoding("utf8"):c=c.pipeThrough(new TextDecoderStream),new t(e,r,n,c,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),V0.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),V0.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;V0.debug(this.ctx,"chunk",a.toString());let[c,l]=oMt(r+a.toString());r=l;for(let u of c){let f=u.slice(5).trim();if(f=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(f)}catch{V0.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&sMt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?V0.error(this.ctx,"Error in response:",p.error.message):V0.error(this.ctx,"Unexpected response with no choices or error: "+f)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];V0.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new uge);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),E=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||E){let b=g.text.join("");if(y=this.asSolutionDecision(await e(b,{text:b,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>WM(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let x=h.finish_reason??"client-trimmed";if(Dt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:x,engineName:i??"",engineChoiceSource:Yb(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,c]of Object.entries(this.solutions)){let l=Number(a);if(c!=null&&(Dt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(l),yield{solution:c,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:l,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&V0.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{V0.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let c=Number(o);if(a==null)continue;let l=a.text.join("");if(await i(l,{text:l,index:c,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>WM(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(c),Dt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:c,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(V0.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function hY(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(V0.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),V0.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),V0.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=WM(e.solution);return gY(t,n,o,e.index,e.requestId,i,r)}s(hY,"prepareSolutionForReturn");function WM(t){let e=t.text.join(""),r=aMt(t),n=cMt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((f,p)=>f.concat(p),[]),c=t.top_logprobs.reduce((f,p)=>f.concat(p),[]),l=t.text_offset.reduce((f,p)=>f.concat(p),[]),u=t.tokens.reduce((f,p)=>f.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:c,text_offset:l,tokens:u}}}s(WM,"convertToAPIJsonData");function sMt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(sMt,"isCopilotConfirmation");function UWe(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${dE(n)}. Input: '${t}'`)}}s(UWe,"parseCallArguments");function aMt(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.join("").trim(),i=UWe(n,"tool call",r.name);e.push({type:"function",function:{name:r.name,arguments:i},approxNumTokens:r.arguments.length+1})}return e}s(aMt,"extractToolCalls");function cMt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=UWe(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}s(cMt,"extractFunctionCall");var mge=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new hge,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},hge=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};d();function AY(t,e){return t!==null&&typeof t=="object"&&e in t}s(AY,"hasKey");function Fd(t,e){return AY(t,e)?t[e]:void 0}s(Fd,"getKey");var HWe=Ne(mi());var _a=new wt("fetchCompletions");function l2(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(l2,"getRequestId");function p3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(p3,"getProcessingTime");function WWe(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(WWe,"uiKindToIntent");var Df=class{static{s(this,"OpenAIFetcher")}};function lMt(t,e,r,n){return fb(t,e,"proxy","v1/engines",r,n)}s(lMt,"getProxyEngineUrl");function yY(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let c={...a};for(let l of n)delete c[l];a=c}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(yY,"sanitizeRequestOptionTelemetry");async function qWe(t,e,r,n,i,o,a,c,l,u,f){let p=t.get(po),m=lMt(t,a,r,n),h=l.extendedBy({endpoint:n,engineName:r,uiKind:c},T4(e));yY(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Dt(t,"request.sent",h);let g=la(),y=WWe(c);return r_(t,m,a.token,y,i,o,u,f).then(E=>{let x=l2(E);h.extendWithRequestId(x);let b=la()-g;return h.measurements.totalTimeMs=b,_a.info(t,`Request ${i} at <${m}> finished with ${E.status} status after ${b}ms`),h.properties.status=String(E.status),_a.debug(t,"request.response properties",h.properties),_a.debug(t,"request.response measurements",h.measurements),_a.debug(t,"prompt:",e),Dt(t,"request.response",h),E}).catch(E=>{if(Du(E))throw Dt(t,"request.cancel",h),E;p.setWarning(Fd(E,"message")??"");let x=h.extendedBy({error:"Network exception"});Dt(t,"request.shownWarning",x),h.properties.message=String(Fd(E,"name")??""),h.properties.code=String(Fd(E,"code")??""),h.properties.errno=String(Fd(E,"errno")??""),h.properties.type=String(Fd(E,"type")??"");let b=la()-g;throw h.measurements.totalTimeMs=b,_a.info(t,`Request ${i} at <${m}> rejected with ${String(E)} after ${b}ms`),_a.debug(t,"request.error properties",h.properties),_a.debug(t,"request.error measurements",h.measurements),Dt(t,"request.error",h),E}).finally(()=>{wBe(t,e,h)})}s(qWe,"fetchWithInstrumentation");async function uMt(t,e,r,n,i,o,a,c,l,u){let f=l.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:c});yY(o,f,["messages"]),f.properties.headerRequestId=i,Dt(t,"request.sent",f);let p=la(),m=WWe(c),h={...jb(t)};try{let g=await r_(t,n,a.token,m,i,o,u,h),y=l2(g);f.extendWithRequestId(y);let E=la()-p;return f.measurements.totalTimeMs=E,_a.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${E}ms`),_a.debug(t,"request.response properties",f.properties),_a.debug(t,"request.response measurements",f.measurements),_a.debug(t,"messages:",JSON.stringify(e)),Dt(t,"request.response",f),g}catch(g){if(Du(g))throw Dt(t,"request.cancel",f),g;let y=f.extendedBy({error:"Network exception"});Dt(t,"request.shownWarning",y),f.properties.message=String(Fd(g,"name")??""),f.properties.code=String(Fd(g,"code")??""),f.properties.errno=String(Fd(g,"errno")??""),f.properties.type=String(Fd(g,"type")??"");let E=la()-p;throw f.measurements.totalTimeMs=E,_a.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${E}ms`),_a.debug(t,"request.error properties",f.properties),_a.debug(t,"request.error measurements",f.measurements),Dt(t,"request.error",f),g}finally{f3(t,e,f)}}s(uMt,"fetchChatWithInstrumentation");function gge(t){return wWe(t,e=>e.completionText.trim().length>0)}s(gge,"postProcessChoices");var dMt="github.copilot.completions.quotaExceeded",GM=class extends Df{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(po),c="completions",l=await e.get(jr).getToken(),u=await this.fetchWithParameters(e,c,r,l,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){_a.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(c,e,r);return this.handleError(e,a,h,u,l)}let p=gI.create(e,r.count,u,n,[],o).processSSE(i),m=uE(p,h=>hY(e,h,n));return{type:"success",choices:gge(m),getProcessingTime:s(()=>p3(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,c,l={},u){if(this.#e)return{type:"canceled",reason:this.#e};let f="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:c.id,stream:!0,...l},m=n.extendedBy({endpoint:f,model:c.name}),h=e.get(po),g=await e.get(jr).getToken(),y=await uMt(e,r,c.id,f,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){_a.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=dn.createAndMarkAsIssued({endpoint:f,engineName:c.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let x=gI.create(e,1,y,m,[],HWe.CancellationToken.None).processSSE(),b=uE(x,_=>hY(e,_,n));return{type:"success",choices:gge(b),getProcessingTime:s(()=>p3(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(po),c="speculation",l=await e.get(jr).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:cr(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},f=await this.fetchSpeculationWithParameters(e,c,u,l,n,o);if(f==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=f.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){_a.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(f.status!==200){let g=this.createTelemetryData(c,e,u);return this.handleError(e,a,g,f,l)}let m=gI.create(e,1,f,n,[],o).processSSE(i),h=uE(m,g=>hY(e,g,n));return{type:"success",choices:gge(h),getProcessingTime:s(()=>p3(f),"getProcessingTime")}}createTelemetryData(e,r,n){return dn.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let c={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await wy(0),a?.isCancellationRequested?"not-sent":await qWe(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let c=e.get(Bt).disableLogProb(o),l={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:EY(e),temperature:m3(e,n.count),top_p:CY(e),n:n.count,stop:GWe(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!c)&&(l.logprobs=2);let u=tE(n.repoInfo);return u!==void 0&&(l.nwo=u),n.postOptions&&Object.assign(l,n.postOptions),n.prompt.context&&(l.extra.context=n.prompt.context),await wy(0),a?.isCancellationRequested?"not-sent":await qWe(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:dMt,title:"Learn More"});let l=ia(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),l.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),_a.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let c=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;_a.error(e,c),r.setWarning(c),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(_a.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Dt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(jr).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",_a.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(_a.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(_a.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function gY(t,e,r,n,i,o,a){return TBe(t,e,r,i,n),{completionText:e,meanLogProb:fMt(t,r),meanAlternativeLogProb:pMt(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:cr(),finishReason:r.finish_reason}}s(gY,"convertToAPIChoice");function fMt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){pn.exception(t,r,"Error calculating mean prob")}}s(fMt,"calculateMeanLogProb");function pMt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){pn.exception(t,r,"Error calculating mean prob")}}s(pMt,"calculateMeanAlternativeLogProb");function m3(t,e){return kh(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(m3,"getTemperatureForSamples");var mMt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function GWe(t,e){return mMt[e??""]??[`


`,"\n```"]}s(GWe,"getStops");function CY(t){return 1}s(CY,"getTopP");function EY(t){return zL}s(EY,"getMaxSolutionTokens");var Age=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},vY=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new Age(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new fY(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=gY(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,c={};for(let[l,u]of Object.entries(e.copilotAnnotations)){let f=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});f.length>0&&(c[l]=f)}return Object.keys(c).length>0?c:void 0}};d();d();var wm=class{constructor(){this.cache=new Fr(100)}static{s(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var xY=new wt("getCompletions");function bY(t,e,r){(vi(t,Rt.EnableSpeculativeRequestsShown)??t.get(Bt).enableSpeculativeRequestsShown(r.telemetry))&&t.get(wm).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=h3(r.resultType),Dt(t,`${e}.shown`,r.telemetry)}s(bY,"telemetryShown");function jWe(t,e,r){let n=e+".accepted";Dt(t,n,r)}s(jWe,"telemetryAccepted");function VWe(t,e,r){let n=e+".rejected";Dt(t,n,r)}s(VWe,"telemetryRejected");function Sy(t,e={}){return{...e,telemetryBlob:t}}s(Sy,"mkCanceledResultTelemetry");function da(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(da,"mkBasicResultTelemetry");function $We(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=la()-e.telemetryBlob.issuedTime,n=h3(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,c=e.performanceMetrics?.map(([l,u])=>`
${u.toFixed(2)}	${l}`).join("")??"";return xY.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${c}`),zle(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(xY.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Dt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}zle(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s($We,"handleGhostTextResultTelemetry");function h3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(h3,"resultTypeToString");d();d();d();async function hMt(t){if(t.isCancellationRequested)return;let e=new Ld,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(hMt,"cancellationTokenToPromise");async function zWe(t,e){if(e){let r=hMt(e);await Promise.race([t,r])}else await t}s(zWe,"raceCancellation");function yge(t){return Array.isArray(t)}s(yge,"isArrayOfT");async function YWe(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let c=await gMt(o,e);r.set(i,c)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(YWe,"resolveAll");async function gMt(t,e){let r;return t instanceof Promise?r=await AMt(t,e):r=await yMt(t,e),r}s(gMt,"resolve");async function AMt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:yge(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await zWe(i,e),n.resolutionTime=performance.now()-r,n}s(AMt,"resolvePromise");async function yMt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await zWe(i,e),n.resolutionTime=performance.now()-r,n}s(yMt,"resolveIterable");d();var CMt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},EMt="ms-vscode.cpptools",vMt="CppCompletionContextProvider";function KWe(t,e,r,n){(e.includes(vMt)||e.length===1&&e[0]==="*")&&XWe(t,r,n)}s(KWe,"fillInCppVSActiveExperiments");function JWe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(EMt))&&XWe(t,r,n)}s(JWe,"fillInCppVSCodeActiveExperiments");function XWe(t,e,r){try{let n=CMt,i=t.get(Bt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){pn.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){pn.exception(t,n,"fillInCppActiveExperiments")}}s(XWe,"addActiveExperiments");d();function IY(t,e,r){try{let n=t.get(Bt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return pn.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(IY,"fillInCSharpActiveExperiments");d();var AI="fallbackContextProvider",TY={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function ZWe(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(AI))&&xMt(t,r,n)}s(ZWe,"fillInMultiLanguageActiveExperiments");function xMt(t,e,r){try{let n=bMt(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){pn.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(xMt,"addActiveExperiments");function bMt(t,e){let r=TY,n=t.get(Bt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){pn.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s(bMt,"getMultiLanguageContextProviderParamsFromExp");function eGe(t){let e={...TY};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(eGe,"getMultiLanguageContextProviderParamsFromActiveExperiments");d();var IMt="typescript-ai-context-provider";function tGe(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(IMt)))return!1;try{let i=t.get(Bt).tsContextProviderParams(n);if(i){let o=JSON.parse(i);for(let[a,c]of Object.entries(o))r.set(a,c)}}catch(i){return pn.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(tGe,"fillInTsActiveExperiments");d();var rGe=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),nGe=I.Intersect([I.Object({name:I.String(),value:I.String()}),rGe]),iGe=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),rGe]),TMt=[nGe,iGe],wMt=I.Union(TMt),_Mt=new Map([["Trait",Ms.Compile(nGe)],["CodeSnippet",Ms.Compile(iGe)]]),SMt=s(t=>t,"ensureTypesAreEqual");SMt(!0);var RMt=I.Object({contextItems:I.Array(wMt)}),kMt=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),Cge=I.Object({id:I.String()}),PMt=I.Intersect([Cge,kMt]),BMt=I.Intersect([Cge,RMt]),oGe=I.Object({providers:I.Array(PMt)}),sGe=I.Object({providers:I.Array(Cge)}),Ege=I.Object({providers:I.Array(BMt),updating:I.Optional(I.Array(I.String()))}),wY=I.Intersect([MBe,I.Object({contextItems:I.Optional(Ege)})]);function _Y(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(_Y,"filterContextItemsByType");function aGe(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of _Mt.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(aGe,"filterSupportedContextItems");function DMt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(DMt,"validateContextItemId");function cGe(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??cr();if(!DMt(o)){let a=cr();pn.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=cr();pn.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(cGe,"addOrValidateContextItemsIDs");d();var Rl=class{constructor(e=()=>new vge){this.createStatistics=e;this.statistics=new Fr(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},vge=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,f]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),f==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let c=o.reduce((u,f)=>f.usage==="full"?u+1:f.usage==="partial"?u+.5:u,0)/n.length,l=c===1?"full":c===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:l,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function lGe(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(lGe,"componentStatisticsToPromptMatcher");var uGe=Ne(mi());var uc=class{static{s(this,"ContextProviderRegistry")}},Ry=class{static{s(this,"DefaultContextProviders")}},A3=class extends Ry{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},xge=class extends uc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a,c){if(a?.isCancellationRequested)return pn.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;IY(this.ctx,l,o);let u=[];if(this._providers.length===0)return u;let f=await this.matchProviders(i,o),p=f.filter(k=>k[1]>0);if(f.filter(k=>k[1]<=0).forEach(([k,P])=>{let N={providerId:k.id,matchScore:P,resolution:"none",resolutionTimeMs:0,data:[]};u.push(N)}),p.length===0)return u;if(a?.isCancellationRequested)return pn.debug(this.ctx,"Resolving context providers cancelled"),[];JWe(this.ctx,p.map(k=>k[0].id),l,o),ZWe(this.ctx,p.map(k=>k[0].id),l,o),tGe(this.ctx,p.map(k=>k[0].id),l,o);let h=new uGe.CancellationTokenSource;if(a){let k=a.onCancellationRequested(P=>{h.cancel(),k.dispose()})}let g=u6(this.ctx)&&!aH(this.ctx)?0:NMt(this.ctx,o),y=g>0?Date.now()+g:Number.MAX_SAFE_INTEGER,E;g>0&&(E=setTimeout(()=>{h.cancel(),h.dispose()},g));let x=new Map,b={completionId:r,opportunityId:n,documentContext:i,activeExperiments:l,timeBudget:g,timeoutEnd:y,data:c};for(let[k]of p){let P=this.ctx.get(Rl).getPreviousStatisticsForCompletion(r)?.get(k.id);P&&(b.previousUsageStatistics=P);let N=k.resolver.resolve(b,h.token);x.set(k.id,N)}let _=await YWe(x,h.token);E&&clearTimeout(E);for(let[k,P]of p){let N=_.get(k.id);if(N){if(N.status==="error")n$(N.reason)||pn.error(this.ctx,`Error resolving context from ${k.id}: `,N.reason),u.push({providerId:k.id,matchScore:P,resolution:N.status,resolutionTimeMs:N.resolutionTime,data:[]});else{let M=[...N.value??[]];if((N.status==="none"||N.status==="partial")&&(pn.info(this.ctx,`Context provider ${k.id} exceeded time budget of ${g}ms`),k.resolver.resolveOnTimeout))try{let q=k.resolver.resolveOnTimeout(b);yge(q)?M.push(...q):q&&M.push(q),M.length>0&&(N.status="partial")}catch(q){pn.error(this.ctx,`Error in fallback logic for context provider ${k.id}: `,q)}let[J,se]=aGe(M);se&&pn.error(this.ctx,`Dropped ${se} context items from ${k.id} due to invalid schema`);let K=cGe(this.ctx,J),G={providerId:k.id,matchScore:P,resolution:N.status,resolutionTimeMs:N.resolutionTime,data:K};u.push(G)}this.ctx.get(Rl).getStatisticsForCompletion(r).setLastResolution(k.id,N.status)}else pn.error(this.ctx,`Context provider ${k.id} not found in results`)}return u.sort((k,P)=>P.matchScore-k.matchScore)}async matchProviders(r,n){let i=RY(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async c=>{if(!o&&!i.includes(c.id))return[c,0];let l=await this.match(this.ctx,c.selector,r);return[c,l]}))}},bge=class extends uc{constructor(r){super();this.delegate=r;this._cachedContextItems=new Fr(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a,c){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let u=await this.delegate.resolveAllProviders(r,n,i,o,a,c);return u.length>0&&r&&this._cachedContextItems.set(r,u),u}};function SY(t,e){return new bge(new xge(t,e))}s(SY,"getContextProviderRegistry");function dGe(t,e,r){let n=t.get(Rl).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:c,resolutionTimeMs:l,matchScore:u,data:f}=o,p=n.get(a),m=p?.usage??"none";(u<=0||c==="none"||c==="error")&&(m="none");let h={providerId:a,resolution:c,resolutionTimeMs:l,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:f.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(E=>E.usage==="full"||E.usage==="partial"||E.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(E=>E.usage==="partial"||E.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s(dGe,"telemetrizeContextItems");function fGe(t){return t.matchScore>0&&t.resolution!=="error"}s(fGe,"matchContextItems");function RY(t,e){let r=Ige(t,e),n=vi(t,Rt.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(Ry).getIds();return Array.from(new Set([...i,...r,...n]))}s(RY,"getActiveContextProviders");function Ige(t,e){return u6(t)?["*"]:t.get(Bt).contextProviders(e)}s(Ige,"getExpContextProviders");function Tge(t,e){return RY(t,e).length>0}s(Tge,"useContextProviderAPI");function NMt(t,e){let r=vi(t,Rt.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Bt).contextProviderTimeBudget(e)}s(NMt,"getContextProviderTimeBudget");var _m=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Fr(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o,a){let c=this.ctx.get(uc),{textDocument:l,originalPosition:u,originalOffset:f,originalVersion:p,editsWithPosition:m}=e,h=c.resolveAllProviders(r,n,{uri:l.uri,languageId:l.detectedLanguageId,version:p,offset:f,position:u,proposedEdits:m.length>0?m:void 0},i,o,a?.data);this.scheduledResolutions.set(r,h)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};d();d();var kY=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await rE(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let c=this.nodeMatch[a.type];if(c){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((l==""?a.namedChildren[0]:a.childForFieldName(l))?.type==c)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,c=a?.nextSibling;for(;c&&c.type=="comment";){let l=c.startPosition.row==o.endPosition.row&&c.startPosition.column>=o.endPosition.column,u=c.startPosition.row>a.endPosition.row&&c.startPosition.column>a.startPosition.column;if(l||u)o=c,c=c.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},PY=class extends kY{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=mGe(r,n),this.isBlockStart(LMt(r,n))&&this.isBlockBodyEmpty(r,n)}};function LMt(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(LMt,"getLineAtOffset");function mGe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(mGe,"rewindToNearestNonWs");function pGe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(pGe,"indent");function MMt(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=pGe(t,r),i=pGe(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(MMt,"outdented");var ky=class extends kY{constructor(r,n,i,o,a,c,l){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=c;this.curlyBraceLanguage=l}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&b7e(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=mGe(r,n);let i=await rE(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let f=o;for(;f.parent;){if(f.type=="function_signature"||f.type=="method_signature"){let p=o.nextSibling;return p&&f.hasError()&&MMt(f,p,r)?!0:!f.children.find(h=>h.type==";")&&f.endIndex<=n}f=f.parent}}let a=null,c=null,l=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){c=u;break}if(this.nodeMatch[u.type]){l=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(c!=null){if(!c.parent||!this.nodeMatch[c.parent.type])return!1;if(this.languageId=="python"){let f=c.previousSibling;if(f!=null&&f.hasError()&&(f.text.startsWith('"""')||f.text.startsWith("'''")))return!0}return this.isBlockEmpty(c,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let f=[...a.children].reverse(),p=f.find(h=>this.startKeywords.includes(h.type)),m=f.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=f.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=f.find(E=>E.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=f.find(E=>E.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||f.find(E=>E.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=f.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||f.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(l!=null){let f=this.nodeMatch[l.type],p=l.children.slice().reverse().find(m=>m.type==f);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(l.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(l.type),h=m==""?l.children[0]:l.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},FMt={python:new ky("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new ky("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new ky("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new ky("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new PY("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new PY("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new ky("csharp",{},new Map([]),[],"block",null,!0),java:new ky("java",{},new Map([]),[],"block",null,!0),php:new ky("php",{},new Map([]),[],"block",null,!0),cpp:new ky("cpp",{},new Map([]),[],"block",null,!0)};function wge(t){if(!O0(t))throw new Error(`Language ${t} is not supported`);return FMt[e$(t)]}s(wge,"getBlockParser");async function hGe(t,e,r){return O0(t)?wge(t).isEmptyBlockStart(e,r):!1}s(hGe,"isEmptyBlockStart");async function gGe(t,e,r,n){if(O0(t))return wge(t).isBlockBodyFinished(e,r,n)}s(gGe,"isBlockBodyFinished");async function AGe(t,e,r){if(O0(t))return wge(t).getNodeStart(e,r)}s(AGe,"getNodeStart");var i8n=new wt("parseBlock");function jM(t,e,r){let n=e.getText(ns.range(ns.position(0,0),r)),i=e.offsetAt(r),o=e.detectedLanguageId;return a=>gGe(o,n,a,i)}s(jM,"parsingBlockFinished");function DY(t,e){return hGe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(DY,"isEmptyBlockStartUtil");async function yGe(t,e,r,n){let o=e.getText(ns.range(ns.position(0,0),r))+n,a=await AGe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(yGe,"getNodeStartUtil");var OMt=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),QMt=new RegExp(`^(${OMt.join("|")})`);function UMt(t){return QMt.test(t.trimLeft().toLowerCase())}s(UMt,"isContinuationLine");function BY(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(BY,"indentationOfLine");function NY(t,e){let r=t.getText(),n=t.offsetAt(e);return _ge(r,n,t.detectedLanguageId)}s(NY,"contextIndentation");function _ge(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(f,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<f.length;)g=BY(f[h]),y=h,h+=m;if(r==="python"&&m===-1){h++;let E=f[h].trim();if(E.endsWith('"""')){if(!(E.startsWith('"""')&&E!=='"""'))for(h--;h>=0&&!f[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=BY(f[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,c]=o(n,n.length-1,-1),l=(()=>{if(!(a===void 0||c===void 0))for(let f=c-1;f>=0;f--){let p=BY(n[f]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:l,current:a??0,next:u}}s(_ge,"contextIndentationFromText");var qMt=!1;function HMt(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&qMt&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let c=Math.max(e.current,e.next??0);for(let l=a;l<n.length;l++){let u=n[l];l==0&&o!==void 0&&(u=o+u);let f=BY(u);if(f!==void 0&&(f<c||f===c&&!UMt(u)))return n.slice(0,l).join(`
`).length}return"continue"}s(HMt,"completionCutOrContinue");function CGe(t,e){return async r=>{let n=HMt(r,t,e);return n==="continue"?void 0:n}}s(CGe,"indentationBlockFinished");d();d();d();d();d();d();var WMt={tokenizerName:"o200k_base"};function GMt(t){return{...WMt,...t}}s(GMt,"cursorContextOptions");function VM(t,e={}){let r=GMt(e),n=zo(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(VM,"getCursorContext");d();d();var jMt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function EGe(t){let e=jMt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(EGe,"announceSnippet");var Sge=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var Rge=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=YMt.get(e.languageId)??zMt}tokenize(e){return new Set(VMt(e).filter(r=>!this.stopsForLanguage.has(r)))}},vGe=new Sge(20),y3=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Rge(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=vGe.get(o)??[],c=a.length==0,l=c?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[f,p]]of this.getWindowsDelineations(i).entries()){if(c){let g=new Set;l.slice(f,p).forEach(y=>y.forEach(E=>g.add(E),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&f>0&&n[n.length-1].endLine>f){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=f,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:f,endLine:p})}return c&&vGe.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let c=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:c,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function VMt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(VMt,"splitIntoWords");var $Mt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),zMt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...$Mt]),YMt=new Map([]);d();function LY(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(LY,"getBasicWindowDelineations");var MY=class t extends y3{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return LY(this.windowLength,e)}_getCursorContextInfo(e){return VM(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return KMt(e,r)}};function KMt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(KMt,"computeScore");d();var FY=class t extends y3{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return LY(this.windowLength,e)}_getCursorContextInfo(e){return VM(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):VM(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return JMt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await rE(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function JMt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(JMt,"computeScore");var XMt=0,ZMt=60,eFt=4,tFt=1,rFt=20,nFt=1e4,xGe={snippetLength:ZMt,threshold:XMt,maxTopSnippets:eFt,maxCharPerFile:nFt,maxNumberOfFiles:rFt,maxSnippetsPerFile:tFt,useSubsetMatching:!1};var kge={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function iFt(t,e){return(e.useSubsetMatching?FY.FACTORY(e.snippetLength):MY.FACTORY(e.snippetLength)).to(t)}s(iFt,"getMatcher");async function bGe(t,e,r){let n=iFt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(c=>({relativePath:a.relativePath,...c}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(bGe,"getSimilarSnippets");function IGe(t,e){return{...kge,useSubsetMatching:Pge(t,e)}}s(IGe,"getCppSimilarFilesOptions");function TGe(t){return kge.maxTopSnippets}s(TGe,"getCppNumberOfSnippets");var oFt=new Map([["cpp",IGe]]);function OY(t,e,r){let n=oFt.get(r);return n?n(t,e):{...xGe,useSubsetMatching:Pge(t,e)}}s(OY,"getSimilarFilesOptions");var sFt=new Map([["cpp",TGe]]);function wGe(t,e){let r=sFt.get(e);return r?r(t):E7e}s(wGe,"getNumberOfSnippets");function Pge(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||vi(t,Rt.UseSubsetMatching))??!1}s(Pge,"useSubsetMatching");d();d();var aFt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function cFt(t){return aFt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(cFt,"isOomError");function yI(t,e,r,n=pn){if(!Du(e)){if(e instanceof Error){let i=e;cFt(i)?t.get(po).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(po).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(po).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(po).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(po).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(yI,"handleException");function _Ge(t){process.addListener("uncaughtException",r=>{yI(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,yI(t,r,"unhandledRejection")}finally{e=!1}})}s(_Ge,"registerDefaultHandlers");d();d();var lFt="content_excluded";async function SGe(t,e,r,n){let i=_Y(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(f=>f.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:f.providerId,data:p}))),c=t.get(br),l=new Map;await Promise.all(Array.from(o).map(async f=>{l.set(f,await c.getTextDocumentValidation({uri:f}))}));let u=t.get(Rl).getStatisticsForCompletion(e);return a.filter(f=>{let m=[f.data.uri,...f.data.additionalUris??[]].every(h=>l.get(h)?.status==="valid");return m?u.addExpectations(f.providerId,[[f.data,"included"]]):u.addExpectations(f.providerId,[[f.data,lFt]]),m}).map(f=>f.data)}s(SGe,"getCodeSnippetsFromContextItems");function RGe(t,e){let r=t.get(br);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(RGe,"addRelativePathToCodeSnippets");d();function Qa(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(Qa,"Text");function CI(t){return t.children}s(CI,"Chunk");d();function Lr(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(Lr,"functionComponentFunction");function hg(t){return{type:"f",children:t}}s(hg,"fragmentFunction");hg.isFragmentFunction=!0;var QY=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Nf,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=RGe(t.ctx,r),c=new Map;for(let u of a){let f=u.relativePath??u.snippet.uri,p=c.get(f);p===void 0&&(p=[],c.set(f,p)),p.push(u)}let l=[];for(let[u,f]of c.entries()){let p=f.filter(m=>m.snippet.value.length>0);p.length>0&&l.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(l.length!==0)return l.sort((u,f)=>f.importance-u.importance),l.reverse(),l.map(u=>{let f=[];return f.push(Lr(Qa,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{f.push(Lr(Qa,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&f.push(Lr(Qa,{children:"---"}))}),Lr(CI,{children:f})})},"CodeSnippets");d();function Bge(t){return t.children}s(Bge,"CompletionsContext");function Dge(t){return t.children}s(Dge,"StableCompletionsContext");function Nge(t){return t.children}s(Nge,"AdditionalCompletionsContext");function UY(t){return t.name===Bge.name||t.name===Dge.name||t.name===Nge.name}s(UY,"isContextNode");d();d();d();function kGe(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(kGe,"findEditDistanceScore");var PGe=50;function Lge(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(Lge,"approximateMaxCharacters");function $M(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(Nf,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=Lge(a);return Lr(hg,{children:[Lr(u2,{document:r,position:i,maxCharacters:m}),Lr(qY,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})]})}s($M,"CurrentFile");function u2(t){if(t.document===void 0||t.position===void 0)return Lr(Qa,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Lr(Qa,{children:e})}s(u2,"BeforeCursor");function qY(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return Lr(Qa,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Lr(Qa,{});if(r===o)return Lr(Qa,{children:r});let a=o;if(r!==""){let c=zo(t.tokenizer),l=c.takeFirstTokens(o,PGe);l.tokens.length>0&&100*kGe(l.tokens,c.takeFirstTokens(r,PGe).tokens)?.score<(t.suffixMatchThreshold??JV)*l.tokens.length&&(a=r)}return a!==r&&n(a),Lr(Qa,{children:a})}s(qY,"AfterCursor");function BGe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0);e.useData(Nf,u=>{let f=u.document;(u.document.uri!==r?.uri||f.getText()!==r?.getText())&&n(f),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&c(u.maxPromptTokens)});let l=Lge(a);return Lr(u2,{document:r,position:i,maxCharacters:l})}s(BGe,"DocumentPrefix");function DGe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(Nf,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=Lge(a);return Lr(qY,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})}s(DGe,"DocumentSuffix");d();var HY=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,c]=this.preparePrefixBlocks(e,o),{elidedSuffix:l,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,c,o),f=this.elidePrefix(a,u,c,o);return{blocks:[l,...f],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,c)=>{let l=0,f=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return l+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:l,markedForRemoval:!1,originalIndex:c,lines:f}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let c=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:c.text,elidedTokens:c.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-c.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(f=>!f.markedForRemoval).flatMap(f=>f.lines);if(a.length===0)return[];let[c,l]=this.trimPrefixLinesToFit(a,r,i),u=l;return o.map(f=>{if(f.markedForRemoval)return u+f.tokens<=r&&!f.chunks?(u+=f.tokens,{...f,elidedValue:f.value,elidedTokens:f.tokens}):{...f,elidedValue:"",elidedTokens:0};let p=c.filter(h=>h.componentPath===f.componentPath&&h.line!=="").map(h=>h.line).join(""),m=f.tokens;return p!==f.value&&(m=p!==""?i.tokenLength(p):0),{...f,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(c=>a.chunks?.has(c))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let c=e[a],l=c.tokens;if(i+l<=r)o.unshift(c),i+=l;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let l=n.takeLastTokens(a.line,r);return o.push({line:l.text,componentPath:a.componentPath,tokens:l.tokens.length}),[o,l.tokens.length]}let c=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(c)}return[o,i]}};function NGe(t){return t.map(e=>e.elidedValue).join("")}s(NGe,"makePrompt");function LGe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(LGe,"makePrefixPrompt");function MGe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(MGe,"makeContextPrompt");d();var C3=class{constructor(e,r=Mge()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((c,l)=>l(e,r,c),{...i});if(n(e,r,o))for(let c of e.children??[])this.walkSnapshotNode(c,e,n,o)}};function Mge(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{if(t.name===CI.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}s(Mge,"defaultTransformers");d();var zM={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Fge={};for(let[t,e]of Object.entries(zM))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)Fge[r]=t;else Fge[t]=t;function OGe(t){return Fge[t]}s(OGe,"mdCodeBlockLangToLanguageId");var uFt={start:"//",end:""},dFt=["php","plaintext"],Oge={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function QGe(t){return Object.values(Oge).includes(t.trim())}s(QGe,"isShebangLine");function fFt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(fFt,"hasLanguageMarker");function pFt(t,e){let r=zM[e]?zM[e].lineComment:uFt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(pFt,"comment");function E3(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>pFt(o,e)).join(`
`);return r?i+`
`:i}s(E3,"commentBlockAsSingles");function UGe(t){let{languageId:e}=t;return dFt.indexOf(e)===-1&&!fFt(t)?e in Oge?Oge[e]:`Language: ${e}`:""}s(UGe,"getLanguageMarker");function qGe(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(qGe,"getPathMarker");function YM(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(YM,"newLineEnded");function HGe(t){return FGe(typeof t=="string"?t:"plaintext")}s(HGe,"getLanguage");function FGe(t){return zM[t]!==void 0?{languageId:t,...zM[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(FGe,"_getLanguage");var mFt=5,v3=class{constructor(){this.renderId=0;this.formatPrefix=NGe}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",c=r.tokenizer??"o200k_base",{prefixBlocks:l,suffixBlock:u,componentStatistics:f}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),g=new HY,{blocks:[y,...E]}=g.elide(l,p,u,m,zo(c)),x=performance.now(),b=this.formatPrefix(E),_=this.formatContext?this.formatContext(E):void 0,k=y.elidedValue,P=E.reduce((N,M)=>N+M.elidedTokens,0);return f.push(...hFt([...E,y])),{prefix:b,prefixTokens:P,suffix:k,suffixTokens:y.elidedTokens,context:_,status:"ok",metadata:{renderId:i,tokenizer:c,elisionTimeMs:x-h,renderTimeMs:performance.now()-o,componentStatistics:f,updateDataTimeMs:f.reduce((N,M)=>N+(M.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-mFt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],c=!1;if(new C3(e,Qge).walkSnapshot((f,p,m)=>{if(f===e||(f.name===$M.name&&(c=!0),f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.value===void 0||f.value===""))return!0;let h=m.chunks;if(m.type==="suffix")o.push({value:KM(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let g=f.value.endsWith(r)?f.value:f.value+r,y=g;m.type==="prefix"?y=f.value:QGe(f.value)?y=g:y=E3(g,n),i.push({type:m.type==="prefix"?"prefix":"context",value:KM(y),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source})}return!0}),!c)throw new Error(`Node of type ${$M.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},Qge=[...Mge(),(t,e,r)=>UY(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===u2.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===qY.name?{...r,type:"suffix"}:r];function hFt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(hFt,"computeComponentStatistics");function KM(t){return t.replace(/\r\n?/g,`
`)}s(KM,"normalizeLineEndings");d();var WY=s((t,e)=>{let[r,n]=e.useState();if(e.useData(Nf,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(br),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},c=i.findNotebook(r);return a.relativePath&&!c?Lr(gFt,{docInfo:a}):Lr(AFt,{docInfo:a})}},"DocumentMarker"),gFt=s(t=>Lr(Qa,{children:qGe(t.docInfo)}),"PathMarker"),AFt=s(t=>Lr(Qa,{children:UGe(t.docInfo)}),"LanguageMarker");d();d();d();d();function JM(t,e="Unreachable"){throw new Error(e)}s(JM,"assertNever");function kl(t,e="unexpected state"){if(!t)throw new un(`Assertion Failed: ${e}`)}s(kl,"assert");function gg(t){if(!t()){debugger;t(),t3(new un("Assertion Failed"))}}s(gg,"assertFn");function d2(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(d2,"checkAdjacentItems");d();d();d();d();d();var fE=s((t,e)=>t===e,"strictEquals");d();d();var js=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},XM=class{constructor(){this._first=js.Undefined;this._last=js.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===js.Undefined}clear(){let e=this._first;for(;e!==js.Undefined;){let r=e.next;e.prev=js.Undefined,e.next=js.Undefined,e=r}this._first=js.Undefined,this._last=js.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new js(e);if(this._first===js.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==js.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==js.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==js.Undefined&&e.next!==js.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===js.Undefined&&e.next===js.Undefined?(this._first=js.Undefined,this._last=js.Undefined):e.next===js.Undefined?(this._last=this._last.prev,this._last.next=js.Undefined):e.prev===js.Undefined&&(this._first=this._first.next,this._first.prev=js.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==js.Undefined;)yield e.element,e=e.next}};d();var yFt=globalThis.performance&&typeof globalThis.performance.now=="function",x3=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=yFt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var WGe=!1,CFt=!1,f2;(ie=>{ie.None=s(()=>ds.None,"None");function e(V){if(CFt){let{onDidAddListener:H}=V,z=ZM.create(),X=0;V.onDidAddListener=()=>{++X===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),z.print()),H?.()}}}s(e,"_addLeakageTraceLogic");function r(V,H){return h(V,()=>{},0,void 0,!0,void 0,H)}ie.defer=r,s(r,"defer");function n(V){return(H,z=null,X)=>{let ue=!1,ne;return ne=V(me=>{if(!ue)return ne?ne.dispose():ue=!0,H.call(z,me)},null,X),ue&&ne.dispose(),ne}}ie.once=n,s(n,"once");function i(V,H){return ie.once(ie.filter(V,H))}ie.onceIf=i,s(i,"onceIf");function o(V,H,z){return p((X,ue=null,ne)=>V(me=>X.call(ue,H(me)),null,ne),z)}ie.map=o,s(o,"map");function a(V,H,z){return p((X,ue=null,ne)=>V(me=>{H(me),X.call(ue,me)},null,ne),z)}ie.forEach=a,s(a,"forEach");function c(V,H,z){return p((X,ue=null,ne)=>V(me=>H(me)&&X.call(ue,me),null,ne),z)}ie.filter=c,s(c,"filter");function l(V){return V}ie.signal=l,s(l,"signal");function u(...V){return(H,z=null,X)=>{let ue=Mqe(...V.map(ne=>ne(me=>H.call(z,me))));return m(ue,X)}}ie.any=u,s(u,"any");function f(V,H,z,X){let ue=z;return o(V,ne=>(ue=H(ue,ne),ue),X)}ie.reduce=f,s(f,"reduce");function p(V,H){let z,X={onWillAddFirstListener(){z=V(ue.fire,ue)},onDidRemoveLastListener(){z?.dispose()}};H||e(X);let ue=new $0(X);return H?.add(ue),ue.event}s(p,"snapshot");function m(V,H){return H instanceof Array?H.push(V):H&&H.add(V),V}s(m,"addAndReturnDisposable");function h(V,H,z=100,X=!1,ue=!1,ne,me){let he,Qe,ke,tt=0,Fe,ht={leakWarningThreshold:ne,onWillAddFirstListener(){he=V(vt=>{tt++,Qe=H(Qe,vt),X&&!ke&&(St.fire(Qe),Qe=void 0),Fe=s(()=>{let It=Qe;Qe=void 0,ke=void 0,(!X||tt>1)&&St.fire(It),tt=0},"doFire"),typeof z=="number"?(clearTimeout(ke),ke=setTimeout(Fe,z)):ke===void 0&&(ke=0,queueMicrotask(Fe))})},onWillRemoveListener(){ue&&tt>0&&Fe?.()},onDidRemoveLastListener(){Fe=void 0,he.dispose()}};me||e(ht);let St=new $0(ht);return me?.add(St),St.event}ie.debounce=h,s(h,"debounce");function g(V,H=0,z){return ie.debounce(V,(X,ue)=>X?(X.push(ue),X):[ue],H,void 0,!0,void 0,z)}ie.accumulate=g,s(g,"accumulate");function y(V,H=(X,ue)=>X===ue,z){let X=!0,ue;return c(V,ne=>{let me=X||!H(ne,ue);return X=!1,ue=ne,me},z)}ie.latch=y,s(y,"latch");function E(V,H,z){return[ie.filter(V,H,z),ie.filter(V,X=>!H(X),z)]}ie.split=E,s(E,"split");function x(V,H=!1,z=[],X){let ue=z.slice(),ne=V(Qe=>{ue?ue.push(Qe):he.fire(Qe)});X&&X.add(ne);let me=s(()=>{ue?.forEach(Qe=>he.fire(Qe)),ue=null},"flush"),he=new $0({onWillAddFirstListener(){ne||(ne=V(Qe=>he.fire(Qe)),X&&X.add(ne))},onDidAddFirstListener(){ue&&(H?setTimeout(me):me())},onDidRemoveLastListener(){ne&&ne.dispose(),ne=null}});return X&&X.add(he),he.event}ie.buffer=x,s(x,"buffer");function b(V,H){return s((X,ue,ne)=>{let me=H(new k);return V(function(he){let Qe=me.evaluate(he);Qe!==_&&X.call(ue,Qe)},void 0,ne)},"fn")}ie.chain=b,s(b,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(H){return this.steps.push(H),this}forEach(H){return this.steps.push(z=>(H(z),z)),this}filter(H){return this.steps.push(z=>H(z)?z:_),this}reduce(H,z){let X=z;return this.steps.push(ue=>(X=H(X,ue),X)),this}latch(H=(z,X)=>z===X){let z=!0,X;return this.steps.push(ue=>{let ne=z||!H(ue,X);return z=!1,X=ue,ne?ue:_}),this}evaluate(H){for(let z of this.steps)if(H=z(H),H===_)break;return H}}function P(V,H,z=X=>X){let X=s((...he)=>me.fire(z(...he)),"fn"),ue=s(()=>V.on(H,X),"onFirstListenerAdd"),ne=s(()=>V.removeListener(H,X),"onLastListenerRemove"),me=new $0({onWillAddFirstListener:ue,onDidRemoveLastListener:ne});return me.event}ie.fromNodeEventEmitter=P,s(P,"fromNodeEventEmitter");function N(V,H,z=X=>X){let X=s((...he)=>me.fire(z(...he)),"fn"),ue=s(()=>V.addEventListener(H,X),"onFirstListenerAdd"),ne=s(()=>V.removeEventListener(H,X),"onLastListenerRemove"),me=new $0({onWillAddFirstListener:ue,onDidRemoveLastListener:ne});return me.event}ie.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function M(V,H){return new Promise(z=>n(V)(z,null,H))}ie.toPromise=M,s(M,"toPromise");function J(V){let H=new $0;return V.then(z=>{H.fire(z)},()=>{H.fire(void 0)}).finally(()=>{H.dispose()}),H.event}ie.fromPromise=J,s(J,"fromPromise");function se(V,H){return V(z=>H.fire(z))}ie.forward=se,s(se,"forward");function K(V,H,z){return H(z),V(X=>H(X))}ie.runAndSubscribe=K,s(K,"runAndSubscribe");class G{constructor(H,z){this._observable=H;this._counter=0;this._hasChanged=!1;let X={onWillAddFirstListener:s(()=>{H.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{H.removeObserver(this)},"onDidRemoveLastListener")};z||e(X),this.emitter=new $0(X),z&&z.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(H){this._counter++}handlePossibleChange(H){}handleChange(H,z){this._hasChanged=!0}endUpdate(H){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function q(V,H){return new G(V,H).emitter.event}ie.fromObservable=q,s(q,"fromObservable");function le(V){return(H,z,X)=>{let ue=0,ne=!1,me={beginUpdate(){ue++},endUpdate(){ue--,ue===0&&(V.reportChanges(),ne&&(ne=!1,H.call(z)))},handlePossibleChange(){},handleChange(){ne=!0}};V.addObserver(me),V.reportChanges();let he={dispose(){V.removeObserver(me)}};return X instanceof mu?X.add(he):Array.isArray(X)&&X.push(he),he}}ie.fromObservableLight=le,s(le,"fromObservableLight")})(f2||={});var Uge=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new x3,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},GGe=-1;var qge=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(c),console.warn(o);let l=new Hge(c,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},ZM=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Hge=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},Wge=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},EFt=0,b3=class{constructor(e){this.value=e;this.id=EFt++}static{s(this,"UniqueContainer")}},vFt=2,xFt=s((t,e)=>{if(t instanceof b3)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),$0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=GGe>0||this._options?.leakWarningThreshold?new qge(e?.onListenerError??t3,this._options?.leakWarningThreshold??GGe):void 0,this._perfMon=this._options?._profName?new Uge(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(WGe){let e=this._listeners;queueMicrotask(()=>{xFt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],f=new Wge(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||t3)(f),ds.None}if(this._disposed)return ds.None;r&&(e=e.bind(r));let i=new b3(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=ZM.create(),o=this._leakageMon.check(i.stack,this._size+1)),WGe&&(i.stack=a??ZM.create()),this._listeners?this._listeners instanceof b3?(this._deliveryQueue??=new Gge,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let c=ac(()=>{o?.(),this._removeListener(i)});return n instanceof mu?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*vFt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||t3;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof b3)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Gge=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};d();var Od=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return zGe(e,this)}},jGe=new Map,jge=new WeakMap;function zGe(t,e){let r=jge.get(t);if(r)return r;let n=bFt(t,e);if(n){let i=jGe.get(n)??0;i++,jGe.set(n,i);let o=i===1?n:`${n}#${i}`;return jge.set(t,o),o}}s(zGe,"getDebugName");function bFt(t,e){let r=jge.get(t);if(r)return r;let n=e.owner?TFt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=GY(a),i!==void 0))return n+i;if(e.owner!==void 0){let c=IFt(e.owner,t);if(c!==void 0)return n+c}}s(bFt,"computeDebugName");function IFt(t,e){for(let r in t)if(t[r]===e)return r}s(IFt,"findKey");var VGe=new Map,$Ge=new WeakMap;function TFt(t){let e=$Ge.get(t);if(e)return e;let r=wFt(t),n=VGe.get(r)??0;n++,VGe.set(r,n);let i=n===1?r:`${r}#${n}`;return $Ge.set(t,i),i}s(TFt,"formatOwner");function wFt(t){let e=t.constructor;return e?e.name:"Object"}s(wFt,"getClassName");function GY(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(GY,"getFunctionName");d();var p2;function VY(t){p2?p2 instanceof jY?p2.loggers.push(t):p2=new jY([p2,t]):p2=t}s(VY,"addLogger");function fa(){return p2}s(fa,"getLogger");var Vge;function YGe(t){Vge=t}s(YGe,"setLogObservableFn");function KGe(t){Vge&&Vge(t)}s(KGe,"logObservable");var jY=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var JGe;function XGe(t){JGe=t}s(XGe,"_setRecomputeInitiallyAndOnChange");var ZGe;function eje(t){ZGe=t}s(eje,"_setKeepObserved");var $ge;function tje(t){$ge=t}s(tje,"_setDerivedOpts");var $Y=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return $ge({owner:n,debugName:s(()=>{let o=GY(i);if(o!==void 0)return o;let c=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(c)return`${this.debugName}.${c[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return $ge({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(JGe(this,r)),this}keepObserved(e){return e.add(ZGe(this)),this}get debugValue(){return this.get()}},EI=class extends $Y{constructor(){super();this.observers=new Set;fa()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&fa()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&fa()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!fa();return KGe(this),r||fa()?.handleObservableCreated(this),this}};function YY(t,e){let r=new I3(t,e);try{t(r)}finally{r.finish()}}s(YY,"transaction");function zge(t,e,r){t?e(t):YY(e,r)}s(zge,"subtransaction");var I3=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];fa()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():GY(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,fa()?.handleEndTransaction(this)}};function Ag(t,e){let r;return typeof t=="string"?r=new Od(void 0,t,void 0):r=new Od(t,void 0,void 0),new zY(r,e,fE)}s(Ag,"observableValue");var zY=class extends EI{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,fa()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new I3(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),fa()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let c of this.observers)n.updateObserver(c,this),c.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};d();d();function m2(t){return new T3(new Od(void 0,void 0,t),t,void 0,void 0)}s(m2,"autorun");function Yge(t,e){return new T3(new Od(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(Yge,"autorunOpts");function KY(t,e){return new T3(new Od(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(KY,"autorunHandleChanges");function Kge(t,e){let r=new mu,n=KY({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return ac(()=>{n.dispose(),r.dispose()})}s(Kge,"autorunWithStoreHandleChanges");function Jge(t){let e=new mu,r=Yge({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return ac(()=>{r.dispose(),e.dispose()})}s(Jge,"autorunWithStore");var T3=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),fa()?.handleAutorunCreated(this),this._runIfNeeded(),n3(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),fa()?.handleAutorunDisposed(this),i3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){fa()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){s2(n)}finally{this._isRunning=!1}}}finally{this.disposed||fa()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}gg(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){fa()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){s2(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new un("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=T3)(m2||={});d();function JY(t,e){return new h2(new Od(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??fE)}s(JY,"derivedOpts");tje(JY);var h2=class extends EI{constructor(r,n,i,o,a=void 0,c){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=c;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,fa()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let c of this.dependenciesToBeRemoved)c.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),fa()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){s2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new un("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}gg(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){fa()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){s2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new un("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};d();d();function Xge(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new vI(new Od(e,void 0,n),r,n,()=>vI.globalTransaction,fE)}s(Xge,"observableFromEvent");var vI=class extends EI{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,zge(this._getTransaction(),c=>{fa()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)c.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),a||fa()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=vI;function e(n,i){let o=!1;vI.globalTransaction===void 0&&(vI.globalTransaction=n,o=!0);try{i()}finally{o&&(vI.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(Xge||={});function nje(t){let e=new XY(!1,void 0);return t.addObserver(e),ac(()=>{t.removeObserver(e)})}s(nje,"keepObserved");eje(nje);function ije(t,e){let r=new XY(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),ac(()=>{t.removeObserver(r)})}s(ije,"recomputeInitiallyAndOnChange");XGe(ije);var XY=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function Sm(t,e,r,n){let i=new ZY(r,n);return JY({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new ZY(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(Sm,"mapObservableArrayCached");var ZY=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let c=new mu;a={out:this._map(i,c),store:c},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function Zge(t,e){let r;return Kge({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(Zge,"runOnChange");d();d();d();var oje=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),eK;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof w3?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:f2.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:oje})})(eK||={});var w3=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?oje:(this._emitter||(this._emitter=new $0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},pE=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new w3),this._token}cancel(){this._token?this._token instanceof w3&&this._token.cancel():this._token=eK.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof w3&&this._token.dispose():this._token=eK.None}};d();var tK;function sje(t){tK||(tK=new tF,VY(tK)),tK.addFilteredObj(t)}s(sje,"logObservableToConsole");var tF=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return _Ft([_3(kFt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[_3(" "),Rm(eF(e.oldValue,70),{color:"red",strikeThrough:!0}),_3(" "),Rm(eF(e.newValue,60),{color:"green"})]:[_3(" (unchanged)")]:[_3(" "),Rm(eF(e.newValue,60),{color:"green"}),_3(" (initial)")]}handleObservableCreated(e){if(e instanceof h2){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=c=>(i.push(c),o.apply(r,[c]));let a=r.endUpdate;r.endUpdate=c=>{let l=i.indexOf(c);return l===-1&&console.error("endUpdate called without beginUpdate",r.debugName,c.debugName),i.splice(l,1),a.apply(r,[c])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof h2){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([S3("observable value changed"),Rm(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return Rm(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([S3("derived recomputed"),Rm(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([S3("derived cleared"),Rm(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([S3("observable from event triggered"),Rm(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([S3("autorun"),Rm(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([S3("transaction"),Rm(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function _Ft(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let c of a)c&&i(c);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(_Ft,"consoleTextToArgs");function _3(t){return Rm(t,{color:"black"})}s(_3,"normalText");function S3(t){return Rm(PFt(`${t}: `,10),{color:"black",bold:!0})}s(S3,"formatKind");function Rm(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,c])=>`${o}${a}:${c};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(Rm,"styled");function eF(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?SFt(t,e):RFt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(eF,"formatValue");function SFt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${eF(i,e-r.length)}`}return r+=" ]",r}s(SFt,"formatArray");function RFt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${eF(o,e-r.length)}`}return r+=" }",r}s(RFt,"formatObject");function kFt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(kFt,"repeat");function PFt(t,e){for(;t.length<e;)t+=" ";return t}s(PFt,"padStr");YGe(sje);var BFt=!1;BFt&&VY(new tF);d();var g2;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(g2||={});d();d();d();function aje(t){return t}s(aje,"identity");var rK=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=aje):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},mE=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=aje):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};d();d();var km=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};d();function A2(t){return t<0?0:t>4294967295?4294967295:t|0}s(A2,"toUint32");function eAe(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(eAe,"escapeRegExpCharacters");function Pm(t){return t.split(/\r\n|\r|\n/)}s(Pm,"splitLines");function xI(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(xI,"commonPrefixLength");function hE(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(hE,"commonSuffixLength");var NFt=/^[\t\n\r\x20-\x7E]*$/;function tAe(t){return NFt.test(t)}s(tAe,"isBasicASCII");var kFn=String.fromCharCode(65279);var cje=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=LFt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function LFt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(LFt,"getGraphemeBreakRawData");var lje=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new km(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new rK({getCacheKey:JSON.stringify},e=>{function r(f){let p=new Map;for(let m=0;m<f.length;m+=2)p.set(f[m],f[m+1]);return p}s(r,"arrayToMap");function n(f,p){let m=new Map(f);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(f,p){if(!f)return p;let m=new Map;for(let[h,g]of f)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(f=>!f.startsWith("_")&&f in o);a.length===0&&(a=["_default"]);let c;for(let f of a){let p=r(o[f]);c=i(c,p)}let l=r(o._common),u=n(l,c);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new km(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},uje=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};d();var Ht=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new un(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new un(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new un(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new un(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};d();var tn=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};d();var lr=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,c=r.startLineNumber,l=r.startColumn,u=r.endLineNumber,f=r.endColumn;return n<c?(n=c,i=l):n===c&&(i=Math.max(i,l)),o>u?(o=u,a=f):o===u&&(a=Math.min(a,f)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new tn(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new tn(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let c=e.startColumn|0,l=r.startColumn|0;if(c===l){let u=e.endLineNumber|0,f=r.endLineNumber|0;if(u===f){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-f}return c-l}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};d();d();var $r=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new iK(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new iK(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new un("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new un(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new lr(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new lr(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Ht(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},iK=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=e3(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=fg(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=_he(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=_he(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let c=this._normalizedRanges[n],l=e._normalizedRanges[i];c.startLineNumber<l.startLineNumber?(a=c,n++):(a=l,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new $r(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=e3(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=fg(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let c=this._normalizedRanges[a];c.startLineNumber>o&&i.push(new $r(o,c.startLineNumber)),o=c.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new $r(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],c=o.intersect(a);c&&!c.isEmpty&&r.push(c),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var Pl=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new lr(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new lr(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new lr(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return $r.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new tn(e.lineNumber,e.column+this.columnCount):new tn(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return lr.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Bl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new rAe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Pm(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},rAe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Ht(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=fg(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new tn(n,i)}getRange(e){return lr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Pl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Pl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var yg=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var oK=class extends ds{constructor(r,n,i,o,a,c){super();this.id=r;this.workspaceRoot=c;this.value=Ag(this,n),this.selection=Ag(this,i),this.languageId=Ag(this,o),this._register(ac(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};d();d();function gE(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return KY({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let c=n.get(o.changedObservable);return a[c]===void 0&&(a[c]={value:void 0,changes:[]}),a[c].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[c,l]of Object.entries(e)){let u=l.read(o);a[c]===void 0&&(a[c]={value:u,changes:[],previous:i.get(c)}),a[c].value=u,a[c].previous=i.get(c)===void 0?void 0:i.get(c),i.set(c,u)}r(a)})}s(gE,"autorunWithChanges");d();var Py=class extends ds{static{s(this,"RecentEditsProvider")}};function MFt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(MFt,"editIsTooCloseToCursor");var sK=s((t,e)=>{let[r,n]=e.useState();return e.useData(Nf,async i=>{if(!i.document)return;let o=t.ctx.get(Py);if(o.isEnabled())o.start();else return;let a=o.config,c=o.getRecentEdits(),l=new Set,u=t.ctx.get(br),f=[];for(let m=c.length-1;m>=0&&!(f.length>=a.maxEdits);m--){let h=c[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!l.has(h.file);if(l.size+(g?1:0)>a.maxFiles)break;let E=h.file===i.document?.uri,x=E?i.position.line:void 0;if(MFt(h,E,x,a.activeDocDistanceLimitFromCursor))continue;let _=o.getEditSummary(h);if(_){l.add(h.file);let k=u.getRelativePath({uri:h.file});f.unshift(YM(`File: ${k}`)+YM(_))}}if(f.length===0){n(void 0);return}let p=YM("These are recently edited files. Do not suggest code that has been deleted.")+f.join("")+YM("End of recent edits");n(p)}),r?Lr(CI,{children:Lr(Qa,{children:r})}):void 0},"RecentEdits");d();d();d();d();var nAe=new Fr;function dje(t){return[...t].sort((e,r)=>{let n=nAe.get(e.uri)??0;return(nAe.get(r.uri)??0)-n})}s(dje,"sortByAccessTimes");var fje=s(t=>t.get(br).onDidFocusTextDocument(e=>{e&&nAe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var aK=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,r,n,i){let o=new Map,a=0;for(let c of e)if(!(a+c.getText().length>y2.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(c.uri.startsWith("file:")&&r.startsWith("file:")&&c.uri!==r&&cK(n,c.detectedLanguageId)&&(o.set(c.uri.toString(),{uri:c.uri.toString(),relativePath:this.docManager.getRelativePath(c),source:c.getText()}),a+=c.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=await this.truncateDocs(dje(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};d();d();function pje(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(pje,"shortCircuit");d();function OFt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(OFt,"defaultHash");function iAe(t,e={}){let{hash:r=OFt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(c=>{throw n.delete(o),c})),n.set(o,a),a}}s(iAe,"memoize");var mje={entries:[],traits:[]},lK={entries:new Map,traits:[]},oAe=class extends Fr{constructor(r,n=2*60*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},rl=new wt("relatedFiles"),QFt=1e3,uK=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},C2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let c=o.entries.get(a.type);c||(c=new Map,o.entries.set(a.type,c));for(let l of a.uris)try{rl.debug(this.context,`Processing ${l}`);let u=await this.getFileContent(l);if(!u||u.length==0){rl.debug(this.context,`Skip ${l} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(l,u)){rl.debug(this.context,`Skip ${l} due content exclusion.`);continue}u=t.dropBOM(u),c.set(l,u)}catch(u){rl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(ko).readFileString(e)}catch(r){rl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(_l).evaluate(e,r)).isBlocked}catch(n){rl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},UFt=3,hje=new oAe(QFt);async function gje(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(l){rl.exception(t,l,".getRelatedFiles"),a=void 0}a===void 0&&(hje.bumpRetryCount(e.uri)>=UFt?a=lK:a=void 0);let c=performance.now()-o;if(rl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(l=>l.size).reduce((l,u)=>l+u,0)} related files for '${e.uri}' in ${c}ms.`:`Failing fetching files for '${e.uri}' in ${c}ms.`),a===void 0)throw new uK;return a}s(gje,"getRelatedFiles");var sAe=iAe(gje,{cache:hje,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});sAe=pje(sAe,200,lK);async function dK(t,e,r,n,i,o=!1){let a=t.get(C2),c=lK;try{let l={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};c=o?await gje(t,l,r,n,a):await sAe(t,l,r,n,a)}catch(l){c=lK,l instanceof uK&&Dt(t,"getRelatedFilesList",r)}return rl.debug(t,c!=null?`Fetched following traits ${c.traits.map(l=>`{${l.name} : ${l.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),c}s(dK,"getRelatedFilesAndTraits");function cK(t,e){return YL(t)===YL(e)}s(cK,"considerNeighborFile");var y2=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,c){let l=e.get(br);t.instance===void 0&&(t.instance=new aK(l));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(qFt(e,i))return u;let f=await l.getTextDocument({uri:r});if(!f)return rl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=l.getWorkspaceFolder(f);if(!p)return rl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await dK(e,f,i,o,a,c);return m.entries.size===0?(rl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((E,x)=>{let b=t.getRelativePath(x,p.uri);if(!b||u.docs.has(x))return;let _={relativePath:b,uri:x,source:E};y.unshift(_),u.docs.set(x,_)}),y.length>0&&u.neighborSource.set(g,y.map(E=>E.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function qFt(t,e){return t.get(Bt).excludeRelatedFiles(e)||vi(t,Rt.ExcludeRelatedFiles)}s(qFt,"isExcludeRelatedFilesActive");function Aje(t,e){return t.get(Bt).includeNeighboringFiles(e)||vi(t,Rt.IncludeNeighboringFiles)}s(Aje,"isIncludeNeighborFilesActive");var fK=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(Nf,async l=>{l.document.uri!==r?.uri&&o([]),n(l.document);let u=y2.defaultEmptyResult();l.turnOffSimilarFiles||(u=await y2.getNeighborFilesAndTraits(t.ctx,l.document.uri,l.document.detectedLanguageId,l.telemetryData,l.cancellationToken,l.data));let f=await a(l.telemetryData,l.document,l,u);o(f)});async function a(l,u,f,p){let m=pK(t.ctx,l,u.detectedLanguageId);return(await c(m,l,u,f,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...EGe(g),score:g.score}))}s(a,"produceSimilarFiles");async function c(l,u,f,p,m){let h=l.similarFilesOptions||OY(t.ctx,u,f.detectedLanguageId),y=t.ctx.get(br).getRelativePath(f),E={uri:f.uri,source:f.getText(),offset:f.offsetAt(p.position),relativePath:y,languageId:f.detectedLanguageId};return await bGe(E,Array.from(m.docs.values()),h)}return s(c,"findSimilarSnippets"),Lr(hg,{children:[...i.map((l,u)=>Lr(HFt,{snippet:l}))]})},"SimilarFiles"),HFt=s((t,e)=>Lr(CI,{children:[Lr(Qa,{children:t.snippet.headline}),Lr(Qa,{children:t.snippet.snippet})]}),"SimilarFile");d();d();var mK=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Nf,a=>{a.traits!==r&&n(a.traits);let c=YL(a.document.detectedLanguageId);c!==i&&o(c)}),!(!r||r.length===0||!i))return Lr(hg,{children:[Lr(Qa,{children:`Consider this related information:
`}),...r.map(a=>Lr(Qa,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function yje(t,e){return vi(t,Rt.UseSplitContextPrompt)??t.get(Bt).enablePromptContextProxyField(e)}s(yje,"shouldUseSplitContextPrompt");function Cje(t){return Lr(hg,{children:[Lr(Dge,{children:[Lr(WY,{ctx:t,weight:.7}),Lr(mK,{weight:.6}),Lr(QY,{ctx:t,weight:.9}),Lr(fK,{ctx:t,weight:.8})]}),Lr(DGe,{weight:1}),Lr(Nge,{children:Lr(sK,{ctx:t,weight:.99})}),Lr(BGe,{weight:1})]})}s(Cje,"splitContextCompletionsPrompt");d();var Eje=0;function WFt(){Eje=0}s(WFt,"resetContextIndex");function GFt(){return Eje++}s(GFt,"getNextContextIndex");var hK=class extends v3{constructor(){super(...arguments);this.formatPrefix=LGe;this.formatContext=MGe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],c=!1;if(WFt(),new C3(r,jFt).walkSnapshot((f,p,m)=>{if(f===r||(f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.name===u2.name&&(c=!0),f.value===void 0||f.value===""))return!0;let h=m.chunks,g=m.type;if(g==="suffix")o.push({value:KM(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let y=g==="prefix",E=y||f.value.endsWith(n)?f.value:f.value+n;i.push({type:y?"prefix":"context",value:KM(E),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source,index:y?void 0:m.index})}return!0}),!c)throw new Error(`Node of type ${u2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},jFt=[...Qge,(t,e,r)=>UY(t)?{...r,index:GFt()}:r];d();function vje(t,e,r){let n=_Y(r,"Trait");for(let o of n)VFt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(vje,"getTraitsFromContextItems");function VFt(t,e,r,n){let i=t.get(Rl).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(VFt,"setupExpectationsForTraits");var $Ft=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function xje(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let l of r){let u=$Ft.get(l.name);u&&(a[u]=l.value)}let c=o.extendedBy(a,{});return Dt(e,t,c)}}s(xje,"ReportTraitsTelemetry");d();d();d();var gK=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},AK=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var yK=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let c=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let l=this.collectChildPaths(o);this.cleanupState(c,l)}else if(e.children){let c=[];for(let l=0;l<e.children.length;l++){let u=e.children[l];if(u){let f=this.reconcileNode(u,e.path,l,i);f!==void 0&&c.push(f)}}o.children=c}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(zFt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,c=i.children.map((l,u)=>this.virtualizeElement(l,a,u));return this.ensureUniqueKeys(c),{name:i.type,path:a,children:c.flat().filter(l=>l!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,c=new cAe(this.getOrCreateLifecycleData(a)),l=i(n.props,c),p=(Array.isArray(l)?l:[l]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:c}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new aAe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},aAe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},cAe=class{constructor(e){this.lifecycleData=e;this.stateHook=new gK(e.state),this.dataHook=new AK(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function zFt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(zFt,"isFragmentFunction");var rF=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new yK(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};var Cg=class{static{s(this,"CompletionsPromptFactory")}};function CK(t,e,r){return new uAe(new dAe(new fAe(t,e,r)))}s(CK,"createCompletionsPromptFactory");var uAe=class extends Cg{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return R3;try{return await this.delegate.prompt(r,n)}catch{return pAe}}},YFt=1200,dAe=class extends Cg{constructor(r){super();this.delegate=r}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(r,n){let i=new fn.CancellationTokenSource,o=i.token;return n?.onCancellationRequested(()=>{i.cancel()}),await Promise.race([this.delegate.prompt(r,o),new Promise(a=>{setTimeout(()=>{i.cancel(),a(Sje)},YFt)})])}};function Nf(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(Nf,"isCompletionRequestData");var lAe={default:{promptFunction:bje,renderer:v3},splitContext:{promptFunction:Cje,renderer:hK}};function bje(t){return Lr(hg,{children:[Lr(Bge,{children:[Lr(WY,{ctx:t,weight:.7}),Lr(mK,{weight:.6}),Lr(QY,{ctx:t,weight:.9}),Lr(fK,{ctx:t,weight:.8}),Lr(sK,{ctx:t,weight:.99})]}),Lr($M,{weight:1})]})}s(bje,"defaultCompletionsPrompt");var fAe=class extends Cg{constructor(r,n,i){super();this.ctx=r;this.promptOrdering=i??"default",this.virtualPrompt=n??new rF(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(r,n){try{return await this.createPromptUnsafe(r,n)}catch(i){return this.errorPrompt(i)}}async createPromptUnsafe({completionId:r,completionState:n,telemetryData:i,promptOpts:o},a){let{maxPromptLength:c,suffixPercent:l,suffixMatchThreshold:u}=pK(this.ctx,i,n.textDocument.detectedLanguageId),f=await this.failFastPrompt(n.textDocument,n.position,l,a);if(f)return f;let p=o?.separateContext?"splitContext":"default";this.setPromptOrdering(p);let m=performance.now(),{traits:h,codeSnippets:g,turnOffSimilarFiles:y,resolvedContextItems:E}=await this.resolveContext(r,n,i,a,o);if(await this.updateComponentData(n.textDocument,n.position,h,g,i,y,c,a,o,u,o?.tokenizer),a?.isCancellationRequested)return R3;let x=this.virtualPrompt.snapshot(a),b=x.status;if(b==="cancelled")return R3;if(b==="error")return this.errorPrompt(x.error);let _=this.renderer.render(x.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:c,suffixPercent:l,languageId:n.textDocument.detectedLanguageId},a);if(_.status==="cancelled")return R3;if(_.status==="error")return this.errorPrompt(_.error);let[k,P]=k3(_.prefix),N={..._,prefix:k},M;if(Tge(this.ctx,i)){let se=lGe(_.metadata.componentStatistics);this.ctx.get(Rl).getStatisticsForCompletion(r).computeMatch(se),M=dGe(this.ctx,r,E),pn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(M)}'`)}let J=performance.now();return this.resetIfEmpty(_),this.successPrompt(N,J,m,P,M)}async updateComponentData(r,n,i,o,a,c,l,u,f={},p,m){let h=this.createRequestData(r,n,a,u,f,l,i,o,c,p,m);await this.pipe.pump(h)}async resolveContext(r,n,i,o,a={}){let c=[],l,u,f=!1;if(Tge(this.ctx,i)){c=await this.ctx.get(_m).resolution(r);let{textDocument:p}=n,m=c.filter(fGe);KFt(this.ctx,p.detectedLanguageId,m,i)||(f=!0),l=vje(this.ctx,r,m),xje("contextProvider.traits",this.ctx,l,p.detectedLanguageId,p.detectedLanguageId,i),u=await SGe(this.ctx,r,m,p.detectedLanguageId)}return{traits:l,codeSnippets:u,turnOffSimilarFiles:f,resolvedContextItems:c}}async failFastPrompt(r,n,i,o){if(o?.isCancellationRequested)return R3;if((await this.ctx.get(_l).evaluate(r.uri,r.getText(),"UPDATE")).isBlocked)return _je;if((i>0?r.getText().length:r.offsetAt(n))<Tje)return wje}createRequestData(r,n,i,o,a,c,l,u,f,p,m){return{document:r,position:n,telemetryData:i,cancellationToken:o,data:a.data,traits:l,codeSnippets:u,turnOffSimilarFiles:f,suffixMatchThreshold:p,maxPromptTokens:c,tokenizer:m}}resetIfEmpty(r){r.prefix.length===0&&r.suffix.length===0&&this.reset()}successPrompt(r,n,i,o,a){return{type:"prompt",prompt:{prefix:r.prefix,prefixTokens:r.prefixTokens,suffix:r.suffix,suffixTokens:r.suffixTokens,context:r.context,isFimEnabled:r.suffix.length>0},computeTimeMs:n-i,trailingWs:o,neighborSource:new Map,metadata:r.metadata,contextProvidersTelemetry:a}}errorPrompt(r){return rc(this.ctx,r,"PromptComponents.CompletionsPromptFactory"),this.reset(),pAe}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new rF(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(r){this.promptOrdering!==r&&(this.promptOrdering=r,this.reset())}completionsPrompt(){return(lAe[this.promptOrdering]?.promptFunction??bje)(this.ctx)}getRenderer(){let r=lAe[this.promptOrdering]??lAe.default;return new r.renderer}};function KFt(t,e,r,n){let i=["cpp","c"];return Aje(t,n)||i.includes(e)||!r.some(a=>a.data.some(c=>c.type==="CodeSnippet"))}s(KFt,"similarFilesEnabled");async function Ije(t){try{await RS}catch(e){yI(t,e,"initializeTokenizers")}}s(Ije,"waitForTokenizers");var Tje=10,wje={type:"contextTooShort"},_je={type:"copilotContentExclusion"},pAe={type:"promptError"},R3={type:"promptCancelled"},Sje={type:"promptTimeout"};function k3(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(k3,"trimLastLine");function P3(t,e,r,n,i,o={}){let c=t.get(br).findNotebook(r.textDocument),l=c?.getCellFor(r.textDocument);c&&l&&(r=XFt(r,c,l)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=yje(t,n);return t.get(Cg).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(P3,"extractPrompt");function JFt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:E3(n,e)}s(JFt,"addNeighboringCellsToPrompt");function XFt(t,e,r){let i=e.getCells().filter(c=>c.index<r.index&&cK(r.document.detectedLanguageId,c.document.detectedLanguageId)),o=i.length>0?i.map(c=>JFt(c,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(XFt,"applyEditsForNotebook");function pK(t,e,r){let i=t.get(Bt).maxPromptCompletionTokens(e)-EY(t),o=wGe(e,r),a=OY(t,e,r),c=t.get(Bt).suffixPercent(e),l=t.get(Bt).suffixMatchThreshold(e);if(c<0||c>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${c}`);if(l<0||l>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${l}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:c,suffixMatchThreshold:l}}s(pK,"getPromptOptions");d();d();var Rje=2.98410452738298,kje=-.838732736843507,Pje=1.50314646255716,Bje=-.237798634012662,EK={python:.314368072478742},Dje={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var ZFt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function eOt(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(eOt,"linearInterpolation");var B3=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},mAe=class{constructor(e,r,n){this.link=ZFt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return eOt(n,this.logitsToQuantiles)}},Nje=new mAe(Rje,[new B3("compCharLen",kje,t=>Math.log(1+t)),new B3("meanLogProb",Pje),new B3("meanAlternativeLogProb",Bje)].concat(Object.entries(EK).map(t=>new B3(t[0],t[1]))),Dje);function Lje(t,e){let r={...e.measurements};return Object.keys(EK).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),Nje.predict(t,r)}s(Lje,"ghostTextScoreConfidence");function Mje(t,e){let r={...e.measurements};return Object.keys(EK).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),Nje.quantile(t,r)}s(Mje,"ghostTextScoreQuantile");d();d();var tOt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function vK(t){let e=t.slice();return e.reverse(),Fje(e)||Fje(e.filter(r=>r.trim().length>0))}s(vK,"isRepetitive");function Fje(t){let e=rOt(t);for(let r of tOt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(Fje,"isRepeatedPattern");function rOt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s(rOt,"kmp_prefix_function");function nOt(t,e,r,n){let i="}";try{i=x7e(e.detectedLanguageId)??"}"}catch{}return iOt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(nOt,"maybeSnipCompletion");function iOt(t,e,r,n){let i=oOt(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let c=!0,l=0,u=0;for(let f=0;f+a+u<o.length;f++){let p;for(;;){let y=e.line+1+f+l;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")l++;else break}let m,h;for(;m=a+f+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){c=!1;break}}if(c)return o.slice(0,a).join(i.newLineCharacter)}return r}s(iOt,"maybeSnipCompletionImpl");function oOt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(oOt,"splitByNewLine");function sOt(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(sOt,"matchesNextLine");function nF(t,e,r,n,i,o){if(vK(n.tokens)){let c=dn.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Dt(t,"repetition.detected",c,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(sOt(e,r,a.completionText,!i)){let c=dn.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Dt(t,"completion.alreadyInDocument",c),Dt(t,"completion.alreadyInDocument",c.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=nOt(t,e,r,a.completionText),a.completionText?a:void 0}s(nF,"postProcessChoiceInContext");function Oje(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let c of i){let l=r.completionText.indexOf(c,o+1);if(l>o)a++,o=l;else break}return a}}return 0}s(Oje,"checkSuffix");var Hje=Ne(Gx());var Ao=new wt("ghostText");var cOt=200,Qje=20;async function Wje(t,e,r,n,i,o,a){Ao.debug(t,`Getting ${o} from network`),r=r.extendedBy();let c=e.isCycling?3:1,l=m3(t,c),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:S7e(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},f={n:c,temperature:l},p=vi(t,Rt.ModelAlwaysTerminatesSingleline)??t.get(Bt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&_y.isSupported(e.languageId)&&!p;!e.multiline&&!m?f.stop=[`
`]:e.stop&&(f.stop=e.stop),e.maxTokens!==void 0&&(f.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(l),n:JSON.stringify(c),stop:JSON.stringify(f.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:c,uiKind:"ghostText",postOptions:f,headers:e.headers,extra:u},E=await t.get(Df).fetchAndStreamCompletions(t,y,r,i,n);return E.type==="failed"?{type:"failed",reason:E.reason,telemetryData:da(r)}:E.type==="canceled"?(Ao.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:E.reason,telemetryData:Sy(r)}):a(h,E.getProcessingTime(),E.choices)}catch(y){if(Du(y))return{type:"canceled",reason:"network request aborted",telemetryData:Sy(r,{cancelledNetworkRequest:!0})};if(Ao.exception(t,y,"Error on ghost text request"),t.get(Ed).notifyUser(t,y),Pk(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:da(r)}}}s(Wje,"genericGetCompletionsFromNetwork");function hAe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}s(hAe,"postProcessChoices");async function lOt(t,e,r,n,i){return Wje(t,e,r,n,i,"completions",async(o,a,c)=>{let u=await c[Symbol.asyncIterator]().next();if(u.done)return Ao.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:da(r)};if(n?.isCancellationRequested)return Ao.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:Sy(r)};let f=u.value;if(f===void 0)return Ao.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:da(r)};jje(t,"performance",f,o,a),Ao.debug(t,`Awaited first result, id:  ${f.choiceIndex}`);let p=hAe(f,e);p&&(xK(t,e,p),Ao.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of c){if(g===void 0)continue;Ao.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=hAe(g,e,h);y&&(h.push(y),xK(t,e,y))}})();return kh(t)&&await m,p?{type:"success",value:[gAe(p,{forceSingleLine:!1}),m],telemetryData:da(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:da(r)}})}s(lOt,"getCompletionsFromNetwork");async function uOt(t,e,r,n,i){return Wje(t,e,r,n,i,"all completions",async(o,a,c)=>{let l=[];for await(let u of c){if(n?.isCancellationRequested)return Ao.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:Sy(r)};let f=hAe(u,e,l);f&&l.push(f)}if(l.length>0){for(let u of l)xK(t,e,u);jje(t,"cyclingPerformance",l[0],o,a)}return{type:"success",value:[l,Promise.resolve()],telemetryData:da(r),telemetryBlob:r,resultType:3}})}s(uOt,"getAllCompletionsFromNetwork");function gAe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(gAe,"makeGhostAPIChoice");function Uje(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(Uje,"takeNLines");async function dOt(t,e,r,n,i,o,a,c,l){let u=t.get(Bt).multilineAfterAcceptLines(l),f=t.get(og).forLanguage(t,e.textDocument.detectedLanguageId,l);switch(f){case"server":return a?{blockMode:"parsing",requestMultiline:!0,finishedCb:Uje(u),stop:[`

`],maxTokens:Qje*u}:{blockMode:"server",requestMultiline:!0,finishedCb:s(p=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let p;try{p=await EOt(t,f,e.textDocument,e.position,o,c,n)}catch{p={requestMultiline:!1}}if(!a&&p.requestMultiline&&t.get(Bt).singleLineUnlessAccepted(l)&&(p.requestMultiline=!1),p.requestMultiline){let m;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?m=ns.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):m=e.position,{blockMode:f,requestMultiline:!0,...qje(t,f,e.textDocument,m,p.blockPosition,r,!0,n.prompt,l)}}if(a){let m={blockMode:"parsing",requestMultiline:!0,finishedCb:Uje(u),stop:[`

`],maxTokens:Qje*u};return f==="moremultiline"&&(m.blockMode="moremultiline"),m}return{blockMode:f,requestMultiline:!1,...qje(t,f,e.textDocument,e.position,p.blockPosition,r,!1,n.prompt,l)}}}}s(dOt,"getGhostTextStrategy");function qje(t,e,r,n,i,o,a,c,l){if(a&&e==="moremultiline"&&_y.isSupported(r.detectedLanguageId)){let u=i==="empty-block"||i==="block-end"?t.get(Bt).longLookaheadSize(l):t.get(Bt).shortLookaheadSize(l);return{finishedCb:new vY(t,o,r.detectedLanguageId,!1,u,(p,m)=>{let h={prefix:o+p,prompt:{...c,prefix:c.prefix+p}};xK(t,h,m)}).getFinishedCallback(),maxTokens:cOt}}return{finishedCb:a?jM(t,r,n):u=>{}}}s(qje,"buildFinishedCallback");var fOt={isCycling:!1,promptOnly:!1,isSpeculative:!1};function pOt(t,e,r){let n=vi(t,Rt.CompletionsDebounce)??t.get(Bt).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let i=la()-r.issuedTime;return Math.max(0,n-i)}s(pOt,"getRemainingDebounceMs");async function mOt(t,e,r,n,i,o){let a=n.issuedTime,c=[];function l(b){let _=la();c.push([b,_-a]),a=_}s(l,"recordPerformance"),l("telemetry");let u=t.get(Bt);if(i?.isCancellationRequested)return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:da(n)};let f=gOt(e.textDocument,e.position);if(f===void 0)return Ao.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:da(n)};let p=i,m=new fn.CancellationTokenSource;i=m.token;let h=Yb(t,n),g={...fOt,...o,tokenizer:h.tokenizer},y=await P3(t,r,e,n,i,g);if(l("prompt"),y.type==="copilotContentExclusion")return Ao.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:da(n)};if(y.type==="contextTooShort")return Ao.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:da(n)};if(y.type==="promptError")return Ao.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:da(n)};if(g.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:y};if(y.type==="promptCancelled")return Ao.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:da(n)};if(y.type==="promptTimeout")return Ao.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:da(n)};if(y.prompt.prefix.length===0&&y.prompt.suffix.length===0)return Ao.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:da(n)};if(i?.isCancellationRequested)return Ao.debug(t,"Cancelled after extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled after extractPrompt",telemetryData:da(n)};let E=pOt(t,g,n);return E>0&&(Ao.debug(t,`Debouncing ghost text request for ${E}ms`),await wy(E),p?.isCancellationRequested)?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:da(n)}:t.get(po).withProgress(async()=>{let[b]=k3(e.textDocument.getText(ns.range(ns.position(0,0),e.position))),_=t.get(Lf).hasAcceptedCurrentCompletion(b,y.prompt.suffix),k=y.prompt,P=await dOt(t,e,b,y,g.isCycling,f,_,g.isSpeculative,n);if(l("strategy"),i?.isCancellationRequested)return Ao.debug(t,"Cancelled after requestMultiline"),{type:"abortedBeforeIssued",reason:"Cancelled after requestMultiline",telemetryData:da(n)};let N=hOt(t,b,k,P.requestMultiline);l("cache");let M=Kb(t,e.textDocument.uri),J={blockMode:P.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:M,engineModelId:h.modelId,ourRequestId:r,prefix:b,prompt:y.prompt,multiline:P.requestMultiline,indentation:NY(e.textDocument,e.position),isCycling:g.isCycling,headers:h.headers,stop:P.stop,maxTokens:P.maxTokens,afterAccept:_};J.headers={...J.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":g.isSpeculative?"true":"false"};let se=TOt(t,e.textDocument,J,e.position,y,n,h,g);if(N===void 0&&!g.isCycling&&t.get(Bf).shouldWaitForAsyncCompletions(b,y.prompt)){let X=await t.get(Bf).getFirstMatchingRequestWithTimeout(r,b,y.prompt,g.isSpeculative,se);if(l("asyncWait"),X){let ue=!P.requestMultiline;N=[[gAe(X[0],{forceSingleLine:ue})],4]}if(p?.isCancellationRequested)return Ao.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:da(se)}}let K=P.blockMode==="moremultiline"&&_y.isSupported(e.textDocument.detectedLanguageId);if(N!==void 0&&(N[0]=N[0].map(X=>nF(t,e.textDocument,e.position,X,K,Ao)).filter(X=>X!==void 0)),N!==void 0&&N[0].length===0)return Ao.debug(t,`Found empty inline suggestions locally via ${h3(N[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:da(se)};if(N!==void 0&&N[0].length>0&&(!g.isCycling||N[0].length>1))Ao.debug(t,`Found inline suggestions locally via ${h3(N[1])}`);else{if(g.isCycling){let X=await uOt(t,J,se,i,P.finishedCb);if(X.type==="success"){let ue=N?.[0]??[];X.value[0].forEach(ne=>{ue.findIndex(me=>me.completionText.trim()===ne.completionText.trim())===-1&&ue.push(ne)}),N=[ue,3]}else if(N===void 0)return X}else{if(i?.isCancellationRequested)return Ao.debug(t,"Cancelled before request"),{type:"canceled",reason:"before request",telemetryData:Sy(se)};let ue=lOt(t,J,se,i,s((me,he)=>(t.get(Bf).updateCompletion(r,me),P.finishedCb(me,he)),"finishedCb"));t.get(Bf).queueCompletionRequest(r,b,y.prompt,m,ue);let ne=await t.get(Bf).getFirstMatchingRequest(r,b,y.prompt,g.isSpeculative);if(ne===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:da(se)};N=[[ne[0]],4]}l("network")}if(N===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:da(se)};let[G,q]=N,le=G.map(X=>nF(t,e.textDocument,e.position,X,K,Ao)).filter(X=>X!==void 0),ie=vi(t,Rt.CompletionsDelay)??u.completionsDelay(n),V=la()-n.issuedTime,H=Math.max(ie-V,0);if(q!==2&&!g.isCycling&&H>0&&(Ao.debug(t,`Waiting ${H}ms before returning completion`),await wy(H),p?.isCancellationRequested))return Ao.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:Sy(se)};let z=[];for(let X of le){let ue=IOt(t,e.textDocument,J,X,se),ne=f?Oje(e.textDocument,e.position,X):0,he={completion:vOt(X.choiceIndex,X.completionText,y.trailingWs),telemetry:ue,isMiddleOfTheLine:f,suffixCoverage:ne,copilotAnnotations:X.copilotAnnotations,clientCompletionId:X.clientCompletionId};z.push(he)}return p?.isCancellationRequested?(Ao.debug(t,"Cancelled after post processing completions"),{type:"canceled",reason:"after post processing completions",telemetryData:Sy(se)}):(se.properties.clientCompletionId=z[0]?.clientCompletionId,se.measurements.foundOffset=z?.[0]?.telemetry?.measurements?.foundOffset??-1,Ao.debug(t,`Produced ${z.length} results from ${h3(q)} at ${se.measurements.foundOffset} offset`),r!==t.get(Lf).currentRequestId?(Ao.debug(t,"Current request id changed before returning"),{type:"canceled",reason:"current request id changed before returning",telemetryData:Sy(se)}):(g.isSpeculative||t.get(Lf).setGhostText(b,y.prompt.suffix,le,q),l("complete"),{type:"success",value:[z,q],telemetryData:da(se),telemetryBlob:se,resultType:q,performanceMetrics:c}))})}s(mOt,"getGhostTextWithoutAbortHandling");async function AAe(t,e,r,n){let i=cr();t.get(Lf).currentRequestId=i;let o=await bOt(t,e.textDocument,i,n);await RS.catch(()=>{});try{return t.get(_m).schedule(e,i,n?.opportunityId??"",o,r,n),t.get(Ty).notifyRequest(e,i,o,r,n),await mOt(t,e,i,o,r,n)}catch(a){if(Du(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:Sy(o,{cancelledNetworkRequest:!0})};throw a}}s(AAe,"getGhostText");function hOt(t,e,r,n){let i=t.get(Lf).getCompletionsForUserTyping(e,r.suffix),o=xOt(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(c=>!i.some(l=>l.completionText===c.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(hOt,"getLocalInlineSuggestion");function gOt(t,e){let r=AOt(e,t),n=yOt(e,t);return r&&!n?void 0:r&&n}s(gOt,"isInlineSuggestion");function AOt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(AOt,"isMiddleOfTheLine");function yOt(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(yOt,"isValidMiddleOfTheLinePosition");function COt(t,e){return e.lineAt(t).text.trim().length===0}s(COt,"isNewLine");var AE=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function EOt(t,e,r,n,i,o,a){if(t.get(AE).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Dt(t,"ghostText.longFileMultilineSkip",dn.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&_y.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await vWe(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&COt(n,r))return{requestMultiline:!0};let l=!1;return!i&&O0(r.detectedLanguageId)?l=await DY(r,n):i&&O0(r.detectedLanguageId)&&(l=await DY(r,n)||await DY(r,r.lineAt(n).range.end)),l||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(l=TWe(a.prompt,r.detectedLanguageId)>.5),{requestMultiline:l}}return{requestMultiline:!1}}s(EOt,"shouldRequestMultiline");function xK(t,e,r){t.get(mg).append(e.prefix,e.prompt.suffix,r)}s(xK,"appendToCache");function vOt(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(vOt,"adjustLeadingWhitespace");function xOt(t,e,r,n){let i=t.get(mg).findAll(e,r);return i.length===0?(Ao.debug(t,"Found no completions in cache"),[]):(Ao.debug(t,`Found ${i.length} completions in cache`),i.map(o=>gAe(o,{forceSingleLine:!n})))}s(xOt,"getCompletionsFromCache");async function bOt(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=dn.createAndMarkAsIssued(i);return await t.get(Bt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(bOt,"createTelemetryWithExp");function IOt(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let c={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let l=n.telemetryData.extendedBy(a,c);return l.issuedTime=i.issuedTime,l.measurements.timeToProduceMs=performance.now()-i.issuedTime,Gje(l,e),l.extendWithRequestId(o),l.measurements.confidence=Lje(t,l),l.measurements.quantile=Mje(t,l),Ao.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${l.measurements.confidence} (expected as good or better than about ${l.measurements.quantile} of all suggestions)`),l}s(IOt,"telemetryWithAddData");function TOt(t,e,r,n,i,o,a,c){let l={languageId:e.detectedLanguageId};l.afterAccept=r.afterAccept.toString(),l.isSpeculative=c.isSpeculative.toString();let u=o.extendedBy(l);Gje(u,e);let f=r.repoInfo;u.properties.gitRepoInformation=f===void 0?"unavailable":f===0?"pending":"available",f!==void 0&&f!==0&&(u.properties.gitRepoUrl=f.url,u.properties.gitRepoHost=f.hostname,u.properties.gitRepoOwner=f.owner,u.properties.gitRepoName=f.repo,u.properties.gitRepoPath=f.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(ns.range(p.range.start,n)),h=e.getText(ns.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(b=>[b[0],b[1].map(_=>(0,Hje.SHA256)(_).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},E={...T4(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let x=u.extendedBy(y,E);return Dt(t,"ghostText.issued",x),u}s(TOt,"telemetryIssued");function Gje(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(Gje,"addDocumentTelemetry");function jje(t,e,r,n,i){let o=Date.now()-n,a=o-i,c=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});c.extendWithRequestId(r.requestId),Dt(t,`ghostText.${e}`,c)}s(jje,"telemetryPerformance");var Lf=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&Vje(this.choices[0].completionText,n))return wOt(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function wOt(t,e){return t.filter(r=>Vje(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(wOt,"adjustChoicesStart");function Vje(t,e){return t.startsWith(e)&&t.length>e.length}s(Vje,"startsWithAndExceeds");d();d();d();var E2=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(br);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let c=a.text.length-a.rangeLength;this._offset=this._offset+c}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};d();var yAe=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??fn.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:c,newText:l}of e){let u=n.getText(c),f=n.offsetAt(c.end);if(n=n.applyEdits([{range:c,newText:l}]),o<n.offsetAt(c.start)){let m={range:c,newText:l,positionAfterEdit:fn.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<f&&(o=f),o+=l.length-u.length,i=n.positionAt(o);let p={range:c,newText:l,positionAfterEdit:fn.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function By(t,e){return new yAe(t,e)}s(By,"createCompletionState");d();function CAe(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),c=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],c,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let f=o;o=n,n=f,f=a,a=i,i=f,c=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],c,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let l=0;for(let u=0;u<t.length+1;u++)n[u]<n[l]&&(l=u);return{distance:n[l],startOffset:i[l],endOffset:l}}s(CAe,"editDistance");function _Ot(){return new Map}s(_Ot,"emptyLexDictionary");function SOt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(SOt,"reverseLexDictionary");function*ROt(t){let e="",r;(c=>(c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(ROt,"lexGeneratorWords");function $je(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s($je,"lexicalAnalyzer");function zje(t){return t!==" "}s(zje,"notSingleSpace");function Yje(t,e,r=ROt){let[n,i]=$je(t,_Ot(),r,zje),[o,a]=$je(e,i,r,zje);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let c=SOt(a),l=o.length,u=c[o[0][0]],f=c[o[l-1][0]];function p(y,E,x,b){if(b===0||b===l-1){let _=c[n[x][0]];return b==0&&_.endsWith(u)||b==l-1&&_.startsWith(f)?0:1}else return y===E?0:1}s(p,"compare");let m=CAe(n.map(y=>y[0]),o.map(y=>y[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(Yje,"lexEditDistance");d();function Kje(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(Kje,"computeCompCharLen");function Jje(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(Jje,"computeCompletionText");function Xje(t,e,r){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||r===3?e:e-t.range.end.character+t.range.start.character}s(Xje,"computePartialLength");var bI=new wt("postInsertion"),Zje=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],eVe=50,kOt=1500,POt=.5,BOt=500,EAe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function tVe(t,e,r,n,i){let o=await t.get(hn).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return bI.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,c=a.getText(),l=c.substring(0,n),u=a.positionAt(n),f=await P3(t,r.properties.headerRequestId,By(a,u),r),p=f.type==="prompt"?f.prompt:{prefix:l,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=c.substring(n,i);return p.suffix=c.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=c.substring(n),h=_ge(l,n,a.detectedLanguageId),y=await CGe(h,void 0)(m),E=Math.min(c.length,n+(y?y*2:BOt)),x=c.substring(n,E);return{prompt:p,capturedCode:x,terminationOffset:y??-1}}}s(tVe,"captureCode");function bK(t,e,r,n,i){i.forEach(({completionText:l,completionTelemetryData:u})=>{bI.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),VWe(t,e,u)});let o=new E2(t,n,r-1),a=new E2(t,n,r),c=s(async l=>{bI.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:f,capturedCode:p,terminationOffset:m}=await tVe(t,n,u,o.offset+1,a.offset),h={hypotheticalPromptJson:JSON.stringify({prefix:f.prefix,context:f.context}),hypotheticalPromptSuffixJson:JSON.stringify(f.suffix)},g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:l.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});bI.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Dt(t,e+".capturedAfterRejected",g,1)},"checkInCode");Zje.filter(l=>l.captureRejection).map(l=>o.push(Hu(t,()=>c(l),"postRejectionTasks"),l.seconds*1e3))}s(bK,"postRejectionTasks");function v2(t,e,r,n,i,o,a,c){let l=o.extendedBy({compType:a.compType},{compCharLen:Kje(a,r)});bI.debug(t,`${e}.accepted choiceIndex: ${l.properties.choiceIndex}`),jWe(t,e,l);let u=r;r=Jje(r,a);let f=r.trim(),p=new E2(t,i,n),m=new E2(t,i,n+r.length),h=s(async g=>{await MOt(t,e,f,n,i,g,l,p,m)},"stillInCodeCheck");if(EAe.triggerPostInsertionSynchroneously&&kh(t)){let g=h({seconds:0,captureCode:EAe.captureCode,captureRejection:EAe.captureRejection});t.get(Xa).register(g)}else Zje.map(g=>p.push(Hu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Hu(t,DOt,"post insertion citation check")(t,i,u,r,n,c)}s(v2,"postInsertionTasks");async function DOt(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1)return;let a=await t.get(br).getTextDocument({uri:e});if(a){let c=vAe(a.getText(),n,eVe,i);c.stillInCodeHeuristic&&(i=c.foundOffset)}for(let c of o.ip_code_citations){let l=NOt(r.length,n.length,c.start_offset);if(l===void 0){bI.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+l,f=a?.positionAt(u),p=i+LOt(r.length,n.length,c.stop_offset),m=a?.positionAt(p),h=f&&m?a?.getText({start:f,end:m}):"<unknown>";await t.get(j0).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:f&&m?{start:f,end:m}:void 0,matchingText:h,details:c.details.citations})}}s(DOt,"citationCheck");function NOt(t,e,r){if(!(e<t&&r>e))return r}s(NOt,"computeCitationStart");function LOt(t,e,r){return e<t?Math.min(r,e):r}s(LOt,"computeCitationEnd");function vAe(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=Yje(i,e),a=o.lexDistance/o.needleLexLength,{distance:c}=CAe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:c,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=POt?1:0}}s(vAe,"find");async function MOt(t,e,r,n,i,o,a,c,l){let u=await t.get(hn).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=vAe(p,r,eVe,c.offset);m.stillInCodeHeuristic||(m=vAe(p,r,kOt,c.offset)),bI.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${c.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset}).extendedBy({},m);if(Dt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:E}=await tVe(t,i,h,c.offset,l.offset),x={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},b=a.extendedBy({...x,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset,terminationOffsetInCapturedCode:E});bI.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Dt(t,e+".capturedAfterAccepted",b,1)}}}s(MOt,"checkStillInCode");var xAe=new wt("ghostText"),Qd=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function FOt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(FOt,"computeRejectedCompletions");function bAe(t,e){let r=t.get(Qd);if(!r.position||!r.uri)return;let n=FOt(r);n.length>0&&bK(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(bAe,"rejectLastShown");function rVe(t,e,r,n){let i=t.get(Qd);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&bAe(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(rVe,"setLastShown");function nVe(t,e){let r=t.get(Qd);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;xAe.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,bY(t,"ghostText",e)}}s(nVe,"handleGhostTextShown");function IK(t,e){let r=t.get(Qd);r.resetState(),xAe.debug(t,"Ghost text post insert");let n={compType:"full"};return r.resetPartialAcceptanceState(),v2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,n,e.copilotAnnotations)}s(IK,"handleGhostTextPostInsert");function iVe(t,e,r,n=0){let i=t.get(Qd);xAe.debug(t,"Ghost text partial post insert");let o=Xje(e,r,n);if(o)return i.partiallyAcceptedLength=r,v2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(iVe,"handlePartialGhostTextPostInsert");d();d();d();d();d();var D3="[...]",OOt=0,II=-1;function Dy(){return OOt++}s(Dy,"getAvailableNodeId");function QOt(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,i])=>n===0?i:r[n-1]+i).join("")}s(QOt,"elideChildren");function oVe(t=D3){return e=>QOt(e,t).length-(e.elisionMarker??t).length}s(oVe,"getBasicCostFunction");d();var N3=class{static{s(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let i=this.heap.length-1;this.siftUp(i)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){let r=this.heap[e],n=this.heap.length-1;for(;e<n;){let i=e,o=2*e+1,a=o+1;if(o<=n&&this.heap[o].priority>this.heap[i].priority&&(i=o),a<=n&&this.heap[a].priority>this.heap[i].priority&&(i=a),i===e)break;this.heap[e]=this.heap[i],e=i}this.heap[e]=r}};var iF=class{constructor(e,r,n,i,o=0,a=!1,c=D3){this.id=e;this.text=r;this.children=n;this.cost=i;this.weight=o;this.canMerge=a;this.elisionMarker=c;this.requireRenderedChild=!1;if(r.length!==n.length+1)throw new Error(`Text fragments length (${r.length}) must be equal to children length (${n.length}) + 1`);this.cost=Math.max(i,1),this.weight=Math.max(o,0)}static{s(this,"RenderNode")}get value(){return this.weight/this.cost}render(e=void 0,r=[],n){let i=new Set(Array.isArray(r)?r:[r]);if((e??this.cost)<this.cost||i.has(this.id))return this.elisionMarker;if(e===void 0){let f=s(m=>i.has(m.id),"elider"),p=[];return this.recursivelyRender(p,f),p.join("")}let o=new Set,a=[],c=[],l=new N3([{item:this,priority:this.value}]),u=e;for(;u>0&&l.size>0;){let{item:f}=l.pop();if(!i.has(f.id)&&f.cost<=u){u-=f.cost,o.add(f.id),a.push(f);for(let p of f.children)l.insert(p,p.value);f.requireRenderedChild&&c.push(f)}}for(let f=c.length-1;f>=0;f--){let p=c[f];p.children.some(m=>o.has(m.id))||o.delete(p.id)}for(;o.size>0;){let f=[],p=s(g=>!o.has(g.id),"elider");this.recursivelyRender(f,p);let m=f.join("");if(n===void 0)return m;let h=n(m);if(h<=e)return m;for(;a.length>0&&h>e;){let g=a.pop();h-=g.cost,o.delete(g.id)}if(a.length===0)return this.elisionMarker}return this.elisionMarker}updateWeights(e){let r=this.recursivelyRectifyWeights(e);for(let{item:n,priority:i}of r.clear())for(let o of n.nodes)o.weight=i*o.cost}recursivelyRender(e,r,n=!1){if(r(this))return e.length>=2&&(n||e[e.length-2]===this.elisionMarker&&e[e.length-1].trim().length===0)?(e.pop(),!0):(e.push(this.elisionMarker),!0);let i=!1;for(let[o,a]of this.children.entries())e.push(this.text[o]??""),i=a.recursivelyRender(e,r,a.canMerge&&i);return e.push(this.text[this.text.length-1]??""),!1}recursivelyRectifyWeights(e){let r=this.children.map(a=>a.recursivelyRectifyWeights(e)),n=Math.max(0,e?e(this):this.weight);if(n===0&&r.reduce((a,c)=>a+c.size,0)===0)return this.weight=0,new N3([]);let i=new N3(r.flatMap(a=>a.clear())),o={nodes:[this],totalCost:this.cost,totalWeight:n};for(this.requireRenderedChild=!1;(i.peek()?.priority??0)>o.totalWeight/o.totalCost;){let{item:a}=i.pop();o.nodes.push(...a.nodes),o.totalCost+=a.totalCost,o.totalWeight+=a.totalWeight,this.requireRenderedChild=!0}return i.insert(o,o.totalWeight/o.totalCost),i}};function IAe(t,e,r=D3,n){if(n?.has(t.id))return n.get(t.id);let i=t.children.map(c=>IAe(c,e,r));r=t.elisionMarker??r;let o=e(t),a=new iF(t.id,t.text,i,o,0,t.canMerge,r);return n?.set(a.id,a),a}s(IAe,"snapshot");d();d();var UOt={RelatedFilesShim:.2,FileDirectoryDocumentProvider:.05,SymbolContextProvider:.2,TreeProximityProvider:1,ExtensionReferenceProvider:.8,RecentDocumentProvider:.1,RecentCompletionsRequestProvider:1.5,ExtensionActivityProvider:8.5};function L3(){return UOt}s(L3,"getProviderWeights");var qOt={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10/Math.log(2),MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3};function M3(){return qOt}s(M3,"getFeatureConfig");d();function oF(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}s(oF,"setDefault");function HOt(t){return t.id!==void 0}s(HOt,"isNodeItem");var TK=class{static{s(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:i}of e)r.set(n,(r.get(n)??0)+i);this.documents=[...r.entries()].map(([n,i])=>({uri:n,weight:i})).sort((n,i)=>i.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==II),this.nodeWeights=new Map(e.map(({id:n,weight:i})=>[n,i]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},wK=class{constructor(e){this.activeContext=e;this.config=M3();this.providerWeights=L3();this.providerContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new TK([])}static{s(this,"WorkspaceContextCoordinator")}getWeights(){return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[i,{items:o,updateTime:a}]of this.providerContext.entries()){let c=this.providerWeights[i]??0;if(c<=0||o.length===0)continue;let l=Math.exp(-Math.max(0,(this.prevUpdateTime??a)-a)/n);c*=l,r+=c,this.aggregateWeights(o,e,c,!0)}if(r>0){if(this.weights.nodes.length>0){let i=r*this.config.Laziness,o=this.prevItems;this.aggregateWeights(o,e,i,!0)}for(let[i,o]of e.entries()){let a=this.activeContext.getDocument(i)?.document;if(a===void 0)continue;let c=o.get(II);if(c!==void 0&&c>0){o.delete(II);let l=a.getAllIds(),u=c/l.length;for(let f of l)o.set(f,(o.get(f)??0)+u)}}this.prevItems=this.truncateAndNormalize(e),this.weights=new TK(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),i=this.addUriAndId(r),o=new Map;this.aggregateWeights(i,o);let a=this.truncateAndNormalize(o);this.providerContext.set(e,{items:a,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{let n=HOt(r)?r.id:II,i=r.uri??this.activeContext.getUri(n);return{weight:r.weight,uri:i,id:n}}).filter(r=>r.uri!==void 0)}aggregateWeights(e,r,n=1,i=!1){for(let{uri:o,id:a,weight:c}of e){if(c<=0)continue;let l=oF(r,o,()=>new Map),u=II;(!i||this.activeContext.getUri(a)!==void 0)&&(u=a),l.set(u,(l.get(u)??0)+c*n)}}truncateAndNormalize(e){let r=[],n=new Map;for(let[l,u]of e.entries()){let f=this.activeContext.normalizeUri(l);if(f!==void 0)for(let[p,m]of u.entries())p===II?n.set(f,m):r.push({uri:f,id:p,weight:m})}r.sort((l,u)=>u.weight-l.weight);for(let{uri:l,weight:u}of r.slice(this.config.MaxActiveNodes,r.length))n.set(l,(n.get(l)??0)+u);let i=[...n.entries()].sort((l,u)=>u[1]-l[1]).slice(0,this.config.MaxActiveFiles).map(([l,u])=>({uri:l,id:II,weight:u})),o=r.slice(0,this.config.MaxActiveNodes).concat(i).sort((l,u)=>u.weight-l.weight),a=o.reduce((l,u)=>l+u.weight,0);return a<=0?[]:o.map(l=>({...l,weight:l.weight/a}))}};d();d();d();var _K=class{constructor(e,r,n,i=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=i}static{s(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*aVe(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,i=this.parts.length-1,o;for(;n<=i;){let c=Math.floor((n+i)/2);if(o=this.parts[c],o.root.startOffset<=e&&o.root.endOffset>=r)break;o.root.endOffset<e?n=c+1:i=c-1}if(o===void 0||i<n)return;n=0,i=o.children.length-1;let a;for(;n<=i;){let c=Math.floor((n+i)/2);if(a=o.children[c],a.startOffset<=e&&a.endOffset>=r)break;a.endOffset<e?n=c+1:i=c-1}if(!(a===void 0||i<n))return a}},SK=class{constructor(e,r,n){this._parsedDocument=e;this.minSize=r;this.updateId=Dy();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(r,1),this.maxSize=Math.max(n??2*this.minSize,this.minSize+1),this._root=this.buildTree([])}static{s(this,"ContextDocument")}get uri(){return this.parsedDocument.document.uri}get version(){return this.updateId}get parsedDocument(){return this._parsedDocument}get document(){return this.parsedDocument.document}get rootId(){return this._root.id}get root(){return this._root}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this.parsedDocument.findNode(e,r);for(;!this.syntaxToAbstract.has(n.id);){if(n.parent===null)return this.root;n=n.parent}let i=this.syntaxToAbstract.get(n.id);if(r===void 0)return i;let o=i;for(;o!==void 0;)i=o,o=i.findChild(e,r);return i}dispose(){this._parsedDocument.dispose()}update(e,r){if(this.uri!==e.document.uri)throw new Error("Can't update ContextDocument using mismatched URI");let n=[],i=[];this.recursivelyRemapNodes(this.root,e,r,n);let o=this._parsedDocument;try{this._parsedDocument=e,this._root=this.buildTree(i)}finally{o.dispose()}return this.updateId=Dy(),{invalidated:n,created:i}}recursivelyRemapNodes(e,r,n,i){let o=!0;for(let u of e.children)o=o&&this.recursivelyRemapNodes(u,r,n,i);if(!o)return this.invalidateNode(e,i),!1;let a=[];for(let{root:u,children:f}of e.parts){let p=n(u);if(p===void 0||p.type!==u.type)return this.invalidateNode(e,i),!1;a.push({root:p,children:f})}let c=sVe(a,r.document);for(let[u,f]of c.entries())if(e.text[u]!==f)return this.invalidateNode(e,i),!1;let l=new _K(e.id,a,e.text,e.canMerge);for(let{root:u}of e.parts)this.syntaxToAbstract.delete(u.id);for(let{root:u}of l.parts)this.syntaxToAbstract.set(u.id,l);return this.nodeById.set(e.id,l),!0}invalidateNode(e,r){for(let n of e.syntaxRoots)this.syntaxToAbstract.delete(n.id);this.nodeById.delete(e.id),r.push(e.id)}createNode(e,r,n=!1){e.sort((a,c)=>a.root.startOffset-c.root.startOffset);let i=sVe(e,this.document),o=new _K(Dy(),e,i,n);for(let{root:a}of e)this.syntaxToAbstract.set(a.id,o);return this.nodeById.set(o.id,o),r.push(o.id),o}isValidRoot(e){return e.length===1&&e[0].root.id===this.parsedDocument.root.id}buildTree(e){let r=this.parsedDocument.root,n=this.buildRecursively(r,e);return n.length===1&&this.isValidRoot(n[0].parts)?n[0]:this.createNode([{root:r,children:n}],e)}buildRecursively(e,r){if(this.syntaxToAbstract.has(e.id)){let c=this.syntaxToAbstract.get(e.id);return c.parts[0].root.id===e.id?[c]:[]}let n=e.endOffset-e.startOffset;if(n<this.minSize)return[];let i=e.children.map(c=>({root:c,children:this.buildRecursively(c,r)})),o=i.flatMap(c=>c.children),a=o.reduce((c,l)=>c+(l.endOffset-l.startOffset),0);return e.canMergeChildren&&(o=this.mergeChildren(i,r),a=o.reduce((c,l)=>c+(l.endOffset-l.startOffset),0)),e.canBeNode&&n-a>=this.minSize?[this.createNode([{root:e,children:o}],r)]:o}mergeChildren(e,r){if(e.length===0)return[];e.sort((h,g)=>h.root.startOffset-g.root.startOffset);let n=e[e.length-1].root.endOffset-e[0].root.startOffset,i=[];for(let h of e){let g=h.root.endOffset-h.root.startOffset;for(let y of h.children){let E=y.endOffset-y.startOffset;g-=E,n-=E}i.push(g)}if(n<this.minSize)return e.flatMap(h=>h.children);let o=[0],a=0,c=null,l={line:-1,size:-1},u=e[0].root.startOffset,f=e[0].root.range.start.line;for(let h=0;h<e.length;h++){let g=e[h];if(a+=i[h]+g.root.startOffset-u,a>this.minSize&&a<this.maxSize){let y={line:g.root.range.start.line-f,size:g.root.startOffset-u};(y.line>l.line||y.line==l.line&&y.size>l.size)&&(l=y,c=h)}u=g.root.endOffset,f=g.root.range.end.line,a>=this.maxSize&&(c=c??h,o.push(c+1),h=c,a=0,c=null,l={line:-1,size:-1},u=e[h+1]?.root.startOffset,f=e[h+1]?.root.range.start.line)}o.length==1?o.push(e.length):o[o.length-1]!==e.length&&(o[o.length-1]=e.length);let p=[],m=!1;for(let h=0;h<o.length-1;h++){let g=e.slice(o[h],o[h+1]);p.push(this.createNode(g,r,m)),m=!0}return p}};function sVe(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let o of t.flatMap(a=>a.children).sort((a,c)=>a.startOffset-c.startOffset)){let a=e.positionAt(o.startOffset);r.push(e.getText({start:n,end:a})),n=e.positionAt(o.endOffset)}let i=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:i})),r}s(sVe,"buildText");function*aVe(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*aVe(r,e))}s(aVe,"walk");d();d();d();function cVe(t){return t.search(/^[a-zA-Z_]{3,}\w*$/)>=0}s(cVe,"isSymbol");var RK=class{constructor(e,r,n,i,o,a){this.id=e;this.raw=r;this.children=n;this.parent=null;let c={start:{line:i,character:0},end:{line:o,character:a.lineAt(o).text.length}},l=a.getText(c),u=l.search(/\S/);if(u===-1){let m={line:o,character:0};this.startOffset=a.offsetAt(m),this.endOffset=this.startOffset,this.text="",this.range={start:m,end:m};return}let f=l.search(/\S(?!.*\S)/s),p=a.offsetAt(c.start);this.startOffset=p+u,this.endOffset=p+f+1,this.range={start:a.positionAt(this.startOffset),end:a.positionAt(this.endOffset)},this.text=a.getText(this.range)}static{s(this,"IndentationNode")}get type(){return this.raw.type}get isLeaf(){return this.children.length===0}get canBeNode(){return!0}get canMergeChildren(){return this.children.length>6}get isIdentifier(){return!1}get isText(){return!0}findNode(e,r){let n=0,i=this.children.length-1,o;for(;n<=i;){let a=Math.floor((n+i)/2);if(o=this.children[a],o.startOffset<=e&&o.endOffset>=r)break;o.endOffset<e?n=a+1:i=a-1}return o===void 0||i<n?this:o.findNode(e,r)}},TAe=class{constructor(e,r){this.document=e;this.root=r}static{s(this,"IndentationParsedDocument")}findNode(e,r){return this.root.findNode(e,r??e)}dispose(){}};function wAe(t,e,r){let n=t.subs.map(l=>({subtree:l,node:wAe(l,e,r)})).filter(l=>l.node!==null).sort((l,u)=>l.node.startOffset-u.node.startOffset),i=[],o=e;for(let l=n.length-1;l>=0;l--){let{subtree:u,node:f}=n[l];if(f.range.end.line>=o){let p=wAe(u,o,r);p!==null&&(i.push(p),o=Math.min(p.range.start.line,o))}else i.push(f),o=Math.min(f.range.start.line,o)}i.sort((l,u)=>l.startOffset-u.startOffset);let a=e,c=0;if(i.length>0&&(a=Math.min(a,i[0].range.start.line),c=Math.max(c,i[i.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(a=Math.min(a,t.lineNumber),c=Math.max(c,t.lineNumber),t.type==="blank"&&a===c))return null;if(c=Math.min(c,e-1),a<=c){let l=new RK(Dy(),t,i,a,c,r);for(let u of i)u.parent=l;return l}return null}s(wAe,"recursivelyBuildNode");function lVe(t){let e=qS(t.getText(),t.detectedLanguageId),r=wAe(e,t.lineCount,t)??new RK(Dy(),e,[],0,t.lineCount-1,t);return new TAe(t,r)}s(lVe,"parse");function WOt(t,e){return{document:lVe(e),remapper:s(()=>{},"remapper")}}s(WOt,"update");var uVe={parse:lVe,update:WOt,dispose:s(function(){},"dispose")};d();d();var fVe=Ne(XV());function dVe(t){return{line:t.row,character:t.column}}s(dVe,"asPosition");var Bm=class t{constructor(e){this.node=e}static{s(this,"TreeSitterNode")}get raw(){return this.node}get id(){return this.node.id}get type(){return this.node.type}get text(){return this.node.text}get startOffset(){return this.node.startIndex}get endOffset(){return this.node.endIndex}get range(){return{start:dVe(this.node.startPosition),end:dVe(this.node.endPosition)}}get parent(){let e=this.node.parent;return e!==null?this.createNode(e):null}get children(){return this.node.namedChildren.map(e=>this.createNode(e))}get isLeaf(){return this.node.namedChildCount===0}get canBeNode(){return!0}get canMergeChildren(){return this.children.length>6}get isIdentifier(){return this.isLeaf&&cVe(this.text)}get isText(){return this.isLeaf&&this.text.search(/\s/)>=0}createNode(e){return new t(e)}},sF=class{constructor(e,r,n){this.textDocument=e;this.syntaxTree=r;this.nodeFactory=n}static{s(this,"TreeSitterDocument")}get document(){return this.textDocument}get root(){return this.nodeFactory(this.syntaxTree.rootNode)}findNode(e,r){let n=r===void 0?this.syntaxTree.rootNode.namedDescendantForIndex(e):this.syntaxTree.rootNode.namedDescendantForIndex(e,r);return this.nodeFactory(n)}dispose(){this.syntaxTree.delete()}},TI=class{constructor(e,r){this.language=e;this.nodeFactory=r;this.parser=new fVe.default;this.parser.setLanguage(e)}static{s(this,"TreeSitterParser")}parse(e){let r=this.parser.parse(e.getText());return new sF(e,r,this.nodeFactory)}update(e,r){if(!(e instanceof sF))throw new Error("Can only update documents created from this parser");let n=this.parser.parse(r.getText());return{document:new sF(r,n,this.nodeFactory),remapper:s(()=>{},"remapper")}}dispose(){this.parser.delete()}};var GOt=new Set(["class_specifier","function_definition","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement","compound_statement"]),jOt=new Set(["translation_unit","compound_statement","parameter_list","argument_list"]),kK=class t extends Bm{static{s(this,"CPPNode")}get canBeNode(){return GOt.has(this.type)}get canMergeChildren(){return jOt.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};d();var VOt=new Set(["class_declaration","method_declaration","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement"]),$Ot=new Set(["program","block","object_creation_expression","formal_parameters","argument_list","array_initializer"]),PK=class t extends Bm{static{s(this,"JavaNode")}get canBeNode(){return VOt.has(this.type)}get canMergeChildren(){return $Ot.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string_literal"||this.type==="line_comment"||this.type==="block_comment"}createNode(e){return new t(e)}};d();var zOt=new Set(["class_definition","function_definition","expression_statement","if_statement","for_statement","while_statement","with_statement","try_statement"]),YOt=new Set(["module","block","parameters","dictionary","list"]),BK=class t extends Bm{static{s(this,"PythonNode")}get canBeNode(){return zOt.has(this.type)}get canMergeChildren(){return YOt.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};d();var KOt=new Set(["class_declaration","function_declaration","arrow_function","method_definition","expression_statement","if_statement","while_statement","try_statement","for_statement","switch_statement"]),JOt=new Set(["program","statement_block","formal_parameters","arguments","object","array"]),DK=class t extends Bm{static{s(this,"TypeScriptNode")}get canBeNode(){return KOt.has(this.type)}get canMergeChildren(){return JOt.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};var pVe=Ne(XV());async function mVe(t){await pVe.default.init();try{let e=await Qpe(t);switch(t){case"python":return new TI(e,r=>new BK(r));case"typescript":return new TI(e,r=>new DK(r));case"java":return new TI(e,r=>new PK(r));case"cpp":return new TI(e,r=>new kK(r));default:return new TI(e,r=>new Bm(r))}}catch{return uVe}}s(mVe,"getParser");d();var SAe=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,i])=>i.size>0).map(([n,i])=>n)))}static{s(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,i])=>[...i].map(o=>({uri:n,id:o}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},NK=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{s(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},LK=class{constructor(e){this.ctx=e;this.config=M3();this.providerWeights=L3();this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.cachedDocuments=new sH;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new Fr(5e3);this.invalidDocumentCache=new n_(this.config.MaxActiveNodes,this.config.InvalidCacheTime)}static{s(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(br).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let i=n.document.getNode(e);if(i!==void 0)return{...n,node:i}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){if(this.uriCache.has(e))return this.uriCache.get(e)??void 0;let r=Kc(e);if(!NS.includes(sDe(r)))return;let i=this.ctx.get(br).getWorkspaceFolder({uri:r})!==void 0?r:null;return this.uriCache.set(e,i),i??void 0}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.activeDocuments.values())e.dispose();this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let r of e){let n=this.normalizeUri(r);n!==void 0&&(this.targetSet.add(n),this.updateDocument(n))}for(let r of[...this.activeDocuments.keys()])this.targetSet.has(r)||this.deactivateDocument(r)}}popChanges(){let e=new SAe(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let r=this.pendingUpdates.get(e);r!==void 0&&await r}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new NK(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new Ld;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&(this.isStarted()?this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new NK(n,i=>this.disposeDocument(i)))):n.dispose()),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let i;try{i=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let{document:c,remapper:l}=i.update(r.parsedDocument,n),u=r.update(c,l);return this.recordDocumentChanges(e,u),r}let o=i.parse(n),a=new SK(o,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:a.getAllIds(),invalidated:[]}),a}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()}),e.dispose()}recordDocumentChanges(e,r){let n=oF(this.createdNodes,e,()=>new Set),i=oF(this.invalidatedNodes,e,()=>new Set);for(let o of r.created)n.add(o),this.nodeToDoc.set(o,e);for(let o of r.invalidated)n.has(o)?n.delete(o):i.add(o),this.nodeToDoc.delete(o)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await mVe(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e))return;let r=await this.ctx.get(hn).getOrReadTextDocument({uri:e});if(r.status!=="valid"||r.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return r.document}handleDocumentChange(e){let r=e.document.uri;this.isKnownDocument(r)&&this.staleDocuments.add(r)}};d();var MK=class{constructor(e){this.ctx=e;this.documents=new Map;this.elisionMarker=D3;this.nodeCache=new Fr(1e4);this.costFunction=oVe(this.elisionMarker),this.root=this.createRootNode()}static{s(this,"WorkspacePromptComponent")}getRoot(){return this.root}snapshot(e,r){this.documents.clear();for(let{uri:n}of e.documents){let i=r.getDocument(n);if(i?.isActive!==!0)continue;let o=this.createAnnotatedDocumentRoot(i.document);this.documents.set(n,IAe(o,this.costFunction,this.elisionMarker,this.nodeCache))}this.root=this.createRootNode(),this.root.updateWeights(n=>e.getNodeWeight(n.id)??0)}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return new iF(Dy(),e,r,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:Dy(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,r){let i=this.ctx.get(br).getRelativePath({uri:e});return E3(`Related portions of ${i??e}:
`,r)}};var hVe=Ne(require("events"));var aF=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Ld;this.config=M3();this.providerWeights=L3();this.emitter=new hVe.default;this.forceUpdateInterrupt=new Ld;this.emitter.setMaxListeners(27),this.contextManager=new LK(e),this.coordinator=new wK(this.contextManager),this.promptComponent=new MK(e),this.tokenEventDisposable=ia(e,()=>{this.maybeStart()})}static{s(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(){if(this.didStart||this.didDispose)return;let e=vi(this.ctx,Rt.UseWorkspaceContextCoordinator);if(e===void 0)try{let r=await this.ctx.get(Bt).updateExPValuesAndAssignments();e=this.isEnabled(r)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return vi(this.ctx,Rt.UseWorkspaceContextCoordinator)??this.ctx.get(Bt).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.deferredStart.resolve(),this.forceUpdateInterrupt=new Ld,this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,r){this.isActive()&&this.coordinator.pushWorkspaceContext(e,r)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}getPromptComponent(){return this.promptComponent.getRoot()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),fn.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),fn.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}async forceUpdate(){return this.forceUpdateInterrupt.promise}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights();this.promptComponent.snapshot(e,this.contextManager);let r=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:n})=>n);if(this.contextManager.trySetActiveDocuments(r),await this.contextManager.flushUpdates(),this.forceUpdateInterrupt.resolve(),this.forceUpdateInterrupt=new Ld,this.isActive()){this.promptComponent.snapshot(e,this.contextManager);let n=this.config.UpdateInterval,i={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:n};this.emitter.emit(t.UpdateEventName,i),await wy(n)}}}catch(e){yI(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};function gVe(t){let e=new o3;return e.set(ru,t),e.set(ry,new ry),e.set(lo,new lo),e.set(mg,new mg),e.set(Vh,new Vh),e.set(Bt,new Bt(e)),e.set(WA,new WA),e.set(Kl,new Kl(e)),e.set(vl,new vl),e.set(Ed,new Ed),e.set(Df,new GM),e.set(og,new DP),e.set(zh,new G6),e.set(Xa,new Xa),e.set(Ty,new Ty(e)),e.set(hn,new hn(e)),e.set(aF,new aF(e)),e.set(Cg,CK(e)),e.set(Qd,new Qd),e.set(Lf,new Lf),e.set(AE,AE.default),e.set(aE,new aE(e)),e.set(um,new um(e)),e.set(bl,new bl),e.set(Bf,new Bf(e)),e.set(us,new us),e.set(bm,new bm(e)),e.set(wm,new wm),e}s(gVe,"createCommonContext");d();d();var FK=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};d();var F3=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var UVn=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),cF=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Bt).updateExPValuesAndAssignments(),a=await this.ctx.get(Df).fetchAndStreamSpeculation(this.ctx,i,o,(c,l)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new FK(a.reason);case"failed":throw new F3(a.reason)}}};d();d();var AVe=Ne(require("node:util"));function yVe(t,...e){return`[${t}] ${XOt(e)}`}s(yVe,"formatLogMessage");function XOt(t){return AVe.default.formatWithOptions({maxStringLength:1/0},...t)}s(XOt,"format");function OK(t){return ARe(t)}s(OK,"verboseLogging");var QK=class extends Tc{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||OK(r))&&this.console.warn(`[${i}]`,...o)}};d();var CVe=require("node:util");var O3=class extends ty{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){C_(e,"log",dn.createAndMarkAsIssued({context:r,level:x_[1],message:ZOt(...n)}),1)}sendException(e,r,n){rc(e,r,n)}};function ZOt(...t){return t.map(e=>(0,CVe.inspect)(e)).join(" ")}s(ZOt,"telemetryMessage");d();var Lrt=Ne(require("crypto")),Mrt=Ne(require("fs")),AZ=Ne(Drt()),Frt=require("tls"),Ort=Ne(Nrt());var $B=new wt("certificates"),Qc=class{static{s(this,"RootCertificateReader")}};function yZ(t,e=process.platform){return new ZEe(t,[new eve,new tve,etr(t,e)])}s(yZ,"getRootCertificateReader");function etr(t,e){switch(e){case"linux":return new rve(t);case"darwin":return new nve(t);case"win32":return new ive(t);default:return new ove}}s(etr,"createPlatformReader");var XEe=class extends Qc{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return $B.warn(this.ctx,"Failed to read root certificates:",r),[]}}},ZEe=class extends Qc{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new XEe(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new Lrt.X509Certificate(o),c=Date.parse(a.validTo);return isNaN(c)||c>n}catch(a){return $B.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&$B.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},eve=class extends Qc{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return Frt.rootCertificates}},tve=class extends Qc{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await Qrt(e):[]}},rve=class extends Qc{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await Qrt(n);$B.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},nve=class extends Qc{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=AZ.get({excludeBundled:!1,format:AZ.Format.pem});return $B.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},ive=class extends Qc{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=Ort.all();return $B.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},ove=class extends Qc{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function Qrt(t){let e;try{e=await Mrt.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(Qrt,"readCertsFromFile");d();var Jrt=Ne(require("http"));var Ttr=407,Eu=new wt("proxySocketFactory"),tC=class{static{s(this,"ProxySocketFactory")}},eR=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function CZ(t){return new cve(t,new lve(t))}s(CZ,"getProxySocketFactory");var cve=class extends tC{constructor(r,n,i=new _O,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Fr(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(Eu.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof eR&&i.code===`ProxyStatusCode${Ttr}`){Eu.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return Eu.debug(this.ctx,"Proxy authorization successful, caching result"),Dt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(Eu.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(Eu.debug(this.ctx,"Proxy authorization successful, received token"),i)return Eu.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){Eu.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);Eu.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);Eu.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return Eu.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return Eu.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return Eu.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},lve=class extends tC{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(lo).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{Eu.debug(this.ctx,"Attempting to establish connection to proxy");let c=Jrt.request(i);c.useChunkedEncodingByDefault=!1,c.once("connect",(l,u,f)=>{Eu.debug(this.ctx,"Socket Connect returned status code",l.statusCode),c.removeAllListeners(),u.removeAllListeners(),l.statusCode!==200?(u.destroy(),a(new eR(`tunneling socket could not be established, statusCode=${l.statusCode}`,void 0,`ProxyStatusCode${l.statusCode}`))):f.length>0?(u.destroy(),a(new eR(`got non-empty response body from proxy, length=${f.length}`,void 0,"ProxyNonEmptyResponseBody"))):(Eu.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),c.once("error",l=>{Eu.debug(this.ctx,"Proxy socket connection error",l.message),c.removeAllListeners(),a(new eR(`tunneling socket could not be established, cause=${l.message}`,l))}),c.on("timeout",()=>{Eu.debug(this.ctx,"Proxy socket connection timeout"),a(new eR(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),c.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={hostname:n.hostname,port:n.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r,n.authorization),o}configureProxyAuthorization(r,n,i){r.headers["Proxy-Authorization"]=[],i&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},_O=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Ne(Krt()))}};d();var tnt=require("node:os");var wtr=new wt("repository"),tR="\\\\",rnt="(?:[#;].*)",KB=`(?:[^"${tR}]|${tR}.)`,_tr="[0-9A-Za-z-]",Xrt=`[A-Za-z]${_tr}*`,nnt=`\\s*${rnt}?$`,int=`(?:[^"${tR};#]|${tR}.)`,Str=`(?:"${KB}*"|"${KB}*(?<strCont>${tR})$)`,Rtr=`(?:${int}|${Str})+`,ktr=`(?:(?<cont>${tR})$)`,ont=`(?<value>${Rtr})${ktr}?${nnt}`,Zrt=new RegExp(`^${ont}`),Ptr=new RegExp(`^(?<value>${KB}*(?:(?<strCont>${tR})$|(?<quote>")))`),Btr=new RegExp(`^\\s*(?:(?<key>${Xrt})\\s*=\\s*${ont}|(?<soloKey>${Xrt})${nnt})`),Dtr=new RegExp(`(?<value>${int}+)|"(?<string>${KB}*)"`,"g"),ent="[-.0-9A-Za-z]+",Ntr=`\\s+"(?<ext>${KB}*)"`,Ltr=`\\s+"(?<extOnly>${KB}*)"`,Mtr=new RegExp(`^\\s*\\[(?:(?<simple>${ent})${Ntr}|${Ltr}|(?<simpleOnly>${ent}))\\]`),Ftr=new RegExp(`^\\s*${rnt}$`),uve=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(Mtr);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(Btr);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(Ptr),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(Zrt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(Zrt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(Dtr)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){Ftr.test(this.line)&&(this.line="")}},EZ=class extends pg{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await aE.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new c2)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new uve(i),a=new c2;return o.parse((c,l)=>a.add(c,l)),a}async tryLoadConfig(e,r,n){try{return await e.get(ko).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&wtr.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=$o(this.xdgConfigUri(),"git","config"),o=$o(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Oi(r).toLowerCase()!=="config.worktree")return;let n=b0(r),i=$o(n,"commondir");try{let o=(await e.get(ko).readFileString(i)).trimEnd();return $o(I_(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?Yc(process.env.XDG_CONFIG_HOME):$o(this.homeUri(),".config")}homeUri(){return Yc((0,tnt.homedir)())}};d();var snt=require("child_process");var vZ=class extends pg{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,snt.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){WHe.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=Os(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new c2;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};d();var cnt=Ne(require("node:events"));var ant="onWorkspaceChanged",ip=class{constructor(){this.emitter=new cnt.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(ant,e)}emit(e){this.emitter.emit(ant,e)}};function lnt(t){let e=gVe(t);return Otr(e),e.set(Qc,yZ(e)),e.set(tC,CZ(e)),e.set(pg,new rY([new vZ,new EZ])),e.set(ip,new ip),e.set(cF,new cF(e)),e}s(lnt,"createProductionContext");function Otr(t){t.set(Op,Op.fromEnvironment(!1)),t.set(ty,new O3),t.set(Tc,new QK(console))}s(Otr,"setupRudimentaryLogging");var Tti=new wt("context");d();d();var Or=new wt("chat");d();d();var il=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(il||{});function Jr(t){return t?(t=op(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(Jr,"getTextPart");var unt=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),dnt=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function nT(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(nT,"parseToolCallArguments");function fnt(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(fnt,"toOpenAIToolCall");function pnt(t,e,r,n,i,o,a,c){let l=JSON.parse(JSON.stringify(e));return r.tool_calls&&(l.tool_calls=r.tool_calls),f3(t,[l],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:c}}s(pnt,"convertToChatCompletion");function SO(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(SO,"isChatCompletionContentPartArray");function xZ(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(xZ,"isChatMessageArray");function op(t){if(typeof t=="string")return t;if(SO(t))return t;if(xZ(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(op,"resolveAsChatMessageContent");function RO(t,e){return(typeof t=="string"||SO(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(RO,"appendChatMessageContent");function dve(t,e){if(t){if(typeof t=="string"||SO(t))return[{role:"assistant",content:t}];if(xZ(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(dve,"resolveResponseAsChatMessages");d();var fve=new wt("streamMessages");function mnt(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(fve.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),fve.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),fve.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=WM(e.solution),a={role:"assistant",content:n};return pnt(t,a,o,e.index,e.requestId,i,e.reason??"",r)}s(mnt,"prepareChatCompletionForReturn");var $m=new wt("fetchChat"),bZ=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let c=a.body();try{c.destroy()}catch(l){$m.exception(e,l,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let c=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,c,a)}if(e.get(bm).processQuotaHeaders(a.headers),r.postOptions?.stream===!1){let c=await a.text(),l=JSON.parse(c),u=l.choices!=null?l.choices[0].message:{role:"assistant",content:""},f=a.headers.get("X-Request-ID")??cr(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:Jr(u.content).split(" "),requestId:{headerRequestId:f,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0},m=Jr(u.content);return await i(m,{text:m,copilotReferences:l.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>p3(a),"getProcessingTime")}}else{let l=gI.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:uE(l,f=>mnt(e,f,n)),getProcessingTime:s(()=>p3(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return dn.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:m3(e,n.count),top_p:CY(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},c=tE(n.repoInfo);return c!==void 0&&(a.nwo=c),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await Qtr(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;$m.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Dt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),c=JSON.parse(a);if(c.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:c.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(jr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return $m.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return $m.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(jr).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let l=n.headers.get("retry-after");return{type:"failed",reason:l?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(l).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:i,code:n.status}:($m.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status})}};async function Qtr(t,e,r,n,i,o,a,c,l,u,f,p){let m=$o(r,n,i);if(!c)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:n,uiKind:l});yY(a,h,["messages"]),h.properties.headerRequestId=o,Dt(t,"request.sent",h);let g=la(),y=LWe(l),E={...jb(t),...f.toCapiHeaders()};return a.messages?.some(x=>Array.isArray(x.content)?x.content.some(b=>"image_url"in b):!1)&&(E["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(x=>{Utr(x)&&x.tool_calls&&(x.tool_calls=x.tool_calls.map(b=>fnt(b)))}),r_(t,m,c,y,o,a,p,E).then(x=>{let b=l2(x);h.extendWithRequestId(b);let _=la()-g;return h.measurements.totalTimeMs=_,$m.info(t,`Request ${o} at <${m}> finished with ${x.status} status after ${_}ms`),$m.debug(t,"request.response properties",h.properties),$m.debug(t,"request.response measurements",h.measurements),$m.debug(t,"messages:",JSON.stringify(e)),Dt(t,"request.response",h),x}).catch(x=>{if(Du(x))throw x;let b=h.extendedBy({error:"Network exception"});Dt(t,"request.shownWarning",b),h.properties.message=String(Fd(x,"name")??""),h.properties.code=String(Fd(x,"code")??""),h.properties.errno=String(Fd(x,"errno")??""),h.properties.type=String(Fd(x,"type")??"");let _=la()-g;throw h.measurements.totalTimeMs=_,$m.info(t,`Request ${o} at <${m}> rejected with ${String(x)} after ${_}ms`),$m.debug(t,"request.error properties",h.properties),$m.debug(t,"request.error measurements",h.measurements),Dt(t,"request.error",h),x}).finally(()=>{f3(t,e,h)})}s(Qtr,"fetchWithInstrumentation");function Utr(t){return"tool_calls"in t}s(Utr,"isChatMessageWithToolCalls");var ka=class{constructor(e){this.ctx=e;this.fetcher=new bZ}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=cr(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},c=e.modelConfiguration;c&&(e.prediction?.content||delete a.prediction,e.prediction||(a.max_tokens=c.maxResponseTokens),a.stream=!!c.stream),e.logitBias&&(a.logit_bias=e.logitBias);let l=await this.ctx.get(jr).getToken(),u=fb(this.ctx,l,e.copilotApiProvider??"api"),f=e.endpoint??"completions",p=e.authToken??l.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:f,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return c&&(m.model=c.modelId),e.tools&&e.tools?.length>0&&(c===void 0||c.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=UM(r.chatCompletions,l=>this.postProcess(l,i));Or.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let c=0;for await(let l of a)Or.debug(this.ctx,`Received choice #${c} for request ${e.ourRequestId}: ${JSON.stringify(l,null,2)}`),o.push(l),c++;if(o.length==1){let l=o[0];switch(l.finishReason){case"stop":return{type:"success",value:Jr(l.message?.content)??"",toolCalls:l.tool_calls,requestId:n,numTokens:l.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:l.tool_calls,requestId:n};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:Jr(l.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let l=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(l.length>0)return{type:"successMultiple",value:l.map(u=>Jr(u.message.content)),toolCalls:l.map(u=>u.tool_calls).filter(u=>u),requestId:n}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return vK(e.tokens)?(r.extendWithRequestId(e.requestId),Dt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Or.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return Du(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Or.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};d();var rC=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};d();var iT=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};d();var qtr=".github/copilot-instructions.md",Htr=".github/git-commit-instructions.md",Wtr="global-copilot-instructions",Gtr="global-git-commit-instructions",nC=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:Wtr}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:Gtr}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let c=$o(r.uri,n),l=(await e.get(ko).readFileString(c)).trim();if(!l)return;(await cE(e,{uri:c},l)).status==="valid"&&o.push({kind:a,content:[{instruction:l,languageId:i}],reference:c})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let c=[];return n.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(e,a,qtr,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(e,a,Htr,void 0,i,0)),c});return await Promise.all(o),i}};d();var vu=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},IZ=class extends vu{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(r,n){this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n})}};d();d();d();function TZ(){return cr()}s(TZ,"uuidV4");d();var oT=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};d();var iC=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};d();d();d();var kO="filepath:",ol="...existing code...",pve="copilot-edited-file";d();function JB(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(JB,"getFenceForCodeBlock");var sp=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=JB(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${kO} ${La(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var mve=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},PO=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=Jr(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let c=Jr(a.content).endsWith(`
`)?Jr(a.content):`${Jr(a.content)}
`;return`${o}<SYSTEM>
${c}
End your response with </${pve}>.
</SYSTEM>


`}return o+Jr(a.content)},"")+`


The resulting document:
<${pve}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${ol}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new sp({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new mve({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new sp({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};d();var ME=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(hn).getOrReadTextDocument({uri:e})}};d();d();d();d();d();d();var oC=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Ht(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=fg(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new tn(n,i)}getRange(e){return lr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Pl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Pl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var hve=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new tn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new oC(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Pm(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var wZ=class extends hve{constructor(r){super();this.value=r;this._t=new oC(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};d();var BO=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new un(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let i=r.tryJoinTouching(n);if(i){r=i;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let i=[...r.replacements],o=[],a=0;for(let c of n.replacements){for(;;){let p=i[0];if(!p||p.replaceRange.start+a+p.getNewLength()>=c.replaceRange.start)break;i.shift(),o.push(p),a+=p.getNewLength()-p.replaceRange.length}let l=a,u,f;for(;;){let p=i[0];if(!p||p.replaceRange.start+a>c.replaceRange.endExclusive)break;u||(u=p),f=p,i.shift(),a+=p.getNewLength()-p.replaceRange.length}if(!u)o.push(c.delta(-a));else{let p=Math.min(u.replaceRange.start,c.replaceRange.start-l),m=c.replaceRange.start-(u.replaceRange.start+l);if(m>0){let E=u.slice(Ht.emptyAt(p),new Ht(0,m));o.push(E)}if(!f)throw new un("Invariant violation: lastIntersecting is undefined");let h=f.replaceRange.endExclusive+a-c.replaceRange.endExclusive;if(h>0){let E=f.slice(Ht.ofStartAndLength(f.replaceRange.endExclusive,0),new Ht(f.getNewLength()-h,f.getNewLength()));i.unshift(E),a-=E.getNewLength()-E.replaceRange.length}let g=new Ht(p,c.replaceRange.endExclusive-a),y=c.slice(g,new Ht(0,c.getNewLength()));o.push(y)}}for(;;){let c=i.shift();if(!c)break;o.push(c)}return this._createNew(o).normalize()}decomposeSplit(e){let r=[],n=[],i=0;for(let o of this.replacements)e(o)?(r.push(o),i+=o.getNewLength()-o.replaceRange.length):n.push(o.slice(o.replaceRange.delta(i),new Ht(0,o.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Ht.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return Tqe(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Ht(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let i=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Ht(r,n)}},_Z=class{constructor(e){this.replaceRange=e}static{s(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new Ht(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Ht(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},hnt=class t extends BO{static{s(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var SZ=class extends BO{static{s(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}apply(e){let r=[],n=0;for(let i of this.replacements)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let i of this.replacements)r.push(Vd.replace(Ht.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new ap(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],i=0,o=0,a=0;for(;o<this.replacements.length||i<e.replacements.length;){let c=e.replacements[i],l=this.replacements[o];if(l)if(!c)n.push(new Vd(l.replaceRange.delta(a),l.newText)),o++;else if(l.replaceRange.intersectsOrTouches(c.replaceRange)){if(o++,r)return}else l.replaceRange.start<c.replaceRange.start?(n.push(new Vd(l.replaceRange.delta(a),l.newText)),o++):(i++,a+=c.newText.length-c.replaceRange.length);else break}return new ap(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new ap(r)}normalizeEOL(e){return new ap(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),i=Vd.replace(Ht.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isEmpty?ap.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new wZ(this.apply(e.value))}mapData(e){return new gve(this.replacements.map(r=>new XB(r.replaceRange,r.newText,e(r))))}},RZ=class extends _Z{constructor(r,n){super(r);this.newText=n}static{s(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=xI(n,this.newText),o=Math.min(n.length-i,this.newText.length-i,hE(n,this.newText)),a=new Ht(this.replaceRange.start+i,this.replaceRange.endExclusive-o),c=this.newText.substring(i,this.newText.length-o);return new Vd(a,c)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new Vd(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),i=xI(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new Ht(i,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),i=hE(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new Ht(0,this.newText.length-i))}toEdit(){return new ap([this])}},ap=class t extends SZ{static{s(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new Vd(e,r)])}static insert(e,r){return new t([new Vd(Ht.emptyAt(e),r)])}static delete(e){return new t([new Vd(e,"")])}static fromJson(e){return new t(e.map(Vd.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let i of e){let o=n.at(-1);!o||i.replaceRange.isBefore(o.replaceRange)?n.push(i):(r=r.compose(t.create(n.reverse())),n=[i])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},Vd=class t extends RZ{static{s(this,"StringReplacement")}static insert(e,r){return new t(Ht.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(Ht.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var gve=class t extends SZ{static{s(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new XB(e,r,n)])}static insert(e,r,n){return new t([new XB(Ht.emptyAt(e),r,n)])}static delete(e,r){return new t([new XB(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new ap(this.replacements.map(e=>new Vd(e.replaceRange,e.newText)))}},XB=class t extends RZ{constructor(r,n,i){super(r,n);this.data=i}static{s(this,"AnnotatedStringReplacement")}static insert(r,n,i){return new t(Ht.emptyAt(r),n,i)}static replace(r,n,i){return new t(r,n,i)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};var ZB=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=ap.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{s(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let i=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${i}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),i=this._combinedEditsSinceStart.compose(e);i=i.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=i,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewRanges(),a=jtr(o,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${o.length} edits:`);for(let u=0;u<o.length;u++){let f=this._originalEdits.replacements[u],p=this.originalText.substring(f.replaceRange.start,f.replaceRange.endExclusive),m=f.newText,h=a[u],g=this._text.substring(h.start,h.endExclusive),y=Ave(g,m),E=Ave(m,p),x=Ave(g,p);if(this._debugLog.push(`  #${u+1}: "${p}"->"${m}"->"${g}" | 4gram:${y.toFixed(2)} noRevert:(${E.toFixed(2)},${x.toFixed(2)})`),E!==1){let b=1-Math.max(x-E,0)/(1-E);n+=f.replaceRange.length*b,i+=f.replaceRange.length}e+=f.newText.length*y,r+=f.newText.length}let c=r===0?1:e/r,l=i===0?1:n/i;return this._debugLog.push(`[RESULT] fourGram: ${c.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${l.toFixed(3)} (${n.toFixed(1)}/${i.toFixed(1)})`),{fourGram:c,noRevert:l}}};function Ave(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let c=0;c<=t.length-4;c++){let l=t.substring(c,c+4),u=n.get(l)||0;n.set(l,u+1)}for(let c=0;c<=e.length-4;c++){let l=e.substring(c,c+4),u=n.get(l)||0;n.set(l,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let c of n.values())o+=Math.abs(c);return(i-o)/i}s(Ave,"compute4GramTextSimilarity");function jtr(t,e){t=t.slice();let r=[],n=0;for(let i of e.replacements){for(;;){let a=t[0];if(!a||a.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(a.delta(n))}let o=[];for(;;){let a=t[0];if(!a||!a.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(a)}for(let a=o.length-1;a>=0;a--){let c=o[a],l=c.intersect(i.replaceRange).length;c=c.deltaEnd(-l+(a===0?i.newText.length:0));let u=c.start-i.replaceRange.start;u>0&&(c=c.delta(-u)),a!==0&&(c=c.delta(i.newText.length)),c=c.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(c)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}s(jtr,"applyEditsToRanges");d();d();var DO=class{static{s(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new tn(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function kZ(t,e,r,n=5e3){let i=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new DO(t),a=new DO(e),c=[];for(let l of i.changes)for(let u of l.innerChanges??[]){let f=a.positionToOffset(u.modifiedRange.getStartPosition()),p=a.positionToOffset(u.modifiedRange.getEndPosition()),m=e.substring(f,p),h=o.positionToOffset(u.originalRange.getStartPosition()),g=o.positionToOffset(u.originalRange.getEndPosition()),y=new Ht(h,g);c.push(new Vd(y,m))}return new ap(c)}s(kZ,"stringEditFromDiff");d();d();var gnt=require("worker_threads");var yve=class{constructor(){this.nextId=1;this.handlers=new Map}static{s(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,i=new Promise((o,a)=>{r=o,n=a});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:i}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function Vtr(t){let e={get:s((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...i)=>t(n,i)),r[n]),"get")};return new Proxy(Object.create(null),e)}s(Vtr,"createRpcProxy");var PZ=class{constructor(e,r,n){this.responseHandler=new yve;this.worker=new gnt.Worker(e,r),this.worker.on("message",async i=>{if("fn"in i)try{let o=await n?.[i.fn].apply(n,i.args);this.worker.postMessage({id:i.id,res:o})}catch(o){let a=o instanceof Error?o:new Error(String(o));this.worker.postMessage({id:i.id,err:a})}else this.responseHandler.handleResponse(i)}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))}),this.proxy=Vtr((i,o)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:a,result:c}=this.responseHandler.createHandler();return this.worker.postMessage({id:a,fn:i,args:o}),c})}static{s(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};d();d();d();var DZ=!1,NZ=!1,BZ=!1,$tr=!1,ztr=!1,Ant=!1,Ytr=!1,Ktr=!1,Jtr=!1,Xtr=!1;var FE,OE=globalThis,zm;typeof OE.vscode<"u"&&typeof OE.vscode.process<"u"?zm=OE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(zm=process);var ynt=typeof zm?.versions?.electron=="string",Ztr=ynt&&zm?.type==="renderer";typeof zm=="object"?(DZ=zm.platform==="win32",NZ=zm.platform==="darwin",BZ=zm.platform==="linux",$tr=BZ&&!!zm.env.SNAP&&!!zm.env.SNAP_REVISION,Ytr=ynt,Jtr=!!zm.env.CI||!!zm.env.BUILD_ARTIFACTSTAGINGDIRECTORY,ztr=!0):typeof navigator=="object"&&!Ztr?(FE=navigator.userAgent,DZ=FE.indexOf("Windows")>=0,NZ=FE.indexOf("Macintosh")>=0,Ktr=(FE.indexOf("Macintosh")>=0||FE.indexOf("iPad")>=0||FE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,BZ=FE.indexOf("Linux")>=0,Xtr=FE?.indexOf("Mobi")>=0,Ant=!0):console.error("Unable to resolve platform.");var Cve=0;NZ?Cve=1:DZ?Cve=3:BZ&&(Cve=2);var rR=DZ,Cnt=NZ;var trr=Ant&&typeof OE.importScripts=="function",Fii=trr?OE.origin:void 0;var sC=FE;var rrr=typeof OE.postMessage=="function"&&!OE.importScripts,Oii=(()=>{if(rrr){let t=[];OE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),OE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var nrr=!!(sC&&sC.indexOf("Chrome")>=0),Qii=!!(sC&&sC.indexOf("Firefox")>=0),Uii=!!(!nrr&&sC&&sC.indexOf("Safari")>=0),qii=!!(sC&&sC.indexOf("Edg/")>=0),Hii=!!(sC&&sC.indexOf("Android")>=0);var nR,Eve=globalThis.vscode;if(typeof Eve<"u"&&typeof Eve.process<"u"){let t=Eve.process;nR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?nR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:nR={get platform(){return rR?"win32":Cnt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var NO=nR.cwd,Ent=nR.env,vnt=nR.platform,zii=nR.arch;var orr=65,srr=97,arr=90,crr=122,cT=46,Ql=47,jf=92,sT=58,lrr=63,LZ=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function urr(t,e){if(t===null||typeof t!="object")throw new LZ(e,"Object",t)}s(urr,"validateObject");function Wa(t,e){if(typeof t!="string")throw new LZ(e,"string",t)}s(Wa,"validateString");var Vf=vnt==="win32";function Ai(t){return t===Ql||t===jf}s(Ai,"isPathSeparator");function vve(t){return t===Ql}s(vve,"isPosixPathSeparator");function aT(t){return t>=orr&&t<=arr||t>=srr&&t<=crr}s(aT,"isWindowsDeviceRoot");function MZ(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=Ql}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==cT||i.charCodeAt(i.length-2)!==cT){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===cT&&c!==-1?++c:c=-1}return i}s(MZ,"normalizeString");function drr(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(drr,"formatExt");function xnt(t,e){urr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${drr(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(xnt,"_format");var Ga={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],Wa(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=NO():(o=Ent[`=${e}`]||NO(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===jf)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)Ai(f)&&(c=1,u=!0);else if(Ai(f))if(u=!0,Ai(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!Ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&Ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!Ai(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else aT(f)&&o.charCodeAt(1)===sT&&(l=o.slice(0,2),c=2,a>2&&Ai(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=MZ(r,!n,"\\",Ai),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Wa(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return vve(o)?"\\":t;if(Ai(o))if(i=!0,Ai(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ai(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else aT(o)&&t.charCodeAt(1)===sT&&(n=t.slice(0,2),r=2,e>2&&Ai(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?MZ(t.slice(r),!i,"\\",Ai):"";return a.length===0&&!i&&(a="."),a.length>0&&Ai(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){Wa(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ai(r)||e>2&&aT(r)&&t.charCodeAt(1)===sT&&Ai(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];Wa(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ai(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ai(r.charCodeAt(1))&&(++i,o>2&&(Ai(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ai(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return Ga.normalize(e)},relative(t,e){if(Wa(t,"from"),Wa(e,"to"),t===e)return"";let r=Ga.resolve(t),n=Ga.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===jf;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===jf;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===jf;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===jf;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===jf&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===jf)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===jf?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===jf)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===jf&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=Ga.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===jf){if(e.charCodeAt(1)===jf){let r=e.charCodeAt(2);if(r!==lrr&&r!==cT)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(aT(e.charCodeAt(0))&&e.charCodeAt(1)===sT&&e.charCodeAt(2)===jf)return`\\\\?\\${e}`;return t},dirname(t){Wa(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ai(i)?t:".";if(Ai(i)){if(r=n=1,Ai(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ai(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else aT(i)&&t.charCodeAt(1)===sT&&(r=e>2&&Ai(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ai(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&Wa(e,"suffix"),Wa(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&aT(t.charCodeAt(0))&&t.charCodeAt(1)===sT&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ai(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ai(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Wa(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===sT&&aT(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ai(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===cT?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:xnt.bind(null,"\\"),parse(t){Wa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ai(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ai(i)){if(n=1,Ai(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!Ai(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&Ai(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!Ai(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(aT(i)&&t.charCodeAt(1)===sT){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ai(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ai(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===cT?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},frr=(()=>{if(Vf){let t=/\\/g;return()=>{let e=NO().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>NO()})(),pc={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:frr();Wa(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Ql)}return e=MZ(e,!r,"/",vve),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Wa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ql,r=t.charCodeAt(t.length-1)===Ql;return t=MZ(t,!e,"/",vve),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Wa(t,"path"),t.length>0&&t.charCodeAt(0)===Ql},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Wa(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":pc.normalize(e)},relative(t,e){if(Wa(t,"from"),Wa(e,"to"),t===e||(t=pc.resolve(t),e=pc.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Ql&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===Ql)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===Ql?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===Ql)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(Wa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ql,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Ql){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Wa(e,"ext"),Wa(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===Ql){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Ql){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Wa(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===Ql){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===cT?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:xnt.bind(null,"/"),parse(t){Wa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Ql,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===Ql){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===cT?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};pc.win32=Ga.win32=Ga;pc.posix=Ga.posix=pc;var Kii=Vf?Ga.normalize:pc.normalize,Jii=Vf?Ga.isAbsolute:pc.isAbsolute,xve=Vf?Ga.join:pc.join,Xii=Vf?Ga.resolve:pc.resolve,Zii=Vf?Ga.relative:pc.relative,eoi=Vf?Ga.dirname:pc.dirname,bnt=Vf?Ga.basename:pc.basename,Int=Vf?Ga.extname:pc.extname,toi=Vf?Ga.format:pc.format,roi=Vf?Ga.parse:pc.parse,noi=Vf?Ga.toNamespacedPath:pc.toNamespacedPath,ioi=Vf?Ga.sep:pc.sep,ooi=Vf?Ga.delimiter:pc.delimiter;d();var FZ=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};d();d();var bve=class t{constructor(e){this.edits=e;gg(()=>d2(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,r){let n=e.edits.map(i=>new aC(r.getTransformer().getRange(i.replaceRange),i.newText));return new t(n)}static single(e,r){return new t([new aC(e,r)])}static insert(e,r){return new t([new aC(lr.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new aC(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let c=o.range.getEndPosition(),l=Pl.ofText(o.text);if(e.isBefore(c)){let u=new tn(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),f=l.addToPosition(u);return OZ(u,f)}a.lineNumber+r!==n&&(i=0),r+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?c.lineNumber!==a.lineNumber?i+=l.columnCount-(c.column-1):i+=l.columnCount-(c.column-a.column):i=l.columnCount,n=c.lineNumber+r}return new tn(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof tn?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof tn?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return OZ(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new tn(1,1);for(let o of this.edits){let a=o.range,c=a.getStartPosition(),l=a.getEndPosition(),u=OZ(n,c);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=l}let i=OZ(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new Tve(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.edits.map((n,i)=>new aC(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.edits){let a=Pl.ofText(o.text),c=tn.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),l=a.createRange(c);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new un;if(this.edits.length===1)return this.edits[0];let r=this.edits[0].range.getStartPosition(),n=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let c=this.edits[o+1],l=lr.fromPositions(a.range.getEndPosition(),c.range.getStartPosition()),u=e.getValueOfRange(l);i+=u}}return new aC(lr.fromPositions(r,n),i)}equals(e){return PM(this.edits,e.edits,(r,n)=>r.equals(n))}},aC=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new un;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.text,a<e.length-1){let l=e[a+1],u=lr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(lr.fromPositions(n,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new bve([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(lr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(lr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new lr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=xI(r,n),o=Pl.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),c=lr.fromPositions(o,this.range.getEndPosition());return new t(c,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=xI(r,n);r=r.substring(i),n=n.substring(i);let o=hE(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function OZ(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return lr.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new un("start must be before end");return new lr(t.lineNumber,t.column,e.lineNumber,e.column)}s(OZ,"rangeFromPositions");var Ive=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new tn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new oC(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Pm(e)}};var Tve=class extends Ive{constructor(r){super();this.value=r;this._t=new oC(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};var LO=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let l of e){let u=new t(new $r(o,l.original.startLineNumber),new $r(a,l.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=l.original.endLineNumberExclusive,a=l.modified.endLineNumberExclusive}let c=new t(new $r(o,r+1),new $r(a,n+1));return c.modified.isEmpty||i.push(c),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),c=o.modified.intersect(n);a&&!a.isEmpty&&c&&!c.isEmpty&&i.push(new t(a,c))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new cC(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new un("not a valid diff");return new cC(new lr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new lr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new cC(new lr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new lr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(wnt(this.original.endLineNumberExclusive,e)&&wnt(this.modified.endLineNumberExclusive,r))return new cC(new lr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new lr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new cC(lr.fromPositions(new tn(this.original.startLineNumber,1),eD(new tn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),lr.fromPositions(new tn(this.modified.startLineNumber,1),eD(new tn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new cC(lr.fromPositions(eD(new tn(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),eD(new tn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),lr.fromPositions(eD(new tn(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),eD(new tn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new un}};function eD(t,e){if(t.lineNumber<1)return new tn(1,1);if(t.lineNumber>e.length)return new tn(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new tn(t.lineNumber,r.length+1):t}s(eD,"normalizePosition");function wnt(t,e){return t>=1&&t<=e.length}s(wnt,"isValidLineNumber");var QZ=class t extends LO{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=$r.join(e.map(i=>$r.fromRangeInclusive(i.originalRange))),n=$r.join(e.map(i=>$r.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},cC=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.edits.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new un("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new un("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new aC(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var Snt=require("fs");var $f=class{static{s(this,"DiffServiceImpl")}constructor(){this._worker=new km(()=>{let e=prr([xve(__dirname,"diffWorker.js"),xve(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new PZ(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:_nt(i.changes),moves:i.moves.map(a=>new FZ(new LO(new $r(a[0],a[1]),new $r(a[2],a[3])),_nt(a[4])))}}};function _nt(t){return t.map(e=>new QZ(new $r(e[0],e[1]),new $r(e[2],e[3]),e[4]?.map(r=>new cC(new lr(r[0],r[1],r[2],r[3]),new lr(r[4],r[5],r[6],r[7])))))}s(_nt,"toLineRangeMappings");function prr(t){for(let e of t)if((0,Snt.existsSync)(e))return e}s(prr,"firstExistingPath");d();d();var mrr=Symbol("MicrotaskDelay");function hrr(t){let e=new pE,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new Iy)});Promise.resolve(r).then(c=>{a.dispose(),e.dispose(),i(c)},c=>{a.dispose(),e.dispose(),o(c)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(hrr,"createCancelablePromise");function QE(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new Iy)})}):hrr(r=>QE(t,r))}s(QE,"timeout");var tD=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new un("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new un("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var MO=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new Iy)}},grr;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(c=>c,c=>{i||(i=c)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(grr||={});var FO=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new $0,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await f2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var UZ=class{constructor(e){this._deferred=new MO;this._asyncIterable=new FO(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var Rnt=new wt("editSurvivalReporter"),wve=class{constructor(e,r,n,i,o,a,c){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=i;this._markedEdits=o;this._sendTelemetryEvent=a;this._customTimeouts=c;this._store=new mu;this._editSurvivalTracker=new ZB(this._documentTextBeforeMarkedEdits,this._markedEdits),this.setupTimeouts()}static{s(this,"BaseEditSurvivalReporter")}setupTimeouts(){let e=this._customTimeouts||[3e4,12e4,3e5,6e5];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}report(e){let r=this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs);this._sendTelemetryEvent(r)}triggerReport(e){this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}createEditSurvivalResult(e,r,n,i){let o=e.computeTrackedEditsSurvivalScore();return{fourGram:o.fourGram,noRevert:o.noRevert,timeDelayMs:r,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:i}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),i=await e.get(hn).getOrReadTextDocument({uri:r.uri}),o=performance.now()-n;if(i.status!=="valid")throw new un(`Document ${r.uri} is not valid, details ${JSON.stringify(i)}`);return{text:i.document.getText(),readDocumentTimeMs:o}}async computeDiffWithTiming(e,r,n){let i=performance.now(),o=await kZ(r,n,e.get($f)),a=performance.now()-i;return{edits:o,diffComputationTimeMs:a}}};var qZ=class extends wve{static{s(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o,a,c)}scheduleReport(e,r){let n=new tD(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(i=>{Rnt.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,i),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new ZB(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new ZB(this._documentTextBeforeMarkedEdits,this._markedEdits);this.report(e)}catch(r){throw Rnt.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var knt=new wt("editSurvivalTrackerService"),lC=class{constructor(e){this.ctx=e}static{s(this,"EditSurvivalTrackerService")}initialize(e,r,n){knt.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let i;return{startReporter:s(o=>{(async()=>{try{let a=await kZ(r,n,this.ctx.get($f));i=new qZ(this.ctx,e,r,n,a,o)}catch(a){knt.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${dE(a)}`,a)}})()},"startReporter"),cancel:s(()=>{i?.cancel()},"cancel")}}};d();var mc=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var Arr=1e3,yrr={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:mn.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},rD=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new wt("codeMapper")}async mapCode(e,r,n,i,o,a=!1){if(!e.resource)throw new iC("No uri found in code block");if(i.isCancellationRequested)throw new oT;e.code.includes(ol)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let c=await this.ctx.get(hn).getOrReadTextDocument({uri:e.resource});if(c.status==="notfound")return o&&await this.reportCodeBlock(e,o),{code:e.code};if(c.status==="invalid"){let b=`Failed to find file ${e.resource} with status ${c.status} and reason ${c.reason}`,_=new iC(b);throw this.logger.error(this.ctx,b,_),_}let l=c.document.getText();if(l.length===0&&!e.code.includes(ol))return o&&await this.reportCodeBlock(e,o),{code:e.code};let u=new PO({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new ME(this.ctx)}),f=this.ctx.get(lC),p=await u.render();p=u.transformToFastApplyMessage(p),o&&await o({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Oi(e.resource),editDescription:e.markdownBeforeBlock});let m=await this.ctx.get(Bt).updateExPValuesAndAssignments(),h=TZ(),g=[],y=0,E=0,x=l.length+e.code.length+Arr;for(;;){let b={copilotApiProvider:"proxy",modelConfiguration:yrr,messages:p,uiKind:a?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${h} in iteration ${E} with params: ${JSON.stringify(b,null,2)}`);let k=await this.ctx.get(ka).fetchResponse(b,i,m);if(this.logger.debug(this.ctx,`Received map code response ${h} in iteration ${E} with result: ${JSON.stringify(k,null,2)}`),y=this.calculateResponseLength(k,g,y),k.type==="length"){if(y>x)throw new iC(`Code mapper might be in a loop: Rewritten length: ${y}, Document length: ${l.length}, Code block length ${e.code.length}`);p=await new PO({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new ME(this.ctx),inProgressRewriteContent:k.truncatedValue}).render()}else if(k.type==="success"){let P=g.join("");if(P){o&&await o({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Oi(e.resource),partialText:P,languageId:c.document.detectedLanguageId,markdownCodeFence:JB(P)});let N=f.initialize(c.document,l,P);return{code:P,editSurvivalTrackingSession:N,telemetry:{requestSource:n.chatRequestSource,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:k.requestId}}}else{let N=`No valid completion found for uri ${e.resource}`;throw new iC(N)}}else{if(k.type==="canceled")throw new mc;{let P=`Failed to map code for uri ${e.resource} with result type ${k.type}`;throw this.logger.error(this.ctx,P,k),new iC(P)}}E+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Oi(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Oi(e.resource)})}};d();var Zu=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};d();d();var lT=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};d();d();var HZ=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var uT=class{constructor(e,r){this.request=e;this.id=cr();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},_ve=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},WZ=class{constructor(e=[],r="panel",n="en"){this._id=cr();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new _ve(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new HZ(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var GZ=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new Zu({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:ub,type:"user"},new Zu({message:ub});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new Zu({message:lT.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new Zu({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new Zu({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new Zu({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new Zu({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new Zu({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new Zu({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new Zu({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new Zu({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};d();async function*Bnt(t){yield t}s(Bnt,"stringToAsyncIterable");d();d();var uC=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={}){try{let i=e.get(nC),o=i.getGlobalInstructions(n),a=await i.readFromWorkspaces(e,r,n),c=[...o,...a];return this.processInstructions(c,n)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${n.join(`
`)}</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let i of e.content)i.languageId?r.languageId&&i.languageId===r.languageId&&n.push(`For ${i.languageId} code: ${i.instruction}`):n.push(i.instruction);if(n.length!==0)return n.join(`
`)}static async appendToUserMessage(e,r,n="",i={}){if(!r||r.length===0)return n;let o=await t.getInstructions(e,r,i);return o?o+`

`+n:n}};d();var UE=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||Yc(r)}static uriToPath(e){let r=Os(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var jZ=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await uC.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(UE.posixFilePathToUri(e))}getFilePath(e){return UE.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${kO} ${this.exampleFilePath}`,`// ${ol}`,"{ changed code }",`// ${ol}`,"{ changed code }",`// ${ol}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${kO} ${this.tsExampleFilePath}`,"class Person {",`   // ${ol}`,"   age: number;",`   // ${ol}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new sp({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${ol}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};d();d();var VZ=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var Sve="<file>",OO="```",UO="###",Err=/^(`+)([^ \n]*)/,QO="filepath:";async function*Nnt(t,e){let r=new VZ(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let y=await r.peek(Math.max(OO.length,Sve.length,UO.length));if(y.startsWith(Sve)||y.startsWith(OO))break;if(y.startsWith(UO)){let E=await r.readLineIncludingLF(),x=E.substring(UO.length).trim();await e(x)?n.length=0:n.push(E)}else await Dnt(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(Sve);for(;!r.endOfStream&&!i.startsWith(OO);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(Err),c=a?a[2]:void 0,l=HGe(c?OGe(c):void 0),u=[`${l.lineComment.start} ${QO}`,`:: ${QO}`,`<!-- ${QO}`,`// ${QO}`,`# ${QO}`],f=Math.max(...u.map(y=>y.length)),p=l.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let y=await r.peek(Math.max(OO.length,f));if(y.startsWith(OO)){let E=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(E);continue}}if(!h&&u.some(E=>y.startsWith(E))){let E=await r.readLineIncludingLF(),x=u.reduce((b,_)=>y.startsWith(_)?E.substring(_.length):b,E);x=x.split("-->")[0].trim(),x.endsWith(p)&&(x=x.substring(0,x.length-p.length)),x=x.trim(),h=await e(x);continue}await Dnt(r,g)}yield{resource:h,language:c,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(Nnt,"getCodeBlocksFromResponse");async function Dnt(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(Dnt,"pipeOneLine");function Lnt(t){if(t.startsWith(`${UO} `))return"";let e=t.indexOf(`
${UO} `);return e===-1?"":t.substring(0,e)+`
`}s(Lnt,"parseOverallDescription");d();d();var $Z=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var vrr=new wt("CopilotEditsConversations"),Uc=class{constructor(e){this.editConversations=new Fr(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new WZ([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&vrr.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new $Z(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};d();d();var Pa=class{static{s(this,"ModelConfigurationProvider")}},zZ=class extends Pa{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Or.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(kd).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(kd).getMetadata(),i=brr(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===mn.Gpt35turbo||r===mn.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:kve(6144,i),maxResponseTokens:Rve(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===mn.Gpt4||r===mn.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:kve(10240,i),maxResponseTokens:Rve(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===mn.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await xrr(this.ctx,i),maxResponseTokens:Rve(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case wV.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function xrr(t,e){let r=t.get(Bt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),kve(i,e)}s(xrr,"getExpRequestTokens");function kve(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(kve,"getRequestTokens");function Rve(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(Rve,"getResponseTokens");function brr(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(brr,"filterModelsByCapabilities");var Fo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(Pa).getBestChatModelConfig([n]);if(e.get(bm).quotaExhausted&&!(await e.get(jr).getToken()).userInfo?.isFreeUser){let o=await e.get(kd).getFallbackModel();if(o)return e.get(Pa).getBestChatModelConfig([o?.id])}return e.get(Pa).getBestChatModelConfig(cm(r),i)}static transformMessages(e,r){return r===mn.O1Ga||r===mn.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var qE=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new ka(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=GZ.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof oT)await this.reportEnd(e,{message:ub});else if(n instanceof Zu)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){await this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Bt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,r);let o=await Fo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=Fo.transformMessages(n,o.modelFamily);return await this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=await Fo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new jZ({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new ME(this.ctx),modelName:n.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:ub,type:"user"},new oT;this.ctx.get(Uc).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=Bnt(r),o=new rD(this.ctx),a=s(async u=>UE.pathToUri(e,u),"createUri"),c=[],l=Lnt(r);l&&await this.ctx.get(vu).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:l}),await this.abortIfCancelled(e,n);for await(let u of Nnt(i,a))c.push(o.mapCode(u,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async f=>{await this.ctx.get(vu).reportTurn(e,f)}));await Promise.all(c),c.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof iC||i instanceof F3)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof oT)e.currentTurn.status="cancelled",e.currentTurn.response={message:ub,type:"user"},await this.reportEnd(e,{message:ub});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(vu).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(vu).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(vu).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}};d();var nD=class extends vd{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&r.get(jr).resetToken(),r.get(Af).updateSessionConfig(o)}recalculateUrlDefaults(r,n){let{serverUrl:i,apiUrl:o}=pb({serverUrl:LW(r,n.serverUrl),apiUrl:LW(r,n.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};d();var Eli=new wt("exp");function Mnt(t){let e=t.get(Bt);e.registerStaticFilters(wrr(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>vi(t,Rt.DebugOverrideEngine)||vi(t,Rt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>DW()?"copilot-web":t.get(rn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>Pve(!t.get(lo).isProduction()&&t.get(rn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(rn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>Irr(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(rn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>Pve(t.get(rn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>Trr(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(rn).getRelatedPluginInfo()){let i=Fp+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(o6).includes(i)){yq(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=Pve(n.version)}return r})}s(Mnt,"setupExperimentationService");function Irr(t){let e=t.get(rn).getEditorPluginInfo();return e.name==="copilot"&&ey(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(Irr,"getPluginRelease");function Trr(t){let e=t.get(rn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(Trr,"getTargetPopulation");function wrr(t){return _rr(t)}s(wrr,"createAllFilters");function _rr(t){let e=t.get(gs);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(lo).isProduction()?E_(t):"1.999.0"}}s(_rr,"createDefaultFilters");function Pve(t){return t.split("-")[0]}s(Pve,"trimVersionSuffix");d();var qO=(r=>(r.enabled="enabled",r.disabled="disabled",r))(qO||{}),HE=Symbol("onMCPToolsListChanged"),Ym=class{static{s(this,"McpManager")}};d();var Dg=class{static{s(this,"McpRuntimeNotifier")}},YZ=class extends Dg{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};d();var iD=class{static{s(this,"AbstractCopilotMessageSender")}};d();d();d();var Bve=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},KZ=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new Bve(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let c=Date.now(),l=1;for(let f of this._recentUserActions){let p=c-f.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=f.kind==="rejected"?1.5:.8;l*=1+(h-1)*m}let u=e*l;return u=Math.min(3e3,Math.max(50,u)),u}};d();d();d();var Jo;(n=>{function t(i){return new Dve(i)}n.ok=t,s(t,"ok");function e(i){return new Nve(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(Jo||={});var Dve=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},Nve=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};d();d();var Fnt=-1;function oD(){return Fnt!==-1?Fnt:Date.now()}s(oD,"now");function Ont(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(Ont,"lineRangeDistance");d();d();var Km=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new un(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(qc.fromJson))}static from(e){let r=e.map(i=>new qc(Ht.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new qc(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new qc(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return Srr(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new qc(Ht.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Ht.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)a?c.replaceRange.intersects(a.replaceRange)?i++:c.replaceRange.start<a.replaceRange.start?(r.push(new qc(c.replaceRange.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new qc(c.replaceRange.delta(o),c.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Ht(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Ht(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},qc=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Ht.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=xI(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,hE(r,this.newText)),o=new Ht(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function Srr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!c)n.push(new qc(o.replaceRange.delta(-i),o.newText));else{let u="",f=o.replaceRange.start-(c.replaceRange.start+a);f>0&&(u=c.newText.slice(0,f));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new qc(Ht.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Ht(Math.min(c.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new qc(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new Km(n).normalize()}s(Srr,"joinEdits");var Ys=class t{constructor(e){this.edits=e;kl(d2(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>ha.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([ha.replace(e,r)])}static insert(e,r){return new t([ha.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>ha.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new Km(this.edits.map(e=>new qc(e.range,e.newText)))}compose(e){return Rrr(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=ha.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=ha.replace(Ht.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(ha.replaceWithData(Ht.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new JZ(i)}if(this.edits.length!==e.arrayLength)throw kM(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let c=o;c<n.length;++c){let l=a.newText.length-a.range.length,u=n[c];n[c]=ha.replaceWithData(Ht.ofStartAndLength(u.range.start+l,u.range.length),u.newText,u.data)}}return new JZ(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new Ht(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(ha.replace(Ht.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)if(!a)r.push(ha.replace(c.range.delta(o),c.newText)),i++;else{if(c.range.intersectsOrTouches(a.range))return;c.range.start<a.range.start?(r.push(ha.replace(c.range.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function Rrr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.range.length}if(!c)n.push(ha.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-c.range.start;u>0&&n.push(ha.replaceWithData(Ht.emptyAt(c.range.start),c.newText.slice(0,u),c.data));let f=l.range.endExclusive+i-o.range.endExclusive;if(f>0){let m=ha.replaceWithData(Ht.emptyAt(l.range.endExclusive),l.newText.slice(-f),l.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new Ht(Math.min(c.range.start,o.range.start-a),o.range.endExclusive-i);n.push(ha.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return Ys.create(n).normalize()}s(Rrr,"joinEdits");var ha=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Ht(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Ht(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Ht(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return Ys.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=krr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=Prr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function krr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(krr,"commonPrefixLength");function Prr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(Prr,"commonSuffixLength");var ed=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return gg(()=>null.base.equals(this.base.apply(e))),gg(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return fC.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},JZ=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return Ys.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new dC(this.edits.map(e=>e.toEdit()))}},dC=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return Ys.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=Ys.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>Ys.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=Xo.fromEdit(new ed(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};d();var sD=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new WE(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>ha.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return Ys.create(r)}mapEdits(e){return new t(this.edits.map(e))}},WE=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new un;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.newText,a<e.length-1){let l=e[a+1],u=lr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(lr.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(lr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(lr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new lr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return ha.replace(n,this.newText)}};var Xo=class t{constructor(e){this.edits=e;kl(d2(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>Ng.deserialize(r)))}static fromEdit(e){let r=sD.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=WE.joinEdits(o,r);o.length=0;let f=Ng.fromSingleTextEdit(u,r);i.push(f)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(uI(n=>n.lineRange.startLineNumber,dI)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return Ys.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push($r.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new $r(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new Ng(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,f){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";f===void 0&&(f="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${f}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of BM(this.edits,(l,u)=>Ont(l.lineRange,u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let f=u.lineRange,p=u.newLines;for(let m of f.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,f.startLineNumber+o+m,"added",h)}l=f.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new Ng(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},Ng=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t($r.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Pm(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(lr.fromPositions(new tn(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(lr.fromPositions(e.range.getEndPosition(),new tn(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,f=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&f&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new $r(i,a),n)}toLineEdit(){return new Xo([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new tn(o,a)}else n=new tn(1,1);let i=r.addToPosition(new tn(1,1));return new WE(lr.fromPositions(n,i),"")}else return new WE(new lr(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new WE(lr.fromPositions(new tn(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new lr(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new WE(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return ha.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new $r(r,n),this.newLines.slice(i,this.newLines.length-o))}},Brr;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Brr||={});var fC=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=Xo.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new ed(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new Xo(r))}};d();var XZ=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw kM(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw kM(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};d();d();var r7=Ne(Og());function eot(t){return t.map(Lnr).join(`
`)}s(eot,"stringifyChatMessages");function Lnr({role:t,content:e}){if(t!==r7.Raw.ChatRole.User&&t!==r7.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===r7.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==r7.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(Lnr,"stringifyMessage");d();d();var Mnr=/^\w[\w\d+.-]*$/,Fnr=/^\//,Onr=/^\/\//;function Qnr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Mnr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Fnr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Onr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Qnr,"_validateUri");function Unr(t,e){return!t&&!e?"file":t}s(Unr,"_schemeFix");function qnr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Ug&&(e=Ug+e):e=Ug;break}return e}s(qnr,"_referenceResolution");var hs="",Ug="/",Hnr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,vT=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||hs,this.authority=e.authority||hs,this.path=e.path||hs,this.query=e.query||hs,this.fragment=e.fragment||hs):(this.scheme=Unr(e,a),this.authority=r||hs,this.path=qnr(this.scheme,n||hs),this.query=i||hs,this.fragment=o||hs,Qnr(this,a))}get fsPath(){return _xe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=hs),n===void 0?n=this.authority:n===null&&(n=hs),i===void 0?i=this.path:i===null&&(i=hs),o===void 0?o=this.query:o===null&&(o=hs),a===void 0?a=this.fragment:a===null&&(a=hs),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new ET(r,n,i,o,a)}static parse(e,r=!1){let n=Hnr.exec(e);return n?new ET(n[2]||hs,wee(n[4]||hs),wee(n[5]||hs),wee(n[7]||hs),wee(n[9]||hs),r):new ET(hs,hs,hs,hs,hs)}static file(e){let r=hs;if(rR&&(e=e.replace(/\\/g,Ug)),e[0]===Ug&&e[1]===Ug){let n=e.indexOf(Ug,2);n===-1?(r=e.substring(2),e=Ug):(r=e.substring(2,n),e=e.substring(n)||Ug)}return new ET("file",r,e,hs,hs)}static from(e,r){return new ET(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return rR&&e.scheme==="file"?n=t.file(Ga.join(_xe(e,!0),...r)).path:n=pc.join(e.path,...r),e.with({path:n})}toString(e=!1){return Sxe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new ET(e);return r._formatted=e.external??null,r._fsPath=e._sep===not?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var not=rR?1:void 0,ET=class extends vT{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=_xe(this,!1)),this._fsPath}toString(r=!1){return r?Sxe(this,!0):(this._formatted||(this._formatted=Sxe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=not),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},iot={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function tot(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=iot[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(tot,"encodeURIComponentFast");function Wnr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=iot[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(Wnr,"encodeURIComponentMinimal");function _xe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,rR&&(r=r.replace(/\//g,"\\")),r}s(_xe,"uriToFsPath");function Sxe(t,e){let r=e?Wnr:tot,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Ug,n+=Ug),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:tot(l,!1,!1)),n}s(Sxe,"_asFormatted");function oot(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+oot(t.substr(3)):t}}s(oot,"decodeURIComponentGraceful");var rot=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function wee(t){return t.match(rot)?t.replace(rot,e=>oot(e)):t}s(wee,"percentDecode");d();var qg=class t{constructor(e){this.uri=e;this._uri=vT.parse(Kc(this.uri))}static{s(this,"DocumentId")}static{this._cache=new mE({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return bnt(this.uri)}get extension(){return Int(this.uri)}toUri(){return this._uri}};var n7=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},_ee=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new pE;this.liveDependentants=0;this.fetchIssued=!1;this._result=new MO;kl(r.length>0),kl(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>i7.deserialize(r)),e.activeDocumentIdx,[],n7.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},i7=class t{constructor(e,r,n,i,o,a,c,l,u,f,p,m,h=i.length,g=new $r(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=c;this.recentEdits=l;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=f;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:$r.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Bl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(qg.create(e.id),e.workspaceRoot?vT.parse(e.workspaceRoot):void 0,g2.create(e.languageId),e.documentLinesBeforeEdit,Xo.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?lr.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Bl(e.documentBeforeEdits),dC.deserialize(e.recentEdits),new Bl(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,$r.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Hi=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=Jo.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=Jo.ok(e),i=r.build(n);return new t(n,i)}},xT=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?eot(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,c=e.isOk(),l=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:JM(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:c,noNextEditReasonKind:l,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,kl(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function Gnr(t,...e){let r=t;for(let n of e)r=n(r);return r}s(Gnr,"chainStatelessNextEditProviders");var pD=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=Gnr(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},mD=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new Hi(Jo.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let c=XZ.createSortPermutation(a,uI(u=>u.lineRange.startLineNumber,dI)),l=new Xo(c.apply(a));return new Hi(Jo.ok({edit:l,permutation:c.inverse()}),n.telemetry)}},hD=class extends mD{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],l=i[a];if(c.trim()!==l.trim())return!1}return!0}},gD=class extends mD{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};d();d();var jnr=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),Vnr=new Map(Object.entries(jnr).map(([t,e])=>[t,{languageId:t,...e}]));function aot(t){return Rxe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(aot,"getLanguage");function Rxe(t){return Vnr.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(Rxe,"_getLanguage");d();var AD=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?Kf.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new Kf(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new Kf(new qo(0,0),new qo(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!Kf.isRange(e))throw bT("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw bT("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw bT("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var qo=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw bT("line must be non-negative");if(r<0)throw bT("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw bT();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw bT();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},Kf=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?qo.isPosition(e.start)&&qo.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new qo(e,r),a=new qo(n,i)):qo.isPosition(e)&&qo.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):qo.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=qo.Max(e.start,this._start),n=qo.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=qo.Min(e.start,this._start),n=qo.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw bT();let n;return e?qo.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return $nr(this)}};function bT(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(bT,"illegalArgument");function $nr(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s($nr,"getDebugDescriptionOfRange");d();function cot(t){let r=t.split(/\r?\n/).map(znr),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(cot,"looksLikeCode");function znr(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),tAe(t)||(e+=1);{tAe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(znr,"guessLineType");var yD;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(yD||={});function Ynr(t){return t.replace(/^\s+/g,"")}s(Ynr,"trimLeadingWhitespace");function kxe(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(kxe,"isImportStatement");var Knr=new mE(t=>{let e=aot(t),{start:r,end:n}=e.lineComment,i=`(?:${eAe(r)})`,o=n?`(?:${eAe(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function Pxe(t,e){let r=t.match(Knr.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=Ynr(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(Pxe,"extractEndLineComment");function Ree(t,e){let r=Pxe(t,e);if(!(r&&r.content.trim().length>0&&cot(r.commentWithoutTokens)))return r}s(Ree,"extractExplicativeEndLineComment");var CD=class t extends mD{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>kxe(i,r))||Jnr(e,n).some(i=>kxe(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function Jnr(t,e){return bqe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(Jnr,"getOldLines");d();var Dxe=Ne(Og());d();d();d();var Hg;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(Hg||={});var gC=Jf("instantiationService");function Xnr(t,e,r){e[Hg.DI_TARGET]===e?e[Hg.DI_DEPENDENCIES].push({id:t,index:r}):(e[Hg.DI_DEPENDENCIES]=[{id:t,index:r}],e[Hg.DI_TARGET]=e)}s(Xnr,"storeServiceDependency");function Jf(t){if(Hg.serviceIds.has(t))return Hg.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");Xnr(e,r,i)},"id");return e.toString=()=>t,Hg.serviceIds.set(t,e),e}s(Jf,"createDecorator");d();d();var up=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};d();var Bxe=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},o7=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new Bxe(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};d();var dR=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var Znr=!1,kee=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},Pee=class t{constructor(e=new dR,r=!1,n,i=Znr){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(gC,this),this._globalGraph=i?n?._globalGraph??new o7(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,Vz(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)Lqe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=s7.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw vqe("service accessor is only valid during the invocation of its target method");let c=this._getOrCreateServiceInstance(a,n);if(!c)throw new Error(`[invokeFunction] unknown service '${a}'`);return c},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof up?(n=s7.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=s7.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=Hg.getServiceDependencies(e).sort((c,l)=>c.index-l.index),o=[];for(let c of i){let l=this._getOrCreateServiceInstance(c.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id}.`,!1),o.push(l)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let c=a-r.length;c>0?r=r.concat(new Array(c)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof up)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof up?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new o7(l=>l.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],c=new Set;for(;a.length;){let l=a.pop();if(!c.has(String(l.id))){if(c.add(String(l.id)),i.lookupOrInsertNode(l),o++>1e3)throw new kee(i);for(let u of Hg.getServiceDependencies(l.desc.ctor)){let f=this._getServiceInstanceOrDescriptor(u.id);if(f||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(u.id)),f instanceof up){let p={id:u.id,desc:f,_trace:l._trace.branch(u.id,!0)};i.insertEdge(l,p),a.push(p)}}}}for(;;){let l=i.roots();if(l.length===0){if(!i.isEmpty())throw new kee(i);break}for(let{data:u}of l){if(this._getServiceInstanceOrDescriptor(u.id)instanceof up){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof up)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let c=this._createInstance(r,n,o);return a.add(c),c}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var s7=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let c=[],l=new Array(o+1).join("	");for(let[u,f,p]of a._dep)if(f&&p){r=!0,c.push(`${l}CREATES -> ${u}`);let m=n(o+1,p);m&&c.push(m)}else c.push(`${l}uses -> ${u}`);return c.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var Bee=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new dR(...e):e??new dR}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new Pee(this._collection,!0)}};var Nee=Jf("ITelemetrySender"),Wg=Jf("IChatMLFetcher");var Dee=class{constructor(){this._stream=new UZ;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},Lee=Jf("IEndpointProvider");d();var YE=Jf("IParserService");d();var ED=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},a7=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},c7=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},IT=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},TT=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var Mee=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new ED(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},l7=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let f;return n<=i?(IT.Assert(e===r+1,"originalStart should only be one more than originalEnd"),f=[new ED(e,0,n,i-n+1)]):e<=r?(IT.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[new ED(e,r-e+1,n,0)]):(IT.Assert(e===r+1,"originalStart should only be one more than originalEnd"),IT.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}let o=[0],a=[0],c=this.ComputeRecursionPoint(e,r,n,i,o,a),l=o[0],u=a[0];if(c!==null)return c;{let f=this.ComputeDiffRecursive(e,l,n,u),p=this.ComputeDiffRecursive(l+1,r,u+1,i);return this.ConcatenateChanges(f,p)}}WALKTRACE(e,r,n,i,o,a,c,l,u,f,p,m,h,g,y,E,x){let b=null,_=null,k=new Mee,P=r,N=n,M=h[0]-E[0]-i,J=-1073741824,se=this.m_forwardHistory.length-1;do{let K=M+e;K===P||K<N&&u[K-1]<u[K+1]?(p=u[K+1],g=p-M-i,p<J&&k.MarkNextChange(),J=p,k.AddModifiedElement(p+1,g),M=K+1-e):(p=u[K-1]+1,g=p-M-i,p<J&&k.MarkNextChange(),J=p-1,k.AddOriginalElement(p,g+1),M=K-1-e),se>=0&&(u=this.m_forwardHistory[se],e=u[0],P=1,N=u.length-1)}while(--se>=-1);b=k.getReverseChanges(),k=new Mee,P=a,N=c,M=h[0]-E[0]-l,J=1073741824,se=x?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let K=M+o;K===P||K<N&&f[K-1]>=f[K+1]?(p=f[K+1]-1,g=p-M-l,p>J&&k.MarkNextChange(),J=p+1,k.AddOriginalElement(p+1,g+1),M=K+1-o):(p=f[K-1],g=p-M-l,p>J&&k.MarkNextChange(),J=p,k.AddModifiedElement(p+1,g+1),M=K-1-o),se>=0&&(f=this.m_reverseHistory[se],o=f[0],P=1,N=f.length-1)}while(--se>=-1);return _=k.getChanges(),this.ConcatenateChanges(b,_)}ComputeRecursionPoint(e,r,n,i,o,a){let c=0,l=0,u=0,f=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,y=new Int32Array(g),E=new Int32Array(g),x=i-n,b=r-e,_=e-n,k=r-i,N=(b-x)%2===0;y[x]=e,E[b]=r;for(let M=1;M<=h/2+1;M++){let J=0,se=0;u=this.ClipDiagonalBound(x-M,M,x,g),f=this.ClipDiagonalBound(x+M,M,x,g);for(let K=u;K<=f;K+=2){K===u||K<f&&y[K-1]<y[K+1]?c=y[K+1]:c=y[K-1]+1,l=c-(K-x)-_;let G=c;for(;c<r&&l<i&&this.ElementsAreEqual(c+1,l+1);)c++,l++;if(y[K]=c,c+l>J+se&&(J=c,se=l),!N&&Math.abs(K-b)<=M-1&&c>=E[K])return o[0]=c,a[0]=l,G<=E[K]&&M<=1448?this.WALKTRACE(x,u,f,_,b,p,m,k,y,E,c,r,o,l,i,a,N):null}p=this.ClipDiagonalBound(b-M,M,b,g),m=this.ClipDiagonalBound(b+M,M,b,g);for(let K=p;K<=m;K+=2){K===p||K<m&&E[K-1]>=E[K+1]?c=E[K+1]-1:c=E[K-1],l=c-(K-b)-k;let G=c;for(;c>e&&l>n&&this.ElementsAreEqual(c,l);)c--,l--;if(E[K]=c,N&&Math.abs(K-x)<=M&&c<=y[K])return o[0]=c,a[0]=l,G>=y[K]&&M<=1448?this.WALKTRACE(x,u,f,_,b,p,m,k,y,E,c,r,o,l,i,a,N):null}if(M<=1447){let K=new Int32Array(f-u+2);K[0]=x-u+1,TT.Copy2(y,u,K,1,f-u+1),this.m_forwardHistory.push(K),K=new Int32Array(m-p+2),K[0]=b-p+1,TT.Copy2(E,p,K,1,m-p+1),this.m_reverseHistory.push(K)}}return this.WALKTRACE(x,u,f,_,b,p,m,k,y,E,c,r,o,l,i,a,N)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return TT.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],TT.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return TT.Copy(e,0,i,0,e.length),TT.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(IT.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),IT.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(c=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new ED(i,o,a,c),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,c=r%2===0;if(e<0){let l=o%2===0;return c===l?0:1}else{let l=a%2===0;return c===l?i-1:i-2}}};d();d();function lot(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(lot,"isObject");function Fee(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(Fee,"assertType");function uot(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(lot(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(uot,"safeStringify");var Oee=!1,Mxe=!0,eir=200,u7=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new xT(e),i=e.getActiveDocument(),o=fR(i);if(!o||!o.isEmpty())return Hi.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,c=i.recentEdit.apply(a),l=[];for(let _ of e.documents)_.id!==i.id&&(l.push(`RELATED DOC: ${_.getDisplayPath()}`),l.push("```patch"),l.push(...oir(_)),l.push("```"),l.push(""));l.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...a),l.push("```"),l.push("");let u="// ...rest of the lines omitted...",f=new $r(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=f.endLineNumberExclusive){let _=p<c.length;l.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,p)),_&&(l.push(u),m={editRange:new $r(f.endLineNumberExclusive,p+1),omittedMessage:u}),l.push("```"),l.push("")}l.push(`NEXT VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,f.endLineNumberExclusive-1)),l.push("");let h=c.slice(f.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(l.join(`
`),h,r);if(r.isCancellationRequested)return Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):Hi.noEdit({kind:"fetchFailure",error:new Error(uot(g.err))},n);let{result:y,ttft:E}=g.val;if(E!==void 0&&n.setTtft(E),y.trim().length===0)return Hi.noEdit({kind:"noSuggestions"},n);let x=Qee(i.languageId,c,f,void 0,y,m),b=await Qxe(this._parserService,x,i,{requireEditWithinNLines:5});if(b){let _=new Xo([b]);return Hi.edit({edit:_},n)}else return Hi.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};u7=gd([na(1,YE)],u7);var vD=class extends u7{constructor(r,n){super(vD.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return Jo.error({kind:"cancel"});let o=await Fxe(this.ID,this._chatMLFetcher,[{role:Dxe.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:Dxe.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:c,ttft:l}=o.val;return c=c.replace(/^```[^\n]*\n/,""),Jo.ok({ignored:a,result:c,ttft:l})}};vD=gd([na(0,YE),na(1,Wg)],vD);async function Fxe(t,e,r,n,i){let o=new Dee,a=!1,c,l=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=rir(l,n),f=e.fetchOne(r,async(y,E,x)=>(typeof c>"u"&&(c=Date.now()),o.update(y,x),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await f}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await f;return g.type!=="success"?Jo.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):Jo.ok({ttft:c,ignored:p,result:m})}s(Fxe,"fetchUntilConvergence");function fR(t){let e=new Ht(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:tir(t)}s(fR,"getOrDeduceSelectionFromLastEdit");function tir(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new lr(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],c=hE(a,o),l=o.length-c+1;return new lr(i,l,i,l)}s(tir,"deduceSelectionFromLastEdit");async function rir(t,e){let r=nir(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),c=[],l=[],u=[],f=[],p=s(m=>{let h=l[0];return{ignored:c[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){c[m.index]=(c[m.index]??"")+m.text;continue}let h=m.text;if(l[m.index]=l[m.index]??"",l[m.index]+=h,f[m.index]=f[m.index]??"",f[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=l[m.index];if(n.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||n.indexOf(y.join(`
`)+`
`)<=0)continue;let x=f[m.index].substring(f[m.index].length-o);if(a.indexOf(x)>0)return p("convergence!")}return{ignored:c[0]??"",result:l[0]??"",shouldCancelRequest:!1}}s(rir,"fetchCompletionUntilConvergence");function nir(t,e){let r=[],n=[];return new FO(async i=>{for await(let o of t)for(let a of o.choices){let c=a.index,l=a.text??"";if(!e||r[c]){i.emitOne({kind:"completion",index:c,text:l});continue}n[c]=(n[c]??"")+l;let u=n[c].match(e);!u||typeof u.index>"u"||(r[c]=!0,i.emitOne({kind:"ignore",index:c,text:n[c].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[c].substring(u.index+u[0].length)}),n[c]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(nir,"getTextAfterFirstPattern");function iir(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],c=o[o.length-1];if(a!==c)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],c=o[0];if(a!==c)break;n++,o.shift()}return new Ng(new $r(n,i),o)}s(iir,"createReducedLineEdit");var xD=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=iir(r,n,i);let o=new Xo([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,c){for(let l=0;l<Math.min(a.length,c.length);l++)if(a[l]!==c[l])return l;return Math.min(a.length,c.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),E=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),x=y.join(`
`),b=E.join(`
`),{editDistance:_}=f(x,b);return new Nxe(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new a7(this.oldLines,n),o=new a7(this.newLines,n),a=new l7(i,o),c=e(a.ComputeDiff(),i,o),l=r(c),u=[];{let p=0;for(let m of c)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(PM(this.newLines,u))return new Lxe(this.languageId,this.oldLines,this.edit,this.newLines,c,l);return fot(this.languageId,this.oldLines,u);function f(p,m){let h=new c7(p),g=new c7(m),E=new l7(h,g).ComputeDiff(),x=0,b=0;for(let N of E)x+=N.originalLength,b+=N.modifiedLength;let _=p.length,k=m.length,P=x+b;return{aChanged:x,bChanged:b,aLength:_,bLength:k,editDistance:P}}}},Nxe=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},Lxe=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new Xo([this.edit]);{let r=this.groupInHunks();return new Xo(r.map(n=>{let i=n[0],o=n[n.length-1];return new Ng(new $r(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!Mxe)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,c)=>a+c.editDistance,0)>eir&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,c=o.originalStart+o.originalLength+1;if(!Oxe(new $r(a,c),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((l,u)=>l+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new Xo([this.edit]),i=r(n);this.parseErrorCount=await d7(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],c=i[o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,1),e(f)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],c=i[i.length-o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o,1),e(f)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:c,newDiffModifiedLines:l}=this._eliminateCommentsDiff(o,a);n=n||c,e=e.concat(l),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let l=!1,u=!1;for(let f of e){if(f.trim().length===0)continue;let p=Ree(f,this.languageId);p&&p.content.trim().length===0?l=!0:u=!0}if(l&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(l=>Ree(l,this.languageId)),i=r.map(l=>Ree(l,this.languageId)),o=n.filter(l=>!!l).length,a=i.filter(l=>!!l).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let c=!1;for(let l=0;l<r.length;l++){let u=r[l],f=i[l];if(!f)continue;let{content:p}=f;r[l]=u.substring(0,p.length).trimEnd(),c=!0}return{hasChanges:c,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return fot(this.languageId,this.oldLines,e)}};function Oxe(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(Oxe,"editIsInsideEditWindow");function fot(t,e,r){let i=e.length+1,o=r.slice(0);return new xD(t,e,new $r(1,i),o).resolveDiff()}s(fot,"createPossibleEditFromLines");function Qee(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=yD.fromString(i.trimEnd()),c=o?a.some(E=>E.indexOf(o.omittedMessage)>=0):!1,l=[],u=s((E,x)=>{l.push(new xD(t,e,E,x))},"generateEdit");function f(){n&&u(n,a)}s(f,"generateEditCompletionRange");function p(){if(c)return;let x=new $r(r.endLineNumberExclusive,e.length+1);x.length>a.length+5||u(x,a)}s(p,"generateEditAllDoc");function m(){for(let E=1;E<a.length;E++){let b=a.slice(a.length-E).join(`
`);for(let _=r.endLineNumberExclusive-1;_<e.length;_++){let P=e.slice(_,_+E).join(`
`);b===P&&u(new $r(r.endLineNumberExclusive,_+1),a.slice(0,a.length-E))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!c)return;let E=[];for(let x of a){if(x.indexOf(o.omittedMessage)>=0){u(o.editRange,E.map(b=>b));return}E.push(x)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),f(),h(),p(),m(),!i.endsWith(`
`)){let E=i.substring(0,i.lastIndexOf(`
`)+1);l.push(...Qee(t,e,r,n,E,o))}return g(l);function g(E){return y(E,s(b=>b.edit.lineRange.startLineNumber+","+b.edit.lineRange.endLineNumberExclusive+","+b.edit.newLines.join("|"),"keyfn"))}function y(E,x){let b=new Set,_=[];for(let k of E){let P=x(k);b.has(P)||(b.add(P),_.push(k))}return _}}s(Qee,"generatePossibleEdits");async function Qxe(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),c=Oee?await d7(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(Oee){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let l=a.filter(p=>c==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=c),u=l.length>0?l:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let f=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>f(p)-f(m)),u.length>0?u[0].edit:null}s(Qxe,"selectBestEdit");function oir(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,c=s((l,u)=>{l>a+1&&r.push("[...]"),u?r.push(`-${n[l]}`):r.push(`${n[l]}`),a=l},"addOldLineIndex");for(let l of t.recentEdit.edits){for(;i<l.lineRange.startLineNumber-1;)Math.min(l.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&c(i,!1),i++;for(;i<l.lineRange.endLineNumberExclusive-1;)c(i,!0),i++;r.push(l.newLines.map(u=>`+${u}`).join(`
`)),o=l.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&c(i,!1),i++;return r.push("[...]"),r}s(oir,"summariseDocDiff");function pot(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(pot,"summarizeEditsAsUnifiedDiff");async function d7(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s(d7,"getParseErrorCount");d();var KE=Ne(Og());d();var f7=Jf("ITokenizerProvider");var wT=class extends KE.PromptRenderer{constructor(r,n,i={validate:!0},o,a,c){let l=o.acquireTokenizer({tokenizer:c.tokenizerName}),u={modelMaxPromptTokens:c.tokenBudget};super(u,r,n,l);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let c=a.get(f7);return new wT(n,i,o,c,r,a.get(Wg))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let l=1;l<o.messages.length;l++){let u=o.messages[l],f=o.messages[l-1];if(u.role===KE.Raw.ChatRole.System&&f.role===KE.Raw.ChatRole.System){let p=f.content.at(-1),m=u.content.at(0);p&&m&&p.type===KE.Raw.ChatCompletionContentPartKind.Text&&m.type===KE.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,f.content=f.content.concat(u.content.slice(1))):(f.content.push({type:KE.Raw.ChatCompletionContentPartKind.Text,text:`
`}),f.content=f.content.concat(u.content)),o.messages.splice(l,1),l--}}let c=o.messages[o.messages.length-1];if(this.options.validate&&c&&c.role!==KE.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};wT=gd([na(3,f7),na(4,gC),na(5,Wg)],wT);d();var mot=Ne(Og());var Uee=class extends mot.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};d();var Uxe=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Ht(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new Kf(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},Gg=class extends Uxe{constructor(r){super();this.value=r;this._transformer=new oC(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new tn(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return sir(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(air(r))}_validatePosition(r){if(r.line<0)return new qo(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new qo(n-1,o)}if(r.character<0)return new qo(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new qo(r.line,i):r}};function sir(t){return new qo(t.lineNumber-1,t.column-1)}s(sir,"corePositionToVSCodePosition");function air(t){return new tn(t.line+1,t.character+1)}s(air,"vsCodePositionToCorePosition");d();d();function hot(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(hot,"min");d();function qxe(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>qxe(n,e))}}s(qxe,"toAstNode");function got(t,e){let r=e3(e,a=>a.endExclusive>=t.start),n=fg(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let c=e[a];c.start>o&&i.push(new Ht(o,c.start)),o=c.endExclusive}return o<t.endExclusive&&i.push(new Ht(o,t.endExclusive)),i}s(got,"subtractRange");d();d();d();var qee=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=A2(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=A2(e),r=A2(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=A2(e),r=A2(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=A2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new Hxe(i,e-a)}};var Hxe=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var p7=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Pm(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new qee(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=Pm(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new qo(r.index,Math.min(r.remainder,n))}toRange(e){return new Kf(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Ht(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new AD(this.validateRange(n.range),n.newText));return new Km(r.map(n=>new qc(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new AD(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof qo))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new qo(r,n):e}validateRange(e){return new Kf(this.validatePosition(e.start),this.validatePosition(e.end))}};var Hee=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new km(()=>new p7(this.text));this._originalPositionOffsetTransformer=new km(()=>new p7(this.originalText));this._text=new km(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var Wxe=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},mR=class extends Hee{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function Gee(t,e,r){let n=[],i=[],o=[];for(let c=0;c<r.length;c++){let{document:l,overlayNodeRoot:u,selection:f}=r[c],p=l.getText(),m=f?l.rangeToOffsetRange(f):void 0,h=Aot(u,l),g=Gxe.fromRootNode(h,p),y=jxe.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(M=>M.node.range.intersectsOrTouches(m)?(M.node.children.length===0&&M.markAsSurviving(),!0):!1),n.push(y),i.push(y.getTextFragment());let E=s(M=>m?M.range.endExclusive<m.start?m.start-M.range.endExclusive:M.range.start>m.endExclusive?3*(M.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),x=new mE(M=>m?M.children.length===0?M.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:hot(M.children.map(J=>x.get(J)))+1:0),b=new mE(M=>{let J=M.parent?b.get(M.parent):Number.MAX_SAFE_INTEGER,se=x.get(M);return Math.min(J,se)}),_=!!e.tryPreserveTypeChecking,k=s(M=>_&&M.node?.kind==="import_statement"?0:100*b.get(M)+M.depth+10*(E(M)/p.length),"costFn"),P=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(l):e.costFnOverride;if(P!==void 0){let M=k;k=s(J=>{let se=M(J);return se===!1?!1:J.node?P(J.node,se,l):se},"costFn")}let N=y.getDescendantsAndSelf();for(let M of N){if(!M.node.node)continue;let J=k(M.node);J!==!1&&o.push({idx:c,node:M,cost:J})}}o.sort(uI(c=>c.cost,dI));for(let{node:c,idx:l}of o){if(c.markAsSurviving(),n.reduce((f,p)=>f+p.getTextFragment().length,0)>t)break;i[l]=n[l].getTextFragment()}let a=[];for(let c=0;c<i.length;c++){let l=i[c],{document:u}=r[c],f=new mR(u,l.toTextEditFromOriginal(u.getText().length)),p=f,m=n[c];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:f.originalText,decorations:got(Ht.ofLength(f.originalText.length),f.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:qxe(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(f)}return a}s(Gee,"summarizeDocumentsSyncImpl");function Aot(t,e,r=void 0){let n=new Ht(t.startIndex,t.endIndex),i=[],o=new Wxe(r,t,n,i,e);for(let a of t.children)i.push(Aot(a,e,o));return o}s(Aot,"createRemovableNodeFromOverlayNode");var Gxe=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new Ht(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new Ht(0,e.range.start),o=new Ht(e.range.endExclusive,r.length),a=[],c=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,c,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,c,r)),c}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let c=e.range.start;for(let u of e.children){let f=new Ht(c,u.range.start);f.isEmpty||o.push(new t(void 0,f,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),c=u.range.endExclusive}let l=new Ht(c,e.range.endExclusive);l.isEmpty||o.push(new t(void 0,l,[],n,a,r))}return a}getLeadingWs(){return cir(this.document,this.range)}getTrailingWs(){return lir(this.document,this.range)}};function cir(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(cir,"getLeadingWs");function lir(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(lir,"getTrailingWs");var jxe=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let c of e.children){let l=t.fromNodeParent(c,a,n,i);o.push(l)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new _T(this.node.range,this.node.document);if(!this._surviving)return new pR("");let e=Array.from(BM(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),c=e[n+1].at(0);if(a.fragment instanceof _T&&c.fragment instanceof _T){let l=a.fragment.trimEnd(),u=c.fragment.trimStart();if(l.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=l,i.length=1,i[0].fragment=new pR(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),c=a.lastIndexOf(`
`);c!==-1&&(a=a.substring(c+1));let l=i.at(-1).node.node.getTrailingWs();i[0].fragment=new pR(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+l)}}let r=[];for(let n of e)for(let i of n)uir(r,i.fragment);return Wee.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},m7=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(c){(n!==c||i.length>0)&&(r.push(new qc(new Ht(n,c),i)),i="")}s(o,"emit");function a(c){if(c instanceof Wee)for(let l of c.fragments)a(l);else c instanceof pR?i+=c.text:c instanceof _T&&(o(c.range.start),n=c.range.endExclusive)}return s(a,"process"),a(this),o(e),new Km(r)}},pR=class extends m7{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},_T=class t extends m7{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Ht(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Ht(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Ht(this.range.start,r.range.endExclusive),this.originalText):null}},Wee=class t extends m7{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new pR(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function uir(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof _T&&e instanceof _T){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(uir,"pushFragment");d();var jee=Ne(Og());function h7(t){if(Array.isArray(t))return t.map(r=>h7(r));let e=(0,jee.toMode)(jee.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(h7,"rawMessageToCAPI");d();d();var Vee=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new un("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new un("Invalid child startIndex");if(a.endIndex>r)throw new un("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function Cot(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=dir(o,e),[c]=Eot(t,a,void 0);return c.adjust(t,vot(e)),c.toOverlayNode(t,!0)}catch{return new $ee(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(Cot,"getStructureUsingIndentation");function Eot(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let c=e.getStartLineNumber(r),l=e.getEndLineNumber(r);if(c>i||l>i)break;let u=a;if([a,r]=Eot(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new un("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new un("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new $ee(n,i,o),r]}s(Eot,"createFoldingRangeTree");var $ee=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new un("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let c=Vxe(e,a,a,"LINE",[]);c&&n.push(c)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=Vxe(e,o,o,"LINE",[]);a&&n.push(a)}return Vxe(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function Vxe(t,e,r,n,i){let o=t.getOffsetAtPosition(new qo(e-1,0)),a=r<t.getLineCount()?new qo(r,0):new qo(r-1,t.getLineLength(r-1)),c=t.getOffsetAtPosition(a);return new Vee(o,c,n,i)}s(Vxe,"createOverlayNode");function dir(t,e){return fir(t,vot(e))}s(dir,"generateFoldingRegions");function vot(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(vot,"isOffSide");function fir(t,e){let r=t.getOptions().tabSize,n=new $xe,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let c=t.getLineContent(a),l=mir(c,r),u=i[i.length-1];if(l===-1){e&&(u.endAbove=a);continue}if(u.indent>l){do i.pop(),u=i[i.length-1];while(u.indent>l);let f=u.endAbove-1;f-a>=1&&n.insertFirst(a,f,l)}u.indent===l?u.endAbove=a:i.push({indent:l,endAbove:a,line:a})}return n.toIndentRanges()}s(fir,"_computeRanges");var pir=65535,hR=16777215,yot=4278190080,$xe=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>hR||r>hR)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new zxe(e,r)}};function mir(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(mir,"computeIndentLevel");var zxe=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>hR||a>hR)throw new Error("startLineNumber or endLineNumber must not exceed "+hR);for(;e.length>0&&!r(o,a);)e.pop();let c=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((c&255)<<24),this._endIndexes[n]=a+((c&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&hR}getEndLineNumber(e){return this._endIndexes[e]&hR}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&yot)>>>24)+((this._endIndexes[e]&yot)>>>16);return r===pir?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};d();function gR(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(gR,"fromUnknown");var sl=Ne(Og());var zee="current-version",dp="next-version",bot=2,Iot=10,Tot=.7,hir=/```[^\n]*\n/,JE=class extends pD{constructor(r,n,i){super(JE.ID,[o=>new CD(o),o=>new hD(o),o=>new gD(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new KZ}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let c=i.get(a.id);if(!c||!o(c,a))return!1}return!0;function o(a,c){if(a.documentAfterEditsNoShortening.value!==c.documentAfterEditsNoShortening.value)return!1;let l=fR(a),u=l?Yxe(a,l):null,f=fR(c),p=f?Yxe(c,f):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(bot,Iot)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new xT(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(l){return Hi.noEdit({kind:"unexpected",error:gR(l)},i)}let c=o.getArtificalDelay();return c>0&&await QE(c),a}async doGetNextEdit(r,n,i,o){return r.documents.some(l=>{if(l.recentEdit.edits.length===0)return!1;for(let u of l.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):Hi.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return Hi.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Hi.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Hi.noEdit(k,o)}let{summarizedEditWindow:c,editWindowAllowedEditLineRange:l,allowedEditLineRange:u,maxCompletionLineCount:f,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:E}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let x=await Fxe(this.ID,this.fetcher,h7(p),{convergence:g,ignoreReplyTextBefore:hir,maxCompletionLineCount:f,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(x.isOk()?"success":x.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),x.isOk()&&typeof x.val.ttft=="number"&&o.setTtft(x.val.ttft),i.isCancellationRequested)return Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(x.isError())return x.err.kind==="cancel"?Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Hi.noEdit({kind:"fetchFailure",error:gR(x.err.err)},o);let b=x.val.result;if(b.length===0){let k=`<${dp}>
`,P=x.val.ignored.indexOf(k);P>=0&&(b=x.val.ignored.substring(P+k.length))}if(b=gir(b),b.trim().length===0)return Hi.noEdit({kind:"noSuggestions"},o);let _;if(c&&l&&u){let k=Air(y,c,l,b);if(!k||k.edits.length===0)return Hi.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let P=yir(c,k);if(P.edits.length===0)return Hi.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(Oee){let J=await d7(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),se=P.apply(y.documentAfterEditsNoShortening.value);if(await d7(this._parserService,y.languageId,se)>J)return Hi.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=Cir(y,P);let N=_.edits[0].lineRange.startLineNumber,M=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!Oxe(new $r(N,M),u))return Hi.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=Qee(y.languageId,E,m,h,b,void 0),P=await Qxe(this._parserService,k,y,{requireEditWithinNLines:100});if(!P)return Hi.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new Xo([P])}return Eir(y,_)?Hi.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):vir(y,_)?Hi.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):xir(y,_)?Hi.noEdit({kind:"filteredOut",message:"uncategorized"},o):bir(y,_)?Hi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Hi.edit({edit:_},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await QE(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,c=i.documentAfterEdits.value.split(a),l=fR(i);if(l===null)return;let u=Yxe(i,l),f=new Gg(i.documentAfterEditsNoShortening.value),p=await wir(this._parserService,{getText:s(()=>f.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let se=Iir(i.documentAfterEditsLines,l.startLineNumber),K=Math.max(1,Math.min(se,l.startLineNumber-bot)),G=l.startLineNumber-K,q=Math.min(c.length,l.endLineNumber+Iot),le=q-l.endLineNumber,ie=u.line-G,V=u.line+le,H=new Kf(ie,0,V,f.getLineLength(V));return{firstEditableLineInShortenedDocument:K,lastEditableLineInShortenedDocument:q,editWindow:H}}(),y=Gee(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:f,selection:g}])[0],E=new $r(1,m),x=new $r(m,h+1),b=y.text,{messages:_,prediction:k,editWindowIsInPrompt:P}=await this._renderPrompt({request:r,activeDocumentSlice:b,languageId:i.languageId},n),N=b.split(/\r\n|\r|\n/).length,M=y.projectRange(g),J=y.positionOffsetTransformer.toOffsetRange(M);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new $r(M.start.line+1,M.end.line+2),allowedEditLineRange:new $r(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:P,activeDocument:i,activeDocumentLines:c,completionPrefixRange:E,completionRange:x,convergence:b,expectedConvergencePrefix:J.start,maxCompletionLineCount:N+20}}async _renderPrompt(r,n){let o=await wT.create(this._instantiationService,Jxe,r).render(void 0,n,{trace:!1}),a=o.metadata.get(Zee)?.prediction,c=!!o.metadata.get(Kee);return{messages:o.messages,prediction:a,editWindowIsInPrompt:c}}};JE=gd([na(0,Wg),na(1,YE),na(2,gC)],JE);function gir(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${dp}>`,`
`),t=e(t,`\`\`\`
</${dp}>`,`
`),t=e(t,`</${dp}>`,`
`),t}s(gir,"removeSuffixFromReply");function Yxe(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new Gg(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(Yxe,"getCursorPositionInOuterDocument");function Air(t,e,r,n){let i=yD.fromString(e.text),o=yD.fromString(n.trimEnd()),c=new xD(t.languageId,i,new $r(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),l=e.isOriginal?c:c.containWithinLines(r);if(!l)return null;let u=Mxe?l.eliminateLargeChangeHunks():l;return u?u.toLineEdit("multiple-hunks"):null}s(Air,"generateSummarizedEditWindowEdit");function yir(t,e){let r=e.toEdit(new Bl(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(yir,"convertSummarizedEditWindowEditToOuterDocumentEdit");function Cir(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return ha.replace(new Ht(a,a+i.replaceRange.length),i.newText)}),n=new ed(t.documentAfterEdits,Ys.create(r));return Xo.fromEdit(n)}s(Cir,"convertOuterDocumentEditToProjectedEdit");function Eir(t,e){let r=e.toEdit(t.documentAfterEdits),n=wot(t.documentAfterEdits.value,r),i=new Yee,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(wot(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(Eir,"editWouldUndo");function vir(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!Pot(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(vir,"editWouldDeleteWhatWasJustInserted");function xir(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!Pot(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(Pxe(i,t.languageId))return!0}return!1}s(xir,"editWouldDeleteAComment");function bir(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(c=>c.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return Kxe(o,i)/i.size>.8}s(bir,"editWouldDuplicateExistingLines");function Pot(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(Pot,"editIsDeletion");function Iir(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(Iir,"findLineNumberAboveWithContent");var Yee=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(Sot(this.inserted,e.inserted),Sot(this.deleted,e.deleted))}isUndoneBy(e){let r=Rot(e.inserted,e.deleted),n=Rot(e.deleted,e.inserted),i=Kxe(n,this.inserted),o=Kxe(r,this.deleted);return n.size>6&&i/n.size>Tot||r.size>6&&o/r.size>Tot}};function wot(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let c=t.substring(a.start,a.endExclusive);for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of _ot(l))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let c of a.split(/\r\n|\r|\n/)){c=c.trim();for(let l of _ot(c))r.add(l)}},"tryAddInserted");for(let a of e.edits){let c=a.removeCommonPrefix(t).removeCommonSuffix(t),l=a.removeCommonSuffix(t).removeCommonPrefix(t);c.isNeutral()||(i(c.range),i(l.range),i(c.range.intersect(l.range)),o(Tir(c.newText,l.newText)))}return new Yee(r,n)}s(wot,"getInformationDelta");function Tir(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(Tir,"trimOverlap");function _ot(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(_ot,"to4grams");function Sot(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(Sot,"setUnion");function Rot(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(Rot,"setMinus");function Kxe(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(Kxe,"setIntersectionCount");async function wir(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||Cot(new Gg(e.getText()),e.languageId,void 0)}s(wir,"getStructure");var Jxe=class extends sl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${dp}>`,`\`\`\`${o}`,`${i}`,"```",`</${dp}>`].join(`
`),c=(0,sl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new Zee(a)}),vscpp(sl.SystemMessage,{priority:1e3},vscpp(Uee,null),this._getInstructions()),vscpp(sl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(sl.Chunk,{priority:300},vscpp(Jee,{doc:l}))):vscpp(sl.Chunk,{priority:100+u},vscpp(Jee,{doc:l}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(sl.Chunk,{priority:300},vscpp(Xee,{doc:l}))):vscpp(sl.Chunk,{priority:200+u},vscpp(Xee,{doc:l}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(c,{priority:300},vscpp(sl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new Kee}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",zee,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",zee,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",zee,"> and </",zee,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",dp,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",dp,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",dp,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",dp,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",dp,">IDENTICAL</",dp,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",dp,">.")}}},Kee=class extends sl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},Jee=class extends sl.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},Xee=class extends sl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...pot(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},Zee=class extends sl.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};d();d();function Bot(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(Bot,"findIndexes");function _ir(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=Bot(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=r[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let c=0;for(;e.length&&e[c].trim()==="";)c++;let l=[...e],f=Bot(t,e[c]).slice(-n).reverse();for(let p of f){let m=!1,h=c;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...l]}return e}s(_ir,"deduplicateEditRegion");function Dot(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:_ir(i,r.split(/\r?\n/),o).join(`
`)}}s(Dot,"postProcessUpdatedEditWindow");d();var ete=Ne(Og());function Not(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===ete.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===ete.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(Not,"getTextPart");function Sir(t){return{type:ete.Raw.ChatCompletionContentPartKind.Text,text:t}}s(Sir,"toTextPart");function Xxe(t){return[Sir(t)]}s(Xxe,"toTextParts");d();var tte=Jf("IDiffService");var nbe=Ne(Og());d();var rte="<|cursor|>",AR="<|code_to_edit|>",bD="<|/code_to_edit|>",Mot="<|area_around_code_to_edit|>",Fot="<|/area_around_code_to_edit|>",Rir="<|current_file_content|>",kir="<|/current_file_content|>",Pir="<|edit_diff_history|>",Bir="<|/edit_diff_history|>",Dir="<|recently_viewed_code_snippets|>",Nir="<|/recently_viewed_code_snippets|>",Lir="<|recently_viewed_code_snippet|>",Mir="<|/recently_viewed_code_snippet|>",Oot=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${AR} and ${bD} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${rte}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${AR} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${AR} and ${bD} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${AR} or ${bD} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function Qot(t,e,r,n){let i=t.getActiveDocument(),o=Qir(t,n),a=Fir(t,n,2e3),c=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${Dir}
${o}
${Nir}

${Rir}
current_file_path: ${c}
${e}
${kir}

${Pir}
${a}
${Bir}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${c}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${rte}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${AR}\` and \`${bD}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(Qot,"getUserPrompt");function Fir(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let c=Oir(a);if(c===null)continue;let l=e(c);if(r-=l,r<0)break;n.push(c)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(Fir,"getEditDiffHistory");function Oir(t){let e=[],r=Xo.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(l=>l.trim().length>0).length===0&&a.filter(l=>l.trim().length>0).length===0)continue;let c=i.lineRange.startLineNumber-1;e.push(`@@ -${c},${o.length} +${c},${a.length} @@`),e.push(...o.map(l=>`-${l}`)),e.push(...a.map(l=>`+${l}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(Oir,"generateDocDiff");function Lot(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[Lir,n,e,Mir].join(`
`)}s(Lot,"formatCodeSnippet");function Qir(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),c=[],l=0;for(let u=a.length-1;u>=0;u--){let f=a[u],p=f.content.split(/\r?\n/);n&&(p=p.map((E,x)=>`${x+1}|${E}`));let m=p.map(E=>e(E)+1),h=e(Lot(f.path,"",!0)),g=m.reduce((E,x)=>E+x,0)+h,y=!1;for(;p.length>0&&l+g>r;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(l+=g,c.push(Lot(f.path,p.join(`
`),y)))}return c.join(`

`)}s(Qir,"getRecentCodeSnippets");function Zxe(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(Zxe,"truncateCode");var Uot=2,qot=10,ebe=15,tbe=1e3,rbe=2e3;var Xm=class extends pD{constructor(r,n,i){super(Xm.ID,[o=>new CD(o),o=>new hD(o),o=>new gD(o)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new xT(r);try{if(r.xtabEditHistory.length===0)return Hi.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new Hi(o,i.build(o))}catch(o){return Hi.noEdit({kind:"unexpected",error:gR(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=fR(o);if(a===null)return Jo.error({kind:"uncategorized",error:gR(new Error("NoSelection"))});let c=s(ue=>Math.floor(ue.length/4),"computeTokens"),l=new tn(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(l),f=o.documentAfterEdits.value,p=f.substring(0,u)+rte+f.substring(u),m=l.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-ebe),y=Math.min(h.length,m+ebe+1),E=Uot,x=qot,b=Math.max(0,m-E),_=Math.min(h.length,m+x+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new lr(b,0,_,0)),P;P=f.split(/\r?\n/).slice(b,_);let N=[b,_],M=h.slice(b,_),J=[Mot,...h.slice(g,b),AR,...M,bD,...h.slice(_,y),Fot].join(`
`),se=J,K;{let ue=c(J),ne=0;if(ue>=rbe)K=J,ne=g;else{let me=Math.floor((rbe-ue)/2),[he]=Zxe(h.slice(0,g),!0,me),[,Qe]=Zxe(h.slice(y),!1,me);ne=Math.max(he,m-tbe);let ke=Math.min(Qe+y,m+tbe+1);K=[...h.slice(ne,g),J,...h.slice(y,ke)].join(`
`)}}let G=Qot(r,K,se,c),q=[{role:nbe.Raw.ChatRole.System,content:Xxe(Oot)},{role:nbe.Raw.ChatRole.User,content:Xxe(G)}];if(i.setPrompt(q),await this.debounce(i),n.isCancellationRequested)return Jo.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let le=new x3,ie,V=await this._endpointProvider.getEndpointInfo(this.ID),H=await this._chatMLFetcher.fetchOne(h7(q),async(ue,ne,me)=>{ie===void 0&&(ie=le.elapsed())},{id:V.id,name:V.name},{temperature:0},n);if(H.type==="canceled")return Jo.error({kind:"gotCancelled",message:"afterFetchCall"});if(H.type==="quotaExceeded")return Jo.error({kind:"quotaExceeded"});if(H.type!=="success")return Jo.error({kind:"fetchFailure",error:gR(H)});ie&&i.setTtft(ie),i.setResponse(H.value);let z=Xm.getBacktickSection(H.value);return await this.generateReturnEditFormat(o,k,P.join(`
`),z,N,i)}async generateReturnEditFormat(r,n,i,o,a,c){let{updatedEditWindow:l}=Dot(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,l,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),f=l.split(/\r?\n/),p=u.changes.map(m=>new Ng(new $r(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),f.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?Jo.error({kind:"noSuggestions"}):Jo.ok({editWindow:n,edit:new Xo(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,Xm.DEBOUNCE_MS-n);r.setDebounceTime(i),await QE(i)}};Xm=gd([na(0,tte),na(1,Wg),na(2,Lee)],Xm);d();var nte=class t extends ds{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new XM,Sm(this,r.openDocuments,(i,o)=>{o.add(gE(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;kl(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let c=a.rootedEdits.changes[0];if(c.edits.length===0)return;let l=this.idToEntry.get(i.id),u=a.rootedEdits.previous,f=new ed(u,c);if(l===void 0){this.pushToHistory(i.id,f);return}let p=l.entry.edit,m=Xo.fromEdit(p),h=Xo.fromEdit(f);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){l.removeFromHistory();let g=p.edit.compose(c),y=new ed(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,f)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let c=this.idToEntry.get(a.docId);c!==void 0&&a===c.entry&&this.idToEntry.delete(a.docId)}}}};d();d();var ibe=Ne(require("crypto"));var g7=ibe.randomUUID.bind(ibe);var Kot=Ne(Og()),lbe=Ne(HO());d();var ite=Jf("ISnippyService");d();d();var A7=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),ote=65;function qir(t){let e=0,r;A7.lastIndex=0;do if(r=A7.exec(t),r&&(e+=1),e>=ote)break;while(r);return e}s(qir,"lexemeLength");function Hir(t,e){let r=0,n;A7.lastIndex=0;do if(n=A7.exec(t),n&&(r+=1,r>=e))return A7.lastIndex;while(n);return t.length}s(Hir,"offsetFirstLexemes");function Hot(t,e){let r=t.split("").reverse().join(""),n=Hir(r,e);return r.length-n}s(Hot,"offsetLastLexemes");function obe(t){return qir(t)>=ote}s(obe,"hasMinLexemeLength");d();d();var Wot;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(Wot||={});var sbe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(sbe||={});var Got;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(Wot.is)}e.is=t,s(t,"is")})(Got||={});var abe;(e=>{function t(r){if(sbe.is(r))return Jo.error(r);if(Got.is(r))return Jo.ok(r)}e.to=t,s(t,"to")})(abe||={});var jot;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(jot||={});var Vot;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(Vot||={});var $ot;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})($ot||={});var zot;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(jot.is)&&"page_info"in r&&Vot.is(r.page_info)&&"license_stats"in r&&$ot.is(r.license_stats)}e.is=t,s(t,"is")})(zot||={});var cbe;(e=>{function t(r){if(sbe.is(r))return Jo.error(r);if(zot.is(r))return Jo.ok(r)}e.to=t,s(t,"to")})(cbe||={});var ste=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,abe.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,cbe.to)}async fetch(e,r,n){let i=this.ctx.get(ai),o=await this.ctx.get(jr).getToken(),a=fb(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),c={Authorization:`Bearer ${o.token}`,...Rh(this.ctx),"X-GitHub-Api-Version":qA},l=new AbortController,u=await i.fetch(a,{method:"POST",headers:c,json:r,signal:l.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let f=await u.json();return n(f)}};var Yot=new wt("[CODE REFERENCING]"),ID=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(ste,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(br).getTextDocument({uri:e.toString()});if(!a){Yot.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let c=a.version,l;try{l=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!l)throw new Error(`Failed to parse match response: ${l}`);if(l.isError())throw new Error(`Failed to match: ${l.err}`);if(l.val.snippets.length===0)return;let{snippets:u}=l.val,f=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:E}=g.val;return{match:h,files:y,licenseStats:E}}),m=(await Promise.all(f)).filter(h=>!!h);if(m.length===0){Yot.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),E=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,x={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:E,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:c,details:y.map(b=>({license:b,url:`${h.match.github_url}`}))};await this.ctx.get(j0).handleIPCodeCitation(this.ctx,x)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=Ys.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),c=o.start,l=a.value.substring(o.start,o.endExclusive);if(!obe(l)){let m=a.value.slice(0,o.start),h=Hot(m,ote);c=h,l=a.value.slice(h,o.start+r.newText.length)}if(!obe(l))return;let u=a.getTransformer(),f=u.getPosition(c),p=u.getPosition(o.endExclusive);return{source:l,startOffset:c,endOffset:o.endExclusive,startPosition:f,endPosition:p}}};ID=gd([na(1,gC)],ID);async function Jot(t){let e=new Bee;return e.define(Nee,new ube(t)),e.define(tte,new $f),e.define(YE,new up(dbe,[!0])),e.define(ite,new up(ID,[t])),e.define(Wg,await pbe.Create(t)),e.define(f7,new up(mbe)),e.define(Lee,new fbe(t)),e.seal()}s(Jot,"createInstantiationService");var ube=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([c,l])=>l!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([c,l])=>l!==void 0)),a=dn.createAndMarkAsIssued(i,o);Dt(this.ctx,e,a)}},dbe=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},fbe=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==Xm.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Bt).updateExPValuesAndAssignments();return{id:this.ctx.get(Bt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},pbe=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await Fo.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),c=g7(),l=await this.ctx.get(Df).fetchAndStreamChat(this.ctx,a,ZA.createEmptyConfigForTesting(),"nextEditSuggestion",c,async(u,f)=>{if(r)return await r(u,0,{text:f.text})},n,i,o);if(l.type==="success"){let u=[];if(r)for await(let p of l.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:c,serverRequestId:p.requestId.headerRequestId};let f=u.join("");return{type:"success",value:f}}else return l.type==="failed"&&l.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:l.reason}:{type:t.clsResponseTypeToResponseType(l.type),reason:l.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:Not(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},mbe=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new ate("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new ate(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},ate=class{constructor(e){this.mode=Kot.OutputMode.Raw;this.tokenizer=zo(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===lbe.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===lbe.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};d();d();var cte=class extends ds{constructor(r){super();this.workspace=r;this._garbageCollector=new Abe(20);this._documentCaches=new Map;Sm(this,r.openDocuments,(n,i)=>{let o=new hbe(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(gE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(ac(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},hbe=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new gbe(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},gbe=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},Abe=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};d();d();d();var y7=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},lte=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new y7("",null),this._tail=new y7("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new y7(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var ute=class extends ds{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new lte(50);Sm(this,r.openDocuments,(n,i)=>{let o=new ybe(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(gE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(ac(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},ybe=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};d();var dte=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let l=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,f)=>u+f.recentEdits.edits.length,0),n=l.recentEdits.edits.length,i=l.languageId,o=l.lineCountBeforeClipping,a=l.clippingRange.length}let c=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:c,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},TD=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:c,statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:f,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:E,isShown:x,acceptance:b,logProbThreshold:_,documentsCount:k,editsCount:P,activeDocumentEditsCount:N,promptLineCount:M,promptCharCount:J,isDefaultEndpoint:se,hadLowLogProbSuggestion:K,nonTerminatingError:G,nEditsSuggested:q,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:V,hasNextEdit:H,nextEditLogprob:z,maxLinesPerEdit:X,noNextEditReasonKind:ue,noNextEditReasonMessage:ne,firstEditStrategy:me,firstPickStrategyOverride:he,fetchTime:Qe,fetchResult:ke,fetchError:tt,fetchStartedAfterMs:Fe}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:b,nonTerminatingError:G,noNextEditReasonKind:ue,noNextEditReasonMessage:ne,firstEditStrategy:me,firstPickStrategyOverride:he,fetchResult:ke,fetchError:tt},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(c),statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:this._boolToNum(f),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(se),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(E),isShown:this._boolToNum(x),logProbThreshold:_,documentsCount:k,editsCount:P,activeDocumentEditsCount:N,promptLineCount:M,promptCharCount:J,hadLowLogProbSuggestion:this._boolToNum(K),nEditsSuggested:q,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:V,fetchStartedAfterMs:Fe,fetchTime:Qe,hasNextEdit:this._boolToNum(H),nextEditLogprob:z,maxLinesPerEdit:X})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};TD=gd([na(0,Nee)],TD);d();var wD=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var yR=!1,Xot=300,_D=class extends ds{constructor(r,n,i,o,a,c,l){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=c;this._snippyService=l;this._rejectionCollector=new cte(this._workspace);this._nextEditCache=new ute(this._workspace);this._recentlyShownCache=new vbe;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;Sm(this,this._workspace.openDocuments,(u,f)=>{f.add(Zge(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(TD)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),c=new dte(this._statelessNextEditProvider.ID);c.setOpportunityId(n.requestUuid??g7());let l=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),f,p,m,h;if(l)f=l[0],h=l[1],p=a,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),await QE(Xot);else if(u)f=u.edit,h=u.source,p=u.documentBeforeEdit,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),c.setSubsequentEditOrder(u.subsequentN),await QE(Xot);else{h=new Ebe,c.setHeaderRequestId(h.headerRequestId);let E=o.value.get();p=E;let x=await this.fetchNextEdit(h,r,c,i),b=E.value!==o.value.get().value;if(x.isError())switch(x.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":m=x.err.error;break;default:JM(x.err)}else if(!b){let _=x.val;_.isEmpty()||(f=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(r,_,h))}}if(c.markEndTime(),m)throw this._telemetrySender.sendTelemetry(c),m;if(!f)return this._telemetrySender.sendTelemetry(c),new wD(void 0);if(this._rejectionCollector.isRejected(r,f))return c.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(c),new wD(void 0);kl(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new wD({edit:f,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,c),f.isNeutral()||this._recentlyShownCache.add(r,a,[f,h]),y}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),c=Ys.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:l,editLast:u}=Cbe(r.lastEdits.swap(c)),f=l.compose(),p=new mR(new Gg(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(l.apply(o.text))),m=new Bl(o.text),g=fC.fromEdit(new ed(m,f)).removeCommonSuffixPrefixLines(),y=l.edits.at(-1)?.getNewRanges().at(0),E;y&&(E=new Bl(p.text).getTransformer().getRange(y));let x=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,b=this._workspace.getWorkspaceRoot(r.docId),_=s(M=>{let se=new fC(new Bl(p.text),M).toEdit();return Zot(se,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(M=>p.projectBack(M),"toOffsetOnDocumentAfterEditsNoShortening"),P=s(M=>p.project(M),"toProjectedOffset"),N=new i7(r.docId,b,r.languageId,g.base.getLines(),g.edit,E,m,l,i,_,k,P,r.lastEdit.base.getTextLength().lineCount,a,x);return{recentEdit:r.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return Jo.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let c=Cbe(a.getDocumentAndIdx(n)),l=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(l);let u=await Promise.all(a.documents.map(M=>this._shortenDocument(M,l))),f=u[c.idx],p=this._xtabHistoryTracker.getHistory(),m=new _ee(r.headerRequestId,u.map(M=>M.nextEditDoc),c.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,yR&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let M=this._hookupCancellation(g,o);try{y=await g.result}finally{M.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let M=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let J=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(se){throw g.setResultError(se),se}finally{J.dispose(),M()}}i.setStatelessNextEditTelemetry(y.telemetry);let E=y.nextEdit;if(E.isError())return E;let x=E.val.edit;if(x.edits.length===0)return Jo.error({kind:"noSuggestions"});let _=new fC(new Bl(f.projectedDocument.text),x).toEdit(),k=Zot(_,f.projectedDocument),P=_.edits.length===k.edits.length?E.val.permutation:void 0,N=k.decompose(P);return Jo.ok(N)}_hookupCancellation(r,n){let i=new mu,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),c=i.add(new tD);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){yR&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){yR&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}c.setIfNotSet(()=>{if(r.liveDependentants>0){yR&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}yR&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(ac(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){Fee(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new mR(new Gg(r.base.value),new Km([])),clippedRange:new $r(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new Ht(0,0)),o=$r.fromRange(i);function a(p,m){return new $r(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let c=new $r(1,n.textLength.lineCount+1),l=Cbe(c.intersect(a(o,100))),u=$r.subtract(c,l);return{document:new mR(new Gg(r.base.value),new Km(u.map(p=>qc.delete(n.getOffsetRange(new lr(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:l}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new n7("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await Vir(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new Gg(n.base.value),a=n.edit.edits.at(0)?.range??new Ht(0,0),c;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);c=o.offsetRangeToRange(new Ht(h.range.start,g.range.endExclusive))}let l=est(o.offsetRangeToRange(a)),u=Gee(200*50,{costFnOverride:s((h,g,y)=>{let E=est(y.offsetRangeToRange(h.range)),x=jir(l,E);return x>100?!1:x},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:c}])[0],f=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(f).lineNumber,m=new $r(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};_D=gd([na(4,YE),na(5,gC),na(6,ite)],_D);function Zot(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return Ys.fromOffsetEdit(r)}s(Zot,"projectBackEdit");function est(t){return new $r(t.start.line+1,t.end.line+1)}s(est,"lineRangeFromVSCodeRange");function jir(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(jir,"lineRangeDist");async function Vir(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(Vir,"getStructure");function Cbe(t){if(!t)throw new un("expected value to be defined, but it was not");return t}s(Cbe,"assertDefined");var Ebe=class{constructor(){this.headerRequestId=g7()}static{s(this,"NextEditFetchRequest")}},vbe=class{constructor(){this._cache=new Gz(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};d();d();d();d();var CR=0;function fte(t){return t===0}s(fte,"lengthIsZero");var fp=2**26;function SD(t,e){return t*fp+e}s(SD,"toLength");function XE(t){let e=t,r=Math.floor(e/fp),n=e-r*fp;return new Pl(r,n)}s(XE,"lengthToObj");function C7(t,e){let r=t+e;return e>=fp&&(r=r-t%fp),r}s(C7,"lengthAdd");function tst(t,e){return t.reduce((r,n)=>C7(r,e(n)),CR)}s(tst,"sumLengths");function xbe(t,e){return t===e}s(xbe,"lengthEquals");function E7(t,e){let r=t,n=e;if(n-r<=0)return CR;let o=Math.floor(r/fp),a=Math.floor(n/fp),c=n-a*fp;if(o===a){let l=r-o*fp;return SD(0,c-l)}else return SD(a-o,c)}s(E7,"lengthDiffNonNegative");function rst(t,e){let r=t,n=Math.floor(r/fp),i=r-n*fp,o=e,a=Math.floor(o/fp),c=o-a*fp;return new lr(n+1,i+1,a+1,c+1)}s(rst,"lengthsToRange");d();var RD=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${XE(this.startOffset)}...${XE(this.endOffset)}) -> ${XE(this.newLength)}`}};function ist(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new Hz(nst(t)),n=nst(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let f=[];for(;i&&!fte(u);){let[p,m]=i.splitAt(u);f.push(p),u=E7(p.lengthAfter,u),i=m??r.dequeue()}return fte(u)||f.push(new v7(!1,u,u)),f}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function c(u,f,p){if(a.length>0&&xbe(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new RD(m.startOffset,f,C7(m.newLength,p))}else a.push({startOffset:u,endOffset:f,newLength:p})}s(c,"pushEdit");let l=CR;for(let u of n){let f=o(u.lengthBefore);if(u.modified){let p=tst(f,h=>h.lengthBefore),m=C7(l,p);c(l,m,u.lengthAfter),l=m}else for(let p of f){let m=l;l=C7(l,p.lengthBefore),p.modified&&c(m,l,p.lengthAfter)}}return a}s(ist,"combineTextEditInfos");var v7=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=E7(e,this.lengthAfter);return xbe(r,CR)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,CR,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${XE(this.lengthBefore)} -> ${XE(this.lengthAfter)}`}};function nst(t){let e=[],r=CR;for(let n of t){let i=E7(r,n.startOffset);fte(i)||e.push(new v7(!1,i,i));let o=E7(n.startOffset,n.endOffset);e.push(new v7(!0,o,n.newLength)),r=n.endOffset}return e}s(nst,"toLengthMapping");var x7=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new pte(n.range,Pl.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=XE(n.newLength);return new pte(rst(n.startOffset,n.endOffset),new Pl(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new RD(SD(e.range.startLineNumber-1,e.range.startColumn-1),SD(e.range.endLineNumber-1,e.range.endColumn-1),SD(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=ist(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return lr.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},pte=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};d();var mte=class{constructor(e){this.documents=e;kl(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},hte=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new ed(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};d();var gte=class extends ds{constructor(){super();this.branch=Ag("branchName",void 0);this._register(Jge((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var yte=class extends ds{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new Ibe(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new gte;this._register(m2(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=oD(),this._documentState.forEach(o=>o.applyAllEdits()))})),Sm(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new bbe(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(gE(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);let l=this._isAwaitingGitCheckoutCooldown();for(let u of c.value.changes)this._lastDocuments.push(a),a.handleEdit(u,l);c.selection.changes.length>0&&(a.handleSelection(c.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(ac(()=>{let c=this._documentState.get(n.id);c&&this._lastDocuments.remove(c),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],c=!1;for(let l of this._lastDocuments.getItemsReversed()){let u=l.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&c)break;if(await this.workspace.getDocument(l.docId)&&(l.docId===r&&(c=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(l=>l.docId===r))return new mte(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=oD()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},bbe=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new Bl(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=sD.fromEdit(e,this._currentValue),i=x7.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(c){return Ate(c.edits,l=>l.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&$ir(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=oD(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:oD()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new dC(this._edits.map(o=>o.edit));return{history:new hte(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=Ys.empty,o=x7.empty,a,c=0,l=Ys.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(oD()-u.instant>10*60*1e3)break;let f=u.textLengthEdit.compose(o),p=f.getRange();Fee(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=Ate(u.textLengthEdit.edits,P=>P.range.endLineNumber-P.range.startLineNumber+P.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||Ate(u.edit.edits,P=>P.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||Ate(u.edit.edits,P=>P.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)l=u.edit;else{let P=Ys.trySwap(u.edit,l);if(P)l=P.e1;else{if(h>=2)break;l=u.edit.compose(l)}}let E=u.edit.inverseOnString(n.value);n=n.apply(E);let x=u.edit.compose(i),b=Xo.fromEdit(new ed(n,x)),k=new fC(n,b).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;c=k,i=x,o=f}for(let u=0;u<=a;u++){let f=this._edits[u];this._baseValue=this._baseValue.apply(f.edit)}return this._edits=this._edits.slice(a+1),{editCount:c}}toString(){return new dC(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function Ate(t,e){let r=0;for(let n of t)r+=e(n);return r}s(Ate,"sum");function $ir(t,e){let r=e.getNewRanges();return t.edits.every(n=>zir(n.range,r))}s($ir,"editExtends");function zir(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(zir,"doesTouch");var Ibe=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var ost=10,jg=class{constructor(e){this.lastResultsById=new Fr(ost);this.lastResultsByUri=new Fr(ost);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=qg.create(e),c=await i.getNextEdit(a,{triggerKind:1},n);if(c.result==null)return;let l=await this.ctx.get(br).getTextDocument({uri:e});if(!l)return;let u=l.positionAt(c.result.edit.range.start),f=l.positionAt(c.result.edit.range.endExclusive),p=cr(),m={resultId:p,nextEditResult:c,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:c.result?.edit.newText??"",range:{start:u,end:f},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await Jot(this.ctx),r;try{let o=await this.ctx.get(Bt).updateExPValuesAndAssignments(),a=Yir(this.ctx,o);r=e.createInstance(a?Xm:JE)}catch{r=e.createInstance(JE)}let n=this.ctx.get(yg),i=new yte(n);return await RS.catch(()=>{}),e.createInstance(_D,n,r,i,new nte(n))}};function Yir(t,e){let r=vi(t,Rt.NESXTab);return r!==void 0?r:t.get(Bt).enableNESXTab(e)}s(Yir,"shouldUseXTab");d();var sst=Ne(mi());var Cte=class extends yg{constructor(r){super();this._openDocuments=Ag(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(br);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=qg.create(r);return this.addDocument({id:o,initialValue:i,languageId:g2.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=qg.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=qg.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=qg.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new Tbe(r.id,new Bl(r.initialValue??""),[],r.languageId??g2.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),c=a.filter(l=>l.id!==o.id);c.length!==a.length&&this._openDocuments.set(c,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(br).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},Tbe=class extends oK{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new tn(e.lineNumber+1,e.column+1));this.updateSelection([new Ht(r,r)])}editFromLspContentChanges(e){return new dC(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(sst.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new tn(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new tn(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new un(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return Ys.replace(new Ht(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};d();var ast=require("crypto"),AC=Ne(require("fs/promises")),cst=require("os"),ZE=Ne(require("path"));var ev=class{constructor(e){this.ctx=e;this.logger=new wt("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=ZE.extname(__filename)===".ts"?ZE.resolve(__dirname,"../../../packages/ripgrep/bin"):ZE.resolve(__dirname,"./bin"),o=ZE.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await AC.readFile(o),c=(0,ast.createHash)("sha256").update(a).digest("hex"),l=ZE.join((0,cst.homedir)(),".cache/pkg",c);await AC.mkdir(l,{recursive:!0});let u=Oi(Yc(o)),f=ZE.join(l,u);try{await AC.stat(f)}catch{await AC.copyFile(o,f),this.logger.debug(this.ctx,`Copied ripgrep to ${f}`)}o=f,e!=="win32"&&await AC.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};d();var lst=require("child_process"),wbe=require("perf_hooks");var tv=new wt("ripgrepProcessManager"),Vg=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,tv.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){tv.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){tv.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,c)=>{if(this.taskQueue.length>=this.maxPendingTasks){tv.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),c(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){tv.error(this.ctx,`Invalid timeout value: ${o}`),c(new Error(`Invalid timeout value: ${o}`));return}tv.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:TZ(),command:e,args:r,options:i,resolve:a,reject:c,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let l=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);tv.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${l}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=wbe.performance.now();tv.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,lst.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,c=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),c(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),c(),this.runNextTask()}),n.stdout?.on("data",l=>{i+=l.toString()}),n.stderr?.on("data",l=>{o+=l.toString()}),n.on("close",l=>{let f=wbe.performance.now()-r;tv.debug(this.ctx,`Task ${e.id} completed in ${f} ms`),c(),l===0?e.resolve(i):l===1?e.resolve(""):e.reject(new Error(`Process exited with code ${l}: ${o}`)),this.runNextTask()}),n.on("error",l=>{c(),e.reject(new Error(`Failed to start process: ${l.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};d();var kD=class extends Py{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};d();var ust=100,dst=1e3*60*5;function fst(t){let e=new _be(t);t.get(uc).registerContextProvider(e),t.get(Ry).add(e.id)}s(fst,"registerRelatedFilesShim");var _be=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new n_(ust,dst);this.relatedFilesCache=new n_(ust,dst);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Bt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},c=await dK(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let l=c.traits.filter(f=>f.includeInPrompt).map(f=>f.promptTextOverride?{name:"OtherInformation",value:f.promptTextOverride}:f),u=new Set;for(let f of c.entries.values())for(let p of f.keys())u.add(p);this.traitCache.set(e,l),this.relatedFilesCache.set(e,Array.from(u))}catch(o){yI(this.ctx,o,"relatedFilesShim")}}};d();d();d();var pst=Ne(require("node:events"));var Ete="onWorkspaceWatcherChanged";var vte=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new pst.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(Ete,Hu(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(Ete,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(Ete,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(Ete,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var rd=class{constructor(e){this.ctx=e;this.watchers=new Fr(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Or.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r){this.getWatcher(e)?.onFileChange(r)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var PD=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,r){}onFileChange(e){}},Kir="workspaceLifecycleManager",nd=new wt(Kir),yC=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=ia(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?nd.debug(this.ctx,`listener ${e.constructor.name} is already started`):(nd.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):nd.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);nd.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(ip).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(br).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){nd.debug(r,"No workspaces to add.");return}nd.debug(r,`Adding workspaces: ${e.map(c=>c.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];nd.debug(r,`Combined workspaces: ${n.map(c=>c.uri).join(", ")}`);let i=n.filter((c,l,u)=>u.findIndex(f=>f.uri===c.uri)===l&&!u.some(f=>t.isSubfolder(c,f)));nd.debug(r,`Filtered workspaces: ${i.map(c=>c.uri).join(", ")}`);let o=i.filter(c=>!this.watchedWorkspaces.some(l=>l.uri===c.uri));nd.debug(r,`New workspaces: ${o.map(c=>c.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(c=>!i.some(l=>l.uri===c.uri));nd.debug(r,`Removed workspaces: ${a.map(c=>c.uri).join(", ")}`),this.watchedWorkspaces=i;for(let c of a){nd.debug(r,`Terminating watching for removed workspace: ${c.uri}`),r.get(rd).terminateWatching(c);for(let u of this.activeListeners)nd.debug(r,`Notifying listener of removed workspace: ${c.uri}`),await u.onWorkspaceRemoved(c)}for(let c of o){if(!c.uri)continue;nd.debug(r,`Starting to watch new workspace: ${c.uri}`);let l=r.get(rd);if(l.shouldStartWatching(c)){l.startWatching(c);let u=l.terminateSubfolderWatchers(c);if(u.length){nd.debug(r,`Terminated subfolder watchers for workspace: ${c.uri}, Subfolders: ${u.map(f=>f.uri).join(", ")}`);for(let f of this.activeListeners)await f.onWorkspaceSubfoldersTerminated(c,u)}for(let f of this.activeListeners)nd.debug(r,`Adding file change listener for workspace: ${c.uri}`),l.onFileChange(c,f.onFileChange.bind(f))}}for(let c of this.activeListeners)for(let l of o)nd.debug(r,`Notifying ${c.constructor.name} of added workspace: ${l.uri}`),await c.onWorkspaceAdded(l)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(rd).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function xte(t){t.set(yC,new yC(t))}s(xte,"setupWorkspaceLifecycleListener");d();d();var bte=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};d();d();d();d();var Jir=64;var RT={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},CC={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},Sbe=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,Jir)}},ST=class extends Sbe{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Bi=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},ER=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},vR=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var oo=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},hst=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),Ite=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(Ite||{}),gst=I.Object({result:I.Enum(Ite)});var Zm=class extends ST{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:RT,type:"shared"})}};d();var Xir=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),Zir=new Map;for(let[t,e]of Xir)Zir.set(e,t);d();function BD(t){return`[${Oi(t)}](${t})`}s(BD,"formatUriForFileWidget");function EC(t){let e=eor(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(EC,"resolvePathInput");function eor(t){if(t.startsWith("/")||yst()&&ror(t)||yst()&&t.startsWith("\\\\"))return Yc(t)}s(eor,"resolveFsUri");function yst(){return process.platform==="win32"}s(yst,"isWindows");function tor(t){return t>=65&&t<=90||t>=97&&t<=122}s(tor,"isWindowsDriveLetter");function ror(t){return tor(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(ror,"hasDriveLetter");function b7(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Bi?r.value:r instanceof vR?"":r instanceof ER?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(b7,"parseToolResultToString");function Tte(t){let{content:e}=t;return{message:b7(e)}}s(Tte,"formatToolErrorResult");function Cst(t){let{content:e}=t;return{data:e.map(r=>r instanceof Bi?{type:"text",value:r.value}:r instanceof vR?{type:"text",value:"<unsupported>"}:r instanceof ER?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(Cst,"formatToolSuccessResult");var wte=class extends Zm{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=i.code,a=await this.invokeClientEditFileTool(e,r,o,n);return await this.getFinalEditFileResult(e,r,a,i.editSurvivalTrackingSession,i.telemetry)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=EC(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new rD(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source},n,void 0,!0)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(id).getToolByNameAndProvider("insert_edit_into_file",CC);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(id).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}async getFinalEditFileResult(e,r,n,i,o){if(n.status!=="success")return n;if(i){let f=await lc(e.ctx,e,void 0);i.startReporter(p=>{this.handleEditSurvivalTelemetry(e,p,f,o)})}let a=b7(n.content),c=OP({uri:EC(r.input.filePath),languageId:"UNKNOWN"}),l=[];l.push(`<file_after_edit path="${r.input.filePath}">`),l.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let u=new sp({code:a,languageId:c,noFilePath:!0});return l.push(...u.renderAsArray()),l.push("</file_after_edit>"),new oo([new Bi(l.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,i){QWe(e.ctx,"agentPanel",{requestSource:i?.requestSource??"",mapper:i?.mapper??"",headerRequestId:i?.headerRequestId??""},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=EC(n.filePath);return{progressMessage:`Editing ${BD(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};d();var Est=new wt("findFilesTool"),_te=class t extends Zm{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new oo([new Bi("Cancelled")],"cancelled");i=await e.ctx.get(ev).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,c=e.turn.workspaceFolders;if(!c?.length)return new oo([new Bi("Failed to invoke tool file_search since no workspace folders found")],"error");let l=e.ctx.get(Vg),u={},f=c.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{Est.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await l.execute(i,["--files","-g",o],n,{cwd:La(g.uri)},t.timeOutInSeconds*1e3);Est.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(E=>E.trim()).filter(E=>E.length>0).map(E=>`${La($o(g.uri,E))}`)}catch(y){let E=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${E}`)}});try{await Promise.all(f)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new oo([new Bi(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new oo([new Bi(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};d();var vst=new wt("findTextInFilesTool"),Ste=class t extends Zm{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new oo([new Bi("Cancelled")],"cancelled");i=await e.ctx.get(ev).resolvePath()}catch(E){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(E)}`)}let{query:o,isRegexp:a=!1,includePattern:c}=r.input,l=20,u=e.turn.workspaceFolders;if(!u?.length)return new oo([new Bi("Failed to invoke tool grep_search since no workspace folders found")],"error");let f=e.ctx.get(Vg),p={},m=u.map(async E=>{if(n.isCancellationRequested)throw new Error("Canceled");try{vst.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${E.uri.toString()}`);let x=[a?"--regexp":"--fixed-strings",o,...c?["-g",c]:[],"--no-heading","--line-number","--color","never",La(E.uri)],b=await f.execute(i,x,n,{cwd:La(E.uri)},t.timeOutInSeconds*1e3);vst.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${E.uri.toString()} with results: ${b}`),p[E.uri.toString()]=b.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(x){let b=x instanceof Error?x.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${E.uri.toString()}: ${b}`)}});try{await Promise.all(m)}catch(E){let x=E instanceof Error?E.message:"An unknown error occurred";return new oo([new Bi(x)],"error")}let h=[],g=l;for(;g>0;){let E=!1;for(let x in p)p[x].length>0&&g>0&&(h.push(p[x].shift()),g--,E=!0);if(!E)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new oo([new Bi(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};d();var Rte=class extends Zm{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=EC(i),c=await e.ctx.get(ko).readDirectory(o.toString());return c.length===0?new oo([new Bi("Folder is empty")],"success"):new oo([new Bi(c.map(([l,u])=>`${l}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=EC(e.input.path);return{progressMessage:`Reading directory ${BD(n)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};d();var kte=class extends Zm{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,c=EC(i);if(!c)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(hn).getOrReadTextDocument({uri:c});if(u.status==="valid"){let f=new sp({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:c});return new oo([new Bi(f.renderAsString(`
`))],"success")}else return new oo([new Bi(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=EC(n.filePath);return{progressMessage:`Reading file ${BD(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function xst(){return[new Rte,new kte,new wte,new _te,new Ste]}s(xst,"getAllClsTools");var id=class{constructor(e){this.ctx=e;this._toolRegistry=new bte;for(let r of xst())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new mc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new oo([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new mc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let l of this._toolRegistry.listTools())e.has(l.toolProvider.id)||e.set(l.toolProvider.id,[]),e.get(l.toolProvider.id)?.push(l);let r=e.get(RT.id)?.find(l=>l.name==="insert_edit_into_file");r&&e.get(RT.id)?.splice(e.get(RT.id)?.indexOf(r)??0,1);let n=e.get(CC.id)?.find(l=>l.name==="insert_edit_into_file");n&&e.get(CC.id)?.splice(e.get(CC.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(CC.id)??[],a=e.get(RT.id)??[],c=Array.from(e.entries()).filter(([l])=>l!==RT.id&&l!==CC.id).flatMap(([,l])=>l);return o.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),a.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),c.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),i}};d();d();var xR=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};d();var Tst=require("crypto"),Rbe=require("fs"),kbe=Ne(require("path"));var bst="symbolDatabaseLookup",Ist="multiLanguageContextProviderDocumentSymbols",bR=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(bst,e);return r||(r=await this.createDBFile(e)),kbe.default.join(this.persistenceManager.directory,Ist,r)}async init(){let e=kbe.default.join(this.persistenceManager.directory,Ist);await this.createIfNotExists(e)}async dirExists(e){try{return await Rbe.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await Rbe.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,Tst.randomUUID)()}.db`;return await this.persistenceManager.update(bst,e,r),r}async deleteDBFile(e){}};d();d();var IR=class{static{s(this,"FileSearch")}};d();var I7=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};d();d();d();var Pte=Ne(require("path")),wst=require("worker_threads");function _st(t,e){return new wst.Worker(Pte.default.resolve(Pte.default.extname(__filename)!==".ts"?__dirname:Pte.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(_st,"createWorker");d();var Bte=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var Sst=Ne(mi());var Dte="main.js",Nte=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=_st(Dte,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new Bte(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new q$(this.id++),Sst.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new O$(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new Q$(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new U$(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new M$(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new F$(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new L$(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(Dte+"'")&&(r=new Error(`Failed to load ${Dte}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${Dte} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var T7=Ne(mi());var pp=new wt(AI),TR=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,c)=>{await this.indexFile(c,this.languageId(c)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,c)=>{if(a===1){pp.debug(this.ctx,`workspace removed: ${c}`),await this.indexClient.tryRemoveIndex(c,T7.CancellationToken.None);return}pp.debug(this.ctx,`workspace added: ${c}`),await this.indexAddedWorkspace(c)}),this.indexClient=new Nte(i,o);for(let a of i){let c=a.rootPath;this.workspaceInit.set(c,this.doWorkspaceIndex(c).then(()=>{pp.debug(this.ctx,`workspace ${c} indexed`),this.workspaceInit.delete(c)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await ior(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,T7.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{pp.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){pp.debug(this.ctx,`indexing workspace ${e}`);let r=ime.map(f=>`*${f}`);if(r.length===0)return;let i=`**/${ime.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(IR),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,T7.CancellationToken.None)]),c=a[0],l=a[1],u=Array.from(new Set([...c,...l]));pp.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async f=>{let p=this.languageId(f);p&&await this.indexFile(f.replace(/\/+$/,""),p)})),pp.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{pp.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,T7.CancellationToken.None)}catch(n){pp.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return F7e(e)}};async function ior(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(ior,"createIndexableWorkspaceFolder");d();d();var Rst=100,oor=5e3,Lte=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,c,l){let u=Date.now(),f=this.get(n,i,r,u);if(f)return this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),f.value;if(!a)return e(r,n,i,o,c,l);let p=new fn.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,c,p.token);return f=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>Rst)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>oor))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let c=e.substring(0,r),l=/[A-Za-z0-9]+$/.exec(c),u=r;l&&(u=l.index),r-u>Rst&&(u=r);let f={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{f.complete=!0}),refCount:0,cancel:a,uuid:cr(),complete:!1};return this.cachedValue=f}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var Mte=class{constructor(e){this.id=AI;this.selector=Array.from(y$.keys()).map(e=>({language:e}));try{this.documentManager=e.get(br),this.resolver=new Pbe(this.documentManager,e)}catch(r){throw pp.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},Pbe=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new Lte}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(xR).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,c=e.documentContext.proposedEdits??[],l=By(o,a);l=l.applyEdits(c);let u=eGe(e.activeExperiments),f=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,l.textDocument.getText(),l.textDocument.offsetAt(l.position),e.documentContext.languageId,l.editsWithPosition.length===0,u,r);return pp.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${f.map(p=>JSON.stringify(p)).join(", ")}`),f}catch(o){if(n$(o))return[];throw pp.error(this.ctx,"Failed to get context",o),o}}};var w7=class extends PD{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(yC).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(uc).providers.some(r=>r.id===AI)){let r=this.ctx.get(bR);this.fileWatcher=new Bbe([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new TR(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new Dbe(this.ctx),this.ctx.set(I7,this.fileWatcher),this.ctx.set(IR,this.fileSearch),this.ctx.set(TR,this.multiLanguageContextIndexWatcher),this.ctx.get(uc).registerContextProvider(new Mte(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Bt).updateExPValuesAndAssignments(),n=RY(this.ctx,r);return n.includes(AI)||n.length===1&&n[0]==="*"}async onWorkspaceAdded(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async onWorkspaceRemoved(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async onWorkspaceSubfoldersTerminated(r,n){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(r,n)}async onFileChange(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},Bbe=class extends I7{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},Dbe=class extends IR{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(rd).getWatchedFiles(n)).map(a=>this.ctx.get(br).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var Nbe=class extends xR{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new w7(e),e.set(w7,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function kst(t){let e=t.get(fu),r=new bR(e);t.set(bR,r),t.set(xR,new Nbe(t))}s(kst,"setupMultiLanguageContextProviderFeature");d();d();d();var vC=new Map;vC.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});vC.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});vC.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});vC.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});vC.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});vC.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var aor=new wt("sdk");function Fte(t,e){vC.has(t.get(rn).getEditorPluginInfo().name)||aor.warn(t,...e)}s(Fte,"deprecationWarning");var Sft=Ne(gP()),rA=Ne(lg());d();d();d();var an={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var xu=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(Pst(e))}};function at(t,e){let r=Ms.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=Pst(r.Errors(o));return[null,{code:an.InvalidParams,message:a}]}return e(n,i,o)}}s(at,"addMethodHandlerValidation");function Pst(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(Pst,"createErrorMessage");d();var Lbe=Ne(mi());d();var xC=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var Ote="github.copilot.finishDeviceFlow",Mbe=class extends xC{constructor(){super(...arguments);this.name=Ote;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(Dn).pendingSignIn;if(!i)throw new Lbe.ResponseError(an.InvalidRequest,"No pending sign in");try{await this.ctx.get(nu).open(i.verificationUri)}catch(o){I0.warn(this.ctx,"Failed to open",i.verificationUri),I0.exception(this.ctx,o,Ote)}try{return await i.status}catch(o){throw new Lbe.ResponseError(an.DeviceFlowFailed,String(o))}finally{this.ctx.get(Dn).pendingSignIn=void 0}}},Bst=[Mbe];d();d();var _s=class extends Fr{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var _7="github.copilot.didAcceptCompletionItem",Fbe=class extends xC{constructor(){super(...arguments);this.name=_7;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get(_s).get(n);return o?(IK(this.ctx,o),!0):!1}},Dst=[Fbe];d();var cor="github.copilot.didAcceptNextEditSuggestionItem",Obe=class extends xC{constructor(){super(...arguments);this.name=cor;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(jg).handleAcceptance(n),!0}},Nst=[Obe];d();var Ube="github.copilot.didAcceptPanelCompletionItem",Qbe=class extends xC{constructor(){super(...arguments);this.name=Ube;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get(_s).get(i);return a?(v2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},Lst=[Qbe];var lor=[...Bst,...Dst,...Nst,...Lst];function Mst(t,e){let r=new Map;for(let n of lor){let i=new n(t),o=Ms.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=nv(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new xu(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(Mst,"registerCommands");d();var Fst=Ne(require("node:events"));var $g=class extends BS{constructor(r){super(new NP,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...r},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(n=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${uor(n.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(Rt[n],this.env[o]),this.setConfig(Rt[n],this.env[o]))}})}setConfig(r,n){super.setConfig(r,n??this.envSettings.get(r)),this.emitters.get(r)?.emit("change",n)}onConfigChange(r,n){this.emitters.has(r)||this.emitters.set(r,new Fst.default),this.emitters.get(r)?.on("change",n)}};function uor(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(uor,"camelCaseToSnakeCaseAllCaps");var dor="unknown-editor",Ost="unknown-editor-plugin",Qte=class extends rn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:dor,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:Ost,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function Qst(t){return t.getEditorPluginInfo().name!==Ost}s(Qst,"hasValidInfo");d();var qst=require("node:events");var Ust="initialize",iv=class{constructor(){this.emitter=new qst.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(Ust,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(Ust)}};d();var ov=Ne(lg());var por=new Map([[4,ov.MessageType.Log],[3,ov.MessageType.Info],[2,ov.MessageType.Warning],[1,ov.MessageType.Error]]),Ute=class extends Tc{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!OK(e)&&n!=="console")return;let o={type:por.get(r),message:yVe(n,...i)},a=e.get(vr).connection;try{a.sendNotification(new ov.NotificationType("window/logMessage"),o)}catch(c){if(c instanceof ov.ConnectionError)return;throw c}}};d();var Hst=Ne(Lc());var qte=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(vr).connection.sendNotification(new Hst.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};async function Wst(t){let e=t.get(vl),r=e.deactivate();e.setReporter(new qte(t)),e.setRestrictedReporter(new qte(t,!0)),await r}s(Wst,"setupRedirectingTelemetryReporters");d();d();var Hte=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Dt(e,"installed.reinstall"):Dt(e,"installed.new")}handleUpgrade(e){Dt(e,"installed.upgrade")}handleUninstall(e){Dt(e,"uninstalled")}};var S7=Ne(gP());var ND=class extends Hte{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(rn).getEditorPluginInfo();return await e.get(fu).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(fu).listSettings()).length>0}async markInstalled(e){let r=e.get(rn).getEditorPluginInfo();await e.get(fu).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(rn).getEditorPluginInfo(),n=await e.get(fu).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,S7.gt)((0,S7.coerce)(r.version),(0,S7.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(rn).getEditorPluginInfo();await e.get(fu).delete("versions",r.name),(await e.get(fu).listKeys("versions")).length===0&&await e.get(fu).deleteSetting("versions")}};d();var Gst=require("events"),Hbe=Ne(require("path")),Wte=Ne(Lc());var qbe="didChangeWatchedFiles",mor={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},zg=class t{constructor(e){this.ctx=e;this.emitter=new Gst.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new Wte.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(vr).connection}init(){this.ctx.get(us).getCapabilities().watchedFiles&&this.connection.onNotification(Wte.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(us).getCapabilities().watchedFiles)return mor;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],c=[];for(let l of i){typeof l=="object"&&(l=l.uri);let u=Hbe.extname(l).toLowerCase();if(!NS.includes(u)){c.push({uri:l});continue}let f=await this.getValidDocument(l);if(f===void 0){a.push({uri:l});continue}o.push(f)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:c}}onDidChangeWatchedFiles(e){this.emitter.on(qbe,e)}offDidChangeWatchedFiles(e){this.emitter.off(qbe,e)}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,c={uri:a,isRestricted:!1,isUnknownFileExtension:!1},l=Hbe.extname(o.uri).toLowerCase();if(!NS.includes(l))c.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?c.isRestricted=!0:c.document=u}switch(o.type){case 1:n.push(c);break;case 2:r.push(c);break;case 3:i.push(c);break}}this.emitter.emit(qbe,{workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(hn).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};d();d();var hor=I.Object({uri:I.String({minLength:1})});async function gor(t,e,r){let n=await t.get(hn).getOrReadTextDocument(r);return[{status:Gs(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(gor,"handleCheckFileStatusChecked");var jst=at(hor,gor);d();var Aor=I.Object({});function Vst(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(Vst,"calculatePercentRemaining");async function yor(t,e,r){let n=await t.get(Dn).getSession();if(n){let i=await due(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:Vst(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:Vst(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:an.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:an.InternalError,message:"Not signed in"}]}s(yor,"handleCheckQuotaChecked");var $st=at(Aor,yor);d();var Cor=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function Eor(t,e,r){return[await t.get(Dn).checkAndUpdateStatus(r.options),null]}s(Eor,"handleCheckStatusChecked");var zst=at(Cor,Eor);d();d();d();d();d();d();function Yst(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(Yst,"filterUnsupportedReferences");function Kst(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(Kst,"convertToCopilotReferences");var Jst=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var kT=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,Yst(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};d();var Hc=class{static{s(this,"ConversationInspector")}};d();var Wbe={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var Js=class{constructor(e){this.ctx=e;this.progressEntries=new Fr(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Or.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};d();d();var bC=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(r,o),o}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let i=await this.ctx.get(Dn).getSession({authAuthority:n});if(!i&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let o={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};i&&(o.Authorization=`Bearer ${i.accessToken}`);let a=new URL(`repos/${e}/${r}`,i?.apiUrl||`https://api.${n}`).href;return this.ctx.get(ai).fetch(a,{method:"GET",headers:o})}};d();d();d();var Zst=Ne(mp());var IC=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,c=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-c)}}let i=new Nt([(0,Zst.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},c={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},l={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[c,.4],[l,.2]],f=new Nt(u.filter(([p,m])=>!LD(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:Q0(h),m]}));return this.wrapInTicks(f)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||LD(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Nt([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function LD(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(LD,"isEmptyRange");var eat=Ne(require("path"));var tat=I.Object({uri:I.String(),visibleRange:I.Optional(nc),selection:I.Optional(nc)}),Gbe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(hn),n=await r.getOrReadTextDocument(e),i=Gs(n);if(await this.turnContext.collectFile(od,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new IC(n.document,e.selection,e.visibleRange),c=r.getRelativePath(n.document);if(i==="empty")return new Nt([`The currently open file \`${c}\` is empty.`]);let l=[[`Code excerpt from the currently open file \`${c}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[f,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(LD(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[f,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Nt([...l,...u])}else if(n.status==="invalid")return new Nt([`The currently open file \`${eat.basename(e.uri)}\` is content excluded.`])}},od="current-editor",Gte=class{constructor(e){this._resolver=e;this.id=od;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new Gbe(e)}};d();d();var al=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},jbe=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},Vbe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},ql=class{constructor(e,r,n,i,o,a="explicit",c=[],l=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=c;this._isAvailable=l}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new jbe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new Vbe(this._processor(e),this.id)}};var rat=I.Object({name:I.String(),url:I.String()}),nat=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(rat)})),remotes:I.Optional(I.Array(rat))}),$be=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(TC,"git repository information");let r=[];return r.push([new Nt(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Nt([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Nt([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Nt(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Nt([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Nt(r)}},TC="git-metadata",jte=class extends ql{static{s(this,"GitMetadataSkill")}constructor(e){super(TC,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new $be(r))}};async function iat(t){let e=await t.skillResolver.resolve(od);if(e){let a=e.uri,c=Kb(t.ctx,a);if(A7e(c))return{repoInfo:c,skillUsed:od}}let r=await t.skillResolver.resolve(TC);if(!r||!r.remotes||r.remotes.length===0){Or.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=Dpe(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:TC}}s(iat,"extractRepoInfo");async function oat(t){let e=[];return await vor(t,e),await xor(t,e),await bor(t,e),e}s(oat,"skillsToReference");async function vor(t,e){let r=await Ior(t);r&&e.push(r)}s(vor,"addRepositoryReference");async function xor(t,e){let r=await Tor(t);r&&e.push(r)}s(xor,"addSelectionReference");async function bor(t,e){let r=[],n=await _or(t);n&&r.push(n),r.push(...await Sor(t)),r.length>0&&e.push(...r)}s(bor,"addFileReferences");async function Ior(t){let e=await iat(t);if(e){let r=t.ctx.get(bC),n=e.repoInfo.owner,i=e.repoInfo.repo,o=await r.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:o.id}}}}s(Ior,"gitMetadataToReference");async function Tor(t){let e=await t.skillResolver.resolve(od);if(e&&e.selection){let n=await t.ctx.get(hn).getOrReadTextDocument(e),i=Gs(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return wor(e,n.document)}}s(Tor,"currentEditorToSelectionReference");function wor(t,e){if(t.selection&&!LD(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(wor,"extractSelection");async function _or(t){let e=await t.skillResolver.resolve(od);if(e){let n=await t.ctx.get(hn).getOrReadTextDocument(e),i=Gs(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(_or,"currentEditorToFileReference");async function Sor(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(hn);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=Gs(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let c=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:c,language:o.document.detectedLanguageId}})}}}return e}s(Sor,"fileReferenceToPlatformFileReference");d();d();d();d();var pat=Ne(zte()),Jbe=Ne(require("path"));var mat=500,Oor=Math.floor(.25*mat),Yte=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=Jbe.default.extname(__filename)===".ts"?Jbe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await pat.job(async({text:o,uri:a,tokenizerName:c,directory:l,chunkSize:u,overlap:f})=>{let m=await require(l).getTokenizerAsync(c),h=m.tokenize(o),g=h.length,y=[],E=0;for(;E<g;){let x=E+u>=g,b=x?g:E+u,_=h.slice(E,b),k=m.detokenize(_),P=o.indexOf(k);y.push({id:`${a.toString()}#${E}`,chunk:k,tokenCount:_.length,range:{start:P,end:P+k.length}}),E=x?b:b-f}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:mat,overlap:Oor}}),n}};var Qor="fixedSize",Uor=new Map([["fixedSize",Yte]]);function hat(t){let e=t==="default"?Qor:t,r=Uor.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(hat,"getChunkingAlgorithm");d();d();var Kte=Ne(Gx()),wC=Ne(require("fs")),gat=require("os"),eh=Ne(require("path")),MD=require("process");var Xbe=5e4,qor=new wt("workspaceChunks"),Jte=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Oi(r.uri),i=(0,Kte.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=eh.join(Hor(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,Kte.SHA256)(e).toString().substring(0,this.pathHashLength),n=eh.basename(e);return eh.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await wC.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await wC.promises.mkdir(eh.dirname(n),{recursive:!0}),await wC.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){qor.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await wC.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await wC.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=eh.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(eh.join(this.cacheRootPath,n))}}async getFileHash(e){let r=Os(e),n="";return r&&(n=await wC.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,Kte.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=Os(e);if(!i)return;async function o(p){try{return(await wC.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),c=await this.getChunksCache(e);if(c!==void 0&&c.version===t.CACHE_VERSION&&a!==void 0&&c.lastModified===a){this.chunksCountCache.set(i,c.documentChunks.length);return}let l=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let f={version:t.CACHE_VERSION,filePath:e,hash:l,lastModified:a,documentChunks:u};await this.setChunksCache(e,f)}async deleteChunksForSource(e){let r=Yc(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=Os(e);if(!r)return[];let n;try{n=await wC.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=Yc(eh.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await wC.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function Hor(){return MD.env.XDG_CACHE_HOME&&eh.isAbsolute(MD.env.XDG_CACHE_HOME)?MD.env.XDG_CACHE_HOME+"/github-copilot":(0,gat.platform)()==="win32"?MD.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":MD.env.HOME+"/.cache/github-copilot"}s(Hor,"getXdgCachePath");var Zbe=1e4;var Xte=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new tIe;this.status="notStarted",this.workspaceChunks=new Jte(e,r),this.cancellationToken=new eIe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(rd).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>Zbe&&(this._fileCountExceeded=!0,n=n.slice(0,Zbe));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){rc(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>Xbe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){rc(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>Xbe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>Zbe&&(this._fileCountExceeded=!0),_We(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Fo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},eIe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},tIe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var Va=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=hat(r),i=new n;return new Xte(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=dn.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Dt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),c=dn.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Dt(e,"index.chunk",c),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};d();d();d();d();d();function ere(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(ere,"toChatModeEnum");var PT=class{constructor(e,r){this.request=e;this.telemetryId=cr();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}},Zte=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=cr();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};d();d();d();var Aat={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},yat="Alright, This response contains a code citation.";d();var Cat=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;d();d();var Eat=Ne(require("fs")),$d=Ne(require("path"));var rIe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],nIe="test_",P7={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},B7=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Oi(e),n=$d.extname(r).replace(".",""),i=P7[n]??{location:"sameFolder",prefix:nIe,suffix:rIe},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let f=r.replace(`.${n}`,u+"."+n);o.push(f)}let a=i.location??"sameFolder",c;if(a==="sameFolder"){if(c=Os(b0(e)),c===void 0)return}else{let u=Os(e);if(u===void 0)return;c=this.determineTestFolder(u,a)}for(let u of o){let f=$d.join(c,u),p=this.parseTestFilePath(f);if(p&&await this.fileExists(p))return p}let l=Yc(c);if(await this.fileExists(l))return $o(l,o[0])}parseTestFilePath(e){try{return Yc(e)}catch(r){pn.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Oi(e),n=$d.extname(r).replace(".",""),i=P7[n]??{location:"sameFolder",prefix:nIe,suffix:rIe},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let l of i.suffix??[]){let f=r.substring(0,r.length-l.length-1-n.length)+"."+n;o.push(f)}let a=i.location??"sameFolder",c;a==="sameFolder"?c=b0(e):c=this.determineImplFolder(e);for(let l of o){let u=$o(c,l);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=Os(e);if(r===void 0)return;let n=$d.extname(Oi(e)).replace(".",""),i,o=P7[n]?.location??"sameFolder";o==="sameFolder"?i=$d.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,P7[n]);if(a.length>0)return Yc(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let c=`${e}${$d.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(c),n?.suffix&&n?.suffix.some(l=>a.endsWith(l+r))&&o.push(c)}return o}_readdir(e){return Eat.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&Os(this.baseUri))??"",i=$d.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join($d.sep)}getRelativeTestFolder(e,r,n,i){let o=$d.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=$d.extname(Oi(e)).replace(".",""),n=b0(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function D7(t){let e=Oi(t),r=$d.extname(e),n=P7[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(rIe.some(o=>e.endsWith(o+r))||e.startsWith(nIe))}s(D7,"isTestFile");d();var vat=["indexed","indexing","not_indexed"],BT=class{constructor(){this._cache=new Fr(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await Yp(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,r,n,i=!1){let o=tE(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let c=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:c,timestamp:Date.now()}),c}get cache(){return this._cache}};d();d();d();async function xat(t,e,r,n){let i=zo(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],c=await t.get(jr).getToken(),l=bV(t,c,"embeddings"),u=c.token,f=0;for(;f<o.length&&!n.isCancellationRequested;){let p=o.slice(f,f+e.maxBatchSize),m=await Wor(t,l,u,e.modelId,p,n);a.push(...m||[]),f+=e.maxBatchSize}return a.length?a:void 0}s(xat,"fetchEmbeddings");async function Wor(t,e,r,n,i,o){let a=cr(),c=i.map(u=>u.text),l=await r_(t,e,r,void 0,a,{input:c,model:n,dimensions:1024},o,jb(t));if(l.status!==200||o.isCancellationRequested){rc(t,new sv(`Failed to request dense embeddings, status: ${l.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await l.json()).data.map(f=>({id:i[f.index].id,embedding:f.embedding}))}catch{return}}s(Wor,"sendEmbeddingsRequest");d();d();var tre=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,c)=>a+c*c,0)),i=Math.sqrt(r.reduce((a,c)=>a+c*c,0));return e.reduce((a,c,l)=>a+c*r[l],0)/(n*i)}terminateScoring(){}};var Gor="cosine",jor=new Map([["cosine",tre]]);function bat(t){let e=t==="default"?Gor:t,r=jor.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(bat,"getScoringAlgorithm");d();var hp=class{constructor(){this.workspaceScoringProviders=new Fr(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=bat(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var Iat={modelFamily:wV.textEmbedding3Small,scoringType:"default",dimensions:null};async function Tat(t,e,r,n,i,o,a,c=Iat){let l={...Iat,...c},u=$or(t,e,r,n);Or.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let f=await t.get(Pa).getFirstMatchingEmbeddingModelConfiguration(l.modelFamily);if(f===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${l.modelFamily}`);let p=performance.now(),m=await xat(t,f,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(P=>P.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let E=performance.now(),x=zor(t,e,m,y,l.scoringType),b=performance.now();a.rerankingTimeMs=Math.floor(b-E);let _=x.slice(0,i);return Or.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(P=>u.find(N=>N.id===P.id).id)}s(Tat,"rerankSnippets");function $or(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s($or,"formatEmbeddingsInput");function zor(t,e,r,n,i){let o=t.get(hp);return r.map(c=>({id:c.id,score:o.score(t,e,n.embedding,c.embedding,i)})).sort((c,l)=>l.score-c.score)}s(zor,"scoreEmbeddings");d();d();d();var oIe=Ne(zte());var Yor=.75,Kor=1.2,Jor=47,rre=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await nre();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(c=>c.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,Jor),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(Va).getChunks(this.workspaceFolder),n=uE(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=uE(n,o=>o.chunk);return await Xor(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(Va).getChunks(this.workspaceFolder),a=new iIe(i);for await(let c of o){let l=await Zor({...c,chunk:c.chunk.toLowerCase()},e,r,n);a.add({...l,chunk:c.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function Xor(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let l of e){o++;let u=oIe.job(({snippet:f,keywords:p})=>p.map(h=>f.includes(h)?1:0),{data:{snippet:l,keywords:t}}).then(f=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,f[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),c={};for(let l=0;l<t.length;l++)c[t[l]]=Math.log((o-a[l]+.5)/(a[l]+.5)+1);return c}s(Xor,"calculateIDFValues");async function Zor(t,e,r,n){return{score:await oIe.job(({keywords:o,document:a,docLength:c,avgTokenCount:l,idfValues:u,k1:f,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,E=g*(y*(f+1)),x=y+f*(1-p+p*c/l);m+=E/x}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:Kor,b:Yor}}),...t}}s(Zor,"calculateBM25Score");var iIe=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var tsr="bm25",rsr=new Map([["bm25",rre]]);function wat(t){let e=t==="default"?tsr:t,r=rsr.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(wat,"getRankingAlgorithm");var bu=class{constructor(){this.workspaceRankingProviders=new Fr(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=wat(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};d();async function _at(t,e){let r=t.ctx,n=await Fo.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(Iu).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},c=new ka(r),l=await lc(r,t),u=await c.fetchResponse(a,e,l.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let f=u.toolCalls[0],p=o.toolConfig?.extractArguments(f).keywords;return!p||!Array.isArray(p)?void 0:(Or.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let f="reason"in u?u.reason:"";rc(r,new sv(`Failed to request user query synonyms, result type: ${u.type}, reason: ${f}`),"LocalSnippetProvider.parseUserQuery")}}s(_at,"parseUserQuery");var Sat=Ne(mp());var sv=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},ire=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(Va),o=i.status(e.turn.workspaceFolder),a=n.get(bu),c=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&c==="completed")return Promise.resolve("indexed");if(o==="started"||c==="started")return Promise.resolve("indexing");if(r){let l=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,l).then(u=>{if(i.status(l)==="completed")return a.initialize(n,l,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(c==="notStarted"){let u=i.getChunks(l);return Promise.race([a.initialize(n,l,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(f=>setTimeout(()=>f("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(Va).chunkCount(n);if(a===0)return[];r.chunkCount=a;let c,l=performance.now();try{c=await _at(e,e.cancelationToken)}catch(g){let y=new sv(g);rc(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-l),c===void 0)return[];let f=i.get(bu),p=[],m=performance.now();try{let g=await f.query(i,n,c);r.localSnippetCount=g.length,p=g}catch(g){let y=new sv(g);rc(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=Jr(e.turn.request.message),c=[];try{c=await Tat(o,i,a,r,5,e.cancelationToken,n)}catch(f){let p=new sv(f);rc(o,p,"LocalSnippetProvider.rerankSnippets")}let l=[],u=o.get(hn);for(let f of c){let p=f.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===f);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),E=ns.range(g,y);l.push({uri:m.document.uri,range:E,snippet:h.chunk})}}return l}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...BWe},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return Or.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(Va).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return Sat.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var kat=Ne(Rat()),are=Ne(zte()),Pat=Ne(require("os")),Bat=Ne(mp());var osr=Math.min(Math.max(Math.ceil(Pat.cpus().length/2),1),10),N7=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new kat.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await are.start({maxWorkers:osr})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await are.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},nre=N7.startWorkerPool.bind(N7);var r5i=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),cIe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(FD);return}let r=[],n=this.turnContext.ctx.get(hn),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:c,range:l}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let f=new IC(u.document,l,l),p=new Nt([c]),h=D7(a)?.5:.8;r.push([`Code excerpt from file \`${Os(a)}\`:`,1],[f.wrapInTicks(p,h),1]),await this.turnContext.collectFile(OD,a,Gs(u),l)}}if(r.length>0)return r.unshift([new Nt(["The user wants you to consider the following snippets when computing your answer."]),1]),new Nt(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},FD="collect-project-context",ore=class extends PD{constructor(r,n=[new ire]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(yC).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(r){if(!await this.isEnabled()||(this.workerPoolToken=await nre(),!r.uri))return;let n=this.ctx.get(Va),i=this.ctx.get(rd),o=this.ctx.get(bu),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(r){if(!await this.isEnabled())return;let n=this.ctx.get(Va);if(!r)return;let i=n.getParentFolder(r);if(i){let c=await n.deleteSubfolderChunks(i,r);await this.ctx.get(bu).deleteEmbeddings(this.ctx,i,c);return}n.terminateChunking(this.ctx,r),await this.ctx.get(bu).terminateRanking(this.ctx,r),this.ctx.get(hp).terminateScoring(this.ctx,r),n.workspaceCount===0&&await N7.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(r,n){let i=this.ctx.get(Va),o=this.ctx.get(bu),a=this.ctx.get(hp);for(let c of n)i.terminateChunking(this.ctx,c),await o.terminateRanking(this.ctx,c),a.terminateScoring(this.ctx,r)}async onFileChange(r){if(!await this.isEnabled())return;let n=await nre();try{let i=r.documents.map(l=>l.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(Va),c=this.ctx.get(bu);if(r.type==="delete"||r.type==="update"){let l=await a.deleteFileChunks(o,i);await c.deleteEmbeddings(this.ctx,o,l)}if(r.type==="create"||r.type==="update"){let l=await a.chunk(this.ctx,o,r.documents);await c.addChunks(this.ctx,o,l)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(r){await r.steps.start(FD,"Collecting relevant project context"),await r.info(Bat.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async c=>c.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let c of vat){let l=i.findIndex(u=>u===c);if(l!==-1){o=c,a=this.snippetProviders[l];break}}switch(o){case"indexed":{let{snippets:c,measurements:l}=await a.provideSnippets(r);if(await DWe(r,a.providerType,l),c.length===0){await r.steps.error(FD,"No project context found");return}return await r.steps.finish(FD),c}case"indexing":{await r.steps.error(FD,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(FD,"No project context available");return}}}},OD="project-context",sre=class extends ql{static{s(this,"ProjectContextSkill")}constructor(e){super(OD,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new cIe(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};d();var Dat=I.Object({labels:I.Array(I.String())}),lIe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Nt(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Nt([`- ${n}`]),.9]),this.turnContext.collectLabel(Yg,n)}),new Nt(r)}},Yg="project-labels",cre=class{constructor(e){this._resolver=e;this.id=Yg;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new lIe(e)}};d();var lre=Ne(mp());var Lat={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},Mat=lre.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,Fat=lre.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,ssr=lre.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,uIe=`

`,Nat=Mat+uIe+Fat;function Oat(t){let e=1;if(t.length===0)return{reply:Nat,vulnerabilities:e};if(t==="0")return{reply:Nat,vulnerabilities:0};if(t==="help")return{reply:ssr,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=Mat+uIe:i==="c"&&(n+=Fat+uIe);return{reply:n.trimEnd(),vulnerabilities:e}}s(Oat,"parseVulnerabilitiesInstructions");var Qat=Ne(mp());var asr="Oops, your response got filtered. Vote down if you think this shouldn't have happened",csr="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",dIe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},lsr=new dIe,fIe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Hl(csr,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},usr=new fIe,pIe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new Hl("Alright, I'm producing a notification",void 0,[],o)}},dsr=new pIe,mIe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Hl(asr,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},fsr=new mIe,hIe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Hl(await qat(e))}},psr=new hIe,gIe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[Yg,od]}instructions(e,r){return"Create a function that prints a christmas tree"}},msr=new gIe,AIe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Hl(Jr(e.turn.request.message))}},hsr=new AIe,yIe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(Wl).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=Qat.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Hl(i)}return new Hl("No prompt available")}},gsr=new yIe,CIe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Hl(await Hat(e,n,i))}},Asr=new CIe,EIe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=Oat(r);for(let o=0;o<i;o++)e.turn.annotations.push(Lat);return new Hl(n,void 0,e.turn.annotations)}},ysr=new EIe,vIe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(Aat),new Hl(yat,void 0,e.turn.annotations)}},Csr=new vIe,xIe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Hl(Cat)}},Esr=new xIe,bIe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},vsr=new bIe,IIe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[OD]}},xsr=new IIe,TIe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Hl("Alright, I'm producing a notification",void 0,[],[],[],e)}},bsr=new TIe;function Uat(){return[lsr,usr,dsr,fsr,msr,psr,hsr,gsr,Asr,ysr,Csr,bsr,Esr,vsr,xsr]}s(Uat,"getDebugTemplates");d();d();function NT(t,e){if(t.length==0)return new Nt([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new Nt(r)}s(NT,"weighElidableList");var Wat=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:nc}))}),wIe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(hn),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(LT,e.uri,Gs(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(LT,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(LT,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new Nt([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),NT(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new Nt([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let c=r.document.detectedLanguageId;i.push(new Nt([["```"+c,1],[Q0(a),.8],["```",1]]))}return new Nt(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await Fo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Nt([n])}},LT="problems-in-active-document",ure=class extends ql{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(LT,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new wIe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};d();d();var dre=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(br).getWorkspaceFolder(e),n=this.fileExistFn(),i=new B7(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=D7(e.uri);if(o&&!a){let c=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(c,o);{let l=i.findExampleTestFile(e.uri);if(l)return await this.asExampleFilePrompt(c,l)}}}async fromTestFile(e){if(!D7(e))return;let n=this.turnContext.ctx.get(br).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new B7(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let c=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(c,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Nt([[`${Isr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Nt([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Nt([[`${Tsr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Nt([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Nt([[`${wsr} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Nt([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(hn),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(Kg,e,Gs(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[Q0(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(ko).stat(e),!0}catch{return!1}}}},Isr="Code excerpt from the implementation source file",Tsr="Code excerpt from the test file",wsr="Code excerpt from an example test file";var Gat=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),SIe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(hn),n=new dre(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(Kg,e.testFileUri,Gs(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(Kg,e.sourceFileUri,Gs(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(Kg,e.sourceFileUri,Gs(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(Kg,e.testFileUri,Gs(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},Kg="test-context",fre=class extends ql{static{s(this,"TestContextSkill")}constructor(e){super(Kg,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new SIe(r))}};d();var jat=Ne(mp());var Vat=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:nc}))}),RIe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(SR,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Nt(["The latest test run produced the following failures and errors:"]);return new Nt([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(hn),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let c=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(SR,o,Gs(c)),c.status==="valid"){let l=r.getRelativePath(c.document),u=this.createElidableFailuresOfDoc(a,l),f=this.appendCode(u,l,c.document);n.push([f,1])}}if(n.length>0)return new Nt(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,c=` in file \`${r}\` `,l=". ";i.failureReason&&(l=" with the following error:",i.failureReason.includes(`
`)?l+="\n```\n"+i.failureReason+"\n```\n":l+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Nt([jat.default`\n\n- Test ${o}${a}${c}failed${l}The failed test is ${u}.\n`]),1]});return new Nt(n)}appendCode(e,r,n){let i=[new Nt([`
The code of file \`${r}\` is:
`]),.6],o=[new Nt([["```"+n.detectedLanguageId,1],[Q0(n.getText()),.9],["```",1]]),.7];return new Nt([[e,1],i,o])}},SR="test-failures",pre=class extends ql{static{s(this,"TestFailuresSkill")}constructor(e){super(SR,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new RIe(r))}};var th=Ne(mp());var Hl=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},RR=class{constructor(e,r,n,i,o=[],a=[],c,l=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=c;this.producesCodeEdits=l}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},_sr=new RR("tests","Generate unit tests","Generate Tests",th.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[Kg,SR],["chat-panel","editor"]),Ssr=new RR("simplify","Simplify the code","Simplify This",th.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],th.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),Rsr=new RR("fix","Fix problems and compile errors","Fix This",th.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[LT],["editor","chat-panel","inline"],th.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),ksr=new RR("explain","Explain how the code works","Explain This",th.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],th.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),Psr=new RR("doc","Document the current selection of code","Generate Docs",th.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],th.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),kIe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=DIe(e.conversation),n=th.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return r?new Hl(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new Hl(n)}},Bsr=new kIe,PIe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=BIe(e.ctx).filter(i=>i!=this),n=th.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Hl(n)}},Dsr=new PIe;function L7(){return[_sr,Ssr,Rsr,ksr,Psr,Bsr,Dsr,...Uat()]}s(L7,"getPromptTemplates");function BIe(t){let e=L7();return!u6(t)&&!kh(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s(BIe,"getUserFacingPromptTemplates");var NIe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},Wi=class{constructor(e){this.ctx=e;this.conversations=new Fr(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new Zte([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(al).getDescriptors().map(c=>c.id)),this.conversations.set(o.id,new NIe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,c,l){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),c&&c.length>0&&(r.ignoredSkills=c.map(f=>({skillId:f}))),l&&(r.agent={agentSlug:l.agentSlug},r.confirmationResponse=l),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&Jr(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Jr(r.request.message),"@");(await SC(this.ctx)).find(c=>c.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(Jr(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Jr(r.request.message),"/"),o=L7().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(al).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};d();function cct(t){return typeof t>"u"||t===null}s(cct,"isNothing");function Nsr(t){return typeof t=="object"&&t!==null}s(Nsr,"isObject");function Lsr(t){return Array.isArray(t)?t:cct(t)?[]:[t]}s(Lsr,"toArray");function Msr(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(Msr,"extend");function Fsr(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(Fsr,"repeat");function Osr(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(Osr,"isNegativeZero");var Qsr=cct,Usr=Nsr,qsr=Lsr,Hsr=Fsr,Wsr=Osr,Gsr=Msr,cl={isNothing:Qsr,isObject:Usr,toArray:qsr,repeat:Hsr,isNegativeZero:Wsr,extend:Gsr};function lct(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(lct,"formatError");function F7(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=lct(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(F7,"YAMLException$1");F7.prototype=Object.create(Error.prototype);F7.prototype.constructor=F7;F7.prototype.toString=s(function(e){return this.name+": "+lct(this,e)},"toString");var Xf=F7;function LIe(t,e,r,n,i){var o="",a="",c=Math.floor(i/2)-1;return n-e>c&&(o=" ... ",e=n-c+o.length),r-n>c&&(a=" ...",r=n+c-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(LIe,"getLine");function MIe(t,e){return cl.repeat(" ",e-t.length)+t}s(MIe,"padStart");function jsr(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var c="",l,u,f=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+f+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)u=LIe(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),p),c=cl.repeat(" ",e.indent)+MIe((t.line-l+1).toString(),f)+" | "+u.str+`
`+c;for(u=LIe(t.buffer,n[a],i[a],t.position,p),c+=cl.repeat(" ",e.indent)+MIe((t.line+1).toString(),f)+" | "+u.str+`
`,c+=cl.repeat("-",e.indent+f+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)u=LIe(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),p),c+=cl.repeat(" ",e.indent)+MIe((t.line+l+1).toString(),f)+" | "+u.str+`
`;return c.replace(/\n$/,"")}s(jsr,"makeSnippet");var Vsr=jsr,$sr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],zsr=["scalar","sequence","mapping"];function Ysr(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(Ysr,"compileStyleAliases");function Ksr(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if($sr.indexOf(r)===-1)throw new Xf('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Ysr(e.styleAliases||null),zsr.indexOf(this.kind)===-1)throw new Xf('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(Ksr,"Type$1");var sd=Ksr;function $at(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s($at,"compileList");function Jsr(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(Jsr,"compileMap");function OIe(t){return this.extend(t)}s(OIe,"Schema$1");OIe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof sd)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Xf("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof sd))throw new Xf("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Xf("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Xf("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof sd))throw new Xf("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(OIe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=$at(i,"implicit"),i.compiledExplicit=$at(i,"explicit"),i.compiledTypeMap=Jsr(i.compiledImplicit,i.compiledExplicit),i},"extend");var Xsr=OIe,Zsr=new sd("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),ear=new sd("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),tar=new sd("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),rar=new Xsr({explicit:[Zsr,ear,tar]});function nar(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(nar,"resolveYamlNull");function iar(){return null}s(iar,"constructYamlNull");function oar(t){return t===null}s(oar,"isNull");var sar=new sd("tag:yaml.org,2002:null",{kind:"scalar",resolve:nar,construct:iar,predicate:oar,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function aar(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(aar,"resolveYamlBoolean");function car(t){return t==="true"||t==="True"||t==="TRUE"}s(car,"constructYamlBoolean");function lar(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(lar,"isBoolean");var uar=new sd("tag:yaml.org,2002:bool",{kind:"scalar",resolve:aar,construct:car,predicate:lar,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function dar(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(dar,"isHexCode");function far(t){return 48<=t&&t<=55}s(far,"isOctCode");function par(t){return 48<=t&&t<=57}s(par,"isDecCode");function mar(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!dar(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!far(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!par(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(mar,"resolveYamlInteger");function har(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(har,"constructYamlInteger");function gar(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!cl.isNegativeZero(t)}s(gar,"isInteger");var Aar=new sd("tag:yaml.org,2002:int",{kind:"scalar",resolve:mar,construct:har,predicate:gar,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),yar=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Car(t){return!(t===null||!yar.test(t)||t[t.length-1]==="_")}s(Car,"resolveYamlFloat");function Ear(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(Ear,"constructYamlFloat");var xar=/^[-+]?[0-9]+e/;function bar(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(cl.isNegativeZero(t))return"-0.0";return r=t.toString(10),xar.test(r)?r.replace("e",".e"):r}s(bar,"representYamlFloat");function Iar(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||cl.isNegativeZero(t))}s(Iar,"isFloat");var Tar=new sd("tag:yaml.org,2002:float",{kind:"scalar",resolve:Car,construct:Ear,predicate:Iar,represent:bar,defaultStyle:"lowercase"}),war=rar.extend({implicit:[sar,uar,Aar,Tar]}),_ar=war,uct=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),dct=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Sar(t){return t===null?!1:uct.exec(t)!==null||dct.exec(t)!==null}s(Sar,"resolveYamlTimestamp");function Rar(t){var e,r,n,i,o,a,c,l=0,u=null,f,p,m;if(e=uct.exec(t),e===null&&(e=dct.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],c=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(f=+e[10],p=+(e[11]||0),u=(f*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,c,l)),u&&m.setTime(m.getTime()-u),m}s(Rar,"constructYamlTimestamp");function kar(t){return t.toISOString()}s(kar,"representYamlTimestamp");var Par=new sd("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Sar,construct:Rar,instanceOf:Date,represent:kar});function Bar(t){return t==="<<"||t===null}s(Bar,"resolveYamlMerge");var Dar=new sd("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Bar}),WIe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Nar(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=WIe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s(Nar,"resolveYamlBinary");function Lar(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=WIe,a=0,c=[];for(e=0;e<i;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):r===18?(c.push(a>>10&255),c.push(a>>2&255)):r===12&&c.push(a>>4&255),new Uint8Array(c)}s(Lar,"constructYamlBinary");function Mar(t){var e="",r=0,n,i,o=t.length,a=WIe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(Mar,"representYamlBinary");function Far(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(Far,"isBinary");var Oar=new sd("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Nar,construct:Lar,predicate:Far,represent:Mar}),Qar=Object.prototype.hasOwnProperty,Uar=Object.prototype.toString;function qar(t){if(t===null)return!0;var e=[],r,n,i,o,a,c=t;for(r=0,n=c.length;r<n;r+=1){if(i=c[r],a=!1,Uar.call(i)!=="[object Object]")return!1;for(o in i)if(Qar.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(qar,"resolveYamlOmap");function Har(t){return t!==null?t:[]}s(Har,"constructYamlOmap");var War=new sd("tag:yaml.org,2002:omap",{kind:"sequence",resolve:qar,construct:Har}),Gar=Object.prototype.toString;function jar(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],Gar.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(jar,"resolveYamlPairs");function Var(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(Var,"constructYamlPairs");var $ar=new sd("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:jar,construct:Var}),zar=Object.prototype.hasOwnProperty;function Yar(t){if(t===null)return!0;var e,r=t;for(e in r)if(zar.call(r,e)&&r[e]!==null)return!1;return!0}s(Yar,"resolveYamlSet");function Kar(t){return t!==null?t:{}}s(Kar,"constructYamlSet");var Jar=new sd("tag:yaml.org,2002:set",{kind:"mapping",resolve:Yar,construct:Kar}),fct=_ar.extend({implicit:[Par,Dar],explicit:[Oar,War,$ar,Jar]}),FT=Object.prototype.hasOwnProperty,mre=1,pct=2,mct=3,hre=4,FIe=1,Xar=2,zat=3,Zar=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ecr=/[\x85\u2028\u2029]/,tcr=/[,\[\]\{\}]/,hct=/^(?:!|!!|![a-z\-]+!)$/i,gct=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Yat(t){return Object.prototype.toString.call(t)}s(Yat,"_class");function RC(t){return t===10||t===13}s(RC,"is_EOL");function PR(t){return t===9||t===32}s(PR,"is_WHITE_SPACE");function Zf(t){return t===9||t===32||t===10||t===13}s(Zf,"is_WS_OR_EOL");function UD(t){return t===44||t===91||t===93||t===123||t===125}s(UD,"is_FLOW_INDICATOR");function rcr(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(rcr,"fromHexCode");function ncr(t){return t===120?2:t===117?4:t===85?8:0}s(ncr,"escapedHexLen");function icr(t){return 48<=t&&t<=57?t-48:-1}s(icr,"fromDecimalCode");function Kat(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(Kat,"simpleEscapeSequence");function ocr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(ocr,"charFromCodepoint");var Act=new Array(256),yct=new Array(256);for(kR=0;kR<256;kR++)Act[kR]=Kat(kR)?1:0,yct[kR]=Kat(kR);var kR;function scr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||fct,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(scr,"State$1");function Cct(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=Vsr(r),new Xf(e,r)}s(Cct,"generateError");function Xr(t,e){throw Cct(t,e)}s(Xr,"throwError");function gre(t,e){t.onWarning&&t.onWarning.call(null,Cct(t,e))}s(gre,"throwWarning");var Jat={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&Xr(e,"duplication of %YAML directive"),n.length!==1&&Xr(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Xr(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&Xr(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&gre(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&Xr(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],hct.test(i)||Xr(e,"ill-formed tag handle (first argument) of the TAG directive"),FT.call(e.tagMap,i)&&Xr(e,'there is a previously declared suffix for "'+i+'" tag handle'),gct.test(o)||Xr(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Xr(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function MT(t,e,r,n){var i,o,a,c;if(e<r){if(c=t.input.slice(e,r),n)for(i=0,o=c.length;i<o;i+=1)a=c.charCodeAt(i),a===9||32<=a&&a<=1114111||Xr(t,"expected valid JSON character");else Zar.test(c)&&Xr(t,"the stream contains non-printable characters");t.result+=c}}s(MT,"captureSegment");function Xat(t,e,r,n){var i,o,a,c;for(cl.isObject(r)||Xr(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,c=i.length;a<c;a+=1)o=i[a],FT.call(e,o)||(e[o]=r[o],n[o]=!0)}s(Xat,"mergeMappings");function qD(t,e,r,n,i,o,a,c,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&Xr(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Yat(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Yat(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,f=o.length;u<f;u+=1)Xat(t,e,o[u],r);else Xat(t,e,o,r);else!t.json&&!FT.call(r,i)&&FT.call(e,i)&&(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=l||t.position,Xr(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s(qD,"storeMappingPair");function GIe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Xr(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(GIe,"readLineBreak");function Wc(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;PR(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(RC(i))for(GIe(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&gre(t,"deficient indentation"),n}s(Wc,"skipSeparationSpace");function Cre(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Zf(r)))}s(Cre,"testDocumentSeparator");function jIe(t,e){e===1?t.result+=" ":e>1&&(t.result+=cl.repeat(`
`,e-1))}s(jIe,"writeFoldedLines");function acr(t,e,r){var n,i,o,a,c,l,u,f,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),Zf(h)||UD(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),Zf(i)||r&&UD(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,c=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),Zf(i)||r&&UD(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),Zf(n))break}else{if(t.position===t.lineStart&&Cre(t)||r&&UD(h))break;if(RC(h))if(l=t.line,u=t.lineStart,f=t.lineIndent,Wc(t,!1,-1),t.lineIndent>=e){c=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=u,t.lineIndent=f;break}}c&&(MT(t,o,a,!1),jIe(t,t.line-l),o=a=t.position,c=!1),PR(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return MT(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(acr,"readPlainScalar");function ccr(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(MT(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else RC(r)?(MT(t,n,i,!0),jIe(t,Wc(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Cre(t)?Xr(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Xr(t,"unexpected end of the stream within a single quoted scalar")}s(ccr,"readSingleQuotedScalar");function lcr(t,e){var r,n,i,o,a,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return MT(t,r,t.position,!0),t.position++,!0;if(c===92){if(MT(t,r,t.position,!0),c=t.input.charCodeAt(++t.position),RC(c))Wc(t,!1,e);else if(c<256&&Act[c])t.result+=yct[c],t.position++;else if((a=ncr(c))>0){for(i=a,o=0;i>0;i--)c=t.input.charCodeAt(++t.position),(a=rcr(c))>=0?o=(o<<4)+a:Xr(t,"expected hexadecimal character");t.result+=ocr(o),t.position++}else Xr(t,"unknown escape sequence");r=n=t.position}else RC(c)?(MT(t,r,n,!0),jIe(t,Wc(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Cre(t)?Xr(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Xr(t,"unexpected end of the stream within a double quoted scalar")}s(lcr,"readDoubleQuotedScalar");function ucr(t,e){var r=!0,n,i,o,a=t.tag,c,l=t.anchor,u,f,p,m,h,g=Object.create(null),y,E,x,b;if(b=t.input.charCodeAt(t.position),b===91)f=93,h=!1,c=[];else if(b===123)f=125,h=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),b=t.input.charCodeAt(++t.position);b!==0;){if(Wc(t,!0,e),b=t.input.charCodeAt(t.position),b===f)return t.position++,t.tag=a,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=c,!0;r?b===44&&Xr(t,"expected the node content, but found ','"):Xr(t,"missed comma between flow collection entries"),E=y=x=null,p=m=!1,b===63&&(u=t.input.charCodeAt(t.position+1),Zf(u)&&(p=m=!0,t.position++,Wc(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,HD(t,e,mre,!1,!0),E=t.tag,y=t.result,Wc(t,!0,e),b=t.input.charCodeAt(t.position),(m||t.line===n)&&b===58&&(p=!0,b=t.input.charCodeAt(++t.position),Wc(t,!0,e),HD(t,e,mre,!1,!0),x=t.result),h?qD(t,c,g,E,y,x,n,i,o):p?c.push(qD(t,null,g,E,y,x,n,i,o)):c.push(y),Wc(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(r=!0,b=t.input.charCodeAt(++t.position)):r=!1}Xr(t,"unexpected end of the stream within a flow collection")}s(ucr,"readFlowCollection");function dcr(t,e){var r,n,i=FIe,o=!1,a=!1,c=e,l=0,u=!1,f,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)FIe===i?i=p===43?zat:Xar:Xr(t,"repeat of a chomping mode identifier");else if((f=icr(p))>=0)f===0?Xr(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Xr(t,"repeat of an indentation width identifier"):(c=e+f-1,a=!0);else break;if(PR(p)){do p=t.input.charCodeAt(++t.position);while(PR(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!RC(p)&&p!==0)}for(;p!==0;){for(GIe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<c)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>c&&(c=t.lineIndent),RC(p)){l++;continue}if(t.lineIndent<c){i===zat?t.result+=cl.repeat(`
`,o?1+l:l):i===FIe&&o&&(t.result+=`
`);break}for(n?PR(p)?(u=!0,t.result+=cl.repeat(`
`,o?1+l:l)):u?(u=!1,t.result+=cl.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=cl.repeat(`
`,l):t.result+=cl.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,r=t.position;!RC(p)&&p!==0;)p=t.input.charCodeAt(++t.position);MT(t,r,t.position,!1)}return!0}s(dcr,"readBlockScalar");function Zat(t,e){var r,n=t.tag,i=t.anchor,o=[],a,c=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Xr(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!Zf(a))));){if(c=!0,t.position++,Wc(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,HD(t,e,mct,!1,!0),o.push(t.result),Wc(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)Xr(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(Zat,"readBlockSequence");function fcr(t,e,r){var n,i,o,a,c,l,u=t.tag,f=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,E=!1,x=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),b=t.input.charCodeAt(t.position);b!==0;){if(!E&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Xr(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(b===63||b===58)&&Zf(n))b===63?(E&&(qD(t,p,m,h,g,null,a,c,l),h=g=y=null),x=!0,E=!0,i=!0):E?(E=!1,i=!0):Xr(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=n;else{if(a=t.line,c=t.lineStart,l=t.position,!HD(t,r,pct,!1,!0))break;if(t.line===o){for(b=t.input.charCodeAt(t.position);PR(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),Zf(b)||Xr(t,"a whitespace character is expected after the key-value separator within a block mapping"),E&&(qD(t,p,m,h,g,null,a,c,l),h=g=y=null),x=!0,E=!1,i=!1,h=t.tag,g=t.result;else if(x)Xr(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=f,!0}else if(x)Xr(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=f,!0}if((t.line===o||t.lineIndent>e)&&(E&&(a=t.line,c=t.lineStart,l=t.position),HD(t,e,hre,!0,i)&&(E?g=t.result:y=t.result),E||(qD(t,p,m,h,g,y,a,c,l),h=g=y=null),Wc(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&b!==0)Xr(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return E&&qD(t,p,m,h,g,null,a,c,l),x&&(t.tag=u,t.anchor=f,t.kind="mapping",t.result=p),x}s(fcr,"readBlockMapping");function pcr(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&Xr(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):Xr(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Zf(a);)a===33&&(n?Xr(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),hct.test(i)||Xr(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),tcr.test(o)&&Xr(t,"tag suffix cannot contain flow indicator characters")}o&&!gct.test(o)&&Xr(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Xr(t,"tag name is malformed: "+o)}return r?t.tag=o:FT.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:Xr(t,'undeclared tag handle "'+i+'"'),!0}s(pcr,"readTagProperty");function mcr(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&Xr(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Zf(r)&&!UD(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Xr(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(mcr,"readAnchorProperty");function hcr(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Zf(n)&&!UD(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Xr(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),FT.call(t.anchorMap,r)||Xr(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Wc(t,!0,-1),!0}s(hcr,"readAlias");function HD(t,e,r,n,i){var o,a,c,l=1,u=!1,f=!1,p,m,h,g,y,E;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=c=hre===r||mct===r,n&&Wc(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;pcr(t)||mcr(t);)Wc(t,!0,-1)?(u=!0,c=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):c=!1;if(c&&(c=u||i),(l===1||hre===r)&&(mre===r||pct===r?y=e:y=e+1,E=t.position-t.lineStart,l===1?c&&(Zat(t,E)||fcr(t,E,y))||ucr(t,y)?f=!0:(a&&dcr(t,y)||ccr(t,y)||lcr(t,y)?f=!0:hcr(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&Xr(t,"alias node should not have any properties")):acr(t,y,mre===r)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(f=c&&Zat(t,E))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Xr(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(FT.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||Xr(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&Xr(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Xr(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}s(HD,"composeNode");function gcr(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(Wc(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!Zf(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&Xr(t,"directive name must not be less than one character in length");a!==0;){for(;PR(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!RC(a));break}if(RC(a))break;for(r=t.position;a!==0&&!Zf(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&GIe(t),FT.call(Jat,n)?Jat[n](t,n,i):gre(t,'unknown document directive "'+n+'"')}if(Wc(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Wc(t,!0,-1)):o&&Xr(t,"directives end mark is expected"),HD(t,t.lineIndent-1,hre,!1,!0),Wc(t,!0,-1),t.checkLineBreaks&&ecr.test(t.input.slice(e,t.position))&&gre(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Cre(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Wc(t,!0,-1));return}if(t.position<t.length-1)Xr(t,"end of the stream or a document separator is expected");else return}s(gcr,"readDocument");function Ect(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new scr(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,Xr(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)gcr(r);return r.documents}s(Ect,"loadDocuments");function Acr(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Ect(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(Acr,"loadAll$1");function ycr(t,e){var r=Ect(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Xf("expected a single document in the stream, but found more")}}s(ycr,"load$1");var Ccr=Acr,Ecr=ycr,vct={loadAll:Ccr,load:Ecr},xct=Object.prototype.toString,bct=Object.prototype.hasOwnProperty,VIe=65279,vcr=9,O7=10,xcr=13,bcr=32,Icr=33,Tcr=34,QIe=35,wcr=37,_cr=38,Scr=39,Rcr=42,Ict=44,kcr=45,Are=58,Pcr=61,Bcr=62,Dcr=63,Ncr=64,Tct=91,wct=93,Lcr=96,_ct=123,Mcr=124,Sct=125,ad={};ad[0]="\\0";ad[7]="\\a";ad[8]="\\b";ad[9]="\\t";ad[10]="\\n";ad[11]="\\v";ad[12]="\\f";ad[13]="\\r";ad[27]="\\e";ad[34]='\\"';ad[92]="\\\\";ad[133]="\\N";ad[160]="\\_";ad[8232]="\\L";ad[8233]="\\P";var Fcr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ocr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Qcr(t,e){var r,n,i,o,a,c,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&bct.call(l.styleAliases,c)&&(c=l.styleAliases[c]),r[a]=c;return r}s(Qcr,"compileStyleMap");function Ucr(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Xf("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+cl.repeat("0",n-e.length)+e}s(Ucr,"encodeHex");var qcr=1,Q7=2;function Hcr(t){this.schema=t.schema||fct,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=cl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Qcr(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Q7:qcr,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(Hcr,"State");function ect(t,e){for(var r=cl.repeat(" ",e),n=0,i=-1,o="",a,c=t.length;n<c;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=c):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(ect,"indentString");function UIe(t,e){return`
`+cl.repeat(" ",t.indent*e)}s(UIe,"generateNextLine");function Wcr(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(Wcr,"testImplicitResolving");function yre(t){return t===bcr||t===vcr}s(yre,"isWhitespace");function U7(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==VIe||65536<=t&&t<=1114111}s(U7,"isPrintable");function tct(t){return U7(t)&&t!==VIe&&t!==xcr&&t!==O7}s(tct,"isNsCharOrWhitespace");function rct(t,e,r){var n=tct(t),i=n&&!yre(t);return(r?n:n&&t!==Ict&&t!==Tct&&t!==wct&&t!==_ct&&t!==Sct)&&t!==QIe&&!(e===Are&&!i)||tct(e)&&!yre(e)&&t===QIe||e===Are&&i}s(rct,"isPlainSafe");function Gcr(t){return U7(t)&&t!==VIe&&!yre(t)&&t!==kcr&&t!==Dcr&&t!==Are&&t!==Ict&&t!==Tct&&t!==wct&&t!==_ct&&t!==Sct&&t!==QIe&&t!==_cr&&t!==Rcr&&t!==Icr&&t!==Mcr&&t!==Pcr&&t!==Bcr&&t!==Scr&&t!==Tcr&&t!==wcr&&t!==Ncr&&t!==Lcr}s(Gcr,"isPlainSafeFirst");function jcr(t){return!yre(t)&&t!==Are}s(jcr,"isPlainSafeLast");function M7(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(M7,"codePointAt");function Rct(t){var e=/^\n* /;return e.test(t)}s(Rct,"needIndentIndicator");var kct=1,qIe=2,Pct=3,Bct=4,QD=5;function Vcr(t,e,r,n,i,o,a,c){var l,u=0,f=null,p=!1,m=!1,h=n!==-1,g=-1,y=Gcr(M7(t,0))&&jcr(M7(t,t.length-1));if(e||a)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=M7(t,l),!U7(u))return QD;y=y&&rct(u,f,c),f=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=M7(t,l),u===O7)p=!0,h&&(m=m||l-g-1>n&&t[g+1]!==" ",g=l);else if(!U7(u))return QD;y=y&&rct(u,f,c),f=u}m=m||h&&l-g-1>n&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?kct:o===Q7?QD:qIe:r>9&&Rct(t)?QD:a?o===Q7?QD:qIe:m?Bct:Pct}s(Vcr,"chooseScalarStyle");function $cr(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Q7?'""':"''";if(!t.noCompatMode&&(Fcr.indexOf(e)!==-1||Ocr.test(e)))return t.quotingType===Q7?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return Wcr(t,u)}switch(s(l,"testAmbiguity"),Vcr(e,c,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case kct:return e;case qIe:return"'"+e.replace(/'/g,"''")+"'";case Pct:return"|"+nct(e,t.indent)+ict(ect(e,o));case Bct:return">"+nct(e,t.indent)+ict(ect(zcr(e,a),o));case QD:return'"'+Ycr(e)+'"';default:throw new Xf("impossible error: invalid scalar style")}}()}s($cr,"writeScalar");function nct(t,e){var r=Rct(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(nct,"blockHeader");function ict(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(ict,"dropEndingNewline");function zcr(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,oct(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var c=a[1],l=a[2];o=l[0]===" ",n+=c+(!i&&!o&&l!==""?`
`:"")+oct(l,e),i=o}return n}s(zcr,"foldString");function oct(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,c=0,l="";n=r.exec(t);)c=n.index,c-i>e&&(o=a>i?a:c,l+=`
`+t.slice(i,o),i=o+1),a=c;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}s(oct,"foldLine");function Ycr(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=M7(t,i),n=ad[r],!n&&U7(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||Ucr(r);return e}s(Ycr,"escapeString");function Kcr(t,e,r){var n="",i=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(cv(t,e,c,!1,!1)||typeof c>"u"&&cv(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(Kcr,"writeFlowSequence");function sct(t,e,r,n){var i="",o=t.tag,a,c,l;for(a=0,c=r.length;a<c;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(cv(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&cv(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=UIe(t,e)),t.dump&&O7===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(sct,"writeBlockSequence");function Jcr(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,c,l,u,f;for(a=0,c=o.length;a<c;a+=1)f="",n!==""&&(f+=", "),t.condenseFlow&&(f+='"'),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),cv(t,e,l,!1,!1)&&(t.dump.length>1024&&(f+="? "),f+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),cv(t,e,u,!1,!1)&&(f+=t.dump,n+=f));t.tag=i,t.dump="{"+n+"}"}s(Jcr,"writeFlowMapping");function Xcr(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),c,l,u,f,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new Xf("sortKeys must be a boolean or a function");for(c=0,l=a.length;c<l;c+=1)m="",(!n||i!=="")&&(m+=UIe(t,e)),u=a[c],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),cv(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&O7===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=UIe(t,e)),cv(t,e+1,f,!0,p)&&(t.dump&&O7===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(Xcr,"writeBlockMapping");function act(t,e,r){var n,i,o,a,c,l;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(c=i[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(r?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(l=t.styleMap[c.tag]||c.defaultStyle,xct.call(c.represent)==="[object Function]")n=c.represent(e,l);else if(bct.call(c.represent,l))n=c.represent[l](e,l);else throw new Xf("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}s(act,"detectType");function cv(t,e,r,n,i,o,a){t.tag=null,t.dump=r,act(t,r,!1)||act(t,r,!0);var c=xct.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var f=c==="[object Object]"||c==="[object Array]",p,m;if(f&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(f&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),c==="[object Object]")n&&Object.keys(t.dump).length!==0?(Xcr(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(Jcr(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?sct(t,e-1,t.dump,i):sct(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(Kcr(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&$cr(t,t.dump,e,o,l);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Xf("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(cv,"writeNode");function Zcr(t,e){var r=[],n=[],i,o;for(HIe(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(Zcr,"getDuplicateReferences");function HIe(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)HIe(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)HIe(t[n[i]],e,r)}s(HIe,"inspectNode");function elr(t,e){e=e||{};var r=new Hcr(e);r.noRefs||Zcr(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),cv(r,0,n,!0,!0)?r.dump+`
`:""}s(elr,"dump$1");var tlr=elr,rlr={dump:tlr};function $Ie(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s($Ie,"renamed");var Yki=vct.load,Kki=vct.loadAll,zIe=rlr.dump;var Jki=$Ie("safeLoad","load"),Xki=$Ie("safeLoadAll","loadAll"),Zki=$Ie("safeDump","dump");var BR=Ne(mp());var YIe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},Wl=class{constructor(){this.dump=new Fr(25);this.promptsDump=new Fr(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new YIe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function Dct(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(Dct,"filterConversationTurns");function DIe(t){return Dct(t).getLastTurn()?.id}s(DIe,"getLastTurnId");async function qat(t){let e=Dct(t.conversation),r=DIe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(Wl).getDump(r),o=olr(i,e.turns);pn.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await slr(i,t.ctx);return BR.default`
        ${ilr(t.conversation,r)}
        ${nlr(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(qat,"getConversationDump");function nlr(t){let e=t.get(rn);return BR.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(nlr,"getEditorInfoDumpMessage");function ilr(t,e){return BR.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(ilr,"getInfoDumpMessage");async function Hat(t,e,r){let n=t.ctx.get(al),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(Wi).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&Jr(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${Jr(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=BR.default`
            \n\n
            **Description**
            
            ${a.description()}`;let c=n.getSkill(a.id),l=await c?.resolver(t).resolveSkill(t);if(l){i+=BR.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${zIe(l)}
                \`\`\``;let u=await c?.processor(t).processSkill(l,t);if(u){let f=typeof u=="string"?u:u.elide(1e3).getText();i+=BR.default`
                    \n\n
                    **Processed value**
                    
                    ${f}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(Hat,"getSkillsDump");function olr(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:Jr(n.request.message)};return n.response&&(o.response=Jr(n.response.message)),o})};return zIe(r)}s(olr,"toSimulationFormat");async function slr(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(hn).getOrReadTextDocument(o),c;a.status==="valid"&&(c=a.document);let l=c?.getText();pn.debug(e,`conversation.dump.file
`,l),i+=`
**${o.uri}**

\`\`\`${c?.detectedLanguageId}
${l}
\`\`\``}return i}s(slr,"fileDump");d();function KIe(t,e){let r=zo(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(Jr(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(KIe,"countMessagesTokens");d();function Nct(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),c=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",l=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",f=r?`The user is logged in as ${r} on GitHub.`:"";return[o,l,u,f,c,a].filter(p=>p&&p!="").join(`
`)}s(Nct,"chatBasePrompt");d();d();d();d();d();function Lct(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([Q0(i.join(`
`)),1]),i=[],r.push([new Nt([o]),1])):r.push([new Nt([o]),1]),n=!n):n?i.push(o):r.push([new Nt([o]),.8]);return n&&(r.push([Q0(i.join(`
`)),1]),r.push([new Nt(["```"]),1])),new Nt(r)}s(Lct,"fromMessage");function WD(t){let e=JIe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=Mct(i.request,n+1),a=i.response&&i.response?.type!=="meta"?Mct(i.response):"",c=o;a!==""&&(c+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(Lct(c))}return r.length>0?new Nt([[new Nt(["Consider the following conversation history:"]),1],[NT(r,"inverseLinear"),1]]):null}s(WD,"fromHistory");var alr=5;function JIe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&Jr(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,alr).reverse()}s(JIe,"filterTurns");function Mct(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=Jr(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${Jr(t.message)}`}s(Mct,"formatTurnMessage");d();d();d();var clr=4,XIe={skillIds:[]},Ere=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let c=await Fo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),l={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:c},u=await this.ctx.get(Iu).toPrompt(e,l),f=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:c,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,f);return m.type!=="success"&&(Or.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,f)),await e.ctx.get(Hc).inspectFetchResult(m),this.handleResult(m,f,Jr(a),o,u.toolConfig)}else return XIe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),XIe;let c;if(e.toolCalls&&e.toolCalls.length>0)c=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,clr);else return Or.error(this.ctx,"Missing tool call in meta prompt response"),XIe;let l=r.extendedBy({uiKind:i,skillIds:c?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=l.extendedBy({messageText:n});return Dt(this.ctx,`${Sl(i)}.metaPrompt`,l,0),Dt(this.ctx,`${Sl(i)}.promptContext`,u,1),{skillIds:c??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Dt(this.ctx,"conversation.promptContextError",n,1)}};d();d();d();var vre=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return fe(e,r,"org.springframework.boot","Spring Boot"),fe(e,r,"jakarta.jakartaee-api","Jakarta EE"),fe(e,r,"javax:javaee-api","Java EE"),fe(e,r,"org.apache.struts:struts2-core","Apache Struts"),fe(e,r,"org.hibernate:hibernate-core","Hibernate"),fe(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),fe(e,r,"javax.faces:jsf-api","JSF"),fe(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return fe(e,r,"com.google.guava","Google Guava"),fe(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),fe(e,r,"org.apache.commons:commons-io","Apache Commons IO"),fe(e,r,"joda-time:joda-time","Joda-Time"),fe(e,r,"com.google.code.gson:gson","Google Gson"),fe(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),fe(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),fe(e,r,"org.apache.commons:commons-net","Apache Commons Net"),fe(e,r,"org.apache.poi:poi","Apache POI"),fe(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return fe(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),fe(e,r,"junit:junit","JUnit"),fe(e,r,"org.testng:testng","TestNG"),fe(e,r,"org.spockframework:spock-core","Spock"),fe(e,r,"io.cucumber:cucumber-java","Cucumber"),fe(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return fe(e,r,"org.mockito","Mockito"),fe(e,r,"org.assertj","AssertJ"),fe(e,r,"org.hamcrest","Hamcrest"),fe(e,r,"org.powermock","PowerMock"),fe(e,r,"org.jmock","JMock"),fe(e,r,"org.easymock","EasyMock"),fe(e,r,"org.jmockit:jmockit","JMockit"),fe(e,r,"com.github.tomakehurst:wiremock","WireMock"),fe(e,r,"org.dbunit:dbunit","DBUnit"),fe(e,r,"com.icegreen:greenmail","GreenMail"),fe(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),fe(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),fe(e,r,"io.rest-assured:rest-assured","Rest-Assured"),fe(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),fe(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},xre=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return fe(e,r,"@types/node","Node.js"),fe(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||fe(e,r,"react","React"),fe(e,r,"angular","Angular"),fe(e,r,"vue","Vue.js"),fe(e,r,"ember","Ember.js"),fe(e,r,"backbone","Backbone.js"),fe(e,r,"meteor","Meteor"),fe(e,r,"polymer","Polymer"),fe(e,r,"aurelia","Aurelia"),fe(e,r,"knockout","Knockout.js"),fe(e,r,"dojo","Dojo Toolkit"),fe(e,r,"mithril","Mithril.js"),fe(e,r,"marionette","Marionette.js"),fe(e,r,"marko","Marko.js"),fe(e,r,"svelte","Svelte"),fe(e,r,"hyperapp","Hyperapp"),fe(e,r,"inferno","Inferno.js"),fe(e,r,"preact","Preact"),fe(e,r,"riot","Riot.js"),fe(e,r,"moon","Moon.js"),fe(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return fe(e,r,"lodash","Lodash"),fe(e,r,"moment","Moment.js"),fe(e,r,"axios","Axios"),fe(e,r,"redux","Redux"),fe(e,r,"recoil","Recoil"),fe(e,r,"jquery","jQuery"),fe(e,r,"d3","D3.js"),fe(e,r,"underscore","Underscore.js"),fe(e,r,"ramda","Ramda"),fe(e,r,"immutable","Immutable.js"),fe(e,r,"rxjs","RxJS"),fe(e,r,"three","Three.js"),fe(e,r,"socket.io","Socket.IO"),fe(e,r,"express","Express.js"),fe(e,r,"next","Next.js"),fe(e,r,"puppeteer","Puppeteer"),fe(e,r,"cheerio","Cheerio"),fe(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return fe(e,r,"jest","Jest"),fe(e,r,"mocha","Mocha"),fe(e,r,"jasmine","Jasmine"),fe(e,r,"ava","AVA"),fe(e,r,"qunit","QUnit"),fe(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return fe(e,r,"chai","Chai"),fe(e,r,"sinon","Sinon"),fe(e,r,"enzyme","Enzyme"),fe(e,r,"protractor","Protractor"),fe(e,r,"supertest","Supertest"),fe(e,r,"nock","Nock"),fe(e,r,"cypress","Cypress"),fe(e,r,"@testing-library/react","React Testing Library"),r}},bre=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return fe(e,r,"github.com/gorilla/mux","Gorilla Mux"),fe(e,r,"github.com/go-chi/chi","Chi"),fe(e,r,"github.com/gin-gonic/gin","Gin"),fe(e,r,"github.com/labstack/echo","Echo"),fe(e,r,"github.com/revel/revel","Revel"),fe(e,r,"github.com/astaxie/beego","Beego"),fe(e,r,"github.com/go-martini/martini","Martini"),fe(e,r,"github.com/gobuffalo/buffalo","Buffalo"),fe(e,r,"github.com/goji/goji","Goji"),fe(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return fe(e,r,"net/http","net/http"),fe(e,r,"fmt","fmt"),fe(e,r,"io","io"),fe(e,r,"time","time"),fe(e,r,"math","math"),fe(e,r,"strconv","strconv"),fe(e,r,"strings","strings"),fe(e,r,"sort","sort"),fe(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return fe(e,r,"github.com/onsi/ginkgo","ginkgo"),fe(e,r,"github.com/onsi/gomega","gomega"),fe(e,r,"github.com/stretchr/testify","testify"),fe(e,r,"gopkg.in/check.v1","gocheck"),fe(e,r,"github.com/franela/goblin","goblin"),fe(e,r,"github.com/DATA-DOG/godog","godog"),fe(e,r,"github.com/stesla/gospec","gospec"),fe(e,r,"github.com/rjeczalik/gotest","gotest"),fe(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return fe(e,r,"github.com/stretchr/testify","Testify"),fe(e,r,"github.com/smartystreets/goconvey","GoConvey"),fe(e,r,"github.com/onsi/ginkgo","Ginkgo"),fe(e,r,"github.com/golang/mock","GoMock"),fe(e,r,"gopkg.in/check.v1","GoCheck"),fe(e,r,"github.com/franela/goblin","Goblin"),fe(e,r,"github.com/DATA-DOG/godog","GoDog"),fe(e,r,"github.com/onsi/gomega","Gomega"),fe(e,r,"github.com/stesla/gospec","GoSpec"),fe(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},Ire=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return fe(e,r,"flask","Flask"),fe(e,r,"django","Django"),fe(e,r,"pyramid","Pyramid"),fe(e,r,"tornado","Tornado"),fe(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return fe(e,r,"requests","requests"),fe(e,r,"numpy","numpy"),fe(e,r,"pandas","pandas"),fe(e,r,"scipy","scipy"),fe(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return fe(e,r,"pytest","Pytest"),fe(e,r,"unittest","Unittest"),fe(e,r,"doctest","Doctest"),fe(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return fe(e,r,"mock","Mock"),fe(e,r,"hypothesis","Hypothesis"),fe(e,r,"behave","Behave"),fe(e,r,"lettuce","Lettuce"),fe(e,r,"testify","Testify"),fe(e,r,"pyhamcrest","PyHamcrest"),r}},Tre=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return fe(e,r,"laravel/framework","Laravel"),fe(e,r,"symfony/symfony","Symfony"),fe(e,r,"slim/slim","Slim"),fe(e,r,"cakephp/cakephp","CakePHP"),fe(e,r,"yiisoft/yii2","Yii"),fe(e,r,"zendframework/zendframework","Zend Framework"),fe(e,r,"phalcon/cphalcon","Phalcon"),fe(e,r,"bcosca/fatfree","Fat-Free"),fe(e,r,"fuel/fuel","FuelPHP"),fe(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return fe(e,r,"monolog/monolog","Monolog"),fe(e,r,"vlucas/phpdotenv","PHP dotenv"),fe(e,r,"symfony/console","Symfony Console"),fe(e,r,"guzzlehttp/guzzle","GuzzleHttp"),fe(e,r,"ramsey/uuid","Ramsey UUID"),fe(e,r,"doctrine/orm","Doctrine ORM"),fe(e,r,"php-di/php-di","PHP-DI"),fe(e,r,"phpunit/php-timer","PHPUnit Timer"),fe(e,r,"symfony/finder","Symfony Finder"),fe(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return fe(e,r,"phpunit/phpunit","PHPUnit"),fe(e,r,"behat/behat","Behat"),fe(e,r,"phpspec/phpspec","PHPSpec"),fe(e,r,"codeception/codeception","Codeception"),fe(e,r,"atoum/atoum","Atoum"),fe(e,r,"pestphp/pest","PestPHP"),fe(e,r,"kahlan/kahlan","Kahlan"),fe(e,r,"peridot-php/peridot","Peridot"),fe(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return fe(e,r,"mockery/mockery","Mockery"),fe(e,r,"php-mock/php-mock","PHP-Mock"),fe(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),fe(e,r,"padraic/mockery","Padraic Mockery"),fe(e,r,"phpspec/prophecy","PHPSpec Prophecy"),fe(e,r,"phpunit/php-invoker","PHPUnit Invoker"),fe(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),fe(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),fe(e,r,"phpunit/php-timer","PHPUnit Timer"),fe(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},wre=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return fe(e,r,"Microsoft.NETCore.App",".NET Core"),fe(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return fe(e,r,"EntityFramework","Entity Framework"),fe(e,r,"Newtonsoft.Json","Newtonsoft.Json"),fe(e,r,"AutoMapper","AutoMapper"),fe(e,r,"Serilog","Serilog"),fe(e,r,"Dapper","Dapper"),fe(e,r,"Polly","Polly"),fe(e,r,"FluentValidation","FluentValidation"),fe(e,r,"MediatR","MediatR"),fe(e,r,"Hangfire","Hangfire"),fe(e,r,"RabbitMQ.Client","RabbitMQ.Client"),fe(e,r,"MassTransit","MassTransit"),fe(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),fe(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),fe(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),fe(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return fe(e,r,"xunit","xUnit"),fe(e,r,"NUnit","NUnit"),fe(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return fe(e,r,"Moq","Moq"),fe(e,r,"FluentAssertions","FluentAssertions"),fe(e,r,"Bogus","Bogus"),fe(e,r,"RestSharp","RestSharp"),fe(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},_re=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return fe(e,r,"flutter","Flutter"),fe(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return fe(e,r,"dartx","dartx"),fe(e,r,"provider","Provider"),fe(e,r,"rxdart","RxDart"),fe(e,r,"dio","Dio"),fe(e,r,"json_serializable","json_serializable"),fe(e,r,"freezed","Freezed"),fe(e,r,"moor","Moor"),fe(e,r,"hive","Hive"),fe(e,r,"http","http"),fe(e,r,"path","path"),fe(e,r,"intl","intl"),fe(e,r,"equatable","equatable"),fe(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return fe(e,r,"test","test"),fe(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return fe(e,r,"mockito","mockito"),fe(e,r,"bloc_test","bloc_test"),r}},Sre=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return fe(e,r,"rails","Rails"),fe(e,r,"sinatra","Sinatra"),fe(e,r,"hanami","Hanami"),fe(e,r,"grape","Grape"),fe(e,r,"roda","Roda"),fe(e,r,"padrino","Padrino"),fe(e,r,"cuba","Cuba"),fe(e,r,"ramaze","Ramaze"),fe(e,r,"nyara","Nyara"),fe(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return fe(e,r,"active_record","ActiveRecord"),fe(e,r,"sequel","Sequel"),fe(e,r,"rom","ROM"),fe(e,r,"datamapper","DataMapper"),fe(e,r,"mongoid","Mongoid"),fe(e,r,"neo4j","Neo4j"),fe(e,r,"redis","Redis"),fe(e,r,"cassandra","Cassandra"),fe(e,r,"couchrest","CouchRest"),fe(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return fe(e,r,"rspec","RSpec"),fe(e,r,"minitest","Minitest"),fe(e,r,"cucumber","Cucumber"),fe(e,r,"spinach","Spinach"),fe(e,r,"turnip","Turnip"),fe(e,r,"bacon","Bacon"),fe(e,r,"shoulda","Shoulda"),fe(e,r,"test-unit","Test::Unit"),fe(e,r,"wrong","Wrong"),fe(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return fe(e,r,"factory_bot","FactoryBot"),fe(e,r,"faker","Faker"),fe(e,r,"ffaker","FFaker"),fe(e,r,"fabrication","Fabrication"),fe(e,r,"machinist","Machinist"),fe(e,r,"mocha","Mocha"),fe(e,r,"flexmock","FlexMock"),fe(e,r,"rr","RR"),fe(e,r,"bourne","Bourne"),fe(e,r,"not_a_mock","NotAMock"),r}},Rre=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return fe(e,r,"tokio","tokio"),fe(e,r,"async-std","async-std"),fe(e,r,"hyper","hyper"),fe(e,r,"actix-web","actix-web"),fe(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return fe(e,r,"serde","serde"),fe(e,r,"regex","regex"),fe(e,r,"rand","rand"),fe(e,r,"log","log"),fe(e,r,"lazy_static","lazy_static"),fe(e,r,"libc","libc"),fe(e,r,"futures","futures"),fe(e,r,"rayon","rayon"),fe(e,r,"reqwest","reqwest"),fe(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return fe(e,r,"test-case","test-case"),fe(e,r,"proptest","proptest"),fe(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return fe(e,r,"mockall","mockall"),fe(e,r,"double","double"),fe(e,r,"rstest","rstest"),fe(e,r,"mockiato","mockiato"),fe(e,r,"mock_derive","mock_derive"),fe(e,r,"mocktopus","mocktopus"),fe(e,r,"mockers","mockers"),fe(e,r,"mock_it","mock_it"),r}},kre=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function fe(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(fe,"addFromLibraries");var Pre=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function Oct(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(Oct,"determineProgrammingLanguage");var Fct=[new vre,new xre,new bre,new Ire,new Tre,new wre,new _re,new Sre,new Rre,new kre];function Qct(t){let e=Fct.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new Pre(t,Fct);return new ZIe(e)}s(Qct,"getMetadataLookup");var ZIe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var Uct=I.Object({name:I.String(),version:I.Optional(I.String())}),qct=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(Uct),buildTools:I.Array(Uct)}),eTe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Nt([`The user is working on a project with the following characteristics:
`]),1]);let n=Qct(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Nt(r)}addProgrammingLanguage(e,r){let n=Oct(e);this.turnContext.collectLabel(kC,n),r.push([new Nt([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(kC,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Nt([`${r}
${i}`]),1])}}},kC="project-metadata",Bre=class{constructor(e){this._resolver=e;this.id=kC;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new eTe(e)}};d();var Hct=Ne(require("path"));var tTe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(hn),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new Nt(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new Nt(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=Gs(n);if(await this.turnContext.collectFile(Nre,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new IC(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Nt([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Nt([`The referenced file \`${Hct.basename(r.uri)}\` is content excluded.`]),1]]}},rTe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},Nre="references",Dre=class{constructor(){this.id=Nre;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new rTe}processor(e){return new tTe(e)}};var DR=s(()=>[kC,Yg,Nre,od],"mandatorySkills"),Lre=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new Ere(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let c=[];if(o){let l=o.requiredSkills?await o.requiredSkills(e.ctx):[];c.push(...l.filter(u=>!DR().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!c.includes(u)&&!DR().includes(u)&&c.push(u)});if(a){let l=await a.additionalSkills(e.ctx);c.push(...l.filter(u=>!DR().includes(u)))}return c.push(...DR()),c=c.filter(l=>!this.isIgnoredSkill(l,e.turn)),{skillIds:e.ctx.get(Wi).filterSupportedSkills(e.conversation.id,c)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(Wi).getSupportedSkills(r.id),a=e.get(al).getDescriptors(),c=[];for(let l of a){if(i.includes(l.id)||!o.includes(l.id))continue;(l.isAvailable?await l.isAvailable(e):!0)&&!this.isIgnoredSkill(l.id,n)&&c.push(l)}return c}async getNonSelectableSkills(e){let r=await SC(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...DR(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};d();d();var Mre=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(c=>c.id===r))Or.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let c={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[c],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Or.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var Fre=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Or.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var llr="X-Initiator",ulr="X-Interaction-ID",dlr="X-Interaction-Type";var Ore=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},nTe=class extends Ore{static{s(this,"User")}static id(){return"user"}},iTe=class extends Ore{static{s(this,"Agent")}static id(){return"agent"}},oTe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[llr]:this.initiator,[ulr]:this.interactionId,[dlr]:this.interactionType.toString()}}},e0=class t extends oTe{static{s(this,"LlmInteraction")}static user(e,r){return new t(nTe,e,r)}static agent(e,r){return new t(iTe,e,r)}};var OT=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new sTe(this),this.steps=new Fre(e,r,n,e.get(Js)),this.collector=new aTe(r,n,e.get(Js)),this.agentToolCalls=new Mre(e,r,n,e.get(Js))}static{s(this,"TurnContext")}toLlmInteraction(){return this.conversation.source==="inline"?e0.user("conversation-inline",this.turn.telemetryId):this.agentToolCalls.rounds.length?e0.agent("conversation-panel",this.turn.telemetryId):e0.user("conversation-panel",this.turn.telemetryId)}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(Js).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}},Qre=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},q7=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},sTe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Wi).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(Wl).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new Qre(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(al).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(Wl).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof Qre||i instanceof q7)throw i;Or.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},aTe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function Wct(t,e){let[r,n,i]=await flr(t,e);return i.push(...hlr(t)),r.length>0||n.length>0?[new Nt([[new Nt(["Consider the additional context:"]),1],[NT(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(Wct,"fromSkills");async function flr(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await glr(t,a.skillId,e?.languageId??""))continue;let[c,l]=await plr(t,a.skillId);c&&(DR().indexOf(a.skillId)===-1?n.push(c):i.push(c)),r.push(l)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(flr,"handleSkillsInReverse");async function plr(t,e){let n=t.ctx.get(al).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let c=n?.processor(t),l=Date.now(),u=await c?.processSkill(o,t),f=Date.now()-l;return u?await mlr(t,n,c,u,a,f):[void 0,await qre(t,n,"unprocessable",void 0,a,f)]}else return[void 0,await qre(t,n,"unresolvable",void 0,a)]}catch(i){if(Or.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof q7)throw i;return[void 0,await qre(t,n,"failed")]}}s(plr,"safelyProcessSkill");async function mlr(t,e,r,n,i,o){let a;return typeof n=="string"?a=new Nt([[n,1]]):a=n,[[a,r?.value()||0],await qre(t,e,"resolved",a,i,o)]}s(mlr,"handleProcessedSkill");async function qre(t,e,r,n,i,o){let c=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),l={skillId:e?.id??"unknown",resolution:r,files:c,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(Pa).getBestChatModelConfig(cm("user")),f=n.elide(u.maxRequestTokens).getText();l.tokensPreEliding=zo(u.tokenizer).tokenLength(f)}return t.ctx.get(Wl).addResolution(t.turn.id,l),l}s(qre,"determineResolution");function hlr(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(hlr,"handleIgnoredSkills");async function glr(t,e,r){if(e!==kC&&e!==Yg)return!0;let n=t.ctx.get(Bt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===kC:e===Yg}s(glr,"includeSkill");var Gct=Ne(mp());var NR=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=WD(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new Nt(n),a]}async elidableSkills(e,r){return await Wct(e,r)}async promptContent(e,r,n){let i;e.turn.workspaceFolder&&(i=await uC.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=op(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[c,l]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:c},{role:"system",content:this.suffix(e)},{role:"user",content:a}],l]}},Hre=class extends NR{static{s(this,"PanelUserPromptStrategy")}suffix(e){return Gct.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var jct=Ne(mp());var Wre=class extends NR{static{s(this,"InlineUserPromptStrategy")}suffix(e){return jct.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};d();var cTe=Ne(mp());var Gre=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=WD(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Nt(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return cTe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=unt(e.map(n=>n.id));return I.Object({skillIds:I.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:nT(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:cTe.default`
                    This is the user's question: 
                    ${Jr(i).trim()} 
                `.trim()}],[]]}};d();var Vct=Ne(mp());var jre=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=nT(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return Vct.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=WD(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Nt(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};d();var Alr=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],Vre=class extends NR{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=op(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:Alr,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=nT(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!AY(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!AY(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var lTe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function H7(t,e,r){return new lTe(t,e,r)}s(H7,"descriptor");var $ct=[H7("user",cm("user"),()=>new Hre),H7("inline",cm("inline"),()=>new Wre),H7("meta",cm("meta"),()=>new Gre),H7("suggestions",cm("suggestions"),()=>new jre),H7("synonyms",cm("synonyms"),()=>new Vre)],$re=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=$ct.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return $ct}};var Yct=require("console");var Iu=class{constructor(e,r=new $re){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(Dn).getSession(),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[c,l]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(Hc).inspectPrompt({type:r.promptType,prompt:zct(c),tokens:l}),this.ctx.get(Wl).addPrompt(e.turn.id,zct(c),r.promptType),{messages:c,tokens:l,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(c=>!(typeof c.content=="string"||Array.isArray(c.content)));(0,Yct.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(c=>typeof c.content=="string"||Array.isArray(c.content)?c:{role:c.role,content:ylr(c.content.elide(o).getText())}).filter(c=>c.content.length>0);return[a,KIe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),KIe(n,r)}safetyPrompt(e,r){let n=this.ctx.get(rn).getEditorInfo().readableName??this.ctx.get(rn).getEditorInfo().name,i=Clr(process.platform);return Nct(this.ctx,n,r?.login,i,e)}};function ylr(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(ylr,"processResultOfElidableText");function zct(t){return t.map(e=>Jr(e.content)).join(`

`)}s(zct,"debugChatMessages");function Clr(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(Clr,"mapPlatformToOs");var GD=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await Fo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},c=await this.ctx.get(Iu).toPrompt(e,a),l=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:c.tokens}),u={modelConfiguration:o,messages:c.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(c.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=c.toolConfig.tool_choice,u.tools=c.toolConfig.tools;let f=await this.chatFetcher.fetchResponse(u,r,l);if(f.type!=="success"&&(Or.error(this.ctx,"Failed to fetch suggestions, trying again..."),f=await this.chatFetcher.fetchResponse(u,r,l)),f.type==="success"){if(!f.toolCalls||f.toolCalls.length===0){Or.error(this.ctx,"Missing tool call in suggestions response");return}let p=f.toolCalls[0],{followUp:m,suggestedTitle:h}=c.toolConfig.extractArguments(p);if(!m||!h){Or.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:c.tokens,numTokens:f.numTokens+p.approxNumTokens}}else if(f.type==="successMultiple"){Or.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(f.type==="tool_calls"){Or.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Or.error(this.ctx,`Failed to fetch suggestions due to reason: ${f.reason}`);return}}};var jD=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,c,l){switch(SWe(this.turnContext.ctx,c,a,e.type=="offTopic",e.requestId,l,o.extendedBy({},{fileCount:this.turnContext.ctx.get(Va).workspaceCount})),await this.turnContext.ctx.get(Hc).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,c,i,o,l);case"offTopic":return this.processOffTopicFetchResult(o,c,l);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:Jr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:lT.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,c,l){if(e&&e.length>0){a.markAsDisplayed(),c.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},RWe(this.turnContext.ctx,this.turnContext.conversation,o,e,r,n,l,c);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,l):void 0;if(u){let{followUp:f,suggestedTitle:p}=u;return{followup:f.message!==""?f:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:Jr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new GD(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let c=this.enrichFollowup(a,r,n,i);return Or.debug(this.turnContext.ctx,"Computed followup",c),Or.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:c,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:cr(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return NWe(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",kWe(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};d();var zre=I.Union([I.String(),I.Number()]),LR=I.Union([I.String(),I.Number()]),Elr=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),Yre=I.Object({uri:I.String(),position:I.Optional(xl)}),W7=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(nc),selection:I.Optional(nc),status:I.Optional(Elr),range:I.Optional(nc)}),vlr=I.Object({type:I.Literal("directory"),uri:I.String()}),VD=I.Union([W7,vlr,Jst]),rh=I.Union([I.Literal("panel"),I.Literal("inline")]),xlr=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),uTe=I.Union([I.String(),I.Array(xlr)]),Kct=I.Object({request:uTe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(LR)});function Kre(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(Kre,"convertToMessageContent");function Jre(t,e){if(t=op(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(Jre,"appendToMessage");var Xre=I.Union([I.Literal("Ask"),I.Literal("Agent")]),blr=I.Object({type:I.String(),description:I.String()}),Jct=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),blr),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),Zre=I.Object({uri:I.String(),name:I.String()});var dTe="generate-response",ene=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},G7=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(Js),this.chatFetcher=this.chatFetcher??new ka(r.ctx),this.postProcessor=new jD(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){Or.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof ene?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await lc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let c={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(Hc).inspectPrompt(c),await n.steps.start(dTe,"Generating response");let l=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),l,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:op(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return cr()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return JIe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:op(r.request.message)}),r.response&&r.response.type==="model"){let i=Kst(r.response.references);n.push({role:"assistant",content:op(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await oat(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let c=new kT((p,m,h,g,y)=>{let E=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(x=>({message:x.message,severity:"warning"})),confirmationRequest:E}),this.turn.response?(this.turn.response.message=Jre(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),E&&(this.turn.confirmationRequest=E)}),l=await this.turnContext.ctx.get(jr).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:Jr(this.turn.request.message)},authToken:l?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},f=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>c.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(f),await this.postProcessor.postProcess(f,n,c.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),Jr(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new ene("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return HM(this.conversation,"conversationPanel",Jr(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(dTe,e.error.message):await r.steps.finish(dTe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var j7=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new G7(this,e)}},tne=class extends j7{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new G7(this,e)}};d();var Ilr="github",Jg=class{static{s(this,"RemoteAgentRegistry")}},rne=class extends Jg{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await SS(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(pn.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||pn.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||pn.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==Ilr).map(i=>new j7(i.id,i.slug,i.name,i.description,i.avatar_url))}};var fTe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[OD]}};async function SC(t){let e=[];return e.push(new tne),e.push(...await t.get(Jg).agents()),e.push(new fTe),e}s(SC,"getAgents");var Tlr=I.Object({});async function wlr(t,e,r){return[(await SC(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(wlr,"handleConversationAgentsChecked");var Xct=at(Tlr,wlr);d();d();var V7=Ne(Lc());function _lr(t,e,r){let n=dn.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Dt(t,"getCompletions.docVersionMismatch",n)}s(_lr,"telemetryVersionMismatch");async function Xg(t,e,r){let i=t.get(br).getTextDocumentUnsafe(e);if(!i)throw new V7.ResponseError(an.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await cE(t,e,i.getText());if(o.status==="invalid")throw t.get(po).setInactive(o.reason),new V7.ResponseError(an.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(_lr(t,i,e.version),Tu.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new V7.ResponseError(an.ContentModified,"Document Version Mismatch");return i}s(Xg,"getTextDocument");async function PC(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await Xg(t,n,r)}catch(i){if(i instanceof V7.ResponseError&&i.code===an.CopilotNotAvailable)return;throw i}}s(PC,"getTextDocumentIfAvailable");var Slr=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),Rlr=I.Object({turnId:LR,codeBlockIndex:I.Number(),source:Slr,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(Yre),textDocument:I.Optional(gf),position:I.Optional(xl),conversationSource:I.Optional(rh)});async function klr(t,e,r){let n=await PC(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=hI(r.conversationSource),c=await lc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Md(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a},i,`${Sl(a)}.acceptedCopy`,c),["OK",null]}s(klr,"handleConversationCodeCopyChecked");var Zct=at(Rlr,klr);d();var Plr=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),Blr=I.Object({turnId:LR,source:Plr,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(Yre),textDocument:I.Optional(gf),position:I.Optional(xl),conversationSource:I.Optional(rh)});async function Dlr(t,e,r){let n=await PC(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=hI(r.conversationSource),c=await lc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Md(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full"},i,`${Sl(a)}.acceptedInsert`,c),["OK",null]}s(Dlr,"handleConversationCodeInsertChecked");var elt=at(Blr,Dlr);d();d();var nne=I.Array(nc);function ine(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(ine,"resolveAsActiveEditor");d();var tlt=Ne(Lc());var one=new tlt.ProgressType,pTe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(vr).connection.sendProgress(one,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(vr).connection.sendProgress(one,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(vr).connection.sendProgress(one,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(vr).connection.sendProgress(one,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function $D(t){return new pTe(t.workDoneToken)}s($D,"createProgressHandler");d();d();d();var wu=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};d();var lv=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};d();var zD=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};d();d();var rlt="```",$7=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,Nlr=String.raw`${rlt}[\w]*?\n(?<codeblock>[\s\S]*?)\n${rlt}`,Llr=new RegExp($7+`
`+Nlr,"gs"),mTe=["replace","delete"];function hTe(t,e){let r=t.matchAll(Llr),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!mTe.includes(a.mode))continue;let c=a.start?parseInt(a.start)-1:-1,l=a.end?parseInt(a.end)-1:c,f=a.codeblock.split(`
`),p=f[0].match(/^\s*/)?.[0]??"";f.forEach((y,E)=>{f[E]=y.slice(p.length)});let m={mode:a.mode,codeblock:f.join(`
`),start:c,end:l},h=gTe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(hTe,"extractEditsFromTaggedCodeblocks");function gTe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,c=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let l=r[i].match(/^\s*/)?.[0]??"";c.forEach((u,f)=>{c[f]=l+u}),r.splice(i,o-i+1,...c)}}}return r.join(`
`)}s(gTe,"applyEditsToDocument");d();d();d();d();var uv=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new sp({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var Mlr=new wt("activeEditorPrompt");async function nlt(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new mc;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&Flr(n.selection)){let o=new uv(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Oi(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new uv(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new uv(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Oi(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new uv(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else Mlr.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(nlt,"processActiveEditor");function Flr(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(Flr,"notEmptySelection");d();d();function ilt(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(ilt,"partsLength");async function slt(t,e=1/0,r){let n=olt(0,t,e),i=e-ilt(n);for(;;){let o=!1,a=[];for(let c of n)if(c.type==="text")a.push(c);else if(c.type==="dir"){a.push({type:"text",uri:c.uri,value:c.value});let l=await c.getChildren();if(r?.isCancellationRequested)return Olr();let u=olt(c.level+1,l,i-1);u.length&&(o=!0,i-=ilt(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(slt,"visualFileTree");function olt(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let c=e[a],l=n+c.name+(c.type===2?"/":"");if(l.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}c.type===2?i.push({type:"dir",uri:c.uri,level:t,value:l,getChildren:c.getChildren}):i.push({type:"text",uri:c.uri,value:l}),o-=l.length,a!==e.length-1&&(o-=1)}return i}s(olt,"toParts");var Olr=s(()=>({tree:"",files:[]}),"emptyTree");var Qlr=new wt("fileReferencesPrompt");async function alt(t,e,r,n){let i=await clt(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:c,tree:l}of i){o+=`${c}/
`;for(let u of l.tree.split(`
`))o+=`	${u}
`}}let a=JB(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(alt,"generateWorkspaceStructurePrompt");async function clt(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,c=await slt(await llt(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:c}})):[]}s(clt,"generateWorkspaceStructure");async function llt(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(ko).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let c=$o(e,o);return r.excludeDotFiles&&o.startsWith(".")||Hlr(c)?null:a&2?{type:2,uri:c,name:o,getChildren:s(()=>llt(t,c,r,n),"getChildren")}:{type:1,uri:c,name:o}})).then(o=>o.filter(a=>a!=null)))}s(llt,"buildFileList");var Ulr=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],qlr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function Hlr(t){return!!(qlr.includes(Oi(t).toLowerCase())||Os(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>Ulr.includes(r)))}s(Hlr,"shouldAlwaysIgnoreFile");async function sne(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Oi(a.uri)})),i=await clt(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:c,tree:l}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${La(c)})`),o.push(l.tree),o.push("</attachment>");return o}catch(n){return Qlr.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(sne,"processDirectoryReferences");var Wlr=new wt("fileReferencesPrompt");async function ult(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,c,l]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new mc;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new uv(h,void 0,[]);g&&m.push(...g.render())}else Wlr.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),nlt(t,e),sne(t.context,e,n)]),u=a.flat(),f=l||[];return u.length>0||c.length>0||f.length>0?["<attachments>",...u,...c,...f,"</attachments>"]:[]}s(ult,"processFileReferences");var dlt=new wt("editAgentPrompt"),ane=class{constructor(e,r){this._toolsService=e;this.props=r;this.ctx=r.turnContext.ctx,this.turnContext=r.turnContext,this.currentTurn=r.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let r=this.turnContext.conversation.turns.slice(0,-1),n=this.createChatMessagesFromHistory(r),i=dve(this.currentTurn.response?.message,!0),o=await uC.appendToUserMessage(this.ctx,this.props.workspaceFolders,Jr(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...n,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return SO(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(c=>c.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:op(n.request.message)}),n.response){let i=dve(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.find(c=>c.role==="tool"&&c.tool_call_id===o.id)?i.push(o):dlt.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.currentTurn.response?this.currentTurn.response.message=RO(this.currentTurn.response.message,n):this.currentTurn.response={message:[n],type:"model"}}addToolCallResult(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+b7(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(xZ(this.currentTurn.response.message)&&this.currentTurn.response.message.find(c=>c.role==="tool"&&c.tool_call_id===r)){dlt.info(this.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=RO(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,r=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${n?"or replace_string_in_file":""} tool instead.`),r&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),r&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),n?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${n?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${n?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${r?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${ol}`),o.push("changed code"),o.push(`// ${ol}`),o.push("changed code"),o.push(`// ${ol}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${ol}`),o.push("	age: number;"),o.push(`	// ${ol}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,r){let n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await ult({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},r);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(r)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${ol}\` to represent regions of unchanged code.`),n&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${Os(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await alt(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};var flt=15,plt=128,YD=new wt("toolCallingLoop"),cne=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(Js),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(id),this.prompt=new ane(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new ME(this.turnContext.ctx)}),this.requestId=cr(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n);let i=performance.now(),o=await this.runOne(r,e);if(MWe(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=await this.prompt.render(r),i="",o=new kT((u,f,p,m)=>{let h=u.trim().match($7)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:f,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...f??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let c={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(c),YD.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(c,null,2)}`);let l=await this.chatFetcher.fetchResponse(c,r,this.baseTelemetryWithExp,(u,f)=>o.isFinishedAfter(u,f));return this.processChatFetchResult(e,l,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),YD.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new wu({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new mc;case"failed":throw this.turn.status="error",new wu({message:lT.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new wu({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new wu({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new wu({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new wu({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new wu({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new wu({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new wu({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new wu({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(c=>{if(!c.id){let l=`cls_${t.NextToolCallId++}`;c.id=l}return c});this.prompt.addToolCallModelResponse(r,a);for(let c of a)await this.handleSingleToolCall(c,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(c=>({id:c.id,name:c.function.name,arguments:JSON.stringify(c.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),c="success";try{let l=nT(e),u=this.toolsService.prepareInvocation(o.id,{input:l},i),f=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,f,o.id,l,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:l,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=Cst(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=Tte(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.prompt.addToolCallResult(p,e.id)}catch(l){if(l instanceof lv||l instanceof mc)throw this.turn.status="cancelled",c="cancelled",this.prompt.addToolCallResult(new oo([new Bi("")],"cancelled"),e.id),new lv(l.message);{YD.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${dE(l)}`,l),c="error";let u=new oo([new Bi(dE(l).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let f=Tte(u);await this.turnContext.agentToolCalls.error(n,e.id,f.message)}}finally{let l=performance.now()-a;FWe(this.turnContext.ctx,this.turnContext,o,e.id,n,l,c,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;YD.error(this.turnContext.ctx,a);let c=new oo([new Bi(a)],"error");this.prompt.addToolCallResult(c,e.id);let l=Tte(c);await this.turnContext.agentToolCalls.error(n,e.id,l.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new mc}async requestToolInvocationApproval(e,r,n,i,o,a,c,l){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:c},l);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new lv("Cancelled by user");case"accept":return Promise.resolve();default:throw new lv(`Invalid confirmation result ${u.result}`)}}else YD.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>flt)throw YD.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${flt} for turn ${this.turn.id}`),new zD}checkChatPayload(e){if(e.messages.length===0)throw new wu({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>plt)throw new wu({message:`You may not include more than ${plt} tools in your request.`,responseIsFiltered:!1})}};var lne=new wt("agenticTurnProcessor"),une=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Js),this.chatFetcher=this.chatFetcher??new ka(e.ctx),this.turnSuggestions=new GD(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o)}catch(a){Or.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let c=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(c),await this.endProgress({error:{message:c,code:Wbe.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let c=await lc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{lne.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let l=await Fo.getModelConfiguration(this.turnContext.ctx,"edits",a);await new cne(this.turnContext,this.chatFetcher,l,c).run(r);let f={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let p=await this.fetchSuggestedTitle(r,c.extendedBy({messageSource:"chat.user"},{}));typeof p=="string"&&p!==""&&(f.suggestedTitle=p)}await this.endProgress(f)}catch(l){if(l instanceof lv)lne.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,l),this.turn.status="cancelled",await this.cancelProgress();else if(l instanceof mc)lne.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,l),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(l instanceof zD)this.turn.status="error",this.updateTurnResponseWithError(l.message),await this.endProgress({error:{message:l.message,code:Wbe.ToolRoundExceedError,responseIsIncomplete:!0}});else if(l instanceof wu)this.turn.status="error",this.updateTurnResponseWithError(l.message),await this.endProgress({error:l.conversationError});else throw lne.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,l),l}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return Or.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=RO(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var ATe="collect-context",yTe="generate-response",dne=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Js),this.chatFetcher=this.chatFetcher??new ka(e.ctx),this.postProcessor=new jD(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModel(e,r,this.turnContext,n,i,o)}catch(a){Or.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let c=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:c,type:"meta"},await this.endProgress({error:{message:c,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let c=await lc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let l=L7().find(m=>m.id===this.turn.template?.templateId);if(l?.response){await this.handleTemplateResponse(l,this.turn.template.userQuestion,r);return}let u=(await SC(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await n.steps.start(ATe,"Collecting context"),await this.collectContext(n,r,c,this.strategy.uiKind,l,u);let f=a?(await this.turnContext.ctx.get(Pa).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,f);if(!p)await n.steps.error(ATe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(ATe),await n.steps.start(yTe,"Generating response");let m=this.augmentTelemetry(p,c,l,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,r,c.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,n),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Or.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let l=await new Lre(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=l.skillIds.map(u=>({skillId:u})),l}async fetchConversationResponse(e,r,n,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let c="",l=0,u=new kT((h,g,y,E)=>{let x=h.trim().match($7)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:h,annotations:g,references:y,hideText:x,notifications:E.map(b=>({severity:"warning",message:b.message}))}),this.turn.response?this.turn.response.message=Jre(this.turn.response.message,h):this.turn.response={message:h,type:"model"},this.turn.annotations.push(...g??[]),c+=h,this.strategy.currentDocument){let b=this.strategy.extractEditsFromResponse(c,this.strategy.currentDocument);b&&b.length>0&&(c="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:b}),l+=b.length)}}),f=await Fo.getModelConfiguration(this.turnContext.ctx,"user",a);e=Fo.transformMessages(e,f.modelFamily);let p={modelConfiguration:f,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:Jr(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(p,r,n,(h,g)=>u.isFinishedAfter(h,g));return i=i.extendedBy(void 0,{numCodeEdits:l}),await this.postProcessor.postProcess(m,r,u.appliedText,n,i,Jr(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",PWe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,Jr(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=HM(this.conversation,this.strategy.uiKind,Jr(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=HM(this.conversation,this.strategy.uiKind,Jr(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(yTe,e.error.message):await r.steps.finish(yTe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var fne=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await Fo.getModelConfiguration(e.ctx,o),c={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(Iu).toPrompt(e,c)}extractEditsFromResponse(e,r){return[]}},pne=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",c=await e.ctx.get(Pa).getBestChatModelConfig(cm(a)),l={promptType:a,modelConfiguration:c,languageId:r};return l.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(Iu).toPrompt(e,l)}async processResponse(e){let r=[],n=Jr(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(od);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(hn).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=hTe(e,r).filter(a=>mTe.includes(a.mode)),o=gTe(i,r);if(o)return await this.ctx.get(Hc).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return hTe(e,r)}};d();d();var mlt=Ne(Lc()),hlt=Ne(lg());var zd=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new mlt.ProtocolRequestType("conversation/context");this.typeCheck=Ms.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(vr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,c]=o;if(c){let l=new hlt.ResponseError(c.code,c.message,c.data);Or.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,l);return}i=a}catch(o){Or.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new xu(this.typeCheck.Errors(i));return i}}};var CTe=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},dv=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let c=new CTe(e,r,n,i,o,a);return this.turns.push(c),c}get(e){return this.turns.find(r=>r.progressToken===e)}},mne=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(Js)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Or.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(Wi).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let c=await new zd(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);c&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:c.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await wy(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:cr()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var fv=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(dv).get(r);if(i)return new mne(e,i);let a=(await SC(e.ctx)).find(l=>l.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let c;return e.conversation.source==="inline"?c=new pne(e.ctx):c=new fne(e.ctx),n!==void 0&&(c.computeSuggestions=n),e.turn.chatMode==="Agent"?new une(e,c):new dne(e,c)}};d();var glt=Ne(Lc());var KD=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new glt.ResponseError(an.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};d();function hne(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Oi(t.uri)}]}s(hne,"resolveAsWorkspaceFolders");d();d();var Glr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),t0=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?Glr(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var Yd=class{constructor(){this.tokens=new Fr(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new fn.CancellationTokenSource,i=new t0([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var jlr=I.Object({conversationId:I.Optional(zre),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(Kct,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(gf),textDocument:I.Optional(gf),selection:I.Optional(nc),visibleRanges:I.Optional(nne),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(VD)),source:I.Optional(rh),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(Zre)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(Xre),needToolCallConfirmation:I.Optional(I.Boolean())});async function Vlr(t,e,r){KD.validate(r.workspaceFolders);let n=await PC(t,r,e),i=t.get(Wi).create(r);await $lr(t,i,r,n);let o=i.turns[i.turns.length-1],a=$D(r),c=t.get(Yd).add(a.progressToken,e),l=new OT(t,i,o,c);return await(await t.get(fv).createProcessor(l,a.progressToken,r.computeSuggestions)).process(a,c,void 0,n,r.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model},null]}s(Vlr,"handleConversationCreateChecked");async function $lr(t,e,r,n){for(let i of r.turns){let o=Kre(i.request),a=new PT({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=ere(r.chatMode),a.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,l=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:hne(c),u=ine({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(Wi).addTurn(e.id,a,r.references,u,c,l,r.ignoredSkills,void 0)}}s($lr,"addTurns");var Alt=at(jlr,Vlr);d();var zlr=I.Object({conversationId:I.String()});function Ylr(t,e,r){return t.get(Wi).destroy(r.conversationId),["OK",null]}s(Ylr,"handleConversationDestroyChecked");var ylt=at(zlr,Ylr);d();var Klr=I.Object({turnId:I.String(),acceptedFileCount:I.Number({minimum:0}),totalFileCount:I.Number({minimum:1})}),Jlr=new wt("conversationNotifyCodeAcceptance");async function Xlr(t,e,r){let n=t.get(Wi).findByTurnId(r.turnId);if(!n)return Jlr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let i=await lc(t,n,{languageId:""});return Md(t,void 0,{},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${Sl("agentPanel")}.codeAcceptance`,i),["OK",null]}s(Xlr,"handleConversationNotifyCodeAcceptanceChecked");var Clt=at(Klr,Xlr);d();var Zlr=I.Object({});function eur(t,e,r){return[{path:t.get(fu).directory},null]}s(eur,"handleConversationPersistenceChecked");var Elt=at(Zlr,eur);d();d();var xlt=Ne(require("node:events"));var ETe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(Dn).getSession(),n=e.get(bl);return r&&r.githubAppId&&r.githubAppId!==$h?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},vTe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(jr).getToken()).envelope.chat_enabled?"ok":"failed"}}},tur=[new ETe,new vTe],vlt="onPreconditionsChanged",nh=class{constructor(e,r=tur){this.ctx=e;this.checks=r;this.emitter=new xlt.default;ia(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emit(n),n}onChange(e){this.emitter.on(vlt,e)}emit(e){this.emitter.emit(vlt,e)}};var rur=I.Object({forceCheck:I.Optional(I.Boolean())});async function nur(t,e,r){let n=r.forceCheck??!1;return[await t.get(nh).check(n),null]}s(nur,"handleConversationPreconditionsChecked");var blt=at(rur,nur);d();var iur=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(gf),textDocument:I.Optional(gf),source:I.Optional(rh)});async function our(t,e,r){let n=await PC(t,r,e),i=hI(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await lc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Md(t,n,{rating:o,uiKind:i},{},`${Sl(i)}.messageRating`,a),["OK",null]}s(our,"handleConversationRatingChecked");var Ilt=at(iur,our);d();d();var gne=class extends ST{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:CC,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(iT).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new mc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(rC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var sur=I.Object({tools:I.Array(Jct)});function aur(t,e,r){return r.tools.forEach(n=>{t.get(id).registerTool(new gne({name:n.name,description:n.description,inputSchema:n.inputSchema,confirmationMessages:n.confirmationMessages}))}),["OK",null]}s(aur,"conversationRegisterToolsChecked");var Tlt=at(sur,aur);d();var cur=I.Object({});function lur(t,e,r){return[BIe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(lur,"handleConversationTemplatesChecked");var wlt=at(cur,lur);d();var uur=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:zre,turnId:I.Optional(LR),message:uTe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(gf),textDocument:I.Optional(gf),selection:I.Optional(nc),visibleRanges:I.Optional(nne),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(VD)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(Zre)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:dnt,model:I.Optional(I.String()),chatMode:I.Optional(Xre),needToolCallConfirmation:I.Optional(I.Boolean())});async function dur(t,e,r){KD.validate(r.workspaceFolders);let n=await PC(t,r,e),i=t.get(Wi),o=i.get(r.conversationId),a=Kre(r.message),c=new PT({message:a,type:"user"},r.turnId);c.chatMode=ere(r.chatMode),c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:hne(l),f=ine({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});c=await i.addTurn(o.id,c,r.references,f,l,u,r.ignoredSkills,r.confirmationResponse);let p=$D(r),m=t.get(Yd).add(p.progressToken,e),h=new OT(t,o,c,m);return await(await t.get(fv).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model),[{conversationId:o.id,turnId:c.id,agentSlug:c.agent?.agentSlug,modelFamily:r.model},null]}s(dur,"handleConversationTurnChecked");var _lt=at(uur,dur);d();var fur=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(rh)});async function pur(t,e,r){t.get(Wi).deleteTurn(r.conversationId,r.turnId);let i=hI(r.source),o=await lc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:""});return Md(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${Sl(i)}.messageDelete`,o),["OK",null]}s(pur,"handleConversationTurnDeleteChecked");var Slt=at(fur,pur);d();var mur=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function hur(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(hur,"buildSystemMessage");function gur(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,c)=>{let l=t.selection.start.line+c+1;return`/* ${l>n&&l<i?"Selected ":""}Line ${l} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(gur,"buildUserMessage");function Aur(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,c,l,u,f,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(f.toLowerCase()))continue;let h=parseInt(l)-1;if(h<0||h>=n.length)continue;let g=n[h],y=Math.max(g.search(/\S/),0),E=g.trimEnd().length,x={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:E}},message:m.trim(),kind:f.toLowerCase(),severity:p.toLowerCase()};r.push(x)}return r}s(Aur,"parseReviewComments");async function yur(t,e,r){if(!r.document.text)return[null,{code:an.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:an.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:an.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:an.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:an.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(ka),o=await Fo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:hur()},{role:"user",content:gur(r)}],c=await t.get(Bt).updateExPValuesAndAssignments(),l=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:e0.user("code-review",cr())},e,c);if(l.type!=="success")return[null,{code:an.InternalError,message:"Failed to generate code review"}];let u=Aur(r.document,l.value);return u.sort((f,p)=>f.range.start.line-p.range.start.line),[{comments:u},null]}s(yur,"handleCopilotCodeReviewChecked");var Rlt=at(mur,yur);d();d();var QT=class{constructor(e,r,n,i,o){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of n.workingSet)this.workingSetUriToPathMap.set(a.uri,UE.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return e0.user("conversation-edit-panel",this.editTurnId)}};d();async function Ane(t,e,r,n){let o=t.get(Uc).create("panel","en"),a=new uT({message:"",type:"user"},[]),c="file:///path/to/HelloWorld.java",l=new QT(t,o,a,n,mn.Gpt4o),u=t.get(vu);await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${c})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:c}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:c,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let f="file:///path/to/HelloWorld.py";await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${f})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:f}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:f,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(Ane,"streamMockedResult");d();var Cur=I.Object({enableMock:I.Boolean()}),BC=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function Eur(t,e,r){return t.get(BC).setMockEnabled(r.enableMock),["OK",null]}s(Eur,"handleTestingSetCopilotEditsResponseChecked");var klt=at(Cur,Eur);var vur=I.Object({request:I.String(),response:I.Optional(I.String())}),xur=I.Union([I.Literal("panel")]),bur=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(vur,{minItems:1}),workingSet:I.Optional(I.Array(W7)),source:I.Optional(xur),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function Iur(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new uT({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(Iur,"buildEditConversation");async function Tur(t,e,r){if(t.get(BC).isMockEnabled())return await Ane(t,cr(),cr(),r.partialResultToken),[[],null];let n=Iur(t.get(Uc),r),i=n.getLastTurn(),o=new QT(t,n,i,r.partialResultToken,r.model),a=t.get(Yd).add(r.partialResultToken,e);return[await t.get(qE).createOrContinueEditConversation(o,a),null]}s(Tur,"handleEditConversationCreateChecked");var Plt=at(bur,Tur);d();var wur=I.Object({editConversationId:I.String()});function _ur(t,e,r){return t.get(Uc).destroy(r.editConversationId),["OK",null]}s(_ur,"handleEditConversationDestroyChecked");var Blt=at(wur,_ur);d();var Sur=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(W7)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function Rur(t,e,r){let n=t.get(e),i=new uT({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(Rur,"buildEditConversation");async function kur(t,e,r){if(t.get(BC).isMockEnabled())return await Ane(t,r.editConversationId,cr(),r.partialResultToken),[[],null];let n=t.get(Uc),i=Rur(n,r.editConversationId,r),o=i.getLastTurn(),a=new QT(t,i,o,r.partialResultToken,r.model),c=t.get(Yd).add(r.partialResultToken,e);return[await t.get(qE).createOrContinueEditConversation(a,c),null]}s(kur,"handleEditConversationTurnChecked");var Dlt=at(Sur,kur);d();var Pur=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(rh)});async function Bur(t,e,r){t.get(Uc).deleteTurn(r.editConversationId,r.editTurnId);let i=await qM(t,r.editTurnId,r.editConversationId,{languageId:""});return Md(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Sl("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(Bur,"handleEditConversationTurnDeleteChecked");var Nlt=at(Pur,Bur);d();var Dur=I.Object({}),Nur=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(qO)}))}))});function Lur(t,e,r){return[t.get(Ym).getAllTools(),null]}s(Lur,"handleGetMCPToolsChecked");function Mur(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:c}of o)t.get(Ym).updateMCPToolStatus(i,a,c);return[t.get(Ym).getAllTools(),null]}s(Mur,"handleUpdateMCPToolsStatusChecked");var Llt=at(Dur,Lur),Mlt=at(Nur,Mur);d();var Fur=I.Object({});async function Our(t,e,r){let n=await t.get(jr).getToken();return[Qur(await t.get(kd).getMetadata(),n),null]}s(Our,"handleCopilotModelsChecked");function Qur(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=um.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!pOe.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(Qur,"filterModels");var Flt=at(Fur,Our);d();var Uur=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function qur(t,e,r){return r.model&&r.status==="enabled"?await t.get(kd).acceptModelPolicy(r.model)?["OK",null]:[null,{code:an.InternalError,message:"Failed to accept model policy"}]:[null,{code:an.InvalidRequest,message:"Invalid model or status"}]}s(qur,"handleCopilotModelsPolicyChecked");var Olt=at(Uur,qur);d();d();d();d();function Hur(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(Hur,"panelPositionForDocument");async function*Qlt(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(Qlt,"trimChoices");var JD=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=Hur(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function xTe(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await xTe(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(xTe,"reportSolutions");async function bTe(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:bTe(t,e)}}s(bTe,"generateSolutionsStream");function yne(t){return t.replace(/\s+/g,"")}s(yne,"normalizeCompletionText");async function Ult(t,e,r,n){let i=e.targetPosition,o=e.textDocument,a=Kb(t,o.uri),c=cr(),l=dn.createAndMarkAsIssued({headerRequestId:c,languageId:o.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Bt).updateExPValuesAndAssignments({uri:o.uri,languageId:o.detectedLanguageId},l);let u=await P3(t,c,By(o,i),e.savedTelemetryData);if(u.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(u.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(u.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(u.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(u.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let f=u.prompt,p=u.trailingWs;return p.length>0&&(e.startPosition=ns.position(e.startPosition.line,e.startPosition.character-p.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...T4(f),solutionCount:e.solutionCountTarget,promptEndPos:o.offsetAt(i)}),n.debug(t,"prompt:",f),Dt(t,"solution.requested",e.savedTelemetryData),{prompt:f,trailingWs:p,telemetryData:e.savedTelemetryData,repoInfo:a,ourRequestId:c}}s(Ult,"setupPromptAndTelemetry");function qlt(t,e,r,n,i,o){let a=t.get(og).forLanguage(t,e.detectedLanguageId,o),c=O0(e.detectedLanguageId),l=NY(e,r),u={language:e.detectedLanguageId,next_indent:l.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},f={};a==="parsing"&&!c&&(f.stop=[`

`,`\r
\r
`]);let p=Yb(t,o),m;switch(a){case"server":m=s(()=>{},"finishedCb"),u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":m=c?jM(t,e,i.startPosition):()=>{},u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:m=c?jM(t,e,i.startPosition):()=>{};break}return{extra:u,postOptions:f,finishedCb:m,engineInfo:p}}s(qlt,"setupCompletionParams");var ITe=new wt("solutions");async function Wur(t,e){let r=e.targetPosition,n=e.textDocument,i=await Ult(t,e,"open copilot",ITe);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:c,repoInfo:l,ourRequestId:u}=i,{extra:f,postOptions:p,finishedCb:m,engineInfo:h}=qlt(t,n,r,o,e,c),g=e.cancellationToken,y={prompt:o,languageId:n.detectedLanguageId,repoInfo:l,ourRequestId:u,engineModelId:h.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:h.headers,extra:f},E=await t.get(Df).fetchAndStreamCompletions(t,y,c.extendedBy(),m,g);if(E.type==="failed"||E.type==="canceled")return{status:"FinishedWithError",error:`${E.type}: ${E.reason}`};let x=E.choices;x=Qlt(x),x=UM(x,k=>nF(t,n,r,k,!1,ITe));let b=UM(x,async k=>{let P=k.completionText;ITe.info(t,`Open Copilot completion: [${k.completionText}]`);let N=await yGe(t,n,r,k.completionText)??ns.position(r.line,0),[M]=k3(n.getText(ns.range(N,r)));P=M+P;let J=k.completionText;a.length>0&&J.startsWith(a)&&(J=J.substring(a.length));let se=k.meanLogProb,K=se!==void 0?Math.exp(se):0,G=c.extendedBy({choiceIndex:k.choiceIndex.toString()});return{completionText:J,insertText:P,range:ns.range(N,r),meanProb:K,meanLogProb:se||0,requestId:k.requestId,choiceIndex:k.choiceIndex,telemetryData:G,copilotAnnotations:k.copilotAnnotations}});return bTe(g,b[Symbol.asyncIterator]())}s(Wur,"launchSolutions");async function Cne(t,e,r){return t.get(po).withProgress(async()=>{let i=Wur(t,e);return await xTe(i,r)})}s(Cne,"runSolutions");var Wlt=Ne(Gx()),Y7=Ne(Lc());d();d();function Ene(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let c=o.indexOf("^");if(c!==-1){let l=o.indexOf("^",c+1);if(l===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,c)+o.substring(c+1,l)+o.substring(l+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+l-c-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(Ene,"parseChallengeDoc");var Gur=I.Object({text:I.String(),score:I.Number()}),jur=I.Object({documents:I.Array(Gur),options:I.Optional(I.Object({}))});async function vne(t,e,r){let n=cr();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:c,lines:l,start:u}=Ene(o,t),f=[c.slice(Math.min(u.character,t.character))].concat(l.slice(t.line+1)).join(`
`);r.offset=l.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:f,insertText:f,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:ZA.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(vne,"runTestSolutions");var Zg=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function Vur(t,e,r){return t.forceSet(Zg,new Zg(r.documents)),["OK",null]}s(Vur,"handleTestingSetPanelCompletionDocumentsChecked");var Hlt=at(jur,Vur);var Glt=PW.type;function $ur(t,e,r,n,i){let o=yne(n.completionText),a=(0,Wlt.SHA256)(o).toString();return t.get(_s).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:a}),{range:n.range,insertText:n.insertText,command:{command:Ube,title:`Accept completion ${i}`,arguments:[a]}}}s($ur,"makeCompletion");function wTe(t,e){return`${t}/${e}`}s(wTe,"progressMessage");var TTe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(vr)}async onSolution(e){this.count+=1;let r=$ur(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(Y7.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:wTe(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return zur(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(Y7.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function zur(t,e,r=0){t!==void 0&&await e.connection.sendProgress(Y7.WorkDoneProgress.type,t,{kind:"end",message:wTe(r,10)})}s(zur,"reportDone");var z7;async function Yur(t,e,r){let n=await Xg(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(vr).connection.sendProgress(Y7.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:wTe(0,10),percentage:0});let o=[],a=s(f=>(o.push(f),Promise.resolve()),"onCompletion"),c=r.partialResultToken;c!==void 0&&(a=s(async f=>{await t.get(vr).connection.sendProgress(PW.partialResult,c,{items:[f]})},"onCompletion"));let l=new TTe(t,r,a),u=t.get(Zg);if(u.documents){let f=u.documents;await vne(i,f,l)}else{l.offset=n.offsetAt(i);let f=new JD(n,i,e,10);await Cne(t,f,l)}return l.error!==void 0?[null,{code:an.InternalError,message:l.error}]:[{items:o},null]}s(Yur,"handleChecked");async function Kur(t,e,r){z7&&(z7.cancel(),z7.dispose()),z7=new fn.CancellationTokenSource;let n=z7.token,i=new t0([e,n]);try{return await Yur(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:an.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(Kur,"handleCheckedWithAbort");var jlt=at(GBe,Kur);d();d();d();function Xur(t,e,r){let{apiUrl:n,serverUrl:i}=r||t.get(vd).getConfiguredUrls(),o=new URL("login/device",i).href,a=new URL("_ping",e.proxy).href,c=new URL("_ping",e.api).href,l=new URL("_ping",e.telemetry).href;function u(f){return new URL(f).host}return s(u,"label"),[{label:u(o),url:o},{label:u(n),url:n,session:r},{label:u(a),url:a},{label:u(c),url:c,session:r},{label:u(l),url:l}]}s(Xur,"urlsToCheck");async function Vlt(t,e,r=MW(t),n,i){let o=Xur(t,r,n).map(async({label:a,url:c,session:l})=>{let{message:u,status:f}=await Zur(e,c,l,i);return{label:a,url:c,message:u,status:f}});return await Promise.all(o)}s(Vlt,"checkReachability");async function Zur(t,e,r,n){try{let i=new AbortController;n?.onCancellationRequested(()=>i.abort());let o=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:i.signal}),a=o.status>=200&&o.status<400?"reachable":"unreachable";return{message:`HTTP ${o.status}`+(o.statusText?` - ${o.statusText}`:""),status:a}}catch(i){return{message:String(i),status:"unreachable"}}}s(Zur,"determineReachability");var gp=Ne(require("os")),XD=Ne(require("tls"));async function zlt(t,e){let r=await t.get(ai).getImplementation(),n=await t.get(jr).getGitHubSession(),i=await t.get(jr).getToken().catch(()=>{});return{sections:[tdr(t),edr(t,n),rdr(t,r),await ndr(t,r,i?.endpoints,n,e)]}}s(zlt,"collectDiagnostics");function Ylt(t){return t.sections.map(idr).join(gp.EOL+gp.EOL)+gp.EOL}s(Ylt,"formatDiagnosticsAsMarkdown");function edr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:E_(t),"GitHub Account":n,"Session ID":t.get(gs).sessionId,"Send Restricted Telemetry":w4(t)?"enabled":"disabled","Content Exclusion":t.get(_l).enabled?"enabled":"unavailable"}}}s(edr,"collectCopilotSection");function tdr(t){let e={Plugin:sdr(t),Editor:odr(t),"Operating System":`${gp.type()} ${gp.release()} (${gp.arch()})`};return DC(e,"NODE_OPTIONS"),{name:"Environment",items:e}}s(tdr,"collectEnvironmentSection");function rdr(t,e){let r=t.get(ru).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":XD.rootCertificates.length,"TLS Default Min Version":XD.DEFAULT_MIN_VERSION,"TLS Default Max Version":XD.DEFAULT_MAX_VERSION};return DC(n,"http_proxy"),DC(n,"https_proxy"),DC(n,"no_proxy"),DC(n,"SSL_CERT_FILE"),DC(n,"SSL_CERT_DIR"),DC(n,"OPENSSL_CONF"),DC(n,"NODE_EXTRA_CA_CERTS"),DC(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}s(rdr,"collectNetworkConfigSection");async function ndr(t,e,r,n,i){return{name:"Reachability",items:Object.fromEntries((await Vlt(t,e,r,n,i)).map(({label:a,message:c})=>[a,c]))}}s(ndr,"collectReachabilitySection");function $lt(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}s($lt,"quoteCode");function DC(t,e){let r=process.env[e];r&&(t[$lt(e)]=$lt(r)),r!==process.env[e.toUpperCase()]&&DC(t,e.toUpperCase())}s(DC,"addEnvironmentVariable");function idr(t){return`## ${t.name}`+gp.EOL+gp.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(gp.EOL)}s(idr,"formatSectionAsMarkdown");function odr(t){let e=t.get(rn).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}s(odr,"getEditorDisplayVersion");function sdr(t){let e=t.get(rn).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}s(sdr,"getPluginDisplayVersion");var adr=I.Object({});async function cdr(t,e){return[{report:Ylt(await zlt(t,e))},null]}s(cdr,"handleDiagnosticsChecked");var Klt=at(adr,cdr);d();d();d();d();function Jlt(t,e,r){function n(o,a,c){let l=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let f=u.replace(l,""),p=u.length-f.length;return c(p)+f}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",c=>"	".repeat(Math.floor(c/i))+" ".repeat(c%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",c=>" ".repeat(c*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(c=>{if(c==="")return c;let l=c.split(`
`)[0],u=l.length-l.trimStart().length,f=u%i;if(f!==0&&u>0){let p=" ".repeat(f);return n(c,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return c},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(Jlt,"normalizeIndentCharacter");function Xlt(t,e,r,n,i,o,a){let c=n.lineAt(i),l=e.map(u=>{let f=ns.range(ns.position(i.line,0),ns.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=Jlt(o,u.completion,c.isEmptyOrWhitespace)),c.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(c.text)))p=u.completion.completionText;else{let h=ns.range(f.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:cr(),insertText:p,range:f,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(r===2&&a!==void 0){let u=l.find(f=>f.index===a);if(u){let f=l.filter(p=>p.index!==a);l=[u,...f]}}return l}s(Xlt,"completionsFromGhostTextResults");async function _Te(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await AAe(t,e,r,n);if(o.type!=="success")return o;let[a,c]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let l=rVe(t,e.textDocument,e.position,c),u=Xlt(t,a,c,e.textDocument,e.position,n.formattingOptions,l);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let f=t.get(Bt),p=(vi(t,Rt.AlwaysRequestMultiline)??f.enableProgressiveReveal(o.telemetryBlob))&&_y.isSupported(e.textDocument.detectedLanguageId),m=vi(t,Rt.EnableSpeculativeRequests),h=f.enableSpeculativeRequests(o.telemetryBlob),g=p||(m??h),y=vi(t,Rt.EnableSpeculativeRequestsShown)??f.enableSpeculativeRequestsShown(o.telemetryBlob);if(g&&c!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let x={isSpeculative:!0,opportunityId:n.opportunityId},b=s(()=>AAe(t,e,void 0,x),"fn");y?t.get(wm).set(u[0].clientCompletionId,b):Promise.resolve().then(b)}let E=u.map(x=>{let{start:b,end:_}=x.range,k=fn.Range.create(b,fn.Position.create(_.line,_.character-i));return{...x,range:k}});return{...o,value:E}}s(_Te,"getInlineCompletionsResult");async function xne(t,e,r,n,i={}){ldr(t,e,r);let o=await _Te(t,By(e,r),n,i);return $We(t,o)}s(xne,"getInlineCompletions");function ldr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});xY.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(ldr,"logCompletionLocation");var iut=Ne(Lc());d();var Zlt=require("crypto");var ZD=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new RTe(e,this.id)}},RTe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(vr),o=(0,Zlt.randomUUID)(),a=i.connection.onProgress(SW.type,o,c=>{n.push(...c)});r.onCancellationRequested(()=>{a?.dispose()});try{let c=await i.connection.sendRequest(SW.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...c)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function e8(t,e,r){try{let n=t.get(uc),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof ZD&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof ZD&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){pn.error(t,"Failed to set context items on context providers",n)}}s(e8,"setContextItems");var STe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function eut(t,e,r){return e.map(i=>{try{if(typeof i=="string")return cc(r.uri,i,STe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=cc(r.uri,i.scheme||"",STe)),"pattern"in i&&(o&&=cc(r.uri,i.pattern||"",STe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(eut,"match");d();var udr=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),qT=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function ddr(t,e,r){return t.forceSet(qT,new qT(r.documents,r.basename||"")),["OK",null]}s(ddr,"handleTestingSetCompletionDocumentsChecked");var tut=new wt("setCompletionDocuments"),nut=at(udr,ddr);function bne(t,e,r,n){let i=t.get(qT);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){tut.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=fdr(i,r);return a&&a.length>0?rut(a,o,e):void 0}else return tut.debug(t,"Returning completions for all pre-set documents"),rut(i.documents,o,e)}}s(bne,"getTestCompletions");function rut(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:c}=Ene(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:c}}})}s(rut,"sliceAndMapCompletions");function fdr(t,e){return t.basename===Oi(e)?t.documents||[]:[]}s(fdr,"getFilteredDocs");var sut=I.Object({doc:I.Object({position:xl,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:Q6,version:I.Number()}),contextItems:I.Optional(Ege)}),K7;async function aut(t,e,r,n){K7&&(K7.cancel(),K7.dispose()),K7=new fn.CancellationTokenSource;let i=new t0([e,K7.token]);r.contextItems&&e8(t,r.contextItems);let o=bne(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:cr(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await Xg(t,r.doc,i)}catch(p){if(!(p instanceof iut.ResponseError))throw p;switch(p.code){case an.CopilotNotAvailable:case an.ContentModified:return[{completions:[]},null]}throw p}let c=r.doc.position,l=await xne(t,a,c,i,{isCycling:n,formattingOptions:r.doc});if(!l)return[{completions:[]},null];let u=t.get(_s);for(let p of l)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:l.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(aut,"handleGetCompletionsHelper");var cut=at(sut,(t,e,r)=>aut(t,e,r,!1)),lut=at(sut,(t,e,r)=>aut(t,e,r,!0));d();var uut=Ne(Gx()),t8=Ne(Lc());var pdr=I.Object({doc:I.Object({position:xl,uri:Q6,version:I.Number()}),panelId:I.String()});function mdr(t,e,r,n,i){let o=yne(i.completionText),a=(0,uut.SHA256)(o).toString();return t.get(_s).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(mdr,"makeSolution");var kTe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(vr)}onSolution(e){return this.service.connection.sendNotification(new t8.NotificationType("PanelSolution"),mdr(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return dut(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new t8.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function dut(t,e){return e.connection.sendNotification(new t8.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(dut,"reportDone");var J7;async function hdr(t,e,r){J7&&(J7.cancel(),J7.dispose()),J7=new fn.CancellationTokenSource;let n=new t0([e,J7.token]),i=r.doc.position,o=ns.range(i,i),a=new kTe(t,r,o),c=t.get(Zg);if(c.documents){let l=c.documents;vne(i,l,a)}else{let l;try{l=await Xg(t,r.doc,n)}catch(f){if(!(f instanceof t8.ResponseError))throw f;switch(f.code){case an.CopilotNotAvailable:case an.ContentModified:return gdr(t,r)}throw f}a.offset=l.offsetAt(i);let u=new JD(l,i,n,10);Cne(t,u,a)}return[{solutionCountTarget:10},null]}s(hdr,"handleGetPanelCompletionsChecked");async function gdr(t,e){return await dut(e.panelId,t.get(vr)),[{solutionCountTarget:0},null]}s(gdr,"produceEmptySolutions");var fut=at(pdr,hdr);d();var Adr=I.Object({});function ydr(t,e,r){return[{version:t.get(lo).getDisplayVersion(),buildType:ey(t),runtimeVersion:`node/${process.versions.node}`},null]}s(ydr,"handleGetVersionChecked");var put=at(Adr,ydr);d();var Cdr=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function Edr(t,e){let r=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&r.push(`
Current git branch name: ${e}`),t&&r.push(`
Respond in the following locale: ${t}`),r.join(`
`)}s(Edr,"buildSystemMessage");function vdr(t,e){let r=[];return t.userCommits.length>0&&r.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(n=>`- ${n}`).join(`
`),""),t.recentCommits.length>0&&r.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(n=>`- ${n}`).join(`
`),""),r.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&r.push("<custom-instructions>",e,"</custom-instructions>"),r.join(`
`)}s(vdr,"buildUserMessage");async function xdr(t,e,r){if(r.changes.length===0)return[null,{code:an.InvalidRequest,message:"No changes provided"}];let n=new ka(t),i=await Fo.getModelConfiguration(t,"gitCommit"),o=[{uri:r.workspaceFolder?r.workspaceFolder:Yc(process.cwd())}],a=await uC.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),c=t.get(Wi),l=c.create({capabilities:{skills:[TC]}}),u=new PT({message:"",type:"user"});await c.addTurn(l.id,u);let f=$D({workDoneToken:cr()});await t.get(Js).begin(l,u,f);let h=(await new OT(t,l,u,e).skillResolver.resolve(TC))?.head?.name,g=[{role:"system",content:await Edr(r.userLanguage,h)},{role:"user",content:vdr(r,a)}],y=await t.get(Bt).updateExPValuesAndAssignments(),E=await n.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:e0.user("git-commit",cr())},e,y);if(E.type!=="success")return[null,{code:an.InternalError,message:"Failed to generate commit message"}];let x=E.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:x?x[1].trim():E.value.trim()},null]}s(xdr,"handleGitCommitGenerateChecked");var mut=at(Cdr,xdr);d();var gut=Zle.type,X7;function hut(t){return{title:"Completion Accepted",command:_7,arguments:[t]}}s(hut,"makeCommand");async function bdr(t,e,r){X7&&(X7.cancel(),X7.dispose());let n=r.context.triggerKind===1;X7=new fn.CancellationTokenSource;let i=X7.token,o=new t0([e,i]);r.contextItems&&e8(t,r.contextItems,r.data);let a=bne(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:hut(cr()),...h}))},null];let c=await Xg(t,r.textDocument,o),l=r.position,u=await xne(t,c,l,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:an.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:an.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let f=t.get(_s);for(let m of u)f.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:hut(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(bdr,"handleChecked");var Aut=at(wY,(t,e,r)=>bdr(t,e,r));d();var yut=rue.type,Z7;async function Tdr(t,e,r){Z7&&(Z7.cancel(),Z7.dispose());let n=r.context.triggerKind===1;Z7=new fn.CancellationTokenSource;let i=Z7.token,o=new t0([e,i]);r.contextItems&&e8(t,r.contextItems);let a=await Xg(t,r.textDocument,o),c=await _Te(t,By(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(c.type!=="promptOnly")throw new Error(`Unexpected result type ${c.type}`);return[{prompt:c.prompt},null]}s(Tdr,"handleChecked");var Cut=at(wY,(t,e,r)=>Tdr(t,e,r));d();d();function PTe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return r8(i)}s(PTe,"asReadableCert");function r8(t){return t.replace(/\s/g,"")}s(r8,"normalizeNewlines");var _dr=I.Object({});async function Sdr(t){return[{certificates:(await t.get(Qc).getAllRootCAs()).map(r8)},null]}s(Sdr,"handleListCertificatesChecked");var Eut=at(_dr,Sdr);d();async function Rdr(t,e,r){let n=t.get(jg);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=Kc(r.textDocument.uri);t.get(yg).onUserPositionChange(i,new tn(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(c=>({text:c.edit.text,textDocument:c.edit.textDocument,range:c.edit.range,command:{title:"Accept inline edit",command:_7,arguments:[c.id]}}))},null]:[{edits:[]},null]}s(Rdr,"handleChecked");var vut=at(HBe,Rdr);d();var kdr=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function Pdr(t,e,r){let n=t.get(_s),i=n.get(r.uuid);if(i){n.delete(r.uuid);let o=Bdr(r,i);v2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s(Pdr,"notifyAcceptedChecked");function Bdr(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s(Bdr,"getSuggestionStatus");var xut=at(kdr,Pdr);d();var Ddr=I.Object({uuids:I.Array(I.String())});function Ndr(t,e,r){let n=t.get(_s),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let c of r.uuids)n.delete(c);let a=i.map(c=>({completionText:c.displayText,completionTelemetryData:c.telemetry}));bK(t,"ghostText",o.offset,o.uri,a),t.get(Qd).resetState()}return["OK",null]}s(Ndr,"notifyRejectedChecked");var but=at(Ddr,Ndr);d();var Ldr=I.Object({uuid:I.String({minLength:1})});function Mdr(t,e,r){let i=t.get(_s).get(r.uuid);return i&&bY(t,i.triggerCategory,i),["OK",null]}s(Mdr,"notifyShownChecked");var Iut=at(Ldr,Mdr);d();var Fdr=oGe;function Odr(t,e,r){let n=t.get(uc),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new ZD(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(Odr,"registerContextProviders");var Tut=at(Fdr,Odr);d();d();var Qdr=I.Object({uri:I.Optional(I.String())}),Udr=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),_ut=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),[o2e]:I.Optional(Qdr),http:I.Optional(I7e),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),DTe=Object.keys(_ut.properties).filter(t=>t!=="github"),qdr=I.Intersect([_ut,Udr]),Hdr=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),authProvider:I.Optional(I.Never())}),wut=Ms.Compile(Hdr),BTe=Ms.Compile(qdr);async function Sut(t,e){if(!wut.Check(e))throw new xu(wut.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;r&&NTe(t,r),await eQ(t,r)}s(Sut,"notifyChangeConfiguration");function NTe(t,e){for(let i of BTe.Errors(e)){let o=i.path.split("/")?.[1];Tu.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!BTe.Check(e))throw new xu(BTe.Errors(e));let r=t.get($g);r.setConfig(Rt.ShowEditorCompletions,e.showEditorCompletions),r.setConfig(Rt.DelayCompletions,e.delayCompletions),r.setConfig(Rt.EnableAutoCompletions,e.enableAutoCompletions),r.setConfig(Rt.FilterCompletions,e.filterCompletions),e.http&&LTe(t,e.http);let n=e["github-enterprise"];n&&aDe(t,n.uri),e.github?.copilot&&Wdr(t,e.github.copilot)}s(NTe,"applySettingsToConfiguration");function Wdr(t,e){let r=t.get($g);for(let n of Object.values(Rt)){let i=R7e(e,n);r.setConfig(n,i)}typeof e.mcp=="string"&&Vdr(t,e.mcp),Gdr(t,e.globalCopilotInstructions||""),jdr(t,e.globalGitCommitInstructions||"")}s(Wdr,"applyCopilotConfiguration");function Gdr(t,e){try{t.get(nC).setGlobalCopilotInstructions(e)}catch(r){Tu.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(Gdr,"applyGlobalCopilotInstructionsConfiguration");function jdr(t,e){try{t.get(nC).setGlobalGitCommitInstructions(e)}catch(r){Tu.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(jdr,"applyGlobalGitCommitInstructionsConfiguration");function LTe(t,e){let r=t.get($g);e.proxy===void 0&&(e=T7e(r.env));try{r.setHttpSettings(iM(e))}catch(n){if(!(n instanceof TypeError))throw n;Tu.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}s(LTe,"applyHttpConfiguration");async function Vdr(t,e){try{let r=JSON.parse(e||"{}");await t.get(Ym).updateMCPServers(r)}catch(r){Tu.error(t,"Failed to apply MCP configuration",r)}}s(Vdr,"applyMCPConfiguration");async function eQ(t,e){if(!t.get(us).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Af).initialize(r)}await t.get(jr).primeToken()}s(eQ,"initializePostConfigurationDependencies");var Rut=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),$dr=I.Object({editorInfo:Rut,editorPluginInfo:Rut,editorConfiguration:I.Optional(I.Object({})),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function zdr(t,e,r){return t.get(rn).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),Fte(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),r.editorConfiguration&&NTe(t,r.editorConfiguration),await eQ(t,r.editorConfiguration),["OK",null]}s(zdr,"handleSetEditorInfoChecked");var kut=at($dr,zdr);d();var Ydr=I.Object({options:I.Optional(I.Object({}))});async function Kdr(t,e,r){let n=t.get(Dn).pendingSignIn?.status;if(n===void 0)return[null,{code:an.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await n,[i,null]}catch(o){return[null,{code:an.DeviceFlowFailed,message:String(o)}]}finally{t.get(Dn).pendingSignIn=void 0}}s(Kdr,"handleSignInConfirmChecked");var Put=at(Ydr,Kdr);d();var Jdr=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function Xdr(t,e,r){try{let n=t.get(Dn),i=await n.checkAndUpdateStatus({githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=r.githubAppId??t.get(bl).findAppIdToAuthenticate(),a=await t.get(o2).getToken(t,o,n.getConfiguredUrls()),c=a.waitForAuth.then(async l=>(t.get(bl).githubAppId=o,await t.get(Dn).setPersistedSession(l),await t.get(Dn).checkAndUpdateStatus({freshSignIn:!0})));return t.get(Dn).pendingSignIn={verificationUri:a.verification_uri,status:c},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:Ote,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof Ps))throw n;return[null,{code:an.DeviceFlowFailed,message:n.message}]}}s(Xdr,"handleSignInInitiateChecked");var MTe=at(Jdr,Xdr);d();var Zdr=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function efr(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId;return await t.get(Dn).setPersistedSession({accessToken:n,login:i,githubAppId:o}),[await t.get(Dn).checkAndUpdateStatus(),null]}s(efr,"handleSignInWithGithubTokenChecked");var But=at(Zdr,efr);d();var tfr=I.Object({options:I.Optional(I.Object({}))});async function rfr(t,e,r){return await t.get(Dn).deletePersistedSession(),[await t.get(Dn).checkAndUpdateStatus(),null]}s(rfr,"handleSignOutChecked");var Dut=at(tfr,rfr);d();var nfr=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),FTe=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function ifr(t,e,r){let n=t.get(lo),i=t.get(rn).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&vC.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:Cae(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},vC.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let c=new FTe(r.stacktrace??"N/A",i.name);return c.stack=void 0,rc(t,c,void 0,o,a),["OK",null]}s(ifr,"handleTelemetryExceptionChecked");var Nut=at(nfr,ifr);d();d();function Lut(t={}){return{accessToken:cr(),login:"test login",...t,...pb(t)}}s(Lut,"testGitHubSession");var Ine=class extends Dn{static{s(this,"NotAuthManager")}constructor(e){super(e,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},n8=class extends Dn{constructor(r,n="",i){super(r,{});this.githubAppId=n;this.overrideTokenManager=i}static{s(this,"AlwaysAuthManager")}get _copilotTokenManager(){return this.overrideTokenManager??super._copilotTokenManager}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};d();function ofr(t){return new w_({token:`test token ${cr()}`,refresh_in:0,expires_at:0,...t},void 0)}s(ofr,"createTestCopilotToken");var tQ=class extends jr{constructor(r){super();this.envelopeFn=r;this.wasReset=!1;this.ghSession=Lut()}static{s(this,"FakeCopilotTokenManagerFromEnvelope")}async getGitHubSession(){return Promise.resolve(this.ghSession)}async getToken(){return this.copilotToken??=this.envelopeFn().then(r=>ofr(r)),this.copilotToken}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},Tne=class extends tQ{static{s(this,"TestCopilotTokenManager")}constructor(e){super(()=>Promise.resolve(e??{}))}},i8=class extends Tne{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};var sfr=I.Object({options:I.Optional(I.Object({}))});async function afr(t,e,r){let n=new i8("tid=valid-copilot-token");return t.forceSet(Dn,new n8(t,"",n)),t.get(jr).resetToken(),t.get(po).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(afr,"handleTestingAlwaysAuthChecked");var Mut=at(sfr,afr);d();var cfr=I.Object({messages:I.Array(I.Object({role:I.Enum(il),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(mn)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function lfr(t,e,r){let n=new ka(t),i=await t.get(Pa).getBestChatModelConfig([r.modelFamily??mn.CopilotBase]),o=await qM(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:e0.user("test",cr())},e,o),null]}s(lfr,"handleChatMLChecked");var Fut=at(cfr,lfr);d();d();d();var l8=Ne(qdt(),1),x$i={ALPN_HTTP2:l8.default.ALPN_HTTP2,ALPN_HTTP2C:l8.default.ALPN_HTTP2C,ALPN_HTTP1_1:l8.default.ALPN_HTTP1_1,ALPN_HTTP1_0:l8.default.ALPN_HTTP1_0},{fetch:b$i,context:Hdt,reset:I$i,noCache:T$i,h1:w$i,keepAlive:_$i,h1NoCache:S$i,keepAliveNoCache:R$i,cacheStats:k$i,clearCache:P$i,offPush:B$i,onPush:D$i,createUrl:N$i,timeoutSignal:L$i,Body:M$i,Headers:Wdt,Request:F$i,Response:O$i,AbortController:Q$i,AbortError:Hne,AbortSignal:U$i,FetchBaseError:q$i,FetchError:H$i,ALPN_HTTP2:W$i,ALPN_HTTP2C:G$i,ALPN_HTTP1_1:j$i,ALPN_HTTP1_0:V$i}=l8.default;var jdt=require("crypto"),Vdt=require("http"),$dt=require("stream"),zdt=require("util"),d8=Ne(lg());var Ppr=9e4,Bpr=new d8.ProtocolRequestType("copilot/fetch"),Dpr=new d8.ProtocolRequestType("copilot/fetchCancel"),Npr=new d8.ProgressType,Lpr=new d8.ProtocolRequestType("copilot/fetchDisconnectAll"),NC=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},u8=class extends ai{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(lo).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(vr).connection.sendRequest(Lpr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(vr).connection,a=(0,jdt.randomUUID)(),c=new fn.CancellationTokenSource,l=new $dt.PassThrough,u=s(()=>{o.sendRequest(Dpr,{workDoneToken:a})},"sendCancelRequest"),f=s(()=>{l.emit("error",new Hne("EditorFetch request aborted")),l.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new NC("EditorFetcher received unexpected abort signal");if(i.aborted)throw new Hne("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(Npr,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",f),m.error&&l.emit("error",new NC(m.error)),l.end()):m.kind==="report"&&l.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new NC("Request timed out from lsp server"))},n.timeout??Ppr),y=s(()=>{h(new Hne("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(Bpr,Fpr(r,a,n),c.token).then(m).catch(E=>{let x="EditorFetcher request failed";E&&typeof E=="object"&&"message"in E&&(x+=`: ${String(E.message)}`),E&&typeof E=="object"&&"data"in E&&(x+=`: ${(0,zdt.inspect)(E.data)}`),h(new NC(x))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new NC("EditorFetcher received invalid response");return i?.addEventListener("abort",f),new qx(p.status,Vdt.STATUS_CODES[p.status]??"",new Wdt(p.headers),()=>Mpr(l),()=>l)}};function Mpr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(Mpr,"consumeStream");function Fpr(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(Fpr,"convertOptionsToParams");var Opr=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function Qpr(t,e,r){let n=new u8(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:c,cancelAfterRequest:l,cancelAfterFirstChunk:u,...f}=r;c&&i.abort();let p=n.fetch(a,{signal:o,...f});l&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof NC?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let E=m.body();for await(let x of E){let b=x.toString();return i.abort(),[{status:h,headers:g,body:b},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof NC?y.message:String(y)}`},null]}}s(Qpr,"handleTestingFetchChecked");var Ydt=at(Opr,Qpr);d();var Upr=I.Object({});async function qpr(t,e,r){return await t.get(Xa).flush(),["OK",null]}s(qpr,"handleTestingFlushPromiseQueueChecked");var Kdt=at(Upr,qpr);d();var Hpr=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function Wpr(t,e,r){try{await t.get(yC).start();let n=t.get(TR),i=r.timeout??1e3,o=Date.now(),a=[],c=!0;for(;c;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,TY,e)}catch{}finally{c=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(Wpr,"handleTestingGetContextChecked");var Jdt=at(Hpr,Wpr);d();var Gpr=I.Object({uri:I.String()});async function jpr(t,e,r){let i=await t.get(br).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(jpr,"handleGetDocumentChecked");var Xdt=at(Gpr,jpr);d();var Vpr=I.Object({options:I.Optional(I.Object({}))});async function $pr(t,e,r){t.forceSet(Dn,new Ine(t)),t.get(jr).resetToken();try{await t.get(jr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s($pr,"handleTestingNeverAuthChecked");var Zdt=at(Vpr,$pr);d();d();d();var fwe=class extends Qc{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},eft=s(t=>new fwe(t),"createTestCertificateReader");function mwe(t,e,r){let n=new pwe;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new qx(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(mwe,"createFakeResponse");function tft(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),mwe(t,n,Object.assign({"content-type":"application/json"},r))}s(tft,"createFakeJsonResponse");var lQ=class extends ai{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var Wne=class extends lQ{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var pwe=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var hwe=class extends lQ{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(tft(200,this.fullConfig)):Promise.resolve(mwe(404,""))}},Gne=class extends hwe{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var zpr=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function Ypr(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(ai,new Gne(n,t.get(ai)))}return["OK",null]}s(Ypr,"handleTestingOverrideExpFlagsChecked");var rft=at(zpr,Ypr);d();var Kpr=I.Object({rules:sge});function Jpr(t,e,r){let n=t.get(_l);return n?(n.setTestingRules(r.rules),["OK",null]):[null,{code:an.InternalError,message:"Could not set content exclusion rules"}]}s(Jpr,"handleTestingSetContentExclusionRulesChecked");var nft=at(Kpr,Jpr);d();var Xpr=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(VD)),options:I.Optional(I.Object({}))});function Zpr(t,e,r){return t.get(dv).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(Zpr,"handleTestingSetSyntheticTurnsChecked");var ift=at(Xpr,Zpr);d();var emr=I.Object({});async function tmr(t,e,r){let n=t.get(wc),i=t.get(Tc);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,c,l){return i.logIt(t,a,"triggerShowMessage",`${c} (${String(l)})`)}s(o,"sendNotification")}s(tmr,"handleTriggerShowMessageChecked");var oft=at(emr,tmr);d();d();d();d();var sft=Ne(require("tls"));var jne=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(Qc)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=sft.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var f8=class extends ai{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new jne(r),this.proxySocketFactory=r.get(tC),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(ru).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(r,i)}),this.fetchApi=this.createFetchApi(r,r.get(ru).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let i=new URL(r.proxy);return async o=>(o.rejectUnauthorized=r.proxyStrictSSL,o.timeout=n,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let i=r.get(lo),o=this.proxySocketTimeoutForTesting;return Hdt({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,o),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let c=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(c);let l=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new s6(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new qx(l.status,l.statusText,l.headers,()=>l.text(),()=>l.body)}disconnectAll(){return this.fetchApi.reset()}};d();d();var uQ=require("fs"),aft=require("path");var p8=class extends ko{static{s(this,"LocalFileSystem")}async readFileString(e){return(await uQ.promises.readFile(La(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(La(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=La(e),n=await uQ.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:c,stat:l}=await this.statWithLink((0,aft.join)(r,o.name));i.push([o.name,this.getFileType(a,c,l)])}return i}async statWithLink(e){let r=await uQ.promises.lstat(e);if(r.isSymbolicLink())try{let n=await uQ.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};d();var Vne=class extends Jg{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};d();var $ne=class extends Hc{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};d();function rmr(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(rmr,"fakeChatModelConfiguration");function nmr(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(nmr,"fakeEmbeddingModelConfiguration");var zne=class extends Pa{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(rmr(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(nmr(e))}};d();var Yne=class extends nu{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Ld}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},Kne=class extends wc{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};d();function cft(t,e,r,n){return sE.create(rDe(t),e,r,n,e)}s(cft,"createTextDocument");var gwe=class extends br{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Oi(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=cft(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=cft(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(r){switch(r.eventName){case"focus":this._focusSubscribers.forEach(n=>n(r.args));break;case"change":this._changeSubscribers.forEach(n=>n(r.args));break;case"open":this._openSubscribers.forEach(n=>n(r.args));break;case"close":this._closeSubscribers.forEach(n=>n(r.args));break}}},Jne=class extends gwe{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var Awe=class extends Tc{static{s(this,"NullLog")}logIt(...e){}};function imr(t){let e=new o3;return e.set(ru,t),e.set(BS,t),e.set(lo,new lo),e.set(Op,new Op({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(Qc,eft([])),e.set(tC,CZ(e)),e.set(ry,new ry),e.set(zh,new HW),e.set(Vh,new Vh),e.set(WA,new WA),e.set(Kl,new Kl(e,"tid=test",!0)),e.set(vl,new vl),e.set(wc,new Kne),e.set(nu,new Yne),e.set(ty,new O3),e.set(Tc,new Awe),e.set(Ed,new Ed),e.set(gs,new gs("test-session","test-machine")),e.set(vd,new nD(e)),e.set(Af,new Af(e,"copilot-test")),e.set(Bt,new Bt(e)),e.set(mg,new mg),e.set(og,new DP),e.set(jr,new i8("tid=test")),e.set(po,new UW),e.set(Xa,new Xa),e.set(Ty,new Ty(e)),e.set(Cg,CK(e)),e.set(Qd,new Qd),e.set(Lf,new Lf),e.set(AE,AE.default),e.set(ip,new ip),e.set(um,new um(e,!1)),e.set(bl,new bl),e.set(hn,new hn(e)),e.set(j0,new Uz),e.set(Rl,new Rl),e.set(uc,SY(e,async(r,n,i)=>n.find(o=>o==="*")?1:n.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(_m,new _m(e)),omr(e),e.set(Bf,new Bf(e)),e.set(us,new us),e.set(Py,new kD),e.set(wm,new wm),e.set($f,new $f),e.set(lC,new lC(e)),e}s(imr,"_createBaselineContext");function omr(t){t.set(Wi,new Wi(t)),t.set(Js,new Js(t)),t.set(Iu,new Iu(t)),t.set(al,new al),t.set(Wl,new Wl),t.set(Hc,new $ne),t.set(nh,new nh(t,[])),t.set(Pa,new zne),t.set(Jg,new Vne),t.set(bC,new bC(t)),t.set(BT,new BT),t.set(Va,new Va(t)),t.set(bu,new bu),t.set(hp,new hp)}s(omr,"registerConversation");function lft(){let t=imr(new BS(new NP,new Map));return t.set(ai,new Wne),t.set(rn,new ywe),t.set(br,new Jne(t)),t.set(ko,new p8),t.set(_l,new _l(t)),t.set(Uc,new Uc(t)),t.set(vu,new IZ(t)),t.set(bm,new bm(t)),t.set(Ry,new A3),t.set(Dg,new YZ),xte(t),t}s(lft,"createLibTestingContext");var ywe=class extends rn{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var dft=Ne(require("fs"));var uft=`${process.env.HOME}/.copilot-testing-gh-token`,Xne,Zne;function fft(t){let e=new tQ(smr);t.forceSet(jr,e)}s(fft,"setIntegrationTokenManager");var smr=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return{token:process.env.GH_COPILOT_IDE_TOKEN};let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return{token:t};if(Zne)return Zne;let e=t||process.env.GITHUB_COPILOT_TOKEN||await amr(),r=lft(),n=new f8(r);return r.forceSet(ai,n),Zne=FW(r,{...pb({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken;throw new Ps('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Zne},"getEnvelope");async function amr(){try{Xne??=(await dft.promises.readFile(uft)).toString().trim()}catch{Xne??=process.env.GITHUB_TOKEN??""}if(!Xne)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${uft}. Run "npm run get_token" to get one.`);return Xne}s(amr,"getTestingGitHubToken");var cmr=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function lmr(t,e,r){return fft(t),t.forceSet(Dn,new n8(t,r.githubAppId)),["OK",null]}s(lmr,"handleTestingUseTestingTokenChecked");var pft=at(cmr,lmr);d();var umr=I.Object({});async function dmr(t,e,r){return await new ND().uninstall(t),["OK",null]}s(dmr,"handleUninstallChecked");var mft=at(umr,dmr);d();var fmr=sGe;function pmr(t,e,r){let n=t.get(uc),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(pmr,"unregisterContextProviders");var hft=at(fmr,pmr);d();var Cwe=Ne(require("os"));var mmr=I.Object({expectedCertificate:I.String()});async function hmr(t,e,r){let i=(await yZ(t).getAllRootCAs()).map(r8),o=r8(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${PTe(o)}. Only found those installed on the system:${Cwe.EOL}${i.map(a=>"- "+PTe(a)).join(Cwe.EOL)}`},null]}s(hmr,"handleVerifyCertificateChecked");var gft=at(mmr,hmr);d();var gmr=I.Object({});async function Amr(){return[{status:!!await new _O().load()},null]}s(Amr,"handleVerifyKerberosChecked");var Aft=at(gmr,Amr);d();var ymr=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function Cmr(t,e,r){let i=await t.get(br).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(Cmr,"handleVerifyStateChecked");var yft=at(ymr,Cmr);d();var Emr=I.Object({});function vmr(t,e,r){return[t.get(br).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(vmr,"handleVerifyWorkspaceStateChecked");var Cft=at(Emr,vmr);var UR=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function Eft(){let t=new Map;return t.set(gut.method,Aut),t.set(yut.method,Cut),t.set("getCompletions",cut),t.set("getCompletionsCycling",lut),t.set("getPanelCompletions",fut),t.set(Glt.method,jlt),t.set("getVersion",put),t.set("setEditorInfo",kut),t.set("checkStatus",zst),t.set("checkQuota",$st),t.set("checkFileStatus",jst),t.set("signInInitiate",MTe),t.set("signIn",MTe),t.set("signInConfirm",Put),t.set("signInWithGithubToken",But),t.set("signOut",Dut),t.set("notifyShown",Iut),t.set("notifyAccepted",xut),t.set("notifyRejected",but),t.set("telemetry/exception",Nut),t.set("textDocument/copilotInlineEdit",vut),t.set("testing/overrideExpFlags",rft),t.set("testing/alwaysAuth",Mut),t.set("testing/neverAuth",Zdt),t.set("testing/useTestingToken",pft),t.set("testing/setCompletionDocuments",nut),t.set("testing/setPanelCompletionDocuments",Hlt),t.set("testing/triggerShowMessageRequest",oft),t.set("testing/flushPromiseQueue",Kdt),t.set("testing/getDocument",Xdt),t.set("testing/chatml",Fut),t.set("testing/setSyntheticTurns",ift),t.set("testing/fetch",Ydt),t.set("testing/setContentExclusionRules",nft),t.set("testing/setCopilotEditsResponse",klt),t.set("testing/getContext",Jdt),t.set("uninstall",mft),t.set("debug/diagnostics",Klt),t.set("debug/listCertificates",Eut),t.set("debug/verifyState",yft),t.set("debug/verifyCertificate",gft),t.set("debug/verifyKerberos",Aft),t.set("debug/verifyWorkspaceState",Cft),t.set("context/registerProviders",Tut),t.set("context/unregisterProviders",hft),t.set("conversation/preconditions",blt),t.set("conversation/persistence",Elt),t.set("conversation/create",Alt),t.set("conversation/turn",_lt),t.set("conversation/turnDelete",Slt),t.set("conversation/destroy",ylt),t.set("conversation/rating",Ilt),t.set("conversation/copyCode",Zct),t.set("conversation/insertCode",elt),t.set("conversation/templates",wlt),t.set("conversation/agents",Xct),t.set("conversation/registerTools",Tlt),t.set("conversation/notifyCodeAcceptance",Clt),t.set("copilot/models",Flt),t.set("copilot/setModelPolicy",Olt),t.set("copilot/codeReview",Rlt),t.set("git/commitGenerate",mut),t.set("editConversation/create",Plt),t.set("editConversation/turn",Dlt),t.set("editConversation/turnDelete",Nlt),t.set("editConversation/destroy",Blt),t.set("mcp/getTools",Llt),t.set("mcp/updateToolsStatus",Mlt),new UR(t)}s(Eft,"getAllMethods");d();d();d();var vft=Ne(lg());var LC=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new vft.NotificationType(this.name)}};var Ewe=class extends LC{constructor(){super(...arguments);this.name=Yle.method;this.params=kBe}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(Dn);r?.handle&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:r.handle,githubAppId:r.githubAppId}):n.setTransientSession(null)}},xft=[Ewe];d();var vwe=class extends LC{constructor(){super(...arguments);this.name=eue.method;this.params=OBe}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get(_s).get(n);o&&nVe(this.ctx,o)}},xwe=class extends LC{constructor(){super(...arguments);this.name=nue.method;this.params=WBe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(jg).handleShown(n)}},bwe=class extends LC{constructor(){super(...arguments);this.name=tue.method;this.params=QBe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get(_s),a=o.get(n);a&&(o.delete(n),i>=a.insertText.length?IK(this.ctx,a):iVe(this.ctx,a,i))}},bft=[vwe,xwe,bwe];d();var eie=class extends LC{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(Yd).cancel(r.token)}};var xmr=[...xft,...bft,eie];function Ift(t,e){for(let r of xmr){let n=new r(t),i=Ms.Compile(n.params);e.onNotification(n.type,Hu(t,async o=>{nv(o),i.Check(o)?await n.handle(o):Tu.error(t,`Notification ${n.name}:`,new xu(i.Errors(o)))},`Notification ${n.name}`))}}s(Ift,"registerNotifications");d();var wft=Ne(require("events")),tie=Ne(Lc());var Tft=new wt("AgentTextDocumentConfiguration"),Iwe=class{constructor(e){this.ctx=e;this.emitter=new wft.default;this.emitter.setMaxListeners(1e4)}static{s(this,"AgentTextDocumentsConfiguration")}create(e,r,n,i){try{return sE.create(e,r,n,i)}catch(o){throw Tft.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(tie.TextDocumentContentChangeEvent.isIncremental(a)){let c={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(c)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.emitter.emit("change",o),sE.withChanges(e,r,n)}catch(i){throw Tft.exception(this.ctx,i,".update"),i}}},GT=class extends br{constructor(r){super(r);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((r,n,i)=>(this.didFocusTextDocumentListeners.includes(r)||this.didFocusTextDocumentListeners.push(r),this.connection.onNotification(Xle.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(c=>void c.call(n,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new Iwe(r),this._notebookDocuments=new tie.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(vr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(Kc(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=Kc(i.uri),l=this._documents.get(c);l!==void 0&&(l=this._textDocumentConfiguration.update(l,o,a),this._documents.set(c,l))}),this.connection.onDidCloseTextDocument(n=>{let i=Kc(n.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(Kc(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var _ft=Ms.Compile(LBe);function nv(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=nv(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=nv(e[r])}return t}}s(nv,"purgeNulls");var vr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.#i=this.ctx.get(Tc)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),Ift(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(lo).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async l=>{try{if(i&&l&&typeof l=="object"&&!("settings"in l)){let u=await r.workspace.getConfiguration(["github.copilot",...DTe].map(p=>({section:p}))),f={github:{copilot:u.shift()}};for(let p of DTe)f[p]=u.shift();l.settings=f}return Sut(e,nv(l))}catch(u){Tu.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(l){try{e.get(GT).didChangeWorkspaceFolders(l),e.get(ip).emit(l)}catch(u){Tu.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:l,uri:u})=>a({added:[{uri:u,name:l??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:l,uri:u})=>a({added:[],removed:[{uri:u,name:l??u}]})),r.onInitialize(async l=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=l.capabilities;let u=l.capabilities.copilot,f=nv(l.initializationOptions);if(f){if(!_ft.Check(f))throw new xu(_ft.Errors(f));let g=f,y=e.get(rn);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):Tu.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(bl).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities),await Ije(e)}let p=l.capabilities.workspace?.workspaceFolders??!1;e.get(GT).init(l.workspaceFolders??[]),fje(this.ctx),e.get(ip).emit({added:l.workspaceFolders??[],removed:[]}),i=l.capabilities.workspace?.configuration,u&&(e.get(us).setCapabilities(u),"openURL"in u&&Fte(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,Tu.info(e,`${n.name} ${n.version} initialized`),p&&r.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await eQ(e),this.installationTelemetryTimer=setTimeout(()=>{new ND().startup(e).catch(()=>{})},1e3),e.get(iv).emit())},"onInitialized");return r.onInitialized(Hu(e,h,"onInitialized")),e.get(zg).init(),u?.token&&e.get(Dn).setTransientSession(null),u?.redirectedTelemetry&&await Wst(e),Sft.lt(process.versions.node,"20.8.0")&&Tu.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:rA.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:Mst(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(Hu(e,o,"onDidChangeConfiguration")),r.listen();let c=new Ute;this.ctx.forceSet(Tc,c)}async messageHandler(e,r,n){let i=this.ctx.get(UR).handlers.get(e);if(!i)return new rA.ResponseError(an.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new rA.ResponseError(an.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new rA.ResponseError(an.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!Qst(this.ctx.get(rn)))throw new rA.ResponseError(an.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),nv(r);try{let[o,a]=await i(this.ctx,n,r);return a?new rA.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new rA.ResponseError(an.RequestCancelled,"Request was canceled");if(o instanceof Ps)return new rA.ResponseError(an.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof rA.ResponseError||Tu.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(Vg).dispose()}catch(e){Tu.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Tc,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),bAe(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(Xa).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(vl).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},Tu=new wt("lsp");var rie=class t extends C2{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(vr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),rl.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){rl.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(us).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return rl.debug(this.context,"`copilot/related` not supported"),mje;try{let a=await this.service.connection.sendRequest(iue.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){rl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Dt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){rl.exception(r,o,"copilotRelated")}}};d();var Rft=Ne(Lc());var nie=new wt("copilotTokenManager"),Twe=class t extends S4{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new Rft.ProtocolRequestType("copilot/token")}constructor(e,r=!1){super(e,r)}async fetchCopilotToken(){let e=this.ctx.get(vr).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let r=await e.sendRequest(t.RequestType,{force:!1});if(!r?.envelope)throw nie.debug(this.ctx,"Envelope missing from copilot/token response"),new Kp({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:n,handle:i,githubAppId:o,envelope:a,tokenEndpoint:c}=r;if(nie.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new Ps("Expired token in copilot/token response");if(i&&n){let u;if(c!==void 0){try{let f=new URL(c);f.protocol==="https:"&&f.hostname.startsWith("api.")?u=f.origin:nie.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}catch{nie.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}this.ctx.get(vd).setConfiguredUrls(this.ctx,{apiUrl:u})}this.ctx.get(Dn).setTransientSession({accessToken:n,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new Kp({reason:"NotSignedIn"});let l=new w_(a,void 0);return q6(this.ctx,l),l}catch(r){throw r instanceof Error?new Ps(r.message,r):r}}},dQ=class extends jr{constructor(r,n=new S4(r,!0)){super();this.ctx=r;this.fallback=n;this.client=new Twe(r,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(us).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(r){this.getDelegate().resetToken(r)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};d();var bmr=new wt("Public Code References"),iie=class extends j0{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");bmr.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,c)=>`
  ${c+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(us).getCapabilities().ipCodeCitation===!0&&await e.get(vr).connection.sendNotification(Kle.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};d();d();function kft(t){Imr(t)}s(kft,"activateExtensibilityPlatformFeature");function Imr(t){t.set(Jg,new rne(t)),t.set(bC,new bC(t))}s(Imr,"registerContextDependencies");d();var Pft=I.String(),wwe=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(sie,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},sie="build-logs",oie=class extends ql{static{s(this,"BuildLogsSkill")}constructor(e){super(sie,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new wwe(r))}};d();var _we=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await sne(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new Nt(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new Nt([o]),1]);return new Nt(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},Swe=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},Tmr="directory-references",aie=class{constructor(){this.id=Tmr;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new Swe}processor(e){return new _we(e)}};d();var wmr=I.Object({uri:I.String(),visibleRange:I.Optional(nc),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),Bft=I.Object({files:I.Array(wmr)}),_mr=3,Rwe=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=NT(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(hn),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),c=Gs(a);if(await this.turnContext.collectFile(lie,o.uri,c),a.status==="valid"&&c!=="empty"&&(i.push([a.document,o]),i.length===_mr))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(hn).getRelativePath(n),a=new IC(n,void 0,i.visibleRange);return new Nt([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await Fo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Nt([n])}},lie="recent-files",cie=class extends ql{static{s(this,"RecentFilesSkill")}constructor(e){super(lie,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new Rwe(r))}};d();var Dft=I.String(),kwe=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(die,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},die="runtime-logs",uie=class extends ql{static{s(this,"RuntimeLogsSkill")}constructor(e){super(die,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new kwe(r))}};d();var fie=Ne(lg());var pie=class extends Hc{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return aH(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(vr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new fie.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new fie.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new fie.NotificationType("conversation/documentDiff"),r)}};d();var Nft=Ne(Lc());var fQ=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(nh).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(vr).connection.sendNotification(new Nft.NotificationType(this.notificationEndpoint),e)}};function Lft(t){Smr(t),Rmr(t),kft(t)}s(Lft,"activateConversationFeature");function Smr(t){t.set(Wi,new Wi(t)),t.set(Wl,new Wl),t.set(Iu,new Iu(t)),t.set(Pa,new zZ(t)),t.set(dv,new dv),t.set(Js,new Js(t)),t.set(nh,new nh(t)),t.set(fQ,new fQ(t)),t.set(kd,new TV(t,new IV(t))),t.set(fv,new fv),t.set(BT,new BT),t.set(Hc,new pie(t)),t.set(Va,new Va(t)),t.set(bu,new bu),t.set(hp,new hp)}s(Smr,"registerContextDependencies");function Rmr(t){let e=new al;e.registerSkill(new sre(new ore(t))),e.registerSkill(new Bre(new zd(t,kC,qct))),e.registerSkill(new cre(new zd(t,Yg,Dat))),e.registerSkill(new Gte(new zd(t,od,tat))),e.registerSkill(new Dre),e.registerSkill(new aie),e.registerSkill(new cie(new zd(t,lie,Bft))),e.registerSkill(new jte(new zd(t,TC,nat))),e.registerSkill(new ure(new zd(t,LT,Wat))),e.registerSkill(new uie(new zd(t,die,Dft))),e.registerSkill(new oie(new zd(t,sie,Pft))),e.registerSkill(new fre(new zd(t,Kg,Gat))),e.registerSkill(new pre(new zd(t,SR,Vat))),t.set(al,e)}s(Rmr,"registerSkills");d();var Mft=Ne(mi());var mie=class extends vu{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(vr).connection.sendProgress(new Mft.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};d();var Fft=Ne(Lc()),Oft=Ne(lg());var hie=class extends rC{constructor(){super(...arguments);this.requestType=new Fft.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=Ms.Compile(gst)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(vr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new Oft.ResponseError(l.code,l.message,l.data);throw Or.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new xu(this.typeCheck.Errors(o));return o}};d();var Qft=Ne(Lc()),Uft=Ne(lg());var gie=class extends iT{constructor(){super(...arguments);this.requestType=new Qft.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=Ms.Compile(hst)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(vr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new Uft.ResponseError(l.code,l.message,l.data);throw Or.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new xu(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new Bi(i.value):new vR(i.value));return new oo(n,r.status??"success")}};d();d();function qft(t,e,r){try{let n=t.get(Bt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return pn.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(qft,"fillInJavaActiveExperiments");var Pwe=Ne(lg());var kmr={type:new Pwe.NotificationType("featureFlagsNotification")},Pmr={type:new Pwe.NotificationType("copilot/didChangeFeatureFlags")},pQ=class{constructor(e){this.ctx=e;ia(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,i=await r.get(Bt).updateExPValuesAndAssignments(),o={};r.get(Bt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=Ige(r,i);a.length>0&&(o.ExpContextProviders=a);let c=new Map;KWe(r,a,c,i),IY(r,c,i),qft(r,c,i);for(let[f,p]of c.entries())o[f]=p;let l=r.get(us),u=r.get(vr).connection;if(l.getCapabilities().didChangeFeatureFlags)await u.sendNotification(Pmr.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let f={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.envelope.xcode_chat&&e.envelope.chat_enabled&&(f.xc=!0),await u.sendNotification(kmr.type,f)}}};d();var Aie=class extends po{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(vr).connection.sendNotification(oue.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(vr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};d();var Hft=new p8;d();d();d();d();var os=new wt("CopilotMCP");async function Bwe(t,e){await t.get(Dg).notifyLog(e)}s(Bwe,"notifyMCPRuntimeLog");async function MC(t,e){await Bwe(t,{...e,level:"error"})}s(MC,"notifyMCPRuntimeError");async function qR(t,e){await Bwe(t,{...e,level:"warning"})}s(qR,"notifyMCPRuntimeWarning");async function cd(t,e){await Bwe(t,{...e,level:"info"})}s(cd,"notifyMCPRuntimeInfo");d();var Dwe=/[^a-z0-9_-]/gi;var Bmr=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Wft(){let t={};for(let e of Bmr){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Wft,"getDefaultEnvironment");async function Gft(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;os.warn(t,n),await qR(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(Dwe.lastIndex=0,Dwe.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;os.warn(t,n),await qR(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(Dwe,"_")}else e._nameForModel=e.name;return e}s(Gft,"normalizeTool");var yie=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let i=2;this.seenPrefixes.has(n);i++)n=r+i;return this.seenPrefixes.add(n),n}};d();d();d();d();var vo;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),a={};for(let c of o)a[c]=i[c];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(vo||(vo={}));var Lwe;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Lwe||(Lwe={}));var hr=vo.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),yv=s(t=>{switch(typeof t){case"undefined":return hr.undefined;case"string":return hr.string;case"number":return isNaN(t)?hr.nan:hr.number;case"boolean":return hr.boolean;case"function":return hr.function;case"bigint":return hr.bigint;case"symbol":return hr.symbol;case"object":return Array.isArray(t)?hr.array:t===null?hr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?hr.promise:typeof Map<"u"&&t instanceof Map?hr.map:typeof Set<"u"&&t instanceof Set?hr.set:typeof Date<"u"&&t instanceof Date?hr.date:hr.object;default:return hr.unknown}},"getParsedType"),Pt=vo.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Dmr=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),Ap=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(r(a))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,vo.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Ap.create=t=>new Ap(t);var g8=s((t,e)=>{let r;switch(t.code){case Pt.invalid_type:t.received===hr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Pt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,vo.jsonStringifyReplacer)}`;break;case Pt.unrecognized_keys:r=`Unrecognized key(s) in object: ${vo.joinValues(t.keys,", ")}`;break;case Pt.invalid_union:r="Invalid input";break;case Pt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${vo.joinValues(t.options)}`;break;case Pt.invalid_enum_value:r=`Invalid enum value. Expected ${vo.joinValues(t.options)}, received '${t.received}'`;break;case Pt.invalid_arguments:r="Invalid function arguments";break;case Pt.invalid_return_type:r="Invalid function return type";break;case Pt.invalid_date:r="Invalid date";break;case Pt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:vo.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Pt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Pt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Pt.custom:r="Invalid input";break;case Pt.invalid_intersection_types:r="Intersection results could not be merged";break;case Pt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Pt.not_finite:r="Number must be finite";break;default:r=e.defaultError,vo.assertNever(t)}return{message:r}},"errorMap"),zft=g8;function Nmr(t){zft=t}s(Nmr,"setErrorMap");function Cie(){return zft}s(Cie,"getErrorMap");var Eie=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)c=u(a,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},"makeIssue"),Lmr=[];function nr(t,e){let r=Cie(),n=Eie({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===g8?void 0:g8].filter(i=>!!i)});t.common.issues.push(n)}s(nr,"addIssueToContext");var ld=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return qn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return qn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},qn=Object.freeze({status:"aborted"}),h8=s(t=>({status:"dirty",value:t}),"DIRTY"),Kd=s(t=>({status:"valid",value:t}),"OK"),Mwe=s(t=>t.status==="aborted","isAborted"),Fwe=s(t=>t.status==="dirty","isDirty"),HR=s(t=>t.status==="valid","isValid"),gQ=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function vie(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(vie,"__classPrivateFieldGet");function Yft(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(Yft,"__classPrivateFieldSet");var Mr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Mr||(Mr={}));var mQ,hQ,sh=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},jft=s((t,e)=>{if(HR(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ap(t.common.issues);return this._error=r,this._error}}},"handleResult");function di(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,c)=>{var l,u;let{message:f}=t;return a.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(l=f??n)!==null&&l!==void 0?l:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(u=f??r)!==null&&u!==void 0?u:c.defaultError}},"customMap"),description:i}}s(di,"processCreateParams");var fi=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return yv(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:yv(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ld,ctx:{common:e.parent.common,data:e.data,parsedType:yv(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(gQ(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yv(e)},o=this._parseSync({data:e,path:i.path,parent:i});return jft(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yv(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return HR(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>HR(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yv(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(gQ(i)?i:Promise.resolve(i));return jft(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),c=s(()=>o.addIssue({code:Pt.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new yp({schema:this,typeName:Mn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return oh.create(this,this._def)}nullable(){return OC.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ev.create(this)}promise(){return $T.create(this,this._def)}or(e){return YR.create([this,e],this._def)}and(e){return KR.create(this,e,this._def)}transform(e){return new yp({...di(this._def),schema:this,typeName:Mn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new t5({...di(this._def),innerType:this,defaultValue:r,typeName:Mn.ZodDefault})}brand(){return new AQ({typeName:Mn.ZodBranded,type:this,...di(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new r5({...di(this._def),innerType:this,catchValue:r,typeName:Mn.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return yQ.create(this,e)}readonly(){return n5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Mmr=/^c[^\s-]{8,}$/i,Fmr=/^[0-9a-z]+$/,Omr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Qmr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Umr=/^[a-z0-9_-]{21}$/i,qmr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Hmr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Wmr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Gmr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Nwe,jmr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Vmr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$mr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,zmr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ymr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Kmr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Kft="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Jmr=new RegExp(`^${Kft}$`);function Jft(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(Jft,"timeRegexSource");function Xmr(t){return new RegExp(`^${Jft(t)}$`)}s(Xmr,"timeRegex");function Xft(t){let e=`${Kft}T${Jft(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(Xft,"datetimeRegex");function Zmr(t,e){return!!((e==="v4"||!e)&&jmr.test(t)||(e==="v6"||!e)&&$mr.test(t))}s(Zmr,"isValidIP");function ehr(t,e){if(!qmr.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(ehr,"isValidJWT");function thr(t,e){return!!((e==="v4"||!e)&&Vmr.test(t)||(e==="v6"||!e)&&zmr.test(t))}s(thr,"isValidCidr");var jT=class t extends fi{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==hr.string){let o=this._getOrReturnCtx(e);return nr(o,{code:Pt.invalid_type,expected:hr.string,received:o.parsedType}),qn}let n=new ld,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,c=e.data.length<o.value;(a||c)&&(i=this._getOrReturnCtx(e,i),a?nr(i,{code:Pt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&nr(i,{code:Pt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")Wmr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"email",code:Pt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")Nwe||(Nwe=new RegExp(Gmr,"u")),Nwe.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"emoji",code:Pt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")Qmr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"uuid",code:Pt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")Umr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"nanoid",code:Pt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")Mmr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"cuid",code:Pt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")Fmr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"cuid2",code:Pt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")Omr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"ulid",code:Pt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),nr(i,{validation:"url",code:Pt.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"regex",code:Pt.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?Xft(o).test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Jmr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?Xmr(o).test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?Hmr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"duration",code:Pt.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?Zmr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"ip",code:Pt.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?ehr(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"jwt",code:Pt.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?thr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"cidr",code:Pt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Ymr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"base64",code:Pt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?Kmr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"base64url",code:Pt.invalid_string,message:o.message}),n.dirty()):vo.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Pt.invalid_string,...Mr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Mr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Mr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Mr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Mr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Mr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Mr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Mr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Mr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Mr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Mr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Mr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Mr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Mr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Mr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Mr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Mr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Mr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Mr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Mr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Mr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Mr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Mr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Mr.errToObj(r)})}nonempty(e){return this.min(1,Mr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};jT.create=t=>{var e;return new jT({checks:[],typeName:Mn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...di(t)})};function rhr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(rhr,"floatSafeRemainder");var WR=class t extends fi{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==hr.number){let o=this._getOrReturnCtx(e);return nr(o,{code:Pt.invalid_type,expected:hr.number,received:o.parsedType}),qn}let n,i=new ld;for(let o of this._def.checks)o.kind==="int"?vo.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),nr(n,{code:Pt.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Pt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Pt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?rhr(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Pt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),nr(n,{code:Pt.not_finite,message:o.message}),i.dirty()):vo.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Mr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Mr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Mr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Mr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Mr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Mr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Mr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Mr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Mr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Mr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Mr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Mr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Mr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Mr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&vo.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};WR.create=t=>new WR({checks:[],typeName:Mn.ZodNumber,coerce:t?.coerce||!1,...di(t)});var GR=class t extends fi{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==hr.bigint)return this._getInvalidInput(e);let n,i=new ld;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Pt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Pt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Pt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):vo.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return nr(r,{code:Pt.invalid_type,expected:hr.bigint,received:r.parsedType}),qn}gte(e,r){return this.setLimit("min",e,!0,Mr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Mr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Mr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Mr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Mr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Mr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Mr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Mr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Mr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Mr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};GR.create=t=>{var e;return new GR({checks:[],typeName:Mn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...di(t)})};var jR=class extends fi{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==hr.boolean){let n=this._getOrReturnCtx(e);return nr(n,{code:Pt.invalid_type,expected:hr.boolean,received:n.parsedType}),qn}return Kd(e.data)}};jR.create=t=>new jR({typeName:Mn.ZodBoolean,coerce:t?.coerce||!1,...di(t)});var VR=class t extends fi{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==hr.date){let o=this._getOrReturnCtx(e);return nr(o,{code:Pt.invalid_type,expected:hr.date,received:o.parsedType}),qn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return nr(o,{code:Pt.invalid_date}),qn}let n=new ld,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Pt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):vo.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Mr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Mr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};VR.create=t=>new VR({checks:[],coerce:t?.coerce||!1,typeName:Mn.ZodDate,...di(t)});var A8=class extends fi{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==hr.symbol){let n=this._getOrReturnCtx(e);return nr(n,{code:Pt.invalid_type,expected:hr.symbol,received:n.parsedType}),qn}return Kd(e.data)}};A8.create=t=>new A8({typeName:Mn.ZodSymbol,...di(t)});var $R=class extends fi{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==hr.undefined){let n=this._getOrReturnCtx(e);return nr(n,{code:Pt.invalid_type,expected:hr.undefined,received:n.parsedType}),qn}return Kd(e.data)}};$R.create=t=>new $R({typeName:Mn.ZodUndefined,...di(t)});var zR=class extends fi{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==hr.null){let n=this._getOrReturnCtx(e);return nr(n,{code:Pt.invalid_type,expected:hr.null,received:n.parsedType}),qn}return Kd(e.data)}};zR.create=t=>new zR({typeName:Mn.ZodNull,...di(t)});var VT=class extends fi{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Kd(e.data)}};VT.create=t=>new VT({typeName:Mn.ZodAny,...di(t)});var Cv=class extends fi{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Kd(e.data)}};Cv.create=t=>new Cv({typeName:Mn.ZodUnknown,...di(t)});var nA=class extends fi{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return nr(r,{code:Pt.invalid_type,expected:hr.never,received:r.parsedType}),qn}};nA.create=t=>new nA({typeName:Mn.ZodNever,...di(t)});var y8=class extends fi{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==hr.undefined){let n=this._getOrReturnCtx(e);return nr(n,{code:Pt.invalid_type,expected:hr.void,received:n.parsedType}),qn}return Kd(e.data)}};y8.create=t=>new y8({typeName:Mn.ZodVoid,...di(t)});var Ev=class t extends fi{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==hr.array)return nr(r,{code:Pt.invalid_type,expected:hr.array,received:r.parsedType}),qn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,c=r.data.length<i.exactLength.value;(a||c)&&(nr(r,{code:a?Pt.too_big:Pt.too_small,minimum:c?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(nr(r,{code:Pt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(nr(r,{code:Pt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>i.type._parseAsync(new sh(r,a,r.path,c)))).then(a=>ld.mergeArray(n,a));let o=[...r.data].map((a,c)=>i.type._parseSync(new sh(r,a,r.path,c)));return ld.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Mr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Mr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Mr.toString(r)}})}nonempty(e){return this.min(1,e)}};Ev.create=(t,e)=>new Ev({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Mn.ZodArray,...di(e)});function m8(t){if(t instanceof r0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=oh.create(m8(n))}return new r0({...t._def,shape:s(()=>e,"shape")})}else return t instanceof Ev?new Ev({...t._def,type:m8(t.element)}):t instanceof oh?oh.create(m8(t.unwrap())):t instanceof OC?OC.create(m8(t.unwrap())):t instanceof FC?FC.create(t.items.map(e=>m8(e))):t}s(m8,"deepPartialify");var r0=class t extends fi{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=vo.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==hr.object){let u=this._getOrReturnCtx(e);return nr(u,{code:Pt.invalid_type,expected:hr.object,received:u.parsedType}),qn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof nA&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||c.push(u);let l=[];for(let u of a){let f=o[u],p=i.data[u];l.push({key:{status:"valid",value:u},value:f._parse(new sh(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof nA){let u=this._def.unknownKeys;if(u==="passthrough")for(let f of c)l.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(u==="strict")c.length>0&&(nr(i,{code:Pt.unrecognized_keys,keys:c}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let f of c){let p=i.data[f];l.push({key:{status:"valid",value:f},value:u._parse(new sh(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let f of l){let p=await f.key,m=await f.value;u.push({key:p,value:m,alwaysSet:f.alwaysSet})}return u}).then(u=>ld.mergeObjectSync(n,u)):ld.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Mr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,c;let l=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=Mr.errToObj(e).message)!==null&&c!==void 0?c:l}:{message:l}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:Mn.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return vo.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return vo.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return m8(this)}partial(e){let r={};return vo.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return vo.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof oh;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return Zft(vo.objectKeys(this.shape))}};r0.create=(t,e)=>new r0({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:nA.create(),typeName:Mn.ZodObject,...di(e)});r0.strictCreate=(t,e)=>new r0({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:nA.create(),typeName:Mn.ZodObject,...di(e)});r0.lazycreate=(t,e)=>new r0({shape:t,unknownKeys:"strip",catchall:nA.create(),typeName:Mn.ZodObject,...di(e)});var YR=class extends fi{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=o.map(c=>new Ap(c.ctx.common.issues));return nr(r,{code:Pt.invalid_union,unionErrors:a}),qn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},f=l._parseSync({data:r.data,path:r.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let c=a.map(l=>new Ap(l));return nr(r,{code:Pt.invalid_union,unionErrors:c}),qn}}get options(){return this._def.options}};YR.create=(t,e)=>new YR({options:t,typeName:Mn.ZodUnion,...di(e)});var Av=s(t=>t instanceof JR?Av(t.schema):t instanceof yp?Av(t.innerType()):t instanceof XR?[t.value]:t instanceof ZR?t.options:t instanceof e5?vo.objectValues(t.enum):t instanceof t5?Av(t._def.innerType):t instanceof $R?[void 0]:t instanceof zR?[null]:t instanceof oh?[void 0,...Av(t.unwrap())]:t instanceof OC?[null,...Av(t.unwrap())]:t instanceof AQ||t instanceof n5?Av(t.unwrap()):t instanceof r5?Av(t._def.innerType):[],"getDiscriminator"),xie=class t extends fi{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==hr.object)return nr(r,{code:Pt.invalid_type,expected:hr.object,received:r.parsedType}),qn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(nr(r,{code:Pt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),qn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Av(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new t({typeName:Mn.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...di(n)})}};function Owe(t,e){let r=yv(t),n=yv(e);if(t===e)return{valid:!0,data:t};if(r===hr.object&&n===hr.object){let i=vo.objectKeys(e),o=vo.objectKeys(t).filter(c=>i.indexOf(c)!==-1),a={...t,...e};for(let c of o){let l=Owe(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===hr.array&&n===hr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],c=e[o],l=Owe(a,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===hr.date&&n===hr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(Owe,"mergeValues");var KR=class extends fi{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(Mwe(o)||Mwe(a))return qn;let c=Owe(o.value,a.value);return c.valid?((Fwe(o)||Fwe(a))&&r.dirty(),{status:r.value,value:c.data}):(nr(n,{code:Pt.invalid_intersection_types}),qn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};KR.create=(t,e,r)=>new KR({left:t,right:e,typeName:Mn.ZodIntersection,...di(r)});var FC=class t extends fi{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==hr.array)return nr(n,{code:Pt.invalid_type,expected:hr.array,received:n.parsedType}),qn;if(n.data.length<this._def.items.length)return nr(n,{code:Pt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qn;!this._def.rest&&n.data.length>this._def.items.length&&(nr(n,{code:Pt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new sh(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>ld.mergeArray(r,a)):ld.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};FC.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new FC({items:t,typeName:Mn.ZodTuple,rest:null,...di(e)})};var bie=class t extends fi{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==hr.object)return nr(n,{code:Pt.invalid_type,expected:hr.object,received:n.parsedType}),qn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let c in n.data)i.push({key:o._parse(new sh(n,c,n.path,c)),value:a._parse(new sh(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?ld.mergeObjectAsync(r,i):ld.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof fi?new t({keyType:e,valueType:r,typeName:Mn.ZodRecord,...di(n)}):new t({keyType:jT.create(),valueType:e,typeName:Mn.ZodRecord,...di(r)})}},C8=class extends fi{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==hr.map)return nr(n,{code:Pt.invalid_type,expected:hr.map,received:n.parsedType}),qn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([c,l],u)=>({key:i._parse(new sh(n,c,n.path,[u,"key"])),value:o._parse(new sh(n,l,n.path,[u,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,f=await l.value;if(u.status==="aborted"||f.status==="aborted")return qn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let u=l.key,f=l.value;if(u.status==="aborted"||f.status==="aborted")return qn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}}}};C8.create=(t,e,r)=>new C8({valueType:e,keyType:t,typeName:Mn.ZodMap,...di(r)});var E8=class t extends fi{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==hr.set)return nr(n,{code:Pt.invalid_type,expected:hr.set,received:n.parsedType}),qn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(nr(n,{code:Pt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(nr(n,{code:Pt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(l){let u=new Set;for(let f of l){if(f.status==="aborted")return qn;f.status==="dirty"&&r.dirty(),u.add(f.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,u)=>o._parse(new sh(n,l,n.path,u)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:Mr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Mr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};E8.create=(t,e)=>new E8({valueType:t,minSize:null,maxSize:null,typeName:Mn.ZodSet,...di(e)});var Iie=class t extends fi{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==hr.function)return nr(r,{code:Pt.invalid_type,expected:hr.function,received:r.parsedType}),qn;function n(c,l){return Eie({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cie(),g8].filter(u=>!!u),issueData:{code:Pt.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function i(c,l){return Eie({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cie(),g8].filter(u=>!!u),issueData:{code:Pt.invalid_return_type,returnTypeError:l}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof $T){let c=this;return Kd(async function(...l){let u=new Ap([]),f=await c._def.args.parseAsync(l,o).catch(h=>{throw u.addIssue(n(l,h)),u}),p=await Reflect.apply(a,this,f);return await c._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let c=this;return Kd(function(...l){let u=c._def.args.safeParse(l,o);if(!u.success)throw new Ap([n(l,u.error)]);let f=Reflect.apply(a,this,u.data),p=c._def.returns.safeParse(f,o);if(!p.success)throw new Ap([i(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:FC.create(e).rest(Cv.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||FC.create([]).rest(Cv.create()),returns:r||Cv.create(),typeName:Mn.ZodFunction,...di(n)})}},JR=class extends fi{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};JR.create=(t,e)=>new JR({getter:t,typeName:Mn.ZodLazy,...di(e)});var XR=class extends fi{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return nr(r,{received:r.data,code:Pt.invalid_literal,expected:this._def.value}),qn}return{status:"valid",value:e.data}}get value(){return this._def.value}};XR.create=(t,e)=>new XR({value:t,typeName:Mn.ZodLiteral,...di(e)});function Zft(t,e){return new ZR({values:t,typeName:Mn.ZodEnum,...di(e)})}s(Zft,"createZodEnum");var ZR=class t extends fi{static{s(this,"ZodEnum")}constructor(){super(...arguments),mQ.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return nr(r,{expected:vo.joinValues(n),received:r.parsedType,code:Pt.invalid_type}),qn}if(vie(this,mQ,"f")||Yft(this,mQ,new Set(this._def.values),"f"),!vie(this,mQ,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return nr(r,{received:r.data,code:Pt.invalid_enum_value,options:n}),qn}return Kd(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};mQ=new WeakMap;ZR.create=Zft;var e5=class extends fi{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),hQ.set(this,void 0)}_parse(e){let r=vo.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==hr.string&&n.parsedType!==hr.number){let i=vo.objectValues(r);return nr(n,{expected:vo.joinValues(i),received:n.parsedType,code:Pt.invalid_type}),qn}if(vie(this,hQ,"f")||Yft(this,hQ,new Set(vo.getValidEnumValues(this._def.values)),"f"),!vie(this,hQ,"f").has(e.data)){let i=vo.objectValues(r);return nr(n,{received:n.data,code:Pt.invalid_enum_value,options:i}),qn}return Kd(e.data)}get enum(){return this._def.values}};hQ=new WeakMap;e5.create=(t,e)=>new e5({values:t,typeName:Mn.ZodNativeEnum,...di(e)});var $T=class extends fi{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==hr.promise&&r.common.async===!1)return nr(r,{code:Pt.invalid_type,expected:hr.promise,received:r.parsedType}),qn;let n=r.parsedType===hr.promise?r.data:Promise.resolve(r.data);return Kd(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};$T.create=(t,e)=>new $T({type:t,typeName:Mn.ZodPromise,...di(e)});var yp=class extends fi{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{nr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return qn;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?qn:l.status==="dirty"||r.value==="dirty"?h8(l.value):l});{if(r.value==="aborted")return qn;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?qn:c.status==="dirty"||r.value==="dirty"?h8(c.value):c}}if(i.type==="refinement"){let a=s(c=>{let l=i.refinement(c,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?qn:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?qn:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!HR(a))return a;let c=i.transform(a.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>HR(a)?Promise.resolve(i.transform(a.value,o)).then(c=>({status:r.value,value:c})):a);vo.assertNever(i)}};yp.create=(t,e,r)=>new yp({schema:t,typeName:Mn.ZodEffects,effect:e,...di(r)});yp.createWithPreprocess=(t,e,r)=>new yp({schema:e,effect:{type:"preprocess",transform:t},typeName:Mn.ZodEffects,...di(r)});var oh=class extends fi{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===hr.undefined?Kd(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};oh.create=(t,e)=>new oh({innerType:t,typeName:Mn.ZodOptional,...di(e)});var OC=class extends fi{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===hr.null?Kd(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};OC.create=(t,e)=>new OC({innerType:t,typeName:Mn.ZodNullable,...di(e)});var t5=class extends fi{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===hr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};t5.create=(t,e)=>new t5({innerType:t,typeName:Mn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...di(e)});var r5=class extends fi{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return gQ(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ap(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ap(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};r5.create=(t,e)=>new r5({innerType:t,typeName:Mn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...di(e)});var v8=class extends fi{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==hr.nan){let n=this._getOrReturnCtx(e);return nr(n,{code:Pt.invalid_type,expected:hr.nan,received:n.parsedType}),qn}return{status:"valid",value:e.data}}};v8.create=t=>new v8({typeName:Mn.ZodNaN,...di(t)});var nhr=Symbol("zod_brand"),AQ=class extends fi{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},yQ=class t extends fi{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?qn:o.status==="dirty"?(r.dirty(),h8(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?qn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Mn.ZodPipeline})}},n5=class extends fi{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(HR(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return gQ(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};n5.create=(t,e)=>new n5({innerType:t,typeName:Mn.ZodReadonly,...di(e)});function Vft(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(Vft,"cleanParams");function e0t(t,e={},r){return t?VT.create().superRefine((n,i)=>{var o,a;let c=t(n);if(c instanceof Promise)return c.then(l=>{var u,f;if(!l){let p=Vft(e,n),m=(f=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&f!==void 0?f:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!c){let l=Vft(e,n),u=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:u})}}):VT.create()}s(e0t,"custom");var ihr={object:r0.lazycreate},Mn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Mn||(Mn={}));var ohr=s((t,e={message:`Input not instance of ${t.name}`})=>e0t(r=>r instanceof t,e),"instanceOfType"),t0t=jT.create,r0t=WR.create,shr=v8.create,ahr=GR.create,n0t=jR.create,chr=VR.create,lhr=A8.create,uhr=$R.create,dhr=zR.create,fhr=VT.create,phr=Cv.create,mhr=nA.create,hhr=y8.create,ghr=Ev.create,Ahr=r0.create,yhr=r0.strictCreate,Chr=YR.create,Ehr=xie.create,vhr=KR.create,xhr=FC.create,bhr=bie.create,Ihr=C8.create,Thr=E8.create,whr=Iie.create,_hr=JR.create,Shr=XR.create,Rhr=ZR.create,khr=e5.create,Phr=$T.create,$ft=yp.create,Bhr=oh.create,Dhr=OC.create,Nhr=yp.createWithPreprocess,Lhr=yQ.create,Mhr=s(()=>t0t().optional(),"ostring"),Fhr=s(()=>r0t().optional(),"onumber"),Ohr=s(()=>n0t().optional(),"oboolean"),Qhr={string:s(t=>jT.create({...t,coerce:!0}),"string"),number:s(t=>WR.create({...t,coerce:!0}),"number"),boolean:s(t=>jR.create({...t,coerce:!0}),"boolean"),bigint:s(t=>GR.create({...t,coerce:!0}),"bigint"),date:s(t=>VR.create({...t,coerce:!0}),"date")},Uhr=qn,Z=Object.freeze({__proto__:null,defaultErrorMap:g8,setErrorMap:Nmr,getErrorMap:Cie,makeIssue:Eie,EMPTY_PATH:Lmr,addIssueToContext:nr,ParseStatus:ld,INVALID:qn,DIRTY:h8,OK:Kd,isAborted:Mwe,isDirty:Fwe,isValid:HR,isAsync:gQ,get util(){return vo},get objectUtil(){return Lwe},ZodParsedType:hr,getParsedType:yv,ZodType:fi,datetimeRegex:Xft,ZodString:jT,ZodNumber:WR,ZodBigInt:GR,ZodBoolean:jR,ZodDate:VR,ZodSymbol:A8,ZodUndefined:$R,ZodNull:zR,ZodAny:VT,ZodUnknown:Cv,ZodNever:nA,ZodVoid:y8,ZodArray:Ev,ZodObject:r0,ZodUnion:YR,ZodDiscriminatedUnion:xie,ZodIntersection:KR,ZodTuple:FC,ZodRecord:bie,ZodMap:C8,ZodSet:E8,ZodFunction:Iie,ZodLazy:JR,ZodLiteral:XR,ZodEnum:ZR,ZodNativeEnum:e5,ZodPromise:$T,ZodEffects:yp,ZodTransformer:yp,ZodOptional:oh,ZodNullable:OC,ZodDefault:t5,ZodCatch:r5,ZodNaN:v8,BRAND:nhr,ZodBranded:AQ,ZodPipeline:yQ,ZodReadonly:n5,custom:e0t,Schema:fi,ZodSchema:fi,late:ihr,get ZodFirstPartyTypeKind(){return Mn},coerce:Qhr,any:fhr,array:ghr,bigint:ahr,boolean:n0t,date:chr,discriminatedUnion:Ehr,effect:$ft,enum:Rhr,function:whr,instanceof:ohr,intersection:vhr,lazy:_hr,literal:Shr,map:Ihr,nan:shr,nativeEnum:khr,never:mhr,null:dhr,nullable:Dhr,number:r0t,object:Ahr,oboolean:Ohr,onumber:Fhr,optional:Bhr,ostring:Mhr,pipeline:Lhr,preprocess:Nhr,promise:Phr,record:bhr,set:Thr,strictObject:yhr,string:t0t,symbol:lhr,transformer:$ft,tuple:xhr,undefined:uhr,union:Chr,unknown:phr,void:hhr,NEVER:Uhr,ZodIssueCode:Pt,quotelessJson:Dmr,ZodError:Ap});var CQ="2025-03-26",i0t=[CQ,"2024-11-05","2024-10-07"],Tie="2.0",o0t=Z.union([Z.string(),Z.number().int()]),s0t=Z.string(),qhr=Z.object({progressToken:Z.optional(o0t)}).passthrough(),iA=Z.object({_meta:Z.optional(qhr)}).passthrough(),Cp=Z.object({method:Z.string(),params:Z.optional(iA)}),EQ=Z.object({_meta:Z.optional(Z.object({}).passthrough())}).passthrough(),QC=Z.object({method:Z.string(),params:Z.optional(EQ)}),oA=Z.object({_meta:Z.optional(Z.object({}).passthrough())}).passthrough(),wie=Z.union([Z.string(),Z.number().int()]),a0t=Z.object({jsonrpc:Z.literal(Tie),id:wie}).merge(Cp).strict(),_ie=s(t=>a0t.safeParse(t).success,"isJSONRPCRequest"),c0t=Z.object({jsonrpc:Z.literal(Tie)}).merge(QC).strict(),l0t=s(t=>c0t.safeParse(t).success,"isJSONRPCNotification"),u0t=Z.object({jsonrpc:Z.literal(Tie),id:wie,result:oA}).strict(),vQ=s(t=>u0t.safeParse(t).success,"isJSONRPCResponse"),zT;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(zT||(zT={}));var d0t=Z.object({jsonrpc:Z.literal(Tie),id:wie,error:Z.object({code:Z.number().int(),message:Z.string(),data:Z.optional(Z.unknown())})}).strict(),f0t=s(t=>d0t.safeParse(t).success,"isJSONRPCError"),YT=Z.union([a0t,c0t,u0t,d0t]),o5=oA.strict(),Sie=QC.extend({method:Z.literal("notifications/cancelled"),params:EQ.extend({requestId:wie,reason:Z.string().optional()})}),p0t=Z.object({name:Z.string(),version:Z.string()}).passthrough(),Hhr=Z.object({experimental:Z.optional(Z.object({}).passthrough()),sampling:Z.optional(Z.object({}).passthrough()),roots:Z.optional(Z.object({listChanged:Z.optional(Z.boolean())}).passthrough())}).passthrough(),Whr=Cp.extend({method:Z.literal("initialize"),params:iA.extend({protocolVersion:Z.string(),capabilities:Hhr,clientInfo:p0t})});var Ghr=Z.object({experimental:Z.optional(Z.object({}).passthrough()),logging:Z.optional(Z.object({}).passthrough()),completions:Z.optional(Z.object({}).passthrough()),prompts:Z.optional(Z.object({listChanged:Z.optional(Z.boolean())}).passthrough()),resources:Z.optional(Z.object({subscribe:Z.optional(Z.boolean()),listChanged:Z.optional(Z.boolean())}).passthrough()),tools:Z.optional(Z.object({listChanged:Z.optional(Z.boolean())}).passthrough())}).passthrough(),Qwe=oA.extend({protocolVersion:Z.string(),capabilities:Ghr,serverInfo:p0t,instructions:Z.optional(Z.string())}),m0t=QC.extend({method:Z.literal("notifications/initialized")}),h0t=s(t=>m0t.safeParse(t).success,"isInitializedNotification"),Rie=Cp.extend({method:Z.literal("ping")}),jhr=Z.object({progress:Z.number(),total:Z.optional(Z.number())}).passthrough(),kie=QC.extend({method:Z.literal("notifications/progress"),params:EQ.merge(jhr).extend({progressToken:o0t})}),Pie=Cp.extend({params:iA.extend({cursor:Z.optional(s0t)}).optional()}),Bie=oA.extend({nextCursor:Z.optional(s0t)}),g0t=Z.object({uri:Z.string(),mimeType:Z.optional(Z.string())}).passthrough(),A0t=g0t.extend({text:Z.string()}),y0t=g0t.extend({blob:Z.string().base64()}),Vhr=Z.object({uri:Z.string(),name:Z.string(),description:Z.optional(Z.string()),mimeType:Z.optional(Z.string())}).passthrough(),$hr=Z.object({uriTemplate:Z.string(),name:Z.string(),description:Z.optional(Z.string()),mimeType:Z.optional(Z.string())}).passthrough(),zhr=Pie.extend({method:Z.literal("resources/list")}),Uwe=Bie.extend({resources:Z.array(Vhr)}),Yhr=Pie.extend({method:Z.literal("resources/templates/list")}),qwe=Bie.extend({resourceTemplates:Z.array($hr)}),Khr=Cp.extend({method:Z.literal("resources/read"),params:iA.extend({uri:Z.string()})}),Hwe=oA.extend({contents:Z.array(Z.union([A0t,y0t]))}),Jhr=QC.extend({method:Z.literal("notifications/resources/list_changed")}),Xhr=Cp.extend({method:Z.literal("resources/subscribe"),params:iA.extend({uri:Z.string()})}),Zhr=Cp.extend({method:Z.literal("resources/unsubscribe"),params:iA.extend({uri:Z.string()})}),egr=QC.extend({method:Z.literal("notifications/resources/updated"),params:EQ.extend({uri:Z.string()})}),tgr=Z.object({name:Z.string(),description:Z.optional(Z.string()),required:Z.optional(Z.boolean())}).passthrough(),rgr=Z.object({name:Z.string(),description:Z.optional(Z.string()),arguments:Z.optional(Z.array(tgr))}).passthrough(),ngr=Pie.extend({method:Z.literal("prompts/list")}),Wwe=Bie.extend({prompts:Z.array(rgr)}),igr=Cp.extend({method:Z.literal("prompts/get"),params:iA.extend({name:Z.string(),arguments:Z.optional(Z.record(Z.string()))})}),Die=Z.object({type:Z.literal("text"),text:Z.string()}).passthrough(),Nie=Z.object({type:Z.literal("image"),data:Z.string().base64(),mimeType:Z.string()}).passthrough(),Lie=Z.object({type:Z.literal("audio"),data:Z.string().base64(),mimeType:Z.string()}).passthrough(),C0t=Z.object({type:Z.literal("resource"),resource:Z.union([A0t,y0t])}).passthrough(),ogr=Z.object({role:Z.enum(["user","assistant"]),content:Z.union([Die,Nie,Lie,C0t])}).passthrough(),Gwe=oA.extend({description:Z.optional(Z.string()),messages:Z.array(ogr)}),xQ=QC.extend({method:Z.literal("notifications/prompts/list_changed")}),sgr=Z.object({title:Z.optional(Z.string()),readOnlyHint:Z.optional(Z.boolean()),destructiveHint:Z.optional(Z.boolean()),idempotentHint:Z.optional(Z.boolean()),openWorldHint:Z.optional(Z.boolean())}).passthrough(),agr=Z.object({name:Z.string(),description:Z.optional(Z.string()),inputSchema:Z.object({type:Z.literal("object"),properties:Z.optional(Z.object({}).passthrough())}).passthrough(),annotations:Z.optional(sgr)}).passthrough(),cgr=Pie.extend({method:Z.literal("tools/list")}),jwe=Bie.extend({tools:Z.array(agr)}),Mie=oA.extend({content:Z.array(Z.union([Die,Nie,Lie,C0t])),isError:Z.boolean().default(!1).optional()}),Zoo=Mie.or(oA.extend({toolResult:Z.unknown()})),lgr=Cp.extend({method:Z.literal("tools/call"),params:iA.extend({name:Z.string(),arguments:Z.optional(Z.record(Z.unknown()))})}),bQ=QC.extend({method:Z.literal("notifications/tools/list_changed")}),E0t=Z.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),ugr=Cp.extend({method:Z.literal("logging/setLevel"),params:iA.extend({level:E0t})}),Vwe=QC.extend({method:Z.literal("notifications/message"),params:EQ.extend({level:E0t,logger:Z.optional(Z.string()),data:Z.unknown()})}),dgr=Z.object({name:Z.string().optional()}).passthrough(),fgr=Z.object({hints:Z.optional(Z.array(dgr)),costPriority:Z.optional(Z.number().min(0).max(1)),speedPriority:Z.optional(Z.number().min(0).max(1)),intelligencePriority:Z.optional(Z.number().min(0).max(1))}).passthrough(),pgr=Z.object({role:Z.enum(["user","assistant"]),content:Z.union([Die,Nie,Lie])}).passthrough(),mgr=Cp.extend({method:Z.literal("sampling/createMessage"),params:iA.extend({messages:Z.array(pgr),systemPrompt:Z.optional(Z.string()),includeContext:Z.optional(Z.enum(["none","thisServer","allServers"])),temperature:Z.optional(Z.number()),maxTokens:Z.number().int(),stopSequences:Z.optional(Z.array(Z.string())),metadata:Z.optional(Z.object({}).passthrough()),modelPreferences:Z.optional(fgr)})}),hgr=oA.extend({model:Z.string(),stopReason:Z.optional(Z.enum(["endTurn","stopSequence","maxTokens"]).or(Z.string())),role:Z.enum(["user","assistant"]),content:Z.discriminatedUnion("type",[Die,Nie,Lie])}),ggr=Z.object({type:Z.literal("ref/resource"),uri:Z.string()}).passthrough(),Agr=Z.object({type:Z.literal("ref/prompt"),name:Z.string()}).passthrough(),ygr=Cp.extend({method:Z.literal("completion/complete"),params:iA.extend({ref:Z.union([Agr,ggr]),argument:Z.object({name:Z.string(),value:Z.string()}).passthrough()})}),$we=oA.extend({completion:Z.object({values:Z.array(Z.string()).max(100),total:Z.optional(Z.number().int()),hasMore:Z.optional(Z.boolean())}).passthrough()}),Cgr=Z.object({uri:Z.string().startsWith("file://"),name:Z.optional(Z.string())}).passthrough(),Egr=Cp.extend({method:Z.literal("roots/list")}),vgr=oA.extend({roots:Z.array(Cgr)}),xgr=QC.extend({method:Z.literal("notifications/roots/list_changed")}),eso=Z.union([Rie,Whr,ygr,ugr,igr,ngr,zhr,Yhr,Khr,Xhr,Zhr,lgr,cgr]),tso=Z.union([Sie,kie,m0t,xgr]),rso=Z.union([o5,hgr,vgr]),nso=Z.union([Rie,mgr,Egr]),iso=Z.union([Sie,kie,Vwe,egr,Jhr,bQ,xQ]),oso=Z.union([o5,Qwe,$we,Gwe,Wwe,Uwe,qwe,Hwe,Mie,jwe]),i5=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var bgr=6e4,Fie=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(Sie,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(kie,r=>{this._onprogress(r)}),this.setRequestHandler(Rie,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new i5(zT.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=r=>{this._onerror(r)},this._transport.onmessage=(r,n)=>{vQ(r)||f0t(r)?this._onresponse(r):_ie(r)?this._onrequest(r,n):l0t(r)?this._onnotification(r):this._onerror(new Error(`Unknown message type: ${JSON.stringify(r)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new i5(zT.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let c=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(c===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:zT.MethodNotFound,message:"Method not found"}}).catch(f=>this._onerror(new Error(`Failed to send an error response: ${f}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(e.id,l);let u={signal:l.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(f=>this.notification(f,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((f,p,m)=>this.request(f,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id};Promise.resolve().then(()=>c(e,u)).then(f=>{var p;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:f,jsonrpc:"2.0",id:e.id})},f=>{var p,m;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(f.code)?f.code:zT.InternalError,message:(m=f.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(f=>this._onerror(new Error(`Failed to send response: ${f}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),c=this._timeoutInfo.get(i);if(c&&a&&c.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(l){a(l);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),vQ(e))n(e);else{let i=new i5(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((c,l)=>{var u,f,p,m,h;if(!this._transport){l(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(f=n?.signal)===null||f===void 0||f.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};n?.onprogress&&(this._progressHandlers.set(g,n.onprogress),y.params={...e.params,_meta:{progressToken:g}});let E=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(P=>this._onerror(new Error(`Failed to send cancellation: ${P}`))),l(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=n?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return l(_);try{let P=r.parse(_.result);c(P)}catch(P){l(P)}}}),(p=n?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;E((_=n?.signal)===null||_===void 0?void 0:_.reason)});let x=(m=n?.timeout)!==null&&m!==void 0?m:bgr,b=s(()=>E(new i5(zT.RequestTimeout,"Request timed out",{timeout:x})),"timeoutHandler");this._setupTimeout(g,x,n?.maxTotalTimeout,b,(h=n?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),l(_)})})}async notification(e,r){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let n={...e,jsonrpc:"2.0"};await this._transport.send(n,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function v0t(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(v0t,"mergeCapabilities");var Oie=class extends Fie{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=v0t(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:CQ,capabilities:this._capabilities,clientInfo:this._clientInfo}},Qwe,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!i0t.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},o5,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},$we,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},o5,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},Gwe,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},Wwe,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},Uwe,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},qwe,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},Hwe,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},o5,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},o5,r)}async callTool(e,r=Mie,n){return this.request({method:"tools/call",params:e},r,n)}async listTools(e,r){return this.request({method:"tools/list",params:e},jwe,r)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var x0t=Ne(require("events"));var KT=class{constructor(e,r,n){this.transport=null;this.emitter=new x0t.default;this.ctx=e,this.mcp=new Oie({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw os.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw os.error(this.ctx,"Connection failed:",r),await MC(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await Gft(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;cd(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r){let n=new oo([],"error");try{let i=await this.mcp.callTool({name:e,arguments:r});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);os.error(this.ctx,o),await MC(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Bi(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);os.error(this.ctx,o),await MC(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Bi(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));os.error(this.ctx,o),await MC(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Bi(o))}return n}addListeners(){this.mcp.onclose=()=>{os.info(this.ctx,`MCP server ${this.name} connection closed.`),cd(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{os.error(this.ctx,`MCP server ${this.name} error:`,e),MC(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(Vwe,e=>{let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":os.info(this.ctx,`MCP server ${this.name} log:`,r),cd(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"warning":os.warn(this.ctx,`MCP server ${this.name} log:`,r),qR(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":os.error(this.ctx,`MCP server ${this.name} log:`,r),MC(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;default:os.info(this.ctx,`MCP server ${this.name} log:`,r),cd(this.ctx,{message:`Notification message: ${r}`,server:this.name});break}})}formatToolResult(e){let r=new oo([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Bi(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new ER({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};d();d();d();var Qie=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function zwe(t){}s(zwe,"noop");function Uie(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=zwe,onError:r=zwe,onRetry:n=zwe,onComment:i}=t,o="",a=!0,c,l="",u="";function f(y){let E=a?y.replace(/^\xEF\xBB\xBF/,""):y,[x,b]=Igr(`${o}${E}`);for(let _ of x)p(_);o=b,a=!1}s(f,"feed");function p(y){if(y===""){h();return}if(y.startsWith(":")){i&&i(y.slice(y.startsWith(": ")?2:1));return}let E=y.indexOf(":");if(E!==-1){let x=y.slice(0,E),b=y[E+1]===" "?2:1,_=y.slice(E+b);m(x,_,y);return}m(y,"",y)}s(p,"parseLine");function m(y,E,x){switch(y){case"event":u=E;break;case"data":l=`${l}${E}
`;break;case"id":c=E.includes("\0")?void 0:E;break;case"retry":/^\d+$/.test(E)?n(parseInt(E,10)):r(new Qie(`Invalid \`retry\` value: "${E}"`,{type:"invalid-retry",value:E,line:x}));break;default:r(new Qie(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:E,line:x}));break}}s(m,"processField");function h(){l.length>0&&e({id:c,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),c=void 0,l="",u=""}s(h,"dispatchEvent");function g(y={}){o&&y.consume&&p(o),a=!0,c=void 0,l="",u="",o=""}return s(g,"reset"),{feed:f,reset:g}}s(Uie,"createParser");function Igr(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let c=t.slice(n,a);e.push(c),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(Igr,"splitLines");var Hie=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(b0t(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(b0t(this),r)}};function Tgr(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(Tgr,"syntaxError");function Ywe(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(Ywe).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${Ywe(t.cause)}`:t.message:`${t}`}s(Ywe,"flattenError");function b0t(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(b0t,"inspectableError");var T0t=s(t=>{throw TypeError(t)},"__typeError"),n_e=s((t,e,r)=>e.has(t)||T0t("Cannot "+r),"__accessCheck"),Gi=s((t,e,r)=>(n_e(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),ll=s((t,e,r)=>e.has(t)?T0t("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),ga=s((t,e,r,n)=>(n_e(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),vv=s((t,e,r)=>(n_e(t,e,"access private method"),r),"__privateMethod"),n0,s5,x8,qie,Wie,wQ,T8,_Q,JT,b8,w8,I8,IQ,sA,Kwe,Jwe,Xwe,I0t,Zwe,e_e,TQ,t_e,r_e,a5=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),ll(this,sA),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,ll(this,n0),ll(this,s5),ll(this,x8),ll(this,qie),ll(this,Wie),ll(this,wQ),ll(this,T8),ll(this,_Q,null),ll(this,JT),ll(this,b8),ll(this,w8,null),ll(this,I8,null),ll(this,IQ,null),ll(this,Jwe,async o=>{var a;Gi(this,b8).reset();let{body:c,redirected:l,status:u,headers:f}=o;if(u===204){vv(this,sA,TQ).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(l?ga(this,x8,new URL(o.url)):ga(this,x8,void 0),u!==200){vv(this,sA,TQ).call(this,`Non-200 status code (${u})`,u);return}if(!(f.get("content-type")||"").startsWith("text/event-stream")){vv(this,sA,TQ).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(Gi(this,n0)===this.CLOSED)return;ga(this,n0,this.OPEN);let p=new Event("open");if((a=Gi(this,IQ))==null||a.call(this,p),this.dispatchEvent(p),typeof c!="object"||!c||!("getReader"in c)){vv(this,sA,TQ).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=c.getReader(),g=!0;do{let{done:y,value:E}=await h.read();E&&Gi(this,b8).feed(m.decode(E,{stream:!y})),y&&(g=!1,Gi(this,b8).reset(),vv(this,sA,t_e).call(this))}while(g)}),ll(this,Xwe,o=>{ga(this,JT,void 0),!(o.name==="AbortError"||o.type==="aborted")&&vv(this,sA,t_e).call(this,Ywe(o))}),ll(this,Zwe,o=>{typeof o.id=="string"&&ga(this,_Q,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:Gi(this,x8)?Gi(this,x8).origin:Gi(this,s5).origin,lastEventId:o.id||""});Gi(this,I8)&&(!o.event||o.event==="message")&&Gi(this,I8).call(this,a),this.dispatchEvent(a)}),ll(this,e_e,o=>{ga(this,wQ,o)}),ll(this,r_e,()=>{ga(this,T8,void 0),Gi(this,n0)===this.CONNECTING&&vv(this,sA,Kwe).call(this)});try{if(e instanceof URL)ga(this,s5,e);else if(typeof e=="string")ga(this,s5,new URL(e,wgr()));else throw new Error("Invalid URL")}catch{throw Tgr("An invalid or illegal string was specified")}ga(this,b8,Uie({onEvent:Gi(this,Zwe),onRetry:Gi(this,e_e)})),ga(this,n0,this.CONNECTING),ga(this,wQ,3e3),ga(this,Wie,(n=r?.fetch)!=null?n:globalThis.fetch),ga(this,qie,(i=r?.withCredentials)!=null?i:!1),vv(this,sA,Kwe).call(this)}get readyState(){return Gi(this,n0)}get url(){return Gi(this,s5).href}get withCredentials(){return Gi(this,qie)}get onerror(){return Gi(this,w8)}set onerror(e){ga(this,w8,e)}get onmessage(){return Gi(this,I8)}set onmessage(e){ga(this,I8,e)}get onopen(){return Gi(this,IQ)}set onopen(e){ga(this,IQ,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){Gi(this,T8)&&clearTimeout(Gi(this,T8)),Gi(this,n0)!==this.CLOSED&&(Gi(this,JT)&&Gi(this,JT).abort(),ga(this,n0,this.CLOSED),ga(this,JT,void 0))}};n0=new WeakMap,s5=new WeakMap,x8=new WeakMap,qie=new WeakMap,Wie=new WeakMap,wQ=new WeakMap,T8=new WeakMap,_Q=new WeakMap,JT=new WeakMap,b8=new WeakMap,w8=new WeakMap,I8=new WeakMap,IQ=new WeakMap,sA=new WeakSet,Kwe=s(function(){ga(this,n0,this.CONNECTING),ga(this,JT,new AbortController),Gi(this,Wie)(Gi(this,s5),vv(this,sA,I0t).call(this)).then(Gi(this,Jwe)).catch(Gi(this,Xwe))},"connect_fn"),Jwe=new WeakMap,Xwe=new WeakMap,I0t=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Gi(this,_Q)?{"Last-Event-ID":Gi(this,_Q)}:void 0},cache:"no-store",signal:(t=Gi(this,JT))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),Zwe=new WeakMap,e_e=new WeakMap,TQ=s(function(t,e){var r;Gi(this,n0)!==this.CLOSED&&ga(this,n0,this.CLOSED);let n=new Hie("error",{code:e,message:t});(r=Gi(this,w8))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),t_e=s(function(t,e){var r;if(Gi(this,n0)===this.CLOSED)return;ga(this,n0,this.CONNECTING);let n=new Hie("error",{code:e,message:t});(r=Gi(this,w8))==null||r.call(this,n),this.dispatchEvent(n),ga(this,T8,setTimeout(Gi(this,r_e),Gi(this,wQ)))},"scheduleReconnect_fn"),r_e=new WeakMap,a5.CONNECTING=0,a5.OPEN=1,a5.CLOSED=2;function wgr(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(wgr,"getBaseURL");d();d();var i_e;i_e=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function _gr(t){return(await i_e).getRandomValues(new Uint8Array(t))}s(_gr,"getRandomValues");async function Sgr(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await _gr(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(Sgr,"random");async function Rgr(t){return await Sgr(t)}s(Rgr,"generateVerifier");async function kgr(t){let e=await(await i_e).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(kgr,"generateChallenge");async function o_e(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await Rgr(t),r=await kgr(e);return{code_verifier:e,code_challenge:r}}s(o_e,"pkceChallenge");d();var w0t=Z.object({issuer:Z.string(),authorization_endpoint:Z.string(),token_endpoint:Z.string(),registration_endpoint:Z.string().optional(),scopes_supported:Z.array(Z.string()).optional(),response_types_supported:Z.array(Z.string()),response_modes_supported:Z.array(Z.string()).optional(),grant_types_supported:Z.array(Z.string()).optional(),token_endpoint_auth_methods_supported:Z.array(Z.string()).optional(),token_endpoint_auth_signing_alg_values_supported:Z.array(Z.string()).optional(),service_documentation:Z.string().optional(),revocation_endpoint:Z.string().optional(),revocation_endpoint_auth_methods_supported:Z.array(Z.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:Z.array(Z.string()).optional(),introspection_endpoint:Z.string().optional(),introspection_endpoint_auth_methods_supported:Z.array(Z.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:Z.array(Z.string()).optional(),code_challenge_methods_supported:Z.array(Z.string()).optional()}).passthrough(),s_e=Z.object({access_token:Z.string(),token_type:Z.string(),expires_in:Z.number().optional(),scope:Z.string().optional(),refresh_token:Z.string().optional()}).strip(),qso=Z.object({error:Z.string(),error_description:Z.string().optional(),error_uri:Z.string().optional()}),Pgr=Z.object({redirect_uris:Z.array(Z.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:Z.string().optional(),grant_types:Z.array(Z.string()).optional(),response_types:Z.array(Z.string()).optional(),client_name:Z.string().optional(),client_uri:Z.string().optional(),logo_uri:Z.string().optional(),scope:Z.string().optional(),contacts:Z.array(Z.string()).optional(),tos_uri:Z.string().optional(),policy_uri:Z.string().optional(),jwks_uri:Z.string().optional(),jwks:Z.any().optional(),software_id:Z.string().optional(),software_version:Z.string().optional()}).strip(),Bgr=Z.object({client_id:Z.string(),client_secret:Z.string().optional(),client_id_issued_at:Z.number().optional(),client_secret_expires_at:Z.number().optional()}).strip(),_0t=Pgr.merge(Bgr),Hso=Z.object({error:Z.string(),error_description:Z.string().optional()}).strip(),Wso=Z.object({token:Z.string(),token_type_hint:Z.string().optional()}).strip();var i0=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};async function XT(t,{serverUrl:e,authorizationCode:r}){let n=await Dgr(e),i=await Promise.resolve(t.clientInformation());if(!i){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let l=await Fgr(e,{metadata:n,clientMetadata:t.clientMetadata});await t.saveClientInformation(l),i=l}if(r!==void 0){let l=await t.codeVerifier(),u=await Lgr(e,{metadata:n,clientInformation:i,authorizationCode:r,codeVerifier:l,redirectUri:t.redirectUrl});return await t.saveTokens(u),"AUTHORIZED"}let o=await t.tokens();if(o?.refresh_token)try{let l=await Mgr(e,{metadata:n,clientInformation:i,refreshToken:o.refresh_token});return await t.saveTokens(l),"AUTHORIZED"}catch(l){console.error("Could not refresh OAuth tokens:",l)}let{authorizationUrl:a,codeVerifier:c}=await Ngr(e,{metadata:n,clientInformation:i,redirectUrl:t.redirectUrl});return await t.saveCodeVerifier(c),await t.redirectToAuthorization(a),"REDIRECT"}s(XT,"auth");async function Dgr(t,e){var r;let n=new URL("/.well-known/oauth-authorization-server",t),i;try{i=await fetch(n,{headers:{"MCP-Protocol-Version":(r=e?.protocolVersion)!==null&&r!==void 0?r:CQ}})}catch(o){if(o instanceof TypeError)i=await fetch(n);else throw o}if(i.status!==404){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return w0t.parse(await i.json())}}s(Dgr,"discoverOAuthMetadata");async function Ngr(t,{metadata:e,clientInformation:r,redirectUrl:n}){let i="code",o="S256",a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support response type ${i}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(o))throw new Error(`Incompatible auth server: does not support code challenge method ${o}`)}else a=new URL("/authorize",t);let c=await o_e(),l=c.code_verifier,u=c.code_challenge;return a.searchParams.set("response_type",i),a.searchParams.set("client_id",r.client_id),a.searchParams.set("code_challenge",u),a.searchParams.set("code_challenge_method",o),a.searchParams.set("redirect_uri",String(n)),{authorizationUrl:a,codeVerifier:l}}s(Ngr,"startAuthorization");async function Lgr(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o}){let a="authorization_code",c;if(e){if(c=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(a))throw new Error(`Incompatible auth server: does not support grant type ${a}`)}else c=new URL("/token",t);let l=new URLSearchParams({grant_type:a,client_id:r.client_id,code:n,code_verifier:i,redirect_uri:String(o)});r.client_secret&&l.set("client_secret",r.client_secret);let u=await fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return s_e.parse(await u.json())}s(Lgr,"exchangeAuthorization");async function Mgr(t,{metadata:e,clientInformation:r,refreshToken:n}){let i="refresh_token",o;if(e){if(o=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support grant type ${i}`)}else o=new URL("/token",t);let a=new URLSearchParams({grant_type:i,client_id:r.client_id,refresh_token:n});r.client_secret&&a.set("client_secret",r.client_secret);let c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!c.ok)throw new Error(`Token refresh failed: HTTP ${c.status}`);return s_e.parse(await c.json())}s(Mgr,"refreshAuthorization");async function Fgr(t,{metadata:e,clientMetadata:r}){let n;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");n=new URL(e.registration_endpoint)}else n=new URL("/register",t);let i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(`Dynamic client registration failed: HTTP ${i.status}`);return _0t.parse(await i.json())}s(Fgr,"registerClient");var a_e=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},Gie=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider}async _authThenStart(){var e;if(!this._authProvider)throw new i0("No auth provider");let r;try{r=await XT(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new i0;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let r=await this._authProvider.tokens();r&&(e.Authorization=`Bearer ${r.access_token}`)}return e}_startOrAuth(){return new Promise((e,r)=>{var n;this._eventSource=new a5(this._url.href,(n=this._eventSourceInit)!==null&&n!==void 0?n:{fetch:s((i,o)=>this._commonHeaders().then(a=>fetch(i,{...o,headers:{...a,Accept:"text/event-stream"}})),"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var o;if(i.code===401&&this._authProvider){this._authThenStart().then(e,r);return}let a=new a_e(i.code,i.message,i);r(a),(o=this.onerror)===null||o===void 0||o.call(this,a)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var o;let a=i;try{if(this._endpoint=new URL(a.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(c){r(c),(o=this.onerror)===null||o===void 0||o.call(this,c),this.close();return}e()}),this._eventSource.onmessage=i=>{var o,a;let c=i,l;try{l=YT.parse(JSON.parse(c.data))}catch(u){(o=this.onerror)===null||o===void 0||o.call(this,u);return}(a=this.onmessage)===null||a===void 0||a.call(this,l)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new i0("No auth provider");if(await XT(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new i0("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders(),a=new Headers({...o,...(r=this._requestInit)===null||r===void 0?void 0:r.headers});a.set("content-type","application/json");let c={...this._requestInit,method:"POST",headers:a,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},l=await fetch(this._endpoint,c);if(!l.ok){if(l.status===401&&this._authProvider){if(await XT(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new i0;return this.send(e)}let u=await l.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${l.status}): ${u}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}};var jie=class extends KT{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){return new Gie(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(bQ,r=>{os.info(this.ctx,"Tool list changed, refreshing tools..."),cd(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(HE)}),this.mcp.setNotificationHandler(xQ,r=>{os.info(this.ctx,"Prompts list changed, refreshing tools..."),cd(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(HE)})}};d();d();var Apt=Ne(hpt(),1),SQ=Ne(require("node:process"),1),ypt=require("node:stream");d();var $ie=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),uAr(r)}clear(){this._buffer=void 0}};function uAr(t){return YT.parse(JSON.parse(t))}s(uAr,"deserializeMessage");function gpt(t){return JSON.stringify(t)+`
`}s(gpt,"serializeMessage");var dAr=SQ.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function fAr(){let t={};for(let e of dAr){let r=SQ.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(fAr,"getDefaultEnvironment");var zie=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new $ie,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new ypt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,c,l;this._process=(0,Apt.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:fAr(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:SQ.default.platform==="win32"&&pAr(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var f,p;if(u.name==="AbortError"){(f=this.onclose)===null||f===void 0||f.call(this);return}r(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var f;this._process=void 0,(f=this.onclose)===null||f===void 0||f.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var f;(f=this.onerror)===null||f===void 0||f.call(this,u)}),(c=this._process.stdout)===null||c===void 0||c.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(l=this._process.stdout)===null||l===void 0||l.on("error",u=>{var f;(f=this.onerror)===null||f===void 0||f.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=gpt(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function pAr(){return"type"in SQ.default}s(pAr,"isElectron");var Yie=class extends KT{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...Wft(),...r.env||{}},r.stderr="pipe",new zie(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{qR(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}};d();d();d();var Kie=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=Uie({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var mAr={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},RQ=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},Jie=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:mAr}async _authThenStart(){var e;if(!this._authProvider)throw new i0("No auth provider");let r;try{r=await XT(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new i0;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._sessionId&&(r["mcp-session-id"]=this._sessionId),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}async _startOrAuthSse(e){var r,n;let{resumptionToken:i}=e;try{let o=await this._commonHeaders();o.set("Accept","text/event-stream"),i&&o.set("last-event-id",i);let a=await fetch(this._url,{method:"GET",headers:o,signal:(r=this._abortController)===null||r===void 0?void 0:r.signal});if(!a.ok){if(a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new RQ(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(o){throw(n=this.onerror)===null||n===void 0||n.call(this,o),o}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var c;(c=this.onerror)===null||c===void 0||c.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r){if(!e)return;let{onresumptiontoken:n,replayMessageId:i}=r,o;s(async()=>{var c,l,u,f;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new Kie).getReader();for(;;){let{value:m,done:h}=await p.read();if(h)break;if(m.id&&(o=m.id,n?.(m.id)),!m.event||m.event==="message")try{let g=YT.parse(JSON.parse(m.data));i!==void 0&&vQ(g)&&(g.id=i),(c=this.onmessage)===null||c===void 0||c.call(this,g)}catch(g){(l=this.onerror)===null||l===void 0||l.call(this,g)}}}catch(p){if((u=this.onerror)===null||u===void 0||u.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:n,replayMessageId:i},0)}catch(m){(f=this.onerror)===null||f===void 0||f.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new i0("No auth provider");if(await XT(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new i0("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o;try{let{resumptionToken:a,onresumptiontoken:c}=r||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:_ie(e)?e.id:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let l=await this._commonHeaders();l.set("content-type","application/json"),l.set("accept","application/json, text/event-stream");let u={...this._requestInit,method:"POST",headers:l,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},f=await fetch(this._url,u),p=f.headers.get("mcp-session-id");if(p&&(this._sessionId=p),!f.ok){if(f.status===401&&this._authProvider){if(await XT(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new i0;return this.send(e)}let y=await f.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${f.status}): ${y}`)}if(f.status===202){h0t(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let h=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,g=f.headers.get("content-type");if(h)if(g?.includes("text/event-stream"))this._handleSseStream(f.body,{onresumptiontoken:c});else if(g?.includes("application/json")){let y=await f.json(),E=Array.isArray(y)?y.map(x=>YT.parse(x)):[YT.parse(y)];for(let x of E)(i=this.onmessage)===null||i===void 0||i.call(this,x)}else throw new RQ(-1,`Unexpected content type: ${g}`)}catch(a){throw(o=this.onerror)===null||o===void 0||o.call(this,a),a}}get sessionId(){return this._sessionId}async terminateSession(){var e,r;if(this._sessionId)try{let n=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:n,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},o=await fetch(this._url,i);if(!o.ok&&o.status!==405)throw new RQ(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(n){throw(r=this.onerror)===null||r===void 0||r.call(this,n),n}}};var Xie=class extends KT{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){return new Jie(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(bQ,r=>{os.info(this.ctx,"Tool list changed, refreshing tools..."),cd(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(HE)}),this.mcp.setNotificationHandler(xQ,r=>{os.info(this.ctx,"Prompts list changed, refreshing tools..."),cd(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(HE)})}};d();var Zie=class extends ST{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new mc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(rC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var Cpt=Ne(Lc());var eoe=class t extends Ym{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new yie;this.ctx=r}static{s(this,"CLSMCPManager")}static{this.notificationType=new Cpt.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(r){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(r,n,i){let o=this.getTool(r,n),a=this.getServerPrefix(r);if(!o){os.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(id).getToolById(`${r}.${n}`)||this.registerTool(r,a,o):this.unregisterTool(r,n)}async callTool(r,n,i){let o=this.MCPServersMap.get(r);if(o){let{status:a,server:c}=o;if(a==="running"&&c)return await c.callTool(n,i)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let c=a.name,l=this.getToolStatus(n,c);l&&(a._status=l)}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:o})}else i.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:i.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));os.error(this.ctx,a),await MC(this.ctx,{message:a,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}getServerPrefix(r){let i=this.getAllTools().find(o=>o.name===r);return i?i.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await cd(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new jie(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new Xie(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new Yie(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(HE,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await cd(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(os.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let c=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;os.info(this.ctx,c),cd(this.ctx,{message:c,server:r.name});let l={...r,type:"sse"};return await this.addServer(l)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await MC(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(wc).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(vr).connection.sendNotification(t.notificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:i,tools:o}=r;for(let a of o)this.registerTool(n,i,a)}}registerTool(r,n,i){let{name:o,description:a,inputSchema:c,_status:l,_nameForModel:u,annotations:f}=i;os.debug(this.ctx,"register MCP Tool:",{...i}),l!=="disabled"&&this.ctx.get(id).registerTool(new Zie({serverName:r,serverNamePrefix:n,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:c,annotations:f},p=>(os.debug(this.ctx,"copilot MCP Invoker:",r,o,p),this.callTool(r,o,p))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(id).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await cd(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(HE),await i.cleanup())}this.MCPServersMap.clear()}};d();var Ept=Ne(Lc());var toe=class t extends Dg{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new Ept.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(vr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};d();var noe=Ne(Lc());var hAr=new noe.ProtocolRequestType("copilot/showPanelMessageRequest"),gAr=new noe.ProtocolNotificationType("copilot/showPanelMessage"),roe=class extends iD{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(vr).connection.sendNotification(gAr,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(vr).connection,i;try{i=await n.sendRequest(hAr,r)}catch(c){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${dE(c)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};d();d();var AAr=new wt("fetcher"),yAr="https://default.exp-tas.com/",ioe=class extends ai{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(Du(i)||`${r}/`.startsWith(yAr))throw i;AAr.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var vpt=new wt("fetcher"),ooe=class extends ai{constructor(r,n=new f8(r),i=new u8(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new ioe(r,n,i,()=>{vpt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(iv).once(()=>{this.updateFetcher()}),r.get($g).onConfigChange(Rt.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=vi(r,Rt.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(us).getCapabilities().fetch??!1}updateFetcher(){let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=vi(this.ctx,Rt.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(vpt.debug(this.ctx,n),this.currentFetcher=r)}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};d();var soe=class extends wc{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(vr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}};d();d();var xpt=Ne(require("crypto")),bpt=require("os");var CAr=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function EAr(t){let e=t.replace(/-/g,":").toLowerCase();return!CAr.has(e)}s(EAr,"validateMacAddress");function vAr(){let t=(0,bpt.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(EAr(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(vAr,"getMac");var A_e;function xAr(){try{let t=vAr();return xpt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(xAr,"getMacMachineId");function Ipt(){return A_e||(A_e=xAr()||cr()),A_e}s(Ipt,"getMachineId");var bAr=cr()+Date.now(),Tpt=new gs(bAr,Ipt());d();EV();var aoe=class extends nu{constructor(r,n=new y_e){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(vr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},y_e=class extends nu{static{s(this,"SpawnUrlOpener")}async open(e){await PL(e)}};d();d();var coe=class extends vte{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(zg).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(zg).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(zg).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(c=>c.document).filter(c=>c!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(c=>c.document).filter(c=>c!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var loe=class extends rd{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new coe(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(us).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function wpt(t){let e=new $g(process.env),r=lnt(e);r.set($g,e),r.set(iv,new iv),r.set(ai,new ooe(r)),r.set(ka,new ka(r)),LTe(r,{});let n=B7e();r.set(fu,n);let i=new dQ(r);r.set(jr,i),r.set(dQ,i);let o=new __(r,n);r.set(__,o),r.set(Dn,new Dn(r,process.env)),r.set(o2,new o2),r.set(Af,new Af(r,"agent")),r.set(gs,Tpt),r.set(rn,new Qte),r.set(UR,Eft()),r.set(_s,new _s),r.set(ko,Hft),r.set(C2,new rie(r)),r.set(rd,new loe(r)),r.set(zg,new zg(r)),r.set(Rl,new Rl),r.set(uc,SY(r,eut)),r.set(_m,new _m(r)),r.set(Ry,new A3),fst(r),xte(r),kst(r),_Ge(r),r.set(vr,new vr(r,t)),r.set(wc,new soe(r)),r.set(iD,new roe(r)),r.set(nu,new aoe(r)),r.set(po,new Aie(r)),r.set(pQ,new pQ(r));let a=new GT(r);return r.set(br,a),r.set(GT,a),r.set(vd,new nD(r,process.env)),r.set(_l,new _l(r)),Lft(r),Mnt(r),r.set(Yd,new Yd),r.set(qT,new qT),r.set(Zg,new Zg),r.set(j0,new iie),r.set(BC,new BC),r.set(yg,new Cte(r)),r.set(Py,new kD),r.set(jg,new jg(r)),r.set(qE,new qE(r)),r.set(Uc,new Uc(r)),r.set(vu,new mie(r)),r.set(iT,new gie(r)),r.set(rC,new hie(r)),r.set(id,new id(r)),r.set(ev,new ev(r)),r.set(Vg,new Vg(r)),r.set(Ym,new eoe(r)),r.set(Dg,new toe(r)),r.set(nC,new nC),r.set($f,new $f),r.set(lC,new lC(r)),r}s(wpt,"createLanguageServerContext");d();var C_e=require("events"),kQ=Ne(require("fs"));EV();var doe=Ne(Lc());d();var Spt=Ne(require("fs")),Rpt=Ne(require("http")),R8=Ne(require("path"));var uoe=class{constructor(e,r){this.port=e;let n;this.server=Rpt.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",c=>{_pt(o,JSON.stringify(c))});return;case"/stdout":r.on("write",c=>{_pt(o,JSON.stringify(c))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;R8.basename(__dirname)!=="debug"&&(a=R8.dirname(__dirname)),n??=Spt.readFileSync(R8.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function _pt(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(_pt,"writeData");var E_e=class extends doe.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},v_e=class extends doe.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function kpt(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new C_e.EventEmitter;let c=new uoe(i,n).listen();i===0&&await PL(`http://localhost:${c.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let c=Date.now().toString();o==="1"||o==="true"?a=kQ.openSync(`stdio${c}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=kQ.openSync(o.replaceAll("%s",c),"w"))}catch(c){console.error(c)}if(a){let c=s(l=>{a&&kQ.appendFile(a,l,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new C_e.EventEmitter,n.on("read",l=>c(`<-- ${JSON.stringify(l)}
`)),n.on("write",l=>c(`--> ${JSON.stringify(l)}
`))}return n&&(e=new v_e(e,n),r=new E_e(r,n)),[e,r]}s(kpt,"wrapTransports");async function Dpt(){let t=hqe(process.argv.slice(2)).version(new lo().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new ah.IPCMessageReader(process),n=new ah.IPCMessageWriter(process)):e.stdio?(r=new ah.StreamMessageReader(process.stdin),n=new ah.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await xv.mkdtemp(Ppt.default.tmpdir()+"/github-copilot-"));try{let c=Jpe(),l=JSON.parse(await xv.readFile(PQ.join(c,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await xv.readFile(PQ.join(c,"apps.json"),"utf8"))}catch{}let f=!1;for(let p of Object.keys(l)){let m=`${p}:${$h}`;u[m]||!l[p].user||!l[p].oauth_token||(u[m]={user:l[p].user,oauth_token:l[p].oauth_token,githubAppId:$h},f=!0)}f&&await xv.writeFile(PQ.join(c,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await xv.rm(PQ.join(c,"hosts.json"),{force:!0})}catch{}let i=(0,ah.createConnection)(ah.ProposedFeatures.all,...await kpt(process.env,r,n)),o=wpt(i);console=AQe(o);let a=o.get(vr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(Dpt,"main");Bpt.isMainThread?require.main===module&&Dpt():hQe()&&gQe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cdric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
